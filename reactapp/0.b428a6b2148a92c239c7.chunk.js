webpackJsonp([0],Array(837).concat([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":u(t))&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":u(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){var t=window.serverVars,n=t.theQuery,r=(0,U.parseOQLQuery)(n),o=t.genesetIds.length?t.genesetIds.split(/\s+/):[],a=new k.ResultsViewPageStore,i=[];if(g.includes(["all","w_mut_cna","w_mut","w_cna"],t.caseSetProperties.case_set_id))for(var s=t.studySampleObj,l=Object.keys(s),u=0;u<l.length;u++){var c=l[u];i=i.concat(s[c].map(function(e){return{sampleId:e,studyId:c}}))}else if(t.caseIds)i=i.concat(t.caseIds.trim().split(/\+/).map(function(e){var t=e.split(":");return{studyId:t[0],sampleId:t[1]}}));else for(var l=Object.keys(t.studySampleListMap),u=0;u<l.length;u++)i.push({sampleListId:t.studySampleListMap[l[u]],studyId:l[u]});return a.samplesSpecification=i,a.hugoGeneSymbols=g.map(r,function(e){return e.gene}),a.genesetIds=o,a.selectedMolecularProfileIds=t.molecularProfiles,a.rppaScoreThreshold=t.rppaScoreThreshold,a.zScoreThreshold=t.zScoreThreshold,a.oqlQuery=n,a.queryStore=e,a.cohortIdsList=t.cohortIdsList,a}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d="function"==typeof Symbol&&"symbol"===u(Symbol.iterator)?function(e){return void 0===e?"undefined":u(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":u(e)},p=n(1),f=o(p),h=n(34),m=o(h),y=n(3),g=o(y),v=n(90),b=r(v),_=n(33),w=n(998),x=r(w),S=n(312),C=r(S),k=n(122),E=n(1130),M=r(E),A=n(1134),T=r(A),O=n(1166),P=r(O),j=n(1170),I=r(j),D=n(1171),N=r(D),R=n(313),L=r(R),F=n(64),z=r(F),B=n(1178),V=r(B),G=n(1181),H=r(G);n(1182);var U=n(93),q=n(1183),W=r(q),Z=n(1223),Y=r(Z),K=n(854),X=r(K),Q=n(316),J=n(1225),$=r(J),ee=n(1240),te=r(ee),ne=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":d(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};L.default.plugins.register({beforeDraw:function(e){var t=e.chart.ctx;t.fillStyle="white",t.fillRect(0,0,e.chart.width,e.chart.height)}});var re=window,oe=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.showTwitter=!0===z.default.showTwitter;var r=l(e.queryStore);return n.resultsViewPageStore=r,window.resultsViewPageStore=r,n.exposeComponentRenderersToParentScript(e),re.renderQuerySummary(document.getElementById("main_smry_info_div")),(0,b.default)(document).ready(function(){(!window.serverVars.theQuery.trim().length||(0,U.genes)(window.serverVars.theQuery).length<=1)&&(0,b.default)("a#mutex-result-tab").parent().hide(),window.serverVars.theQuery.trim().length&&0!=(0,U.genes)(window.serverVars.theQuery).length||((0,b.default)("a#cancer-types-result-tab").parent().hide(),(0,b.default)("a#plots-result-tab").parent().hide(),(0,b.default)("a#mutation-result-tab").parent().hide(),(0,b.default)("a#coexp-result-tab").parent().hide(),(0,b.default)("a#enrichments-result-tab").parent().hide(),(0,b.default)("a#survival-result-tab").parent().hide(),(0,b.default)("a#network-result-tab").parent().hide(),(0,b.default)("a#igv-result-tab").parent().hide(),(0,b.default)("a#data-download-result-tab").parent().hide()),"null"!==re.cancerStudyIdList?(0,Q.getGAInstance)().event("results view","show",{eventLabel:re.cancerStudyIdList}):!1===g.includes(["all","null"],re.cancerStudyId)&&(0,Q.getGAInstance)().event("results view","show",{eventLabel:re.cancerStudyId})}),n}return s(t,e),c(t,[{key:"componentDidMount",value:function(){this.mountOverlappingStudiesWarning()}},{key:"mountOverlappingStudiesWarning",value:function(){var e=this,t=(0,b.default)('<div class="cbioportal-frontend"></div>').insertBefore("#tabs");m.render(f.createElement(_.Observer,null,function(){return e.resultsViewPageStore.studies.isComplete,f.createElement("span",null)}),t[0])}},{key:"exposeComponentRenderersToParentScript",value:function(e){var t=this;(0,C.default)("renderOncoprint",function(e){function n(e){(0,b.default)("#oncoprint-result-tab").click(e)}return f.createElement(W.default,{divId:e.divId,store:t.resultsViewPageStore,routing:t.props.routing,addOnBecomeVisibleListener:n})}),(0,C.default)("renderCNSegments",function(){return f.createElement(H.default,{store:t.resultsViewPageStore})}),(0,C.default)("renderQuerySummary",function(){return f.createElement(Y.default,{queryStore:e.queryStore,store:t.resultsViewPageStore})}),(0,C.default)("renderMutationsTab",function(){return f.createElement("div",null,f.createElement(x.default,{show:t.resultsViewPageStore.ajaxErrors.length>0,onHide:function(){t.resultsViewPageStore.clearErrors()}}),f.createElement(T.default,{store:t.resultsViewPageStore}))}),(0,C.default)("renderCancerTypeSummary",function(){return f.createElement(_.Observer,null,function(){var e=t.resultsViewPageStore.samplesExtendedWithClinicalData.isComplete&&t.resultsViewPageStore.alterationsByGeneBySampleKey.isComplete,n=t.resultsViewPageStore.samplesExtendedWithClinicalData.isPending&&t.resultsViewPageStore.alterationsByGeneBySampleKey.isPending;return e?f.createElement("div",null,f.createElement(x.default,{show:t.resultsViewPageStore.ajaxErrors.length>0,onHide:function(){t.resultsViewPageStore.clearErrors()}}),f.createElement(M.default,{genes:t.resultsViewPageStore.genes.result,samplesExtendedWithClinicalData:t.resultsViewPageStore.samplesExtendedWithClinicalData.result,alterationsByGeneBySampleKey:t.resultsViewPageStore.alterationsByGeneBySampleKey.result,studies:t.resultsViewPageStore.studies.result,studyMap:t.resultsViewPageStore.physicalStudySet})):n?f.createElement(X.default,{isLoading:!0}):f.createElement("div",null)})}),(0,C.default)("renderMutExTab",function(){return f.createElement("div",null,f.createElement(P.default,{store:t.resultsViewPageStore}))}),(0,C.default)("renderBookmark",function(){return f.createElement("div",null,f.createElement(V.default,{store:t.resultsViewPageStore,getParameters:t.addThisParameters}))}),(0,C.default)("renderSurvivalTab",function(){return f.createElement("div",{className:"cbioportal-frontend"},f.createElement(I.default,{store:t.resultsViewPageStore}))}),(0,C.default)("renderDownloadTab",function(){return f.createElement("div",null,f.createElement(N.default,{store:t.resultsViewPageStore}))}),(0,C.default)("renderCoExpressionTab",function(){return f.createElement("div",{className:"cbioportal-frontend"},f.createElement($.default,{store:t.resultsViewPageStore}))}),(0,C.default)("renderEnrichmentsTab",function(){return f.createElement("div",{className:"cbioportal-frontend"},f.createElement(te.default,{store:t.resultsViewPageStore}))})}},{key:"render",value:function(){return null}},{key:"addThisParameters",get:function(){var e=this.showTwitter?{twitter:{hashtags:"cbioportal"}}:{};return{setup:function(t){return{url:t,passthrough:e}},className:"addthis_inline_share_toolbox"+(this.showTwitter?"":"_ubww")}}}]),t}(f.Component);oe=ne([(0,_.inject)("routing"),(0,_.inject)("queryStore"),_.observer],oe),t.default=oe},,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(s),u=n(177),c=n(176),d=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),i(t,[{key:"render",value:function(){return l.createElement(c.If,{condition:this.props.isLoading},l.createElement(c.Then,null,l.createElement("div",null,l.createElement(u.ThreeBounce,{style:this.props.style||{display:"inline-block",marginLeft:10}}))))}}]),t}(l.Component);t.default=d},function(e,t){e.exports={portalWidth:"styles-module__portalWidth__1P_Zv",QueryAndDownloadTabs:"styles-module__QueryAndDownloadTabs__ivykJ",QueryContainer:"styles-module__QueryContainer__2cy7B",errorMessage:"styles-module__errorMessage__32yZg",oqlMessage:"styles-module__oqlMessage__3xhe8",CancerStudySelector:"styles-module__CancerStudySelector__1FU50",MolecularProfileSelector:"styles-module__MolecularProfileSelector__rlomm",DataTypePrioritySelector:"styles-module__DataTypePrioritySelector__1_VUf",CaseSetSelector:"styles-module__CaseSetSelector__YteFo",GeneSetSelector:"styles-module__GeneSetSelector__2DY1b",SelectedStudiesWindow:"styles-module__SelectedStudiesWindow__NAG6X",CancerStudySelectorHeader:"styles-module__CancerStudySelectorHeader__D2N40",selectAll:"styles-module__selectAll__sQO_b",noData:"styles-module__noData__3J5xx",selectedCount:"styles-module__selectedCount__TRoaE",selectionsExist:"styles-module__selectionsExist__1icpM",cancerStudySelectorBody:"styles-module__cancerStudySelectorBody__2BfDm",cancerTypeListContainer:"styles-module__cancerTypeListContainer__rnSbV",cancerStudyListContainer:"styles-module__cancerStudyListContainer__356jB",cancerTypeList:"styles-module__cancerTypeList__ouFgb",cancerTypeListItemLabel:"styles-module__cancerTypeListItemLabel__31N8Y",cancerTypeListItemCount:"styles-module__cancerTypeListItemCount__1HB2c",selectable:"styles-module__selectable__3NCiW",selected:"styles-module__selected__Zy9_9",matchingNodeText:"styles-module__matchingNodeText__3lV9e",nonMatchingNodeText:"styles-module__nonMatchingNodeText__1l5PU",containsSelectedStudies:"styles-module__containsSelectedStudies__20v-B",searchTextInput:"styles-module__searchTextInput__1VIxV",group:"styles-module__group__Cs8DR",zScore:"styles-module__zScore__23rtN",infoIcon:"styles-module__infoIcon__zMiog",profileName:"styles-module__profileName__1fbIy",DataTypePriorityLabel:"styles-module__DataTypePriorityLabel__21k9z",radioRow:"styles-module__radioRow__1G_fF",buttonRow:"styles-module__buttonRow__51RtG",geneSet:"styles-module__geneSet__Ra6KD",notEmpty:"styles-module__notEmpty__23mDp",GeneSymbolValidator:"styles-module__GeneSymbolValidator__ZK8rf",icon:"styles-module__icon__1E8Oh",pendingMessage:"styles-module__pendingMessage__2jgIM",oqlNotice:"styles-module__oqlNotice__1tycm",validBubble:"styles-module__validBubble__QCGq3",invalidBubble:"styles-module__invalidBubble__1gB6Z",suggestionBubble:"styles-module__suggestionBubble__aRL1R",noChoiceLabel:"styles-module__noChoiceLabel__2GF5_",singleChoiceLabel:"styles-module__singleChoiceLabel__2wdqL",multiChoiceLabel:"styles-module__multiChoiceLabel__19sFa",MutSigGeneSelectorWindow:"styles-module__MutSigGeneSelectorWindow__1Uiku",MutSigGeneSelector:"styles-module__MutSigGeneSelector__25hKH",selectionColumnHeader:"styles-module__selectionColumnHeader__2MSUO",selectionColumnCell:"styles-module__selectionColumnCell__3RJ8f",selectButton:"styles-module__selectButton__2dXHK",GisticGeneSelectorWindow:"styles-module__GisticGeneSelectorWindow__1J2UG",GisticGeneSelector:"styles-module__GisticGeneSelector__U5Lb9",header:"styles-module__header__3cqyY",amp:"styles-module__amp__1zeIe",del:"styles-module__del__1_otl",gisticTable:"styles-module__gisticTable__2fquv",GisticGeneToggles:"styles-module__GisticGeneToggles__1aR6k",someGenes:"styles-module__someGenes__J-RhD",moreGenes:"styles-module__moreGenes__2gVF_",geneToggle:"styles-module__geneToggle__EGiaB",simulateHovered:"styles-module__simulateHovered__3IL_G",notSelected:"styles-module__notSelected__3-Rmx",showMoreLess:"styles-module__showMoreLess__3Ef4J",GenesetsSelectorWindow:"styles-module__GenesetsSelectorWindow__NTbph",GenesetsFormGroup:"styles-module__GenesetsFormGroup__1uJYh",GenesetsVolcanoSelectorWindow:"styles-module__GenesetsVolcanoSelectorWindow__w4nHP",GenesetsSelectionArea:"styles-module__GenesetsSelectionArea__3ebp-",transposeDataMatrix:"styles-module__transposeDataMatrix__YP_NR",submitRow:"styles-module__submitRow__k2sC8",genomeSpace:"styles-module__genomeSpace__2augo",tooltip:"styles-module__tooltip__ux3KI"}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.TableCellStatus=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(s),u=n(173),c=function(e){return e&&e.__esModule?e:{default:e}}(u),d=t.TableCellStatus=void 0;!function(e){e[e.LOADING=0]="LOADING",e[e.ERROR=1]="ERROR",e[e.NA=2]="NA"}(d||(t.TableCellStatus=d={}));var p=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),i(t,[{key:"render",value:function(){var e="",t="";switch(this.props.status){case d.LOADING:e=this.props.loadingAlt||"Querying server for data.",t="LOADING";break;case d.ERROR:e=this.props.errorAlt||"Error retrieving data.",t="ERROR";break;case d.NA:e=this.props.naAlt||"Data not available.",t=""}return l.createElement(c.default,{placement:"left",overlay:l.createElement("span",null,e)},l.createElement("span",{style:{color:"gray",fontSize:"xx-small",textAlign:"center"}},t))}}]),t}(l.Component);t.default=p},function(e,t){e.exports={portalWidth:"annotation-module__portalWidth__1ONSd","annotation-item":"annotation-module__annotation-item__1YzCz","annotation-item-text":"annotation-module__annotation-item-text__2FRXN","annotation-item-error":"annotation-module__annotation-item-error__1XUY_"}},function(e,t,n){e.exports=n(6)(168)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){var n=e.padded,r=e.overflow,o=e.flex,a=y(e,["padded","overflow","flex"]),i=Object.assign({flex:o,display:"flex",overflow:r?"visible":"auto"},e.style,{flexDirection:t}),s=(0,m.default)(e.className,f.default[t],n&&f.default.padded);return d.createElement("div",u({},a,{style:i,className:s}))}Object.defineProperty(t,"__esModule",{value:!0}),t.FlexCol=t.FlexRow=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=n(1),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(c),p=n(1012),f=r(p),h=n(174),m=r(h),y=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]]);return n};t.FlexRow=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){return s(this.props,"row")}}]),t}(d.Component),t.FlexCol=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"render",value:function(){return s(this.props,"column")}}]),t}(d.Component)},function(e,t,n){"use strict";function r(e,t,n){return 1e-6<=e&&e<n?e.toExponential(t):e.toPrecision(t)}function o(e,t){var n=e.toFixed(t);if(0!==e&&0===parseFloat(n)){var r=t>1?s.fill(Array(t-1),"0"):[];n=(e>0?"<":">-")+"0."+r.join("")+"1"}return n}function a(e){return o(100*e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)+"%"}Object.defineProperty(t,"__esModule",{value:!0}),t.toPrecision=r,t.toFixedWithThreshold=o,t.getPercentage=a;var i=n(3),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d=n(1),p=o(d),f=n(33),h=n(1016),m=o(h),y=n(174),g=r(y),v=n(1017),b=r(v),_=n(177),w=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},x=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]]);return n},S=m,C=function(e){function t(){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.promises,n=e.children,r=e.className,o=e.secondaryComponent,a=x(e,["promises","children","className","secondaryComponent"]);return p.createElement("div",l({className:(0,g.default)(r,S.SectionHeader)},a),p.createElement("h2",null,n,!(!t||!t.some(function(e){return e.isPending}))&&p.createElement(_.ThreeBounce,{style:{display:"inline-block",marginLeft:10}})),!!o&&o,t&&t.map(function(e){return!!e.error&&p.createElement(b.default,{className:S.error,error:e.error})}))}}]),t}(p.Component);C=w([f.observer],C),t.default=C},function(e,t,n){e.exports=n(6)(715)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.axisLabelStyles=t.baseLabelStyles=void 0;var r=n(3),o=["#F4511E","#FFF59D","#DCE775","#8BC34A","#00796B","#006064"],a={fontFamily:"Arial, Helvetica",width:350,height:350,padding:50},i=t.baseLabelStyles={fontFamily:"Arial, Helvetica",fontSize:12,letterSpacing:"normal",padding:8,stroke:"transparent",strokeWidth:0},s=(0,r.assign)({textAnchor:"middle"},i),l=t.axisLabelStyles=(0,r.assign)({},i,{fontSize:13,padding:8}),u={area:(0,r.assign)({style:{data:{fill:"#212121"},labels:s}},a),axis:(0,r.assign)({style:{axis:{fill:"transparent",stroke:"black",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round"},axisLabel:(0,r.assign)({},s,l),grid:{fill:"none",stroke:"#ECEFF1",strokeDasharray:"10, 5",strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"visible"},ticks:{fill:"transparent",size:4,stroke:"black",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round"},tickLabels:(0,r.assign)({},i,{fill:"black",padding:2})}},a),bar:(0,r.assign)({style:{data:{fill:"#455A64",padding:8,strokeWidth:0},labels:i}},a),candlestick:(0,r.assign)({style:{data:{stroke:"#455A64"},labels:s},candleColors:{positive:"#ffffff",negative:"#455A64"}},a),chart:a,errorbar:(0,r.assign)({borderWidth:8,style:{data:{fill:"transparent",opacity:1,stroke:"#455A64",strokeWidth:2},labels:s}},a),group:(0,r.assign)({colorScale:o},a),line:(0,r.assign)({style:{data:{fill:"transparent",opacity:1,stroke:"#455A64",strokeWidth:2},labels:s}},a),pie:(0,r.assign)({colorScale:o,style:{data:{padding:8,stroke:"#ECEFF1",strokeWidth:1},labels:(0,r.assign)({},i,{padding:20})}},a),scatter:(0,r.assign)({style:{data:{fill:"#455A64",opacity:1,stroke:"transparent",strokeWidth:0},labels:s}},a),stack:(0,r.assign)({colorScale:o},a),tooltip:{style:(0,r.assign)({},s,{padding:5,pointerEvents:"none"}),flyoutStyle:{stroke:"#212121",strokeWidth:1,fill:"#f0f0f0",pointerEvents:"none"},cornerRadius:5,pointerLength:10},voronoi:(0,r.assign)({style:{data:{fill:"transparent",stroke:"transparent",strokeWidth:0},labels:(0,r.assign)({},s,{padding:5,pointerEvents:"none"}),flyout:{stroke:"#212121",strokeWidth:1,fill:"#f0f0f0",pointerEvents:"none"}}},a),legend:{colorScale:o,gutter:10,orientation:"vertical",titleOrientation:"top",style:{data:{type:"circle",size:3,strokeWidth:1,stroke:"black"},labels:i,title:(0,r.assign)({},i,{padding:5})}}};t.default=u},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=r(u),d=n(909),p=r(d),f=n(174),h=function(e){return e&&e.__esModule?e:{default:e}}(f),m=p,y=function(e){function t(){o(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.handleInputRef=function(t){e.input=t,e.props.inputProps&&"function"==typeof e.props.inputProps.ref&&e.props.inputProps.ref(t)},e}return i(t,e),l(t,[{key:"componentDidMount",value:function(){this.input.indeterminate=!!this.props.indeterminate}},{key:"componentDidUpdate",value:function(){this.input.indeterminate=!!this.props.indeterminate}},{key:"render",value:function(){var e=this.props.labelProps&&this.props.labelProps.className,t=(0,h.default)(m.labeledCheckbox,e);return c.createElement("label",s({className:t},this.props.labelProps),c.createElement("input",s({type:"checkbox",checked:this.props.checked,onChange:this.props.onChange,disabled:this.props.disabled},this.props.inputProps,{ref:this.handleInputRef})),this.props.children)}}]),t}(c.Component);t.default=y},function(e,t,n){"use strict";function r(){return 1===arguments.length?o.apply(void 0,arguments):a.apply(void 0,arguments)}function o(e){var t=void 0;return"undefined"!=typeof Reflect&&"function"==typeof Reflect.ownKeys?t=Reflect.ownKeys(e.prototype):(t=Object.getOwnPropertyNames(e.prototype),"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(e.prototype)))),t.forEach(function(t){if("constructor"!==t){var n=Object.getOwnPropertyDescriptor(e.prototype,t);"function"==typeof n.value&&Object.defineProperty(e.prototype,t,a(e,t,n))}}),e}function a(e,t,n){var r=n.value;if("function"!=typeof r)throw new Error("@autobind decorator can only be applied to methods not: "+(void 0===r?"undefined":i(r)));var o=!1;return{configurable:!0,get:function(){if(o||this===e.prototype||this.hasOwnProperty(t)||"function"!=typeof r)return r;var n=r.bind(this);return o=!0,Object.defineProperty(this,t,{configurable:!0,get:function(){return n},set:function(e){r=e,delete this[t]}}),o=!1,n},set:function(e){r=e}}}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),d=r(c),p=n(2),f=r(p),h=n(1015),m=r(h),y=function(e){function t(){a(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.displayName="FontAwesome",e}return s(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.border,n=e.cssModule,r=e.className,a=e.fixedWidth,i=e.flip,s=e.inverse,u=e.name,c=e.pulse,p=e.rotate,f=e.size,h=e.spin,y=e.stack,g=e.tag,v=void 0===g?"span":g,b=e.ariaLabel,_=o(e,["border","cssModule","className","fixedWidth","flip","inverse","name","pulse","rotate","size","spin","stack","tag","ariaLabel"]),w=[];return n?(w.push(n.fa),w.push(n["fa-"+u]),f&&w.push(n["fa-"+f]),h&&w.push(n["fa-spin"]),c&&w.push(n["fa-pulse"]),t&&w.push(n["fa-border"]),a&&w.push(n["fa-fw"]),s&&w.push(n["fa-inverse"]),i&&w.push(n["fa-flip-"+i]),p&&w.push(n["fa-rotate-"+p]),y&&w.push(n["fa-stack-"+y])):(w.push("fa"),w.push("fa-"+u),f&&w.push("fa-"+f),h&&w.push("fa-spin"),c&&w.push("fa-pulse"),t&&w.push("fa-border"),a&&w.push("fa-fw"),s&&w.push("fa-inverse"),i&&w.push("fa-flip-"+i),p&&w.push("fa-rotate-"+p),y&&w.push("fa-stack-"+y)),r&&w.push(r),d.default.createElement(v,l({},_,{"aria-hidden":!0,className:w.join(" ")}),b?d.default.createElement("span",{style:m.default},b):null)}}]),t}(d.default.Component);y.propTypes={ariaLabel:f.default.string,border:f.default.bool,className:f.default.string,cssModule:f.default.object,fixedWidth:f.default.bool,flip:f.default.oneOf(["horizontal","vertical"]),inverse:f.default.bool,name:f.default.string.isRequired,pulse:f.default.bool,rotate:f.default.oneOf([90,180,270]),size:f.default.oneOf(["lg","2x","3x","4x","5x"]),spin:f.default.bool,stack:f.default.oneOf(["1x","2x"]),tag:f.default.string},t.default=y,e.exports=t.default},function(e,t,n){"use strict";function r(e){e=e||{};var t={};for(var n in e)n in o||(t[n]=e[n]);return t}Object.defineProperty(t,"__esModule",{value:!0}),t.filterPropsFrom=r;var o={hideTableHeader:!0,column:!0,columns:!0,sortable:!0,filterable:!0,filtering:!0,onFilter:!0,filterPlaceholder:!0,filterClassName:!0,currentFilter:!0,sort:!0,sortBy:!0,sortableColumns:!0,onSort:!0,defaultSort:!0,defaultSortDescending:!0,itemsPerPage:!0,filterBy:!0,hideFilterInput:!0,noDataText:!0,currentPage:!0,onPageChange:!0,previousPageLabel:!0,nextPageLabel:!0,pageButtonLimit:!0,childNode:!0,data:!0,children:!0}},function(e,t,n){e.exports=n(6)(276)},function(e,t,n){"use strict";function r(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]="number"==typeof e[n]?e[n]:e[n].val);return t}t.__esModule=!0,t.default=r,e.exports=t.default},function(e,t,n){(function(t){(function(){var n,r,o;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:void 0!==t&&null!==t&&t.hrtime?(e.exports=function(){return(n()-o)/1e6},r=t.hrtime,n=function(){var e;return e=r(),1e9*e[0]+e[1]},o=n()):Date.now?(e.exports=function(){return Date.now()-o},o=Date.now()):(e.exports=function(){return(new Date).getTime()-o},o=(new Date).getTime())}).call(this)}).call(t,n(954))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,n){return null!=e&&e.length>t+(n||0)}function l(e,t,n,r){return s(e,n,r)?e.substring(0,n)+t:e}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.isTooLong=s,t.truncateText=l;var d=n(1),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(d),f=n(174),h=r(f),m=n(33),y=n(13),g=n(173),v=r(g),b=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},_=w=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){var e=this,t=p.createElement("span",{style:{whiteSpace:"nowrap"},className:(0,h.default)(this.props.className)},this.truncatedText);return this.needsTooltip&&(t=p.createElement(v.default,{overlay:function(){return e.props.tooltip||p.createElement("span",null)},placement:"right",destroyTooltipOnHide:!0},t)),t}},{key:"needsTooltip",get:function(){return void 0!==this.props.tooltip&&("always"===this.props.addTooltip||"truncated"===this.props.addTooltip&&this.isTooLong)}},{key:"isTooLong",get:function(){return s(this.props.text,this.props.maxLength||w.defaultProps.maxLength,this.props.buffer)}},{key:"truncatedText",get:function(){return l(this.props.text,this.props.suffix||w.defaultProps.suffix,this.props.maxLength||w.defaultProps.maxLength,this.props.buffer)}}]),t}(p.Component);_.defaultProps={maxLength:50,buffer:2,suffix:"...",addTooltip:"truncated"},b([y.computed],_.prototype,"needsTooltip",null),b([y.computed],_.prototype,"isTooLong",null),b([y.computed],_.prototype,"truncatedText",null),_=w=b([m.observer],_),t.default=_;var w},function(e,t){e.exports={portalWidth:"styles-module__portalWidth__1w8-Y","integer-data":"styles-module__integer-data__1Bn0H"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.MSKTabs=t.MSKTab=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=o(u),d=n(3),p=o(d),f=n(174),h=r(f),m=n(177),y=n(901),g=r(y);n(904);t.MSKTab=function(e){function t(e){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return s(t,e),l(t,[{key:"render",value:function(){return c.createElement("div",{className:(0,h.default)({"msk-tab":!0,hiddenByPosition:!!this.props.inactive},this.props.className)},this.props.children)}}]),t}(c.Component),t.MSKTabs=function(e){function t(){a(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.shownTabs=[],e.tabRefs=[],e.state={currentPage:1,pageBreaks:[]},e}return s(t,e),l(t,[{key:"cloneTab",value:function(e,t,n){return n?c.cloneElement(e,{inactive:t},c.createElement(m.ThreeBounce,{className:"default-spinner center-block text-center"})):c.cloneElement(e,{inactive:t})}},{key:"setActiveTab",value:function(e){this.props.onTabClick&&this.props.onTabClick(e)}},{key:"navTabsRefHandler",value:function(e){this.navTabsRef=e}},{key:"tabRefHandler",value:function(e,t){e&&t&&this.tabRefs.push({id:e,element:t})}},{key:"nextPage",value:function(){this.setState({currentPage:this.state.currentPage+1})}},{key:"prevPage",value:function(){this.setState({currentPage:this.state.currentPage-1})}},{key:"initOnResize",value:function(e,t){var n=this,r=null;return function(e){null!==r&&(window.clearTimeout(r),r=null),r=window.setTimeout(function(){n.setState({currentPage:1,pageBreaks:[]})},600)}}},{key:"render",value:function(){var e=this;if(this.props.children&&c.Children.count(this.props.children)){var t=this.props.children,n=!1,r="",o=c.Children.toArray(t),a=p.reduce(o,function(t,o){return o.props.hide||(o.props.id===e.props.activeTabId?(n=!0,r=e.props.activeTabId,e.shownTabs.push(o.props.id),t.push(e.cloneTab(o,!1,!!o.props.loading))):e.props.unmountOnHide||!p.includes(e.shownTabs,o.props.id)||o.props.loading||t.push(e.cloneTab(o,!0,!!o.props.loading))),t},[]);if(!1===n){var i=o[0];this.shownTabs.push(i.props.id),a[0]=this.cloneTab(i,!1,!!i.props.loading),r=i.props.id}return c.createElement("div",{id:this.props.id?this.props.id:"",className:(0,h.default)("msk-tabs",this.props.className)},this.navTabs(t,r),c.createElement("div",{className:"tab-content"},a))}return null}},{key:"navTabs",value:function(e,t){this.tabRefs=[];var n=this.tabPages(e,t),r=this.state.pageBreaks.length+1,o=this.props.enablePagination?{border:0,overflow:"hidden"}:{},a=this.state.currentPage>1?c.createElement("li",{key:"prevPage",style:{cursor:"pointer"}},c.createElement("a",{onClick:this.prevPage.bind(this)},c.createElement("i",{className:"fa fa-chevron-left",style:this.props.arrowStyle}))):null,i=this.state.currentPage<r?c.createElement("li",{key:"nextPage",style:{cursor:"pointer"}},c.createElement("a",{onClick:this.nextPage.bind(this)},c.createElement("i",{className:"fa fa-chevron-right",style:this.props.arrowStyle}))):null,s=this.props.tabButtonStyle||"tabs";return c.createElement("ul",{ref:this.navTabsRefHandler.bind(this),className:(0,h.default)("nav","nav-"+s),style:o},a,n[this.state.currentPage-1],i,this.props.enablePagination&&c.createElement(g.default,{handleWidth:!0,onResize:this.initOnResize.bind(this)()}))}},{key:"tabPages",value:function(e,t){var n=this,r=[[]],o=1;return c.Children.forEach(e,function(e){if(!(!e||e.props.hide||e.props.loading&&t!==e.props.id)){var a=t===e.props.id?"active":"";n.props.enablePagination&&n.state.pageBreaks.length>0&&n.state.pageBreaks[o-1]===e.props.id&&(o++,r[o-1]=[]),r[o-1].push(c.createElement("li",{key:e.props.id,style:{cursor:"pointer"},ref:n.tabRefHandler.bind(n,e.props.id),className:a},c.createElement("a",{onClick:n.setActiveTab.bind(n,e.props.id),style:e.props.anchorStyle},e.props.linkText)))}}),r}},{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){if(e.props.enablePagination&&0===e.state.pageBreaks.length){var t=e.findPageBreaks(),n=e.findCurrentPage(t);e.setState({currentPage:n,pageBreaks:t})}},1)}},{key:"findCurrentPage",value:function(e){var t=this,n=1,r=!1;return this.props.activeTabId&&e.length>0&&p.each(this.tabRefs,function(o){if(o.id===e[n-1]&&n++,o.id===t.props.activeTabId)return r=!0,!1}),r?n:1}},{key:"findPageBreaks",value:function(){var e=[],t=this.navTabsRef&&this.navTabsRef.offsetWidth||0;if(t>0){var n=0;p.each(this.tabRefs,function(r){n+=r.element.offsetWidth;var o=e.length>0?160:100;n>t-o&&(e.push(r.id),n=r.element.offsetWidth)})}return e}}]),t}(c.Component)},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(911),i=(function(e){e&&e.__esModule}(a),function(){function e(){r(this,e)}return o(e,[{key:"receiveProps",value:function(e,t){this.props=e,this.itemAdapter=t}},{key:"isEmpty",value:function(e){return!this.getLength(e)}},{key:"filter",value:function(e,t){return this.toArray(e).filter(t)}},{key:"find",value:function(e,t){return this.toArray(e).find(t)}},{key:"findMatching",value:function(e,t){var n=this,r=this.itemAdapter.foldValue(t);return this.find(e,function(e){return n.itemAdapter.itemMatchesInput(e,r)})}}]),e}());t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){return new s(e)}function a(e){return e instanceof s}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.unsafe=o,t.isUnsafe=a;var s=function(){function e(t){r(this,e),this.content=t}return i(e,[{key:"toString",value:function(){return this.content}}]),e}()},function(e,t,n){"use strict";function r(e,t,n){return 1e-6<=e&&e<n?e.toExponential(t):e.toPrecision(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.toConditionalPrecision=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.default=function(e){return(0,s.default)(a.default.findDOMNode(e))};var o=n(34),a=r(o),i=n(1008),s=r(i);e.exports=t.default},function(e,t,n){"use strict";function r(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=0);return t}t.__esModule=!0,t.default=r,e.exports=t.default},function(e,t,n){"use strict";function r(e,t,n,r,a,i,s){var l=-a*(t-r),u=-i*n,c=l+u,d=n+c*e,p=t+d*e;return Math.abs(d)<s&&Math.abs(p-r)<s?(o[0]=r,o[1]=0,o):(o[0]=p,o[1]=d,o)}t.__esModule=!0,t.default=r;var o=[0,0];e.exports=t.default},function(e,t,n){(function(t){for(var r=n(870),o="undefined"==typeof window?t:window,a=["moz","webkit"],i="AnimationFrame",s=o["request"+i],l=o["cancel"+i]||o["cancelRequest"+i],u=0;!s&&u<a.length;u++)s=o[a[u]+"Request"+i],l=o[a[u]+"Cancel"+i]||o[a[u]+"CancelRequest"+i];if(!s||!l){var c=0,d=0,p=[];s=function(e){if(0===p.length){var t=r(),n=Math.max(0,1e3/60-(t-c));c=n+t,setTimeout(function(){var e=p.slice(0);p.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(c)}catch(e){setTimeout(function(){throw e},0)}},Math.round(n))}return p.push({handle:++d,callback:e,cancelled:!1}),d},l=function(e){for(var t=0;t<p.length;t++)p[t].handle===e&&(p[t].cancelled=!0)}}e.exports=function(e){return s.call(o,e)},e.exports.cancel=function(){l.apply(o,arguments)},e.exports.polyfill=function(){o.requestAnimationFrame=s,o.cancelAnimationFrame=l}}).call(t,n(124))},function(e,t,n){"use strict";function r(e,t,n){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(0!==n[r])return!1;var o="number"==typeof t[r]?t[r]:t[r].val;if(e[r]!==o)return!1}return!0}t.__esModule=!0,t.default=r,e.exports=t.default},function(e,t,n){"use strict";function r(e){return new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}")}function o(e,t){var n=r(e);return function(r,o){return t(n(r),o,e)}}function a(e){var t=Object.create(null),n=[];return e.forEach(function(e){for(var r in e)r in t||n.push(t[r]=r)}),n}var i={},s={},l=34,u=10,c=13;t.a=function(e){function t(e,t){var a,i,s=n(e,function(e,n){if(a)return a(e,n-1);i=e,a=t?o(e,t):r(e)});return s.columns=i||[],s}function n(e,t){function n(){if(f)return s;if(h)return h=!1,i;var t,n,r=d;if(e.charCodeAt(r)===l){for(;d++<a&&e.charCodeAt(d)!==l||e.charCodeAt(++d)===l;);return(t=d)>=a?f=!0:(n=e.charCodeAt(d++))===u?h=!0:n===c&&(h=!0,e.charCodeAt(d)===u&&++d),e.slice(r+1,t-1).replace(/""/g,'"')}for(;d<a;){if((n=e.charCodeAt(t=d++))===u)h=!0;else if(n===c)h=!0,e.charCodeAt(d)===u&&++d;else if(n!==y)continue;return e.slice(r,t)}return f=!0,e.slice(r,a)}var r,o=[],a=e.length,d=0,p=0,f=a<=0,h=!1;for(e.charCodeAt(a-1)===u&&--a,e.charCodeAt(a-1)===c&&--a;(r=n())!==s;){for(var m=[];r!==i&&r!==s;)m.push(r),r=n();t&&null==(m=t(m,p++))||o.push(m)}return o}function d(t,n){return null==n&&(n=a(t)),[n.map(h).join(e)].concat(t.map(function(t){return n.map(function(e){return h(t[e])}).join(e)})).join("\n")}function p(e){return e.map(f).join("\n")}function f(t){return t.map(h).join(e)}function h(e){return null==e?"":m.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}var m=new RegExp('["'+e+"\n\r]"),y=e.charCodeAt(0);return{parse:t,parseRows:n,format:d,formatRows:p}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=function(e){return e&&e.__esModule?e:{default:e}}(r),a=n(1040),i=n(917),s=n(918),l=n(885),u=n(919),c=n(916),d=n(1046),p=n(876);o.default.Children.children=function(e){return o.default.Children.map(e,function(e){return e})||[]},Array.prototype.find||Object.defineProperty(Array.prototype,"find",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,n=Object(this),r=n.length>>>0,o=arguments[1],a=0;a<r;a++)if(a in n&&(t=n[a],e.call(o,t,a,n)))return t}});var f={Table:a.Table,Tr:i.Tr,Td:s.Td,Th:l.Th,Tfoot:u.Tfoot,Thead:c.Thead,Sort:d.Sort,unsafe:p.unsafe};t.default=f,"undefined"!=typeof window&&(window.Reactable=f),e.exports=t.default},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,s=u=void 0}},l=n(1),u=function(e){return e&&e.__esModule?e:{default:e}}(l),c=n(876),d=n(867),p=function(e){function t(){r(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return o(t,e),i(t,[{key:"render",value:function(){return(0,c.isUnsafe)(this.props.children)?u.default.createElement("th",a({},(0,d.filterPropsFrom)(this.props),{dangerouslySetInnerHTML:{__html:this.props.children.toString()}})):u.default.createElement("th",(0,d.filterPropsFrom)(this.props),this.props.children)}}]),t}(u.default.Component);t.Th=p},function(e,t,n){"use strict";function r(e,t,n){if(!n||typeof n.value!==o.typeOfFunction)throw new TypeError("Only methods can be decorated with @bind. <"+t+"> is not a method!");return{configurable:o.boolTrue,get:function(){var e=n.value.bind(this);return Object.defineProperty(this,t,{value:e,configurable:o.boolTrue,writable:o.boolTrue}),e}}}Object.defineProperty(t,"__esModule",{value:!0});var o;!function(e){e.typeOfFunction="function",e.boolTrue=!0}(o||(o={})),t.bind=r,t.default=r},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){return e>0?"Co-occurrence":"Mutual exclusivity"}function a(e){return e>0?"Over-expressed":"Under-expressed"}function i(e){return e<-10?"<-10":e>10?">10":e.toFixed(2)}function s(e){var t=S.createElement("span",null,(0,C.toConditionalPrecision)(e,3,.01));return e<.05&&(t=S.createElement("b",null,t)),t}function l(e,t){return e+" ("+t.toFixed(2)+"%)"}function u(e,t){return e.filter(function(e){return!t.includes(e.hugoGeneSymbol)}).map(function(e){return{x:d(Number(e.logRatio),10),y:-Math.log10(e.pValue),hugoGeneSymbol:e.hugoGeneSymbol,qValue:e.qValue,logRatio:e.logRatio,hovered:!1}})}function c(e,t){return e.filter(function(e){return!t.includes(e.hugoGeneSymbol)}).map(function(e){return{x:e.logRatio,y:-Math.log10(e.pValue),hugoGeneSymbol:e.hugoGeneSymbol,entrezGeneId:e.entrezGeneId,qValue:e.qValue,logRatio:e.logRatio,hovered:!1}})}function d(e,t){return e>t?t:e<-t?-t:Number(e.toFixed(2))}function p(e,t,n){return t===T||t===O||n?e.meanExpressionInAlteredGroup-e.meanExpressionInUnalteredGroup:Math.log2(e.meanExpressionInAlteredGroup/e.meanExpressionInUnalteredGroup)}function f(e,t,n,r){return e.map(function(e){return{checked:r.includes(e.hugoGeneSymbol),disabled:r.includes(e.hugoGeneSymbol),hugoGeneSymbol:e.hugoGeneSymbol,entrezGeneId:e.entrezGeneId,cytoband:e.cytoband,alteredCount:e.alteredCount,alteredPercentage:e.alteredCount/t*100,unalteredCount:e.unalteredCount,unalteredPercentage:e.unalteredCount/n*100,logRatio:Number(e.logRatio),pValue:e.pValue,qValue:e.qValue}})}function h(e,t,n){var r=e.filter(function(e){return e.meanExpressionInAlteredGroup<=0||e.meanExpressionInUnalteredGroup<=0}).length>0;return e.map(function(e){return{checked:n.includes(e.hugoGeneSymbol),disabled:n.includes(e.hugoGeneSymbol),hugoGeneSymbol:e.hugoGeneSymbol,entrezGeneId:e.entrezGeneId,cytoband:e.cytoband,meanExpressionInAlteredGroup:e.meanExpressionInAlteredGroup,meanExpressionInUnalteredGroup:e.meanExpressionInUnalteredGroup,standardDeviationInAlteredGroup:e.standardDeviationInAlteredGroup,standardDeviationInUnalteredGroup:e.standardDeviationInUnalteredGroup,logRatio:p(e,t,r),pValue:e.pValue,qValue:e.qValue}})}function m(e,t,n,r,o){return e.filter(function(e){var a=!1;return t&&(a=a||e.logRatio<=0),n&&(a=a||e.logRatio>0),r&&(a=a&&e.qValue<.05),o&&(a=a&&o.includes(e.hugoGeneSymbol)),a})}function y(e,t){var n="";if(null!=e){var r=e.datum;n+="Query Genes ",2==r.x?0==r.index?n+="Altered: ":n+="Unaltered: ":0==r.index?n+="Altered, "+t+" Unaltered: ":1==r.index?n+="Altered, "+t+" Altered: ":2==r.index?n+="Unaltered, "+t+" Altered: ":3==r.index&&(n+="Unaltered, "+t+" Unaltered: "),n+=r.y}return n}function g(e,t,n){var o=[];return e.map(function(e,a){var i,s=t+", "+n;o.push((i={"Sample ID":e.sampleId},r(i,s,e.y),r(i,"Alteration",e.alterations),i))}),(0,k.tsvFormat)(o)}function v(e){var t="",n=void 0;return e.forEach(function(e){var r=e.gene.hugoGeneSymbol;r!=n&&(t+=r+": "),"MUTATION_EXTENDED"===e.alterationType?t+="MUT":"PROTEIN_LEVEL"===e.alterationType?t+="RPPA-"+e.alterationSubType.toUpperCase():t+=e.alterationSubType.toUpperCase(),t+="; ",n=r}),t}function b(e,t){return e.length>t?e.slice(0,t).join(" ")+"…":e.join(" ")}function _(e){var t=(0,E.calculateBoxPlotModel)(e.filter(function(e){return e.x<1.5}).map(function(e){return e.y}));t.x=1,t.min=t.whiskerLower,t.max=t.whiskerUpper;var n=(0,E.calculateBoxPlotModel)(e.filter(function(e){return e.x>1.5}).map(function(e){return e.y}));return n.x=2,n.min=n.whiskerLower,n.max=n.whiskerUpper,[t,n]}function w(e,t,n,r){var o=[];for(var a in n)!function(a){var i=n[a],s=e.find(function(e){return e.uniqueSampleKey===a});if(s){var l=t.includes("rna_seq")?Math.log(s.value+1)/Math.log(2):s.value,u=.5*((0,A.default)(l.toString())()-.5);o.push({x:r.includes(a)?1+u:2+u,y:l,sampleId:s.sampleId,studyId:s.studyId,alterations:v(i)})}}(a);return o}Object.defineProperty(t,"__esModule",{value:!0}),t.calculateAlterationTendency=o,t.calculateExpressionTendency=a,t.formatLogOddsRatio=i,t.formatValueWithStyle=s,t.formatPercentage=l,t.getAlterationScatterData=u,t.getExpressionScatterData=c,t.roundLogRatio=d,t.calculateLogRatio=p,t.getAlterationRowData=f,t.getExpressionRowData=h,t.getFilteredData=m,t.getBarChartTooltipContent=y,t.getDownloadContent=g,t.getAlterationsTooltipContent=v,t.shortenGenesLabel=b,t.getBoxPlotModels=_,t.getBoxPlotScatterData=w;var x=n(1),S=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(x),C=n(877),k=n(932),E=n(1243),M=n(1244),A=function(e){return e&&e.__esModule?e:{default:e}}(M),T="LOG-VALUE",O="LOG2-VALUE"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(i),l=n(173),u=r(l),c=n(856),d=r(c),p=function(){function e(){o(this,e)}return a(e,null,[{key:"mainContent",value:function(e,t,n){var r=s.createElement("span",null,s.createElement("b",null,t)," variant reads out of ",s.createElement("b",null,t+n)," total");return s.createElement(u.default,{placement:"left",overlay:r,arrowContent:s.createElement("div",{className:"rc-tooltip-arrow-inner"}),destroyTooltipOnHide:!0},s.createElement("span",null,e.toFixed(2)))}},{key:"renderFunction",value:function(t){var n=e.getSortValue(t);if(n){var r=t[0].tumorAltCount,o=t[0].tumorRefCount;return e.mainContent(n,r,o)}return s.createElement(d.default,{status:c.TableCellStatus.NA})}},{key:"getSortValue",value:function(e){var t=e[0];if(!t)return null;var n=t.tumorAltCount,r=t.tumorRefCount;return n<0||r<0?null:n/(n+r)}},{key:"isVisible",value:function(e){if(e){var t=!0,n=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=o.value;if(this.getSortValue(i))return!0}}catch(e){n=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}}return!1}}]),e}();t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e){return!!C(e)&&(x(window)&&C(window.Node)?e instanceof window.Node:"number"==typeof e.nodeType&&"string"==typeof e.nodeName)}function i(e,t,n){!0!==t&&Array.prototype.slice.call(e.attributes).forEach(function(r){r.specified&&(""===t||!1===t||S(n[r.name])&&t.indexOf(r.name)<0)&&e.removeAttribute(r.name)})}function s(e,t){t=t||e.parentNode.style,_.forEach(function(n){e.style[n]===t[n]&&e.style.removeProperty(n)})}function l(e,t,n,r){n(e,t);for(var o=e.childNodes,a=0;a<o.length;a++)l(o[a],t.childNodes[a],n,r);r(e,t)}function u(e,t,n){var r=e.cloneNode(!0);return l(e,r,function(e,t){t.style&&(0,m.default)(e,t.style,n)},function(e,r){r.style&&r.parentNode&&s(r),r.attributes&&i(r,t,n)}),r}function c(e,t){if(k){var n=document.createElement("a");return n.setAttribute("href",e),n.setAttribute("download",t),n.dispatchEvent(new MouseEvent("click")),!0}return"undefined"!=typeof window&&(window.open(e,"_blank",""),!0)}function d(e,t,n){var r=document.createElement("canvas"),o=r.getContext("2d"),a=new Image;return a.onload=function(){r.width=a.width,r.height=a.height,o.drawImage(a,0,0),n(r)},a.src=e,!0}function p(e,t){return d(e,t,function(e){x(e.toBlob)?e.toBlob(function(e){g.default.saveAs(e,t)}):c(e.toDataURL("image/png"),t)})}Object.defineProperty(t,"__esModule",{value:!0});var f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=n(999),m=r(h),y=n(1e3),g=r(y),v={"alignment-baseline":"auto","baseline-shift":"baseline",clip:"auto","clip-path":"none","clip-rule":"nonzero",color:"rgb(51, 51, 51)","color-interpolation":"srgb","color-interpolation-filters":"linearrgb","color-profile":"auto","color-rendering":"auto",cursor:"auto",direction:"ltr",display:"inline","dominant-baseline":"auto","enable-background":"",fill:"rgb(0, 0, 0)","fill-opacity":"1","fill-rule":"nonzero",filter:"none","flood-color":"rgb(0, 0, 0)","flood-opacity":"1",font:"","font-family":"normal","font-size":"medium","font-size-adjust":"auto","font-stretch":"normal","font-style":"normal","font-variant":"normal","font-weight":"400","glyph-orientation-horizontal":"0deg","glyph-orientation-vertical":"auto","image-rendering":"auto",kerning:"auto","letter-spacing":"0","lighting-color":"rgb(255, 255, 255)",marker:"","marker-end":"none","marker-mid":"none","marker-start":"none",mask:"none",opacity:"1",overflow:"visible","paint-order":"fill","pointer-events":"auto","shape-rendering":"auto","stop-color":"rgb(0, 0, 0)","stop-opacity":"1",stroke:"none","stroke-dasharray":"none","stroke-dashoffset":"0","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-miterlimit":"4","stroke-opacity":"1","stroke-width":"1","text-anchor":"start","text-decoration":"none","text-rendering":"auto","unicode-bidi":"normal",visibility:"visible","word-spacing":"0px","writing-mode":"lr-tb"},b=["id","xml: base","xml: lang","xml: space","height","result","width","x","y","xlink: href","href","style","class","d","pathLength","x","y","dx","dy","glyphRef","format","x1","y1","x2","y2","rotate","textLength","cx","cy","r","rx","ry","fx","fy","width","height","refX","refY","orient","markerUnits","markerWidth","markerHeight","maskUnits","transform","viewBox","version","preserveAspectRatio","xmlns","points","offset","xlink:href"],_=["clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cursor","direction","fill","fill-opacity","fill-rule","font","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-orientation-horizontal","glyph-orientation-vertical","image-rendering","kerning","letter-spacing","marker","marker-end","marker-mid","marker-start","pointer-events","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-rendering","transform","visibility","white-space","word-spacing","writing-mode"],w=function(e){return"function"==typeof e},x=function(e){return void 0!==e},S=function(e){return void 0===e},C=function(e){return null!==e&&"object"==typeof e},k="undefined"!=typeof document&&"download"in document.createElement("a")&&"function"==typeof MouseEvent,E=!!window.MSInputMethodContext&&!!document.documentMode;_.forEach(function(e){e in v&&(v[e]=!0)});var M=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=t.attrs,r=t.styles;o(this,e),this.attrs=void 0===n?b:n,this.styles=void 0===r?v:r}return f(e,null,[{key:"getSvg",value:function(e){if(S(e)||""===e?e=document.body.querySelector("svg"):"string"==typeof e&&(e=document.body.querySelector(e)),e&&"svg"!==e.tagName&&(e=e.querySelector("svg")),!a(e))throw new Error("svgsaver: Can't find an svg element");return e}},{key:"getFilename",value:function(e,t,n){return t&&""!==t||(t=(e.getAttribute("title")||"untitled")+"."+n),encodeURI(t)}}]),f(e,[{key:"cloneSVG",value:function(t){t=e.getSvg(t);var n=u(t,this.attrs,this.styles);return n.setAttribute("xmlns","http://www.w3.org/2000/svg"),n.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),n.setAttribute("version",1.1),n.setAttribute("width",n.getAttribute("width")||"500"),n.setAttribute("height",n.getAttribute("height")||"900"),n}},{key:"getHTML",value:function(e){var t=this.cloneSVG(e),n=t.outerHTML;return n||(t.removeAttribute("xmlns"),t.removeAttribute("xmlns:xlink"),t.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg"),t.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),(new window.XMLSerializer).serializeToString(t))}},{key:"getBlob",value:function(e){var t=this.getHTML(e);return new Blob([t],{type:"text/xml"})}},{key:"getUri",value:function(e){var t=encodeURIComponent(this.getHTML(e));return x(window.btoa)?"data:image/svg+xml;base64,"+window.btoa(unescape(t)):"data:image/svg+xml,"+t}},{key:"asSvg",value:function(t,n){return t=e.getSvg(t),n=e.getFilename(t,n,"svg"),w(Blob)?g.default.saveAs(this.getBlob(t),n):c(this.getUri(t),n)}},{key:"getPngUri",value:function(t,n){E&&console.error("svgsaver: getPngUri not supported on IE11"),t=e.getSvg(t);var r=e.getFilename(t,null,"png");return d(this.getUri(t),r,function(e){n(e.toDataURL("image/png"))})}},{key:"asPng",value:function(t,n){return E&&console.error("svgsaver: asPng not supported on IE11"),t=e.getSvg(t),n=e.getFilename(t,n,"png"),p(this.getUri(t),n)}}]),e}();t.default=M,e.exports=t.default},function(e,t){e.exports={portalWidth:"styles-module__portalWidth__39rg3",Container:"styles-module__Container__2Drra",Checkboxes:"styles-module__Checkboxes__3JkxF",TableContainer:"styles-module__TableContainer__3OVxd",Checkbox:"styles-module__Checkbox__w95Pc",GeneName:"styles-module__GeneName__1qAkS",DataSet:"styles-module__DataSet__7fRDD",ScatterTooltip:"styles-module__ScatterTooltip__3EYSa",BarTooltip:"styles-module__BarTooltip__1hGLv",BoxTooltip:"styles-module__BoxTooltip__2FA6X",Tendency:"styles-module__Tendency__rxjNz",LeftColumn:"styles-module__LeftColumn__D4g9o"}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(s),u=n(173),c=function(e){return e&&e.__esModule?e:{default:e}}(u),d=n(860),p=function(e){function t(e){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),i(t,[{key:"mainContent",value:function(){var e=this,n=this.props,r=n.barWidth,o=n.barHeight,a=n.barColor,i=n.totalCount,s=n.counts,u=n.textMargin,c=n.textWidth,p=this.props.freqColors||t.defaultProps.freqColors,f=this.props.mainCountIndex&&this.props.mainCountIndex>=0&&this.props.mainCountIndex<s.length?this.props.mainCountIndex:0,h=s[f]/i,m=(r||0)+(u||0),y=m+(c||0),g=[];return s.forEach(function(t,n){var r=n%p.length,o=r>=0?p[r]:p[0];g.push(e.frequencyRectangle(t,i,o))}),l.createElement("svg",{width:y,height:"12"},l.createElement("text",{x:m,y:"9.5",textAnchor:"start",fontSize:"10"},(0,d.getPercentage)(h)),l.createElement("rect",{y:"2",width:r,height:o,fill:a}),g)}},{key:"frequencyRectangle",value:function(e,t,n){var r=e/t,o=this.props,a=o.barWidth,i=o.barHeight;return l.createElement("rect",{y:"2",width:r*(a||0),height:i,fill:n})}},{key:"render",value:function(){var e=this.mainContent();return this.props.tooltip&&(e=l.createElement(c.default,{placement:"left",overlay:this.props.tooltip,arrowContent:l.createElement("div",{className:"rc-tooltip-arrow-inner"})},e)),e}}]),t}(l.Component);t.default=p,p.defaultProps={freqColors:["lightgreen","green"],barColor:"#ccc",textMargin:6,textWidth:35,barWidth:30,barHeight:8}},function(e,t,n){"use strict";var r=n(951).default;e.exports=r},function(e,t,n){"use strict";t.__esModule=!0,t.default={noWobble:{stiffness:170,damping:26},gentle:{stiffness:120,damping:14},wobbly:{stiffness:180,damping:12},stiff:{stiffness:210,damping:20}},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(i),l=n(871),u=r(l),c=n(895),d=r(c),p=n(982),f=r(p),h=function(){function e(){o(this,e)}return a(e,null,[{key:"getSortValue",value:function(t){return e.extractSortValue(e.getTextValue(t))}},{key:"extractNonNumerical",value:function(e){var t=/[^0-9]+/g,n=e[0].match(t),r=[];if(n&&n.length>0)for(var o=n.join(""),a=0;a<o.length;a++)r.push(o.charCodeAt(a));return r}},{key:"extractSortValue",value:function(t){var n=/[A-Za-z][0-9]+./g,r=/[0-9]+/g,o=t.match(n),a=[];if(o&&0!==o.length?(a=e.extractNonNumerical(o),o=o[0].match(r)):o=t.match(r),o&&o.length>0){var i=o[0];return a&&a.length>0&&(i+="."+a.join("")),parseFloat(i)}return null}},{key:"getTextValue",value:function(t){var n="",r=e.getData(t);return r&&(n=r.toString()),n}},{key:"getFilterValue",value:function(t,n,r){var o=e.getDisplayValue(t),a=d.default.getData(t);return a&&a.toLowerCase().includes("germline")&&(o=""+o+a),o.toUpperCase().indexOf(r)>-1}},{key:"getDisplayValue",value:function(t){return e.getTextValue(t)}},{key:"getData",value:function(e){return e.length>0?e[0].proteinChange:null}},{key:"renderPlainText",value:function(t){var n=e.getDisplayValue(t);return s.createElement("span",null,n)}},{key:"renderWithMutationStatus",value:function(t){var n=e.getDisplayValue(t),r=d.default.getData(t),o=s.createElement(u.default,{text:n,tooltip:s.createElement("span",null,n),className:f.default.proteinChange,maxLength:20});return r&&r.toLowerCase().indexOf("germline")>-1&&(o=s.createElement("span",null,o,s.createElement("span",{className:f.default.germline},"Germline"))),o}}]),e}();t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(i),l=n(981),u=r(l),c=n(173),d=r(c),p=function(){function e(){o(this,e)}return a(e,null,[{key:"getData",value:function(e){var t=null;return e.length>0&&(t=e[0].mutationStatus),t}},{key:"sortValue",value:function(t){return e.getData(t)}},{key:"download",value:function(t){return e.getData(t)||""}},{key:"renderFunction",value:function(t){var n=e.getData(t),r=void 0,o=!1;return n?n.toLowerCase().indexOf("somatic")>-1?(r=s.createElement("span",{className:u.default.somatic},"S"),o=!0):n.toLowerCase().indexOf("germline")>-1?(r=s.createElement("span",{className:u.default.germline},"G"),o=!0):r=s.createElement("span",{className:u.default.unknown},n):r=s.createElement("span",null),o&&(r=s.createElement(d.default,{overlay:s.createElement("span",null,n),placement:"right"},r)),r}}]),e}();t.default=p},function(e,t){e.exports={portalWidth:"mutationAssessorColumn-module__portalWidth__3YkFm","ma-high":"mutationAssessorColumn-module__ma-high__gHJA0","ma-medium":"mutationAssessorColumn-module__ma-medium__3fKlP","ma-low":"mutationAssessorColumn-module__ma-low__VwQXC","ma-neutral":"mutationAssessorColumn-module__ma-neutral__2oq-W"}},function(e,t){e.exports={portalWidth:"siftTooltip-module__portalWidth__24Oa2","sift-deleterious":"siftTooltip-module__sift-deleterious__1aA2Z","sift-deleterious_low_confidence":"siftTooltip-module__sift-deleterious_low_confidence__2fL6l","sift-tolerated_low_confidence":"siftTooltip-module__sift-tolerated_low_confidence__1u4Hk","sift-tolerated":"siftTooltip-module__sift-tolerated__xqt6g","sift-tooltip-table":"siftTooltip-module__sift-tooltip-table__2KTtP"}},function(e,t){e.exports={portalWidth:"polyPhen2Tooltip-module__portalWidth__CFsKD","polyPhen2-probably_damaging":"polyPhen2Tooltip-module__polyPhen2-probably_damaging__EBbPS","polyPhen2-possibly_damaging":"polyPhen2Tooltip-module__polyPhen2-possibly_damaging__1fyF8","polyPhen2-benign":"polyPhen2Tooltip-module__polyPhen2-benign__36nqJ","polyPhen2-unknown":"polyPhen2Tooltip-module__polyPhen2-unknown__3KRAw","polyPhen2-tooltip-table":"polyPhen2Tooltip-module__polyPhen2-tooltip-table__2WGNf"}},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAT5QTFRF/Pz8/////P396urqzMzMxsbGxsbGxsbGxsbGxsbGycnJ19fX9vb2/v7+2NjYwsLC+Pr69Pf38PT18fT19ff4+fr79PT0p7GzZ4CGXnuCYX+GZIWNaYqSbo+XZYWNZIKJYXyDbYWLs7m7SHiEAERVcpag+vv7gqavFFhpIWJytsvQgKeyLW5/IWd4Qn2Mv9PYfLTDKoOZKoWbTJqt9/r79Pj5c7zOM5u2MZq0WrDE5/H00+zyodfkVrjPRbHMRbHLULXOm9TjyOfv1OzypNjlndXkz+rx+vz8rdzopNjl7Pb56vX45/T36/b45vT36/b45/T36vX45PP3AENUAEBQAD1MADtKADpIDVJjCU5fB0xdBktcCExdDlJjIWd4KH6TJ3yRJ3qPJ3uQKHyRKYCVMJixMJawMJavMJex////SLEDvgAAAFN0Uk5TAAAAEzVMYW51e0l7fn57Z4OHi4qHggdcu9zu+Pr8+OvXtFC1/YwDhfjrS47u/ddHmv391gcKq/z9yxozdeX9/e19Q0KUo0oGqr0kPEc6SjhGPk2mXRMZAAAAAWJLR0QB/wIt3gAAAAlwSFlzAAAASAAAAEgARslrPgAAALpJREFUGNNjYGBmYWVj5+Dk5GBnY2VhZmDg4ubhhQMePi4GfhBfQFBIWEQUJMLPICYuISklLSMrKyMnr6CoJMbAoKwSHBIaFh4eFhoSrKLKyMCopq4RERkVHR0TGaupxQAUYNTWiYMAXT19RpAAg4FhfEJiUnKKkbEJWIDR1Mw8NS09w8LSihEiwGhtY2tn7+DoxAQTYGRydnF1YwIzIQKM7h6eXozIAozePoyoAr5+aAL+AWgCgUFQBgBUGxvs9K2IRwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNy0wOS0xNFQwMDoxMTowNSswMzowMPy1TyEAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTctMDktMTRUMDA6MTE6MDQrMDM6MDArn/wpAAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAklQTFRF+/z+////dJ7j///+9Pv/a5TdqL7k4+v6eKDjsMnvtM75X5Hkp77ou9H33+j4vtT4wdf7cp/p3u3/ja/oaaP2ytjsZ47V/f//0N71wc3jKnft0OH8GmbeO3fcQHTSMW7VkbbyuNX/FWDcc5TS///6////2+X4z9zs1NviPoLihbT4/f7+bJ/umLLWyNTnNHzt/P3+1OP7wM7o0dznVoPMob3sY4zVR4jukLb0/v7+SILhz9vr//z0pb7gM3rlzeD9E17aWY/q/f3+R4Lhztnq///2jrfxG2rozd35RYHlgaHX0Nzw///+4+39cZrgtMXjqsn1GGjnf6nwkbTvd53iwtDjXIbOq8Pt/v39obrkN3PXLXnvfaju/v//8/j+gajrk7Hl//72sMTiPnrdt9D5+/z+qcz7AE/dcZzn8ff+iari9vf0+vnxTIfjZprvSo71QHradZjT4en2YIrV+fn03+jxOH/qeqnzKG7eY4rNVH/PiLPzxd37mbHe///3x9ToMWfIpL3roLjiT33PNnzrjLX1ibX04er1+vj18/PvXorWU4be9fj+8/X5NnfiGmjn5/D9+fv+WJTv3OLo5eru7e/vhazoL3Pk2ub6s8/6K3buPnTSm7Tja5zpQnDH7fH1/Pz6///4ga/xM3np4Or6SIboYJPmvszjRnXLp8LvlLvzLmnRydjs///8+Pr6UIjkSYTmwNX3LnLhrcXtjKnZS33V2eb70+P8gaLW///5pMj4CmHqnr31Lm7dztvu9/fy4unwQHTSe6HnW+6dZAAAACF0Uk5T+/7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+EjK2AQAAAAFiS0dEAf8CLd4AAAAJcEhZcwAAAEgAAABIAEbJaz4AAAEOSURBVBjTDcyDQkRRFAXQc7Nta6fJtt3Ltm3brsl2k227vqzWBywiZmhkbAKYCpmZW1iCR8IiVqLWYgziEjaStlLMjmAv7eDo5AzIuLi6Ae4EWQ9PL28fX8j5+QMBIMgHBgWHhIZBITwiEhyPEBUdExsXzyEhMSk5BRylIi09IzML2Tm5efkFhaAiVlxSCqBMsbyisqoaxCnV1NbVg4NyQ2NTcwuIqbSqtqmpg2m0a3ZoaYM6dbq6e3r7wLH+gcGh/3RYd2R0bHyCDzY5NT2DWZrTm19YXFpeAVtdW98AaHNre0ewu7eP7IPDo+MT0OnZ+cXl1TUfN7d3gvuHR3rSf355fXsHDD4+v75/fv8AgKdToRrTqZIAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTctMDktMTRUMDA6MjI6NDErMDM6MDD+ZbjKAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE3LTA5LTE0VDAwOjIyOjI2KzAzOjAwjPA3fwAAAABJRU5ErkJggg=="},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(902),o=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=o.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),d=r(c),p=n(2),f=r(p),h=n(903),m=function(e){function t(){o(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={expandChildHeight:0,expandChildWidth:0,expandScrollLeft:0,expandScrollTop:0,shrinkScrollTop:0,shrinkScrollLeft:0,lastWidth:0,lastHeight:0},e.reset=e.reset.bind(e),e.handleScroll=e.handleScroll.bind(e),e}return i(t,e),u(t,[{key:"componentWillMount",value:function(){this.forceUpdate()}},{key:"componentDidMount",value:function(){var e=this.containerSize(),t=l(e,2),n=t[0],r=t[1];this.reset(n,r)}},{key:"shouldComponentUpdate",value:function(e,t){return this.props!==e||this.state!==t}},{key:"componentDidUpdate",value:function(){this.expand.scrollLeft=this.expand.scrollWidth,this.expand.scrollTop=this.expand.scrollHeight,this.shrink.scrollLeft=this.shrink.scrollWidth,this.shrink.scrollTop=this.shrink.scrollHeight}},{key:"containerSize",value:function(){return[this.props.handleWidth&&this.container.parentElement.offsetWidth,this.props.handleHeight&&this.container.parentElement.offsetHeight]}},{key:"reset",value:function(e,t){if("undefined"!=typeof window){var n=this.container.parentElement,r="static";n.currentStyle?r=n.currentStyle.position:window.getComputedStyle&&(r=window.getComputedStyle(n).position),"static"===r&&(n.style.position="relative"),this.setState({expandChildHeight:this.expand.offsetHeight+10,expandChildWidth:this.expand.offsetWidth+10,lastWidth:e,lastHeight:t})}}},{key:"handleScroll",value:function(){if("undefined"!=typeof window){var e=this.state,t=this.containerSize(),n=l(t,2),r=n[0],o=n[1];r===e.lastWidth&&o===e.lastHeight||this.props.onResize(r,o),this.reset(r,o)}}},{key:"render",value:function(){var e=this,t=this.state,n=s({},h.expandChildStyle,{width:t.expandChildWidth,height:t.expandChildHeight});return d.default.createElement("div",{style:h.parentStyle,ref:function(t){e.container=t}},d.default.createElement("div",{style:h.parentStyle,onScroll:this.handleScroll,ref:function(t){e.expand=t}},d.default.createElement("div",{style:n})),d.default.createElement("div",{style:h.parentStyle,onScroll:this.handleScroll,ref:function(t){e.shrink=t}},d.default.createElement("div",{style:h.shrinkChildStyle})))}}]),t}(c.Component);t.default=m,m.propTypes={handleWidth:f.default.bool,handleHeight:f.default.bool,onResize:f.default.func},m.defaultProps={handleWidth:!1,handleHeight:!1,onResize:function(e){return e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.parentStyle={position:"absolute",left:0,top:0,right:0,bottom:0,overflow:"scroll",zIndex:-1,visibility:"hidden"},t.shrinkChildStyle={position:"absolute",left:0,top:0,width:"200%",height:"200%"},t.expandChildStyle={position:"absolute",left:0,top:0,width:"100%",height:"100%"}},function(e,t){},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){for(var t=window.atob(e),n=t.length,r=new Uint8Array(n),o=0;o<n;o++){var a=t.charCodeAt(o);r[o]=a}return r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n="<?xml version='1.0'?>"+(new XMLSerializer).serializeToString(t);if(n.length>2e6)return!1;return l.default.post("svgtopdf.do").type("form").send({filetype:"pdf_data",svgelement:n}).end(function(t,n){!t&&n.ok&&(0,i.default)(o(n.text),e)}),!0};var a=n(179),i=r(a),s=n(18),l=r(s)},function(e,t,n){!function(t,n){e.exports=n()}(0,function(){var e=function(e,t){function n(t,n){var r=t>n?t:n;return e.pow(10,17-~~(e.log(r>0?r:-r)*e.LOG10E))}function r(e){return"[object Function]"===f.call(e)}function o(e){return"number"==typeof e&&e===e}function a(e){return d.apply([],e)}function s(){return new s._init(arguments)}function l(){return 0}function u(){return 1}function c(e,t){return e===t?1:0}var d=Array.prototype.concat,p=Array.prototype.slice,f=Object.prototype.toString,h=Array.isArray||function(e){return"[object Array]"===f.call(e)};s.fn=s.prototype,s._init=function(e){var t;if(h(e[0]))if(h(e[0][0])){r(e[1])&&(e[0]=s.map(e[0],e[1]));for(var t=0;t<e[0].length;t++)this[t]=e[0][t];this.length=e[0].length}else this[0]=r(e[1])?s.map(e[0],e[1]):e[0],this.length=1;else if(o(e[0]))this[0]=s.seq.apply(null,e),this.length=1;else{if(e[0]instanceof s)return s(e[0].toArray());this[0]=[],this.length=1}return this},s._init.prototype=s.prototype,s._init.constructor=s,s.utils={calcRdx:n,isArray:h,isFunction:r,isNumber:o,toVector:a},s.extend=function(e){var t,n;if(1===arguments.length){for(n in e)s[n]=e[n];return this}for(var t=1;t<arguments.length;t++)for(n in arguments[t])e[n]=arguments[t][n];return e},s.rows=function(e){return e.length||1},s.cols=function(e){return e[0].length||1},s.dimensions=function(e){return{rows:s.rows(e),cols:s.cols(e)}},s.row=function(e,t){return h(t)?t.map(function(t){return s.row(e,t)}):e[t]},s.rowa=function(e,t){return s.row(e,t)},s.col=function(e,t){if(h(t)){var n=s.arange(e.length).map(function(e){return new Array(t.length)});return t.forEach(function(t,r){s.arange(e.length).forEach(function(o){n[o][r]=e[o][t]})}),n}for(var r=new Array(e.length),o=0;o<e.length;o++)r[o]=[e[o][t]];return r},s.cola=function(e,t){return s.col(e,t).map(function(e){return e[0]})},s.diag=function(e){for(var t=s.rows(e),n=new Array(t),r=0;r<t;r++)n[r]=[e[r][r]];return n},s.antidiag=function(e){for(var t=s.rows(e)-1,n=new Array(t),r=0;t>=0;t--,r++)n[r]=[e[r][t]];return n},s.transpose=function(e){var t,n,r,o,a,i=[];h(e[0])||(e=[e]),n=e.length,r=e[0].length;for(var a=0;a<r;a++){for(t=new Array(n),o=0;o<n;o++)t[o]=e[o][a];i.push(t)}return 1===i.length?i[0]:i},s.map=function(e,t,n){var r,o,a,i,s;for(h(e[0])||(e=[e]),o=e.length,a=e[0].length,i=n?e:new Array(o),r=0;r<o;r++)for(i[r]||(i[r]=new Array(a)),s=0;s<a;s++)i[r][s]=t(e[r][s],r,s);return 1===i.length?i[0]:i},s.cumreduce=function(e,t,n){var r,o,a,i,s;for(h(e[0])||(e=[e]),o=e.length,a=e[0].length,i=n?e:new Array(o),r=0;r<o;r++)for(i[r]||(i[r]=new Array(a)),a>0&&(i[r][0]=e[r][0]),s=1;s<a;s++)i[r][s]=t(i[r][s-1],e[r][s]);return 1===i.length?i[0]:i},s.alter=function(e,t){return s.map(e,t,!0)},s.create=function(e,t,n){var o,a,i=new Array(e);r(t)&&(n=t,t=e);for(var o=0;o<e;o++)for(i[o]=new Array(t),a=0;a<t;a++)i[o][a]=n(o,a);return i},s.zeros=function(e,t){return o(t)||(t=e),s.create(e,t,l)},s.ones=function(e,t){return o(t)||(t=e),s.create(e,t,u)},s.rand=function(t,n){return o(n)||(n=t),s.create(t,n,e.random)},s.identity=function(e,t){return o(t)||(t=e),s.create(e,t,c)},s.symmetric=function(e){var t,n,r=e.length;if(e.length!==e[0].length)return!1;for(t=0;t<r;t++)for(n=0;n<r;n++)if(e[n][t]!==e[t][n])return!1;return!0},s.clear=function(e){return s.alter(e,l)},s.seq=function(e,t,o,a){r(a)||(a=!1);var i,s=[],l=n(e,t),u=(t*l-e*l)/((o-1)*l),c=e;for(i=0;c<=t&&i<o;i++,c=(e*l+u*l*i)/l)s.push(a?a(c,i):c);return s},s.arange=function(e,n,r){var o=[];if(r=r||1,n===t&&(n=e,e=0),e===n||0===r)return[];if(e<n&&r<0)return[];if(e>n&&r>0)return[];if(r>0)for(i=e;i<n;i+=r)o.push(i);else for(i=e;i>n;i+=r)o.push(i);return o},s.slice=function(){function e(e,n,r,o){var a,i=[],l=e.length;if(n===t&&r===t&&o===t)return s.copy(e);if(n=n||0,r=r||e.length,n=n>=0?n:l+n,r=r>=0?r:l+r,o=o||1,n===r||0===o)return[];if(n<r&&o<0)return[];if(n>r&&o>0)return[];if(o>0)for(a=n;a<r;a+=o)i.push(e[a]);else for(a=n;a>r;a+=o)i.push(e[a]);return i}function n(t,n){if(n=n||{},o(n.row)){if(o(n.col))return t[n.row][n.col];var r=s.rowa(t,n.row),a=n.col||{};return e(r,a.start,a.end,a.step)}if(o(n.col)){var i=s.cola(t,n.col),l=n.row||{};return e(i,l.start,l.end,l.step)}var l=n.row||{},a=n.col||{};return e(t,l.start,l.end,l.step).map(function(t){return e(t,a.start,a.end,a.step)})}return n}(),s.sliceAssign=function(n,r,a){if(o(r.row)){if(o(r.col))return n[r.row][r.col]=a;r.col=r.col||{},r.col.start=r.col.start||0,r.col.end=r.col.end||n[0].length,r.col.step=r.col.step||1;var i=s.arange(r.col.start,e.min(n.length,r.col.end),r.col.step),l=r.row;return i.forEach(function(e,t){n[l][e]=a[t]}),n}if(o(r.col)){r.row=r.row||{},r.row.start=r.row.start||0,r.row.end=r.row.end||n.length,r.row.step=r.row.step||1;var u=s.arange(r.row.start,e.min(n[0].length,r.row.end),r.row.step),c=r.col;return u.forEach(function(e,t){n[e][c]=a[t]}),n}a[0].length===t&&(a=[a]),r.row.start=r.row.start||0,r.row.end=r.row.end||n.length,r.row.step=r.row.step||1,r.col.start=r.col.start||0,r.col.end=r.col.end||n[0].length,r.col.step=r.col.step||1;var u=s.arange(r.row.start,e.min(n.length,r.row.end),r.row.step),i=s.arange(r.col.start,e.min(n[0].length,r.col.end),r.col.step);return u.forEach(function(e,t){i.forEach(function(r,o){n[e][r]=a[t][o]})}),n},s.diagonal=function(e){var t=s.zeros(e.length,e.length);return e.forEach(function(e,n){t[n][n]=e}),t},s.copy=function(e){return e.map(function(e){return o(e)?e:e.map(function(e){return e})})};var m=s.prototype;return m.length=0,m.push=Array.prototype.push,m.sort=Array.prototype.sort,m.splice=Array.prototype.splice,m.slice=Array.prototype.slice,m.toArray=function(){return this.length>1?p.call(this):p.call(this)[0]},m.map=function(e,t){return s(s.map(this,e,t))},m.cumreduce=function(e,t){return s(s.cumreduce(this,e,t))},m.alter=function(e){return s.alter(this,e),this},function(e){for(var t=0;t<e.length;t++)!function(e){m[e]=function(t){var n,r=this;return t?(setTimeout(function(){t.call(r,m[e].call(r))}),this):(n=s[e](this),h(n)?s(n):n)}}(e[t])}("transpose clear symmetric rows cols dimensions diag antidiag".split(" ")),function(e){for(var t=0;t<e.length;t++)!function(e){m[e]=function(t,n){var r=this;return n?(setTimeout(function(){n.call(r,m[e].call(r,t))}),this):s(s[e](this,t))}}(e[t])}("row col".split(" ")),function(e){for(var t=0;t<e.length;t++)!function(e){m[e]=new Function("return jStat(jStat."+e+".apply(null, arguments));")}(e[t])}("create zeros ones rand identity".split(" ")),s}(Math);return function(e,t){function n(e,t){return e-t}function r(e,n,r){return t.max(n,t.min(e,r))}var o=e.utils.isFunction;e.sum=function(e){for(var t=0,n=e.length;--n>=0;)t+=e[n];return t},e.sumsqrd=function(e){for(var t=0,n=e.length;--n>=0;)t+=e[n]*e[n];return t},e.sumsqerr=function(t){for(var n,r=e.mean(t),o=0,a=t.length;--a>=0;)n=t[a]-r,o+=n*n;return o},e.sumrow=function(e){for(var t=0,n=e.length;--n>=0;)t+=e[n];return t},e.product=function(e){for(var t=1,n=e.length;--n>=0;)t*=e[n];return t},e.min=function(e){for(var t=e[0],n=0;++n<e.length;)e[n]<t&&(t=e[n]);return t},e.max=function(e){for(var t=e[0],n=0;++n<e.length;)e[n]>t&&(t=e[n]);return t},e.unique=function(e){for(var t={},n=[],r=0;r<e.length;r++)t[e[r]]||(t[e[r]]=!0,n.push(e[r]));return n},e.mean=function(t){return e.sum(t)/t.length},e.meansqerr=function(t){return e.sumsqerr(t)/t.length},e.geomean=function(n){return t.pow(e.product(n),1/n.length)},e.median=function(e){var t=e.length,r=e.slice().sort(n);return 1&t?r[t/2|0]:(r[t/2-1]+r[t/2])/2},e.cumsum=function(t){return e.cumreduce(t,function(e,t){return e+t})},e.cumprod=function(t){return e.cumreduce(t,function(e,t){return e*t})},e.diff=function(e){for(var t,n=[],r=e.length,t=1;t<r;t++)n.push(e[t]-e[t-1]);return n},e.rank=function(e){for(var t=e.length,r=e.slice().sort(n),o=new Array(t),a=0;a<t;a++){var i=r.indexOf(e[a]),s=r.lastIndexOf(e[a]);if(i===s)var l=i;else var l=(i+s)/2;o[a]=l+1}return o},e.mode=function(e){for(var t,r=e.length,o=e.slice().sort(n),a=1,i=0,s=0,l=[],t=0;t<r;t++)o[t]===o[t+1]?a++:(a>i?(l=[o[t]],i=a,s=0):a===i&&(l.push(o[t]),s++),a=1);return 0===s?l[0]:l},e.range=function(t){return e.max(t)-e.min(t)},e.variance=function(t,n){return e.sumsqerr(t)/(t.length-(n?1:0))},e.pooledvariance=function(t){return t.reduce(function(t,n){return t+e.sumsqerr(n)},0)/(t.reduce(function(e,t){return e+t.length},0)-t.length)},e.deviation=function(t){for(var n=e.mean(t),r=t.length,o=new Array(r),a=0;a<r;a++)o[a]=t[a]-n;return o},e.stdev=function(n,r){return t.sqrt(e.variance(n,r))},e.pooledstdev=function(n){return t.sqrt(e.pooledvariance(n))},e.meandev=function(n){for(var r=e.mean(n),o=[],a=n.length-1;a>=0;a--)o.push(t.abs(n[a]-r));return e.mean(o)},e.meddev=function(n){for(var r=e.median(n),o=[],a=n.length-1;a>=0;a--)o.push(t.abs(n[a]-r));return e.median(o)},e.coeffvar=function(t){return e.stdev(t)/e.mean(t)},e.quartiles=function(e){var r=e.length,o=e.slice().sort(n);return[o[t.round(r/4)-1],o[t.round(r/2)-1],o[t.round(3*r/4)-1]]},e.quantiles=function(e,o,a,i){var s,l,u,c,d,p,f=e.slice().sort(n),h=[o.length],m=e.length;void 0===a&&(a=3/8),void 0===i&&(i=3/8);for(var s=0;s<o.length;s++)l=o[s],u=a+l*(1-a-i),c=m*l+u,d=t.floor(r(c,1,m-1)),p=r(c-d,0,1),h[s]=(1-p)*f[d-1]+p*f[d];return h},e.percentile=function(e,t){var r=e.slice().sort(n),o=t*(r.length-1),a=parseInt(o),i=o-a;return a+1<r.length?r[a]*(1-i)+r[a+1]*i:r[a]},e.percentileOfScore=function(e,t,n){var r,o,a=0,i=e.length,s=!1;"strict"===n&&(s=!0);for(var o=0;o<i;o++)r=e[o],(s&&r<t||!s&&r<=t)&&a++;return a/i},e.histogram=function(n,r){for(var o,a=e.min(n),i=r||4,s=(e.max(n)-a)/i,l=n.length,r=[],o=0;o<i;o++)r[o]=0;for(var o=0;o<l;o++)r[t.min(t.floor((n[o]-a)/s),i-1)]+=1;return r},e.covariance=function(t,n){for(var r,o=e.mean(t),a=e.mean(n),i=t.length,s=new Array(i),r=0;r<i;r++)s[r]=(t[r]-o)*(n[r]-a);return e.sum(s)/(i-1)},e.corrcoeff=function(t,n){return e.covariance(t,n)/e.stdev(t,1)/e.stdev(n,1)},e.spearmancoeff=function(t,n){return t=e.rank(t),n=e.rank(n),e.corrcoeff(t,n)},e.stanMoment=function(n,r){for(var o=e.mean(n),a=e.stdev(n),i=n.length,s=0,l=0;l<i;l++)s+=t.pow((n[l]-o)/a,r);return s/n.length},e.skewness=function(t){return e.stanMoment(t,3)},e.kurtosis=function(t){return e.stanMoment(t,4)-3};var a=e.prototype;!function(t){for(var n=0;n<t.length;n++)!function(t){a[t]=function(n,r){var i=[],s=0,l=this;if(o(n)&&(r=n,n=!1),r)return setTimeout(function(){r.call(l,a[t].call(l,n))}),this;if(this.length>1){for(l=!0===n?this:this.transpose();s<l.length;s++)i[s]=e[t](l[s]);return i}return e[t](this[0],n)}}(t[n])}("cumsum cumprod".split(" ")),function(t){for(var n=0;n<t.length;n++)!function(t){a[t]=function(n,r){var i=[],s=0,l=this;if(o(n)&&(r=n,n=!1),r)return setTimeout(function(){r.call(l,a[t].call(l,n))}),this;if(this.length>1){for("sumrow"!==t&&(l=!0===n?this:this.transpose());s<l.length;s++)i[s]=e[t](l[s]);return!0===n?e[t](e.utils.toVector(i)):i}return e[t](this[0],n)}}(t[n])}("sum sumsqrd sumsqerr sumrow product min max unique mean meansqerr geomean median diff rank mode range variance deviation stdev meandev meddev coeffvar quartiles histogram skewness kurtosis".split(" ")),function(t){for(var n=0;n<t.length;n++)!function(t){a[t]=function(){var n=[],r=0,i=this,s=Array.prototype.slice.call(arguments);if(o(s[s.length-1])){var l=s[s.length-1],u=s.slice(0,s.length-1);return setTimeout(function(){l.call(i,a[t].apply(i,u))}),this}var l=void 0,c=function(n){return e[t].apply(i,[n].concat(s))};if(this.length>1){for(i=i.transpose();r<i.length;r++)n[r]=c(i[r]);return n}return c(this[0])}}(t[n])}("quantiles percentileOfScore".split(" "))}(e,Math),function(e,t){e.gammaln=function(e){var n,r,o,a=0,i=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],s=1.000000000190015;for(o=(r=n=e)+5.5,o-=(n+.5)*t.log(o);a<6;a++)s+=i[a]/++r;return t.log(2.5066282746310007*s/n)-o},e.gammafn=function(e){var n,r,o,a,i=[-1.716185138865495,24.76565080557592,-379.80425647094563,629.3311553128184,866.9662027904133,-31451.272968848367,-36144.413418691176,66456.14382024054],s=[-30.8402300119739,315.35062697960416,-1015.1563674902192,-3107.771671572311,22538.11842098015,4755.846277527881,-134659.9598649693,-115132.2596755535],l=!1,u=0,c=0,d=0,p=e;if(p<=0){if(!(a=p%1+3.6e-16))return 1/0;l=(1&p?-1:1)*t.PI/t.sin(t.PI*a),p=1-p}o=p,r=p<1?p++:(p-=u=(0|p)-1)-1;for(var n=0;n<8;++n)d=(d+i[n])*r,c=c*r+s[n];if(a=d/c+1,o<p)a/=o;else if(o>p)for(var n=0;n<u;++n)a*=p,p++;return l&&(a=l/a),a},e.gammap=function(t,n){return e.lowRegGamma(t,n)*e.gammafn(t)},e.lowRegGamma=function(n,r){var o,a=e.gammaln(n),i=n,s=1/n,l=s,u=r+1-n,c=1/1e-30,d=1/u,p=d,f=1,h=-~(8.5*t.log(n>=1?n:1/n)+.4*n+17);if(r<0||n<=0)return NaN;if(r<n+1){for(;f<=h;f++)s+=l*=r/++i;return s*t.exp(-r+n*t.log(r)-a)}for(;f<=h;f++)o=-f*(f-n),u+=2,d=o*d+u,c=u+o/c,d=1/d,p*=d*c;return 1-p*t.exp(-r+n*t.log(r)-a)},e.factorialln=function(t){return t<0?NaN:e.gammaln(t+1)},e.factorial=function(t){return t<0?NaN:e.gammafn(t+1)},e.combination=function(n,r){return n>170||r>170?t.exp(e.combinationln(n,r)):e.factorial(n)/e.factorial(r)/e.factorial(n-r)},e.combinationln=function(t,n){return e.factorialln(t)-e.factorialln(n)-e.factorialln(t-n)},e.permutation=function(t,n){return e.factorial(t)/e.factorial(t-n)},e.betafn=function(n,r){if(!(n<=0||r<=0))return n+r>170?t.exp(e.betaln(n,r)):e.gammafn(n)*e.gammafn(r)/e.gammafn(n+r)},e.betaln=function(t,n){return e.gammaln(t)+e.gammaln(n)-e.gammaln(t+n)},e.betacf=function(e,n,r){var o,a,i,s,l=1,u=n+r,c=n+1,d=n-1,p=1,f=1-u*e/c;for(t.abs(f)<1e-30&&(f=1e-30),f=1/f,s=f;l<=100&&(o=2*l,a=l*(r-l)*e/((d+o)*(n+o)),f=1+a*f,t.abs(f)<1e-30&&(f=1e-30),p=1+a/p,t.abs(p)<1e-30&&(p=1e-30),f=1/f,s*=f*p,a=-(n+l)*(u+l)*e/((n+o)*(c+o)),f=1+a*f,t.abs(f)<1e-30&&(f=1e-30),p=1+a/p,t.abs(p)<1e-30&&(p=1e-30),f=1/f,i=f*p,s*=i,!(t.abs(i-1)<3e-7));l++);return s},e.gammapinv=function(n,r){var o,a,i,s,l,u,c,d=0,p=r-1,f=e.gammaln(r);if(n>=1)return t.max(100,r+100*t.sqrt(r));if(n<=0)return 0;for(r>1?(u=t.log(p),c=t.exp(p*(u-1)-f),l=n<.5?n:1-n,i=t.sqrt(-2*t.log(l)),o=(2.30753+.27061*i)/(1+i*(.99229+.04481*i))-i,n<.5&&(o=-o),o=t.max(.001,r*t.pow(1-1/(9*r)-o/(3*t.sqrt(r)),3))):(i=1-r*(.253+.12*r),o=n<i?t.pow(n/i,1/r):1-t.log(1-(n-i)/(1-i)));d<12;d++){if(o<=0)return 0;if(a=e.lowRegGamma(r,o)-n,i=r>1?c*t.exp(-(o-p)+p*(t.log(o)-u)):t.exp(-o+p*t.log(o)-f),s=a/i,o-=i=s/(1-.5*t.min(1,s*((r-1)/o-1))),o<=0&&(o=.5*(o+i)),t.abs(i)<1e-8*o)break}return o},e.erf=function(e){var n,r,o,a,i=[-1.3026537197817094,.6419697923564902,.019476473204185836,-.00956151478680863,-.000946595344482036,.000366839497852761,42523324806907e-18,-20278578112534e-18,-1624290004647e-18,130365583558e-17,1.5626441722e-8,-8.5238095915e-8,6.529054439e-9,5.059343495e-9,-9.91364156e-10,-2.27365122e-10,9.6467911e-11,2.394038e-12,-6.886027e-12,8.94487e-13,3.13092e-13,-1.12708e-13,3.81e-16,7.106e-15,-1.523e-15,-9.4e-17,1.21e-16,-2.8e-17],s=i.length-1,l=!1,u=0,c=0;for(e<0&&(e=-e,l=!0),n=2/(2+e),r=4*n-2;s>0;s--)o=u,u=r*u-c+i[s],c=o;return a=n*t.exp(-e*e+.5*(i[0]+r*u)-c),l?a-1:1-a},e.erfc=function(t){return 1-e.erf(t)},e.erfcinv=function(n){var r,o,a,i,s=0;if(n>=2)return-100;if(n<=0)return 100;for(i=n<1?n:2-n,a=t.sqrt(-2*t.log(i/2)),r=-.70711*((2.30753+.27061*a)/(1+a*(.99229+.04481*a))-a);s<2;s++)o=e.erfc(r)-i,r+=o/(1.1283791670955126*t.exp(-r*r)-r*o);return n<1?r:-r},e.ibetainv=function(n,r,o){var a,i,s,l,u,c,d,p,f,h,m,y=r-1,g=o-1,v=0;if(n<=0)return 0;if(n>=1)return 1;for(r>=1&&o>=1?(s=n<.5?n:1-n,l=t.sqrt(-2*t.log(s)),d=(2.30753+.27061*l)/(1+l*(.99229+.04481*l))-l,n<.5&&(d=-d),p=(d*d-3)/6,f=2/(1/(2*r-1)+1/(2*o-1)),h=d*t.sqrt(p+f)/f-(1/(2*o-1)-1/(2*r-1))*(p+5/6-2/(3*f)),d=r/(r+o*t.exp(2*h))):(a=t.log(r/(r+o)),i=t.log(o/(r+o)),l=t.exp(r*a)/r,u=t.exp(o*i)/o,h=l+u,d=n<l/h?t.pow(r*h*n,1/r):1-t.pow(o*h*(1-n),1/o)),m=-e.gammaln(r)-e.gammaln(o)+e.gammaln(r+o);v<10;v++){if(0===d||1===d)return d;if(c=e.ibeta(d,r,o)-n,l=t.exp(y*t.log(d)+g*t.log(1-d)+m),u=c/l,d-=l=u/(1-.5*t.min(1,u*(y/d-g/(1-d)))),d<=0&&(d=.5*(d+l)),d>=1&&(d=.5*(d+l+1)),t.abs(l)<1e-8*d&&v>0)break}return d},e.ibeta=function(n,r,o){var a=0===n||1===n?0:t.exp(e.gammaln(r+o)-e.gammaln(r)-e.gammaln(o)+r*t.log(n)+o*t.log(1-n));return!(n<0||n>1)&&(n<(r+1)/(r+o+2)?a*e.betacf(n,r,o)/r:1-a*e.betacf(1-n,o,r)/o)},e.randn=function(n,r){var o,a,i,s,l;if(r||(r=n),n)return e.create(n,r,function(){return e.randn()});do{o=t.random(),a=1.7156*(t.random()-.5),i=o-.449871,s=t.abs(a)+.386595,l=i*i+s*(.196*s-.25472*i)}while(l>.27597&&(l>.27846||a*a>-4*t.log(o)*o*o));return a/o},e.randg=function(n,r,o){var a,i,s,l,u,c,d=n;if(o||(o=r),n||(n=1),r)return c=e.zeros(r,o),c.alter(function(){return e.randg(n)}),c;n<1&&(n+=1),a=n-1/3,i=1/t.sqrt(9*a);do{do{u=e.randn(),l=1+i*u}while(l<=0);l*=l*l,s=t.random()}while(s>1-.331*t.pow(u,4)&&t.log(s)>.5*u*u+a*(1-l+t.log(l)));if(n==d)return a*l;do{s=t.random()}while(0===s);return t.pow(s,1/d)*a*l},function(t){for(var n=0;n<t.length;n++)!function(t){e.fn[t]=function(){return e(e.map(this,function(n){return e[t](n)}))}}(t[n])}("gammaln gammafn factorial factorialln".split(" ")),function(t){for(var n=0;n<t.length;n++)!function(t){e.fn[t]=function(){return e(e[t].apply(null,arguments))}}(t[n])}("randn".split(" "))}(e,Math),function(e,t){function n(e){return e/t.abs(e)}function r(n,r,o){var a=[.9815606342467192,.9041172563704749,.7699026741943047,.5873179542866175,.3678314989981802,.1252334085114689],i=[.04717533638651183,.10693932599531843,.16007832854334622,.20316742672306592,.2334925365383548,.24914704581340277],s=.5*n;if(s>=8)return 1;var l=2*e.normal.cdf(s,0,1,1,0)-1;l=l>=t.exp(-50/o)?t.pow(l,o):0;var u;u=n>3?2:3;for(var c=s,d=(8-s)/u,p=c+d,f=0,h=o-1,m=1;m<=u;m++){for(var y=0,g=.5*(p+c),v=.5*(p-c),b=1;b<=12;b++){var _,w;6<b?(_=12-b+1,w=a[_-1]):(_=b,w=-a[_-1]);var x=v*w,S=g+x,C=S*S;if(C>60)break;var k=2*e.normal.cdf(S,0,1,1,0),E=2*e.normal.cdf(S,n,1,1,0),M=.5*k-.5*E;M>=t.exp(-30/h)&&(M=i[_-1]*t.exp(-.5*C)*t.pow(M,h),y+=M)}y*=2*v*o/t.sqrt(2*t.PI),f+=y,c=p,p+=d}return(l+=f)<=t.exp(-30/r)?0:(l=t.pow(l,r),l>=1?1:l)}function o(e,n,r){var o=.5-.5*e,a=t.sqrt(t.log(1/(o*o))),i=a+((((-453642210148e-16*a-.204231210125)*a-.342242088547)*a-1)*a+.322232421088)/((((.0038560700634*a+.10353775285)*a+.531103462366)*a+.588581570495)*a+.099348462606);r<120&&(i+=(i*i*i+i)/r/4);var s=.8832-.2368*i;return r<120&&(s+=-1.214/r+1.208*i/r),i*(s*t.log(n-1)+1.4142)}!function(t){for(var n=0;n<t.length;n++)!function(t){e[t]=function(e,t,n){return this instanceof arguments.callee?(this._a=e,this._b=t,this._c=n,this):new arguments.callee(e,t,n)},e.fn[t]=function(n,r,o){var a=e[t](n,r,o);return a.data=this,a},e[t].prototype.sample=function(n){var r=this._a,o=this._b,a=this._c;return n?e.alter(n,function(){return e[t].sample(r,o,a)}):e[t].sample(r,o,a)},function(n){for(var r=0;r<n.length;r++)!function(n){e[t].prototype[n]=function(r){var o=this._a,a=this._b,i=this._c;return r||0===r||(r=this.data),"number"!=typeof r?e.fn.map.call(r,function(r){return e[t][n](r,o,a,i)}):e[t][n](r,o,a,i)}}(n[r])}("pdf cdf inv".split(" ")),function(n){for(var r=0;r<n.length;r++)!function(n){e[t].prototype[n]=function(){return e[t][n](this._a,this._b,this._c)}}(n[r])}("mean median mode variance".split(" "))}(t[n])}("beta centralF cauchy chisquare exponential gamma invgamma kumaraswamy laplace lognormal noncentralt normal pareto studentt weibull uniform binomial negbin hypgeom poisson triangular tukey arcsine".split(" ")),e.extend(e.beta,{pdf:function(n,r,o){return n>1||n<0?0:1==r&&1==o?1:r<512&&o<512?t.pow(n,r-1)*t.pow(1-n,o-1)/e.betafn(r,o):t.exp((r-1)*t.log(n)+(o-1)*t.log(1-n)-e.betaln(r,o))},cdf:function(t,n,r){return t>1||t<0?1*(t>1):e.ibeta(t,n,r)},inv:function(t,n,r){return e.ibetainv(t,n,r)},mean:function(e,t){return e/(e+t)},median:function(t,n){return e.ibetainv(.5,t,n)},mode:function(e,t){return(e-1)/(e+t-2)},sample:function(t,n){var r=e.randg(t);return r/(r+e.randg(n))},variance:function(e,n){return e*n/(t.pow(e+n,2)*(e+n+1))}}),e.extend(e.centralF,{pdf:function(n,r,o){var a,i;return n<0?0:r<=2?0===n&&r<2?1/0:0===n&&2===r?1:1/e.betafn(r/2,o/2)*t.pow(r/o,r/2)*t.pow(n,r/2-1)*t.pow(1+r/o*n,-(r+o)/2):(a=r*n/(o+n*r),i=o/(o+n*r),r*i/2*e.binomial.pdf((r-2)/2,(r+o-2)/2,a))},cdf:function(t,n,r){return t<0?0:e.ibeta(n*t/(n*t+r),n/2,r/2)},inv:function(t,n,r){return r/(n*(1/e.ibetainv(t,n/2,r/2)-1))},mean:function(e,t){return t>2?t/(t-2):void 0},mode:function(e,t){return e>2?t*(e-2)/(e*(t+2)):void 0},sample:function(t,n){return 2*e.randg(t/2)/t/(2*e.randg(n/2)/n)},variance:function(e,t){if(!(t<=4))return 2*t*t*(e+t-2)/(e*(t-2)*(t-2)*(t-4))}}),e.extend(e.cauchy,{pdf:function(e,n,r){return r<0?0:r/(t.pow(e-n,2)+t.pow(r,2))/t.PI},cdf:function(e,n,r){return t.atan((e-n)/r)/t.PI+.5},inv:function(e,n,r){return n+r*t.tan(t.PI*(e-.5))},median:function(e,t){return e},mode:function(e,t){return e},sample:function(n,r){return e.randn()*t.sqrt(1/(2*e.randg(.5)))*r+n}}),e.extend(e.chisquare,{pdf:function(n,r){return n<0?0:0===n&&2===r?.5:t.exp((r/2-1)*t.log(n)-n/2-r/2*t.log(2)-e.gammaln(r/2))},cdf:function(t,n){return t<0?0:e.lowRegGamma(n/2,t/2)},inv:function(t,n){return 2*e.gammapinv(t,.5*n)},mean:function(e){return e},median:function(e){return e*t.pow(1-2/(9*e),3)},mode:function(e){return e-2>0?e-2:0},sample:function(t){return 2*e.randg(t/2)},variance:function(e){return 2*e}}),e.extend(e.exponential,{pdf:function(e,n){return e<0?0:n*t.exp(-n*e)},cdf:function(e,n){return e<0?0:1-t.exp(-n*e)},inv:function(e,n){return-t.log(1-e)/n},mean:function(e){return 1/e},median:function(e){return 1/e*t.log(2)},mode:function(e){return 0},sample:function(e){return-1/e*t.log(t.random())},variance:function(e){return t.pow(e,-2)}}),e.extend(e.gamma,{pdf:function(n,r,o){return n<0?0:0===n&&1===r?1/o:t.exp((r-1)*t.log(n)-n/o-e.gammaln(r)-r*t.log(o))},cdf:function(t,n,r){return t<0?0:e.lowRegGamma(n,t/r)},inv:function(t,n,r){return e.gammapinv(t,n)*r},mean:function(e,t){return e*t},mode:function(e,t){if(e>1)return(e-1)*t},sample:function(t,n){return e.randg(t)*n},variance:function(e,t){return e*t*t}}),e.extend(e.invgamma,{pdf:function(n,r,o){return n<=0?0:t.exp(-(r+1)*t.log(n)-o/n-e.gammaln(r)+r*t.log(o))},cdf:function(t,n,r){return t<=0?0:1-e.lowRegGamma(n,r/t)},inv:function(t,n,r){return r/e.gammapinv(1-t,n)},mean:function(e,t){return e>1?t/(e-1):void 0},mode:function(e,t){return t/(e+1)},sample:function(t,n){return n/e.randg(t)},variance:function(e,t){if(!(e<=2))return t*t/((e-1)*(e-1)*(e-2))}}),e.extend(e.kumaraswamy,{pdf:function(e,n,r){return 0===e&&1===n?r:1===e&&1===r?n:t.exp(t.log(n)+t.log(r)+(n-1)*t.log(e)+(r-1)*t.log(1-t.pow(e,n)))},cdf:function(e,n,r){return e<0?0:e>1?1:1-t.pow(1-t.pow(e,n),r)},inv:function(e,n,r){return t.pow(1-t.pow(1-e,1/r),1/n)},mean:function(t,n){return n*e.gammafn(1+1/t)*e.gammafn(n)/e.gammafn(1+1/t+n)},median:function(e,n){return t.pow(1-t.pow(2,-1/n),1/e)},mode:function(e,n){if(e>=1&&n>=1&&1!==e&&1!==n)return t.pow((e-1)/(e*n-1),1/e)},variance:function(e,t){throw new Error("variance not yet implemented")}}),e.extend(e.lognormal,{pdf:function(e,n,r){return e<=0?0:t.exp(-t.log(e)-.5*t.log(2*t.PI)-t.log(r)-t.pow(t.log(e)-n,2)/(2*r*r))},cdf:function(n,r,o){return n<0?0:.5+.5*e.erf((t.log(n)-r)/t.sqrt(2*o*o))},inv:function(n,r,o){return t.exp(-1.4142135623730951*o*e.erfcinv(2*n)+r)},mean:function(e,n){return t.exp(e+n*n/2)},median:function(e,n){return t.exp(e)},mode:function(e,n){return t.exp(e-n*n)},sample:function(n,r){return t.exp(e.randn()*r+n)},variance:function(e,n){return(t.exp(n*n)-1)*t.exp(2*e+n*n)}}),e.extend(e.noncentralt,{pdf:function(n,r,o){return t.abs(o)<1e-14?e.studentt.pdf(n,r):t.abs(n)<1e-14?t.exp(e.gammaln((r+1)/2)-o*o/2-.5*t.log(t.PI*r)-e.gammaln(r/2)):r/n*(e.noncentralt.cdf(n*t.sqrt(1+2/r),r+2,o)-e.noncentralt.cdf(n,r,o))},cdf:function(n,r,o){if(t.abs(o)<1e-14)return e.studentt.cdf(n,r);var a=!1;n<0&&(a=!0,o=-o);for(var i=e.normal.cdf(-o,0,1),s=1e-14+1,l=s,u=n*n/(n*n+r),c=0,d=t.exp(-o*o/2),p=t.exp(-o*o/2-.5*t.log(2)-e.gammaln(1.5))*o;c<200||l>1e-14||s>1e-14;)l=s,c>0&&(d*=o*o/(2*c),p*=o*o/(2*(c+.5))),s=d*e.beta.cdf(u,c+.5,r/2)+p*e.beta.cdf(u,c+1,r/2),i+=.5*s,c++;return a?1-i:i}}),e.extend(e.normal,{pdf:function(e,n,r){return t.exp(-.5*t.log(2*t.PI)-t.log(r)-t.pow(e-n,2)/(2*r*r))},cdf:function(n,r,o){return.5*(1+e.erf((n-r)/t.sqrt(2*o*o)))},inv:function(t,n,r){return-1.4142135623730951*r*e.erfcinv(2*t)+n},mean:function(e,t){return e},median:function(e,t){return e},mode:function(e,t){return e},sample:function(t,n){return e.randn()*n+t},variance:function(e,t){return t*t}}),e.extend(e.pareto,{pdf:function(e,n,r){return e<n?0:r*t.pow(n,r)/t.pow(e,r+1)},cdf:function(e,n,r){return e<n?0:1-t.pow(n/e,r)},inv:function(e,n,r){return n/t.pow(1-e,1/r)},mean:function(e,n){if(!(n<=1))return n*t.pow(e,n)/(n-1)},median:function(e,n){return e*(n*t.SQRT2)},mode:function(e,t){return e},variance:function(e,n){if(!(n<=2))return e*e*n/(t.pow(n-1,2)*(n-2))}}),e.extend(e.studentt,{pdf:function(n,r){return r=r>1e100?1e100:r,1/(t.sqrt(r)*e.betafn(.5,r/2))*t.pow(1+n*n/r,-(r+1)/2)},cdf:function(n,r){var o=r/2;return e.ibeta((n+t.sqrt(n*n+r))/(2*t.sqrt(n*n+r)),o,o)},inv:function(n,r){var o=e.ibetainv(2*t.min(n,1-n),.5*r,.5);return o=t.sqrt(r*(1-o)/o),n>.5?o:-o},mean:function(e){return e>1?0:void 0},median:function(e){return 0},mode:function(e){return 0},sample:function(n){return e.randn()*t.sqrt(n/(2*e.randg(n/2)))},variance:function(e){return e>2?e/(e-2):e>1?1/0:void 0}}),e.extend(e.weibull,{pdf:function(e,n,r){return e<0||n<0||r<0?0:r/n*t.pow(e/n,r-1)*t.exp(-t.pow(e/n,r))},cdf:function(e,n,r){return e<0?0:1-t.exp(-t.pow(e/n,r))},inv:function(e,n,r){return n*t.pow(-t.log(1-e),1/r)},mean:function(t,n){return t*e.gammafn(1+1/n)},median:function(e,n){return e*t.pow(t.log(2),1/n)},mode:function(e,n){return n<=1?0:e*t.pow((n-1)/n,1/n)},sample:function(e,n){return e*t.pow(-t.log(t.random()),1/n)},variance:function(n,r){return n*n*e.gammafn(1+2/r)-t.pow(e.weibull.mean(n,r),2)}}),e.extend(e.uniform,{pdf:function(e,t,n){return e<t||e>n?0:1/(n-t)},cdf:function(e,t,n){return e<t?0:e<n?(e-t)/(n-t):1},inv:function(e,t,n){return t+e*(n-t)},mean:function(e,t){return.5*(e+t)},median:function(t,n){return e.mean(t,n)},mode:function(e,t){throw new Error("mode is not yet implemented")},sample:function(e,n){return e/2+n/2+(n/2-e/2)*(2*t.random()-1)},variance:function(e,n){return t.pow(n-e,2)/12}}),e.extend(e.binomial,{pdf:function(n,r,o){return 0===o||1===o?r*o===n?1:0:e.combination(r,n)*t.pow(o,n)*t.pow(1-o,r-n)},cdf:function(t,n,r){var o=[],a=0;if(t<0)return 0;if(t<n){for(;a<=t;a++)o[a]=e.binomial.pdf(a,n,r);return e.sum(o)}return 1}}),e.extend(e.negbin,{pdf:function(n,r,o){return n===n>>>0&&(n<0?0:e.combination(n+r-1,r-1)*t.pow(1-o,n)*t.pow(o,r))},cdf:function(t,n,r){var o=0,a=0;if(t<0)return 0;for(;a<=t;a++)o+=e.negbin.pdf(a,n,r);return o}}),e.extend(e.hypgeom,{pdf:function(n,r,o,a){if(n!==n|0)return!1;if(n<0||n<o-(r-a))return 0;if(n>a||n>o)return 0;if(2*o>r)return 2*a>r?e.hypgeom.pdf(r-o-a+n,r,r-o,r-a):e.hypgeom.pdf(a-n,r,r-o,a);if(2*a>r)return e.hypgeom.pdf(o-n,r,o,r-a);if(o<a)return e.hypgeom.pdf(n,r,a,o);for(var i=1,s=0,l=0;l<n;l++){for(;i>1&&s<a;)i*=1-o/(r-s),s++;i*=(a-l)*(o-l)/((l+1)*(r-o-a+l+1))}for(;s<a;s++)i*=1-o/(r-s);return t.min(1,t.max(0,i))},cdf:function(n,r,o,a){if(n<0||n<o-(r-a))return 0;if(n>=a||n>=o)return 1;if(2*o>r)return 2*a>r?e.hypgeom.cdf(r-o-a+n,r,r-o,r-a):1-e.hypgeom.cdf(a-n-1,r,r-o,a);if(2*a>r)return 1-e.hypgeom.cdf(o-n-1,r,o,r-a);if(o<a)return e.hypgeom.cdf(n,r,a,o);for(var i=1,s=1,l=0,u=0;u<n;u++){for(;i>1&&l<a;){var c=1-o/(r-l);s*=c,i*=c,l++}s*=(a-u)*(o-u)/((u+1)*(r-o-a+u+1)),i+=s}for(;l<a;l++)i*=1-o/(r-l);return t.min(1,t.max(0,i))}}),e.extend(e.poisson,{pdf:function(n,r){return r<0||n%1!=0||n<0?0:t.pow(r,n)*t.exp(-r)/e.factorial(n)},cdf:function(t,n){var r=[],o=0;if(t<0)return 0;for(;o<=t;o++)r.push(e.poisson.pdf(o,n));return e.sum(r)},mean:function(e){return e},variance:function(e){return e},sample:function(e){var n=1,r=0,o=t.exp(-e);do{r++,n*=t.random()}while(n>o);return r-1}}),e.extend(e.triangular,{pdf:function(e,t,n,r){return n<=t||r<t||r>n?NaN:e<t||e>n?0:e<r?2*(e-t)/((n-t)*(r-t)):e===r?2/(n-t):2*(n-e)/((n-t)*(n-r))},cdf:function(e,n,r,o){return r<=n||o<n||o>r?NaN:e<=n?0:e>=r?1:e<=o?t.pow(e-n,2)/((r-n)*(o-n)):1-t.pow(r-e,2)/((r-n)*(r-o))},inv:function(e,n,r,o){return r<=n||o<n||o>r?NaN:e<=(o-n)/(r-n)?n+(r-n)*t.sqrt(e*((o-n)/(r-n))):n+(r-n)*(1-t.sqrt((1-e)*(1-(o-n)/(r-n))))},mean:function(e,t,n){return(e+t+n)/3},median:function(e,n,r){return r<=(e+n)/2?n-t.sqrt((n-e)*(n-r))/t.sqrt(2):r>(e+n)/2?e+t.sqrt((n-e)*(r-e))/t.sqrt(2):void 0},mode:function(e,t,n){return n},sample:function(e,n,r){var o=t.random();return o<(r-e)/(n-e)?e+t.sqrt(o*(n-e)*(r-e)):n-t.sqrt((1-o)*(n-e)*(n-r))},variance:function(e,t,n){return(e*e+t*t+n*n-e*t-e*n-t*n)/18}}),e.extend(e.arcsine,{pdf:function(e,n,r){return r<=n?NaN:e<=n||e>=r?0:2/t.PI*t.pow(t.pow(r-n,2)-t.pow(2*e-n-r,2),-.5)},cdf:function(e,n,r){return e<n?0:e<r?2/t.PI*t.asin(t.sqrt((e-n)/(r-n))):1},inv:function(e,n,r){return n+(.5-.5*t.cos(t.PI*e))*(r-n)},mean:function(e,t){return t<=e?NaN:(e+t)/2},median:function(e,t){return t<=e?NaN:(e+t)/2},mode:function(e,t){throw new Error("mode is not yet implemented")},sample:function(n,r){return(n+r)/2+(r-n)/2*t.sin(2*t.PI*e.uniform.sample(0,1))},variance:function(e,n){return n<=e?NaN:t.pow(n-e,2)/8}}),e.extend(e.laplace,{pdf:function(e,n,r){return r<=0?0:t.exp(-t.abs(e-n)/r)/(2*r)},cdf:function(e,n,r){return r<=0?0:e<n?.5*t.exp((e-n)/r):1-.5*t.exp(-(e-n)/r)},mean:function(e,t){return e},median:function(e,t){return e},mode:function(e,t){return e},variance:function(e,t){return 2*t*t},sample:function(e,r){var o=t.random()-.5;return e-r*n(o)*t.log(1-2*t.abs(o))}}),e.extend(e.tukey,{cdf:function(n,o,a){var i=o,s=[.9894009349916499,.9445750230732326,.8656312023878318,.755404408355003,.6178762444026438,.45801677765722737,.2816035507792589,.09501250983763744],l=[.027152459411754096,.062253523938647894,.09515851168249279,.12462897125553388,.14959598881657674,.16915651939500254,.18260341504492358,.1894506104550685];if(n<=0)return 0;if(a<2||i<2)return NaN;if(!Number.isFinite(n))return 1;if(a>25e3)return r(n,1,i);var u,c=.5*a,d=c*t.log(a)-a*t.log(2)-e.gammaln(c),p=c-1,f=.25*a;u=a<=100?1:a<=800?.5:a<=5e3?.25:.125,d+=t.log(u);for(var h=0,m=1;m<=50;m++){for(var y=0,g=(2*m-1)*u,v=1;v<=16;v++){var b,_;8<v?(b=v-8-1,_=d+p*t.log(g+s[b]*u)-(s[b]*u+g)*f):(b=v-1,_=d+p*t.log(g-s[b]*u)+(s[b]*u-g)*f);var w;if(_>=-30){w=8<v?n*t.sqrt(.5*(s[b]*u+g)):n*t.sqrt(.5*(-s[b]*u+g));y+=r(w,1,i)*l[b]*t.exp(_)}}if(m*u>=1&&y<=1e-14)break;h+=y}if(y>1e-14)throw new Error("tukey.cdf failed to converge");return h>1&&(h=1),h},inv:function(n,r,a){var i=r;if(a<2||i<2)return NaN;if(n<0||n>1)return NaN;if(0===n)return 0;if(1===n)return 1/0;var s,l=o(n,i,a),u=e.tukey.cdf(l,r,a)-n;s=u>0?t.max(0,l-1):l+1;for(var c,d=e.tukey.cdf(s,r,a)-n,p=1;p<50;p++){c=s-d*(s-l)/(d-u),u=d,l=s,c<0&&(c=0,d=-n),d=e.tukey.cdf(c,r,a)-n,s=c;if(t.abs(s-l)<1e-4)return c}throw new Error("tukey.inv failed to converge")}})}(e,Math),function(e,t){function n(t){return a(t)||t instanceof e}var o=Array.prototype.push,a=e.utils.isArray;e.extend({add:function(t,r){return n(r)?(n(r[0])||(r=[r]),e.map(t,function(e,t,n){return e+r[t][n]})):e.map(t,function(e){return e+r})},subtract:function(t,r){return n(r)?(n(r[0])||(r=[r]),e.map(t,function(e,t,n){return e-r[t][n]||0})):e.map(t,function(e){return e-r})},divide:function(t,r){return n(r)?(n(r[0])||(r=[r]),e.multiply(t,e.inv(r))):e.map(t,function(e){return e/r})},multiply:function(t,r){var o,a,i,s,l,u,c,d;if(void 0===t.length&&void 0===r.length)return t*r;if(l=t.length,u=t[0].length,c=e.zeros(l,i=n(r)?r[0].length:u),d=0,n(r)){for(;d<i;d++)for(o=0;o<l;o++){for(s=0,a=0;a<u;a++)s+=t[o][a]*r[a][d];c[o][d]=s}return 1===l&&1===d?c[0][0]:c}return e.map(t,function(e){return e*r})},outer:function(t,n){return e.multiply(t.map(function(e){return[e]}),[n])},outer:function(t,n){return e.multiply(t.map(function(e){return[e]}),[n])},dot:function(t,r){n(t[0])||(t=[t]),n(r[0])||(r=[r]);for(var o,a,i=1===t[0].length&&1!==t.length?e.transpose(t):t,s=1===r[0].length&&1!==r.length?e.transpose(r):r,l=[],u=0,c=i.length,d=i[0].length;u<c;u++){for(l[u]=[],o=0,a=0;a<d;a++)o+=i[u][a]*s[u][a];l[u]=o}return 1===l.length?l[0]:l},pow:function(n,r){return e.map(n,function(e){return t.pow(e,r)})},exp:function(n){return e.map(n,function(e){return t.exp(e)})},log:function(n){return e.map(n,function(e){return t.log(e)})},abs:function(n){return e.map(n,function(e){return t.abs(e)})},norm:function(e,r){var o=0,a=0;for(isNaN(r)&&(r=2),n(e[0])&&(e=e[0]);a<e.length;a++)o+=t.pow(t.abs(e[a]),r);return t.pow(o,1/r)},angle:function(n,r){return t.acos(e.dot(n,r)/(e.norm(n)*e.norm(r)))},aug:function(e,t){for(var n=[],r=0;r<e.length;r++)n.push(e[r].slice());for(var r=0;r<n.length;r++)o.apply(n[r],t[r]);return n},inv:function(t){for(var n,r=t.length,o=t[0].length,a=e.identity(r,o),i=e.gauss_jordan(t,a),s=[],l=0;l<r;l++)for(s[l]=[],n=o;n<i[0].length;n++)s[l][n-o]=i[l][n];return s},det:function(e){var t,n=e.length,r=2*n,o=new Array(r),a=n-1,i=r-1,s=a-n+1,l=i,u=0,c=0;if(2===n)return e[0][0]*e[1][1]-e[0][1]*e[1][0];for(;u<r;u++)o[u]=1;for(var u=0;u<n;u++){for(t=0;t<n;t++)o[s<0?s+n:s]*=e[u][t],o[l<n?l+n:l]*=e[u][t],s++,l--;s=--a-n+1,l=--i}for(var u=0;u<n;u++)c+=o[u];for(;u<r;u++)c-=o[u];return c},gauss_elimination:function(n,r){var o,a,i,s,l=0,u=0,c=n.length,d=n[0].length,p=1,f=0,h=[];n=e.aug(n,r),o=n[0].length;for(var l=0;l<c;l++){for(a=n[l][l],u=l,s=l+1;s<d;s++)a<t.abs(n[s][l])&&(a=n[s][l],u=s);if(u!=l)for(s=0;s<o;s++)i=n[l][s],n[l][s]=n[u][s],n[u][s]=i;for(u=l+1;u<c;u++)for(p=n[u][l]/n[l][l],s=l;s<o;s++)n[u][s]=n[u][s]-p*n[l][s]}for(var l=c-1;l>=0;l--){for(f=0,u=l+1;u<=c-1;u++)f+=h[u]*n[l][u];h[l]=(n[l][o-1]-f)/n[l][l]}return h},gauss_jordan:function(n,r){for(var o=e.aug(n,r),a=o.length,i=o[0].length,s=0,l=0;l<a;l++){for(var u=l,c=l+1;c<a;c++)t.abs(o[c][l])>t.abs(o[u][l])&&(u=c);var d=o[l];o[l]=o[u],o[u]=d;for(var c=l+1;c<a;c++){s=o[c][l]/o[l][l];for(var p=l;p<i;p++)o[c][p]-=o[l][p]*s}}for(var l=a-1;l>=0;l--){s=o[l][l];for(var c=0;c<l;c++)for(var p=i-1;p>l-1;p--)o[c][p]-=o[l][p]*o[c][l]/s;o[l][l]/=s;for(var p=a;p<i;p++)o[l][p]/=s}return o},triaUpSolve:function(t,n){var r,o=t[0].length,a=e.zeros(1,o)[0],i=!1;return void 0!=n[0].length&&(n=n.map(function(e){return e[0]}),i=!0),e.arange(o-1,-1,-1).forEach(function(i){r=e.arange(i+1,o).map(function(e){return a[e]*t[i][e]}),a[i]=(n[i]-e.sum(r))/t[i][i]}),i?a.map(function(e){return[e]}):a},triaLowSolve:function(t,n){var r,o=t[0].length,a=e.zeros(1,o)[0],i=!1;return void 0!=n[0].length&&(n=n.map(function(e){return e[0]}),i=!0),e.arange(o).forEach(function(o){r=e.arange(o).map(function(e){return t[o][e]*a[e]}),a[o]=(n[o]-e.sum(r))/t[o][o]}),i?a.map(function(e){return[e]}):a},lu:function(t){var n,r=t.length,o=e.identity(r),a=e.zeros(t.length,t[0].length);return e.arange(r).forEach(function(e){a[0][e]=t[0][e]}),e.arange(1,r).forEach(function(s){e.arange(s).forEach(function(r){n=e.arange(r).map(function(e){return o[s][e]*a[e][r]}),o[s][r]=(t[s][r]-e.sum(n))/a[r][r]}),e.arange(s,r).forEach(function(r){n=e.arange(s).map(function(e){return o[s][e]*a[e][r]}),a[s][r]=t[i][r]-e.sum(n)})}),[o,a]},cholesky:function(n){var r,o=n.length,a=e.zeros(n.length,n[0].length);return e.arange(o).forEach(function(i){r=e.arange(i).map(function(e){return t.pow(a[i][e],2)}),a[i][i]=t.sqrt(n[i][i]-e.sum(r)),e.arange(i+1,o).forEach(function(t){r=e.arange(i).map(function(e){return a[i][e]*a[t][e]}),a[t][i]=(n[i][t]-e.sum(r))/a[i][i]})}),a},gauss_jacobi:function(n,r,o,a){for(var i,s,l,u,c=0,d=0,p=n.length,f=[],h=[],m=[];c<p;c++)for(f[c]=[],h[c]=[],m[c]=[],d=0;d<p;d++)c>d?(f[c][d]=n[c][d],h[c][d]=m[c][d]=0):c<d?(h[c][d]=n[c][d],f[c][d]=m[c][d]=0):(m[c][d]=n[c][d],f[c][d]=h[c][d]=0);for(l=e.multiply(e.multiply(e.inv(m),e.add(f,h)),-1),s=e.multiply(e.inv(m),r),i=o,u=e.add(e.multiply(l,o),s),c=2;t.abs(e.norm(e.subtract(u,i)))>a;)i=u,u=e.add(e.multiply(l,i),s),c++;return u},gauss_seidel:function(n,r,o,a){for(var i,s,l,u,c,d=0,p=n.length,f=[],h=[],m=[];d<p;d++)for(f[d]=[],h[d]=[],m[d]=[],i=0;i<p;i++)d>i?(f[d][i]=n[d][i],h[d][i]=m[d][i]=0):d<i?(h[d][i]=n[d][i],f[d][i]=m[d][i]=0):(m[d][i]=n[d][i],f[d][i]=h[d][i]=0);for(u=e.multiply(e.multiply(e.inv(e.add(m,f)),h),-1),l=e.multiply(e.inv(e.add(m,f)),r),s=o,c=e.add(e.multiply(u,o),l),d=2;t.abs(e.norm(e.subtract(c,s)))>a;)s=c,c=e.add(e.multiply(u,s),l),d+=1;return c},SOR:function(n,r,o,a,i){for(var s,l,u,c,d,p=0,f=n.length,h=[],m=[],y=[];p<f;p++)for(h[p]=[],m[p]=[],y[p]=[],s=0;s<f;s++)p>s?(h[p][s]=n[p][s],m[p][s]=y[p][s]=0):p<s?(m[p][s]=n[p][s],h[p][s]=y[p][s]=0):(y[p][s]=n[p][s],h[p][s]=m[p][s]=0);for(c=e.multiply(e.inv(e.add(y,e.multiply(h,i))),e.subtract(e.multiply(y,1-i),e.multiply(m,i))),u=e.multiply(e.multiply(e.inv(e.add(y,e.multiply(h,i))),r),i),l=o,d=e.add(e.multiply(c,o),u),p=2;t.abs(e.norm(e.subtract(d,l)))>a;)l=d,d=e.add(e.multiply(c,l),u),p++;return d},householder:function(n){for(var r,o,a,i,s,l=n.length,u=n[0].length,c=0,d=[],p=[];c<l-1;c++){for(r=0,i=c+1;i<u;i++)r+=n[i][c]*n[i][c];for(s=n[c+1][c]>0?-1:1,r=s*t.sqrt(r),o=t.sqrt((r*r-n[c+1][c]*r)/2),d=e.zeros(l,1),d[c+1][0]=(n[c+1][c]-r)/(2*o),a=c+2;a<l;a++)d[a][0]=n[a][c]/(2*o);p=e.subtract(e.identity(l,u),e.multiply(e.multiply(d,e.transpose(d)),2)),n=e.multiply(p,e.multiply(n,p))}return n},QR:function(){function n(n){var i=n.length,s=n[0].length;n=e.copy(n),r=e.zeros(s,s);var l,u,c;for(u=0;u<s;u++){for(r[u][u]=t.sqrt(o(a(i).map(function(e){return n[e][u]*n[e][u]}))),l=0;l<i;l++)n[l][u]=n[l][u]/r[u][u];for(c=u+1;c<s;c++)for(r[u][c]=o(a(i).map(function(e){return n[e][u]*n[e][c]})),l=0;l<i;l++)n[l][c]=n[l][c]-n[l][u]*r[u][c]}return[n,r]}var o=e.sum,a=e.arange;return n}(),lstsq:function(t,n){function r(t){t=e.copy(t);var n=t.length,r=e.identity(n);return e.arange(n-1,-1,-1).forEach(function(n){e.sliceAssign(r,{row:n},e.divide(e.slice(r,{row:n}),t[n][n])),e.sliceAssign(t,{row:n},e.divide(e.slice(t,{row:n}),t[n][n])),e.arange(n).forEach(function(o){var a=e.multiply(t[o][n],-1),i=e.slice(t,{row:o}),s=e.multiply(e.slice(t,{row:n}),a);e.sliceAssign(t,{row:o},e.add(i,s));var l=e.slice(r,{row:o}),u=e.multiply(e.slice(r,{row:n}),a);e.sliceAssign(r,{row:o},e.add(l,u))})}),r}function o(t,n){var o=!1;void 0===n[0].length&&(n=n.map(function(e){return[e]}),o=!0);var a=e.QR(t),i=a[0],s=a[1],l=t[0].length,u=e.slice(i,{col:{end:l}}),c=e.slice(s,{row:{end:l}}),d=r(c),p=e.transpose(u);void 0===p[0].length&&(p=[p]);var f=e.multiply(e.multiply(d,p),n);return void 0===f.length&&(f=[[f]]),o?f.map(function(e){return e[0]}):f}return o}(),jacobi:function(n){for(var r,o,a,i,s,l,u,c,d=1,p=0,f=n.length,h=e.identity(f,f),m=[];1===d;){p++,l=n[0][1],i=0,s=1;for(var o=0;o<f;o++)for(a=0;a<f;a++)o!=a&&l<t.abs(n[o][a])&&(l=t.abs(n[o][a]),i=o,s=a);u=n[i][i]===n[s][s]?n[i][s]>0?t.PI/4:-t.PI/4:t.atan(2*n[i][s]/(n[i][i]-n[s][s]))/2,c=e.identity(f,f),c[i][i]=t.cos(u),c[i][s]=-t.sin(u),c[s][i]=t.sin(u),c[s][s]=t.cos(u),h=e.multiply(h,c),r=e.multiply(e.multiply(e.inv(c),n),c),n=r,d=0;for(var o=1;o<f;o++)for(a=1;a<f;a++)o!=a&&t.abs(n[o][a])>.001&&(d=1)}for(var o=0;o<f;o++)m.push(n[o][o]);return[h,m]},rungekutta:function(e,t,n,r,o,a){var i,s,l,u,c;if(2===a)for(;r<=n;)i=t*e(r,o),s=t*e(r+t,o+i),l=o+(i+s)/2,o=l,r+=t;if(4===a)for(;r<=n;)i=t*e(r,o),s=t*e(r+t/2,o+i/2),u=t*e(r+t/2,o+s/2),c=t*e(r+t,o+u),l=o+(i+2*s+2*u+c)/6,o=l,r+=t;return o},romberg:function(e,n,r,o){for(var a,i,s,l,u,c=0,d=(r-n)/2,p=[],f=[],h=[];c<o/2;){for(u=e(n),s=n,l=0;s<=r;s+=d,l++)p[l]=s;for(a=p.length,s=1;s<a-1;s++)u+=(s%2!=0?4:2)*e(p[s]);u=d/3*(u+e(r)),h[c]=u,d/=2,c++}for(i=h.length,a=1;1!==i;){for(s=0;s<i-1;s++)f[s]=(t.pow(4,a)*h[s+1]-h[s])/(t.pow(4,a)-1);i=f.length,h=f,f=[],a++}return h},richardson:function(e,n,r,o){function a(e,t){for(var n,r=0,o=e.length;r<o;r++)e[r]===t&&(n=r);return n}for(var i,s,l,u,c,d=(e.length,t.abs(r-e[a(e,r)+1])),p=0,f=[],h=[];o>=d;)i=a(e,r+o),s=a(e,r),f[p]=(n[i]-2*n[s]+n[2*s-i])/(o*o),o/=2,p++;for(u=f.length,l=1;1!=u;){for(c=0;c<u-1;c++)h[c]=(t.pow(4,l)*f[c+1]-f[c])/(t.pow(4,l)-1);u=h.length,f=h,h=[],l++}return f},simpson:function(e,t,n,r){for(var o,a=(n-t)/r,i=e(t),s=[],l=t,u=0,c=1;l<=n;l+=a,u++)s[u]=l;for(o=s.length;c<o-1;c++)i+=(c%2!=0?4:2)*e(s[c]);return a/3*(i+e(n))},hermite:function(e,t,n,r){for(var o,a=e.length,i=0,s=0,l=[],u=[],c=[],d=[];s<a;s++){for(l[s]=1,o=0;o<a;o++)s!=o&&(l[s]*=(r-e[o])/(e[s]-e[o]));for(u[s]=0,o=0;o<a;o++)s!=o&&(u[s]+=1/(e[s]-e[o]));c[s]=(1-2*(r-e[s])*u[s])*(l[s]*l[s]),d[s]=(r-e[s])*(l[s]*l[s]),i+=c[s]*t[s]+d[s]*n[s]}return i},lagrange:function(e,t,n){for(var r,o,a=0,i=0,s=e.length;i<s;i++){for(o=t[i],r=0;r<s;r++)i!=r&&(o*=(n-e[r])/(e[i]-e[r]));a+=o}return a},cubic_spline:function(t,n,r){for(var o,a=t.length,i=0,s=[],l=[],u=[],c=[],d=[],p=[],f=[];i<a-1;i++)d[i]=t[i+1]-t[i];u[0]=0;for(var i=1;i<a-1;i++)u[i]=3/d[i]*(n[i+1]-n[i])-3/d[i-1]*(n[i]-n[i-1]);for(var i=1;i<a-1;i++)s[i]=[],l[i]=[],s[i][i-1]=d[i-1],s[i][i]=2*(d[i-1]+d[i]),s[i][i+1]=d[i],l[i][0]=u[i];for(c=e.multiply(e.inv(s),l),o=0;o<a-1;o++)p[o]=(n[o+1]-n[o])/d[o]-d[o]*(c[o+1][0]+2*c[o][0])/3,f[o]=(c[o+1][0]-c[o][0])/(3*d[o]);for(o=0;o<a&&!(t[o]>r);o++);return o-=1,n[o]+(r-t[o])*p[o]+e.sq(r-t[o])*c[o]+(r-t[o])*e.sq(r-t[o])*f[o]},gauss_quadrature:function(){throw new Error("gauss_quadrature not yet implemented")},PCA:function(t){for(var n,r,o=t.length,a=t[0].length,i=0,s=[],l=[],u=[],c=[],d=[],p=[],f=[],h=[],m=[],y=[],i=0;i<o;i++)s[i]=e.sum(t[i])/a;for(var i=0;i<a;i++)for(f[i]=[],n=0;n<o;n++)f[i][n]=t[n][i]-s[n];f=e.transpose(f);for(var i=0;i<o;i++)for(h[i]=[],n=0;n<o;n++)h[i][n]=e.dot([f[i]],[f[n]])/(a-1);u=e.jacobi(h),m=u[0],l=u[1],y=e.transpose(m);for(var i=0;i<l.length;i++)for(n=i;n<l.length;n++)l[i]<l[n]&&(r=l[i],l[i]=l[n],l[n]=r,c=y[i],y[i]=y[n],y[n]=c);p=e.transpose(f);for(var i=0;i<o;i++)for(d[i]=[],n=0;n<p.length;n++)d[i][n]=e.dot([y[i]],[p[n]]);return[t,l,y,d]}}),function(t){for(var n=0;n<t.length;n++)!function(t){e.fn[t]=function(n,r){var o=this;return r?(setTimeout(function(){r.call(o,e.fn[t].call(o,n))},15),this):"number"==typeof e[t](this,n)?e[t](this,n):e(e[t](this,n))}}(t[n])}("add divide multiply subtract dot pow exp log abs norm angle".split(" "))}(e,Math),function(e,t){function n(e,n,r,o){if(e>1||r>1||e<=0||r<=0)throw new Error("Proportions should be greater than 0 and less than 1");var a=(e*n+r*o)/(n+o);return(e-r)/t.sqrt(a*(1-a)*(1/n+1/o))}var r=[].slice,o=e.utils.isNumber,a=e.utils.isArray;e.extend({zscore:function(){var t=r.call(arguments);return o(t[1])?(t[0]-t[1])/t[2]:(t[0]-e.mean(t[1]))/e.stdev(t[1],t[2])},ztest:function(){var n,o=r.call(arguments);return a(o[1])?(n=e.zscore(o[0],o[1],o[3]),1===o[2]?e.normal.cdf(-t.abs(n),0,1):2*e.normal.cdf(-t.abs(n),0,1)):o.length>2?(n=e.zscore(o[0],o[1],o[2]),1===o[3]?e.normal.cdf(-t.abs(n),0,1):2*e.normal.cdf(-t.abs(n),0,1)):(n=o[0],1===o[1]?e.normal.cdf(-t.abs(n),0,1):2*e.normal.cdf(-t.abs(n),0,1))}}),e.extend(e.fn,{zscore:function(e,t){return(e-this.mean())/this.stdev(t)},ztest:function(n,r,o){var a=t.abs(this.zscore(n,o));return 1===r?e.normal.cdf(-a,0,1):2*e.normal.cdf(-a,0,1)}}),e.extend({tscore:function(){var n=r.call(arguments);return 4===n.length?(n[0]-n[1])/(n[2]/t.sqrt(n[3])):(n[0]-e.mean(n[1]))/(e.stdev(n[1],!0)/t.sqrt(n[1].length))},ttest:function(){var n,a=r.call(arguments);return 5===a.length?(n=t.abs(e.tscore(a[0],a[1],a[2],a[3])),1===a[4]?e.studentt.cdf(-n,a[3]-1):2*e.studentt.cdf(-n,a[3]-1)):o(a[1])?(n=t.abs(a[0]),1==a[2]?e.studentt.cdf(-n,a[1]-1):2*e.studentt.cdf(-n,a[1]-1)):(n=t.abs(e.tscore(a[0],a[1])),1==a[2]?e.studentt.cdf(-n,a[1].length-1):2*e.studentt.cdf(-n,a[1].length-1))}}),e.extend(e.fn,{tscore:function(e){return(e-this.mean())/(this.stdev(!0)/t.sqrt(this.cols()))},ttest:function(n,r){return 1===r?1-e.studentt.cdf(t.abs(this.tscore(n)),this.cols()-1):2*e.studentt.cdf(-t.abs(this.tscore(n)),this.cols()-1)}}),e.extend({anovafscore:function(){var n,o,a,i,s,l,u,c,d=r.call(arguments);if(1===d.length){s=new Array(d[0].length);for(var u=0;u<d[0].length;u++)s[u]=d[0][u];d=s}if(2===d.length)return e.variance(d[0])/e.variance(d[1]);o=new Array;for(var u=0;u<d.length;u++)o=o.concat(d[u]);a=e.mean(o),n=0;for(var u=0;u<d.length;u++)n+=d[u].length*t.pow(e.mean(d[u])-a,2);n/=d.length-1,l=0;for(var u=0;u<d.length;u++)for(i=e.mean(d[u]),c=0;c<d[u].length;c++)l+=t.pow(d[u][c]-i,2);return l/=o.length-d.length,n/l},anovaftest:function(){var t,n,a,i,s=r.call(arguments);if(o(s[0]))return 1-e.centralF.cdf(s[0],s[1],s[2]);anovafscore=e.anovafscore(s),t=s.length-1,a=0;for(var i=0;i<s.length;i++)a+=s[i].length;return n=a-t-1,1-e.centralF.cdf(anovafscore,t,n)},ftest:function(t,n,r){return 1-e.centralF.cdf(t,n,r)}}),e.extend(e.fn,{anovafscore:function(){return e.anovafscore(this.toArray())},anovaftes:function(){for(var t,n=0,t=0;t<this.length;t++)n+=this[t].length;return e.ftest(this.anovafscore(),this.length-1,n-this.length)}}),e.extend({qscore:function(){var n,a,i,s,l,u=r.call(arguments);return o(u[0])?(n=u[0],a=u[1],i=u[2],s=u[3],l=u[4]):(n=e.mean(u[0]),a=e.mean(u[1]),i=u[0].length,s=u[1].length,l=u[2]),t.abs(n-a)/(l*t.sqrt((1/i+1/s)/2))},qtest:function(){var t,n=r.call(arguments);3===n.length?(t=n[0],n=n.slice(1)):7===n.length?(t=e.qscore(n[0],n[1],n[2],n[3],n[4]),n=n.slice(5)):(t=e.qscore(n[0],n[1],n[2]),n=n.slice(3));var o=n[0],a=n[1];return 1-e.tukey.cdf(t,a,o-a)},tukeyhsd:function(t){for(var n=e.pooledstdev(t),r=t.map(function(t){return e.mean(t)}),o=t.reduce(function(e,t){return e+t.length},0),a=[],i=0;i<t.length;++i)for(var s=i+1;s<t.length;++s){var l=e.qtest(r[i],r[s],t[i].length,t[s].length,n,o,t.length);a.push([[i,s],l])}return a}}),e.extend({normalci:function(){var n,o=r.call(arguments),a=new Array(2);return n=4===o.length?t.abs(e.normal.inv(o[1]/2,0,1)*o[2]/t.sqrt(o[3])):t.abs(e.normal.inv(o[1]/2,0,1)*e.stdev(o[2])/t.sqrt(o[2].length)),a[0]=o[0]-n,a[1]=o[0]+n,a},tci:function(){var n,o=r.call(arguments),a=new Array(2);return n=4===o.length?t.abs(e.studentt.inv(o[1]/2,o[3]-1)*o[2]/t.sqrt(o[3])):t.abs(e.studentt.inv(o[1]/2,o[2].length-1)*e.stdev(o[2],!0)/t.sqrt(o[2].length)),a[0]=o[0]-n,a[1]=o[0]+n,a},significant:function(e,t){return e<t}}),e.extend(e.fn,{normalci:function(t,n){return e.normalci(t,n,this.toArray())},tci:function(t,n){return e.tci(t,n,this.toArray())}}),e.extend(e.fn,{oneSidedDifferenceOfProportions:function(t,r,o,a){var i=n(t,r,o,a);return e.ztest(i,1)},twoSidedDifferenceOfProportions:function(t,r,o,a){var i=n(t,r,o,a);return e.ztest(i,2)}})}(e,Math),e.models=function(){function t(e,t){return n(e,t)}function t(t){var r=t[0].length;return e.arange(r).map(function(o){var a=e.arange(r).filter(function(e){return e!==o});return n(e.col(t,o).map(function(e){return e[0]}),e.col(t,a))})}function n(t,n){var r=t.length,o=n[0].length-1,a=r-o-1,i=e.lstsq(n,t),s=e.multiply(n,i.map(function(e){return[e]})).map(function(e){return e[0]}),l=e.subtract(t,s),u=e.mean(t),c=e.sum(s.map(function(e){return Math.pow(e-u,2)})),d=e.sum(t.map(function(e,t){return Math.pow(e-s[t],2)})),p=c+d;return{exog:n,endog:t,nobs:r,df_model:o,df_resid:a,coef:i,predict:s,resid:l,ybar:u,SST:p,SSE:c,SSR:d,R2:c/p}}function r(n){var r=t(n.exog),o=Math.sqrt(n.SSR/n.df_resid),a=r.map(function(e){var t=e.SST,n=e.R2;return o/Math.sqrt(t*(1-n))}),i=n.coef.map(function(e,t){return(e-0)/a[t]}),s=i.map(function(t){var r=e.studentt.cdf(t,n.df_resid);return 2*(r>.5?1-r:r)}),l=e.studentt.inv(.975,n.df_resid),u=n.coef.map(function(e,t){var n=l*a[t];return[e-n,e+n]});return{se:a,t:i,p:s,sigmaHat:o,interval95:u}}function o(t){var n=t.R2/t.df_model/((1-t.R2)/t.df_resid);return{F_statistic:n,pvalue:1-function(t,n,r){return e.beta.cdf(t/(r/n+t),n/2,r/2)}(n,t.df_model,t.df_resid)}}function a(e,t){var a=n(e,t),i=r(a),s=o(a),l=1-(1-a.rsquared)*((a.nobs-1)/a.df_resid);return a.t=i,a.f=s,a.adjust_R2=l,a}return{ols:a}}(),e.jStat=e,e})},function(e,t,n){e.exports=n(6)(184)},function(e,t,n){"use strict";function r(e,t){return e="function"==typeof e?e():e,a.default.findDOMNode(e)||t}t.__esModule=!0,t.default=r;var o=n(34),a=function(e){return e&&e.__esModule?e:{default:e}}(o);e.exports=t.default},function(e,t){e.exports={portalWidth:"styles-module__portalWidth__-Qj7G",labeledCheckbox:"styles-module__labeledCheckbox__jTAe1"}},function(e,t,n){e.exports=n(6)(304)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){return"number"==typeof e?e:e.toString()}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){r(this,e)}return a(e,[{key:"receiveProps",value:function(e){this.props=e}},{key:"getReactKey",value:function(e){var t=this.props.itemReactKeyPropName;if(t){var n=e[t];if(null!=n)return n}return o(this.getRawValue(e))}},{key:"getSortKey",value:function(e){var t=this.props.itemSortKeyPropName;if(t){var n=e[t];if(null!=n)return n}return o(this.getRawValue(e))}},{key:"getInputValue",value:function(e){return this.getRawValue(e).toString()}},{key:"getRawValue",value:function(e){var t=this.props.itemValuePropName;if(t){var n=e[t];if(null!=n)return n}return e}},{key:"getTextRepresentations",value:function(e){return[this.foldValue(this.getInputValue(e))]}},{key:"foldValue",value:function(e){return e.toLowerCase()}},{key:"newFromValue",value:function(e){return e}},{key:"itemIncludedByInput",value:function(e,t){var n=!0,r=!1,o=void 0;try{for(var a,i=this.getTextRepresentations(e)[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){if(a.value.indexOf(t)>=0)return!0}}catch(e){r=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw o}}return!1}},{key:"itemMatchesInput",value:function(e,t){var n=!0,r=!1,o=void 0;try{for(var a,i=this.getTextRepresentations(e)[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){if(a.value===t)return!0}}catch(e){r=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw o}}return!1}},{key:"sortItems",value:function(e,t){var n=this;return e.sort(function(e,r){return n.compareItemsWithValue(e,r,t)}),e}},{key:"compareItemsWithValue",value:function(e,t,n){var r=this.itemMatchesInput(e,n);if(r!=this.itemMatchesInput(t,n))return r?-1:1;var o=this.itemInclusionRankForInput(e,n),a=this.itemInclusionRankForInput(t,n);return o!=a?o-a:this.compareItems(e,t)}},{key:"itemInclusionRankForInput",value:function(e,t){var n=!1,r=!0,o=!1,a=void 0;try{for(var i,s=this.getTextRepresentations(e)[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var l=i.value,u=l.indexOf(t);if(0===u)return 0;u>0&&(n=!0)}}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n?1:2}},{key:"compareItems",value:function(e,t){var n=this.getSortKey(e),r=this.getSortKey(t);return n<r?-1:n==r?0:1}},{key:"renderItem",value:function(e){return this.getInputValue(e)}},{key:"renderSuggested",value:function(e){return this.renderItem(e)}},{key:"renderSelected",value:function(e){return this.renderItem(e)}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(875),c=function(e){return e&&e.__esModule?e:{default:e}}(u),d=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"key";o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.itemKeyPropName=e,n}return i(t,e),l(t,[{key:"_getKeyValueItem",value:function(e,t){var n,o=this.itemKeyPropName,a=this.props.itemValuePropName,i=void 0===a?"value":a;return"object"==typeof t&&i in t?t[o]===e?t:s(r({},o,e),t):(n={},r(n,o,e),r(n,i,t),n)}}]),t}(c.default);t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=[{id:"Prostate Cancer: AR Signaling",genes:["SOX9","RAN","TNK2","EP300","PXN","NCOA2","AR","NRIP1","NCOR1","NCOR2"]},{id:"Prostate Cancer: AR and steroid synthesis enzymes",genes:["AKR1C3","AR","CYB5A","CYP11A1","CYP11B1","CYP11B2","CYP17A1","CYP19A1","CYP21A2","HSD17B1","HSD17B10","HSD17B11","HSD17B12","HSD17B13","HSD17B14","HSD17B2","HSD17B3","HSD17B4","HSD17B6","HSD17B7","HSD17B8","HSD3B1","HSD3B2","HSD3B7","RDH5","SHBG","SRD5A1","SRD5A2","SRD5A3","STAR"]},{id:"Prostate Cancer: Steroid inactivating genes",genes:["AKR1C1","AKR1C2","AKR1C4","CYP3A4","CYP3A43","CYP3A5","CYP3A7","UGT2B15","UGT2B17","UGT2B7"]},{id:"Prostate Cancer: Down-regulated by androgen",genes:["BCHE","CDK8","CTBP1","ACKR3","DDC","DPH1","FN1","HES6","MMP16","MYC","PEG3","PIK3R3","PRKD1","SCNN1A","SDC4","SERPINI1","SLC29A1","ST7","TULP4"]},{id:"Glioblastoma: TP53 Pathway",genes:["CDKN2A","MDM2","MDM4","TP53"]},{id:"Glioblastoma: RTK/Ras/PI3K/AKT Signaling",genes:["EGFR","ERBB2","PDGFRA","MET","KRAS","NRAS","HRAS","NF1","SPRY2","FOXO1","FOXO3","AKT1","AKT2","AKT3","PIK3R1","PIK3CA","PTEN"]},{id:"Glioblastoma: RB Pathway",genes:["CDKN2A","CDKN2B","CDKN2C","CDK4","CDK6","CCND2","RB1"]},{id:"Ovarian Cancer: Oncogenes associated with epithelial ovarian cancer",genes:["RAB25","MECOM","EIF5A2","PRKCI","PIK3CA","KIT","FGF1","MYC","EGFR","NOTCH3","KRAS","AKT1","ERBB2","PIK3R1","CCNE1","AKT2","AURKA"]},{id:"Ovarian Cancer: Putative tumor-suppressor genes in epithelial ovarian cancer",genes:["DIRAS3","RASSF1","DLEC1","SPARC","DAB2","PLAGL1","RPS6KA2","PTEN","OPCML","BRCA2","ARL11","WWOX","TP53","DPH1","BRCA1","PEG3"]},{id:"General: Cell Cycle Control",genes:["RB1","RBL1","RBL2","CCNA1","CCNB1","CDK1","CCNE1","CDK2","CDC25A","CCND1","CDK4","CDK6","CCND2","CDKN2A","CDKN2B","MYC","CDKN1A","CDKN1B","E2F1","E2F2","E2F3","E2F4","E2F5","E2F6","E2F7","E2F8","SRC","JAK1","JAK2","STAT1","STAT2","STAT3","STAT5A","STAT5B"]},{id:"General: p53 signaling",genes:["TP53","MDM2","MDM4","CDKN2A","CDKN2B","TP53BP1"]},{id:"General: Notch signaling",genes:["ADAM10","ADAM17","APH1A","APH1B","ARRDC1","CIR1","CTBP1","CTBP2","CUL1","DLL1","DLL3","DLL4","DTX1","DTX2","DTX3","DTX3L","DTX4","EP300","FBXW7","HDAC1","HDAC2","HES1","HES5","HEYL","ITCH","JAG1","JAG2","KDM5A","LFNG","MAML1","MAML2","MAML3","MFNG","NCOR2","NCSTN","NOTCH1","NOTCH2","NOTCH3","NOTCH4","NRARP","NUMB","NUMBL","PSEN1","PSEN2","PSENEN","RBPJ","RBPJL","RFNG","SNW1","SPEN","HES2","HES4","HES7","HEY1","HEY2"]},{id:"General: DNA Damage Response",genes:["CHEK1","CHEK2","RAD51","BRCA1","BRCA2","MLH1","MSH2","ATM","ATR","MDC1","PARP1","FANCF"]},{id:"General: Other growth / proliferation signaling",genes:["CSF1","CSF1R","IGF1","IGF1R","FGF1","FGFR1","AURKA","DLEC1","PLAGL1","OPCML","DPH1"]},{id:"General: Survival / cell death regulation signaling",genes:["NFKB1","NFKB2","CHUK","DIRAS3","FAS","HLA-G","BAD","BCL2","BCL2L1","APAF1","CASP9","CASP8","CASP10","CASP3","CASP6","CASP7","GSK3B","ARL11","WWOX","PEG3","TGFB1","TGFBR1","TGFBR2"]},{id:"General: Telomere maintenance",genes:["TERC","TERT"]},{id:"General: RTK signaling family",genes:["EGFR","ERBB2","ERBB3","ERBB4","PDGFA","PDGFB","PDGFRA","PDGFRB","KIT","FGF1","FGFR1","IGF1","IGF1R","VEGFA","VEGFB","KDR"]},{id:"General: PI3K-AKT-mTOR signaling",genes:["PIK3CA","PIK3R1","PIK3R2","PTEN","PDPK1","AKT1","AKT2","FOXO1","FOXO3","MTOR","RICTOR","TSC1","TSC2","RHEB","AKT1S1","RPTOR","MLST8"]},{id:"General: Ras-Raf-MEK-Erk/JNK signaling",genes:["KRAS","HRAS","BRAF","RAF1","MAP3K1","MAP3K2","MAP3K3","MAP3K4","MAP3K5","MAP2K1","MAP2K2","MAP2K3","MAP2K4","MAP2K5","MAPK1","MAPK3","MAPK4","MAPK6","MAPK7","MAPK8","MAPK9","MAPK12","MAPK14","DAB2","RASSF1","RAB25"]},{id:"General: Regulation of ribosomal protein synthesis and cell growth",genes:["RPS6KA1","RPS6KA2","RPS6KB1","RPS6KB2","EIF5A2","EIF4E","EIF4EBP1","RPS6","HIF1A"]},{id:"General: Angiogenesis",genes:["VEGFA","VEGFB","KDR","CXCL8","CXCR1","CXCR2"]},{id:"General: Folate transport",genes:["SLC19A1","FOLR1","FOLR2","FOLR3","IZUMO1R"]},{id:"General: Invasion and metastasis",genes:["MMP1","MMP2","MMP3","MMP7","MMP9","MMP10","MMP11","MMP12","MMP13","MMP14","MMP15","MMP16","MMP17","MMP19","MMP21","MMP23B","MMP24","MMP25","MMP26","MMP27","MMP28","ITGB3","ITGAV","PTK2","CDH1","SPARC","WFDC2"]}];t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),d=o(c),p=n(1039),f=n(884),h=n(173),m=r(h),y=n(3),g=o(y),v=n(1047),b=r(v);n(1049);var _=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.rawDataSelector=function(e,t){return t.rawData},n.columnsSelector=function(e,t){return t.columns},n.columnVisibilitySelector=function(e){return e.columnVisibility},n.visibleColsSelector=(0,p.createSelector)(n.columnsSelector,n.columnVisibilitySelector,function(e,t){return n.resolveVisible(e,t)}),n.sortedVisibleColsSelector=(0,p.createSelector)(n.visibleColsSelector,function(e){return n.resolveOrder(e)}),n.sortedColsSelector=(0,p.createSelector)(n.columnsSelector,function(e){return n.resolveOrder(e)}),n.columnVisibilityArraySelector=(0,p.createSelector)(n.sortedColsSelector,n.columnVisibilitySelector,function(e,t){return n.resolveColumnVisibility(n.colNameToId,e,t)}),n.downloadDataSelector=(0,p.createSelector)(n.sortedColsSelector,n.columnVisibilitySelector,n.rawDataSelector,function(e,t,r){return n.generateDownloadData(e,t,r)}),n.headersSelector=(0,p.createSelector)(n.sortedVisibleColsSelector,function(e){return n.generateHeaders(e)}),n.rowsSelector=(0,p.createSelector)(n.sortedColsSelector,n.rawDataSelector,function(e,t){return n.generateRows(e,t)}),n.colNameToId=n.mapColNameToId(e.columns),n.state={columnVisibility:t.resolveVisibility(e.columns,e.rawData),sortableColumns:n.resolveSortable(n.props.columns||{}),filterableColumns:n.resolveFilterable(n.props.columns||{}),filter:"",itemsPerPage:n.props.initItemsPerPage||25,currentPage:n.props.initPage||0},n.filteredDataLength=e.rawData.length,n.shouldSetState=!1;var r=function(e){e!==n.filteredDataLength&&(n.filteredDataLength=e,n.shouldSetState=!0)},o=function(e){var t=e.props.children.find(function(e){return"tbody"===e.type}),r=t.props.children||[];n.props.onVisibleRowsChange&&n.props.onVisibleRowsChange(r.map(function(e){return e.props.rowData}))},s=f.Table.prototype.applyFilter;f.Table.prototype.applyFilter=function(){var e=s.apply(this,arguments);return r(e.length),e};var l=f.Table.prototype.render;return f.Table.prototype.render=function(){var e=l.apply(this,arguments);return o(e),e},n.handleDownload=n.handleDownload.bind(n),n.handleFilterInput=n.handleFilterInput.bind(n),n.handleVisibilityToggle=n.handleVisibilityToggle.bind(n),n.handleChangeItemsPerPage=n.handleChangeItemsPerPage.bind(n),n.handlePreviousPageClick=n.handlePreviousPageClick.bind(n),n.handleNextPageClick=n.handleNextPageClick.bind(n),n}return s(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.reactTableProps,r=e.headerControlsProps,o=(this.columnVisibilityArraySelector(this.state,this.props),this.headersSelector(this.state,this.props)),a=this.rowsSelector(this.state,this.props),i=this.rowIndexesOnPage(),s=i.firstIndex,u=i.numIndexes;return d.createElement("div",{className:t},d.createElement(b.default,l({showCopyAndDownload:!0,showHideShowColumnButton:!0,handleInput:this.handleFilterInput,downloadDataGenerator:this.handleDownload,downloadDataContainsHeader:!0,downloadFilename:"mutations.csv",showSearch:!0,columnVisibilityProps:{className:"pull-right",onColumnToggled:this.handleVisibilityToggle},paginationProps:{className:"pull-right",itemsPerPage:this.state.itemsPerPage,currentPage:this.state.currentPage,onChangeItemsPerPage:this.handleChangeItemsPerPage,onPreviousPageClick:this.handlePreviousPageClick,onNextPageClick:this.handleNextPageClick,textBetweenButtons:(this.filteredDataLength?s+1:0)+"-"+(s+u)+" of "+this.filteredDataLength,previousPageDisabled:0===this.state.currentPage,nextPageDisabled:this.state.currentPage>=this.numPages()-1}},r)),d.createElement(f.Table,l({sortable:this.state.sortableColumns,filterable:this.state.filterableColumns,filterBy:this.state.filter,itemsPerPage:-1===this.state.itemsPerPage?void 0:this.state.itemsPerPage,currentPage:this.state.currentPage},n),o,a))}},{key:"componentWillUpdate",value:function(e,t){0===t.filter.length&&(this.filteredDataLength=this.props.rawData.length)}},{key:"componentDidUpdate",value:function(){this.shouldSetState&&(this.shouldSetState=!1,this.setState({currentPage:Math.max(0,Math.min(this.state.currentPage,this.numPages()-1))}))}},{key:"rowIndexesOnPage",value:function(){var e=void 0,t=void 0;return-1===this.state.itemsPerPage?(e=0,t=this.filteredDataLength):(e=this.state.itemsPerPage*this.state.currentPage,t=Math.min(this.filteredDataLength-e,this.state.itemsPerPage)),{firstIndex:e,numIndexes:t}}},{key:"numPages",value:function(e){return e=e||this.state.itemsPerPage,-1===e?1:Math.ceil(this.filteredDataLength/e)}},{key:"mapColNameToId",value:function(e){var t={};return e&&g.each(e,function(e,n){e.name&&(t[e.name],t[e.name]=n)}),t}},{key:"resolveOrder",value:function(e){return e?g.values(e).sort(t.columnSort):[]}},{key:"resolveColumnVisibility",value:function(e,t,n){var r=[];return g.each(t,function(t){var o=e[t.name];n[o]&&r.push({id:o,name:t.name,visibility:n[o]})}),r}},{key:"generateHeaders",value:function(e){var t=[];return g.each(e,function(e){var n=e.header||d.createElement("span",null,e.name);if(e.description){var r=d.createElement("div",{className:"rc-tooltip-arrow-inner"});n=d.createElement(m.default,{overlay:d.createElement("span",null,e.description),placement:"top",arrowContent:r},n)}t.push(d.createElement(f.Th,{key:e.name,column:e.name},n))}),t}},{key:"generateDownloadData",value:function(e,t,n){var r=this,o=[];return o[0]=[],g.each(e,function(e){var n=r.colNameToId[e.name];n in t&&"excluded"!==t[n]&&o[0].push(e.name)}),g.each(n,function(a,i){var s=[];g.each(e,function(e){var o=r.colNameToId[e.name];if(o in t&&"excluded"!==t[o]){var i=r.getColumnData(e,n,a);e.downloader?s.push(e.downloader(i,e.columnProps)):s.push((i.columnData||"").toString())}}),o.push(s)}),o}},{key:"getColumnData",value:function(e,t,n){var r={name:e.name,tableData:t,rowData:n,columnData:null};if(e.columnDataFunction)r.columnData=e.columnDataFunction(r);else if(e.dataField){var o=null;o=g.isArray(r.rowData)&&r.rowData.length>0?r.rowData[0]:r.rowData,o&&(r.columnData=o[e.dataField])}return r}},{key:"generateRows",value:function(e,t){var n=this,r=[];return g.each(t,function(o,a){var i=n.generateColumns(e,t,o);r.push(d.createElement(f.Tr,{key:a,rowData:o},i))}),r}},{key:"generateColumns",value:function(e,t,n){var r=this,o=[];return g.each(e,function(e){var a=r.getColumnData(e,t,n);o.push(r.generateColumn(a,e))}),o}},{key:"generateColumn",value:function(e,t){return t.formatter?t.formatter(e,t.columnProps):d.createElement(f.Td,{key:t.name,column:t.name,value:e.columnData},e.columnData)}},{key:"resolveVisible",value:function(e,t){var n={};return g.each(g.keys(t),function(r){"visible"===t[r]&&(n[r]=e[r])}),n}},{key:"resolveSortable",value:function(e){var t=[];return g.each(e,function(e){g.isFunction(e.sortable)?t.push({column:e.name,sortFunction:e.sortable}):e.sortable&&t.push(e.name)}),t}},{key:"resolveFilterable",value:function(e){var t=[];return g.each(e,function(e){g.isFunction(e.filterable)?t.push({column:e.name,filterFunction:e.filterable}):e.filterable&&t.push(e.name)}),t}},{key:"handleFilterInput",value:function(e){this.setState({filter:e})}},{key:"handleDownload",value:function(){return this.downloadDataSelector(this.state,this.props)}},{key:"handleVisibilityToggle",value:function(e){var t=e,n=this.state.columnVisibility[t],r=Object.assign({},this.state.columnVisibility);"hidden"===n?n="visible":"visible"===n&&(n="hidden"),r[t]=n,this.setState({columnVisibility:r})}},{key:"handleChangeItemsPerPage",value:function(e){this.setState({itemsPerPage:e,currentPage:Math.min(this.state.currentPage,this.numPages(e)-1)})}},{key:"handlePreviousPageClick",value:function(){this.setState({currentPage:Math.max(0,this.state.currentPage-1)})}},{key:"handleNextPageClick",value:function(){this.setState({currentPage:Math.min(this.state.currentPage+1,this.numPages()-1)})}}],[{key:"resolveVisibility",value:function(e,t){var n={};return e?(g.each(g.keys(e),function(r){var o=e[r],a="visible";o.visible&&(a=g.isFunction(o.visible)?o.visible(t,o.columnProps):o.visible),"excluded"!==a&&(n[r]=a)}),n):n}},{key:"columnSort",value:function(e,t){return e.priority&&t.priority?e.priority-t.priority:e.priority?-1:t.priority?1:e.name>t.name?1:-1}}]),t}(d.Component);t.default=_},function(e,t,n){"use strict";function r(e){return null!==e&&void 0!==e&&typeof("function"===e.toString)}Object.defineProperty(t,"__esModule",{value:!0}),t.stringable=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,s=u=void 0}},l=n(1),u=function(e){return e&&e.__esModule?e:{default:e}}(l),c=n(885),d=n(1042),p=n(867),f=function(e){function t(){r(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return o(t,e),i(t,[{key:"handleClickTh",value:function(e){this.props.onSort(e.key)}},{key:"handleKeyDownTh",value:function(e,t){13===t.keyCode&&this.props.onSort(e.key)}},{key:"render",value:function(){for(var e=[],t=0;t<this.props.columns.length;t++){var n=this.props.columns[t],r="reactable-th-"+n.key.replace(/\s+/g,"-").toLowerCase(),o="",i=null;this.props.sortableColumns[n.key]&&(o+="reactable-header-sortable ",i="button"),this.props.sort.column===n.key&&(o+="reactable-header-sort",1===this.props.sort.direction?o+="-asc":o+="-desc"),o.length>0&&(r+=" "+o),"object"==typeof n.props&&"string"==typeof n.props.className&&(r+=" "+n.props.className),e.push(u.default.createElement(c.Th,a({},n.props,{className:r,key:t,onClick:this.handleClickTh.bind(this,n),onKeyDown:this.handleKeyDownTh.bind(this,n),role:i,tabIndex:"0"}),n.label))}var s=(0,p.filterPropsFrom)(this.props);return u.default.createElement("thead",s,!0===this.props.filtering?u.default.createElement(d.Filterer,{colSpan:this.props.columns.length,onFilter:this.props.onFilter,placeholder:this.props.filterPlaceholder,value:this.props.currentFilter,className:this.props.filterClassName}):null,u.default.createElement("tr",{className:"reactable-column-header"},e))}}],[{key:"getColumns",value:function(e){var t=[];return u.default.Children.forEach(e.props.children,function(e){var n={};if(void 0!==e.props&&(n.props=(0,p.filterPropsFrom)(e.props),void 0!==e.props.children&&(n.label=e.props.children,n.key=n.label),"string"==typeof e.props.column&&(n.key=e.props.column,void 0===n.label&&(n.label=n.key))),void 0===n.key)throw new TypeError('<th> must have either a "column" property or a string child');t.push(n)}),t}}]),t}(u.default.Component);t.Thead=f},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,s=u=void 0}},u=n(1),c=function(e){return e&&e.__esModule?e:{default:e}}(u),d=n(918),p=n(1044),f=n(867),h=function(e){function t(){o(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return a(t,e),s(t,[{key:"render",value:function(){var e=(0,p.toArray)(c.default.Children.children(this.props.children));this.props.data&&this.props.columns&&"function"==typeof this.props.columns.map&&(void 0===e.concat&&console.log(e),e=e.concat(this.props.columns.map(function(e,t){var n=e.props,o=void 0===n?{}:n,a=r(e,["props"]);if(this.props.data.hasOwnProperty(a.key)){var s=this.props.data[a.key];return void 0!==s&&null!==s&&!0===s.__reactableMeta&&(o=s.props,s=s.value),c.default.createElement(d.Td,i({column:a,key:a.key},o),s)}return c.default.createElement(d.Td,{column:a,key:a.key})}.bind(this))));var t=(0,f.filterPropsFrom)(this.props);return c.default.DOM.tr(t,e)}}]),t}(c.default.Component);t.Tr=h,h.childNode=d.Td,h.dataType="object"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,s=u=void 0}},l=n(1),u=function(e){return e&&e.__esModule?e:{default:e}}(l),c=n(1043),d=n(915),p=n(876),f=n(867),h=function(e){function t(){r(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return o(t,e),i(t,[{key:"stringifyIfNotReactComponent",value:function(e){return!(0,c.isReactComponent)(e)&&(0,d.stringable)(e)&&void 0!==e?e.toString():null}},{key:"render",value:function(){var e=(0,f.filterPropsFrom)(this.props);if("object"==typeof this.props.column)for(var t in this.props.column)"key"!==t&&"name"!==t&&(e[t]=this.props.column[t]);e.onClick=this.props.handleClick;var n;return void 0===this.props.data&&(n=this.stringifyIfNotReactComponent(this.props.children)),(0,p.isUnsafe)(this.props.children)?u.default.createElement("td",a({},e,{dangerouslySetInnerHTML:{__html:this.props.children.toString()}})):u.default.createElement("td",e,n||this.props.children)}}]),t}(u.default.Component);t.Td=h},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,s=u=void 0}},s=n(1),l=function(e){return e&&e.__esModule?e:{default:e}}(s),u=function(e){function t(){r(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return o(t,e),a(t,[{key:"render",value:function(){return l.default.createElement("tfoot",this.props)}}]),t}(l.default.Component);t.Tfoot=u},function(e,t){e.exports=function e(t,n){"use strict";var r,o,a=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,i=/(^[ ]*|[ ]*$)/g,s=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,l=/^0x[0-9a-f]+$/i,u=/^0/,c=function(t){return e.insensitive&&(""+t).toLowerCase()||""+t},d=c(t).replace(i,"")||"",p=c(n).replace(i,"")||"",f=d.replace(a,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),h=p.replace(a,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),m=parseInt(d.match(l),16)||1!==f.length&&d.match(s)&&Date.parse(d),y=parseInt(p.match(l),16)||m&&p.match(s)&&Date.parse(p)||null;if(y){if(m<y)return-1;if(m>y)return 1}for(var g=0,v=Math.max(f.length,h.length);g<v;g++){if(r=!(f[g]||"").match(u)&&parseFloat(f[g])||f[g]||0,o=!(h[g]||"").match(u)&&parseFloat(h[g])||h[g]||0,isNaN(r)!==isNaN(o))return isNaN(r)?1:-1;if(typeof r!=typeof o&&(r+="",o+=""),r<o)return-1;if(r>o)return 1}return 0}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(i),l=n(173),u=r(l);n(288);var c=n(856),d=r(c),p=function(){function e(){o(this,e)}return a(e,null,[{key:"getCircleX",value:function(e,t,n){var r=e/100;return t*(1-r)+n*r}},{key:"getCircleFill",value:function(e){return e<25?"blue":e>75?"red":"gray"}},{key:"getTooltipContents",value:function(e){return e&&"complete"===e.status&&null!==e.data?s.createElement("div",null,s.createElement("span",null,"mRNA level of the gene in this tumor"),s.createElement("br",null),s.createElement("span",null,s.createElement("b",null,"mRNA z-score: "),e.data.zScore),s.createElement("br",null),s.createElement("span",null,s.createElement("b",null,"Percentile: "),e.data.percentile),s.createElement("br",null)):e&&"complete"===e.status&&null===e.data?s.createElement("span",null,"mRNA data is not available for this gene."):e&&"error"===e.status?s.createElement("span",null,"Error retrieving data."):s.createElement("span",null,"Querying server for data.")}},{key:"getTdContents",value:function(t){var n=null;return t&&"complete"===t.status&&null!==t.data?s.createElement("svg",{width:63,height:12},s.createElement("text",{x:33,y:11,textAnchor:"start",fontSize:10},Math.round(t.data.percentile)+"%"),s.createElement("g",null,s.createElement("line",{x1:0,y1:8,x2:30,y2:8,style:{stroke:"gray",strokeWidth:2}}),s.createElement("circle",{cx:e.getCircleX(t.data.percentile,3,27),cy:8,r:3,fill:e.getCircleFill(t.data.percentile)}))):(n=t&&"complete"===t.status&&null===t.data?c.TableCellStatus.NA:t&&"error"===t.status?c.TableCellStatus.ERROR:c.TableCellStatus.LOADING,null!==n?s.createElement(d.default,{status:n,naAlt:"mRNA data is not available for this gene."}):void 0)}},{key:"getData",value:function(e,t){if(0===e.length)return null;var n=e[0].sampleId,r=e[0].entrezGeneId;return t.get({sampleId:n,entrezGeneId:r})}},{key:"getDataFromCNA",value:function(e,t){var n=e[0].sampleId,r=e[0].entrezGeneId;return t.get({sampleId:n,entrezGeneId:r})}},{key:"renderFromCacheDatum",value:function(t){return s.createElement(u.default,{placement:"left",overlay:e.getTooltipContents(t),arrowContent:s.createElement("div",{className:"rc-tooltip-arrow-inner"})},e.getTdContents(t))}},{key:"renderFunction",value:function(t,n){var r=e.getData(t,n);return e.renderFromCacheDatum(r)}},{key:"cnaRenderFunction",value:function(t,n){var r=e.getDataFromCNA(t,n);return e.renderFromCacheDatum(r)}}]),e}();t.default=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(s),u=n(173),c=function(e){return e&&e.__esModule?e:{default:e}}(u),d=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),i(t,[{key:"render",value:function(){var e=l.createElement("svg",{width:"12",height:"12"},l.createElement("circle",{r:"5",cx:"6",cy:"6",stroke:this.props.stroke,fill:this.props.circleFill}),l.createElement("text",{x:"3",y:"8.5",fontSize:this.props.fontSize,fill:this.props.textFill},this.props.text.slice(0,1)));return this.props.tooltip&&(e=l.createElement(c.default,{placement:"right",overlay:this.props.tooltip,arrowContent:l.createElement("div",{className:"rc-tooltip-arrow-inner"})},e)),e}}]),t}(l.Component);t.default=d,d.defaultProps={stroke:"#55C",circleFill:"none",fontSize:7,textFill:"#66C"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=o(l),c=n(176),d=n(3),p=o(d),f=n(941),h=r(f),m=n(945),y=r(m),g=n(924),v=r(g),b=n(925),_=r(b),w=n(121),x=n(294),S=n(289),C=function(){function e(){i(this,e)}return s(e,null,[{key:"getData",value:function(t,n,r,o,a,i,s){var l=void 0;if(t){var u=t[0],c=void 0,d=u.gene.hugoGeneSymbol,p=!(n instanceof Error||!n[u.entrezGeneId]);l={hugoGeneSymbol:d,oncoKbGeneExist:p,civicEntry:i&&i.result&&s&&s.result?e.getCivicEntry(u,i.result,s.result):void 0,civicStatus:i&&i.status&&s&&s.status?e.getCivicStatus(i.status,s.status):"pending",hasCivicVariants:!0,myCancerGenomeLinks:o?e.getMyCancerGenomeLinks(u,o):[],isHotspot:!(!r||!r.result||"complete"!==r.status)&&(0,x.isRecurrentHotspot)(u,r.result),is3dHotspot:!(!r||!r.result||"complete"!==r.status)&&(0,x.is3dHotspot)(u,r.result),hotspotStatus:r?r.status:"pending"},a&&a.result instanceof Error?l=Object.assign({},l,{oncoKbStatus:"error",oncoKbIndicator:void 0}):p?(!a||!a.result||a.result instanceof Error||"complete"!==a.status||(c=e.getIndicatorData(u,a.result)),l=Object.assign({},l,{oncoKbStatus:a?a.status:"pending",oncoKbIndicator:c})):l=Object.assign({},l,{oncoKbStatus:"complete",oncoKbIndicator:void 0})}else l=e.DEFAULT_ANNOTATION_DATA;return l}},{key:"getCivicEntry",value:function(e,t,n){var r=e.gene.hugoGeneSymbol,o=null;if(n[r]&&n[r][e.proteinChange]){var i=a({},e.proteinChange,n[r][e.proteinChange]),s=t[r];o=(0,S.buildCivicEntry)(s,i)}return o}},{key:"getCivicStatus",value:function(e,t){return"error"===e||"error"===t?"error":"complete"===e&&"complete"===t?"complete":"pending"}},{key:"getIndicatorData",value:function(e,t){if(null!==t.uniqueSampleKeyToTumorType&&null!==t.indicatorMap){var n=(0,w.generateQueryVariantId)(e.gene.entrezGeneId,t.uniqueSampleKeyToTumorType[e.uniqueSampleKey],e.proteinChange,e.mutationType);return t.indicatorMap[n]}}},{key:"getEvidenceQuery",value:function(e,t){return t.uniqueSampleKeyToTumorType?(0,w.generateQueryVariant)(e.gene.entrezGeneId,t.uniqueSampleKeyToTumorType[e.uniqueSampleKey],e.proteinChange,e.mutationType,e.proteinPosStart,e.proteinPosEnd):void 0}},{key:"getMyCancerGenomeLinks",value:function(t,n){var r=n[t.gene.hugoGeneSymbol],o=[];return r&&(o=e.filterByAlteration(t,r).map(function(e){return e.linkHTML})),o}},{key:"filterByAlteration",value:function(e,t){return t.filter(function(t){var n=/^[A-Za-z][0-9]+[A-Za-z]/,r=/[0-9]+/;if(t.alteration.trim().match(n)&&e.proteinChange){var o=e.proteinChange.match(r),a=t.alteration.match(r);return o&&a&&o[0]===a[0]}return!1})}},{key:"sortValue",value:function(t,n,r,o,a,i,s){var l=e.getData(t,n,r,o,a,i,s);return p.flatten([v.default.sortValue(l.oncoKbIndicator),_.default.sortValue(l.civicEntry),y.default.sortValue(l.myCancerGenomeLinks),h.default.sortValue(l.isHotspot,l.is3dHotspot)])}},{key:"download",value:function(t,n,r,o,a,i,s){var l=e.getData(t,n,r,o,a,i,s);return["OncoKB: "+v.default.download(l.oncoKbIndicator),"CIViC: "+_.default.download(l.civicEntry),"MyCancerGenome: "+y.default.download(l.myCancerGenomeLinks),"CancerHotspot: "+(l.isHotspot?"yes":"no"),"3DHotspot: "+(l.is3dHotspot?"yes":"no")].join(";")}},{key:"renderFunction",value:function(t,n){var r=e.getData(t,n.oncoKbAnnotatedGenes,n.hotspotData,n.myCancerGenomeData,n.oncoKbData,n.civicGenes,n.civicVariants),o=void 0;return!n.oncoKbData||!n.oncoKbData.result||n.oncoKbData.result instanceof Error||(o=this.getEvidenceQuery(t[0],n.oncoKbData.result)),e.mainContent(r,n,n.oncoKbEvidenceCache,o,n.pubMedCache)}},{key:"mainContent",value:function(e,t,n,r,o){return u.createElement("span",{style:{display:"inline-block",minWidth:100}},u.createElement(c.If,{condition:t.enableOncoKb||!1},u.createElement(v.default,{hugoGeneSymbol:e.hugoGeneSymbol,geneNotExist:!e.oncoKbGeneExist,status:e.oncoKbStatus,indicator:e.oncoKbIndicator,evidenceCache:n,evidenceQuery:r,pubMedCache:o,userEmailAddress:t.userEmailAddress})),u.createElement(c.If,{condition:t.enableCivic||!1},u.createElement(_.default,{civicEntry:e.civicEntry,civicStatus:e.civicStatus,hasCivicVariants:e.hasCivicVariants})),u.createElement(c.If,{condition:t.enableMyCancerGenome||!1},u.createElement(y.default,{linksHTML:e.myCancerGenomeLinks})),u.createElement(c.If,{condition:t.enableHotspot||!1},u.createElement(h.default,{isHotspot:e.isHotspot,is3dHotspot:e.is3dHotspot,status:e.hotspotStatus})))}},{key:"DEFAULT_ANNOTATION_DATA",get:function(){return{oncoKbStatus:"complete",oncoKbGeneExist:!1,myCancerGenomeLinks:[],isHotspot:!1,is3dHotspot:!1,hotspotStatus:"complete",hasCivicVariants:!0,hugoGeneSymbol:"",civicStatus:"complete"}}}]),e}();t.default=C},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){e.querySelector(".rc-tooltip-arrow").style.display="none"}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.hideArrow=s;var c=n(1),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(c),p=n(63),f=n(33),h=n(177),m=n(173),y=r(m),g=n(857),v=r(g),b=n(948),_=r(b),w=n(121),x=n(13),S=n(949),C=r(S),k=n(856),E=r(k),M=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},A=T=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.showFeedback=!1,n.tooltipDataLoadComplete=!1,n.handleFeedbackOpen=n.handleFeedbackOpen.bind(n),n.handleFeedbackClose=n.handleFeedbackClose.bind(n),n.handleLoadComplete=n.handleLoadComplete.bind(n),n.tooltipContent=n.tooltipContent.bind(n),n}return i(t,e),l(t,[{key:"render",value:function(){var e=d.createElement("span",{className:""+v.default["annotation-item"]});return"error"===this.props.status?e=this.errorIcon():"pending"===this.props.status?e=this.loaderIcon():(e=d.createElement("span",{className:""+v.default["annotation-item"]},d.createElement("i",{className:_.default["oncogenic-icon-image"]+" "+this.oncogenicImageClassNames(this.props.indicator),style:T.ONCOGENIC_ICON_STYLE,"data-test":"oncogenic-icon-image"})),this.showFeedback?e=d.createElement("span",null,e,this.feedbackModal(this.props.hugoGeneSymbol,this.props.evidenceQuery&&this.props.evidenceQuery.alteration)):(this.tooltipDataLoadComplete||this.props.evidenceCache&&this.props.evidenceQuery)&&(e=d.createElement(y.default,{overlay:this.tooltipContent,placement:"right",trigger:["hover","focus"],onPopupAlign:s,destroyTooltipOnHide:!1},e))),e}},{key:"loaderIcon",value:function(){return d.createElement(h.Circle,{size:18,scaleEnd:.5,scaleStart:.2,color:"#aaa",className:"pull-left"})}},{key:"errorIcon",value:function(){return d.createElement(y.default,{overlay:d.createElement("span",null,"Error fetching OncoKB data"),placement:"right",trigger:["hover","focus"],destroyTooltipOnHide:!0},d.createElement("span",{className:""+v.default["annotation-item-error"]},d.createElement("i",{className:"fa fa-exclamation-triangle text-danger"})))}},{key:"feedbackModal",value:function(e,t){var n="entry.1744186665="+(e||""),r="entry.1671960263="+(t||""),o="entry.1381123986="+(this.props.userEmailAddress||""),a="entry.1083850662="+encodeURIComponent(window.location.href);return d.createElement(p.Modal,{show:this.showFeedback,onHide:this.handleFeedbackClose},d.createElement(p.Modal.Header,{closeButton:!0},d.createElement(p.Modal.Title,null,"OncoKB Annotation Feedback")),d.createElement(p.Modal.Body,null,d.createElement("iframe",{src:"https://docs.google.com/forms/d/1lt6TtecxHrhIE06gAKVF_JW4zKFoowNFzxn6PJv4g7A/viewform?"+n+"&"+r+"&entry.118699694&entry.1568641202&"+o+"&"+a+"&embedded=true",style:{width:550,height:500,border:"none",marginLeft:"10px"},marginHeight:0,marginWidth:0},d.createElement(E.default,{status:k.TableCellStatus.LOADING}))))}},{key:"tooltipContent",value:function(){return d.createElement(C.default,{geneNotExist:this.props.geneNotExist,indicator:this.props.indicator||void 0,evidenceCache:this.props.evidenceCache,evidenceQuery:this.props.evidenceQuery,pubMedCache:this.props.pubMedCache,handleFeedbackOpen:this.handleFeedbackOpen,onLoadComplete:this.handleLoadComplete})}},{key:"handleLoadComplete",value:function(){this.tooltipDataLoadComplete||(this.tooltipDataLoadComplete=!0)}},{key:"handleFeedbackOpen",value:function(){this.showFeedback=!0}},{key:"handleFeedbackClose",value:function(){this.showFeedback=!1}},{key:"oncogenicImageClassNames",value:function(e){var t=void 0;return t=e&&null!=e.oncogenic?(0,w.oncogenicImageClassNames)(e.oncogenic,e.vus,e.highestSensitiveLevel,e.highestResistanceLevel):(0,w.oncogenicImageClassNames)("N/A",!1,"",""),t=t.map(function(e){return _.default[e]}),t.join(" ")}}],[{key:"sortValue",value:function(e){if(!e)return[];var t=[];return t[0]=(0,w.calcOncogenicScore)(e.oncogenic,e.vus),t[1]=(0,w.calcSensitivityLevelScore)(e.highestSensitiveLevel),t[2]=(0,w.calcResistanceLevelScore)(e.highestResistanceLevel),t[3]=e.geneExist?1:0,t}},{key:"download",value:function(e){return e?(e.oncogenic?e.oncogenic:"Unknown")+", "+(e.highestSensitiveLevel?e.highestSensitiveLevel.toLowerCase():"level NA"):"NA"}},{key:"ONCOGENIC_ICON_STYLE",get:function(){return{backgroundImage:"url("+n(968)+")"}}}]),t}(d.Component);M([x.observable],A.prototype,"showFeedback",void 0),M([x.observable],A.prototype,"tooltipDataLoadComplete",void 0),A=T=M([f.observer],A),t.default=A;var T},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){e.querySelector(".rc-tooltip-arrow").style.display="none"}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.hideArrow=l;var d=n(1),p=o(d),f=n(3),h=o(f),m=n(33),y=n(177),g=n(173),v=r(g),b=n(857),_=r(b),w=n(13),x=n(969),S=r(x),C=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},k=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.tooltipDataLoadComplete=!1,n.cardContent=n.cardContent.bind(n),n}return s(t,e),u(t,[{key:"render",value:function(){var e=p.createElement("span",{className:""+_.default["annotation-item"]}),t=n(972);if(this.props.hasCivicVariants||(t=n(973)),"error"==this.props.civicStatus)e=this.errorIcon();else if(void 0!==this.props.civicEntry){if(null!==this.props.civicEntry&&"complete"==this.props.civicStatus){e=p.createElement("span",{className:""+_.default["annotation-item"]},p.createElement("img",{width:14,height:14,src:t,alt:"Civic Variant Entry"}));var r=p.createElement("div",{className:"rc-tooltip-arrow-inner"});e=p.createElement(v.default,{overlay:this.cardContent.bind(this,this.props.civicEntry),placement:"right",trigger:["hover","focus"],arrowContent:r,onPopupAlign:l,destroyTooltipOnHide:!1},e)}}else e=this.loaderIcon();return e}},{key:"loaderIcon",value:function(){return p.createElement(y.Circle,{size:18,scaleEnd:.5,scaleStart:.2,color:"#aaa",className:"pull-left"})}},{key:"errorIcon",value:function(){return p.createElement(v.default,{overlay:p.createElement("span",null,"Error fetching Civic data"),placement:"right",trigger:["hover","focus"],destroyTooltipOnHide:!0},p.createElement("span",{className:""+_.default["annotation-item-error"]},p.createElement("i",{className:"fa fa-exclamation-triangle text-danger"})))}},{key:"cardContent",value:function(e){return p.createElement(S.default,{title:"CIViC Variants",geneName:e.name,geneDescription:e.description,geneUrl:e.url,variants:e.variants})}}],[{key:"sortValue",value:function(e){var t=0;return e&&(t=1),t}},{key:"download",value:function(e){if(!e)return"NA";var t=h.values(e.variants),n=[];return t&&t.length>0&&t[0].evidence&&h.toPairs(t[0].evidence).forEach(function(e){n.push(e[0]+": "+e[1])}),0===n.length?"NA":n.join(", ")}}]),t}(p.Component);C([w.observable],k.prototype,"tooltipDataLoadComplete",void 0),k=C([m.observer],k),t.default=k},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a),s=n(872),l=function(e){return e&&e.__esModule?e:{default:e}}(s),u=function(){function e(){r(this,e)}return o(e,null,[{key:"getValues",value:function(e,t,n){var r={},o=!0,a=!1,i=void 0;try{for(var s,l=e[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var u=s.value;r[u.sampleId]=u[n]}}catch(e){a=!0,i=e}finally{try{!o&&l.return&&l.return()}finally{if(a)throw i}}var c=t.filter(function(e){return r[e]&&r[e]>0&&r[e].toString().length>0});return 1===c.length?[r[c[0]].toString()]:c.map(function(e){return e+": "+r[e]})}},{key:"getTextValue",value:function(t,n,r){return e.getValues(t,n,r).join(";")}},{key:"getDisplayValue",value:function(t,n,r){return e.getValues(t,n,r).join("\n")}},{key:"renderFunction",value:function(t,n,r){return i.createElement("div",{className:l.default["integer-data"]},e.getDisplayValue(t,n,r))}},{key:"getReads",value:function(e,t){var n=[];if(e){var r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var l=i.value;n.push(l[t])}}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}}return 1==n.length?n[0]:n}}]),e}();t.default=u},function(e,t,n){"use strict";function r(e,t,n){return function(r){var o=e(r);return null===o?a.createElement(s.default,{status:i.TableCellStatus.LOADING}):"error"===o.status?a.createElement(s.default,{status:i.TableCellStatus.ERROR}):null===o.data?a.createElement(s.default,{status:i.TableCellStatus.NA,naAlt:n}):t(o.data,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(1),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(o),i=n(856),s=function(e){return e&&e.__esModule?e:{default:e}}(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),l=o(s),u=n(3),c=o(u),d=n(856),p=r(d),f=n(871),h=r(f),m=function(){function e(){a(this,e)}return i(e,null,[{key:"getData",value:function(e,t){var n=null;return t&&(n=t[e[0].uniqueSampleKey]||null),n}},{key:"sortBy",value:function(t,n){var r=e.getData(t,n);return r||null}},{key:"filter",value:function(t,n,r){var o=e.getData(t,r);return null!==o&&o.toUpperCase().indexOf(n)>-1}},{key:"isVisible",value:function(t,n){if(!t||!n)return!1;var r={};return t.forEach(function(t){var o=e.getData(t,n);o&&(r[o]=t[0].sampleId)}),c.keys(r).length>1}},{key:"download",value:function(t,n){return e.getData(t,n)||""}},{key:"render",value:function(t,n){var r=e.getData(t,n);return r?l.createElement(h.default,{maxLength:30,text:r||"",tooltip:l.createElement("div",{style:{maxWidth:300}},r)}):l.createElement(p.default,{status:d.TableCellStatus.NA,naAlt:"Cancer type not available for this sample."})}}]),e}();t.default=m},function(e,t){},function(e,t){e.exports={portalWidth:"styles-module__portalWidth__1kueS",SurvivalTable:"styles-module__SurvivalTable__2NKCT",Tooltip:"styles-module__Tooltip__1I-Ty",NotAvailable:"styles-module__NotAvailable__1Zx5R"}},function(e,t,n){"use strict";function r(e){return new Promise(function(t){return setTimeout(t,e)})}Object.defineProperty(t,"__esModule",{value:!0}),t.sleep=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(883);n.d(t,"dsvFormat",function(){return r.a});var o=n(1005);n.d(t,"csvParse",function(){return o.c}),n.d(t,"csvParseRows",function(){return o.d}),n.d(t,"csvFormat",function(){return o.a}),n.d(t,"csvFormatRows",function(){return o.b});var a=n(1006);n.d(t,"tsvParse",function(){return a.c}),n.d(t,"tsvParseRows",function(){return a.d}),n.d(t,"tsvFormat",function(){return a.a}),n.d(t,"tsvFormatRows",function(){return a.b})},function(e,t,n){e.exports=n(6)(659)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.default=function(e,t,n,r){return(0,a.default)(e,t,n,r),{remove:function(){(0,s.default)(e,t,n,r)}}};var o=n(1073),a=r(o),i=n(1194),s=r(i);e.exports=t.default},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(1),c=r(u),d=n(63),p=n(855),f=r(p),h=n(33),m=n(1010),y=function(e){return e&&e.__esModule?e:{default:e}}(m),g=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},v=f,b="download",_=function(e){function t(){o(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.onSelectTab=function(t){e.store.forDownloadTab=t===b},e}return i(t,e),s(t,[{key:"render",value:function(){return c.createElement("div",{className:v.QueryAndDownloadTabs},c.createElement(d.Tabs,{id:"QueryAndDownloadTabs",animation:!1,activeKey:this.store.forDownloadTab?b:"query",onSelect:this.onSelectTab},c.createElement(d.Tab,{eventKey:"query",title:"Query"}),!1!==this.props.showDownloadTab&&c.createElement(d.Tab,{eventKey:"download",title:"Download Data"})),c.createElement(y.default,{onSubmit:this.props.onSubmit,store:this.props.store}))}},{key:"store",get:function(){return this.props.store}}]),t}(c.Component);_=g([h.observer],_),t.default=_},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(1),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),d=n(33),p=n(63),f=n(890),h=r(f),m=n(865),y=r(m),g=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},v=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"change",value:function(e){this.props.onChange(this.props.dataSets.find(function(t){return t.molecularProfileId===e.target.value}))}},{key:"render",value:function(){var e=this;if(1===this.props.dataSets.length&&("MUTATION_EXTENDED"===this.props.dataSets[0].molecularAlterationType||"COPY_NUMBER_ALTERATION"===this.props.dataSets[0].molecularAlterationType))return null;var t=[];return this.props.dataSets.forEach(function(n){var r=e.props.molecularProfileIdToProfiledSampleCount[n.molecularProfileId];t.push(c.createElement("option",{value:n.molecularProfileId},n.name," (",r," sample",1!==r?"s":"",")"))}),c.createElement("div",{className:h.default.DataSet},c.createElement(p.Form,{inline:!0},c.createElement(p.FormGroup,{controlId:"formControlsSelect",bsSize:"small"},c.createElement(p.ControlLabel,null,"Data Set")," ",c.createElement(p.FormControl,{componentClass:"select",onChange:this.change,value:this.props.selectedValue},t))))}}]),t}(c.Component);g([y.default],v.prototype,"change",null),v=g([d.observer],v),t.default=v},,function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(s),u=n(177),c=n(176),d=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),i(t,[{key:"render",value:function(){return l.createElement(c.If,{condition:this.props.isHidden},l.createElement(c.Else,null,l.createElement("h4",{style:this.props.style||{},className:this.props.className||""},this.props.title,l.createElement(c.If,{condition:this.props.isLoading},l.createElement(u.ThreeBounce,{style:{display:"inline-block",marginLeft:10}})))))}}]),t}(l.Component);t.default=d},,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){e.querySelector(".rc-tooltip-arrow").style.left="10px"}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.placeArrow=s;var u=n(1),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),d=n(177),p=n(173),f=r(p),h=n(857),m=r(h),y=n(942),g=r(y),v=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n}return i(t,e),l(t,null,[{key:"sortValue",value:function(e,t){var n=0;return e&&(n+=1),t&&(n+=.5),n}},{key:"hotspotInfo",value:function(e,n){return c.createElement("span",{className:g.default["hotspot-info"]},t.title(e,n),c.createElement("br",null),t.publication(e,n),c.createElement("br",null),c.createElement("br",null),t.link(e,n))}},{key:"title",value:function(e,t){var n=e?c.createElement("b",null,"Recurrent Hotspot"):"",r=e&&t?"and":"",o=t?c.createElement("b",null,"3D Clustered Hotspot"):"";return c.createElement("span",null,n," ",r," ",o)}},{key:"publication",value:function(e,t){var n=e?"a recurrent hotspot (statistically significant)":"",r=e&&t?"and":"",o=t?"a 3D clustered hotspot":"",a=e?c.createElement("a",{href:"http://www.ncbi.nlm.nih.gov/pubmed/26619011",target:"_blank"},"Chang et al., Nat Biotechnol, 2016"):"",i=t?c.createElement("a",{href:"http://genomemedicine.biomedcentral.com/articles/10.1186/s13073-016-0393-x",target:"_blank"},"Gao et al., Genome Medicine, 2017"):"";return c.createElement("span",null,"This mutated amino acid was identified as ",n," ",r," ",o," in a population-scale cohort of tumor samples of various cancer types using methodology based in part on ",a," ",r," ",i,".")}},{key:"link",value:function(e,t){var n=e?c.createElement("a",{href:"http://www.cancerhotspots.org/",target:"_blank"},"http://cancerhotspots.org/"):"",r=e&&t?"and":"",o=t?c.createElement("a",{href:"http://www.3dhotspots.org/",target:"_blank"},"http://3dhotspots.org/"):"";return c.createElement("span",null,"Explore all mutations at ",n," ",r," ",o,".")}}]),l(t,[{key:"loaderIcon",value:function(){return c.createElement(d.Circle,{size:18,scaleEnd:.5,scaleStart:.2,color:"#aaa",className:"pull-left"})}},{key:"render",value:function(){var e=this.props,r=e.isHotspot,o=e.is3dHotspot,a=c.createElement("span",{className:""+m.default["annotation-item"]});if("pending"===this.props.status)a=this.loaderIcon();else if(r||o){var i=14,l=n(943);r||(l=n(944),i=18);var u=c.createElement("div",{className:"rc-tooltip-arrow-inner"}),d=t.hotspotInfo(r,o);a=c.createElement(f.default,{overlay:d,placement:"topLeft",trigger:["hover","focus"],arrowContent:u,onPopupAlign:s},c.createElement("span",{className:m.default["annotation-item"]+" chang_hotspot"},c.createElement("img",{width:14,height:i,src:l,alt:"Recurrent Hotspot Symbol"})))}return a}}]),t}(c.Component);t.default=v},function(e,t){e.exports={portalWidth:"cancerHotspots-module__portalWidth__2IjLk","hotspot-info":"cancerHotspots-module__hotspot-info__1GI2v"}},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0ZWQgYnkgSWNvTW9vbi5pbyAtLT4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIxMDI0IiBoZWlnaHQ9IjEwMjQiIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiPgogICAgPGcgaWQ9Imljb21vb24taWdub3JlIj4KICAgIDwvZz4KICAgIDxwYXRoIGZpbGw9IiNmZjk5MDAiIGQ9Ik0zMjEuMDA4IDEwNDUuMzMzYy02OC4yNDUtMTQyLjAwOC0zMS45MDEtMjIzLjM3OSAyMC41NTEtMzAwLjA0NCA1Ny40NC04My45NTYgNzIuMjQ0LTE2Ny4wNjUgNzIuMjQ0LTE2Ny4wNjVzNDUuMTUzIDU4LjcgMjcuMDkyIDE1MC41MDhjNzkuNzcyLTg4LjggOTQuODI0LTIzMC4yOCA4Mi43ODMtMjg0LjQ2NCAxODAuMzE1IDEyNi4wMTIgMjU3LjM3NiAzOTguODU2IDE1My41MjMgNjAxLjA2NSA1NTIuMzcyLTMxMi41MzIgMTM3LjM5OS03ODAuMTcyIDY1LjE1NS04MzIuODUxIDI0LjA4MSA1Mi42NzYgMjguNjQ4IDE0MS44NTEtMjAgMTg1LjEyNy04Mi4zNTItMzEyLjI3Ni0yODUuOTcyLTM3Ni4yNzYtMjg1Ljk3Mi0zNzYuMjc2IDI0LjA4MyAxNjEuMDQ0LTg3LjI5NiAzMzcuMTQ0LTE5NC42OTYgNDY4LjczMS0zLjc3NS02NC4yMTYtNy43ODMtMTA4LjUyOC00MS41NDktMTY5Ljk4LTcuNTggMTE2LjY1Ni05Ni43MzIgMjExLjc0OC0xMjAuODczIDMyOC42MjgtMzIuNzAxIDE1OC4yODcgMjQuNDk2IDI3NC4xOCAyNDEuNzQ4IDM5Ni42MjN6Ij48L3BhdGg+Cjwvc3ZnPgo="},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE2LjAuNCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHdpZHRoPSIyNC4yNjNweCIgaGVpZ2h0PSIzNi4zNjZweCIgdmlld0JveD0iMCAwIDI0LjI2MyAzNi4zNjYiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDI0LjI2MyAzNi4zNjYiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8Zz4KCTxwYXRoIGZpbGw9IiNGRjk5MDAiIGQ9Ik02LjgyOCwyNy45NDdjLTEuODU5LTMuODcyLTAuODY5LTYuMDk0LDAuNTY0LTguMTg0YzEuNTY1LTIuMjk2LDEuOTY4LTQuNTU4LDEuOTY4LTQuNTU4CgkJczEuMjMxLDEuNiwwLjc0Miw0LjEwNGMyLjE4MS0yLjQyMywyLjU5MS02LjI4NiwyLjI1Ni03Ljc2NGM0LjkyMSwzLjQzNiw3LjAyNywxMC44ODksNC4xOSwxNi40MDEKCQlDMzEuNjI3LDE5LjQxOSwyMC4zLDYuNjYsMTguMzI2LDUuMjIxYzAuNjU2LDEuNDM5LDAuNzgzLDMuODczLTAuNTQ2LDUuMDUzQzE1LjUzNiwxLjc1LDkuOTgsMCw5Ljk4LDAKCQljMC42NTcsNC4zOTctMi4zODgsOS4yMDgtNS4zMTYsMTIuOEM0LjU2LDExLjA0Niw0LjQ1MSw5LjgzMSwzLjUzLDguMTU1Yy0wLjIwMSwzLjE4My0yLjYzNiw1Ljc4NS0zLjI5OCw4Ljk3NAoJCUMtMC42NTksMjEuNDQ1LDAuOSwyNC42MSw2LjgyOCwyNy45NDdMNi44MjgsMjcuOTQ3eiIvPgoJPHRleHQgdHJhbnNmb3JtPSJtYXRyaXgoMC41ODMgMCAwIDAuNTgzIDMuNzMyNCAzNi4xOTYzKSIgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9IidBcmlhbC1Cb2xkSXRhbGljTVQnIiBmb250LXNpemU9IjIwLjY4MDIiPjNEPC90ZXh0Pgo8L2c+Cjwvc3ZnPgo="},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){e.querySelector(".rc-tooltip-arrow").style.left="10px"}function u(e){var t=e.indexOf('"')+1,n=t+e.slice(t).indexOf('"'),r=e.indexOf(">")+1,o=e.indexOf("</a>"),a=e.slice(t,n).trim(),i=e.slice(r,o).trim();return a.length>0&&i.length>0?{url:a,text:i}:void 0}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.placeArrow=l,t.parseMyCancerGenomeLink=u;var d=n(1),p=o(d),f=n(3),h=o(f),m=n(173),y=r(m),g=n(857),v=r(g),b=n(946),_=r(b),w=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n}return s(t,e),c(t,null,[{key:"sortValue",value:function(e){return e.length>0?1:0}},{key:"download",value:function(e){return e.length>0?"present":"not present"}},{key:"myCancerGenomeLinks",value:function(e){var t=[];return h.each(e,function(e,n){var r=u(e);r&&t.push(p.createElement("li",{key:n},p.createElement("a",{href:r.url,target:"_blank"},r.text)))}),p.createElement("span",null,p.createElement("b",null,"My Cancer Genome links:"),p.createElement("br",null),p.createElement("ul",{className:_.default["link-list"]},t))}}]),c(t,[{key:"render",value:function(){var e=p.createElement("span",{className:""+v.default["annotation-item"]});if(this.props.linksHTML.length>0){var r=p.createElement("div",{className:"rc-tooltip-arrow-inner"}),o=t.myCancerGenomeLinks(this.props.linksHTML);e=p.createElement(y.default,{overlay:o,placement:"topLeft",trigger:["hover","focus"],arrowContent:r,onPopupAlign:l},p.createElement("span",{className:v.default["annotation-item"]+" mcg"},p.createElement("img",{width:"14",height:"14",src:n(947),alt:"My Cancer Genome Symbol"})))}return e}}]),t}(p.Component);t.default=w},function(e,t){e.exports={portalWidth:"myCancerGenome-module__portalWidth__m3pyZ","link-list":"myCancerGenome-module__link-list__2ZNFI"}},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIsAAACACAYAAAA73po8AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAADvNJREFUeNrsXT1y4koXPaacj94KPnkFIwfEI0eEg1dgWIFNkVJFu4qUwrMCMyswExIZxwTWrMB6Kxi9FfAFuhq3Zf20Wt2tFuJWuZ7rDZaa1tG95/722eFwQCJnZ2fogvSn2yEAj/tfm/1yEGi4jwvAB+AC+EL3fKF/3gEI9stB1IY9OxwOOOsSWPrTrQfgiR5eWnYAJipA059uRwBuU4DMkzWAn/vlYHcCi13a5Engo+P9crCWuL4D4I5A4kgscU1gjU5gaV6jPFd4iMKAIVMzBzBSsNQQwLUOk3gCizhYnok7iEoE4KroofWnW59A4itebum9T2DRBxSftIrMW37JmwUyNUMCiatx2RGAC5tM0uFwwHkHnJ+55N+5AFb96XZCAPmmyNSIiEP86sqmjbRCsxD5/M65mem3LKCff8nd3Ale1wXwJrmsgDykkSRhVSHX++Vgc9Is8cNMvAe35C3zeW7Qn24TMxFS3CIEEGaA6FbQ3IR5YOxPty+CXpQurbjptGYh7+RRMA4ha/MTbfRfKpbyFyT75SAUXO+K3OIm5NIGstsIwZVwY6UBs18O/lG47leN4C6Mv+yXg7ENYOlZHu+otcmq+QNpLNMytMUM9QwCJWH4psjiD5UXI5M1aeAZOeQAdAcsBmITvGxE+UhFwKw1aCwRuekMWMiFNUkQf2q89oSIs1FTRJq5E5rl1uB3CnXGJiiqOm6Avwy7AhaTX/SH7huQK2vaQ7k9erCQB+Qa/E5GOAVpL5OA8cicH7VmMQoUk8k3IrxXBk3S7bGDxTP4fe5NbyClBi4Nkd5RV1xnE1olbOLG++Ug3C8HlwRWnVrGoZLNowXLNwP3iNBMwCwNGkZaRidvmjf1/bTnhiSq1GTEmlQ+971d4hgjqI9aj/fLwZoKu5Da3x0qJElFxUgisT/dvmkmuQ/75WACi4VMxzcKIcgAJyJOFCIuo/gqEI7YQVG3gkmwHDTzlDFaJBRKSMIJXzPA88KBI8p72BVeQqluBeNgoRD1nxNQtIDOh3htce2aGBMlCt4JKFpddlGepoQUt9F1vu86UHgTI+iqD9sAFpVeUIi4n4bZ9sQYW3iMLTzT9+WSmqJcqROa5YHs7s7S9b0CeGVs8dgAYDa0P2Xi2A6WugG5HeJmK2t7gBlb8A9hxNhi1IRpRnm6obYLrdsb+iOB6IiI231T4XsJwKS/5yVjs8DkGkrqm2sXr2vtG6LFO4LgCOjnxbZIrKBs8DHJ94g47G/SHAX96XaM7B4nJXt6rgkoLsfAd5wa/A/vTV1hWzSHgPxKgcVjbHHH2OzBMGA2BJg0d1JSZlrbDJEGuUEcU+G1SadiIRmmKGRsdtHEWvrT7SMH3nC/HNReR62gXH+69Snk/Iq4GNtPbdZLx2Ie6XJOl7GF28RC6CVdc+RXifQkgTIiMuWW2PEuyQM+B8jcphZDgNngY8uuWbBQw1NZPGHTlsF66szQLEJcYrkh0EQw3zKSFg/Ak6o2ksqcRTDbqSTTeZJavMXHe6IxQBz9ln6BK7vOgpX60TGbIOIhiacXMDbbWbrU25SGeetPt7XGj1U1QyLq7NhN0Ir7eWZs8cbYYmiZVuEBzT+7V5qJY47gVvQKjk1+Z5DYJ8YWzFKt8gns/en2WYbHVAVLmcYIbBzLqcHryfqO86Zc5ZRWcVDeMuKTWfK1gYWAEHVYq6S9nipvtCkZCdIFB8AzTbXSZobyABF2xQNibBYxNrtGXEsSpoikzSYoS+760+2rSGusDFgecrTLPTomjM3WiBOGY9DBDQ2boCHkAoEekd9C8yWVG8qYg68k/3CS2mB5Qv0SysycnnRuiMoI1l3WKhYCxYGaWtsRJSLVuc6EvgDA7hSttUJ8hdcaZcVj6sZZ7nHE2eW4JsV8IbakqF7nKk1664JlDuBWReW4pXKDuBD7tQWg+arhmh/MkXSlXH+6ZRyaHynvELVQe3jkbvrkSQQA7hmbbRDPvk2GJa9g2cELKXF0mLb+dOsmFY3nkkDx8LHLzSMUXtd8cAzAF8ZmE4HPOogDUN9oo14Ym7EK93JozcMMdf4E4IyxWcjY4oKA8m/HzFAit6BxJjIlCg69bVn+/GS/HDzUAEsynmPN2Gxc8Lm8Wfr/UIRVBCjPRRvM2KxVhy9pHEAQ7JeDS1nXuahCblWTvyQPelTSsHVX8+3ySj67OTlXn/e0VxG9Iid5PNeozOJTCTINW6rcxx+MLVzyhpyuoyXxinoV/uAOYgPwHEiez0OFRAGvqSpmcv+XY3ZcxhZ+6j4h95Ed4iDjGMAF/XtEfMhvyTMNNV7bFSa4FN5fVXnD+9Mtk2xin+C9HNDhCVZqY9y8L5UhrwAcxhaTpJenrE2DuM91ixRACM0F4j0BoHgoL9DOjMHI8Bd6q3clPOSnYY+gDaItbJEMJOgJeD51jn1ZSf7dhPvyLxmAYsjO8Oat8xLAlekOQcPyWzcIyzRLWW+QiDmqbPOpqfwCcToh7wFnHhbFcxPueqHFhdXKXFxN1/27b+c1PR8RuYFEoxNxBlbw7yFji2vIndl8jKLrZfiV/JIZlMuoV6kr/+hKBZB7/ciB6KyraNFwjuPfUR1FQbmV4u8x1LVBVK2WzFZ7QLdF9aFcH+qUPmkWKq1TPe5qs18OrnES3ZrFhfyh5584EJ1HgCLN8l3D9/Db/BAYW6wYWzzb1kyW4eKGirhLhIwYU5Zm0ZWQurSxp4ixRdK7vcP7uPOIfvfwOYp7JeNZccnPCHGidKJJu/gKSP9VetjjJ80i4+ZWENdyBeIjTmfMibM90e/pPbmVAIqH9+SnA+BO12RLesh1tMs4bypo2gw5Gh+GZylIqpJCGVOU5QmOsmJCBC6HsQWrkcSU1VrronrqXkseqE55QLWAloQJmoU595gXvFhz2fAFmfuqgNmVjXUzOTT5m41Ioe7CpFEsrGpOqYzhQATYr6jB/JKsul9yzSLAPEC8LieAQNL0POOtmXdQuyTxmjU9nHmBB+cytrijvRpyHManh7sBMM6o2NsgO341RHF86LYGBxkTuL0SEzkWCZr2BGxr10CzY2x2hbg4O888rRCXPcwzeN4wi9eQKcqSm6w11ORIiXaJUH4YhPCAn16Gres8YLgHJmL3A8QFU2fcTx5JzAKMl0NkN5yp82sApoi/VDrprFe0SMUSthAz3wWAclWgNUTJcZaZ+KXQnV7j8yGfm6rF9ec5RGykYeP/tV+bfHiD+dhIEVCqaOJ70b1lbLZmbDGHovjUfjkYc0fuJeapkvQ0BHVaqVkolP/M/awUAyXhLQ8518uSawA7hbU411UIrajrLHpCVhUJLFcsnsBnItIOlYHCAWbCmYQwx3NKPhsQ2VZljkK8pzUqS26TmeLsc+0jTAxolqLzpzcAfhUQ11YIlzcKUHEubuEcXDpkGooAs2vBXkap3zeI6383slrEQplzWrRyu/F5GYsmwKxQL2/0swUbOUFc9BwhzgofVQiBLAWvOYf96fauikck1OvMtYN4Euu0YoQYNy3h9zGCQQAsWWP0I8THCpbuhXCv8345SKqmHiTWacu40yG5rSsAb5YNOTbBVbJccKdKmKTqHNwJclowCniALaQwTG3SnJJ/TgfwUpTvu9ECFgLMBnHTlghptWmOf9Z6fajtYrBRq3goLmv1tIEl8df3y8EVyqdUWjPFkgJimYChksdjFWVTv2vVs1Dj+1WOWdpZeGBmnld2VydZZ7FWcaCwDad28ROlBy7wOUJr3WxcCqrlAfjxCPnLUCDkERoDCwEmIg2z5tzlnaUbmJdAc1GcOGyjiJBX4RiY8hPjqUf6xeZBylTptsrx3i6OIQYj2HD2oZGsSGod1VsgL4hn4zr2gmX2kOPSOzieovUyDrZBxVGtOsBySxv+bDlgxnjPrgcEnqsjGs3xvSCEcL1fDq6rhjWUmqGMbrhOnRpvielxSUPO6UV44UASyMa9Kp++KkGoRv3pNqLIbxPcxCHSGra9vIB7GXlTmbTXeBlej/IxJ6o1y58cV62Rc55TRLZwELPFmmJIJsWv8KfCxLWKZulpQH1mDKOhwyD4GMKIwNMKDUIHTb0R2P2Klwh0rEslwXVL/v2pAcK7w8fo8nfbNUl/uk1qgIc1LvW77WBxoX5IUJnHE+Fja4trMVAYaRJfweWs1ywiCxzSvDqTYvWRfKRNku5GVRIdA1gS/mLMHFG2eZ3BYWzxblQPDYSuoUk9hQsMIVbj4pg2R3gfwhxYBJQRcRMHLRHVrrNXYQOuRJONpImSty+UKX2ID3uYhRYBRdcLs6NaI6VyOBy0JBI9xNVnZWTyQyF3KuD0Be+BJq/ALgeII5QBVfC1wS0eQm91XnvAwmmCEbKDSSH340BdcU7i+fyyFTgVNa+saEmxaAOLBeo4BHBvW5mEhgnYmd6f5NE9pWDpNbl59DB18AiXvK63Blz1ojiKZ+BWka4L9yzYR51xEBdx5Pg5faC16VgKzI1fC44ZLBvonzblA3htUMscxZy+RjkL9+Y9Qs8AoSwxmgEnsv/HoGnX8hAb5yycmGxxfSRibUpM3ivQeXErwELh6fBIAXNr8Hvtjh4sJKbHcmivsSGOZJJY/+gKWNYN3FN3jc2Nyf3T3QFqDVjoiwaGb+tCU46GK4k0IREMlGLYpFlME91Ehv3p9q7lxHZioq/cNrBsGrrvSgN/MUVs16ZCAVaBhVoX1g3dXllRFnlajoE135vsyzqHffLLsApPxENcST8uAIFPvyb//ZoDijDFIb5BbWtsiIITx3SJFRHcjIfyhuaKq8c0pdMnUHylh1xlPRd5HILMnUvXrHrtEA1l0xsvUSiJTzQxvisk3lSH8EoVH3FDAt2Uxnohb2fX5IGk1oKFNu/JkOuZAORn8jD60+2qBmDGNo8bOVawOIiryjxNt9gRQNY595cpVLJi5q8usPRsXRw3TUq16l0jLha/KtEAVUa4/tUqOGKxVrOkNMwT6nXqJS75jyrBq4o1sw9NTYvovBnKiV1UPawpcWGl5/EKdisc/RyaVoElBZqkayAvxrGDwip/0m53iBODPGgCcmU3OHJpJVgyHiJPQgPdE7256UqBRdPDzYPlJCcpkv8PAHSv/QtFBkyYAAAAAElFTkSuQmCC"},function(e,t){e.exports={portalWidth:"oncogenicIcon-module__portalWidth__3lDXV","oncogenic-icon-image":"oncogenicIcon-module__oncogenic-icon-image__3ptbU",level1:"oncogenicIcon-module__level1__2I59M",oncogenic:"oncogenicIcon-module__oncogenic__1PXxv",level2A:"oncogenicIcon-module__level2A__2fiNZ",level2B:"oncogenicIcon-module__level2B__2Q7_L",level3A:"oncogenicIcon-module__level3A__1you4",level3B:"oncogenicIcon-module__level3B__2B8Jp",level4:"oncogenicIcon-module__level4__2XZHD",levelR1:"oncogenicIcon-module__levelR1__3_5T8",levelR2:"oncogenicIcon-module__levelR2__3Qirw",levelR3:"oncogenicIcon-module__levelR3__2H4x5",level1R:"oncogenicIcon-module__level1R__30RSu",level2AR:"oncogenicIcon-module__level2AR__2oYQp",level2BR:"oncogenicIcon-module__level2BR__2yX9i",level3AR:"oncogenicIcon-module__level3AR__3KUvC",level3BR:"oncogenicIcon-module__level3BR__3Gitf",level4R:"oncogenicIcon-module__level4R__CLk5P","likely-neutral":"oncogenicIcon-module__likely-neutral__32Yau","unknown-oncogenic":"oncogenicIcon-module__unknown-oncogenic__Fb5Ww","no-info-oncogenic":"oncogenicIcon-module__no-info-oncogenic__3eAEd",vus:"oncogenicIcon-module__vus__3nQPW"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(1),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),d=n(950),p=r(d),f=n(33),h=n(121),m=n(856),y=r(m),g=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},v=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){var e=c.createElement("span",null),t=this.evidenceCacheData;if(this.props.geneNotExist&&(e=c.createElement(p.default,{geneNotExist:!0,pmidData:{},handleFeedbackOpen:this.props.handleFeedbackOpen})),!t||!this.props.indicator)return e;if("complete"===t.status&&t.data&&!this.props.geneNotExist){var n=t.data,r=this.pmidData;e=c.createElement(p.default,{geneNotExist:this.props.geneNotExist,title:this.props.indicator.query.hugoSymbol+" "+this.props.indicator.query.alteration+" in "+this.props.indicator.query.tumorType,gene:this.props.indicator.geneExist?this.props.indicator.query.hugoSymbol:"",oncogenicity:this.props.indicator.oncogenic,oncogenicityPmids:(0,h.generateOncogenicCitations)(n.oncogenicRefs),mutationEffect:n.mutationEffect.knownEffect,mutationEffectPmids:(0,h.generateMutationEffectCitations)(n.mutationEffect.refs),geneSummary:this.props.indicator.geneSummary,variantSummary:this.props.indicator.variantSummary,tumorTypeSummary:this.props.indicator.tumorTypeSummary,biologicalSummary:n.mutationEffect.description,treatments:(0,h.generateTreatments)(n.treatments),pmidData:r,handleFeedbackOpen:this.props.handleFeedbackOpen})}else"pending"===t.status?e=c.createElement(y.default,{status:m.TableCellStatus.LOADING}):"error"===t.status&&(e=c.createElement(y.default,{status:m.TableCellStatus.ERROR}));return e}},{key:"componentDidUpdate",value:function(){this.evidenceCacheData&&"complete"===this.evidenceCacheData.status&&this.evidenceCacheData.data&&this.props.onLoadComplete&&this.props.onLoadComplete()}},{key:"evidenceCacheData",get:function(){var e=void 0;if(!this.props.geneNotExist&&this.props.evidenceCache&&this.props.evidenceQuery){var t=this.props.evidenceCache.getData([this.props.evidenceQuery.id],[this.props.evidenceQuery]);t&&(e=t[this.props.evidenceQuery.id])}return e}},{key:"pmidData",get:function(){if(this.props.pubMedCache&&this.evidenceCacheData){var e=(0,h.extractPmids)(this.evidenceCacheData.data),t=!0,n=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=o.value;this.props.pubMedCache.get(i)}}catch(e){n=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}}return this.props.pubMedCache&&this.props.pubMedCache.cache||{}}}]),t}(c.Component);v=g([f.observer],v),t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=o(u),d=n(3),p=o(d),f=n(892),h=r(f),m=n(176),y=n(173),g=r(y),v=n(121);n(964),n(965);var b=function(e){function t(){a(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={activeTab:"oncogenicity",levelsCollapsed:!0},e.handleOncogenicityTabSelect=e.handleOncogenicityTabSelect.bind(e),e.handleMutationEffectTabSelect=e.handleMutationEffectTabSelect.bind(e),e.handleLevelCollapse=e.handleLevelCollapse.bind(e),e}return s(t,e),l(t,null,[{key:"LEVELS",get:function(){return["1","2A","2B","3A","3B","4","R1"]}},{key:"LEVEL_ICON_STYLE",get:function(){return{backgroundImage:"url("+n(966)+")"}}},{key:"LEVEL_DESC",get:function(){return{1:c.createElement("span",null,c.createElement("b",null,"FDA-recognized")," biomarker predictive of response to an ",c.createElement("b",null,"FDA-approved")," drug ",c.createElement("b",null,"in this indication")),"2A":c.createElement("span",null,c.createElement("b",null,"Standard care")," biomarker predictive of response to an ",c.createElement("b",null,"FDA-approved")," drug ",c.createElement("b",null,"in this indication")),"2B":c.createElement("span",null,c.createElement("b",null,"Standard care")," biomarker predictive of response to an ",c.createElement("b",null,"FDA-approved")," drug ",c.createElement("b",null,"in another indication"),", but not standard care for this indication"),"3A":c.createElement("span",null,c.createElement("b",null,"Compelling clinical evidence")," supports the biomarker as being predictive of response to a drug ",c.createElement("b",null,"in this indication"),", but neither biomarker and drug are standard care"),"3B":c.createElement("span",null,c.createElement("b",null,"Compelling clinical evidence")," supports the biomarker as being predictive of response to a drug ",c.createElement("b",null,"in another indication"),", but neither biomarker and drug are standard care"),4:c.createElement("span",null,c.createElement("b",null,"Compelling biological evidence")," supports the biomarker as being predictive of response to a drug, but neither biomarker and drug are standard care"),R1:c.createElement("span",null,c.createElement("b",null,"Standard care")," biomarker predictive of ",c.createElement("b",null,"resistance")," to an ",c.createElement("b",null,"FDA-approved")," drug ",c.createElement("b",null,"in this indication"))}}}]),l(t,[{key:"treatmentRow",value:function(e,n,r,o,a,i,s,l,u){var d=this,p=function(){return c.createElement("div",{style:{maxWidth:"200px"}},r)},f=u.length>0||l.length>0?function(){return c.createElement("div",{style:{maxWidth:"400px",maxHeight:"200px",overflowY:"auto"}},c.createElement("ul",{className:"list-group",style:{marginBottom:0}},d.abstractList(u),d.pmidList(l,s)))}:c.createElement("span",null);return c.createElement("tr",{key:e},c.createElement("td",{key:"level"},c.createElement(g.default,{overlay:p,placement:"left",trigger:["hover","focus"],destroyTooltipOnHide:!0},c.createElement("i",{className:"level-icon level-"+n,style:t.LEVEL_ICON_STYLE}))),c.createElement("td",{key:"alterations"},(0,v.mergeAlterations)(o)),c.createElement("td",{key:"treatment"},a),c.createElement("td",{key:"cancerType"},i),c.createElement("td",{key:"citations"},c.createElement(m.If,{condition:u.length>0||l.length>0},c.createElement(g.default,{overlay:f,placement:"right",trigger:["hover","focus"],destroyTooltipOnHide:!0},c.createElement("i",{className:"fa fa-book"})))))}},{key:"levelListItem",value:function(e,n){return c.createElement("li",{key:e},c.createElement("i",{className:"level-icon level-"+e,style:t.LEVEL_ICON_STYLE}),n)}},{key:"pmidList",value:function(e,t){var n=this,r=[];return t&&e.forEach(function(e){var o=t[e.toString()],a=o?o.data:null;a&&r.push(n.pmidItem(a.title,p.isArray(a.authors)&&a.authors.length>0?a.authors[0].name+" et al.":"Unknown",a.source,new Date(a.pubdate).getFullYear().toString(),a.uid))}),r}},{key:"pmidItem",value:function(e,t,n,r,o){return c.createElement("li",{key:o,className:"list-group-item",style:{width:"100%"}},c.createElement("a",{href:"http://www.ncbi.nlm.nih.gov/pubmed/"+o,target:"_blank"},c.createElement("b",null,e)),c.createElement("br",null),c.createElement("div",{style:{width:"100%"}},t," ",n,". ",r," ",c.createElement("span",{style:{float:"right"}},"PMID: ",o)))}},{key:"abstractList",value:function(e){var t=this,n=[];return e.forEach(function(e,r){n.push(t.abstractItem(r,e.abstract,e.link))}),n}},{key:"abstractItem",value:function(e,t,n){var r=c.createElement("b",null,t);return n&&(r=c.createElement("a",{href:n,target:"_blank"},r)),c.createElement("li",{key:"abstract_"+e,className:"list-group-item",style:{width:"100%"}},r)}},{key:"generateLevelRows",value:function(e,t){var n=this,r=[];return e.forEach(function(e){r.push(n.levelListItem(e,t[e]))}),r}},{key:"generateTreatmentRows",value:function(e,t,n){var r=this,o=[];return e.forEach(function(e,a){o.push(r.treatmentRow(a,e.level,t[e.level],e.variant,e.treatment,e.cancerType,n,e.pmids,e.abstracts))}),o}},{key:"render",value:function(){return c.createElement("div",{className:"oncokb-card","data-test":"oncokb-card"},c.createElement("div",{className:"z-depth-2"},!this.props.geneNotExist&&c.createElement("span",null,c.createElement("div",{className:"item tabs-wrapper"},c.createElement("div",{className:"col s12 tip-header"},this.props.title),c.createElement("div",{className:"col s12"},c.createElement("ul",{className:"tabs"},c.createElement("li",{key:"oncogenicity",className:"tab col s6 enable-hover"},c.createElement("a",{className:"oncogenicity",onClick:this.handleOncogenicityTabSelect},c.createElement("span",{className:"title"},"clinical implications"),c.createElement("span",{className:"title-content"},this.props.oncogenicity||"Unknown"))),c.createElement("li",{key:"mutationEffect",className:"tab col s6 enable-hover"},c.createElement("a",{className:"mutation-effect",onClick:this.handleMutationEffectTabSelect},c.createElement("span",{className:"title"},"Biological Effect"),c.createElement("span",{className:"title-content"},this.props.mutationEffect||"Unknown"))),c.createElement("div",{className:"indicator"}))),c.createElement(m.If,{condition:"oncogenicity"===this.state.activeTab},c.createElement("div",{className:"col s12 oncogenicity"},c.createElement("div",{className:"summary",style:{padding:"10px 0"}},c.createElement("p",null,this.props.geneSummary),c.createElement("p",null,this.insertLink(this.props.variantSummary,{keyword:"Chang et al. 2016",link:"https://www.ncbi.nlm.nih.gov/pubmed/26619011"})),c.createElement("p",null,this.props.tumorTypeSummary)),c.createElement(m.If,{condition:this.props.treatments.length>0},c.createElement("div",{className:"treatments-wrapper"},c.createElement("table",{className:"table",style:{marginTop:6}},c.createElement("thead",null,c.createElement("tr",null,c.createElement("th",{key:"level",scope:"col"},"Level"),c.createElement("th",{key:"alterations",scope:"col"},"Alteration(s)"),c.createElement("th",{key:"drugs",scope:"col"},"Drug(s)"),c.createElement("th",{key:"cancerTypes",scope:"col"},"Level-associated",c.createElement("br",null),"cancer type(s)"),c.createElement("th",{key:"citations",scope:"col"},"Citation(s)"))),c.createElement("tbody",null,this.generateTreatmentRows(this.props.treatments,t.LEVEL_DESC,this.props.pmidData))))))),c.createElement(m.If,{condition:"mutationEffect"===this.state.activeTab},c.createElement("div",{className:"col s12 tab-pane mutation-effect"},c.createElement(m.If,{condition:void 0!==this.props.biologicalSummary&&this.props.biologicalSummary.length>0},c.createElement(m.Then,null,c.createElement("div",null,this.summaryWithRefs(this.props.biologicalSummary,"tooltip"))),c.createElement(m.Else,null,c.createElement(m.If,{condition:this.props.mutationEffectPmids.length>0},c.createElement(m.Then,null,c.createElement("div",{className:"refs"},c.createElement("ul",{className:"list-group",style:{marginBottom:0}},this.pmidList(this.props.mutationEffectPmids,this.props.pmidData)))),c.createElement(m.Else,null,c.createElement("span",null,"Mutation effect information is not available.")))))))),c.createElement("div",{className:"item disclaimer"},c.createElement("span",null,"The information above is intended for research purposes only and should not be used as a substitute for professional diagnosis and treatment.")),c.createElement("div",{className:"item-list levels-wrapper"},c.createElement("div",{className:"collapsible-header",onClick:this.handleLevelCollapse},"Levels",c.createElement("span",{className:"secondary-content"},c.createElement(m.If,{condition:this.state.levelsCollapsed},c.createElement("i",{className:"fa fa-chevron-down"})),c.createElement(m.If,{condition:!this.state.levelsCollapsed},c.createElement("i",{className:"fa fa-chevron-up"})))),c.createElement(h.default,{isOpened:!this.state.levelsCollapsed},c.createElement("div",{className:"levels oncokb-card-levels-collapse"},c.createElement("ul",null,this.generateLevelRows(t.LEVELS,t.LEVEL_DESC)))))),this.props.geneNotExist&&c.createElement("div",{className:"additional-info"},"There is currently no information about this gene in OncoKB."),c.createElement("div",{className:"item footer"},c.createElement("a",{href:"http://oncokb.org/#/gene/"+this.props.gene,target:"_blank"},c.createElement("img",{src:n(967),className:"oncokb-logo",alt:"OncoKB"})),c.createElement("span",{className:"pull-right feedback"},c.createElement("button",{className:"btn btn-default btn-sm",onClick:this.props.handleFeedbackOpen},"Feedback")))))}},{key:"handleOncogenicityTabSelect",value:function(){this.handleTabSelect("oncogenicity")}},{key:"handleMutationEffectTabSelect",value:function(){this.handleTabSelect("mutationEffect")}},{key:"handleTabSelect",value:function(e){this.setState({activeTab:e})}},{key:"handleLevelCollapse",value:function(){this.setState({levelsCollapsed:!this.state.levelsCollapsed})}},{key:"insertLink",value:function(e,t){if(!e)return e;var n=[],r=e.split(t.keyword);n.push(r[0]);for(var o=c.createElement("a",{href:t.link,target:t.target||"_blank"},t.keyword),a=1;a<r.length;a++)n.push(o),n.push(r[a]);return n}},{key:"refComponent",value:function(e,t){var n=this,r=e.split(/pmid|nct/i);if(r.length<2)return null;var o=r[1].match(/[0-9]+/g);if(!o)return null;var a=void 0,i=void 0;e.toLowerCase().indexOf("pmid")>=0?(a="http://www.ncbi.nlm.nih.gov/pubmed/",i="PMID: "):e.toLowerCase().indexOf("nct")>=0&&(a="http://www.ncbi.nlm.nih.gov/pubmed/",i="NCT");var s=void 0;if(a&&i&&(s=c.createElement("a",{target:"_blank",href:""+a+o.join(",")},""+i+o.join(","))),"tooltip"===t){var l=function(){return c.createElement("div",{style:{maxWidth:"400px",maxHeight:"200px",overflowY:"auto"}},c.createElement("ul",{className:"list-group",style:{marginBottom:0}},n.pmidList(o.map(function(e){return parseInt(e)}),n.props.pmidData)))};return c.createElement("span",null,r[0],c.createElement(g.default,{overlay:l,placement:"right",trigger:["hover","focus"],destroyTooltipOnHide:!0},c.createElement("i",{className:"fa fa-book",style:{color:"black"}})),")")}return s?c.createElement("span",null,r[0],s,")"):null}},{key:"summaryWithRefs",value:function(e,t){var n=this;if(!e)return e;var r=[],o=/(\(.*?[PMID|NCT].*?\))/i;return e.split(o).forEach(function(e){if(e.match(o)){var a=n.refComponent(e,t);a&&r.push(a)}else r.push(e)}),r}}]),t}(c.Component);t.default=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),d=r(c),p=n(952),f=n(960),h=r(f),m=function(e){return Math.max(0,parseFloat(e)).toFixed(1)},y=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onHeightReady=function(e){var t=n.props,r=t.isOpened,o=t.onHeightReady;n.renderStatic&&r&&(n.height=m(e)),n.setState({height:r||!n.renderStatic?e:0});var a=r?e:0;n.state.height!==a&&o(a)},n.state={height:-1,isOpenedChanged:!1},n}return s(t,e),u(t,[{key:"componentWillMount",value:function(){this.height=m(0),this.renderStatic=!0}},{key:"componentWillReceiveProps",value:function(e){var t=e.isOpened;this.setState({isOpenedChanged:t!==this.props.isOpened})}},{key:"componentDidUpdate",value:function(e){if(e.isOpened!==this.props.isOpened){var t=this.props.isOpened?this.state.height:0;this.props.onHeightReady(t)}}},{key:"getMotionHeight",value:function(e){var t=this.props,n=t.isOpened,r=t.springConfig,o=t.fixedHeight,a=this.state.isOpenedChanged,i=n?Math.max(0,parseFloat(e)).toFixed(1):m(0),s=!a&&!n||this.height===i&&-1===o,u=(0,p.spring)(n?Math.max(0,e):0,l({precision:.5},r)),c=n?Math.max(0,e):0;return s?c:u}},{key:"renderFixed",value:function(){var e=this,t=this.props,n=(t.springConfig,t.onHeightReady,t.onRest,t.isOpened),r=t.style,a=t.children,i=t.fixedHeight,s=t.keepCollapsedContent,u=o(t,["springConfig","onHeightReady","onRest","isOpened","style","children","fixedHeight","keepCollapsedContent"]);if(this.renderStatic){this.renderStatic=!1;var c={overflow:"hidden",height:n?i:0};return s||n?(this.height=m(i),d.default.createElement("div",l({style:l({},c,r)},u),a)):null}return d.default.createElement(p.Motion,{defaultStyle:{height:n?0:i},style:{height:this.getMotionHeight(i)}},function(t){var o=t.height;if(e.height=m(o),!s&&!n&&e.height===m(0))return null;var i={overflow:"hidden",height:o};return d.default.createElement("div",l({style:l({},i,r)},u),a)})}},{key:"render",value:function(){var e=this,t=this.props,n=(t.springConfig,t.onHeightReady,t.isOpened),r=t.style,a=t.children,i=t.fixedHeight,s=t.keepCollapsedContent,u=t.onRest,c=o(t,["springConfig","onHeightReady","isOpened","style","children","fixedHeight","keepCollapsedContent","onRest"]);if(i>-1)return this.renderFixed();var f=this.renderStatic,y=this.state.height,g=parseFloat(y).toFixed(1);y>-1&&f&&(this.renderStatic=!1);var v=d.default.createElement(h.default,{onHeightReady:this.onHeightReady},a);if(f){var b=n?{height:"auto"}:{overflow:"hidden",height:0};return!n&&y>-1?s?d.default.createElement("div",l({style:l({height:0,overflow:"hidden"},r)},c),v):null:d.default.createElement(p.Motion,{defaultStyle:{height:Math.max(0,y)},style:{height:Math.max(0,y)},onRest:u},function(){return d.default.createElement("div",l({style:l({},b,r)},c),v)})}return d.default.createElement(p.Motion,{defaultStyle:{height:Math.max(0,y)},onRest:u,style:{height:this.getMotionHeight(y)}},function(t){if(e.height=m(t.height),!n&&"0.0"===e.height)return s?d.default.createElement("div",l({style:l({height:0,overflow:"hidden"},r)},c),v):null;var o=n&&e.height===g?{height:"auto"}:{height:t.height,overflow:"hidden"};return d.default.createElement("div",l({style:l({},o,r)},c),v)})}}]),t}(d.default.Component);y.defaultProps={fixedHeight:-1,style:{},keepCollapsedContent:!1,onHeightReady:function(){}},t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e.default:e}t.__esModule=!0;var o=n(953);t.Motion=r(o);var a=n(955);t.StaggeredMotion=r(a);var i=n(956);t.TransitionMotion=r(i);var s=n(958);t.spring=r(s);var l=n(893);t.presets=r(l);var u=n(869);t.stripStyle=r(u);var c=n(959);t.reorderKeys=r(c)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(879),i=r(a),s=n(869),l=r(s),u=n(880),c=r(u),d=n(870),p=r(d),f=n(881),h=r(f),m=n(882),y=r(m),g=n(1),v=r(g),b=n(2),_=r(b),w=n(35),x=r(w),S=x.default({propTypes:{defaultStyle:_.default.objectOf(_.default.number),style:_.default.objectOf(_.default.oneOfType([_.default.number,_.default.object])).isRequired,children:_.default.func.isRequired,onRest:_.default.func},getInitialState:function(){var e=this.props,t=e.defaultStyle,n=e.style,r=t||l.default(n),o=i.default(r);return{currentStyle:r,currentVelocity:o,lastIdealStyle:r,lastIdealVelocity:o}},wasAnimating:!1,animationID:null,prevTime:0,accumulatedTime:0,unreadPropStyle:null,clearUnreadPropStyle:function(e){var t=!1,n=this.state,r=n.currentStyle,a=n.currentVelocity,i=n.lastIdealStyle,s=n.lastIdealVelocity;for(var l in e)if(Object.prototype.hasOwnProperty.call(e,l)){var u=e[l];"number"==typeof u&&(t||(t=!0,r=o({},r),a=o({},a),i=o({},i),s=o({},s)),r[l]=u,a[l]=0,i[l]=u,s[l]=0)}t&&this.setState({currentStyle:r,currentVelocity:a,lastIdealStyle:i,lastIdealVelocity:s})},startAnimationIfNecessary:function(){var e=this;this.animationID=h.default(function(t){var n=e.props.style;if(y.default(e.state.currentStyle,n,e.state.currentVelocity))return e.wasAnimating&&e.props.onRest&&e.props.onRest(),e.animationID=null,e.wasAnimating=!1,void(e.accumulatedTime=0);e.wasAnimating=!0;var r=t||p.default(),o=r-e.prevTime;if(e.prevTime=r,e.accumulatedTime=e.accumulatedTime+o,e.accumulatedTime>1e3/60*10&&(e.accumulatedTime=0),0===e.accumulatedTime)return e.animationID=null,void e.startAnimationIfNecessary();var a=(e.accumulatedTime-Math.floor(e.accumulatedTime/(1e3/60))*(1e3/60))/(1e3/60),i=Math.floor(e.accumulatedTime/(1e3/60)),s={},l={},u={},d={};for(var f in n)if(Object.prototype.hasOwnProperty.call(n,f)){var h=n[f];if("number"==typeof h)u[f]=h,d[f]=0,s[f]=h,l[f]=0;else{for(var m=e.state.lastIdealStyle[f],g=e.state.lastIdealVelocity[f],v=0;v<i;v++){var b=c.default(1e3/60/1e3,m,g,h.val,h.stiffness,h.damping,h.precision);m=b[0],g=b[1]}var _=c.default(1e3/60/1e3,m,g,h.val,h.stiffness,h.damping,h.precision),w=_[0],x=_[1];u[f]=m+(w-m)*a,d[f]=g+(x-g)*a,s[f]=m,l[f]=g}}e.animationID=null,e.accumulatedTime-=i*(1e3/60),e.setState({currentStyle:u,currentVelocity:d,lastIdealStyle:s,lastIdealVelocity:l}),e.unreadPropStyle=null,e.startAnimationIfNecessary()})},componentDidMount:function(){this.prevTime=p.default(),this.startAnimationIfNecessary()},componentWillReceiveProps:function(e){null!=this.unreadPropStyle&&this.clearUnreadPropStyle(this.unreadPropStyle),this.unreadPropStyle=e.style,null==this.animationID&&(this.prevTime=p.default(),this.startAnimationIfNecessary())},componentWillUnmount:function(){null!=this.animationID&&(h.default.cancel(this.animationID),this.animationID=null)},render:function(){var e=this.props.children(this.state.currentStyle);return e&&v.default.Children.only(e)}});t.default=S,e.exports=t.default},function(e,t,n){e.exports=n(6)(596)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){for(var r=0;r<e.length;r++)if(!g.default(e[r],t[r],n[r]))return!1;return!0}t.__esModule=!0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(879),s=r(i),l=n(869),u=r(l),c=n(880),d=r(c),p=n(870),f=r(p),h=n(881),m=r(h),y=n(882),g=r(y),v=n(1),b=r(v),_=n(2),w=r(_),x=n(35),S=r(x),C=S.default({propTypes:{defaultStyles:w.default.arrayOf(w.default.objectOf(w.default.number)),styles:w.default.func.isRequired,children:w.default.func.isRequired},getInitialState:function(){var e=this.props,t=e.defaultStyles,n=e.styles,r=t||n().map(u.default),o=r.map(function(e){return s.default(e)});return{currentStyles:r,currentVelocities:o,lastIdealStyles:r,lastIdealVelocities:o}},animationID:null,prevTime:0,accumulatedTime:0,unreadPropStyles:null,clearUnreadPropStyle:function(e){for(var t=this.state,n=t.currentStyles,r=t.currentVelocities,o=t.lastIdealStyles,i=t.lastIdealVelocities,s=!1,l=0;l<e.length;l++){var u=e[l],c=!1;for(var d in u)if(Object.prototype.hasOwnProperty.call(u,d)){var p=u[d];"number"==typeof p&&(c||(c=!0,s=!0,n[l]=a({},n[l]),r[l]=a({},r[l]),o[l]=a({},o[l]),i[l]=a({},i[l])),n[l][d]=p,r[l][d]=0,o[l][d]=p,i[l][d]=0)}}s&&this.setState({currentStyles:n,currentVelocities:r,lastIdealStyles:o,lastIdealVelocities:i})},startAnimationIfNecessary:function(){var e=this;this.animationID=m.default(function(t){var n=e.props.styles(e.state.lastIdealStyles);if(o(e.state.currentStyles,n,e.state.currentVelocities))return e.animationID=null,void(e.accumulatedTime=0);var r=t||f.default(),a=r-e.prevTime;if(e.prevTime=r,e.accumulatedTime=e.accumulatedTime+a,e.accumulatedTime>1e3/60*10&&(e.accumulatedTime=0),0===e.accumulatedTime)return e.animationID=null,void e.startAnimationIfNecessary();for(var i=(e.accumulatedTime-Math.floor(e.accumulatedTime/(1e3/60))*(1e3/60))/(1e3/60),s=Math.floor(e.accumulatedTime/(1e3/60)),l=[],u=[],c=[],p=[],h=0;h<n.length;h++){var m=n[h],y={},g={},v={},b={};for(var _ in m)if(Object.prototype.hasOwnProperty.call(m,_)){var w=m[_];if("number"==typeof w)y[_]=w,g[_]=0,v[_]=w,b[_]=0;else{for(var x=e.state.lastIdealStyles[h][_],S=e.state.lastIdealVelocities[h][_],C=0;C<s;C++){var k=d.default(1e3/60/1e3,x,S,w.val,w.stiffness,w.damping,w.precision);x=k[0],S=k[1]}var E=d.default(1e3/60/1e3,x,S,w.val,w.stiffness,w.damping,w.precision),M=E[0],A=E[1];y[_]=x+(M-x)*i,g[_]=S+(A-S)*i,v[_]=x,b[_]=S}}c[h]=y,p[h]=g,l[h]=v,u[h]=b}e.animationID=null,e.accumulatedTime-=s*(1e3/60),e.setState({currentStyles:c,currentVelocities:p,lastIdealStyles:l,lastIdealVelocities:u}),e.unreadPropStyles=null,e.startAnimationIfNecessary()})},componentDidMount:function(){this.prevTime=f.default(),this.startAnimationIfNecessary()},componentWillReceiveProps:function(e){null!=this.unreadPropStyles&&this.clearUnreadPropStyle(this.unreadPropStyles),this.unreadPropStyles=e.styles(this.state.lastIdealStyles),null==this.animationID&&(this.prevTime=f.default(),this.startAnimationIfNecessary())},componentWillUnmount:function(){null!=this.animationID&&(m.default.cancel(this.animationID),this.animationID=null)},render:function(){var e=this.props.children(this.state.currentStyles);return e&&b.default.Children.only(e)}});t.default=C,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){var r=t;return null==r?e.map(function(e,t){return{key:e.key,data:e.data,style:n[t]}}):e.map(function(e,t){for(var o=0;o<r.length;o++)if(r[o].key===e.key)return{key:r[o].key,data:r[o].data,style:n[t]};return{key:e.key,data:e.data,style:n[t]}})}function a(e,t,n,r){if(r.length!==t.length)return!1;for(var o=0;o<r.length;o++)if(r[o].key!==t[o].key)return!1;for(var o=0;o<r.length;o++)if(!w.default(e[o],t[o].style,n[o]))return!1;return!0}function i(e,t,n,r,o,a,i,s,l){for(var c=m.default(r,o,function(e,r){var o=t(r);return null==o?(n({key:r.key,data:r.data}),null):w.default(a[e],o,i[e])?(n({key:r.key,data:r.data}),null):{key:r.key,data:r.data,style:o}}),d=[],p=[],f=[],h=[],y=0;y<c.length;y++){for(var g=c[y],v=null,b=0;b<r.length;b++)if(r[b].key===g.key){v=b;break}if(null==v){var _=e(g);d[y]=_,f[y]=_;var x=u.default(g.style);p[y]=x,h[y]=x}else d[y]=a[v],f[y]=s[v],p[y]=i[v],h[y]=l[v]}return[c,d,p,f,h]}t.__esModule=!0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=n(879),u=r(l),c=n(869),d=r(c),p=n(880),f=r(p),h=n(957),m=r(h),y=n(870),g=r(y),v=n(881),b=r(v),_=n(882),w=r(_),x=n(1),S=r(x),C=n(2),k=r(C),E=n(35),M=r(E),A=M.default({propTypes:{defaultStyles:k.default.arrayOf(k.default.shape({key:k.default.string.isRequired,data:k.default.any,style:k.default.objectOf(k.default.number).isRequired})),styles:k.default.oneOfType([k.default.func,k.default.arrayOf(k.default.shape({key:k.default.string.isRequired,data:k.default.any,style:k.default.objectOf(k.default.oneOfType([k.default.number,k.default.object])).isRequired}))]).isRequired,children:k.default.func.isRequired,willEnter:k.default.func,willLeave:k.default.func,didLeave:k.default.func},getDefaultProps:function(){return{willEnter:function(e){return d.default(e.style)},willLeave:function(){return null},didLeave:function(){}}},getInitialState:function(){var e=this.props,t=e.defaultStyles,n=e.styles,r=e.willEnter,o=e.willLeave,a=e.didLeave,s="function"==typeof n?n(t):n,l=void 0;l=null==t?s:t.map(function(e){for(var t=0;t<s.length;t++)if(s[t].key===e.key)return s[t];return e});var c=null==t?s.map(function(e){return d.default(e.style)}):t.map(function(e){return d.default(e.style)}),p=null==t?s.map(function(e){return u.default(e.style)}):t.map(function(e){return u.default(e.style)}),f=i(r,o,a,l,s,c,p,c,p),h=f[0];return{currentStyles:f[1],currentVelocities:f[2],lastIdealStyles:f[3],lastIdealVelocities:f[4],mergedPropsStyles:h}},unmounting:!1,animationID:null,prevTime:0,accumulatedTime:0,unreadPropStyles:null,clearUnreadPropStyle:function(e){for(var t=i(this.props.willEnter,this.props.willLeave,this.props.didLeave,this.state.mergedPropsStyles,e,this.state.currentStyles,this.state.currentVelocities,this.state.lastIdealStyles,this.state.lastIdealVelocities),n=t[0],r=t[1],o=t[2],a=t[3],l=t[4],u=0;u<e.length;u++){var c=e[u].style,d=!1;for(var p in c)if(Object.prototype.hasOwnProperty.call(c,p)){var f=c[p];"number"==typeof f&&(d||(d=!0,r[u]=s({},r[u]),o[u]=s({},o[u]),a[u]=s({},a[u]),l[u]=s({},l[u]),n[u]={key:n[u].key,data:n[u].data,style:s({},n[u].style)}),r[u][p]=f,o[u][p]=0,a[u][p]=f,l[u][p]=0,n[u].style[p]=f)}}this.setState({currentStyles:r,currentVelocities:o,mergedPropsStyles:n,lastIdealStyles:a,lastIdealVelocities:l})},startAnimationIfNecessary:function(){var e=this;this.unmounting||(this.animationID=b.default(function(t){if(!e.unmounting){var n=e.props.styles,r="function"==typeof n?n(o(e.state.mergedPropsStyles,e.unreadPropStyles,e.state.lastIdealStyles)):n;if(a(e.state.currentStyles,r,e.state.currentVelocities,e.state.mergedPropsStyles))return e.animationID=null,void(e.accumulatedTime=0);var s=t||g.default(),l=s-e.prevTime;if(e.prevTime=s,e.accumulatedTime=e.accumulatedTime+l,e.accumulatedTime>1e3/60*10&&(e.accumulatedTime=0),0===e.accumulatedTime)return e.animationID=null,void e.startAnimationIfNecessary();for(var u=(e.accumulatedTime-Math.floor(e.accumulatedTime/(1e3/60))*(1e3/60))/(1e3/60),c=Math.floor(e.accumulatedTime/(1e3/60)),d=i(e.props.willEnter,e.props.willLeave,e.props.didLeave,e.state.mergedPropsStyles,r,e.state.currentStyles,e.state.currentVelocities,e.state.lastIdealStyles,e.state.lastIdealVelocities),p=d[0],h=d[1],m=d[2],y=d[3],v=d[4],b=0;b<p.length;b++){var _=p[b].style,w={},x={},S={},C={};for(var k in _)if(Object.prototype.hasOwnProperty.call(_,k)){var E=_[k];if("number"==typeof E)w[k]=E,x[k]=0,S[k]=E,C[k]=0;else{for(var M=y[b][k],A=v[b][k],T=0;T<c;T++){var O=f.default(1e3/60/1e3,M,A,E.val,E.stiffness,E.damping,E.precision);M=O[0],A=O[1]}var P=f.default(1e3/60/1e3,M,A,E.val,E.stiffness,E.damping,E.precision),j=P[0],I=P[1];w[k]=M+(j-M)*u,x[k]=A+(I-A)*u,S[k]=M,C[k]=A}}y[b]=S,v[b]=C,h[b]=w,m[b]=x}e.animationID=null,e.accumulatedTime-=c*(1e3/60),e.setState({currentStyles:h,currentVelocities:m,lastIdealStyles:y,lastIdealVelocities:v,mergedPropsStyles:p}),e.unreadPropStyles=null,e.startAnimationIfNecessary()}}))},componentDidMount:function(){this.prevTime=g.default(),this.startAnimationIfNecessary()},componentWillReceiveProps:function(e){this.unreadPropStyles&&this.clearUnreadPropStyle(this.unreadPropStyles);var t=e.styles;this.unreadPropStyles="function"==typeof t?t(o(this.state.mergedPropsStyles,this.unreadPropStyles,this.state.lastIdealStyles)):t,null==this.animationID&&(this.prevTime=g.default(),this.startAnimationIfNecessary())},componentWillUnmount:function(){this.unmounting=!0,null!=this.animationID&&(b.default.cancel(this.animationID),this.animationID=null)},render:function(){var e=o(this.state.mergedPropsStyles,this.unreadPropStyles,this.state.currentStyles),t=this.props.children(e);return t&&S.default.Children.only(t)}});t.default=A,e.exports=t.default},function(e,t,n){"use strict";function r(e,t,n){for(var r={},o=0;o<e.length;o++)r[e[o].key]=o;for(var a={},o=0;o<t.length;o++)a[t[o].key]=o;for(var i=[],o=0;o<t.length;o++)i[o]=t[o];for(var o=0;o<e.length;o++)if(!Object.prototype.hasOwnProperty.call(a,e[o].key)){var s=n(o,e[o]);null!=s&&i.push(s)}return i.sort(function(e,n){var o=a[e.key],i=a[n.key],s=r[e.key],l=r[n.key];if(null!=o&&null!=i)return a[e.key]-a[n.key];if(null!=s&&null!=l)return r[e.key]-r[n.key];if(null!=o){for(var u=0;u<t.length;u++){var c=t[u].key;if(Object.prototype.hasOwnProperty.call(r,c)){if(o<a[c]&&l>r[c])return-1;if(o>a[c]&&l<r[c])return 1}}return 1}for(var u=0;u<t.length;u++){var c=t[u].key;if(Object.prototype.hasOwnProperty.call(r,c)){if(i<a[c]&&s>r[c])return 1;if(i>a[c]&&s<r[c])return-1}}return-1})}t.__esModule=!0,t.default=r,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){return o({},s,t,{val:e})}t.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=r;var a=n(893),i=function(e){return e&&e.__esModule?e:{default:e}}(a),s=o({},i.default.noWobble,{precision:.01});e.exports=t.default},function(e,t,n){"use strict";function r(){}t.__esModule=!0,t.default=r;e.exports=t.default},function(e,t,n){"use strict";var r=n(961).default;e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(1),s=r(i),l=n(2),u=r(l),c=n(35),d=r(c),p=n(962),f=function(e){return e.clientHeight},h=(0,d.default)({propTypes:{children:u.default.node.isRequired,onHeightReady:u.default.func.isRequired,hidden:u.default.bool,dirty:u.default.bool,getElementHeight:u.default.func},getDefaultProps:function(){return{hidden:!1,dirty:!0,getElementHeight:f}},getInitialState:function(){return{height:0,dirty:this.props.dirty}},componentDidMount:function(){var e=this,t=this.props.getElementHeight(this.wrapper);this.setState({height:t,dirty:!1},function(){return e.props.onHeightReady(e.state.height)})},componentWillReceiveProps:function(e){var t=e.children,n=e.dirty;(t!==this.props.children||n)&&this.setState({dirty:!0})},shouldComponentUpdate:p.shouldComponentUpdate,componentDidUpdate:function(){var e=this,t=this.props.getElementHeight(this.wrapper);t===this.state.height?this.setState({dirty:!1}):this.setState({height:t,dirty:!1},function(){return e.props.onHeightReady(e.state.height)})},setWrapperRef:function(e){this.wrapper=e},render:function(){var e=this.props,t=(e.onHeightReady,e.getElementHeight,e.dirty,e.hidden),n=e.children,r=o(e,["onHeightReady","getElementHeight","dirty","hidden","children"]),i=this.state.dirty;return t&&!i?null:t?s.default.createElement("div",{style:{height:0,overflow:"hidden"}},s.default.createElement("div",a({ref:this.setWrapperRef},r),n)):s.default.createElement("div",a({ref:this.setWrapperRef},r),n)}});t.default=h},function(e,t,n){"use strict";var r=n(963),o={shouldComponentUpdate:function(e,t){return r(this,e,t)}};e.exports=o},function(e,t,n){"use strict";function r(e,t,n){return!o(e.props,t)||!o(e.state,n)}var o=n(868);e.exports=r},function(e,t){},function(e,t){},function(e,t,n){e.exports=n.p+"reactapp/images/34306b402bf488d807a92babe7055d39.png"},function(e,t,n){e.exports=n.p+"reactapp/images/ac30afc0653ff15c1ea9fd9cbae0414a.png"},function(e,t,n){e.exports=n.p+"reactapp/images/069a019b10e7aa07f55618e44ea3e787.png"},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=r(l);n(970);var c=n(3),d=r(c),p=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return i(t,e),s(t,[{key:"generateVariants",value:function(e){var t=[];if(e)if(d.isEmpty(e))t.push(this.variantItem());else for(var n in e){var r=e[n],o="";for(var a in r.evidence)o+=a.toLowerCase()+": "+r.evidence[a]+", ";o=o.slice(0,-2)+".",t.push(this.variantItem(r.url,r.name,o,r.description))}else t.push(this.variantItem());return t}},{key:"variantItem",value:function(e,t,n,r){return e||t||n||r?u.createElement("div",{className:"civic-card-variant"},u.createElement("div",{className:"civic-card-variant-header"},u.createElement("span",{className:"civic-card-variant-name"},u.createElement("a",{href:e,target:"_blank"},t)),u.createElement("span",{className:"civic-card-variant-entry-types"}," Entries: ",n)),u.createElement("div",{className:"civic-card-variant-description summary"},r)):u.createElement("div",{className:"civic-card-variant"},u.createElement("div",{className:"civic-card-variant-description summary"},"Information about the oncogenic activity of this alteration is not yet available in CIViC."))}},{key:"render",value:function(){return u.createElement("div",{className:"civic-card"},u.createElement("span",null,u.createElement("div",{className:"col s12 tip-header"},this.props.title),u.createElement("div",{className:"col s12 civic-card-content"},u.createElement("div",{className:"col s12 civic-card-gene"},u.createElement("p",null,u.createElement("span",{className:"civic-card-gene-name"},u.createElement("a",{href:this.props.geneUrl,target:"_blank"},u.createElement("b",null,this.props.geneName)))," - ",this.props.geneDescription)),u.createElement("div",{className:"col s12"},u.createElement("ul",null,this.generateVariants(this.props.variants))),u.createElement("div",{className:"item disclaimer"},u.createElement("span",null,"Disclaimer: This resource is intended for purely research purposes. It should not be used for emergencies or medical or professional advice.")))),u.createElement("div",{className:"item footer"},u.createElement("a",{href:this.props.geneUrl,target:"_blank"},u.createElement("img",{src:n(971),className:"civic-logo",alt:"CIViC"}))))}}]),t}(u.Component);t.default=p},function(e,t){},function(e,t,n){e.exports=n.p+"reactapp/images/71fb7f0a5b1cf694468e7ba7e69bd939.png"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4QETDRgRjnOYvgAAFfVJREFUeNrlW3mUVNWd/u6979XSCxRNA9INCIgii0TBqAi4EKISxTVRnKgxLkedyGQkxiTujkYxaswomkSdxETjIUhYXVDMSNTYqElABQZbAQVBoOnq7lreu/udP97romibpRUyMVN93qk6VW+53/fbf7/bwP/zF/l7P7Ai0QvDMsf7dXTM4Opkv68CJFOQmxZvlx+sagxfDrcHH/zzEnBC7bQeI2unLqtO1B/i0RScE3BwcA6QJoe8asL67JIRr7Q9tJqr/D8PASk/g7Pqf3HRoO7jf+MRCus0aPxwBwfrNIxTsM5CO4NNheXzl4a3nLNl23r7T0HA+Qc+ceOQmpNvhw3BiIcE9eGBwcFBOQPtFIxV0I5DmRAGwJZgDRY2XUmLxZzbn2tj+xv8xD7TDxrV66L5sAE86qOCplFdU4HKnikwyuAkYCM9AAA4Z2EcR9LLoEp342uD117bn+uj+/Pm1RUZMqLmvA/gOAihSBAfqe5JpHsmkaxMwEt6oKCgICCEgYCAEg8UDMRJ9K4ac1f/nod6X1gCDqs6s3eFXwtnFSgIKKGgDrChhSpqWGlBABCQki0SAIRQAA4JVonB9oSLv7AE9EuOuxNuhx8zzkLkJYpNHLKoQD2HZA+KJCPwYhIcykzeKXRL9n80XVFNvnAEeF6CpL3upzqn0G7l2mlwq6CkAjyDRA1BZZ2HinoPHmuHb+CcBpyFcwaUpFCVzLAvGgGkMlVNCPH7GCtgnYF1CtYpaKdgnQZJOiSqAL8C8CocSFLDxb9Zp6GdhLUClHio9DLJ/RWx9oeDIQAghIYwOVhnYJwCdTu41hbQikAIgHmAkhJaRaHQWAXjFLSVcDCwToNrbsru7f5RCdhJQly1uaLKNmonDiHWgIDAIw4gDpJoBNsNDBQoA3ieg4ccyikYJ6JcwHI4Z2GdRFE0606e4/6RCOhUPbeJ5Tf31sNngSWjFRMDRj1YR+G4gtxEAWYhlYKwHMpySBNCOwEHCw2HQDU1FsIWs4tnuv9rH0B2Z5tr7dKFObkFykpoK2L7bk97HJxzgGtPh22ZrzCwVkFajo30jdOcc/stk6X7WurlxDS1bBCbcw1PKmdLmV4U81mUElf68KujtDiK/YiLIw0NICc+xtrssnV7IJp8HiLoPgb/qcUsV09c1srXw4HCwZTOIiBgSQaW8naAd7akJYHJYY2Z09cY47pA+t+FALKX3xMApFgsmlXy90cHlsO58jSHgPkeEkkvMmbnYGITkHD4JGy4f0Pz/2zvhFTShTXscwL25sHlCyQAsGbb0uWb2l593RIG50xEAiGgCQovFRXGFu3SB3J8I1YU51zf4d6dEfG5SaD7AXz5YkuLbhAPntrCP4ID4BxgHcAoA/MZLByM09BOoGjyWGWeGsU5N53dZ1+TQPcT+I7vNNfWGq7MPfUNDbuzqlDEpFhY57At/7f565vebtwF6H1Owi4JqKmpIYMGDSGZTKYrar+rAwBIs/zwbWclCCGx0wPgdlSCIAwB3b50T/fZlyTslAil02l86/xLK8/9xjcvPGjg4O8kU+mRhWKh8b3GNQ8+9vjPn1j03Lyc1nqPNt/JdwQAGE1Wguy8po6OkRDrlV2zu0THdTin9Ll//4Hs9K+d0XP8+ImTajM9Dm7NtXz8zqoVLy5ZsnjTsrcaTKcEHD7qy+SXMx+776gJo64p/WqBPqg+5KChfR885aQTH3ztzw2/uvDyqf+6YcMGtZfgafl3johI6u1r/hQ8C+OMjq9znYDd1ecSCVdfeU2/a797/Ud9etWCCwVjNRgBJk08GZd+60o8/YdZR19/y7VvKqV2LLCurg6LF7yUPWrCqGsigyxbPgWgAauB48aNveT5+X/kvXr18vcAnsRXlr8TDU3b5e0ifqNMMM4OnZWwhprd3WM3Wob77p456bYbZ3yU8Hx8sm0rcoUWFIM8coUctjc3QSmJC86/8I1fP/LEd3fyAT+b8fPz+gzsloHdRZRNAZ4HFAoSQwYPwZ23333PXnj+jmRQy2QpCrSz4DqoggHnZdR3Br7TcHjB1IsPPf+cC1/IZrdDaoGE78NnPnzPA6UUHqOw2mBb01Yce8z4n93wgxuPAQA6btxx9KwzTp8FtYeYwADP99CWa8GEY4+bduToI2t3A552BA+AEo2oF0DipNe5WPo7tMASIcuv2RsHW1lZ6V1/3a2rtNVIp1NIpdJI+D48j4FSBsaid8KiqLM9ux0nTTq5YcSIEYyee9b5o71KAGYv+sfOwliDZMLHlNOmXLUb8OgEBFXap87JMsu2sfBdqRlmqDSdELhLAlKpFPuvmU9e07dPX6QSSaTTaSQTCXgJD8zzQBkBoQAh8QHAaAXqUUyaOOkIOqBf/TgT7l1haZ2DsxYhDzBw4MArd6OaHdWXRe+8NAlqD4NRFIirQwDWKV12ze40ARNPOLnvG0vf/cs5Z595F2UE6XQKCT8Bz6PwWQSelkKuLXuehRAcNTU1x9NiEBSdBbQCoHaD3gBKKyglUAyKqKmp6TN69Oghu7F/2uHwLLW0vbR1kfeLzWDHYxQNTRydOvqBEgmDBg2umPnTx65+fv7iD0eNGjJSKhfZfILB86IDsdQjR2OB9gmU0dBaQkkJP+HXe9uy2z4QSgEOIPDBSCdtEgdIbhGKAgpBAUpJCCFw3rlT/7x69er+HdJWugsfQJxTsZzdDg2Iw180EFEwZkf2uFN8BEh1dSZ56YWXjb/t5rvnd6ulMMVIcKlkJGVro6u0Lo+T8b2thtEaykgIKQAAUshNtHHN6lW5XCuKQR6hkNBFB/AykzCAzlm05VuRL+QgJYcUEm25NtT17Zu54Uc3PrULSdFPHyoOg2SHxbU7QVgYE8IJis7uccHUi49Y3rDmg/tn3jO/W3cKcIAlAC8BUA+gLDocQUnDrDWw1kJbDa01lJYQIoRWCsxnyG7PrqCz587evn7DOnARIlfIoq2YR6EtBM9K8GaJtqY8tjVvRWsuCy5CGGvRmm+NxlrWYfiwYVNuv/Wu73fiAzraL7MwcGUOoH2BUeNUwzqFUBdQZv9kyuQzhr/8fMPCJ37365cPGt4nAxH/mgLglxlL/GTiEHWUjInU3WgorSCVABcBlI7snHOOt5a/tYxms1n3h7mzTwx5Ea1tLWhpbcL21m3Ylt2CLds/QVN2K/LFHLRW0FqjOdsMKSQqKyuRSqaglcIxRx91y803/sePO5E8KXdoBlEYdDAl1VRGQlsJayUCU0RWbmoCQI4bd9yBT/92wSMLn5m/9IRTjjkWJtbKduBsZ+CxS4GJCdVWQRsFrQSE4BF4pWCMQSKZwOZPNvOGhobAA4DHn3z8T2OPHYu6vnVI+AkkE0kwFnsRR2C0QsBD5PI5cMGRTqdj5+VgjAHnASZ/dfK0XjU9e99w2w3X5dpawzIySku1gsE5EfX/oKG1AnES2nFsFJuxvtjIRx9x9GHnXTD5xOnTpt8Cvz1djEHvqiKw0WGMiyUuoZSElBKhCGPwEkZHGqiUwmO/eqzPTkXNlClTBlx95dUfWWORTqfgeT4IIXDOQcY3gwMooyXwzkbNTEIokokUevaoxdamJj79e/82btV7Kz/pGMoqk736fL3uoddr00PACEG3mgTa8nm827wG1TbXevYNIzD1qomZve5Q2Dh/0YCWDjJW9UjdBcKwgJCHkDJaPxccjDHMXTD3nJkPzZy303i8sbGxbeTIkT3r6+uPLhaD2GlEah+Nujwwj0UDTkrBKAOl8WfmwfcSMEajZ02td8bpZ12Ry7WtWrn63fVlWsASLFFxaPXXLq3wMgitwtZ8K2iyjZ80ta7ww8dPSY05bmhVl/pTJnbSChF4zSGkgAhDBLwIISW0VhEBKirDG95ouGvGT2Y81Gm9nMlk6KO/eNRkumeglILv+2CUgVBSquHbO7ulIGMdCAh8PwGP+SCUIuGnUFFRiSUvLV508x033drc3NQGgKUrqnuf2euhV6XXG8QJfvzJtfzs7x+cqhvUK9XlzqQFIAEtAaEkpOLgPEDIQwjJoZWCVAqccxhjYKzBC0temHbf/fc9rLV2u2xkDh06NHnn7XeG1VXVsNZGkmc7JF86sZRhORBCwKgHz/NBiQcQgBKKyspqZFuymHHvHZfPXzj3VQBsTO87Vp02+ESceltd65hJA1KU0q6DdwAEoIUFVxxcROCFFJCx1IWMchUQIJvNYvac2WOefOrJFR1z3o5TV9Lc3Gw+2vDRz8YdO+6HyUQSWuuSuhNCSmpPCS2RQgkFZV5EConST0IIhBSoqqzCSZMmn96nb22vte9v3HzVhReO/cGsSZn6gzIpQoj3WcELrhGIIgIegPMiuIgdn9Lggkfx32i8s/Kd12fcM2PkH//7jxv2tpUNABg7dmyP6d+d3lzTowbGGPieD8ZYSRsIjTY8uLimJaSdIAYS56GUeDBWIygG6F7dGwcPGQivm+Ge53Vd6rHNWw6EnCPkAbgIIaWI/JVUEFLAxLnFho83YNbTs8Y899xz73DObQcK90wAADJixIiqW2+6ta1nTc+IBOaD+WwnjQAAZxxACShhMQlRr18qCaOA2p59MXhAPbwen2MOpQAZaARhgFAUoaSEVCoGL6GtgTEGW7ZuweIli6fOfnr2wqamJrmLQarbKwIAoL6+Pvm9a77368NHHX5eexj0PA+MsLIqMapgGfNBCYGzgJQCyWQV+vcdiAPqu0UJzGd5WcCEFmHAUeQFSCmgYuBSSjhrYZzF5i2b8eJLL14+b/68ORs2bCiWauzPSwAA4vs+vfyyy88/47QzfpNOpWGMAWNRdEB7iekcPM+HMRpKGfTsUY8hAw9CZU/6mfeiOQ6IIkchCMBVAK0VlNZQUkfps7HY1rQVC55ZMG3hooW/37hxY64sddp3BLQf48ePH3jFZVe82a++X8a0l22ElG7HRQhGExg8YAQGH1gHVoXPBl4CPBAIggChCGC0hlQKSqtS9vnxpo8xd/7cq5557pl5W7ZsyZUB3mcEoLNGR01NTeLbF3/72q+c8JVbEokEpJSglCKfb0XCr8IRh41F//qaSOW7Cl4DsqhQDIoIRQCtYolrBUY9cBFi3fp1fNbTs6YtWbLk2eZsc2FHIlwCbjsB/rkJQMcW1ejRowdfdMG3fnvIkIPHbG/ehky3Pjh6zAT07lMZAfe7CDxQCIph5OC0hNYGSikEYRFCCrzX+F7jH+bN/fHSPy19OZ/PF8oS4bJqoCR114kWdDkK7LHd7XmeN2bMEaOnX/3Dead8dUqmWzc/+mVvtzRpQBc1imGAgAdQWsIYA60NWnNZtLRkobTFI489cvnCRQuejUHqMsCfmwD2GQgoaYW1Fs6geN9PHvhOJpNKlao2uhsCXBzSChqFXAG5YhsCXizF89a2LD7cuB651gIq0z3Qp3YAYPHJ2g/XNmazzfkyoHYPQPfqxT7jtJcAIHUH1Hd7f+XGzd0yiZQRUWdm51lQh9xdRLG8kC8gHwMXUkAKCZpWaAubsWH9FtR0OwBDBh+GA2rr4HkMXzrsiCMv+uYlV1hrtvzlb2+udM7prkp6XxLQ7v3ZijdWL+/dr3uG54GE30kXz+7I3mSoUCwUPwXcMgGRaMHrL67k8x95ozDu+PE46stjPI8moI0GpYCxGh5lmDRx8kkTjp1w4lt/XfZ8NpstdqLye5NI75s9Qr984Fc3DB5af2CxxcDzYhdsdtTnkIDmDrwokSvk0JJrQVuhFUEYgIdRE0Slt2PN++/x3928onXmTW/jb681pyq6JVAIC5BaIplKIpVKI5WsAGVRFBg39vgxixcsbTxp0inD98Uusc9kAl85buKB/3n//bNzLTLqHFEC4kjkkbSDMgZSaoQiQDEoIORFCMEhpYy2yVbnsWHzh/zl335cePXhQK9b52UYoV6vSqLHTD4QFam0RxxAKQMlBJQRMBbtK9dKoaqyGlNOPfOyllz2zeUr/rq2KxLvKgGd2v+cp55t7NG9Z0oZBUoJiLOwsDDaQJm4AcmLcQjjkFJDCAlCHFSyBX9auKp14Q+yesP7mVR3UltVRX0oK+ERoUd/rR/SFRWec5GTjRqdBISSqBijBNoaJPwETpo4eaqy+t2GZa+9txfO0O1xf8DeMPn1M88bPHTo0Ey+mIPneTAmjkXEwBoLrSWEElBKQhsNraLeH2UUK9et+GjBI2+t+3jFoLE9Uv1TByYzSPbw0NYEeDQFDz6MVVBKwmnA6KjASfoJMOdHGsEIPEqhjQYIwU3X3jxr3foPJsxfMOfNfbVLbHdqQy675Mo5RmtYY2GNhTIKSnMIwRGEBRSCIkIeRD04HrWouBB49oVFi/7l3EumLH7prRf7pPqnerMq+DQJn6Tg0xQ86oNSCm1kpDVKwlgNIQVCySFkCG0UjLawACilUevbOcy89xevHjzk4B5djQBd0QAAwMgRI9PDDhk2si3XAs+jUMYAJsrNjZIQRsb9eAchOZx1UFrh7p/efe28efPmA6C90rV1FTQFSn34rAI+88CIBIEH5rMU1wUUCwVUpCicAxil8VQnCeuAhGcBRINPxjxIFXWpH3348Q9PPHl8d+dcZ+mv2yfb5IYPO6xvIulDGwmlIlWVQiDkAQIRQsV9uCAsRklNrhXX/ei6C+bNmzenPXnxkjqgxIukDx8M0UZJn3pozm1ZuWLlX1bmii0IwjwKhRxCzsF5lCKHYQghZdT7Nw6ERM3aMAwxbOjI1NlTzhm1X/cJjvnSkRNKHRgTdWACHkRNSKOhlAbnkbcvBkVMv276ma+89sorOxcpzjKaAG0fGMdjrBRJYFuwbcUdN9979v0P33fVhxvXQhmBQiGHfD4PzkU81tJwsXOkQMkvWGtw3vkX/K6rkYB2wQG6nr16jZJKQhsJKSPJKCVgTVS4CMERhiGkknjg4Qeuffvtt9/skKxYUC3Lg0+7xhJCkKTJ7gDUyy++8vz066Z/6bkXFy0q8jy4ECgUCuChhHEmnk8QEMbA4n+0klJiyKDBhwwbNqxqX2hAp6wZIyqdM5AymrBGxYuFUro0eDDW4PVlr/913rx5T3bI2R0AZwzhDro0ddpp74FTQft52eZs9t777r3ioV8+cHlzy1YUgzyEEqCEgcYdKUYJiMdAWaRgyUQKIw4dMaArTrBLJqCNUUJGkxelos6rsSbeN6AgYkk1LGt4rJPqLNoJI6HgdNQ4bd8m176bnGjVobHhXnjhhUX33D9jStP2bWCMIZVKIZlIgHkeCGVgZOeZRV3/+sO6EA1clwhobm5a2d6JNdZGBBgTl7CRFuQLefi+n+nQmWkvW53ylSCgKB+zuPjPwMiO5wOwK1asaHh+ybPTBg4YhMqKCvi+Dz9BwWj5ZNRG/5BBaI+9NGvXFQ1wALBq9eolUgloo+GsKyUqxsRaIBWstRg+bPi/x/e2HSVK3Y7tC9F2GRvvFrdw3k4asFMY+/Lhx/TrWdMDqXQaySQFo4h6kvG12hpwHiJfyDV2pSD6X4wYFk47H4gBAAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAQAAAAAYLlVAAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfhAgILACGBOQbTAAAKjklEQVRo3sWYe4xV1RXGf3ufcx/zwJnh6eBUFOyAKFDFB9WSlooaRZIi9RlrrUpQW6Ik1KTW1CaNmtjal7F/1KYWpYrGlFcMojGiVsRRi1ixcXyL4oPXMHPn3nvO2Y/+cfY999zLzDBjir0398zjnrO+b6+19lrf2vB/fokv+2CeqzK5ybmzaQ2eCHY8VOr9agnc0DZ2a7bTwwAWQ8j+E+57M/xqCGS56cqWlRLjHjaAwdK/dvfi+81XQODmW9t+ZZBIACwWg8FgKbJTPmxHZs0bKfxPpoxba/CQNNGMRCffWDxEueufh9UDl4lOkwU8GhmFoEwfGus+hpDPM/erkViUIyPQOj6DRSCAiBBVtxZJ7qqRWRwhgcY7rHN3QIEQSQNejSNz910qDhuB74vMggoBjULSyBG0IF0yWiyCrHeYCCwSWcGESsZbLB45smTwscl+EPi5ReIwEFgkQFHZ5gaLQROhUChHKi5LWsd3D+/lDxccILJRt+mME84gKGCRlIkcndgzoao8s8b+TzyQXk3xF8qVHYMhpIceCmgHDhB1B3qgJ79kHag3MSo/vphHujooAQ+FduvXaA507n0n/cShvCBHAC8QfUHfKlP9kxxZVxXAAiE97yX/cDaG9oMcJnxitPfaIOU8n0zSESyKQru2B3t2KApymPAJjbLuPV1jk1aSSdWA/t/17Emo1vlhhDkwAHz1Kjo2jzlDIPFoJcPnKCI0JT5rCJWLRe11iGyQI4AX7s3+BWVnXeK5qqDomxnq6j01tIfwghwBfOUj+0v7LrI1Biz9a/d3p6CHTaGmEF0pGinQfzB8vVlR3m4RLvquMG2uCadFuA/u6ijUB8IRaODupjN+MP7HmROD7l33PP3gq716IPjkKpuqSIklkYZK0XAUxnqzx0yff+vXix9/9OT2T+7SKQLLxdK7py535jrb7/nGPf/567037I4GgJeV32xi3b0UMkk8UXO1gDiv44IPW4gwCGbyXeacfklXFBucyC37pi63jqrAoDn+6p+VWzJ18ALpPqI+dwxG192R9hk/nH/Rhx49lAicipr70pM3uhxafcnYVpvatj4eZY7k8l8flP8VGgOkri0ja+Cr9YC5087Y1IfGR+IhkGgO0Pn7B+eAvEWetlpTX3M9ikxbNmVsDbxM4KVJgmwriRi6FiHq3uT9C3cYcmTwHHxspsCsF2/05JyTs9iDqpPF4HPK9TXwJBDSOAq2+qxOLNcQyHpLl7eSIYuPj5eKj0Yy4yQ55sxogPJgsYSMv67GnRUHe1WHVcudVQi8Oi8wo/32V+bcKdzq469IvBYx6tt+0G/RiJoBIZYXAc0TJh/33rt10RdJN06EGIDV+G5IkvG4NKFhwVXzf+MT4LutYFK+NmgU3lF+3zvK5b9M4CNCAhQRZ77w8ddCnQIXyTJqtqHBVk0YRENu3rcuXjuKEO3aFckIU1FPClCfyE92lAidxrdOcJcoo1CUGN26+KFk1ZW1SyTSplQAsbnkjrkn3fXONWsbUYnjZSq0sXAJUfj0via37vmCkBJlihTpp49eikQYSggMHQsv/WmSA5UIe4njnUmLJs6w2dNvW3/TMxNbNSJJuurKY3BNhAFC3tsqH7Bb50UU6XfgfQRoNH1E5Mig6Lzt4tuT1Ys41WySAdpJkWA34vhJy/98y+ZZZxhXTaodySY6WhMRoTBk2F9+q+jDs89OpQ2fjHOUJqSEIpvM/rOWNY9/5Ob+ErEIkAhdkeBYDCX6ysfOmDtvwW0etm7itcn8rNGoBN5ieHqCI3jH0ed+aMjiIdzMY11hj3d7hmYOlP925sefVkKam3DMljySJkrsg57zOauVAbdzrBU0Ck1ESIgiQiF5afHGNY7s0wfOHTPm9MDJa1IVK972HoZm/9SlpR0730fi4XmNrddk0BTxyqcVrs5Pax5YWVmsi7oiIiRyVARv37nm3pRcuEJep5tQrqfWNnbwkQh8sry+4dFf9h3Ay40/+nmJLc8on5Mflx9M71kHXQE3KEIMlu3L1v8plq+iIhSOyl1eymOTTKt8aV3g44TK0c/aJV3P47XvmMT5PSfkxZDwykU9jntEhKDAltnPvVYpIaIqljpbFu/PYNzWkSk1JZO+aski2frIUw/P/8PFk4bS+9blewweU7Eodm7ZdN5HhaqSEWm1NrXtgr3NjoKsCUa1vRsCGmgnV/byQ8Erghpwg2UvL8z+1+uhSUupGk34Vk+p5aIDozA1qtIkAYnz+QjG0QBDwGsiAgeuHfgBtl+6Zf2BsKbl1nsAAWNyC+8/5hKbxJ1kZ1sUGUbTNuRIbZPNptyGtuxn+5Kux3b3u85l0630IAIIX86/7JSVWQzS0bR4GDTNTKBpyHlWERCgMG5kNfTyyrKXH9nT6yrXcAggEMcfc3bX6FaTeEohGcd4skPAawK30zUKMOyl6/pX1+zvdcVwGASoio9R2XkrTrzNRyEp4TOJMfiDwhtC10E1GknE5+Uty7Y/3ldwRwkVMTAsAlSk1eTJ33ngyNl9NDGFljrRUgseuJVrAhS7urfevuOZUgHjmoVJRJCthR+IQI0E9/wpJy9YM6u1EdJKrAY8JHTHE0UKGJ5a8vLjGHdwdEgCQx/RWK13d8+kcYAbLZoyBQqUCFEU+JR9+LQx/ZT29vqxaRhHNPVpGFeitpY/fppHJcJCpIpsvHKNJkOJz2hmNBkUGSzrV2xapYPk8Myk9HudB5KwHl9PABDeXdtGt5Zd8lVsaEICt26FQPBGeXPhBI7zJYb4GH/GOdPmvbux0F8dGw5y4HDOiJb8fOKkfleE4p2kCChRpERIiEWyq7yu5x+8nc8ToMmQIYtEMW32Ld2zph86CIN7QJww6epH+xMlb1xPr1b4DHvLLxaeV1+0Cr9BzSDrk5rcFHlOubbY9f67A698MAKpOXBFd1PeIFKSKnJujxBItvWsU7vzfrOHQagZ5HzrRuKYhsFj5qXm391v1Y5QtTT8weIzZ/LE1jKeE2XGFddYMwl2ffjse7u+mc/naaTPTSIKicHgJ/LZIFi0+ou5L3UN45Ss7uRCnPWYdkUszvggUXMh2zb8duHrTzbkM6mRwbimq5z4MIDEYPnR8+1tg2/KQZLw6IajTixBEvcQ5apcxLoVDy5X5exEz+lFAfh5lS878MgdYWtAosmy9AMhBj45G5RAR7vv5GNsUKMI0BRZdcXWx7AYr0giWiT9b3z0Rnz4ECaDXXx4LwnpyJ86c4QHlcfOrYiJipINUQSs/N6bz1VO62VSliTF11ZfuPH6PRjKlNz6jQOQGOb+fbB9IAdMQXvETOU0rE7qnuKJFR90VUqCCKu3C7wWou0bV87atiEkokSAdeCxSpjQ2dF8SA+k09A02WQd8cazdL+6dZWbNCzWlElNfbaIxfbtW7d005ICAbrmQAV8Oo4eURLqSDkdWylAZd76S6qmWx2lDicgqkyp2zasX9iLJOOmw4qwHTNjoACssYMQKLxRgTeuBpTwW1MDoRVBTXMOkznVvP/i9mXjyLnZuFLdZFs9xhq7xg7sAQs7n4qSKmCcuOy4yW3sysCXWpCIUm3HHtvRTJZMUsY1IaXuevj4538BBXB1HeF6wqkAAAAASUVORK5CYII="},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t,n){var r=u(e,t);return h.createElement("div",{className:(0,le.default)(n?ie.default["integer-data"]:void 0)},r)}function u(e,t){var n="";return e.length>0&&e[0].hasOwnProperty(t)&&(n=e[0][t]),n}function c(e,t,n){return e.length>0&&e.reduce(function(e,r){var o=r[t];return o?e||o.toUpperCase().indexOf(n)>-1:e},!1)}Object.defineProperty(t,"__esModule",{value:!0}),t.MutationTableComponent=t.MutationTableColumnType=void 0;var d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.getDivForDataField=l,t.getTextForDataField=u,t.defaultFilter=c;var f=n(1),h=o(f),m=n(33),y=n(13),g=n(3),v=o(g),b=n(178),_=r(b),w=n(975),x=r(w),S=n(888),C=r(S),k=n(976),E=r(k),M=n(921),A=r(M),T=n(977),O=r(T),P=n(978),j=r(P),I=n(926),D=r(I),N=n(979),R=r(N),L=n(980),F=r(L),z=n(894),B=r(z),V=n(983),G=r(V),H=n(985),U=r(H),q=n(991),W=r(q),Z=n(994),Y=r(Z),K=n(928),X=r(K),Q=n(895),J=r(Q),$=n(995),ee=r($),te=n(997),ne=r(te),re=n(923),oe=r(re),ae=n(872),ie=r(ae),se=n(174),le=r(se),ue=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":p(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},ce=t.MutationTableColumnType=void 0;!function(e){e[e.STUDY=0]="STUDY",e[e.SAMPLE_ID=1]="SAMPLE_ID",e[e.TUMORS=2]="TUMORS",e[e.GENE=3]="GENE",e[e.PROTEIN_CHANGE=4]="PROTEIN_CHANGE",e[e.CHROMOSOME=5]="CHROMOSOME",e[e.START_POS=6]="START_POS",e[e.END_POS=7]="END_POS",e[e.REF_ALLELE=8]="REF_ALLELE",e[e.VAR_ALLELE=9]="VAR_ALLELE",e[e.MUTATION_STATUS=10]="MUTATION_STATUS",e[e.VALIDATION_STATUS=11]="VALIDATION_STATUS",e[e.MUTATION_TYPE=12]="MUTATION_TYPE",e[e.CENTER=13]="CENTER",e[e.TUMOR_ALLELE_FREQ=14]="TUMOR_ALLELE_FREQ",e[e.NORMAL_ALLELE_FREQ=15]="NORMAL_ALLELE_FREQ",e[e.FUNCTIONAL_IMPACT=16]="FUNCTIONAL_IMPACT",e[e.ANNOTATION=17]="ANNOTATION",e[e.COSMIC=18]="COSMIC",e[e.COPY_NUM=19]="COPY_NUM",e[e.MRNA_EXPR=20]="MRNA_EXPR",e[e.COHORT=21]="COHORT",e[e.REF_READS_N=22]="REF_READS_N",e[e.VAR_READS_N=23]="VAR_READS_N",e[e.REF_READS=24]="REF_READS",e[e.VAR_READS=25]="VAR_READS",e[e.CANCER_TYPE=26]="CANCER_TYPE",e[e.NUM_MUTATIONS=27]="NUM_MUTATIONS"}(ce||(t.MutationTableColumnType=ce={}));var de=t.MutationTableComponent=function(e){function t(){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),t}(_.default),pe=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._columns={},n.generateColumns(),n}return s(t,e),d(t,[{key:"generateColumns",value:function(){var e=this;this._columns={},this._columns[ce.STUDY]={name:"Study",render:function(t){return ne.default.renderFunction(t,e.props.molecularProfileIdToMolecularProfile,e.props.studyIdToStudy)},download:function(t){return ne.default.getTextValue(t,e.props.molecularProfileIdToMolecularProfile,e.props.studyIdToStudy)},sortBy:function(t){return ne.default.getTextValue(t,e.props.molecularProfileIdToMolecularProfile,e.props.studyIdToStudy)},filter:function(t,n,r){return ne.default.filter(t,r,e.props.molecularProfileIdToMolecularProfile,e.props.studyIdToStudy)},visible:!1},this._columns[ce.SAMPLE_ID]={name:"Sample ID",render:function(t){return x.default.renderFunction(t,e.props.molecularProfileIdToMolecularProfile)},download:x.default.getTextValue,sortBy:x.default.getTextValue,filter:function(e,t,n){return c(e,"sampleId",n)},visible:!0},this._columns[ce.TUMOR_ALLELE_FREQ]={name:"Allele Freq (T)",render:C.default.renderFunction,headerRender:function(e){return h.createElement("span",{style:{display:"inline-block",maxWidth:55}},e)},sortBy:C.default.getSortValue,tooltip:h.createElement("span",null,"Variant allele frequency in the tumor sample"),visible:!0},this._columns[ce.NORMAL_ALLELE_FREQ]={name:"Allele Freq (N)",render:E.default.renderFunction,headerRender:function(e){return h.createElement("span",{style:{display:"inline-block",maxWidth:55}},e)},sortBy:E.default.getSortValue,tooltip:h.createElement("span",null,"Variant allele frequency in the normal sample"),visible:!1},this._columns[ce.MRNA_EXPR]={name:"mRNA Expr.",render:function(t){return e.props.mrnaExprRankCache?A.default.renderFunction(t,e.props.mrnaExprRankCache):h.createElement("span",null)}},this._columns[ce.COHORT]={name:"Cohort",render:function(t){return e.props.variantCountCache?O.default.renderFunction(t,e.props.mutSigData,e.props.variantCountCache):h.createElement("span",null)},sortBy:function(t){var n=e.props.variantCountCache;return n?O.default.getSortValue(t,n):0},tooltip:h.createElement("span",null,"Mutation frequency in cohort"),defaultSortDirection:"desc"},this._columns[ce.COPY_NUM]={name:"Copy #",render:function(t){return e.props.discreteCNACache&&e.props.molecularProfileIdToMolecularProfile?j.default.renderFunction(t,e.props.molecularProfileIdToMolecularProfile,e.props.discreteCNACache):h.createElement("span",null)},sortBy:function(t){return e.props.discreteCNACache&&e.props.molecularProfileIdToMolecularProfile?j.default.getSortValue(t,e.props.molecularProfileIdToMolecularProfile,e.props.discreteCNACache):0},filter:function(t,n){return!(!e.props.discreteCNACache||!e.props.molecularProfileIdToMolecularProfile)&&j.default.filter(t,e.props.molecularProfileIdToMolecularProfile,e.props.discreteCNACache,n)},visible:j.default.isVisible(this.props.discreteCNACache)},this._columns[ce.REF_READS_N]={name:"Ref Reads (N)",render:function(e){return D.default.renderFunction(e,[e[0].sampleId],"normalRefCount")},download:function(e){return D.default.getTextValue(e,[e[0].sampleId],"normalRefCount")},sortBy:function(e){return e.map(function(e){return e.normalRefCount})},visible:!1,align:"right"},this._columns[ce.VAR_READS_N]={name:"Variant Reads (N)",render:function(e){return D.default.renderFunction(e,[e[0].sampleId],"normalAltCount")},download:function(e){return D.default.getTextValue(e,[e[0].sampleId],"normalAltCount")},sortBy:function(e){return e.map(function(e){return e.normalAltCount})},visible:!1,align:"right"},this._columns[ce.REF_READS]={name:"Ref Reads",render:function(e){return D.default.renderFunction(e,[e[0].sampleId],"tumorRefCount")},download:function(e){return D.default.getTextValue(e,[e[0].sampleId],"tumorRefCount")},sortBy:function(e){return e.map(function(e){return e.tumorRefCount})},visible:!1,align:"right"},this._columns[ce.VAR_READS]={name:"Variant Reads",render:function(e){return D.default.renderFunction(e,[e[0].sampleId],"tumorAltCount")},download:function(e){return D.default.getTextValue(e,[e[0].sampleId],"tumorAltCount")},sortBy:function(e){return e.map(function(e){return e.tumorAltCount})},visible:!1,align:"right"},this._columns[ce.START_POS]={name:"Start Pos",render:function(e){return l(e,"startPosition",!0)},download:function(e){return u(e,"startPosition")},sortBy:function(e){return e.map(function(e){return e.startPosition})},visible:!1,align:"right"},this._columns[ce.END_POS]={name:"End Pos",render:function(e){return l(e,"endPosition",!0)},download:function(e){return u(e,"endPosition")},sortBy:function(e){return e.map(function(e){return e.endPosition})},visible:!1,align:"right"},this._columns[ce.REF_ALLELE]={name:"Ref",render:function(e){return l(e,"referenceAllele")},download:function(e){return u(e,"referenceAllele")},sortBy:function(e){return e.map(function(e){return e.referenceAllele})},visible:!1},this._columns[ce.VAR_ALLELE]={name:"Var",render:function(e){return l(e,"variantAllele")},download:function(e){return u(e,"variantAllele")},sortBy:function(e){return e.map(function(e){return e.variantAllele})},visible:!1},this._columns[ce.MUTATION_STATUS]={name:"MS",tooltip:h.createElement("span",null,"Mutation Status"),render:J.default.renderFunction,download:J.default.download,sortBy:J.default.sortValue,filter:function(e,t,n){return c(e,"mutationStatus",n)},visible:!1},this._columns[ce.VALIDATION_STATUS]={name:"VS",tooltip:h.createElement("span",null,"Validation Status"),render:ee.default.renderFunction,download:ee.default.download,sortBy:ee.default.sortValue,filter:function(e,t,n){return c(e,"validationStatus",n)},visible:!1},this._columns[ce.CENTER]={name:"Center",render:function(e){return l(e,"center")},download:function(e){return u(e,"center")},sortBy:function(e){return e.map(function(e){return e.center})},filter:function(e,t,n){return c(e,"center",n)},visible:!1},this._columns[ce.GENE]={name:"Gene",render:function(e){return R.default.renderFunction(e)},download:function(e){return R.default.getTextValue(e)},sortBy:function(e){return R.default.getSortValue(e)},filter:function(e,t,n){return R.default.getTextValue(e).toUpperCase().indexOf(n)>-1}},this._columns[ce.CHROMOSOME]={name:"Chromosome",render:function(e){return h.createElement("div",{className:ie.default["integer-data"]},F.default.getData(e))},download:function(e){return F.default.getData(e)||""},sortBy:function(e){return F.default.getSortValue(e)},filter:function(e,t,n){return(F.default.getData(e)+"").toUpperCase().indexOf(n)>-1},visible:!1,align:"right"},this._columns[ce.PROTEIN_CHANGE]={name:"Protein Change",render:B.default.renderWithMutationStatus,download:B.default.getTextValue,sortBy:function(e){return B.default.getSortValue(e)},filter:B.default.getFilterValue},this._columns[ce.MUTATION_TYPE]={name:"Mutation Type",render:G.default.renderFunction,download:G.default.getTextValue,sortBy:function(e){return G.default.getDisplayValue(e)},filter:function(e,t,n){return G.default.getDisplayValue(e).toUpperCase().indexOf(n)>-1}},this._columns[ce.FUNCTIONAL_IMPACT]={name:"Functional Impact",render:function(t){return e.props.genomeNexusEnrichmentCache?U.default.renderFunction(t,e.props.genomeNexusEnrichmentCache):h.createElement("span",null)},download:function(t){return U.default.download(t,e.props.genomeNexusEnrichmentCache)},headerRender:U.default.headerRender,visible:!1,shouldExclude:function(){return!e.props.enableFunctionalImpact}},this._columns[ce.COSMIC]={name:"COSMIC",render:function(t){return W.default.renderFunction(t,e.props.cosmicData)},sortBy:function(t){return W.default.getSortValue(t,e.props.cosmicData)},download:function(t){return W.default.getDownloadValue(t,e.props.cosmicData)},tooltip:h.createElement("span",null,"COSMIC occurrences"),defaultSortDirection:"desc",align:"right"},this._columns[ce.ANNOTATION]={name:"Annotation",render:function(t){return oe.default.renderFunction(t,{hotspotData:e.props.hotspotData,myCancerGenomeData:e.props.myCancerGenomeData,oncoKbData:e.props.oncoKbData,oncoKbEvidenceCache:e.props.oncoKbEvidenceCache,oncoKbAnnotatedGenes:e.props.oncoKbAnnotatedGenes,pubMedCache:e.props.pubMedCache,civicGenes:e.props.civicGenes,civicVariants:e.props.civicVariants,enableCivic:e.props.enableCivic,enableOncoKb:e.props.enableOncoKb,enableMyCancerGenome:e.props.enableMyCancerGenome,enableHotspot:e.props.enableHotspot,userEmailAddress:e.props.userEmailAddress})},download:function(t){return oe.default.download(t,e.props.oncoKbAnnotatedGenes,e.props.hotspotData,e.props.myCancerGenomeData,e.props.oncoKbData,e.props.civicGenes,e.props.civicVariants)},sortBy:function(t){return oe.default.sortValue(t,e.props.oncoKbAnnotatedGenes,e.props.hotspotData,e.props.myCancerGenomeData,e.props.oncoKbData,e.props.civicGenes,e.props.civicVariants)}},this._columns[ce.CANCER_TYPE]={name:"Cancer Type",render:function(t){return X.default.render(t,e.props.uniqueSampleKeyToTumorType)},download:function(t){return X.default.download(t,e.props.uniqueSampleKeyToTumorType)},sortBy:function(t){return X.default.sortBy(t,e.props.uniqueSampleKeyToTumorType)},filter:function(t,n,r){return X.default.filter(t,r,e.props.uniqueSampleKeyToTumorType)},tooltip:h.createElement("span",null,"Cancer Type")},this._columns[ce.NUM_MUTATIONS]={name:"# Mut in Sample",render:Y.default.makeRenderFunction(this),headerRender:function(e){return h.createElement("span",{style:{display:"inline-block",maxWidth:55}},e)},sortBy:function(t){return Y.default.sortBy(t,e.props.mutationCountCache)},download:function(t){return Y.default.download(t,e.props.mutationCountCache)},tooltip:h.createElement("span",null,"Total number of nonsynonymous mutations in the sample"),align:"right"}}},{key:"render",value:function(){return h.createElement(de,{columns:this.columns,data:this.props.data,dataStore:this.props.dataStore,downloadDataFetcher:this.props.downloadDataFetcher,initialItemsPerPage:this.props.initialItemsPerPage,initialSortColumn:this.props.initialSortColumn,initialSortDirection:this.props.initialSortDirection,itemsLabel:this.props.itemsLabel,itemsLabelPlural:this.props.itemsLabelPlural,paginationProps:this.props.paginationProps,showCountHeader:this.props.showCountHeader,columnVisibility:this.props.columnVisibility,columnVisibilityProps:this.props.columnVisibilityProps})}},{key:"orderedColumns",get:function(){var e=this,t=this.props.columns||[];return v.sortBy(t,function(t){var n=-1;return e._columns[t]&&e._columns[t].order&&(n=e._columns[t].order),n})}},{key:"columns",get:function(){var e=this;return this.orderedColumns.reduce(function(t,n){var r=e._columns[n];return!r||r.shouldExclude&&r.shouldExclude()||t.push(r),t},[])}}]),t}(h.Component);pe.defaultProps={initialItemsPerPage:25,showCountHeader:!0,paginationProps:{itemsPerPageOptions:[25,50,100]},initialSortColumn:"Annotation",initialSortDirection:"desc",itemsLabel:"Mutation",itemsLabelPlural:"Mutations",enableOncoKb:!0,enableMyCancerGenome:!0,enableHotspot:!0,enableCivic:!1},ue([y.observable],pe.prototype,"_columns",void 0),ue([y.computed],pe.prototype,"orderedColumns",null),ue([y.computed],pe.prototype,"columns",null),pe=ue([m.observer],pe),t.default=pe},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a),s=n(871),l=function(e){return e&&e.__esModule?e:{default:e}}(s),u=function(){function e(){r(this,e)}return o(e,null,[{key:"getTextValue",value:function(t){return e.getData(t)||""}},{key:"getData",value:function(e){return e.length>0?e[0].sampleId:null}},{key:"renderFunction",value:function(t,n){var r=e.getTextValue(t),o=i.createElement(l.default,{text:r,tooltip:i.createElement("div",{style:{maxWidth:300}},r),maxLength:16});if(n){var a=n[t[0].molecularProfileId],s=a&&a.studyId;if(s){var u="#/patient?sampleId="+r+"&studyId="+s,c=window.location.href.search("index.do");c>-1&&(u=window.location.href.substring(0,c)+"case.do"+u),o=i.createElement("a",{href:u,target:"_blank"},o)}}return o}}]),e}();t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(i),l=n(856),u=r(l),c=n(888),d=r(c),p=function(){function e(){o(this,e)}return a(e,null,[{key:"renderFunction",value:function(t){var n=e.getSortValue(t);if(n){var r=t[0].normalAltCount,o=t[0].normalRefCount;return d.default.mainContent(n,r,o)}return s.createElement(u.default,{status:l.TableCellStatus.NA})}},{key:"getSortValue",value:function(e){var t=e[0];if(!t)return null;var n=t.normalAltCount,r=t.normalRefCount;return n<0||r<0?null:n/(n+r)}}]),e}();t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(i);n(288);var l=n(891),u=r(l),c=n(922),d=r(c),p=n(860),f=n(856),h=r(f),m=function(){function e(){o(this,e)}return a(e,null,[{key:"renderFunction",value:function(t,n,r){var o=e.getMutSigQValue(t,n),a=e.getVariantCountData(t,r),i=e.makeCohortFrequencyViz(a);return s.createElement("div",null,null!==i&&i,null!==o&&e.makeMutSigIcon(o))}},{key:"getSortValue",value:function(t,n){var r=e.getVariantCountData(t,n);return r&&r.data?r.data.numberOfSamplesWithMutationInGene:null}},{key:"getVariantCountData",value:function(e,t){if(0===e.length)return null;var n=e[0].entrezGeneId,r=e[0].keyword,o=t.get({entrezGeneId:n,keyword:r});return o?Object.assign({hugoGeneSymbol:e[0].gene.hugoGeneSymbol},o):null}},{key:"getMutSigQValue",value:function(e,t){if(!t||0===e.length)return null;var n=t[e[0].entrezGeneId];return n?n.qValue:null}},{key:"makeCohortFrequencyViz",value:function(t){var n=null;if(null===t)n=f.TableCellStatus.LOADING;else if("error"===t.status)n=f.TableCellStatus.ERROR;else{if(null!==t.data){var r=[t.data.numberOfSamplesWithMutationInGene];return t.data.keyword&&r.push(t.data.numberOfSamplesWithKeyword),s.createElement(u.default,{counts:r,totalCount:t.data.numberOfSamples,tooltip:e.getCohortFrequencyTooltip(t)})}n=f.TableCellStatus.NA}if(null!==n)return s.createElement(h.default,{status:n})}},{key:"makeMutSigIcon",value:function(t){var n=function(){return e.getMutSigTooltip(t)};return s.createElement(d.default,{text:"M",tooltip:n})}},{key:"getBoldPercentage",value:function(e){return s.createElement("b",null,(0,p.getPercentage)(e))}},{key:"getCohortFrequencyTooltip",value:function(t){return null===t?s.createElement("span",null,"Querying server for data."):"error"===t.status?s.createElement("span",null,"Error retrieving data."):null===t.data?s.createElement("span",null,"Count data is not available for this gene."):s.createElement("div",null,s.createElement("span",null,t.data.numberOfSamplesWithMutationInGene," samples (",e.getBoldPercentage(t.data.numberOfSamplesWithMutationInGene/t.data.numberOfSamples),") in this study have mutated ",t.hugoGeneSymbol,void 0!==t.data.keyword&&s.createElement("span",null,", out of which ",t.data.numberOfSamplesWithKeyword," (",e.getBoldPercentage(t.data.numberOfSamplesWithKeyword/t.data.numberOfSamples),") have ",t.data.keyword," mutations"),"."))}},{key:"getMutSigTooltip",value:function(e){return s.createElement("div",null,s.createElement("b",null,"MutSig"),s.createElement("br",null),s.createElement("span",null," Q-value: ",(e||0).toExponential(3)))}}]),e}();t.default=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(i),l=n(173),u=r(l);n(288);var c=n(856),d=r(c),p=function(){function e(){o(this,e)}return a(e,null,[{key:"renderFunction",value:function(t,n,r){var o=e.getData(t,n,r);return s.createElement(u.default,{placement:"left",overlay:e.getTooltipContents(o),arrowContent:s.createElement("div",{className:"rc-tooltip-arrow-inner"})},e.getTdContents(o))}},{key:"getSortValue",value:function(t,n,r){return e.getTdValue(e.getData(t,n,r))}},{key:"filter",value:function(t,n,r,o){var a=e.getData(t,n,r);return!(!a||!a.data)&&(!!e.altToFilterString[a.data.alteration]&&e.altToFilterString[a.data.alteration].indexOf(o.toLowerCase())>-1)}},{key:"getData",value:function(e,t,n){if(!e||0===e.length||!n.isActive)return null;var r=e[0].sampleId,o=e[0].entrezGeneId,a=t[e[0].molecularProfileId];return a?n.get({sampleId:r,entrezGeneId:o,studyId:a.studyId}):null}},{key:"getTdValue",value:function(e){return null!==e&&"complete"===e.status&&null!==e.data?e.data.alteration:null}},{key:"getTdContents",value:function(e){var t=null;if(null!==e&&"complete"===e.status&&null!==e.data){var n=e.data.alteration;return 2===n?s.createElement("span",{style:{color:"red",textAlign:"center",fontSize:"12px"}},s.createElement("b",null,"Amp")):1===n?s.createElement("span",{style:{color:"red",textAlign:"center",fontSize:"smaller"}},s.createElement("b",null,"Gain")):0===n?s.createElement("span",{style:{color:"black",textAlign:"center",fontSize:"xx-small"}},"Diploid"):-1===n?s.createElement("span",{style:{color:"blue",textAlign:"center",fontSize:"smaller"}},s.createElement("b",null,"ShallowDel")):s.createElement("span",{style:{color:"blue",textAlign:"center",fontSize:"12px"}},s.createElement("b",null,"DeepDel"))}if(null!==(t=e&&"complete"===e.status&&null===e.data?c.TableCellStatus.NA:e&&"error"===e.status?c.TableCellStatus.ERROR:c.TableCellStatus.NA))return s.createElement(d.default,{status:t,naAlt:"CNA data is not available for this gene."})}},{key:"getTooltipContents",value:function(e){var t={"-2":"Deep deletion","-1":"Shallow deletion",0:"Diploid / normal",1:"Low-level gain",2:"High-level amplification"};return e&&"complete"===e.status&&null!==e.data?s.createElement("div",null,s.createElement("span",null,t[e.data.alteration])):e&&"complete"===e.status&&null===e.data?s.createElement("span",null,"CNA data is not available for this gene."):e&&"error"===e.status?s.createElement("span",null,"Error retrieving data."):s.createElement("span",null,"Querying server for data.")}},{key:"isVisible",value:function(e){return e&&e.isActive}}]),e}();t.default=p,p.altToFilterString={2:"amp",1:"gain",0:"diploid","-1":"shallowdel","-2":"deepdel"}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a),s=function(){function e(){r(this,e)}return o(e,null,[{key:"getTextValue",value:function(t){return e.getData(t)||""}},{key:"getDisplayValue",value:function(t){return e.getTextValue(t)}},{key:"getData",value:function(e){return e.length>0?e[0].gene.hugoGeneSymbol:null}},{key:"getSortValue",value:function(t){return e.getTextValue(t)}},{key:"renderFunction",value:function(t){var n=e.getDisplayValue(t);return i.createElement("span",null,n)}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){r(this,e)}return o(e,null,[{key:"getSortValue",value:function(t){var n=e.getData(t);return n?e.extractSortValue(n):null}},{key:"extractSortValue",value:function(e){var t=/[0-9]+/g,n=e.match(t),r=-1;return n?r=parseInt(n[0]):e.toLowerCase().indexOf("x")>-1?r=23:e.toLowerCase().indexOf("y")>-1&&(r=24),r}},{key:"getData",value:function(e){return e.length>0?e[0].gene.chromosome:null}}]),e}();t.default=a},function(e,t){e.exports={portalWidth:"mutationStatus-module__portalWidth__2s2Qx",germline:"mutationStatus-module__germline__3PooJ",somatic:"mutationStatus-module__somatic__1ieJL",unknown:"mutationStatus-module__unknown__mbYor"}},function(e,t){e.exports={portalWidth:"proteinChange-module__portalWidth__1U76x",proteinChange:"proteinChange-module__proteinChange__2xJ_V",germline:"proteinChange-module__germline__1c0ww"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(i),l=n(173),u=r(l),c=n(984),d=r(c),p=n(290),f=r(p),h=function(){function e(){o(this,e)}return a(e,null,[{key:"getDisplayValue",value:function(t){var n=e.getMapEntry(t);return n&&n.label?n.label:e.getTextValue(t)}},{key:"getTextValue",value:function(t){var n="",r=e.getData(t);return r&&(n=r.toString()),n}},{key:"getClassName",value:function(t){var n=e.getMapEntry(t);return n&&n.className?n.className:e.MAIN_MUTATION_TYPE_MAP.other.className}},{key:"getMapEntry",value:function(t){var n=e.getData(t);return n?e.MAIN_MUTATION_TYPE_MAP[(0,f.default)(n)]:void 0}},{key:"getData",value:function(e){return e.length>0?e[0].mutationType:null}},{key:"renderFunction",value:function(t){var n=e.getDisplayValue(t),r=e.getClassName(t),o=e.getTextValue(t),a=s.createElement("span",{className:d.default[r]},n);if(o.toLowerCase()!==n.toLowerCase()){var i=s.createElement("div",{className:"rc-tooltip-arrow-inner"});a=s.createElement(u.default,{overlay:s.createElement("span",null,o),placement:"left",arrowContent:i},a)}return a}},{key:"MAIN_MUTATION_TYPE_MAP",get:function(){return{missense:{label:"Missense",longName:"Missense",className:"missense-mutation",mainType:"missense",priority:1},inframe:{label:"IF",longName:"In-frame",className:"inframe-mutation",mainType:"inframe",priority:2},truncating:{label:"Truncating",longName:"Truncating",className:"trunc-mutation",mainType:"truncating",priority:4},nonsense:{label:"Nonsense",longName:"Nonsense",className:"trunc-mutation",mainType:"truncating",priority:6},nonstop:{label:"Nonstop",longName:"Nonstop",className:"trunc-mutation",mainType:"truncating",priority:7},nonstart:{label:"Nonstart",longName:"Nonstart",className:"trunc-mutation",mainType:"truncating",priority:8},frameshift:{label:"FS",longName:"Frame Shift",className:"trunc-mutation",mainType:"truncating",priority:4},frame_shift_del:{label:"FS del",longName:"Frame Shift Deletion",className:"trunc-mutation",mainType:"truncating",priority:4},frame_shift_ins:{label:"FS ins",longName:"Frame Shift Insertion",className:"trunc-mutation",mainType:"truncating",priority:5},in_frame_ins:{label:"IF ins",longName:"In-frame Insertion",className:"inframe-mutation",mainType:"inframe",priority:3},in_frame_del:{label:"IF del",longName:"In-frame Deletion",className:"inframe-mutation",mainType:"inframe",priority:2},splice_site:{label:"Splice",longName:"Splice site",className:"trunc-mutation",mainType:"truncating",priority:9},fusion:{label:"Fusion",longName:"Fusion",className:"fusion",mainType:"other",priority:10},silent:{label:"Silent",longName:"Silent",className:"other-mutation",mainType:"other",priority:11},other:{label:"Other",longName:"Other",className:"other-mutation",mainType:"other",priority:11}}}}]),e}();t.default=h},function(e,t){e.exports={portalWidth:"mutationType-module__portalWidth__2MF0M","missense-mutation":"mutationType-module__missense-mutation__2vEO9","trunc-mutation":"mutationType-module__trunc-mutation__1fMqq","inframe-mutation":"mutationType-module__inframe-mutation__3PeGf","other-mutation":"mutationType-module__other-mutation__3NGsA","default-mutation":"mutationType-module__default-mutation__27MBJ"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){e.querySelector(".rc-tooltip-arrow").style.left="10px"}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.placeArrow=s;var u=n(1),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),d=n(177),p=n(174),f=r(p),h=n(173),m=r(h);n(288);var y=n(856),g=r(y),v=n(986),b=r(v),_=n(989),w=r(_),x=n(990),S=r(x),C=n(897),k=r(C),E=n(898),M=r(E),A=n(896),T=r(A),O=n(857),P=r(O),j=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={active:n.props.active},n}return i(t,e),l(t,[{key:"legend",value:function(){var e=this;return c.createElement("div",null,c.createElement("table",{className:"table table-striped table-border-top"},c.createElement("thead",null,c.createElement("tr",null,c.createElement("th",null,"Legend"),c.createElement("th",null,c.createElement("span",{style:{display:"inline-block",width:22},title:"SIFT",onMouseOver:function(){return e.setState({active:"sift"})}},c.createElement("img",{height:14,width:14,src:n(899),alt:"SIFT"}))),c.createElement("th",null,c.createElement("span",{style:{display:"inline-block",width:22},title:"PolyPhen-2",onMouseOver:function(){return e.setState({active:"polyPhen2"})}},c.createElement("img",{height:14,width:14,src:n(900),alt:"PolyPhen-2"}))))),c.createElement("tbody",null,c.createElement("tr",null,c.createElement("td",null,c.createElement("span",{className:(0,f.default)(P.default["annotation-item-text"],T.default["ma-high"])},c.createElement("i",{className:"fa fa-circle","aria-hidden":"true"}))),c.createElement("td",{className:k.default["sift-deleterious"]},"deleterious"),c.createElement("td",{className:M.default["polyPhen2-probably_damaging"]},"probably_damaging")),c.createElement("tr",null,c.createElement("td",null,c.createElement("span",{className:(0,f.default)(P.default["annotation-item-text"],T.default["ma-low"])},c.createElement("i",{className:"fa fa-circle","aria-hidden":"true"}))),c.createElement("td",{className:k.default["sift-deleterious_low_confidence"]},"deleterious_low_confidence"),c.createElement("td",{className:M.default["polyPhen2-possibly_damaging"]},"possibly_damaging")),c.createElement("tr",null,c.createElement("td",null,c.createElement("span",{className:(0,f.default)(P.default["annotation-item-text"],T.default["ma-neutral"])},c.createElement("i",{className:"fa fa-circle","aria-hidden":"true"}))),c.createElement("td",{className:k.default["sift-tolerated_low_confidence"]},"tolerated_low_confidence"),c.createElement("td",{className:M.default["polyPhen2-benign"]},"benign")),c.createElement("tr",null,c.createElement("td",null),c.createElement("td",{className:k.default["sift-tolerated"]},"tolerated"),c.createElement("td",null,"-")))))}},{key:"render",value:function(){return c.createElement("div",null,"mutationAssessor"===this.state.active&&t.mutationAssessorText(),"sift"===this.state.active&&t.siftText(),"polyPhen2"===this.state.active&&t.polyPhen2Text(),this.legend())}}],[{key:"mutationAssessorText",value:function(){return c.createElement("div",{style:{width:450,height:100}},c.createElement("a",{href:b.default.MUTATION_ASSESSOR_URL,target:"_blank"},"Mutation Assessor")," predicts the functional impact of amino-acid substitutions in proteins, such as mutations discovered in cancer or missense polymorphisms. The functional impact is assessed based on evolutionary conservation of the affected amino acid in protein homologs. The method has been validated on a large set (60k) of disease associated (OMIM) and polymorphic variants.")}},{key:"siftText",value:function(){return c.createElement("div",{style:{width:450,height:100}},c.createElement("a",{href:w.default.SIFT_URL,target:"_blank"},"SIFT")," predicts whether an amino acid substitution affects protein function based on sequence homology and the physical properties of amino acids. SIFT can be applied to naturally occurring nonsynonymous polymorphisms and laboratory-induced missense mutations.")}},{key:"polyPhen2Text",value:function(){return c.createElement("div",{style:{width:450,height:100}},c.createElement("a",{href:S.default.POLYPHEN2_URL,target:"_blank"},"PolyPhen-2")," (Polymorphism Phenotyping v2) is a tool which predicts possible impact of an amino acid substitution on the structure and function of a human protein using straightforward physical and comparative considerations.")}}]),t}(c.Component),I=function(){function e(){o(this,e)}return l(e,null,[{key:"headerRender",value:function(e){var t=c.createElement("div",{className:"rc-tooltip-arrow-inner"});return c.createElement("div",null,e,c.createElement("br",null),c.createElement("div",{style:{height:14}},c.createElement(m.default,{overlay:c.createElement(j,{active:"sift"}),placement:"topLeft",trigger:["hover","focus"],arrowContent:t,destroyTooltipOnHide:!0,onPopupAlign:s},c.createElement("span",{style:{display:"inline-block",width:22}},c.createElement("img",{height:14,width:14,src:n(899),alt:"SIFT"}))),c.createElement(m.default,{overlay:c.createElement(j,{active:"polyPhen2"}),placement:"topLeft",trigger:["hover","focus"],arrowContent:t,destroyTooltipOnHide:!0,onPopupAlign:s},c.createElement("span",{style:{display:"inline-block",width:22}},c.createElement("img",{height:14,width:14,src:n(900),alt:"PolyPhen-2"})))))}},{key:"getData",value:function(e){return null===e||"error"===e.status||null===e.data?null:{mutationAssessor:e.data.mutation_assessor&&e.data.mutation_assessor.annotation,siftScore:e.data.transcript_consequences[0].sift_score,siftPrediction:e.data.transcript_consequences[0].sift_prediction,polyPhenScore:e.data.transcript_consequences[0].polyphen_score,polyPhenPrediction:e.data.transcript_consequences[0].polyphen_prediction}}},{key:"renderFunction",value:function(t,n){var r=e.getGenomeNexusData(t,n);return c.createElement("div",null,e.makeFuncionalImpactViz(r))}},{key:"download",value:function(t,n){var r=e.getGenomeNexusData(t,n),o=e.getData(r);return o?["MutationAssessor: "+b.default.download(o.mutationAssessor),"SIFT: "+w.default.download(o.siftScore,o.siftPrediction),"Polyphen-2: "+S.default.download(o.polyPhenScore,o.polyPhenPrediction)].join(";"):""}},{key:"getGenomeNexusData",value:function(e,t){return 0===e.length?null:t.get(e[0])}},{key:"makeFuncionalImpactViz",value:function(t){var n=null;if(null===t)n=y.TableCellStatus.LOADING;else if("error"===t.status)n=y.TableCellStatus.ERROR;else{if(null!==t.data){var r=e.getData(t);return r&&c.createElement("div",null,c.createElement(w.default,{siftScore:r.siftScore,siftPrediction:r.siftPrediction}),c.createElement(S.default,{polyPhenScore:r.polyPhenScore,polyPhenPrediction:r.polyPhenPrediction}))}n=y.TableCellStatus.NA}if(null!==n)return n===y.TableCellStatus.LOADING?c.createElement(d.Circle,{size:18,scaleEnd:.5,scaleStart:.2,color:"#aaa",className:"pull-left"}):c.createElement(g.default,{status:n})}}]),e}();t.default=I},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){e.querySelector(".rc-tooltip-arrow").style.display="none"}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.hideArrow=s;var u=n(1),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),d=n(173),p=r(d),f=n(857),h=r(f),m=n(174),y=r(m),g=n(987),v=r(g),b=n(896),_=r(b),w=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.tooltipContent=n.tooltipContent.bind(n),n}return i(t,e),l(t,[{key:"render",value:function(){var e=c.createElement("span",{className:""+h.default["annotation-item-text"]});if(this.props.mutationAssessor&&null!==this.props.mutationAssessor.functionalImpact){var t=this.props.mutationAssessor;e=c.createElement("span",{className:(0,y.default)(h.default["annotation-item-text"],_.default["ma-"+t.functionalImpact])},c.createElement("i",{className:"fa fa-circle","aria-hidden":"true"}));var n=c.createElement("div",{className:"rc-tooltip-arrow-inner"});e=c.createElement(p.default,{overlay:this.tooltipContent,placement:"right",trigger:["hover","focus"],arrowContent:n,onPopupAlign:s,destroyTooltipOnHide:!1},e)}return e}},{key:"tooltipContent",value:function(){var e=this.props.mutationAssessor,r=t.maLink("http://mutationassessor.org/r3/?cm=var&p="+e.uniprotId+"&var="+e.variant),o=t.maLink(e.msaLink),a=t.maLink(e.pdbLink),i=e.functionalImpact?c.createElement("div",null,c.createElement("table",{className:v.default["ma-tooltip-table"]},c.createElement("tr",null,c.createElement("td",null,"Source"),c.createElement("td",null,c.createElement("a",{href:"http://mutationassessor.org/r3"},"MutationAssessor"))),c.createElement("tr",null,c.createElement("td",null,"Impact"),c.createElement("td",null,c.createElement("span",{className:_.default["ma-"+e.functionalImpact]},e.functionalImpact))),(e.functionalImpactScore||0===e.functionalImpactScore)&&c.createElement("tr",null,c.createElement("td",null,"Score"),c.createElement("td",null,c.createElement("b",null,e.functionalImpactScore.toFixed(2)))))):null,s=r?c.createElement("div",{className:v.default["mutation-assessor-link"]},c.createElement("a",{href:r,target:"_blank"},c.createElement("img",{height:"15",width:"19",src:n(988),className:v.default["mutation-assessor-main-img"],alt:"Mutation Assessor"}),"Go to Mutation Assessor")):null,l=o?c.createElement("div",{className:v.default["mutation-assessor-link"]},c.createElement("a",{href:o,target:"_blank"},c.createElement("span",{className:v.default["ma-icon"]+" "+v.default["ma-msa-icon"]},"msa"),"Multiple Sequence Alignment")):null,u=a?c.createElement("div",{className:v.default["mutation-assessor-link"]},c.createElement("a",{href:a,target:"_blank"},c.createElement("span",{className:v.default["ma-icon"]+" "+v.default["ma-3d-icon"]},"3D"),"Mutation Assessor 3D View")):null;return c.createElement("span",null,i,l,u,s)}}],[{key:"download",value:function(e){return e?"impact: "+e.functionalImpact+", score: "+e.functionalImpactScore:"Error"}},{key:"maLink",value:function(e){var t=null;return e&&(t=e.replace("getma.org","mutationassessor.org/r3"),0!==t.indexOf("http://")&&(t="http://"+t)),t}}]),t}(c.Component);t.default=w,w.MUTATION_ASSESSOR_URL="http://mutationassessor.org/r3/"},function(e,t){e.exports={portalWidth:"mutationAssessorTooltip-module__portalWidth__15gd3","ma-link":"mutationAssessorTooltip-module__ma-link__3QpML","mutation-assessor-link":"mutationAssessorTooltip-module__mutation-assessor-link__3XLsB","ma-icon":"mutationAssessorTooltip-module__ma-icon__GqjUA","ma-msa-icon":"mutationAssessorTooltip-module__ma-msa-icon__2yT6h","ma-3d-icon":"mutationAssessorTooltip-module__ma-3d-icon__166M3","mutation-assessor-main-img":"mutationAssessorTooltip-module__mutation-assessor-main-img__2QlLP","ma-tooltip-table":"mutationAssessorTooltip-module__ma-tooltip-table__3tyG8"}},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFsAAABJCAIAAADdSs1eAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAdMSURBVHhe7VpdTFdlGA/jS5AARUTDkC/RIlfQ5mbkFisuaH2MNusit6Zrulbroq1uWhdetNVNX5vTNb2xC7rQlW2skcMiZrilFTKQDwEVFJAiFRAFpR97Dw8P53/+5z3nPe/5/4/bOTsXcM778by/9/k9v+d9zj9hbm7ugfBiCCwL0TAhECJidokQkRARWZgIfcSMUEIctab90uS+oxfJoj3PrX2qOCMzLTHaLp7pu3ni3PiZvgnRYOf2NS9WrrJsPHBt+oNv++jVhy+vryzKkDmH8T6ePsLhgDkHT1xt7rweze6xGzOf/nCZ4ECzI80j16dmLdu39tzgz4GjQzjQLJ6IRFqJRU7dvmtpfdfVqcjnM7MWyRRGOHZ6jDcGjvAah6AEApHnt2STuX0j1qZ/2TAk2tRtzbFfW+eQgV1l0QpqeWH41v2ESF5WMoKCsPj3pQ4vHtIOY5Hl+en2azvbbwSaqk2ZBB8o6RARr5F19L/pr453tg84Iur3H1dzs3Z83iH+BRyPP5JOsfCbPRtN8bX+1Kggwnu1D2cuT6QAtH93ac5DSXxMRJa3DnaLJ1+8WTwxffej+gHx72dvFG1YnSrFxStrDjR0OYTD3hRua+9SD+dxoWxtmv041BfetC47JX9lilvieEJkfOKOFjiE0VBf8YdJGiguINyYPCISHU4ZvE1LeZATJ1rY5uN4QqSlfeTO7D0MV74hG4yQ3vbbW5y3XDSANFwZv02NaZEVhYuR0nIo9Pq5zeBvYa5BEN5r8N/FYaMZ4wmRprZhMW71ljwpP6UNOHH6Rw3F4YssWYAs2lDUS1BGNOPEIXBtjFFHpH/4Jm4MnZy4bOum1dIFO2lAxCGt7Rw0pBTOb5POisFbzhsJHlSGpuPEQXiWEkcdEXIQwJGeGjX1dgIEtSHi4IlQXFJNJ5ShjBZ6hByX7vWrFuOrlDiKiCB8IIiIlTyrgzJiKBCH0qpzlya7WZ7Knd8SZaIM3kKe3z7UQzd5HF5JiaOIyJ+9/0BoMEH2iuSKEuvjlivvoMbk8Mjof+0wWICEBc5vPyBRxr4ZiBPtNCQ6KiLS0jEq+lc/YUim2voje5FG4BUJB/I3+/FBMaIMIg4QNN38oGDKd0wjqyAyOT17+vy1BcpoRgQawc8jxCZ7RPix5fVtuagSmO4XKlbSCPbEUUHkt4U0pCw/Mz9HkkQq+A5XCnQnAbIZigIwnY9MjTnQcD0b4qggcnIhDdEYU/kCOHHwfHO+BHR+0i9bZ6R5kfBxoG2I4xqRwbGprsH5gIc05Jly48Cq4AjoQuxIS15iBvaTaM9zLTFLclICTZeUOP/3xC2jpILGNpLEz0RXxudlwfJyffY90nThaMt8KRBwvF/3mBoWQe7l2kea/jIKDVWP5gZ5Ycq2uUPkLEtDntSahigvQHtHd4hQGlJVvgZxRLs1QRjQxap45q7lsBuE9Ufa4AIRqoYU5mXgDuZ6vFvlAhG91RDvpvs0glNEUGEWBUSEDwQRn6wJwrBOEWn62xBdSAzOu0Ew3ScbXCMSwJgK/31lXxPuHZ/8ImoUXi5HiIAvmBXTwDsCmIbkZqWi9A3zuBoqg+IIEV5ADGYaQgk0ZUw+IgLgWTVEQ81d2Vabjjhkia3CKRRnUS9TyH0EcKBEhDlQCkFBxMtk/vVF6Zu+B5xsc/qJ19IeOSKsGqK5XKYXICrW0FlUbXwJIgjdON2JobWXVNUsjtYLBXCRFnCbFaaQIEJ403wKc8SsC+0Z+bXC1BJEeOgW0eS+uEgKFKyVIELpKbjzzv5WLzMpGOe8CyQG5oniHq4sD1m1pKoIvzjU2MNjFejz7kubg5PIw8L65v4fWy8TfLBwb20Z0jbngPKWjuqscJDDjT2k85C6um0Fr1YVqE2psRcM+/p4J2XuMGx3TalHBXCECNaAPO275n5ySzxBbrK3dmO8CiVAAViQDgop3Fld7N15nSIiNhY/jzjQ0C2+TogLnvLa9sIYp/Y//TGETwIU6YECiKzr87M7RAQK8BT4i/h1ES7ksrtqSnUZZM8pMBeu4euWqCACoy2dFhzW9UOSSFwEbRFBaSdAWNBW+8FCERFhMT4AI+LqDWyWPoJyBH4USaEdJAVVfQrtnhCB9Zby7EX8TIhYjg+S+vEFXkztFRExik97GDMf5NugBxGMGCnPXnjun7jaR25tPkLTWGoB0jlXEdekZcg+QcPYaJl+REiej526qJAvQFYPN/b6Kq6x9hGaL9LtUfhDRIyWU1rmxLtqSrSLa9wQcSXPSMYhrqLcj8tXcY0zIpbyjG1H0i3kE66EfNx0ttYo3tL1RzbQpjX2cyM0IPvmKVbd0wVZ6cn8eKLl5KoAgalLjBAheeZpODcFJ1dfDwHOkYodIsKmSHmOsbhKoYk1IsIgeAoKX5DnuBQT7EGJDyKCRDOz91xlbtLt1dIgbohosd6PQeTf9PyYNchjhoiYdydEJERExtjQR0IfCX1EhkDoIzKE/gco765KHggW0QAAAABJRU5ErkJggg=="},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){e.querySelector(".rc-tooltip-arrow").style.display="none"}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.hideArrow=s;var u=n(1),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),d=n(173),p=r(d),f=n(857),h=r(f),m=n(174),y=r(m),g=n(897),v=r(g),b=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.tooltipContent=n.tooltipContent.bind(n),n}return i(t,e),l(t,[{key:"render",value:function(){var e=c.createElement("span",{className:""+h.default["annotation-item-text"]});if(this.props.siftPrediction&&this.props.siftPrediction.length>0){e=c.createElement("span",{className:(0,y.default)(h.default["annotation-item-text"],v.default["sift-"+this.props.siftPrediction])},c.createElement("i",{className:"fa fa-circle","aria-hidden":"true"}));var t=c.createElement("div",{className:"rc-tooltip-arrow-inner"});e=c.createElement(p.default,{overlay:this.tooltipContent,placement:"right",trigger:["hover","focus"],arrowContent:t,onPopupAlign:s,destroyTooltipOnHide:!1},e)}return e}},{key:"tooltipContent",value:function(){var e=this.props.siftPrediction?c.createElement("div",null,c.createElement("table",{className:v.default["sift-tooltip-table"]},c.createElement("tr",null,c.createElement("td",null,"Source"),c.createElement("td",null,c.createElement("a",{href:"http://sift.bii.a-star.edu.sg/"},"SIFT"))),c.createElement("tr",null,c.createElement("td",null,"Impact"),c.createElement("td",null,c.createElement("span",{className:v.default["sift-"+this.props.siftPrediction]},this.props.siftPrediction))),(this.props.siftScore||0===this.props.siftScore)&&c.createElement("tr",null,c.createElement("td",null,"Score"),c.createElement("td",null,c.createElement("b",null,this.props.siftScore.toFixed(2)))))):null;return c.createElement("span",null,e)}}],[{key:"download",value:function(e,t){return"impact: "+t+", score: "+e}}]),t}(c.Component);t.default=b,b.SIFT_URL="http://sift.bii.a-star.edu.sg/"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){e.querySelector(".rc-tooltip-arrow").style.display="none"}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.hideArrow=s;var u=n(1),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),d=n(173),p=r(d),f=n(857),h=r(f),m=n(174),y=r(m),g=n(898),v=r(g),b=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.tooltipContent=n.tooltipContent.bind(n),n}return i(t,e),l(t,[{key:"render",value:function(){var e=c.createElement("span",{className:""+h.default["annotation-item-text"]});if(this.props.polyPhenPrediction&&this.props.polyPhenPrediction.length>0){e=c.createElement("span",{className:(0,y.default)(h.default["annotation-item-text"],v.default["polyPhen2-"+this.props.polyPhenPrediction])},c.createElement("i",{className:"fa fa-circle","aria-hidden":"true"}));var t=c.createElement("div",{className:"rc-tooltip-arrow-inner"});e=c.createElement(p.default,{overlay:this.tooltipContent,placement:"right",trigger:["hover","focus"],arrowContent:t,onPopupAlign:s,destroyTooltipOnHide:!1},e)}return e}},{key:"tooltipContent",value:function(){var e=this.props.polyPhenPrediction?c.createElement("div",null,c.createElement("table",{className:v.default["polyPhen2-tooltip-table"]},c.createElement("tr",null,c.createElement("td",null,"Source"),c.createElement("td",null,c.createElement("a",{href:"http://genetics.bwh.harvard.edu/pph2/"},"PolyPhen-2"))),c.createElement("tr",null,c.createElement("td",null,"Impact"),c.createElement("td",null,c.createElement("span",{className:v.default["polyPhen2-"+this.props.polyPhenPrediction]},this.props.polyPhenPrediction))),(this.props.polyPhenScore||0===this.props.polyPhenScore)&&c.createElement("tr",null,c.createElement("td",null,"Score"),c.createElement("td",null,c.createElement("b",null,this.props.polyPhenScore.toFixed(2)))))):null;return c.createElement("span",null,e)}}],[{key:"download",value:function(e,t){return"impact: "+t+", score: "+e}}]),t}(c.Component);t.default=b,b.POLYPHEN2_URL="http://genetics.bwh.harvard.edu/pph2/"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){e.querySelector(".rc-tooltip-arrow").style.left="10px"}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.placeArrow=i;var l=n(1),u=o(l),c=n(173),d=r(c),p=n(3),f=o(p),h=n(992),m=r(h),y=n(993),g=r(y),v=n(872),b=r(v),_=function(){function e(){a(this,e)}return s(e,null,[{key:"getData",value:function(t,n){var r=null;if(t&&n){var o=t[0],a=n[o.keyword];if(a){var i=e.extractPosition(o.proteinChange);r=a.filter(function(t){var n=e.extractPosition(t.proteinChange);return i&&n&&i===n})}}return r}},{key:"extractPosition",value:function(e){var t=/[0-9]+/g,n=e.match(t);return n?n[0]:null}},{key:"getSortValue",value:function(t,n){var r=e.getData(t,n),o=null;return r&&(o=r.length>0?f.reduce(f.map(r,"count"),function(e,t){return e+t},0):0),0===o&&(o=null),o}},{key:"getDownloadValue",value:function(t,n){var r=e.getSortValue(t,n);return r?""+r:""}},{key:"renderFunction",value:function(t,n){var r=e.getData(t,n),o=-1,a="",s=null,l=void 0;return r&&r.length>0&&(o=f.reduce(f.map(r,"count"),function(e,t){return e+t},0),s=function(){return u.createElement("span",{className:g.default["cosmic-table"]},u.createElement("b",null,o)," occurrences of ",u.createElement("b",null,r[0].keyword)," mutations in COSMIC",u.createElement(m.default,{data:r}))},a=o.toString()),l=u.createElement("div",{className:b.default["integer-data"]},a),s&&(l=u.createElement(d.default,{overlay:s,placement:"topLeft",onPopupAlign:i,trigger:["hover","focus"],destroyTooltipOnHide:!0},l)),l}}]),e}();t.default=_},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(l),c=n(894),d=r(c),p=n(178),f=r(p),h=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),t}(f.default),m=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n}return i(t,e),s(t,[{key:"render",value:function(){var e=this.props,n=e.data,r=e.columns,o=e.initialSortColumn,a=e.initialSortDirection,i=e.initialItemsPerPage,s=n.length>(this.props.initialItemsPerPage||t.defaultProps.initialItemsPerPage);return u.createElement("div",{className:"cbioportal-frontend"},u.createElement(h,{data:n,columns:r||t.defaultProps.columns,initialSortColumn:o,initialSortDirection:a,initialItemsPerPage:i,showCopyDownload:!1,showColumnVisibility:!1,showFilter:!1,showPagination:s,showPaginationAtTop:!0,paginationProps:{showMoreButton:!1}}))}}]),t}(u.Component);t.default=m,m.defaultProps={data:[],columns:[{name:"COSMIC ID",order:1,render:function(e){return u.createElement("span",null,u.createElement("a",{href:"http://cancer.sanger.ac.uk/cosmic/mutation/overview?id="+e.cosmicMutationId,target:"_blank"},e.cosmicMutationId))},sortBy:function(e){return e.cosmicMutationId}},{name:"Protein Change",order:2,render:function(e){return u.createElement("span",null,e.proteinChange)},sortBy:function(e){return d.default.extractSortValue(e.proteinChange)}},{name:"Occurrence",order:3,render:function(e){return u.createElement("span",null,e.count)},sortBy:function(e){return e.count}}],initialSortColumn:"Occurrence",initialSortDirection:"desc",initialItemsPerPage:10}},function(e,t){e.exports={portalWidth:"cosmic-module__portalWidth__3eF_t","cosmic-table":"cosmic-module__cosmic-table__2ms15"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(i),l=n(927),u=r(l),c=n(872),d=r(c),p=function(){function e(){o(this,e)}return a(e,null,[{key:"makeRenderFunction",value:function(e){return(0,u.default)(function(t){var n=e.props.mutationCountCache;return n?n.get({sampleId:t[0].sampleId,molecularProfileId:t[0].molecularProfileId}):{status:"error",data:null}},function(e){return s.createElement("div",{className:d.default["integer-data"]},e.mutationCount)},"Mutation count not available for this sample.")}},{key:"sortBy",value:function(e,t){var n=void 0;if(t){var r=t.get({sampleId:e[0].sampleId,molecularProfileId:e[0].molecularProfileId});n=r&&r.data?r.data.mutationCount:null}else n=null;return n}},{key:"download",value:function(t,n){var r=e.sortBy(t,n);return r?""+r:""}}]),e}();t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(i),l=n(996),u=r(l),c=n(173),d=r(c),p=function(){function e(){o(this,e)}return a(e,null,[{key:"getData",value:function(e){var t=null;return e.length>0&&(t=e[0].validationStatus),t}},{key:"sortValue",value:function(t){return e.getData(t)}},{key:"download",value:function(t){return e.getData(t)||""}},{key:"renderFunction",value:function(t){var n=e.getData(t),r=void 0,o=!1;if(n){var a=e.VALIDATION_STATUS_FORMAT[n.toLowerCase()];a?(r=s.createElement("span",{className:u.default[a.className]},a.text),o=!0):r=s.createElement("span",{className:u.default.other},n)}else r=s.createElement("span",null);return o&&(r=s.createElement(d.default,{overlay:s.createElement("span",null,n),placement:"right"},r)),r}},{key:"VALIDATION_STATUS_FORMAT",get:function(){var e={text:"U",className:"unknown",tooltip:"Unknown"},t={text:"V",className:"valid",tooltip:"Valid"};return{valid:t,validated:t,wildtype:{text:"W",className:"wildtype",tooltip:"Wildtype"},unknown:e,not_tested:e,"not tested":e,none:e,na:e,"n/a":e}}}]),e}();t.default=p},function(e,t){e.exports={portalWidth:"validationStatus-module__portalWidth__yrVHU",unknown:"validationStatus-module__unknown__1XsWI",valid:"validationStatus-module__valid__Ziu-a",wildtype:"validationStatus-module__wildtype__14GJI",other:"validationStatus-module__other__3oLt_"}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a),s=n(871),l=function(e){return e&&e.__esModule?e:{default:e}}(s),u=n(25),c=function(){function e(){r(this,e)}return o(e,null,[{key:"getStudy",value:function(e,t,n){if(!t||!n)return null;var r=e[0].molecularProfileId,o=t[r];return o?n[o.studyId]||null:null}},{key:"renderFunction",value:function(t,n,r){var o=e.getStudy(t,n,r);return o?i.createElement("a",{href:(0,u.getStudySummaryUrl)(o.studyId),target:"_blank"},i.createElement(l.default,{text:o.name,tooltip:i.createElement("div",{style:{maxWidth:300},dangerouslySetInnerHTML:{__html:o.name+": "+o.description}}),maxLength:16})):i.createElement("span",null)}},{key:"getTextValue",value:function(t,n,r){var o=e.getStudy(t,n,r);return o?o.name:""}},{key:"filter",value:function(t,n,r,o){var a=e.getStudy(t,r,o);return!!a&&a.name.toUpperCase().indexOf(n)>-1}}]),e}();t.default=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(s),u=n(63),c=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.defaultTitle="Sorry, something went wrong!",e.defaultTroubleshooting=["Check that your URL parameters are valid.","Make sure you are connected to the internet."],e}return a(t,e),i(t,[{key:"render",value:function(){return l.createElement(u.Modal,{show:this.props.show,onHide:this.props.onHide},l.createElement(u.Modal.Header,{closeButton:!0},l.createElement(u.Modal.Title,null,void 0===this.props.title?this.defaultTitle:this.props.title)),l.createElement(u.Modal.Body,null,l.createElement("p",null,"Troubleshooting:"),l.createElement("ul",null,(this.props.troubleshooting||this.defaultTroubleshooting).map(function(e){return l.createElement("li",null,e)}))))}}]),t}(l.Component);t.default=c},function(e,t,n){"use strict";function r(e){return!!i(e)&&(a(window)&&i(window.Node)?e instanceof window.Node:"number"==typeof e.nodeType&&"string"==typeof e.nodeName)}function o(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=arguments.length<=2||void 0===arguments[2]||arguments[2];if(!r(e))throw new Error("parameter 1 is not of type 'Element'");if(!1===n)return t;if(s)var o=e.ownerDocument.defaultView.getComputedStyle(e,null),i=!0===n?o:Object.keys(n);else var o=a(e.currentStyle)?e.currentStyle:e.style,i=!0===n?Object.keys(o):Object.keys(n);for(var l=0,u=i.length;l<u;l++){var c=i[l],d=!0===n||n[c];if(!1!==d&&a(d)){var p=s?o.getPropertyValue(c):o[c];"string"==typeof p&&""!==p&&(!0!==d&&p===d||(t[c]=p))}}return t}Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){return void 0!==e},i=function(e){return null!==e&&"object"==typeof e},s=a(window)&&a(window.getComputedStyle);t.default=o,e.exports=t.default},function(e,t,n){var r,o=o||function(e){"use strict";if(!(void 0===e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=e.document,n=function(){return e.URL||e.webkitURL||e},r=t.createElementNS("http://www.w3.org/1999/xhtml","a"),o="download"in r,a=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},i=/constructor/i.test(e.HTMLElement)||e.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent),l=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},u=function(e){var t=function(){"string"==typeof e?n().revokeObjectURL(e):e.remove()};setTimeout(t,4e4)},c=function(e,t,n){t=[].concat(t);for(var r=t.length;r--;){var o=e["on"+t[r]];if("function"==typeof o)try{o.call(e,n||e)}catch(e){l(e)}}},d=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},p=function(t,l,p){p||(t=d(t));var f,h=this,m=t.type,y="application/octet-stream"===m,g=function(){c(h,"writestart progress write writeend".split(" "))};if(h.readyState=h.INIT,o)return f=n().createObjectURL(t),void setTimeout(function(){r.href=f,r.download=l,a(r),g(),u(f),h.readyState=h.DONE});!function(){if((s||y&&i)&&e.FileReader){var r=new FileReader;return r.onloadend=function(){var t=s?r.result:r.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(t,"_blank")||(e.location.href=t),t=void 0,h.readyState=h.DONE,g()},r.readAsDataURL(t),void(h.readyState=h.INIT)}if(f||(f=n().createObjectURL(t)),y)e.location.href=f;else{e.open(f,"_blank")||(e.location.href=f)}h.readyState=h.DONE,g(),u(f)}()},f=p.prototype,h=function(e,t,n){return new p(e,t||e.name||"download",n)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=d(e)),navigator.msSaveOrOpenBlob(e,t)}:(f.abort=function(){},f.readyState=f.INIT=0,f.WRITING=1,f.DONE=2,f.error=f.onwritestart=f.onprogress=f.onwrite=f.onabort=f.onerror=f.onwriteend=null,h)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);void 0!==e&&e.exports?e.exports.saveAs=o:null!==n(287)&&null!==n(874)&&void 0!==(r=function(){return o}.call(t,n,t,e))&&(e.exports=r)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.MutationColor=t.SideChain=t.ProteinColor=t.ProteinScheme=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1064),i=t.ProteinScheme=void 0;!function(e){e[e.CARTOON=0]="CARTOON",e[e.SPACE_FILLING=1]="SPACE_FILLING",e[e.TRACE=2]="TRACE",e[e.BALL_AND_STICK=3]="BALL_AND_STICK",e[e.RIBBON=4]="RIBBON"}(i||(t.ProteinScheme=i={}));var s=t.ProteinColor=void 0;!function(e){e[e.UNIFORM=0]="UNIFORM",e[e.SECONDARY_STRUCTURE=1]="SECONDARY_STRUCTURE",e[e.NC_RAINBOW=2]="NC_RAINBOW",e[e.ATOM_TYPE=3]="ATOM_TYPE"}(s||(t.ProteinColor=s={}));var l=t.SideChain=void 0;!function(e){e[e.ALL=0]="ALL",e[e.SELECTED=1]="SELECTED",e[e.NONE=2]="NONE"}(l||(t.SideChain=l={}));var u=t.MutationColor=void 0;!function(e){e[e.UNIFORM=0]="UNIFORM",e[e.MUTATION_TYPE=1]="MUTATION_TYPE",e[e.NONE=2]="NONE"}(u||(t.MutationColor=u={}));var c=function(){function e(){r(this,e)}return o(e,[{key:"updateVisualStyle",value:function(e,t,n){var r=this.updateScheme(n);this.updateBaseVisualStyle(r,n),this.updateChainVisualStyle(t,r,n),this.updateResidueStyle(e,t,n,r),this.updateBoundMolecules(n)}},{key:"updateScheme",value:function(e){var t=this.selectAll();return this.setScheme(e.proteinScheme,t)}},{key:"updateBaseVisualStyle",value:function(t,n){var r=e.defaultProps,o=this.selectAll();this.setColor(n.baseColor||r.baseColor,o,t),this.setTransparency(n.baseTranslucency||r.baseTranslucency,o,t)}},{key:"updateChainVisualStyle",value:function(t,n,r){var o=e.defaultProps,a=this.selectChain(t);this.setColor(r.chainColor||o.chainColor,a,n),this.setTransparency(r.chainTranslucency||o.chainTranslucency,a,n),r.proteinColor===s.ATOM_TYPE?(a=this.selectChain(t),this.cpkColor(a,n)):r.proteinColor===s.SECONDARY_STRUCTURE?(a=this.selectAlphaHelix(t),this.setColor((r.structureColors||o.structureColors).alphaHelix,a,n),a=this.selectBetaSheet(t),this.setColor((r.structureColors||o.structureColors).betaSheet,a,n)):r.proteinColor===s.NC_RAINBOW&&(a=this.selectChain(t),this.rainbowColor(a,n))}},{key:"updateBoundMolecules",value:function(e){e.displayBoundMolecules||this.hideBoundMolecules()}},{key:"convertPositionsToResCode",value:function(e){var t=[];return e.forEach(function(e){t=t.concat((0,a.convertPdbPosToResCode)(e))}),t}}]),e}();c.defaultProps={pdbUri:"https://files.rcsb.org/view/",proteinScheme:i.CARTOON,displayBoundMolecules:!0,backgroundColor:"#FFFFFF",baseColor:"#DDDDDD",structureColors:{alphaHelix:"#FFA500",betaSheet:"#0000FF",loop:"#DDDDDD"},baseTranslucency:5,chainColor:"#888888",chainTranslucency:0,proteinColor:s.UNIFORM,mutationColor:u.MUTATION_TYPE,uniformMutationColor:"#8A2BE2",highlightColor:"#FFDD00",sideChain:l.SELECTED},t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(1),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),d=n(33),p=n(856),f=r(p),h=n(183),m=n(1141),y=r(m),g=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},v=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){var e=null,t=null;if(this.props.cache){var n=this.props.cache.get(this.props.pdbId);if(null===n)e=c.createElement(f.default,{status:p.TableCellStatus.LOADING}),t=c.createElement(f.default,{status:p.TableCellStatus.LOADING});else if("error"===n.status)e=c.createElement(f.default,{status:p.TableCellStatus.ERROR}),t=c.createElement(f.default,{status:p.TableCellStatus.ERROR});else if(null===n.data)e=c.createElement(f.default,{status:p.TableCellStatus.NA}),t=c.createElement(f.default,{status:p.TableCellStatus.NA});else{var r=(0,h.generatePdbInfoSummary)(n.data,this.props.chainId);e=r.pdbInfo,t=r.moleculeInfo}}return c.createElement("div",{className:this.props.truncateText?"col col-sm-12":""},c.createElement("div",{className:this.props.truncateText?"row":""},c.createElement("div",{className:"pull-left",style:{paddingRight:5}},c.createElement("span",{style:{fontWeight:this.props.summaryFormat?"bold":"normal"}},c.createElement("span",null,this.props.summaryFormat?"pdb":"PDB"),!this.props.summaryFormat&&c.createElement("span",{style:{paddingLeft:5}},c.createElement("a",{href:"http://www.rcsb.org/pdb/explore/explore.do?structureId="+this.props.pdbId,target:"_blank"},c.createElement("b",null,this.props.pdbId))),c.createElement("span",null,":"))),c.createElement("div",{"data-test":"pdbChainInfoText"},this.props.truncateText?c.createElement(y.default,{text:e}):c.createElement("span",null,e))),c.createElement("div",{className:this.props.truncateText?"row":""},c.createElement("div",{className:"pull-left",style:{paddingRight:5}},c.createElement("span",{style:{fontWeight:this.props.summaryFormat?"bold":"normal"}},c.createElement("span",null,this.props.summaryFormat?"chain":"Chain"),!this.props.summaryFormat&&c.createElement("span",{style:{paddingLeft:3}},c.createElement("b",null,this.props.chainId)),c.createElement("span",null,":"))),c.createElement("div",null,this.props.truncateText?c.createElement(y.default,{text:t}):c.createElement("span",null,t))))}}]),t}(c.Component);v=g([d.observer],v),t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d=n(1),p=o(d),f=n(33),h=n(13),m=n(63),y=n(930),g=r(y),v=n(931),b=n(3),_=o(b),w=n(862),x=n(889),S=r(x),C=n(179),k=r(C),E=n(1004),M=n(863),A=r(M),T=n(877),O=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},P=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(i,s)}l((r=r.apply(e,t||[])).next())})},j=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.isTooltipHovered=!1,n.tooltipCounter=0,n.alteredLegendText="Cases with Alteration(s) in Query Gene(s)",n.unalteredLegendText="Cases without Alteration(s) in Query Gene(s)",n.svgsaver=new S.default,n.styleOptsDefaultProps={width:900,height:500,padding:{top:20,bottom:50,left:60,right:20},axis:{x:{axisLabel:{padding:35},grid:{opacity:0}},y:{axisLabel:{padding:45,fill:"black"},grid:{opacity:0}}},legend:{x:600,y:40}},n.tooltipMouseEnter=n.tooltipMouseEnter.bind(n),n.tooltipMouseLeave=n.tooltipMouseLeave.bind(n),n.downloadSvg=n.downloadSvg.bind(n),n.downloadPng=n.downloadPng.bind(n),n.downloadData=n.downloadData.bind(n),n}return s(t,e),u(t,[{key:"tooltipMouseEnter",value:function(){this.isTooltipHovered=!0}},{key:"tooltipMouseLeave",value:function(){this.isTooltipHovered=!1,this.tooltipModel=null}},{key:"downloadSvg",value:function(){this.svgsaver.asSvg(this.svgContainer.firstChild,this.props.fileName+".svg")}},{key:"downloadPng",value:function(){this.svgsaver.asPng(this.svgContainer.firstChild,this.props.fileName+".png")}},{key:"downloadData",value:function(){(0,k.default)((0,E.getDownloadContent)((0,E.getScatterData)(this.sortedAlteredPatientSurvivals,this.alteredEstimates),(0,E.getScatterData)(this.sortedUnalteredPatientSurvivals,this.unalteredEstimates),this.props.title,this.alteredLegendText,this.unalteredLegendText),this.props.fileName+".txt")}},{key:"render",value:function(){var e=this,t=[{target:"data",eventHandlers:{onMouseOver:function(){return[{target:"data",mutation:function(t){return e.tooltipModel=t,e.tooltipCounter++,{active:!0}}}]},onMouseOut:function(){return[{target:"data",mutation:function(){return P(e,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,v.sleep)(100);case 2:return this.isTooltipHovered||1!==this.tooltipCounter||(this.tooltipModel=null),this.tooltipCounter--,e.abrupt("return",{active:!1});case 5:case"end":return e.stop()}},e,this)}))}}]}}}];return p.createElement("div",{className:"posRelative",style:{width:this.styleOpts.width+20}},p.createElement("div",{className:"borderedChart","data-test":"SurvivalChart",style:{width:"100%"}},this.props.showDownloadButtons&&p.createElement("div",{className:"btn-group",style:{position:"absolute",zIndex:10,right:10},role:"group"},p.createElement("button",{className:"btn btn-default btn-xs",onClick:this.downloadSvg},"SVG ",p.createElement("i",{className:"fa fa-cloud-download"})),p.createElement("button",{className:"btn btn-default btn-xs",onClick:this.downloadPng},"PNG ",p.createElement("i",{className:"fa fa-cloud-download"})),p.createElement("button",{className:"btn btn-default btn-xs",onClick:this.downloadData},"Data ",p.createElement("i",{className:"fa fa-cloud-download"}))),p.createElement(w.VictoryChart,{containerComponent:p.createElement(w.VictoryContainer,{responsive:!1,containerRef:function(t){return e.svgContainer=t}}),height:this.styleOpts.height,width:this.styleOpts.width,padding:this.styleOpts.padding,theme:A.default},p.createElement(w.VictoryAxis,{style:this.styleOpts.axis.x,crossAxis:!1,tickCount:11,label:this.props.xAxisLabel}),p.createElement(w.VictoryAxis,{label:this.props.yAxisLabel,dependentAxis:!0,tickFormat:function(e){return e+"%"},tickCount:11,style:this.styleOpts.axis.y,domain:[0,100],crossAxis:!1}),p.createElement(w.VictoryLine,{interpolation:"stepAfter",data:(0,E.getLineData)(this.sortedAlteredPatientSurvivals,this.alteredEstimates),style:{data:{stroke:"red",strokeWidth:1}}}),p.createElement(w.VictoryLine,{interpolation:"stepAfter",data:(0,E.getLineData)(this.sortedUnalteredPatientSurvivals,this.unalteredEstimates),style:{data:{stroke:"blue",strokeWidth:1}}}),p.createElement(w.VictoryScatter,{data:(0,E.getScatterDataWithOpacity)(this.sortedAlteredPatientSurvivals,this.alteredEstimates),symbol:"plus",style:{data:{fill:"red",opacity:function(e){return e.opacity}}},size:3}),p.createElement(w.VictoryScatter,{data:(0,E.getScatterDataWithOpacity)(this.sortedUnalteredPatientSurvivals,this.unalteredEstimates),symbol:"plus",style:{data:{fill:"blue",opacity:function(e){return e.opacity}}},size:3}),p.createElement(w.VictoryScatter,{data:(0,E.getScatterData)(this.sortedAlteredPatientSurvivals,this.alteredEstimates),symbol:"circle",style:{data:{fill:"red",fillOpacity:function(e,t){return t?.3:0}}},size:10,events:t}),p.createElement(w.VictoryScatter,{data:(0,E.getScatterData)(this.sortedUnalteredPatientSurvivals,this.unalteredEstimates),symbol:"circle",style:{data:{fill:"blue",fillOpacity:function(e,t){return t?.3:0}}},size:10,events:t}),this.props.showLegend&&p.createElement(w.VictoryLegend,{x:this.styleOpts.legend.x,y:this.styleOpts.legend.y,data:[{name:this.alteredLegendText,symbol:{fill:"red",type:"square"}},{name:this.unalteredLegendText,symbol:{fill:"blue",type:"square"}},{name:"Logrank Test P-Value: "+(0,T.toConditionalPrecision)(this.logRank,3,.001),symbol:{opacity:0}}]}))),this.tooltipModel&&p.createElement(m.Popover,l({arrowOffsetTop:56,className:g.default.Tooltip,positionLeft:this.tooltipModel.x+15},{container:this},{positionTop:this.tooltipModel.y-60,onMouseEnter:this.tooltipMouseEnter,onMouseLeave:this.tooltipMouseLeave}),p.createElement("div",null,"Patient ID: ",p.createElement("a",{href:"/case.do#/patient?caseId="+this.tooltipModel.datum.patientId+"&studyId="+this.tooltipModel.datum.studyId,target:"_blank"},this.tooltipModel.datum.patientId),p.createElement("br",null),this.props.yLabelTooltip,": ",this.tooltipModel.datum.y.toFixed(2),"%",p.createElement("br",null),this.tooltipModel.datum.status?this.props.xLabelWithEventTooltip:this.props.xLabelWithoutEventTooltip,": ",this.tooltipModel.datum.x.toFixed(2)," months ",this.tooltipModel.datum.status?"":"(censored)")),this.props.showTable&&p.createElement("table",{className:"table table-striped",style:{marginTop:20,width:"100%"}},p.createElement("tbody",null,p.createElement("tr",null,p.createElement("td",null),p.createElement("td",null,this.props.totalCasesHeader),p.createElement("td",null,this.props.statusCasesHeader),p.createElement("td",null,this.props.medianMonthsHeader)),p.createElement("tr",null,p.createElement("td",null,this.alteredLegendText),(0,E.getStats)(this.sortedAlteredPatientSurvivals,this.alteredEstimates).map(function(e){return p.createElement("td",null,p.createElement("b",null,e))})),p.createElement("tr",null,p.createElement("td",null,this.unalteredLegendText),(0,E.getStats)(this.sortedUnalteredPatientSurvivals,this.unalteredEstimates).map(function(e){return p.createElement("td",null,p.createElement("b",null,e))})))))}},{key:"styleOpts",get:function(){var e=_.merge({},this.styleOptsDefaultProps,this.props.styleOpts);return e.padding.right=this.props.showLegend?300:e.padding.right,e.legend.x=e.width-e.padding.right,e}},{key:"sortedAlteredPatientSurvivals",get:function(){return this.props.alteredPatientSurvivals.sort(function(e,t){return e.months-t.months})}},{key:"sortedUnalteredPatientSurvivals",get:function(){return this.props.unalteredPatientSurvivals.sort(function(e,t){return e.months-t.months})}},{key:"alteredEstimates",get:function(){return(0,E.getEstimates)(this.sortedAlteredPatientSurvivals)}},{key:"unalteredEstimates",get:function(){return(0,E.getEstimates)(this.sortedUnalteredPatientSurvivals)}},{key:"logRank",get:function(){return(0,E.calculateLogRank)(this.sortedAlteredPatientSurvivals,this.sortedUnalteredPatientSurvivals)}}]),t}(p.Component);j.defaultProps={showTable:!0,showLegend:!0,showDownloadButtons:!0},O([h.observable],j.prototype,"tooltipModel",void 0),O([h.computed],j.prototype,"styleOpts",null),O([h.computed],j.prototype,"sortedAlteredPatientSurvivals",null),O([h.computed],j.prototype,"sortedUnalteredPatientSurvivals",null),O([h.computed],j.prototype,"alteredEstimates",null),O([h.computed],j.prototype,"unalteredEstimates",null),O([h.computed],j.prototype,"logRank",null),j=O([f.observer],j),t.default=j},function(e,t,n){"use strict";function r(e){var t=[],n=1;return e.forEach(function(r,o){if(r.status){var a=e.length-o,i=n*((a-1)/a);n=i,t.push(i)}else t.push(n)}),t}function o(e,t){for(var n="NA",r=0;r<t.length;r++)if(t[r]<=.5){n=e[r].months.toString();break}return n}function a(e,t){var n=[];return n.push({x:0,y:100}),e.forEach(function(e,r){n.push({x:e.months,y:100*t[r]})}),n}function i(e,t){return e.map(function(e,n){return{x:e.months,y:100*t[n],patientId:e.patientId,studyId:e.studyId,status:e.status}})}function s(e,t){var n=i(e,t),r=[],o=void 0;return e.forEach(function(e,a){var i=t[a],s=1;o&&i!==o&&(s=0),o=i,r.push(Object.assign({},n[a],{opacity:s}))}),r}function l(e,t){return[e.length,e.filter(function(e){return!0===e.status}).length,o(e,t)]}function u(e,t){for(var n=0,r=0,o=0,a=0,i=0;n<e.length&&r<t.length;){var s=0,l=0,u=e.length-n,c=t.length-r,d=e[n],p=t[r];(d.months<p.months||d.months===p.months)&&(d.status&&(s=1),n+=1),(d.months>p.months||d.months===p.months)&&(p.status&&(l=1),r+=1);var f=s+l,m=u+c,y=u/m*f,g=f*(m-f)*u*c/(m*m*(m-1));o+=s,a+=y,i+=g}var v=(o-a)*(o-a)/i;return 1-h.default.chisquare.cdf(v,1)}function c(e,t,n,r,o){var a=n+"\n\n"+r+"\n";return a+=(0,p.tsvFormat)(d(e))+"\n\n"+o+"\n",a+=(0,p.tsvFormat)(d(t))}function d(e){var t=[];return e.map(function(n,r){t.push({"Case ID":n.patientId,"Study ID":n.studyId,"Number at Risk":e.length-r,Status:n.status?"deceased":"censored","Survival Rate":n.y/100,"Time (months)":n.x})}),t}Object.defineProperty(t,"__esModule",{value:!0}),t.getEstimates=r,t.getMedian=o,t.getLineData=a,t.getScatterData=i,t.getScatterDataWithOpacity=s,t.getStats=l,t.calculateLogRank=u,t.getDownloadContent=c,t.convertScatterDataToDownloadData=d;var p=n(932),f=n(906),h=function(e){return e&&e.__esModule?e:{default:e}}(f)},function(e,t,n){"use strict";n.d(t,"c",function(){return a}),n.d(t,"d",function(){return i}),n.d(t,"a",function(){return s}),n.d(t,"b",function(){return l});var r=n(883),o=Object(r.a)(","),a=o.parse,i=o.parseRows,s=o.format,l=o.formatRows},function(e,t,n){"use strict";n.d(t,"c",function(){return a}),n.d(t,"d",function(){return i}),n.d(t,"a",function(){return s}),n.d(t,"b",function(){return l});var r=n(883),o=Object(r.a)("\t"),a=o.parse,i=o.parseRows,s=o.format,l=o.formatRows},function(e,t,n){"use strict";function r(e,t,n,r){var o=this;return r.initIteration(t,n),function(){return T(o,void 0,void 0,regeneratorRuntime.mark(function n(){var o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.next(t,5);case 2:n.t0=function(e){return{entrezGeneId:e.entrezGeneId,hugoGeneSymbol:e.hugoGeneSymbol,correlationValue:e.correlationValue,molecularProfileId:e.zScoreGeneticProfileId}},o=n.sent.map(n.t0),(0,E.runInAction)("genesetHeatmapExpansion",function(){var n=e.expansionsByGenesetHeatmapTrackKey.get(t)||[];e.expansionsByGenesetHeatmapTrackKey.set(t,n.concat(o))});case 5:case"end":return n.stop()}},n,this)}))}}function o(e,t,n,r,o){return(0,E.action)("genesetHeatmapUnexpansion",function(){var a=e.expansionsByGenesetHeatmapTrackKey.get(t);if(!a)throw new Error("Track '"+t+"' has no expansions to remove.");if(r===e.genesetHeatmapTrackGroup){var i=a.findIndex(function(e){return e.entrezGeneId===n});-1!==i&&(a.splice(i,1),a.length||o())}})}function a(e){return(0,M.isMergedTrackFilter)(e)?e.label||e.list.map(function(e){return e.gene}).join(" / "):e.gene}function i(e){return(0,M.isMergedTrackFilter)(e)?"["+e.list.map(function(e){return e.oql_line}).join(" ")+"]":e.oql_line}function s(e,t){e.suppressRendering(),e.keepSorted(!1),t(),e.keepSorted(!0),e.releaseRendering()}function l(e){var t=void 0,n=void 0,r=void 0,o=void 0;return"METHYLATION"===e?(t=[0,1],n="Methylation Heatmap",o=[0,1],r=[[0,0,0,1],[255,0,0,1]]):(t=[-3,3],n="Expression Heatmap",o=[-3,0,3],r=[[0,0,255,1],[0,0,0,1],[255,0,0,1]]),{type:"gradient",legend_label:n,value_key:"profile_data",value_range:t,colors:r,value_stop_points:o,null_color:"rgba(224,224,224,1)"}}function u(){return{type:"gradient",legend_label:"Gene Set Heatmap",value_key:"profile_data",value_range:[-1,1],colors:[[39,100,25,1],[77,146,33,1],[127,188,65,1],[184,225,134,1],[230,245,208,1],[247,247,247,1],[253,224,239,1],[241,182,218,1],[222,119,174,1],[197,27,125,1],[142,1,82,1]],value_stop_points:[-1,-.8,-.6,-.4,-.2,0,.2,.4,.6,.8,1],null_color:"rgba(224,224,224,1)"}}function c(e,t){return e||t?!e&&t?w.genetic_rule_set_same_color_for_all_recurrence:e&&!t?w.genetic_rule_set_different_colors_no_recurrence:w.genetic_rule_set_different_colors_recurrence:w.genetic_rule_set_same_color_for_all_no_recurrence}function d(e){return"number"===e.datatype?{type:"bar",value_key:"attr_val",value_range:e.numberRange,log_scale:e.numberLogScale}:"counts"===e.datatype?{type:"stacked_bar",value_key:"attr_val",categories:e.countsCategoryLabels,fills:e.countsCategoryFills}:{type:"categorical",category_key:"attr_val"}}function p(e,t){if(0===t)return"N/P";var n=e/t,r=100*n,o=void 0;return n<.03?(o=r.toFixed(1),"0"===o[o.length-1]&&(o=r.toFixed())):o=r.toFixed(),o+"%"}function f(e,t,n,r){var o=t.oql instanceof Array?t.oql:[t.oql.gene],a=e?k.default.uniq(k.default.flatMap(o,function(e){return n[e]})).length:k.default.uniq(k.default.flatMap(o,function(e){return r[e]})).length,i=e?Object.keys(t.cases.samples).filter(function(e){return!!t.cases.samples[e].length}).length:Object.keys(t.cases.patients).filter(function(e){return!!t.cases.patients[e].length}).length;return{sequenced:a,altered:i,percent:p(i,a)}}function h(e){var t=e.sampleMode,n=e.samples,r=e.patients,o=e.coverageInformation,s=e.sequencedSampleKeysByGene,l=e.sequencedPatientKeysByGene,u=e.selectedMolecularProfiles,c=e.expansionIndexMap;return function e(d,p,h){var m=d.cases,y=d.oql,g=d.list,v=(0,M.isMergedTrackFilter)(y)?y.list.map(function(e){return e.gene}):[y.gene],b=t?(0,S.makeGeneticTrackData)(m.samples,v,n,o,u):(0,S.makeGeneticTrackData)(m.patients,v,r,o,u),_=f(t,{cases:m,oql:v},s,l).percent,w=void 0===h?"GENETICTRACK_"+p:h+"_EXPANSION_"+p,x=(0,M.isMergedTrackFilter)(y)?function(){c.set(w,k.default.range(y.list.length))}:void 0,C=void 0!==h?function(){c.get(h).remove(p)}:void 0,E=(c.get(w)||[]).map(function(t){return e(g[t],t,w)});return{key:w,label:(void 0!==h?"  ":"")+a(y),labelColor:void 0!==h?"grey":void 0,oql:i(y),info:_,data:b,expansionCallback:x,removeCallback:C,expansionTrackList:E.length?E:void 0}}}function m(e,t){var n=this;return(0,x.remoteData)({await:function(){return[e.props.store.samples,e.props.store.patients,e.props.store.putativeDriverFilteredCaseAggregatedDataByUnflattenedOQLLine,e.props.store.coverageInformation,e.props.store.sequencedSampleKeysByGene,e.props.store.sequencedPatientKeysByGene,e.props.store.selectedMolecularProfiles]},invoke:function(){return T(n,void 0,void 0,regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=h({sampleMode:t,samples:e.props.store.samples.result,patients:e.props.store.patients.result,coverageInformation:e.props.store.coverageInformation.result,sequencedSampleKeysByGene:e.props.store.sequencedSampleKeysByGene.result,sequencedPatientKeysByGene:e.props.store.sequencedPatientKeysByGene.result,selectedMolecularProfiles:e.props.store.selectedMolecularProfiles.result,expansionIndexMap:e.expansionsByGeneticTrackKey}),n.abrupt("return",e.props.store.putativeDriverFilteredCaseAggregatedDataByUnflattenedOQLLine.result.map(function(e,t){return r(e,t,void 0)}));case 2:case"end":return n.stop()}},n,this)}))},default:[]})}function y(e,t){var n=this;return(0,x.remoteData)({await:function(){var t=[e.props.store.samples,e.props.store.patients,e.clinicalAttributesById];if(e.clinicalAttributesById.isComplete){var n=e.selectedClinicalAttributeIds.keys().map(function(t){return e.clinicalAttributesById.result[t]}).filter(function(e){return!!e});t=t.concat(e.props.store.oncoprintClinicalDataCache.getAll(n))}return t},invoke:function(){return T(n,void 0,void 0,regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(0!==e.selectedClinicalAttributeIds.keys().length){n.next=2;break}return n.abrupt("return",[]);case 2:return r=e.selectedClinicalAttributeIds.keys().map(function(t){return e.clinicalAttributesById.result[t]}).filter(function(e){return!!e}),n.abrupt("return",r.map(function(n){var r=e.props.store.oncoprintClinicalDataCache.get(n).result,o={key:e.clinicalAttributeIdToTrackKey(n.clinicalAttributeId),label:n.displayName,description:n.description,data:(0,S.makeClinicalTrackData)(n,t?e.props.store.samples.result:e.props.store.patients.result,r)};return"NUMBER"===n.datatype?(o.datatype="number",n.clinicalAttributeId===A.SpecialAttribute.FractionGenomeAltered?o.numberRange=[0,1]:n.clinicalAttributeId===A.SpecialAttribute.MutationCount&&(o.numberLogScale=!0)):"STRING"===n.datatype?o.datatype="string":n.clinicalAttributeId===A.SpecialAttribute.MutationSpectrum&&(o.datatype="counts",o.countsCategoryLabels=["C>A","C>G","C>T","T>A","T>C","T>G"],o.countsCategoryFills=["#3D6EB1","#8EBFDC","#DFF1F8","#FCE08E","#F78F5E","#D62B23"]),0===n.clinicalAttributeId.indexOf(A.SpecialAttribute.Profiled)&&(o.na_legend_label="No"),o}));case 4:case"end":return n.stop()}},n,this)}))},default:[]})}function g(e,t){var n=this;return(0,x.remoteData)({await:function(){return[e.props.store.samples,e.props.store.patients,e.props.store.molecularProfileIdToMolecularProfile,e.props.store.geneMolecularDataCache]},invoke:function(){return T(n,void 0,void 0,regeneratorRuntime.mark(function n(){var r,o,a,i,s,l,u;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props.store.molecularProfileIdToMolecularProfile.result,o=e.molecularProfileIdToHeatmapTracks,a=k.default.flatten(o.values().map(function(e){return e.genes.keys()})),n.next=5,e.props.store.geneCache.getPromise(a.map(function(e){return{hugoGeneSymbol:e}}),!0);case 5:return i=n.sent,s=k.default.flatten(o.entries().map(function(t){return t[1].genes.keys().map(function(n){return{molecularProfileId:t[0],entrezGeneId:e.props.store.geneCache.get({hugoGeneSymbol:n}).data.entrezGeneId,hugoGeneSymbol:n.toUpperCase()}})})),n.next=9,e.props.store.geneMolecularDataCache.result.getPromise(s,!0);case 9:return l=e.props.store.samples.result,u=e.props.store.patients.result,n.abrupt("return",s.map(function(n){var a=n.molecularProfileId,i=n.hugoGeneSymbol,s=e.props.store.geneMolecularDataCache.result.get(n).data;return{key:"HEATMAPTRACK_"+a+","+i,label:i,molecularProfileId:a,molecularAlterationType:r[a].molecularAlterationType,datatype:r[a].datatype,data:(0,S.makeHeatmapTrackData)("hugo_gene_symbol",i,t?l:u,s),trackGroupIndex:o.get(a).trackGroupIndex,onRemove:(0,E.action)(function(){var t=o.get(a);t&&(t.genes.delete(i),t.genes.size||o.delete(a)),o.has(a)||"heatmap"!==e.sortMode.type||e.sortMode.clusteredHeatmapProfile!==a||e.sortByData()})}}));case 12:case"end":return n.stop()}},n,this)}))},default:[]})}function v(e,t){var n=this;return(0,x.remoteData)({await:function(){return[e.props.store.samples,e.props.store.patients,e.props.store.molecularProfileIdToMolecularProfile,e.props.store.geneMolecularDataCache,e.props.store.genesetCorrelatedGeneCache]},invoke:function(){return T(n,void 0,void 0,regeneratorRuntime.mark(function n(){var r,a,i,s,l,u,c,d,p;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props.store.samples.result,a=e.props.store.patients.result,i=e.props.store.molecularProfileIdToMolecularProfile.result,s=e.props.store.geneMolecularDataCache.result,l=e.props.store.genesetCorrelatedGeneCache.result,u=e.genesetHeatmapTrackGroup,c=e.expansionsByGenesetHeatmapTrackKey,d=k.default.flatten(c.values().map(function(e){return e.slice()})).map(function(e){return{entrezGeneId:e.entrezGeneId,molecularProfileId:e.molecularProfileId}}),n.next=10,s.getPromise(d,!0);case 10:return p={},c.entries().forEach(function(n){var c=_(n,2),d=c[0],f=c[1];p[d]=f.map(function(n){var c=n.entrezGeneId,p=n.hugoGeneSymbol,f=n.molecularProfileId,h=n.correlationValue,m=s.get({entrezGeneId:c,molecularProfileId:f}).data,y=i[f];return{key:"EXPANSIONTRACK_"+d+","+p+",GROUP"+u,label:"  "+p,labelColor:"grey",info:h.toFixed(2),molecularProfileId:f,molecularAlterationType:y.molecularAlterationType,datatype:y.datatype,data:(0,S.makeHeatmapTrackData)("hugo_gene_symbol",p,t?r:a,m),trackGroupIndex:u,onRemove:o(e,d,c,u,l.reset.bind(l,d))}})}),n.abrupt("return",p);case 13:case"end":return n.stop()}},n,this)}))},default:{}})}function b(e,t,n){var o=this;return(0,x.remoteData)({await:function(){return[e.props.store.samples,e.props.store.patients,e.props.store.genesetMolecularProfile,e.props.store.genesetMolecularDataCache,e.props.store.genesetLinkMap,e.props.store.genesetCorrelatedGeneCache,n]},invoke:function(){return T(o,void 0,void 0,regeneratorRuntime.mark(function o(){var a,i,s,l,u,c,d,p,f,h,m;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(a=e.props.store.samples.result,i=e.props.store.patients.result,s=e.props.store.genesetMolecularProfile.result,l=e.props.store.genesetMolecularDataCache.result,u=e.props.store.genesetLinkMap.result,c=e.props.store.genesetCorrelatedGeneCache.result,d=n.result,p=e.genesetHeatmapTrackGroup,s.isApplicable){o.next=10;break}return o.abrupt("return",[]);case 10:return f=s.value.molecularProfileId,h=e.props.store.genesetIds,m=h.map(function(e){return{molecularProfileId:f,genesetId:e}}),o.next=15,l.getPromise(m,!0);case 15:return o.abrupt("return",h.map(function(n){var o="GENESETHEATMAPTRACK_"+f+","+n;return{key:"GENESETHEATMAPTRACK_"+f+","+n+",GROUP"+p,label:n,molecularProfileId:f,molecularAlterationType:s.value.molecularAlterationType,datatype:s.value.datatype,trackLinkUrl:u[n],data:(0,S.makeHeatmapTrackData)("geneset_id",n,t?a:i,l.get({molecularProfileId:f,genesetId:n}).data.map(function(e){return Object.assign({},e,{value:parseFloat(e.value)})})),trackGroupIndex:p,expansionCallback:r(e,o,{molecularProfileId:f,genesetId:n},c),expansionTrackList:d[o]}}));case 16:case"end":return o.stop()}},o,this)}))},default:[]})}Object.defineProperty(t,"__esModule",{value:!0});var _=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.doWithRenderingSuppressedAndSortingOff=s,t.getHeatmapTrackRuleSetParams=l,t.getGenesetHeatmapTrackRuleSetParams=u,t.getGeneticTrackRuleSetParams=c,t.getClinicalTrackRuleSetParams=d,t.percentAltered=p,t.alterationInfoForCaseAggregatedDataByOQLLine=f,t.makeGeneticTrackWith=h,t.makeGeneticTracksMobxPromise=m,t.makeClinicalTracksMobxPromise=y,t.makeHeatmapTracksMobxPromise=g,t.makeGenesetHeatmapExpansionsMobxPromise=v,t.makeGenesetHeatmapTracksMobxPromise=b;var w=n(1175),x=n(91),S=n(1068),C=n(3),k=function(e){return e&&e.__esModule?e:{default:e}}(C),E=n(13),M=n(93),A=n(291),T=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(i,s)}l((r=r.apply(e,t||[])).next())})}},function(e,t,n){e.exports=n(6)(92)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=n(2),l=r(s),u=n(907),c=r(u),d=n(1),p=r(d),f=n(34),h=r(f),m=n(908),y=r(m),g=n(878),v=r(g),b=n(1206),_=r(b),w=function(e){function t(){var n,r,i;o(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=a(this,e.call.apply(e,[this].concat(l))),r.setContainer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.props;r._portalContainerNode=(0,y.default)(e.container,(0,v.default)(r).body)},r.getMountNode=function(){return r._portalContainerNode},i=n,a(r,i)}return i(t,e),t.prototype.componentDidMount=function(){this.setContainer(),this.forceUpdate(this.props.onRendered)},t.prototype.componentWillReceiveProps=function(e){e.container!==this.props.container&&this.setContainer(e)},t.prototype.componentWillUnmount=function(){this._portalContainerNode=null},t.prototype.render=function(){return this.props.children&&this._portalContainerNode?h.default.createPortal(this.props.children,this._portalContainerNode):null},t}(p.default.Component);w.displayName="Portal",w.propTypes={container:l.default.oneOfType([c.default,l.default.func]),onRendered:l.default.func},t.default=h.default.createPortal?w:_.default,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=n(1),d=o(c),p=n(1011),f=r(p),h=n(859),m=n(855),y=o(m),g=n(1026),v=r(g),b=n(33),_=n(1027),w=r(_),x=n(1028),S=r(x),C=n(1036),k=r(C),E=n(864),M=r(E),A=n(175),T=n(293),O=n(64),P=r(O),j=n(1052),I=r(j),D=n(1054),N=r(D),R=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},L=y,F=function(e){function t(){a(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.handleSubmit=e.handleSubmit.bind(e),e}return s(t,e),l(t,[{key:"handleSubmit",value:function(){this.store.submit(),this.props.onSubmit&&this.props.onSubmit()}},{key:"render",value:function(){var e=this;return d.createElement(h.FlexCol,{padded:!0,overflow:!0,className:L.QueryContainer},d.createElement(N.default,{ids:this.store.unknownStudyIds}),d.createElement(f.default,null),this.store.isVirtualStudyQuery?d.createElement(w.default,null):d.createElement(v.default,null),this.store.selectableSelectedStudyIds.length>0&&d.createElement(I.default,null),d.createElement(k.default,null),!!this.store.isGenesetProfileSelected&&d.createElement(S.default,null),!!this.store.forDownloadTab&&d.createElement("span",{className:L.downloadSubmitExplanation},"Clicking submit will generate a tab-delimited file containing your requested data."),!!this.store.forDownloadTab&&d.createElement(M.default,{labelProps:{className:L.transposeDataMatrix},checked:this.store.transposeDataMatrix,onChange:function(t){return e.store.transposeDataMatrix=t.currentTarget.checked}},"Transpose data matrix"),d.createElement(h.FlexRow,{padded:!0,className:L.submitRow},d.createElement("button",{style:{paddingLeft:50,paddingRight:50,marginRight:50},disabled:!this.store.submitEnabled,className:"btn btn-primary btn-lg",onClick:function(){return e.handleSubmit()},"data-test":"queryButton"},this.store.forDownloadTab?"Download":"Submit Query"),!(!this.store.forDownloadTab||!P.default.genomespaceEnabled)&&d.createElement("button",{disabled:!this.store.submitEnabled,className:L.genomeSpace,onClick:function(){return e.store.sendToGenomeSpace()}},"Send to GenomeSpace"),d.createElement(h.FlexCol,null,!!this.store.submitError&&d.createElement("span",{className:L.errorMessage,"data-test":"oqlErrorMessage"},this.store.submitError),this.store.oqlMessages.map(function(e){return d.createElement("span",{className:L.oqlMessage},d.createElement("i",{className:"fa fa-info-circle",style:{marginRight:5}}),e)}))))}},{key:"store",get:function(){return this.props.store}}]),t}(d.Component);F=R([(0,T.providesStoreContext)(A.QueryStore),b.observer],F),t.default=F},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d=n(3),p=o(d),f=n(1),h=o(f),m=n(859),y=n(855),g=o(y),v=n(174),b=r(v),_=n(1013),w=r(_),x=n(33),S=n(13),C=n(292),k=r(C),E=n(176),M=n(175),A=n(861),T=r(A),O=n(63),P=n(1019),j=r(P),I=n(173),D=r(I),N=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},R=g,L=function(e){function t(e){var n=this;i(this,t);var r=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.handlers={onSummaryClick:function(){r.store.openSummary()},onCheckAllFiltered:function(){r.logic.mainView.toggleAllFiltered()},onClearFilter:function(){r.store.setSearchText("")}},r.CancerTypeList=(0,x.observer)(function(){var e=r.logic.cancerTypeListView.getChildCancerTypes(r.store.treeData.rootCancerType);return h.createElement("ul",{className:R.cancerTypeList},e.map(function(e,t){return h.createElement(n.CancerTypeListItem,{key:t,cancerType:e})}))}),r.CancerTypeListItem=(0,x.observer)(function(e){var t,n=e.cancerType,o=(0,S.expr)(function(){return r.logic.cancerTypeListView.getDescendantCancerStudies(n).length}),i=p.includes(r.store.selectedCancerTypeIds,n.cancerTypeId),s=r.logic.isHighlighted(n),l=(0,b.default)((t={},a(t,R.cancerTypeListItem,!0),a(t,R.selectable,!0),a(t,R.selected,i),a(t,R.matchingNodeText,!!r.store.searchText&&s),a(t,R.nonMatchingNodeText,!!r.store.searchText&&!s),a(t,R.containsSelectedStudies,(0,S.expr)(function(){return r.logic.cancerTypeContainsSelectedStudies(n)})),t));return h.createElement("li",{className:l,onMouseDown:r.getCancerTypeListClickHandler(n)},h.createElement("span",{className:R.cancerTypeListItemLabel},n.name),h.createElement("span",{className:R.cancerTypeListItemCount},o))}),r}return l(t,e),u(t,[{key:"getCancerTypeListClickHandler",value:function(e){var t=this;return function(n){return t.store.selectCancerType(e,n.ctrlKey)}}},{key:"handleStudiesCheckbox",value:function(e,t){e.target.checked?this.store.selectableSelectedStudyIds=p.union(this.store.selectableSelectedStudyIds,t):this.store.selectableSelectedStudyIds=p.difference(this.store.selectableSelectedStudyIds,t)}},{key:"render",value:function(){var e=this,t=this.logic.mainView.getSelectionReport(),n=(t.selectableSelectedStudyIds,t.selectableSelectedStudies,t.shownStudies),r=t.shownAndSelectedStudies;return h.createElement(m.FlexCol,{overflow:!0,"data-test":"studyList",className:R.CancerStudySelector},h.createElement(m.FlexRow,{overflow:!0,className:R.CancerStudySelectorHeader},h.createElement(T.default,{promises:[this.store.cancerTypes,this.store.cancerStudies]},"Select Studies:"),h.createElement("div",null,!(this.store.cancerTypes.isPending||this.store.cancerStudies.isPending||this.store.profiledSamplesCount.isPending)&&h.createElement(x.Observer,null,function(){var t,n=(0,S.expr)(function(){return e.store.selectableSelectedStudyIds.length});(0,b.default)((t={},a(t,R.selectedCount,!0),a(t,R.selectionsExist,n>0),t));return h.createElement("a",{onClick:function(){n&&(e.store.showSelectedStudiesOnly=!e.store.showSelectedStudiesOnly)}},h.createElement("b",null,n)," studies selected (",h.createElement("b",null,e.store.profiledSamplesCount.result.all)," samples)")}),!this.store.forDownloadTab&&!(this.store.cancerTypes.isPending||this.store.cancerStudies.isPending)&&h.createElement(x.Observer,null,function(){var t=e.store.selectableSelectedStudyIds.length>0;return t?h.createElement("a",{"data-test":"globalDeselectAllStudiesButton",style:{marginLeft:10},onClick:function(){t?e.logic.mainView.clearAllSelection():e.logic.mainView.onCheck(e.store.treeData.rootCancerType,!t)}},"Deselect all"):h.createElement("span",null)}),!(this.store.cancerTypes.isPending||this.store.cancerStudies.isPending)&&h.createElement(x.Observer,null,function(){var t=e.store.selectableSelectedStudyIds.length>50,n=t?h.createElement("span",null,"Too many studies selected for study summary (limit: 50)"):h.createElement("span",null,"Open summary of selected studies in a new window.");return h.createElement(D.default,{placement:"top",overlay:n,disabled:!e.store.summaryEnabled,mouseEnterDelay:0},h.createElement(O.Button,{bsSize:"xs",disabled:t,bsStyle:"primary",className:(0,b.default)("btn-primary"),onClick:e.handlers.onSummaryClick,style:{marginLeft:10,display:e.store.summaryEnabled?"inline-block":"none",cursor:"pointer",bgColor:"#3786C2"}},h.createElement("i",{className:"ci ci-pie-chart"})," View summary"))})),h.createElement(x.Observer,null,function(){var t=e.store.searchTextPresets;e.store.searchText&&t.indexOf(e.store.searchText)<0&&(t=[e.store.searchText].concat(t));var n=null,r=t.map(function(e,t){return{value:e,sortKey:t}});return h.createElement("div",{style:{display:"flex",alignItems:"center"}},e.store.searchText&&h.createElement("span",{"data-test":"clearStudyFilter",onClick:function(t){e.autosuggest.setState({inputValue:""}),e.handlers.onClearFilter()},style:{fontSize:18,cursor:"pointer",color:"#999999",position:"relative",left:164,zIndex:10}},"x"),h.createElement(j.default,{datalist:r,ref:function(t){return e.autosuggest=t},placeholder:"Search...",bsSize:"small",onChange:function(t){null!==n&&(window.clearTimeout(n),n=null),n=window.setTimeout(function(){e.store.setSearchText(t)},400)},onFocus:function(t){0===t.length&&setTimeout(function(){e.autosuggest.setState({open:!0})},400)}}))})),h.createElement(T.default,{style:{display:"none"},promises:[this.store.cancerTypes,this.store.cancerStudies]},"Select Studies:",!(this.store.cancerTypes.isPending||this.store.cancerStudies.isPending||this.store.profiledSamplesCount.isPending)&&h.createElement(x.Observer,null,function(){var t,n=(0,S.expr)(function(){return e.store.selectableSelectedStudyIds.length}),r=(0,b.default)((t={},a(t,R.selectedCount,!0),a(t,R.selectionsExist,n>0),t));return h.createElement("span",{className:r,onClick:function(){n&&(e.store.showSelectedStudiesOnly=!e.store.showSelectedStudiesOnly)}},h.createElement("b",null,n)," studies selected (",h.createElement("b",null,e.store.profiledSamplesCount.result.all)," samples)")})),h.createElement(m.FlexRow,{className:R.cancerStudySelectorBody},h.createElement(E.If,{condition:this.store.maxTreeDepth>0},h.createElement(E.Then,null,h.createElement("div",{className:R.cancerTypeListContainer},h.createElement(this.CancerTypeList,null)))),h.createElement("div",{className:R.cancerStudyListContainer,"data-test":"cancerTypeListContainer"},h.createElement("div",{className:"checkbox",style:{marginLeft:19}},h.createElement(E.If,{condition:n.length>0},h.createElement("label",null,h.createElement("input",{type:"checkbox","data-test":"selectAllStudies",style:{top:-2},onClick:this.handlers.onCheckAllFiltered,checked:r.length===n.length}),h.createElement("strong",null,r.length===n.length?"Deselect all listed studies "+(n.length<this.store.cancerStudies.result.length?"matching filter":"")+" ("+n.length+")":"Select all listed studies "+(n.length<this.store.cancerStudies.result.length?"matching filter":"")+"  ("+n.length+")"))),h.createElement(E.If,{condition:this.store.cancerStudies.isComplete&&this.store.cancerTypes.isComplete&&0===n.length},h.createElement("p",null,"There are no studies matching your filter."))),h.createElement(w.default,null))),h.createElement(O.Modal,{className:(0,b.default)(R.SelectedStudiesWindow,"cbioportal-frontend"),show:this.store.showSelectedStudiesOnly,onHide:function(){return e.store.showSelectedStudiesOnly=!1}},h.createElement(O.Modal.Header,{closeButton:!0},h.createElement(O.Modal.Title,null,"Selected Studies")),h.createElement(O.Modal.Body,null,h.createElement(w.default,{showSelectedStudiesOnly:!0}))))}},{key:"logic",get:function(){return this.store.studyListLogic}}]),t}(M.QueryStoreComponent);N([k.default],L.prototype,"getCancerTypeListClickHandler",null),L=N([x.observer],L),t.default=L},function(e,t){e.exports={portalWidth:"styles-module__portalWidth__3uFIJ",padded:"styles-module__padded__3vpqj",column:"styles-module__column__2pa-R",row:"styles-module__row__3l99O"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.CancerTreeCheckbox=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p=n(1),f=o(p),h=n(1014),m=o(h),y=n(174),g=r(y),v=n(866),b=r(v),_=n(864),w=r(_),x=n(33),S=n(13),C=n(3),k=r(C),E=n(25),M=n(175),A=n(173),T=r(A),O=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":d(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},P=Object.assign({},m,{Level:function(e){return m["Level"+e]}}),j=function(e){function t(){i(this,t);var e=s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.renderCancerType=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=e.logic.getDepth(t),o=e.view.getChildCancerTypes(t),a=e.view.getChildCancerStudies(t),i=e.logic.cancerTypeListView.getDescendantCancerStudies(t).map(function(e){return e.studyId}),s=void 0,l=void 0;if(t!=e.rootCancerType){var u=(0,g.default)(P.CancerType,P.Level(r),e.logic.isHighlighted(t)&&P.highlighted);3===r&&(l=f.createElement(b.default,{className:P.indentArrow,name:"long-arrow-right"})),s=f.createElement("li",{className:u},f.createElement(I,{view:e.view,node:t},l,f.createElement("span",{className:P.CancerTypeName},t.name),!e.store.forDownloadTab&&f.createElement("span",{className:P.SelectAll},k.default.intersection(i,e.store.selectableSelectedStudyIds).length?"Deselect All":"Select All")))}var c=(0,g.default)(P.StudyList,P.Level(r));return f.createElement("ul",{key:n,className:c},s,a.map(e.renderCancerStudy),o.map(e.renderCancerType))},e.renderCancerStudy=function(t,n){var r=(0,g.default)(P.Study,e.logic.isHighlighted(t)&&P.highlighted),o=t.studyId in e.store.getOverlappingStudiesMap,i=o?f.createElement(T.default,{mouseEnterDelay:0,placement:"top",overlay:f.createElement("div",null,"This study may share samples with another selected study.")},f.createElement("i",{className:"fa fa-exclamation-triangle"})):null;return f.createElement("li",{key:n,className:r,"data-test":e.store.isVirtualStudy(t.studyId)?"VirtualStudySelect":"StudySelect"},f.createElement(x.Observer,null,function(){var n,r=(0,g.default)((n={},a(n,P.StudyName,!0),a(n,"overlappingStudy",o),a(n,P.DeletedStudy,e.store.isDeletedVirtualStudy(t.studyId)),n));return f.createElement(I,{view:e.view,node:t},f.createElement("span",{className:r},t.name,i))}),f.createElement(x.Observer,null,function(){return f.createElement("div",{className:P.StudyMeta},!e.store.isDeletedVirtualStudy(t.studyId)&&e.renderSamples(t),e.renderStudyLinks(t))}))},e.renderSamples=function(e){return f.createElement("span",{className:P.StudySamples},e.allSampleCount+" samples")},e.renderStudyLinks=function(t){if(e.store.isDeletedVirtualStudy(t.studyId))return f.createElement(T.default,{mouseEnterDelay:0,placement:"top",overlay:f.createElement("div",{className:P.tooltip},"Restore study"),children:f.createElement("button",{className:"btn btn-default btn-xs",onClick:function(){return e.store.restoreVirtualStudy(t.studyId)},style:{lineHeight:"80%"},"data-test":"virtualStudyRestore"},"Restore")});var n=[{icon:"info-circle",tooltip:e.store.isVirtualStudy(t.studyId)?t.description.replace(/\r?\n/g,"<br />"):t.description}];return e.store.isVirtualStudy(t.studyId)?n.push({icon:"trash",tooltip:"Delete this virtual study.",onClick:function(){return e.store.deleteVirtualStudy(t.studyId)}}):n.push({icon:"book",onClick:t.pmid&&(0,E.getPubMedUrl)(t.pmid),tooltip:t.pmid&&"PubMed"}),f.createElement("span",{className:P.StudyLinks},n.map(function(e,t){var n,r=f.createElement(b.default,{key:t,name:e.icon,className:(0,g.default)((n={},a(n,P.icon,!0),a(n,P.iconWithTooltip,!!e.tooltip),a(n,P.trashIcon,"trash"===e.icon),n))});if(e.onClick){var o={key:t};"string"==typeof e.onClick?(o.href=e.onClick,o.target="_blank"):o.onClick=e.onClick,r=f.createElement("a",o,r)}if(e.tooltip){var i=f.createElement("div",{className:P.tooltip,dangerouslySetInnerHTML:{__html:e.tooltip}});r=f.createElement(T.default,{key:t,mouseEnterDelay:0,placement:"top",overlay:i,children:r})}return r}),t.studyId&&f.createElement(T.default,{mouseEnterDelay:0,placement:"top",overlay:f.createElement("div",{className:P.tooltip},"View study summary")},f.createElement("span",{onClick:function(){return(0,E.openStudySummaryFormSubmit)(t.studyId)},className:(0,g.default)(P.summaryIcon,"ci ci-pie-chart")})))},e}return l(t,e),c(t,[{key:"componentDidMount",value:function(){this.props.showSelectedStudiesOnly&&(this._view=this.view)}},{key:"render",value:function(){var e=this,t=this.renderCancerType(this.rootCancerType);return this.props.showSelectedStudiesOnly?f.createElement("div",{className:P.SelectedStudyList},f.createElement("span",{className:P.deselectAll,onClick:function(){e.view.onCheck(e.store.treeData.rootCancerType,!1),e.store.showSelectedStudiesOnly=!1}},"Deselect all"),t):t}},{key:"view",get:function(){return this._view||(this.props.showSelectedStudiesOnly?this.logic.selectedStudiesView:this.logic.mainView)}},{key:"logic",get:function(){return this.store.studyListLogic}},{key:"rootCancerType",get:function(){return this.store.treeData.rootCancerType}}]),t}(M.QueryStoreComponent);j=O([x.observer],j),t.default=j;var I=function(e){function t(){return i(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),c(t,[{key:"render",value:function(){var e=this;return f.createElement(w.default,u({},this.checkboxProps,{onChange:function(t){e.props.view.onCheck(e.props.node,t.target.checked)}}),this.props.children)}},{key:"checkboxProps",get:function(){return this.props.view.getCheckboxProps(this.props.node)}}]),t}(M.QueryStoreComponent);O([S.computed.struct],I.prototype,"checkboxProps",null),t.CancerTreeCheckbox=I=O([x.observer],I),t.CancerTreeCheckbox=I},function(e,t){e.exports={portalWidth:"styles-module__portalWidth__agNQJ",selectAllStudies:"styles-module__selectAllStudies__2gWhF",SelectedStudyList:"styles-module__SelectedStudyList__27Hpt",StudyList:"styles-module__StudyList__2mxsz",deselectAll:"styles-module__deselectAll__26p-l",Level0:"styles-module__Level0__1RUPZ",Level1:"styles-module__Level1__2R0IW",Level3:"styles-module__Level3__1vXaT",Level4:"styles-module__Level4__3ZJ1g",Level2:"styles-module__Level2__3AEJ-",CancerType:"styles-module__CancerType__Zm_qX",Study:"styles-module__Study__398QL",indentArrow:"styles-module__indentArrow__32udx",SelectAll:"styles-module__SelectAll__3SSsJ",StudyName:"styles-module__StudyName__3IA_4",DeletedStudy:"styles-module__DeletedStudy__2axOg",StudySamples:"styles-module__StudySamples__3_cjf",StudyMeta:"styles-module__StudyMeta__3UFnp",StudyLinks:"styles-module__StudyLinks__cMCHs",summaryIcon:"styles-module__summaryIcon__WR75I",iconWithTooltip:"styles-module__iconWithTooltip__2yBW3",icon:"styles-module__icon__1ZBlQ",trashIcon:"styles-module__trashIcon__1z-wJ",tooltip:"styles-module__tooltip__b54B6",fadein:"styles-module__fadein__2G2-B"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={position:"absolute",width:"1px",height:"1px",padding:"0px",margin:"-1px",overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",border:"0px"},e.exports=t.default},function(e,t){e.exports={portalWidth:"styles-module__portalWidth__1fCuf",SectionHeader:"styles-module__SectionHeader__3RwOA",error:"styles-module__error__1QyPg"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),d=o(c),p=n(866),f=r(p),h=n(1018),m=o(h),y=n(174),g=r(y),v=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]]);return n},b=m,_=function(e){function t(){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.error,n=e.children,r=e.className,o=v(e,["error","children","className"]);return d.createElement("div",l({className:(0,g.default)(r,b.error)},o),d.createElement("span",{className:b.message},d.createElement(f.default,{className:b.icon,name:"exclamation-circle"}),t+""),n)}}]),t}(d.Component);t.default=_},function(e,t){e.exports={portalWidth:"styles-module__portalWidth__3FkcF",error:"styles-module__error__19z3B",icon:"styles-module__icon__1tBLC"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectListAdapter=t.MapListAdapter=t.ArrayListAdapter=t.EmptyListAdapter=t.ListAdapter=t.ItemAdapter=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(174),d=r(c),p=n(868),f=r(p),h=n(910),m=r(h),y=n(2),g=r(y),v=n(1),b=r(v),_=n(63),w=n(34),x=r(w),S=n(43),C=r(S),k=n(1020),E=r(k),M=n(1021),A=r(M),T=n(911),O=r(T),P=n(875),j=r(P),I=n(1022),D=r(I),N=n(1023),R=r(N),L=n(1024),F=r(L),z=n(1025),B=r(z);t.ItemAdapter=O.default,t.ListAdapter=j.default,t.EmptyListAdapter=D.default,t.ArrayListAdapter=R.default,t.MapListAdapter=F.default,t.ObjectListAdapter=B.default;var V=function(e){function t(e){var n;a(this,t);for(var r=arguments.length,s=Array(r>1?r-1:0),l=1;l<r;l++)s[l-1]=arguments[l];var u=i(this,(n=t.__proto__||Object.getPrototypeOf(t)).call.apply(n,[this,e].concat(o(s))));u._itemAdapter=e.itemAdapter||new O.default,u._itemAdapter.receiveProps(e),u._listAdapter=e.datalistAdapter||u._getListAdapter(e.datalist),u._listAdapter.receiveProps(e,u._itemAdapter);var c=u._getValueFromProps(e),d=c.inputValue,p=c.inputItem,f=c.inputItemEphemeral,h=c.selectedItems;u._setValueMeta(p,f,!0,!0),u._lastValidItem=p,u._lastValidValue=d,u._keyPressCount=0,u.state={open:!1,disableFilter:!1,inputValue:d,inputValueKeyPress:0,inputFocused:!1,selectedItems:h,searchValue:null},u._lastOnChangeValue=u._getCurrentValue(),u._lastOnSelectValue=p;var m=u;return m._renderSelected=u._renderSelected.bind(u),m._getItemKey=u._getItemKey.bind(u),m._isSelectedItem=u._isSelectedItem.bind(u),m._renderSuggested=u._renderSuggested.bind(u),m._handleToggleClick=u._handleToggleClick.bind(u),m._handleInputChange=u._handleInputChange.bind(u),m._handleItemSelect=u._handleItemSelect.bind(u),m._removeItem=u._removeItem.bind(u),m._handleShowAll=u._handleShowAll.bind(u),m._handleKeyDown=u._handleKeyDown.bind(u),m._handleKeyPress=u._handleKeyPress.bind(u),m._handleMenuClose=u._handleMenuClose.bind(u),m._handleInputFocus=u._handleInputFocus.bind(u),m._handleInputBlur=u._handleInputBlur.bind(u),m._handleFocus=u._handleFocus.bind(u),m._handleBlur=u._handleBlur.bind(u),u}return s(t,e),u(t,null,[{key:"defaultInputSelect",value:function(e,t,n){switch(e.type){case"text":case"search":case"url":case"tel":case"password":if(e.setSelectionRange)e.setSelectionRange(t.length,n.length);else if(e.createTextRange){var r=e.createTextRange();r.moveEnd("character",n.length),r.moveStart("character",t.length),r.select()}}}}]),u(t,[{key:"_getListAdapter",value:function(e){if(null==e)return new D.default;if(Array.isArray(e))return new R.default;if(e instanceof Map)return new F.default;if("object"==typeof e)return new B.default;throw Error("Unexpected datalist type: datalistAdapter required")}},{key:"_getValueFromProps",value:function(e){var t="",n=null,r=!1,o=[],a=e.value||e.defaultValue;if(null!=a)if(e.multiple)Array.isArray(a)?o=this._filterItems(a,e):(0,C.default)(!a,"Array expected for value property");else if(e.valueIsItem){var i=this._itemAdapter.getInputValue(a);null!=e.datalist?(n=this._listAdapter.findMatching(e.datalist,i),null!=n?t=n===a?i:this._itemAdapter.getInputValue(n):e.datalistOnly&&!e.datalistPartial?this._warnInvalidValue(a):(t=i,n=a)):(t=i,n=a)}else a&&(null!=e.datalist?(n=this._listAdapter.findMatching(e.datalist,a),null!=n?t=this._itemAdapter.getInputValue(n):e.datalistOnly&&!e.datalistPartial?this._warnInvalidValue(a):(t=a.toString(),n=this._itemAdapter.newFromValue(a),r=!0)):(t=a.toString(),n=this._itemAdapter.newFromValue(a),r=!0));return{inputValue:t,inputItem:n,inputItemEphemeral:r,selectedItems:o}}},{key:"_filterItems",value:function(e,t){if(null!=t.datalist||!t.allowDuplicates){var n=[],r={},o=!1,a=!0,i=!1,s=void 0;try{for(var l,u=e[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value,d=this._itemAdapter.getInputValue(c);if(t.allowDuplicates||!r[d]){var p=this._listAdapter.findMatching(t.datalist,d);null!=p?(n.push(p),r[d]=!0,o=!0):t.datalistOnly&&!t.datalistPartial?(this._warnInvalidValue(d),o=!0):(n.push(c),r[d]=!0)}else o=!0}}catch(e){i=!0,s=e}finally{try{!a&&u.return&&u.return()}finally{if(i)throw s}}if(o)return n}return e}},{key:"_warnInvalidValue",value:function(e){(0,C.default)(!1,'Value "%s" does not match any datalist value',e)}},{key:"_setInputValue",value:function(e,t){this.setState({inputValue:e,inputValueKeyPress:this._keyPressCount},t)}},{key:"_setValueMeta",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null!=e,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;this._inputItem=e,this._inputItemEphemeral=t,this._valueIsValid=n,this._valueWasValidated=r}},{key:"_clearInput",value:function(){this._setValueMeta(null,!1,!0,!0),this._setInputValue("")}},{key:"_getValueUsing",value:function(e,t,n,r){return e.multiple?r:e.valueIsItem?n:t}},{key:"_getCurrentValue",value:function(){return this._getValueUsing(this.props,this.state.inputValue,this._inputItem,this.state.selectedItems)}},{key:"componentDidMount",value:function(){this._autoCompleteAfterRender=!this.refs.input.setSelectionRange}},{key:"componentWillReceiveProps",value:function(e){if(e.itemAdapter!=this.props.itemAdapter&&(this._itemAdapter=e.itemAdapter||new O.default),this._itemAdapter.receiveProps(e),e.datalist!=this.props.datalist||e.datalistAdapter!=this.props.datalistAdapter)if(e.datalistAdapter)this._listAdapter=e.datalistAdapter;else{var t=this._getListAdapter(e.datalist);t.constructor!=this._listAdapter.constructor&&(this._listAdapter=t)}this._listAdapter.receiveProps(e,this._itemAdapter);var n=e.value,r=this.state.inputValue,o=n!==this.props.value&&n!==this._getValueUsing(e,r,this._inputItem,this.state.selectedItems),a=void 0,i=void 0,s=void 0,l=void 0;if(!o){if(e.datalistOnly){var u=!e.datalistPartial&&null!=e.datalist,c=!this.props.datalistOnly||!e.datalistPartial&&this.props.datalistPartial||e.datalist!=this.props.datalist;r?(a=this._listAdapter.findMatching(e.datalist,r),null==a&&(u||this._inputItemEphemeral?this._inputItemEphemeral&&n===r&&(s=!0):a=this._inputItem),(i=null==a&&c)&&this._focused&&(this._setValueMeta(null,!1,!1,!0),c&&u&&null!=this._lastValidItem&&(this._lastValidItem=this._listAdapter.findMatching(e.datalist,this._lastValidValue),null==this._lastValidItem&&(this._lastValidValue="")),i=!1)):(a=null,i=!1),l=e.multiple&&u&&c}e.multiple&&!e.allowDuplicates&&this.props.allowDuplicates&&(l=!0)}if(o||i){var d=void 0,p=void 0;if(s)r="",d=!1,p=[];else{var f=this._getValueFromProps(e);r=f.inputValue,a=f.inputItem,d=f.inputItemEphemeral,p=f.selectedItems}a===this._inputItem&&this._focused?o&&e.multiple&&this.setState({selectedItems:p}):(this._setValueMeta(a,d,!0,!0),this._setInputValue(r),this.setState({selectedItems:p}),l=!1,this._lastValidItem=a,this._lastValidValue=r,o&&(this._lastOnChangeValue=this._getValueUsing(e,r,a,p)))}else r&&e.datalist!=this.props.datalist&&this._focused&&this._checkAutoComplete(r,e);if(l){var h=this._filterItems(this.state.selectedItems,e);this.setState({selectedItems:h})}e.datalistMessage&&e.datalistMessage!=this.props.datalistMessage&&this._focused&&this._open("message",e)}},{key:"shouldComponentUpdate",value:function(e,t){return!(0,f.default)(this.props,e)||!(0,f.default)(this.state,t)}},{key:"componentWillUpdate",value:function(e,t){var n=this.refs.suggestions;this._menuFocusedBeforeUpdate=n&&n.isFocused();var r=t.inputValue;if(r!=this.state.inputValue){var o=void 0,a=void 0,i=void 0;if(this._valueWasValidated?(o=this._inputItem,i=this._valueIsValid):(r?(o=this._listAdapter.findMatching(e.datalist,r),null!=o||e.datalistOnly?(a=!1,i=null!=o):(o=this._itemAdapter.newFromValue(r),a=!0,i=!0)):(o=null,a=!1,i=!e.required),this._setValueMeta(o,a,i)),i&&(this._lastValidItem=o,this._lastValidValue=o&&!a?this._itemAdapter.getInputValue(o):r),i){var s=e.multiple,l=e.onChange;if(!s&&l){var u=this._getValueUsing(e,r,o,t.selectedItems);u!==this._lastOnChangeValue&&(this._lastOnChangeValue=u,l(u))}var c=e.onSelect;c&&o!==this._lastOnSelectValue&&(this._lastOnSelectValue=o,c(o))}}var d=e.onToggle;d&&t.open!=this.state.open&&d(t.open)}},{key:"componentDidUpdate",value:function(e,t){this.state.open&&!t.open&&"keydown"===this._lastOpenEventType||this.state.disableFilter&&!t.disableFilter&&this._menuFocusedBeforeUpdate?this.refs.suggestions.focusFirst():!this.state.open&&t.open&&this._menuFocusedBeforeUpdate&&(this._menuFocusedBeforeUpdate=!1,this._focusInput())}},{key:"componentWillUnmount",value:function(){clearTimeout(this._focusTimeoutId),this._focusTimeoutId=null,clearTimeout(this._searchTimeoutId),this._searchTimeoutId=null}},{key:"_focusInput",value:function(){var e=x.default.findDOMNode(this.refs.input);e instanceof HTMLElement&&e.focus()}},{key:"_open",value:function(e,t){this._lastOpenEventType=e;var n="autocomplete"!==e&&this._hasNoOrExactMatch(t);this.setState({open:!0,disableFilter:n});var r=t.onSearch,o=this.state,a=o.inputValue,i=o.searchValue;r&&i!==a&&(this.setState({searchValue:a}),r(a))}},{key:"_close",value:function(){this.setState({open:!1})}},{key:"_toggleOpen",value:function(e,t){this.state.open?this._close():this._open(e,t)}},{key:"_canOpen",value:function(){var e=this.props.datalist;return null==e&&this.props.onSearch||!this._listAdapter.isEmpty(e)||!!this.props.datalistMessage}},{key:"_hasNoOrExactMatch",value:function(e){var t=this;if(null!=this._inputItem&&!this._inputItemEphemeral)return!0;var n=this._itemAdapter.foldValue(this.state.inputValue);return null==this._listAdapter.find(e.datalist,function(e){return t._itemAdapter.itemIncludedByInput(e,n)})}},{key:"render",value:function(){var e=this.props.showToggle,t=this._canOpen(),n="auto"===e?t:e,r={autosuggest:!0,open:this.state.open,disabled:this.props.disabled,dropdown:n&&!this.props.dropup,dropup:n&&this.props.dropup};return b.default.createElement("div",{key:"dropdown",className:(0,d.default)(r),onFocus:this._handleFocus,onBlur:this._handleBlur},this._renderInputGroup(n,t),this._renderMenu())}},{key:"_renderInputGroup",value:function(e,t){var n=this.props.addonBefore?b.default.createElement("span",{className:"input-group-addon",key:"addonBefore"},this.props.addonBefore):null,r=this.props.addonAfter?b.default.createElement("span",{className:"input-group-addon",key:"addonAfter"},this.props.addonAfter):null,o=this.props.buttonBefore?b.default.createElement("span",{className:"input-group-btn"},this.props.buttonBefore):null,a=e&&this._renderToggle(t),i=a||this.props.buttonAfter?b.default.createElement("span",{className:"input-group-btn"},this.props.buttonAfter,a):null,s=(0,d.default)({"input-group":n||r||o||i,"input-group-sm":"small"===this.props.bsSize,"input-group-lg":"large"===this.props.bsSize,"input-group-toggle":!!a});return s?b.default.createElement("div",{className:s,key:"input-group"},n,o,this._renderChoices(),r,i):this._renderChoices()}},{key:"_renderToggle",value:function(e){return b.default.createElement(_.Dropdown.Toggle,{ref:"toggle",key:"toggle",id:this.props.toggleId,bsSize:this.props.bsSize,disabled:this.props.disabled||!e,open:this.state.open,onClick:this._handleToggleClick,onKeyDown:this._handleKeyDown})}},{key:"_renderChoices",value:function(){if(this.props.multiple){var e=this.props.choicesClass,t=void 0===e?E.default:e;return b.default.createElement(t,{ref:"choices",autoHeight:!(this.props.showToggle||this.props.addonAfter||this.props.addonBefore||this.props.buttonAfter||this.props.buttonBefore),disabled:this.props.disabled,focused:this.state.inputFocused,inputValue:this.state.inputValue,items:this.state.selectedItems,onKeyPress:this._handleKeyPress,onRemove:this._removeItem,renderItem:this._renderSelected},this._renderInput())}return this._renderInput()}},{key:"_renderSelected",value:function(e){return this._itemAdapter.renderSelected(e)}},{key:"_renderInput",value:function(){var e=this.context.$bs_formGroup,n=e&&e.controlId,r={},o=!0,a=!1,i=void 0;try{for(var s,u=Object.keys(this.props)[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){var c=s.value;t.propTypes[c]||(r[c]=this.props[c])}}catch(e){a=!0,i=e}finally{try{!o&&u.return&&u.return()}finally{if(a)throw i}}var p=!this.props.multiple||!this.state.selectedItems.length;return b.default.createElement("input",l({autoComplete:"off"},r,{className:(0,d.default)(this.props.className,{"form-control":!this.props.multiple}),ref:"input",key:"input",id:n,disabled:this.props.disabled,required:this.props.required&&p,placeholder:p?this.props.placeholder:void 0,type:this.props.type,value:this.state.inputValue,onChange:this._handleInputChange,onKeyDown:this._handleKeyDown,onKeyPress:this._handleKeyPress,onFocus:this._handleInputFocus,onBlur:this._handleInputBlur}))}},{key:"_renderMenu",value:function(){var e=this;this._pseudofocusedItem=null;var t=this.state.open;if(!t)return null;var n=this.props.datalist,r=this._itemAdapter.foldValue(this.state.inputValue);this._foldedInputValue=r;var o=void 0;o=this.state.disableFilter?this._listAdapter.toArray(n):this._listAdapter.filter(n,function(t){return e._itemAdapter.itemIncludedByInput(t,r)&&e._allowItem(t)}),o=this._itemAdapter.sortItems(o,r);var a=o.length<this._listAdapter.getLength(n),i=void 0;o.length>0&&this.state.inputFocused&&(!this.props.multiple||this.props.datalistOnly)&&(this._pseudofocusedItem=o[i=0]);var s=this.props,l=s.suggestionsClass,u=void 0===l?A.default:l,c=s.datalistMessage,d=s.onDatalistMessageSelect,p=s.toggleId;return b.default.createElement(u,{ref:"suggestions",datalistMessage:c,filtered:a,focusedIndex:i,getItemKey:this._getItemKey,isSelectedItem:this._isSelectedItem,items:o,labelledBy:p,onClose:this._handleMenuClose,onDatalistMessageSelect:d,onDisableFilter:this._handleShowAll,onSelect:this._handleItemSelect,open:t,renderItem:this._renderSuggested})}},{key:"_allowItem",value:function(e){var t=this;if(this.props.allowDuplicates)return!0;var n=this._itemAdapter.getInputValue(e);return!this.state.selectedItems.find(function(e){return t._itemAdapter.getInputValue(e)===n})}},{key:"_getItemKey",value:function(e){return this._itemAdapter.getReactKey(e)}},{key:"_isSelectedItem",value:function(e){return this._itemAdapter.itemMatchesInput(e,this._foldedInputValue)}},{key:"_renderSuggested",value:function(e){return this._itemAdapter.renderSuggested(e)}},{key:"_handleToggleClick",value:function(){this._toggleOpen("click",this.props)}},{key:"_handleInputChange",value:function(e){var t=this,n=e.target,r=n.value,o=this._keyPressCount>this.state.inputValueKeyPress;if(o&&r?this._autoCompleteAfterRender?(this._setValueMeta(),this._setInputValue(r,function(){t._checkAutoComplete(r,t.props)})):this._checkAutoComplete(r,this.props)||(this._setValueMeta(),this._setInputValue(r)):(this._setValueMeta(),this._setInputValue(r)),o||this.state.open){var a=this.props.onSearch;a&&(clearTimeout(this._searchTimeoutId),this._searchTimeoutId=setTimeout(function(){t._searchTimeoutId=null,r!=t.state.searchValue&&(t.setState({searchValue:r}),a(r))},this.props.searchDebounce))}}},{key:"_checkAutoComplete",value:function(e,t){var n=this,r=!1,o=t.datalist,a=this._itemAdapter.foldValue(e),i=this._listAdapter.filter(o,function(e){return n._itemAdapter.itemIncludedByInput(e,a)&&n._allowItem(e)});if(i.length>0){var s=t.datalistOnly,l=t.datalistPartial;if(1===i.length&&s&&!l){var u=i[0],c=this._itemAdapter.getInputValue(u),d=void 0,p=t.inputSelect;if(e!=c&&p&&this._itemAdapter.foldValue(c).startsWith(a)){var f=this.refs.input;d=function(){p(f,e,c)}}this._setValueMeta(u),this._setInputValue(c,d),r=!0,(this.state.open?t.closeOnCompletion:e!=c&&!t.closeOnCompletion)&&this._toggleOpen("autocomplete",t)}else{var h=i.find(function(e){return n._itemAdapter.itemMatchesInput(e,a)});h&&(this._setValueMeta(h),this._setInputValue(e),r=!0),this.state.open||h&&!(i.length>1)||this._open("autocomplete",t)}}return r}},{key:"_handleItemSelect",value:function(e){if(this.props.multiple)this._addItem(e);else{var t=this._itemAdapter.getInputValue(e);this._setValueMeta(e),this._setInputValue(t)}this._close()}},{key:"_addItem",value:function(e){if(this._allowItem(e)){var t=[].concat(o(this.state.selectedItems),[e]);this.setState({selectedItems:t});var n=this.props,r=n.onAdd,a=n.onChange;r&&r(e),a&&a(t)}this._clearInput(),this.state.open&&this._close()}},{key:"_removeItem",value:function(e){var t=this.state.selectedItems,n=t.slice(0,e).concat(t.slice(e+1));this.setState({selectedItems:n});var r=this.props,o=r.onRemove,a=r.onChange;o&&o(e),a&&a(n)}},{key:"_addInputValue",value:function(){return!!this._inputItem&&(this._addItem(this._inputItem),!0)}},{key:"_handleShowAll",value:function(){this.setState({disableFilter:!0})}},{key:"_handleKeyDown",value:function(e){if(!this.props.disabled)switch(e.keyCode||e.which){case m.default.codes.down:case m.default.codes["page down"]:this.state.open?this.refs.suggestions.focusFirst():this._canOpen()&&this._open("keydown",this.props),e.preventDefault();break;case m.default.codes.left:case m.default.codes.backspace:this.refs.choices&&this.refs.input&&0===this._getCursorPosition(this.refs.input)&&(this.refs.choices.focusLast(),e.preventDefault());break;case m.default.codes.right:this.refs.choices&&this.refs.input&&this._getCursorPosition(this.refs.input)===this.state.inputValue.length&&(this.refs.choices.focusFirst(),e.preventDefault());break;case m.default.codes.enter:if(this.props.multiple&&this.state.inputValue&&(e.preventDefault(),this._addInputValue()))break;this.state.open&&this.state.inputFocused&&(e.preventDefault(),this._pseudofocusedItem?this._handleItemSelect(this._pseudofocusedItem):this._close());break;case m.default.codes.esc:case m.default.codes.tab:this._handleMenuClose(e)}}},{key:"_getCursorPosition",value:function(e){var t=x.default.findDOMNode(e);if(t instanceof HTMLInputElement)return t.selectionStart}},{key:"_handleKeyPress",value:function(){++this._keyPressCount}},{key:"_handleMenuClose",value:function(){this.state.open&&this._close()}},{key:"_handleInputFocus",value:function(){this.setState({inputFocused:!0})}},{key:"_handleInputBlur",value:function(){this.setState({inputFocused:!1})}},{key:"_handleFocus",value:function(){if(this._focusTimeoutId)clearTimeout(this._focusTimeoutId),this._focusTimeoutId=null;else{this._focused=!0;var e=this.props.onFocus;if(e){e(this._getCurrentValue())}}}},{key:"_handleBlur",value:function(){var e=this;this._focusTimeoutId=setTimeout(function(){e._focusTimeoutId=null,e._focused=!1;var t=e.state.inputValue,n=e.props.onBlur;if(e.props.multiple)t&&!e._addInputValue()&&e._clearInput();else if(t!=e._lastValidValue){var r=void 0;return n&&(r=function(){var t=e._getCurrentValue();n(t)}),e._setValueMeta(e._lastValidItem,!1,!0,!0),void e._setInputValue(e._lastValidValue,r)}if(n){var o=e._getCurrentValue();n(o)}},1)}}]),t}(b.default.Component);V.propTypes={addonAfter:g.default.node,addonBefore:g.default.node,allowDuplicates:g.default.bool,bsSize:g.default.oneOf(["small","large"]),buttonAfter:g.default.node,buttonBefore:g.default.node,choicesClass:g.default.oneOfType([g.default.func,g.default.string]),closeOnCompletion:g.default.bool,datalist:g.default.any,datalistAdapter:g.default.object,datalistMessage:g.default.node,datalistOnly:g.default.bool,datalistPartial:g.default.bool,defaultValue:g.default.any,disabled:g.default.bool,dropup:g.default.bool,groupClassName:g.default.string,inputSelect:g.default.func,itemAdapter:g.default.object,itemReactKeyPropName:g.default.string,itemSortKeyPropName:g.default.string,itemValuePropName:g.default.string,multiple:g.default.bool,onAdd:g.default.func,onBlur:g.default.func,onChange:g.default.func,onDatalistMessageSelect:g.default.func,onFocus:g.default.func,onRemove:g.default.func,onSearch:g.default.func,onSelect:g.default.func,onToggle:g.default.func,placeholder:g.default.string,required:g.default.bool,searchDebounce:g.default.number,showToggle:g.default.oneOfType([g.default.bool,g.default.oneOf(["auto"])]),suggestionsClass:g.default.oneOfType([g.default.func,g.default.string]),toggleId:g.default.oneOfType([g.default.string,g.default.number]),type:g.default.string,value:g.default.any,valueIsItem:g.default.bool},V.contextTypes={$bs_formGroup:g.default.object},V.defaultProps={closeOnCompletion:!1,datalistOnly:!1,datalistPartial:!1,disabled:!1,dropup:!1,inputSelect:V.defaultInputSelect,multiple:!1,itemReactKeyPropName:"key",itemSortKeyPropName:"sortKey",itemValuePropName:"value",searchDebounce:250,showToggle:"auto",type:"text",valueIsItem:!1},t.default=V},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(174),c=r(u),d=n(868),p=r(d),f=n(910),h=r(f),m=n(2),y=r(m),g=n(1),v=r(g),b=n(34),_=r(b),w=function(e){function t(){var e;a(this,t);for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];var l=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o(r)))),u=l;return u._handleKeyDown=l._handleKeyDown.bind(l),u._handleKeyPress=l._handleKeyPress.bind(l),u._handleClose=l._handleClose.bind(l),u._handleClick=l._handleClick.bind(l),u._focusInput=l._focusInput.bind(l),l}return s(t,e),l(t,[{key:"shouldComponentUpdate",value:function(e){return!(0,p.default)(this.props,e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.autoHeight,r=t.disabled,o=t.focused,a=t.inputValue,i=t.items,s=t.renderItem,l=t.children,u=i.length>0,d=void 0;return u&&(d={width:.75*(a.length+1)+"em"}),v.default.createElement("ul",{className:(0,c.default)("form-control","autosuggest-choices",{focused:o,"has-items":u,"auto-height":n}),disabled:r,onClick:this._focusInput},i.map(function(t,n){return v.default.createElement("li",{key:n,"data-index":n,tabIndex:r?void 0:"-1",className:"autosuggest-choice",onKeyDown:e._handleKeyDown,onKeyPress:e._handleKeyPress},v.default.createElement("span",{className:"autosuggest-choice-close",onClick:e._handleClose}),v.default.createElement("span",{className:"autosuggest-choice-label",onClick:e._handleClick},s(t)))}),v.default.createElement("li",{className:"autosuggest-input-choice",style:d},l))}},{key:"_handleKeyDown",value:function(e){switch(e.keyCode){case h.default.codes.left:this._focusPrevious(),e.preventDefault();break;case h.default.codes.right:this._focusNext(),e.preventDefault();break;case h.default.codes.backspace:this._removeActive(-1),e.preventDefault();break;case h.default.codes.delete:this._removeActive(0),e.preventDefault()}}},{key:"_handleKeyPress",value:function(e){this._focusInput();var t=this.props.onKeyPress;t&&t(e)}},{key:"_handleClose",value:function(e){if(!this.props.disabled&&e.target instanceof HTMLElement){var t=e.target.parentNode;if(t instanceof Element){var n=Number(t.getAttribute("data-index"));this._remove(n)}}e.stopPropagation()}},{key:"_handleClick",value:function(e){e.stopPropagation()}},{key:"focusFirst",value:function(){var e=this._getFocusableMenuItems(!1);e.length>0&&e[0].focus()}},{key:"focusLast",value:function(){var e=this._getFocusableMenuItems(!1);e.length>0&&e[e.length-1].focus()}},{key:"_focusPrevious",value:function(){var e=this._getItemsAndActiveIndex(!0),t=e.items,n=e.activeIndex;n>0?t[n-1].focus():t.length>0&&t[t.length-1].focus()}},{key:"_focusNext",value:function(){var e=this._getItemsAndActiveIndex(!0),t=e.items,n=e.activeIndex;n<t.length-1?t[n+1].focus():t.length>0&&t[0].focus()}},{key:"_focusInput",value:function(){var e=_.default.findDOMNode(this);if(e instanceof Element){var t=e.querySelector("input");t&&t.focus()}}},{key:"_remove",value:function(e){var t=this.props.onRemove;t&&t(e)}},{key:"_removeActive",value:function(e){var t=this._getItemsAndActiveIndex(!1),n=t.items,r=t.activeIndex;if(r>=0){var o=r+e;o<0||o>=n.length-1?this._focusInput():0!=e&&n[o].focus(),this._remove(r)}}},{key:"_getItemsAndActiveIndex",value:function(e){var t=this._getFocusableMenuItems(e),n=document.activeElement;return{items:t,activeIndex:n?t.indexOf(n):-1}}},{key:"_getFocusableMenuItems",value:function(e){var t=_.default.findDOMNode(this);return t instanceof Element?Array.from(t.querySelectorAll(e?'[tabIndex="-1"],input':'[tabIndex="-1"]')):[]}}]),t}(v.default.Component);w.propTypes={autoHeight:y.default.bool,disabled:y.default.bool,focused:y.default.bool,inputValue:y.default.string,items:y.default.arrayOf(y.default.any).isRequired,onKeyPress:y.default.func,onRemove:y.default.func,renderItem:y.default.func.isRequired},t.default=w},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(868),u=r(l),c=n(2),d=r(c),p=n(1),f=r(p),h=n(63),m=n(34),y=r(m),g=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"shouldComponentUpdate",value:function(e){return!(0,u.default)(this.props,e)}},{key:"isFocused",value:function(){var e=y.default.findDOMNode(this.refs.menu);return null!=e&&document&&e.contains(document.activeElement)}},{key:"focusFirst",value:function(){this.refs.menu.focusNext()}},{key:"render",value:function(){var e=this.props,t=e.items,n=e.datalistMessage,r=e.onDatalistMessageSelect;return f.default.createElement(h.Dropdown.Menu,{labelledBy:this.props.labelledBy,onClose:this.props.onClose,open:this.props.open,ref:"menu"},t.map(this._renderItem,this),this.props.filtered&&f.default.createElement(h.MenuItem,{key:"show-all",onSelect:this.props.onDisableFilter},f.default.createElement("span",{className:"show-all"},0===t.length?f.default.createElement("span",{className:"no-matches"}):null)),n&&f.default.createElement(h.MenuItem,{key:"datalist-message",disabled:null==r,onSelect:r},n))}},{key:"_renderItem",value:function(e,t){var n=this.props.isSelectedItem(e);return f.default.createElement(h.MenuItem,{active:n,className:t!==this.props.focusedIndex||n?void 0:"pseudofocused",eventKey:e,key:this.props.getItemKey(e),onSelect:this.props.onSelect},this.props.renderItem(e))}}]),t}(f.default.Component);g.propTypes={datalistMessage:d.default.node,filtered:d.default.bool,focusedIndex:d.default.number,getItemKey:d.default.func.isRequired,isSelectedItem:d.default.func.isRequired,items:d.default.arrayOf(d.default.any).isRequired,labelledBy:d.default.oneOfType([d.default.string,d.default.number]),onClose:d.default.func,onDatalistMessageSelect:d.default.func,onDisableFilter:d.default.func,onSelect:d.default.func.isRequired,open:d.default.bool,renderItem:d.default.func.isRequired},t.default=g},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(875),l=function(e){return e&&e.__esModule?e:{default:e}}(s),u=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),i(t,[{key:"getLength",value:function(){return 0}},{key:"filter",value:function(){return[]}},{key:"find",value:function(){}},{key:"toArray",value:function(){return[]}}]),t}(l.default);t.default=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(875),l=function(e){return e&&e.__esModule?e:{default:e}}(s),u=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),i(t,[{key:"getLength",value:function(e){return e.length}},{key:"filter",value:function(e,t){return e.filter(t)}},{key:"find",value:function(e,t){return e.find(t)}},{key:"toArray",value:function(e){return e.slice()}}]),t}(l.default);t.default=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(912),l=function(e){return e&&e.__esModule?e:{default:e}}(s),u=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),i(t,[{key:"getLength",value:function(e){return e.size}},{key:"filter",value:function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e.entries()[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var l=i.value,u=this._getKeyValueItem(l[0],l[1]);t(u)&&n.push(u)}}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}},{key:"find",value:function(e,t){var n=!0,r=!1,o=void 0;try{for(var a,i=e.entries()[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var s=a.value,l=this._getKeyValueItem(s[0],s[1]);if(t(l))return l}}catch(e){r=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw o}}}},{key:"toArray",value:function(e){var t=[],n=!0,r=!1,o=void 0;try{for(var a,i=e.entries()[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var s=a.value;t.push(this._getKeyValueItem(s[0],s[1]))}}catch(e){r=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw o}}return t}}]),t}(l.default);t.default=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(912),l=function(e){return e&&e.__esModule?e:{default:e}}(s),u=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),i(t,[{key:"getLength",value:function(e){return Object.keys(e).length}},{key:"filter",value:function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=Object.keys(e)[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var l=i.value,u=this._getKeyValueItem(l,e[l]);t(u)&&n.push(u)}}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}},{key:"find",value:function(e,t){var n=!0,r=!1,o=void 0;try{for(var a,i=Object.keys(e)[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var s=a.value,l=this._getKeyValueItem(s,e[s]);if(t(l))return l}}catch(e){r=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw o}}}},{key:"toArray",value:function(e){var t=[],n=!0,r=!1,o=void 0;try{for(var a,i=Object.keys(e)[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var s=a.value;t.push(this._getKeyValueItem(s,e[s]))}}catch(e){r=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw o}}return t}}]),t}(l.default);t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p=n(3),f=o(p),h=n(1),m=o(h),y=n(866),g=r(y),v=n(855),b=o(v),_=n(33),w=n(174),x=r(w),S=n(859),C=n(175),k=n(173),E=r(k),M=n(861),A=r(M),T=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":d(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},O=b,P=function(e){function t(){s(this,t);var e=l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.ProfileToggle=function(t){var n,r=t.profile,o=t.type,a=t.label,s=t.checked,l=t.isGroupToggle;return m.createElement("label",{className:(0,x.default)((n={},i(n,O.altType,l),i(n,O.radio,"radio"===o),i(n,O.checkbox,"checkbox"===o),n))},m.createElement("input",{type:o,checked:s,onChange:function(t){return e.store.selectMolecularProfile(r,t.target.checked)},"data-test":r.molecularAlterationType}),m.createElement("span",{className:l?O.groupName:O.profileName},a),!l&&m.createElement(E.default,{mouseEnterDelay:0,placement:"right",overlay:m.createElement("div",{className:O.tooltip},r.description)},m.createElement(g.default,{className:O.infoIcon,name:"question-circle"})))},e}return u(t,e),c(t,[{key:"render",value:function(){return 1!==this.store.selectableSelectedStudyIds.length?null:m.createElement(S.FlexRow,{padded:!0,className:O.MolecularProfileSelector},m.createElement(A.default,{className:"sectionLabel",promises:[this.store.molecularProfiles]},"Select Genomic Profiles:"),m.createElement("div",{className:O.group,"data-test":"molecularProfileSelector"},this.renderGroup("MUTATION_EXTENDED","Mutation"),this.renderGroup("COPY_NUMBER_ALTERATION","Copy Number"),this.renderGroup("GENESET_SCORE","GSVA scores"),this.renderGroup("MRNA_EXPRESSION","mRNA Expression"),this.renderGroup("METHYLATION","DNA Methylation"),this.renderGroup("METHYLATION_BINARY","DNA Methylation"),this.renderGroup("PROTEIN_LEVEL","Protein/phosphoprotein level"),!(!this.store.molecularProfiles.isComplete||this.store.molecularProfiles.result.length)&&m.createElement("strong",null,"No Genomic Profiles available for this Cancer Study")))}},{key:"renderGroup",value:function(e,t){var n=this,r=this.store.getFilteredProfiles(e);if(!r.length)return null;var o=r.map(function(e){return e.molecularProfileId}),i=f.intersection(this.store.selectedProfileIds,o).length>0,s=[];r.length>1&&!this.store.forDownloadTab&&s.push(m.createElement(this.ProfileToggle,{key:"altTypeCheckbox:"+e,profile:r[0],type:"checkbox",label:t+". Select one of the profiles below:",checked:i,isGroupToggle:!0}));var l=r.map(function(e){return m.createElement(n.ProfileToggle,{key:"profile:"+e.molecularProfileId,profile:e,type:n.store.forDownloadTab||r.length>1?"radio":"checkbox",label:e.name,checked:f.includes(n.store.selectedProfileIds,e.molecularProfileId),isGroupToggle:!1})});return this.store.forDownloadTab||1==r.length?s.push.apply(s,a(l)):s.push(m.createElement("div",{key:"group:"+e,className:O.group},l)),this.store.forDownloadTab?s:(i&&"MRNA_EXPRESSION"==e&&s.push(m.createElement("div",{key:s.length,className:O.zScore},"Enter a z-score threshold ",m.createElement("span",{dangerouslySetInnerHTML:{__html:["&","plusmn;"].join("")}}),m.createElement("input",{type:"text",value:this.store.zScoreThreshold,onChange:function(e){n.store.zScoreThreshold=e.target.value}}))),i&&"PROTEIN_LEVEL"==e&&s.push(m.createElement("div",{key:s.length,className:O.zScore},"Enter a z-score threshold ",m.createElement("span",{dangerouslySetInnerHTML:{__html:["&","plusmn;"].join("")}}),m.createElement("input",{type:"text",value:this.store.rppaScoreThreshold,onChange:function(e){n.store.rppaScoreThreshold=e.target.value}}))),s)}}]),t}(C.QueryStoreComponent);P=T([_.observer],P),t.default=P},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){var n=[];return e.mutation&&n.push(p.createElement(k,{key:"M",label:"Mutation",state:"mutation",store:t,dataTest:"M"})),e.cna&&n.push(p.createElement(k,{key:"C",label:"Copy number alterations",state:"cna",store:t,dataTest:"C"})),n}Object.defineProperty(t,"__esModule",{value:!0}),t.DataTypePriorityCheckBox=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.checkBoxes=l;var d=n(1),p=o(d),f=n(855),h=o(f),m=n(175),y=n(33),g=n(859),v=n(861),b=r(v),_=n(854),w=r(_),x=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},S=h,C=function(e){function t(){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),u(t,[{key:"render",value:function(){if(!this.store.isVirtualStudyQuery)return null;var e=[];return e.push(p.createElement(w.default,{key:"loading",isLoading:this.store.profileAvailability.isPending})),this.store.profileAvailability.isError?e.push(p.createElement("span",{key:"error"},"Error loading profiles for selected studies.")):this.store.profileAvailability.isComplete&&(e=e.concat(l(this.store.profileAvailability.result,this.store))),p.createElement(g.FlexRow,{padded:!0,className:S.DataTypePrioritySelector,"data-test":"dataTypePrioritySelector"},p.createElement(b.default,{className:"sectionLabel"},"Select Molecular Profiles:"),p.createElement(g.FlexRow,null,e))}}]),t}(m.QueryStoreComponent);C=x([y.observer],C),t.default=C;var k=t.DataTypePriorityCheckBox=(0,y.observer)(function(e){return p.createElement("label",{className:S.DataTypePriorityLabel},p.createElement("input",{type:"checkbox",checked:e.store.dataTypePriority[e.state]||!1,onChange:function(t){e.store.dataTypePriority[e.state]=t.currentTarget.checked},"data-test":e.dataTest}),e.label)})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d=n(1),p=o(d),f=n(855),h=o(f),m=n(63),y=n(33),g=n(13),v=n(859),b=n(913),_=r(b),w=n(1029),x=r(w),S=n(174),C=r(S),k=n(175),E=n(1030),M=r(E),A=n(1035),T=r(A),O=n(861),P=r(O),j=n(64),I=r(j),D=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},N=h,R=function(e){function t(){return i(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),u(t,[{key:"render",value:function(){var e=this;return p.createElement(v.FlexRow,{padded:!0,overflow:!0,className:N.GeneSetSelector},p.createElement(P.default,{className:"sectionLabel"},"Enter Gene Sets:"),p.createElement(v.FlexCol,{overflow:!0},p.createElement(v.FlexRow,{padded:!0,className:N.buttonRow},p.createElement("button",{className:"btn btn-default btn-sm",onClick:function(){return e.store.showGenesetsHierarchyPopup=!0}},"Select Gene Sets from Hierarchy"),p.createElement("button",{className:"btn btn-default btn-sm",onClick:function(){return e.store.showGenesetsVolcanoPopup=!0}},"Select Gene Sets from Volcano Plot")),p.createElement("textarea",{ref:this.textAreaRef,className:(0,C.default)(N.geneSet,this.store.genesetQuery?N.notEmpty:N.empty),rows:5,cols:80,placeholder:"Enter Gene Sets",title:"Enter Gene Sets",value:this.store.genesetQuery,onChange:function(t){return e.store.genesetQuery=t.currentTarget.value},"data-test":"geneSet"}),p.createElement(x.default,null),p.createElement(m.Modal,{className:(0,C.default)("cbioportal-frontend",N.GenesetsSelectorWindow),show:this.store.showGenesetsHierarchyPopup,onHide:function(){return e.store.showGenesetsHierarchyPopup=!1}},p.createElement(m.Modal.Header,{closeButton:!0},p.createElement(m.Modal.Title,null,"Select Gene Sets From Hierarchy")),p.createElement(m.Modal.Body,null,p.createElement(M.default,{initialSelection:this.store.genesetIds,gsvaProfile:this.store.getFilteredProfiles("GENESET_SCORE")[0].molecularProfileId,sampleListId:this.store.defaultSelectedSampleListId,onSelect:function(t){e.store.applyGenesetSelection(t),e.store.showGenesetsHierarchyPopup=!1}}))),p.createElement(m.Modal,{className:(0,C.default)("cbioportal-frontend",N.GenesetsVolcanoSelectorWindow),show:this.store.showGenesetsVolcanoPopup,onHide:function(){return e.store.showGenesetsVolcanoPopup=!1},onShow:function(){return e.store.map_genesets_selected_volcano.replace(e.store.genesetIds.map(function(e){return[e,!0]}))}},p.createElement(m.Modal.Header,{closeButton:!0},p.createElement(m.Modal.Title,null,"Select Gene Sets From Volcano Plot")),p.createElement(m.Modal.Body,null,p.createElement(T.default,{initialSelection:this.store.genesetIds,data:this.store.volcanoPlotTableData.result,plotData:this.store.volcanoPlotGraphData,maxY:this.store.minYVolcanoPlot?-Math.log(this.store.minYVolcanoPlot)/Math.log(10):void 0,onSelect:function(t){e.store.addToGenesetSelection(t),e.store.showGenesetsVolcanoPopup=!1}})))))}},{key:"selectedGeneListOption",get:function(){var e=this,t=this.geneListOptions.find(function(t){return t.value===e.store.geneQuery});return t?t.value:""}},{key:"geneListOptions",get:function(){var e=_.default;return I.default.querySetsOfGenes&&(e=I.default.querySetsOfGenes),[{label:"User-defined List",value:""}].concat(a(e.map(function(e){return{label:e.id+" ("+e.genes.length+" genes)",value:e.genes.join(" ")}})))}},{key:"textAreaRef",get:function(){var e=this;if("shouldFocus"===this.store.geneQueryErrorDisplayStatus)return function(t){var n=e.store.oql.error;t&&n&&(t.focus(),t.setSelectionRange(n.start,n.end),e.store.geneQueryErrorDisplayStatus="focused")}}}]),t}(k.QueryStoreComponent);D([g.computed],R.prototype,"selectedGeneListOption",null),D([g.computed],R.prototype,"geneListOptions",null),D([g.computed],R.prototype,"textAreaRef",null),R=D([y.observer],R),t.default=R},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(1),c=r(u),d=n(855),p=r(d),f=n(33),h=n(866),m=function(e){return e&&e.__esModule?e:{default:e}}(h),y=n(175),g=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},v=p,b=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){return this.store.genesetIdsQuery.error?c.createElement("div",{className:v.GeneSymbolValidator},c.createElement("span",{className:v.errorMessage},"Cannot validate gene sets because of invalid OQL. "+("unfocused"===this.store.genesetQueryErrorDisplayStatus?"Please click 'Submit' to see location of error.":this.store.genesetIdsQuery.error.message))):this.store.genesetIdsQuery.query.length?this.store.genesets.isError?c.createElement("div",{className:v.GeneSymbolValidator},c.createElement("span",{className:v.pendingMessage},"Unable to validate gene sets.")):this.store.genesets.isPending&&0===this.store.genesets.result.invalid.length?c.createElement("div",{className:v.GeneSymbolValidator},c.createElement("span",{className:v.pendingMessage},"Validating gene sets...")):this.store.genesets.result.invalid.length?c.createElement("div",{className:v.GeneSymbolValidator},c.createElement("div",{className:v.invalidBubble,title:"Please edit the gene sets."},c.createElement(m.default,{className:v.icon,name:"exclamation-circle"}),c.createElement("span",null,"Invalid gene sets.")),this.store.genesets.result.invalid.map(this.renderSuggestion,this)):c.createElement("div",{className:v.GeneSymbolValidator},c.createElement("div",{className:v.validBubble,title:"You can now submit the list."},c.createElement(m.default,{className:v.icon,name:"check-circle"}),c.createElement("span",null,"All gene sets are valid."))):null}},{key:"renderSuggestion",value:function(e,t){var n=this,r=function(){return n.store.replaceGeneset(e,"")};return c.createElement("div",{key:t,className:v.suggestionBubble,title:"Could not find gene set. Click to remove it from the gene list.",onClick:r},c.createElement(m.default,{className:v.icon,name:"times-circle"}),c.createElement("span",{className:v.noChoiceLabel},e))}}]),t}(y.QueryStoreComponent);b=g([f.observer],b),t.default=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(1),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),d=n(13),p=n(33),f=n(1031),h=r(f),m=n(1034),y=r(m),g=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},v=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.percentile=75,n.pvalueThreshold=.05,n.scoreThreshold=.5,n.searchValue="",n.updateSelectionParameters=n.updateSelectionParameters.bind(n),n}return i(t,e),s(t,[{key:"updateSelectionParameters",value:function(e,t,n){this.percentile=e,this.pvalueThreshold=t,this.scoreThreshold=n}},{key:"render",value:function(){var e=this;return c.createElement("div",null,c.createElement("text",null,"Search hierarchy"),c.createElement("div",{className:"form-group has-feedback input-group-sm",style:{display:"inline-block"}},c.createElement("input",{type:"text",id:"geneset-hierarchy-search",className:"form-control tableSearchInput",style:{width:768},value:this.searchValue,onChange:function(t){return e.searchValue=t.target.value}}),c.createElement("span",{className:"fa fa-search form-control-feedback","aria-hidden":"true"})),c.createElement(y.default,{percentile:this.percentile,pvalueThreshold:this.pvalueThreshold,scoreThreshold:this.scoreThreshold,onApply:this.updateSelectionParameters}),c.createElement(h.default,{initialSelection:this.props.initialSelection,scoreThreshold:this.scoreThreshold,pvalueThreshold:this.pvalueThreshold,percentile:this.percentile,gsvaProfile:this.props.gsvaProfile,sampleListId:this.props.sampleListId,searchValue:this.searchValue,onSelect:this.props.onSelect}))}}]),t}(c.Component);g([d.observable],v.prototype,"percentile",void 0),g([d.observable],v.prototype,"pvalueThreshold",void 0),g([d.observable],v.prototype,"scoreThreshold",void 0),g([d.observable],v.prototype,"searchValue",void 0),v=g([p.observer],v),t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(1),c=r(u),d=n(90),p=r(d),f=n(82);n(1032),n(1033);var h=n(3),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(h),y=n(33),g=n(13),v=n(854),b=r(v),_=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},w=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(i,s)}l((r=r.apply(e,t||[])).next())})},x=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.isLoading=!0,n.map_geneSets_selected=new g.ObservableMap,n.map_geneSets_selected.replace(e.initialSelection.map(function(e){return[e,!0]})),n}return i(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this;this.promisedTree=this.initTree(this.tree),this.promisedTree.then(function(t){return e.isLoading=!1,t})}},{key:"componentDidUpdate",value:function(e){var t=this;this.props.scoreThreshold===e.scoreThreshold&&this.props.pvalueThreshold===e.pvalueThreshold&&this.props.percentile===e.percentile||(this.promisedTree=this.promisedTree.then(function(e){return t.isLoading=!0,t.replaceTree(e)}).then(function(e){return t.isLoading=!1,e})),this.props.searchValue!==e.searchValue&&(this.promisedTree=this.promisedTree.then(function(e){return t.searchTree(e,t.props.searchValue)}))}},{key:"transformHierarchyData",value:function(e){var t=e,n=[],r=0,o=!0,a=!1,i=void 0;try{for(var s,l=t[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var u=s.value,c=u.nodeName,d=u.parentNodeName?u.parentNodeName:"#";if(n.push({id:c,parent:d,text:c,li_attr:{name:c},geneset:!1,state:{opened:!0,selected:!1}}),m.has(u,"genesets")){var p=!0,f=!1,h=void 0;try{for(var y,g=u.genesets[Symbol.iterator]();!(p=(y=g.next()).done);p=!0){var v=y.value,b=r++,_=v.genesetId,w=v.description,x=v.representativeScore,S=v.representativePvalue,C=v.refLink,k="";k=k+"score = "+x.toFixed(2),S=S<.005?S.toExponential(0):S.toFixed(2),k=k+", p-value = "+S;var E=_+'<span style="font-weight:normal;font-style:italic;"> '+k+"</span>";n.push({id:b.toString(),parent:c,text:E,state:{selected:!1},li_attr:{name:_},description:w,representativeScore:x,representativePvalue:S,refLink:C,geneset:!0})}}catch(e){f=!0,h=e}finally{try{!p&&g.return&&g.return()}finally{if(f)throw h}}}}}catch(e){a=!0,i=e}finally{try{!o&&l.return&&l.return()}finally{if(a)throw i}}return n}},{key:"initTree",value:function(e){return w(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,f.getHierarchyData)(this.props.gsvaProfile,this.props.percentile,this.props.scoreThreshold,this.props.pvalueThreshold,this.props.sampleListId);case 2:return n=t.sent,(0,p.default)(e).jstree({search:{show_only_matches:!0,show_only_matches_children:!0},checkbox:{cascade_to_disabled:!1,cascade_to_hidden:!1},core:{themes:{icons:!1},check_callback:!0,data:this.transformHierarchyData(n)},plugins:["checkbox","search"]}),t.abrupt("return",e);case 5:case"end":return t.stop()}},t,this)}))}},{key:"destroyTree",value:function(e){(0,p.default)(e).jstree(!0).destroy()}},{key:"replaceTree",value:function(e){return w(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.destroyTree(e),t.next=3,this.initTree(e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t,this)}))}},{key:"submitGeneSets",value:function(e){if(e){var t=(0,p.default)(e).jstree("get_selected",!0),n=!0,r=!1,o=void 0;try{for(var a,i=t[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var s=a.value;s.original.geneset&&this.map_geneSets_selected.set(s.original.description,!0)}}catch(e){r=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw o}}}return this.map_geneSets_selected}},{key:"searchTree",value:function(e,t){return(0,p.default)(e).jstree(!0).search(t),e}},{key:"render",value:function(){var e=this;return c.default.createElement("div",null,c.default.createElement(b.default,{isLoading:this.isLoading}),c.default.createElement("div",{ref:function(t){return e.tree=t},style:{maxHeight:"380px",overflowY:"scroll"}}),c.default.createElement("div",{style:{padding:"30px 0px"}},c.default.createElement("button",{className:"btn btn-primary btn-sm pull-right",style:{margin:"2px"},disabled:this.isLoading,onClick:function(){var t=e.submitGeneSets(e.tree);e.props.onSelect(t)}},"Select")))}}]),t}(c.default.Component);_([g.observable],x.prototype,"isLoading",void 0),x=_([y.observer],x),t.default=x},function(e,t,n){var r,o,a;!function(i){"use strict";o=[n(90)],r=i,void 0!==(a="function"==typeof r?r.apply(t,o):r)&&(e.exports=a)}(function(e,t){"use strict";if(!e.jstree){var n=0,r=!1,o=!1,a=!1,i=[],s=e("script:last").attr("src"),l=window.document;e.jstree={version:"3.3.4",defaults:{plugins:[]},plugins:{},path:s&&-1!==s.indexOf("/")?s.replace(/\/[^\/]+$/,""):"",idregex:/[\\:&!^|()\[\]<>@*'+~#";.,=\- \/${}%?`]/g,root:"#"},e.jstree.create=function(t,r){var o=new e.jstree.core(++n),a=r;return r=e.extend(!0,{},e.jstree.defaults,r),a&&a.plugins&&(r.plugins=a.plugins),e.each(r.plugins,function(e,t){"core"!==e&&(o=o.plugin(t,r[t]))}),e(t).data("jstree",o),o.init(t,r),o},e.jstree.destroy=function(){e(".jstree:jstree").jstree("destroy"),e(l).off(".jstree")},e.jstree.core=function(e){this._id=e,this._cnt=0,this._wrk=null,this._data={core:{themes:{name:!1,dots:!1,icons:!1,ellipsis:!1},selected:[],last_error:{},working:!1,worker_queue:[],focused:null}}},e.jstree.reference=function(t){var n=null,r=null;if(!t||!t.id||t.tagName&&t.nodeType||(t=t.id),!r||!r.length)try{r=e(t)}catch(e){}if(!r||!r.length)try{r=e("#"+t.replace(e.jstree.idregex,"\\$&"))}catch(e){}return r&&r.length&&(r=r.closest(".jstree")).length&&(r=r.data("jstree"))?n=r:e(".jstree").each(function(){var r=e(this).data("jstree");return r&&r._model.data[t]?(n=r,!1):void 0}),n},e.fn.jstree=function(n){var r="string"==typeof n,o=Array.prototype.slice.call(arguments,1),a=null;return!(!0===n&&!this.length)&&(this.each(function(){var i=e.jstree.reference(this),s=r&&i?i[n]:null;return a=r&&s?s.apply(i,o):null,i||r||n!==t&&!e.isPlainObject(n)||e.jstree.create(this,n),(i&&!r||!0===n)&&(a=i||!1),(null===a||a===t)&&void 0}),null!==a&&a!==t?a:this)},e.expr.pseudos.jstree=e.expr.createPseudo(function(n){return function(n){return e(n).hasClass("jstree")&&e(n).data("jstree")!==t}}),e.jstree.defaults.core={data:!1,strings:!1,check_callback:!1,error:e.noop,animation:200,multiple:!0,themes:{name:!1,url:!1,dir:!1,dots:!0,icons:!0,ellipsis:!1,stripes:!1,variant:!1,responsive:!1},expand_selected_onload:!0,worker:!0,force_text:!1,dblclick_toggle:!0},e.jstree.core.prototype={plugin:function(t,n){var r=e.jstree.plugins[t];return r?(this._data[t]={},r.prototype=this,new r(n,this)):this},init:function(t,n){this._model={data:{},changed:[],force_full_redraw:!1,redraw_timeout:!1,default_state:{loaded:!0,opened:!1,selected:!1,disabled:!1}},this._model.data[e.jstree.root]={id:e.jstree.root,parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}},this.element=e(t).addClass("jstree jstree-"+this._id),this.settings=n,this._data.core.ready=!1,this._data.core.loaded=!1,this._data.core.rtl="rtl"===this.element.css("direction"),this.element[this._data.core.rtl?"addClass":"removeClass"]("jstree-rtl"),this.element.attr("role","tree"),this.settings.core.multiple&&this.element.attr("aria-multiselectable",!0),this.element.attr("tabindex")||this.element.attr("tabindex","0"),this.bind(),this.trigger("init"),this._data.core.original_container_html=this.element.find(" > ul > li").clone(!0),this._data.core.original_container_html.find("li").addBack().contents().filter(function(){return 3===this.nodeType&&(!this.nodeValue||/^\s+$/.test(this.nodeValue))}).remove(),this.element.html("<ul class='jstree-container-ul jstree-children' role='group'><li id='j"+this._id+"_loading' class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='tree-item'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading"),this._data.core.li_height=this.get_container_ul().children("li").first().outerHeight()||24,this._data.core.node=this._create_prototype_node(),this.trigger("loading"),this.load_node(e.jstree.root)},destroy:function(e){if(this.trigger("destroy"),this._wrk)try{window.URL.revokeObjectURL(this._wrk),this._wrk=null}catch(e){}e||this.element.empty(),this.teardown()},_create_prototype_node:function(){var e,t,n=l.createElement("LI");return n.setAttribute("role","treeitem"),e=l.createElement("I"),e.className="jstree-icon jstree-ocl",e.setAttribute("role","presentation"),n.appendChild(e),e=l.createElement("A"),e.className="jstree-anchor",e.setAttribute("href","#"),e.setAttribute("tabindex","-1"),t=l.createElement("I"),t.className="jstree-icon jstree-themeicon",t.setAttribute("role","presentation"),e.appendChild(t),n.appendChild(e),e=t=null,n},teardown:function(){this.unbind(),this.element.removeClass("jstree").removeData("jstree").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/gi,"")}),this.element=null},bind:function(){var t="",n=null,r=0;this.element.on("dblclick.jstree",function(e){if(e.target.tagName&&"input"===e.target.tagName.toLowerCase())return!0;if(l.selection&&l.selection.empty)l.selection.empty();else if(window.getSelection){var t=window.getSelection();try{t.removeAllRanges(),t.collapse()}catch(e){}}}).on("mousedown.jstree",e.proxy(function(e){e.target===this.element[0]&&(e.preventDefault(),r=+new Date)},this)).on("mousedown.jstree",".jstree-ocl",function(e){e.preventDefault()}).on("click.jstree",".jstree-ocl",e.proxy(function(e){this.toggle_node(e.target)},this)).on("dblclick.jstree",".jstree-anchor",e.proxy(function(e){return!(!e.target.tagName||"input"!==e.target.tagName.toLowerCase())||void(this.settings.core.dblclick_toggle&&this.toggle_node(e.target))},this)).on("click.jstree",".jstree-anchor",e.proxy(function(t){t.preventDefault(),t.currentTarget!==l.activeElement&&e(t.currentTarget).focus(),this.activate_node(t.currentTarget,t)},this)).on("keydown.jstree",".jstree-anchor",e.proxy(function(t){if(t.target.tagName&&"input"===t.target.tagName.toLowerCase())return!0;if(32!==t.which&&13!==t.which&&(t.shiftKey||t.ctrlKey||t.altKey||t.metaKey))return!0;var n=null;switch(this._data.core.rtl&&(37===t.which?t.which=39:39===t.which&&(t.which=37)),t.which){case 32:t.ctrlKey&&(t.type="click",e(t.currentTarget).trigger(t));break;case 13:t.type="click",e(t.currentTarget).trigger(t);break;case 37:t.preventDefault(),this.is_open(t.currentTarget)?this.close_node(t.currentTarget):(n=this.get_parent(t.currentTarget))&&n.id!==e.jstree.root&&this.get_node(n,!0).children(".jstree-anchor").focus();break;case 38:t.preventDefault(),(n=this.get_prev_dom(t.currentTarget))&&n.length&&n.children(".jstree-anchor").focus();break;case 39:t.preventDefault(),this.is_closed(t.currentTarget)?this.open_node(t.currentTarget,function(e){this.get_node(e,!0).children(".jstree-anchor").focus()}):this.is_open(t.currentTarget)&&(n=this.get_node(t.currentTarget,!0).children(".jstree-children")[0])&&e(this._firstChild(n)).children(".jstree-anchor").focus();break;case 40:t.preventDefault(),(n=this.get_next_dom(t.currentTarget))&&n.length&&n.children(".jstree-anchor").focus();break;case 106:this.open_all();break;case 36:t.preventDefault(),(n=this._firstChild(this.get_container_ul()[0]))&&e(n).children(".jstree-anchor").filter(":visible").focus();break;case 35:t.preventDefault(),this.element.find(".jstree-anchor").filter(":visible").last().focus();break;case 113:t.preventDefault(),this.edit(t.currentTarget)}},this)).on("load_node.jstree",e.proxy(function(t,n){n.status&&(n.node.id!==e.jstree.root||this._data.core.loaded||(this._data.core.loaded=!0,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.trigger("loaded")),this._data.core.ready||setTimeout(e.proxy(function(){if(this.element&&!this.get_container_ul().find(".jstree-loading").length){if(this._data.core.ready=!0,this._data.core.selected.length){if(this.settings.core.expand_selected_onload){var t,n,r=[];for(t=0,n=this._data.core.selected.length;n>t;t++)r=r.concat(this._model.data[this._data.core.selected[t]].parents);for(r=e.vakata.array_unique(r),t=0,n=r.length;n>t;t++)this.open_node(r[t],!1,0)}this.trigger("changed",{action:"ready",selected:this._data.core.selected})}this.trigger("ready")}},this),0))},this)).on("keypress.jstree",e.proxy(function(r){if(r.target.tagName&&"input"===r.target.tagName.toLowerCase())return!0;n&&clearTimeout(n),n=setTimeout(function(){t=""},500);var o=String.fromCharCode(r.which).toLowerCase(),a=this.element.find(".jstree-anchor").filter(":visible"),i=a.index(l.activeElement)||0,s=!1;if(t+=o,t.length>1){if(a.slice(i).each(e.proxy(function(n,r){return 0===e(r).text().toLowerCase().indexOf(t)?(e(r).focus(),s=!0,!1):void 0},this)),s)return;if(a.slice(0,i).each(e.proxy(function(n,r){return 0===e(r).text().toLowerCase().indexOf(t)?(e(r).focus(),s=!0,!1):void 0},this)),s)return}if(new RegExp("^"+o.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+"+$").test(t)){if(a.slice(i+1).each(e.proxy(function(t,n){return e(n).text().toLowerCase().charAt(0)===o?(e(n).focus(),s=!0,!1):void 0},this)),s)return;if(a.slice(0,i+1).each(e.proxy(function(t,n){return e(n).text().toLowerCase().charAt(0)===o?(e(n).focus(),s=!0,!1):void 0},this)),s)return}},this)).on("init.jstree",e.proxy(function(){var e=this.settings.core.themes;this._data.core.themes.dots=e.dots,this._data.core.themes.stripes=e.stripes,this._data.core.themes.icons=e.icons,this._data.core.themes.ellipsis=e.ellipsis,this.set_theme(e.name||"default",e.url),this.set_theme_variant(e.variant)},this)).on("loading.jstree",e.proxy(function(){this[this._data.core.themes.dots?"show_dots":"hide_dots"](),this[this._data.core.themes.icons?"show_icons":"hide_icons"](),this[this._data.core.themes.stripes?"show_stripes":"hide_stripes"](),this[this._data.core.themes.ellipsis?"show_ellipsis":"hide_ellipsis"]()},this)).on("blur.jstree",".jstree-anchor",e.proxy(function(t){this._data.core.focused=null,e(t.currentTarget).filter(".jstree-hovered").mouseleave(),this.element.attr("tabindex","0")},this)).on("focus.jstree",".jstree-anchor",e.proxy(function(t){var n=this.get_node(t.currentTarget);n&&n.id&&(this._data.core.focused=n.id),this.element.find(".jstree-hovered").not(t.currentTarget).mouseleave(),e(t.currentTarget).mouseenter(),this.element.attr("tabindex","-1")},this)).on("focus.jstree",e.proxy(function(){if(+new Date-r>500&&!this._data.core.focused){r=0;var e=this.get_node(this.element.attr("aria-activedescendant"),!0);e&&e.find("> .jstree-anchor").focus()}},this)).on("mouseenter.jstree",".jstree-anchor",e.proxy(function(e){this.hover_node(e.currentTarget)},this)).on("mouseleave.jstree",".jstree-anchor",e.proxy(function(e){this.dehover_node(e.currentTarget)},this))},unbind:function(){this.element.off(".jstree"),e(l).off(".jstree-"+this._id)},trigger:function(e,t){t||(t={}),t.instance=this,this.element.triggerHandler(e.replace(".jstree","")+".jstree",t)},get_container:function(){return this.element},get_container_ul:function(){return this.element.children(".jstree-children").first()},get_string:function(t){var n=this.settings.core.strings;return e.isFunction(n)?n.call(this,t):n&&n[t]?n[t]:t},_firstChild:function(e){for(e=e?e.firstChild:null;null!==e&&1!==e.nodeType;)e=e.nextSibling;return e},_nextSibling:function(e){for(e=e?e.nextSibling:null;null!==e&&1!==e.nodeType;)e=e.nextSibling;return e},_previousSibling:function(e){for(e=e?e.previousSibling:null;null!==e&&1!==e.nodeType;)e=e.previousSibling;return e},get_node:function(t,n){t&&t.id&&(t=t.id);var r;try{if(this._model.data[t])t=this._model.data[t];else if("string"==typeof t&&this._model.data[t.replace(/^#/,"")])t=this._model.data[t.replace(/^#/,"")];else if("string"==typeof t&&(r=e("#"+t.replace(e.jstree.idregex,"\\$&"),this.element)).length&&this._model.data[r.closest(".jstree-node").attr("id")])t=this._model.data[r.closest(".jstree-node").attr("id")];else if((r=e(t,this.element)).length&&this._model.data[r.closest(".jstree-node").attr("id")])t=this._model.data[r.closest(".jstree-node").attr("id")];else{if(!(r=e(t,this.element)).length||!r.hasClass("jstree"))return!1;t=this._model.data[e.jstree.root]}return n&&(t=t.id===e.jstree.root?this.element:e("#"+t.id.replace(e.jstree.idregex,"\\$&"),this.element)),t}catch(e){return!1}},get_path:function(t,n,r){if(!(t=t.parents?t:this.get_node(t))||t.id===e.jstree.root||!t.parents)return!1;var o,a,i=[];for(i.push(r?t.id:t.text),o=0,a=t.parents.length;a>o;o++)i.push(r?t.parents[o]:this.get_text(t.parents[o]));return i=i.reverse().slice(1),n?i.join(n):i},get_next_dom:function(t,n){var r;if(t=this.get_node(t,!0),t[0]===this.element[0]){for(r=this._firstChild(this.get_container_ul()[0]);r&&0===r.offsetHeight;)r=this._nextSibling(r);return!!r&&e(r)}if(!t||!t.length)return!1;if(n){r=t[0];do{r=this._nextSibling(r)}while(r&&0===r.offsetHeight);return!!r&&e(r)}if(t.hasClass("jstree-open")){for(r=this._firstChild(t.children(".jstree-children")[0]);r&&0===r.offsetHeight;)r=this._nextSibling(r);if(null!==r)return e(r)}r=t[0];do{r=this._nextSibling(r)}while(r&&0===r.offsetHeight);return null!==r?e(r):t.parentsUntil(".jstree",".jstree-node").nextAll(".jstree-node:visible").first()},get_prev_dom:function(t,n){var r;if(t=this.get_node(t,!0),t[0]===this.element[0]){for(r=this.get_container_ul()[0].lastChild;r&&0===r.offsetHeight;)r=this._previousSibling(r);return!!r&&e(r)}if(!t||!t.length)return!1;if(n){r=t[0];do{r=this._previousSibling(r)}while(r&&0===r.offsetHeight);return!!r&&e(r)}r=t[0];do{r=this._previousSibling(r)}while(r&&0===r.offsetHeight);if(null!==r){for(t=e(r);t.hasClass("jstree-open");)t=t.children(".jstree-children").first().children(".jstree-node:visible:last");return t}return!(!(r=t[0].parentNode.parentNode)||!r.className||-1===r.className.indexOf("jstree-node"))&&e(r)},get_parent:function(t){return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&t.parent},get_children_dom:function(e){return e=this.get_node(e,!0),e[0]===this.element[0]?this.get_container_ul().children(".jstree-node"):!(!e||!e.length)&&e.children(".jstree-children").children(".jstree-node")},is_parent:function(e){return(e=this.get_node(e))&&(!1===e.state.loaded||e.children.length>0)},is_loaded:function(e){return(e=this.get_node(e))&&e.state.loaded},is_loading:function(e){return(e=this.get_node(e))&&e.state&&e.state.loading},is_open:function(e){return(e=this.get_node(e))&&e.state.opened},is_closed:function(e){return(e=this.get_node(e))&&this.is_parent(e)&&!e.state.opened},is_leaf:function(e){return!this.is_parent(e)},load_node:function(t,n){var r,o,a,i,s;if(e.isArray(t))return this._load_nodes(t.slice(),n),!0;if(!(t=this.get_node(t)))return n&&n.call(this,t,!1),!1;if(t.state.loaded){for(t.state.loaded=!1,a=0,i=t.parents.length;i>a;a++)this._model.data[t.parents[a]].children_d=e.vakata.array_filter(this._model.data[t.parents[a]].children_d,function(n){return-1===e.inArray(n,t.children_d)});for(r=0,o=t.children_d.length;o>r;r++)this._model.data[t.children_d[r]].state.selected&&(s=!0),delete this._model.data[t.children_d[r]];s&&(this._data.core.selected=e.vakata.array_filter(this._data.core.selected,function(n){return-1===e.inArray(n,t.children_d)})),t.children=[],t.children_d=[],s&&this.trigger("changed",{action:"load_node",node:t,selected:this._data.core.selected})}return t.state.failed=!1,t.state.loading=!0,this.get_node(t,!0).addClass("jstree-loading").attr("aria-busy",!0),this._load_node(t,e.proxy(function(e){t=this._model.data[t.id],t.state.loading=!1,t.state.loaded=e,t.state.failed=!t.state.loaded;var r=this.get_node(t,!0),o=0,a=0,i=this._model.data,s=!1;for(o=0,a=t.children.length;a>o;o++)if(i[t.children[o]]&&!i[t.children[o]].state.hidden){s=!0;break}t.state.loaded&&r&&r.length&&(r.removeClass("jstree-closed jstree-open jstree-leaf"),s?"#"!==t.id&&r.addClass(t.state.opened?"jstree-open":"jstree-closed"):r.addClass("jstree-leaf")),r.removeClass("jstree-loading").attr("aria-busy",!1),this.trigger("load_node",{node:t,status:e}),n&&n.call(this,t,e)},this)),!0},_load_nodes:function(e,t,n,r){var o,a,i=!0,s=function(){this._load_nodes(e,t,!0)},l=this._model.data,u=[];for(o=0,a=e.length;a>o;o++)l[e[o]]&&(!l[e[o]].state.loaded&&!l[e[o]].state.failed||!n&&r)&&(this.is_loading(e[o])||this.load_node(e[o],s),i=!1);if(i){for(o=0,a=e.length;a>o;o++)l[e[o]]&&l[e[o]].state.loaded&&u.push(e[o]);t&&!t.done&&(t.call(this,u),t.done=!0)}},load_all:function(t,n){if(t||(t=e.jstree.root),!(t=this.get_node(t)))return!1;var r,o,a=[],i=this._model.data,s=i[t.id].children_d;for(t.state&&!t.state.loaded&&a.push(t.id),r=0,o=s.length;o>r;r++)i[s[r]]&&i[s[r]].state&&!i[s[r]].state.loaded&&a.push(s[r]);a.length?this._load_nodes(a,function(){this.load_all(t,n)}):(n&&n.call(this,t),this.trigger("load_all",{node:t}))},_load_node:function(t,n){var r,o=this.settings.core.data,a=function(){return 3!==this.nodeType&&8!==this.nodeType};return o?e.isFunction(o)?o.call(this,t,e.proxy(function(r){!1===r?n.call(this,!1):this["string"==typeof r?"_append_html_data":"_append_json_data"](t,"string"==typeof r?e(e.parseHTML(r)).filter(a):r,function(e){n.call(this,e)})},this)):"object"==typeof o?o.url?(o=e.extend(!0,{},o),e.isFunction(o.url)&&(o.url=o.url.call(this,t)),e.isFunction(o.data)&&(o.data=o.data.call(this,t)),e.ajax(o).done(e.proxy(function(r,o,i){var s=i.getResponseHeader("Content-Type");return s&&-1!==s.indexOf("json")||"object"==typeof r?this._append_json_data(t,r,function(e){n.call(this,e)}):s&&-1!==s.indexOf("html")||"string"==typeof r?this._append_html_data(t,e(e.parseHTML(r)).filter(a),function(e){n.call(this,e)}):(this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:t.id,xhr:i})},this.settings.core.error.call(this,this._data.core.last_error),n.call(this,!1))},this)).fail(e.proxy(function(e){this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:t.id,xhr:e})},n.call(this,!1),this.settings.core.error.call(this,this._data.core.last_error)},this))):(r=e.isArray(o)?e.extend(!0,[],o):e.isPlainObject(o)?e.extend(!0,{},o):o,t.id===e.jstree.root?this._append_json_data(t,r,function(e){n.call(this,e)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_05",reason:"Could not load node",data:JSON.stringify({id:t.id})},this.settings.core.error.call(this,this._data.core.last_error),n.call(this,!1))):"string"==typeof o?t.id===e.jstree.root?this._append_html_data(t,e(e.parseHTML(o)).filter(a),function(e){n.call(this,e)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_06",reason:"Could not load node",data:JSON.stringify({id:t.id})},this.settings.core.error.call(this,this._data.core.last_error),n.call(this,!1)):n.call(this,!1):t.id===e.jstree.root?this._append_html_data(t,this._data.core.original_container_html.clone(!0),function(e){n.call(this,e)}):n.call(this,!1)},_node_changed:function(e){(e=this.get_node(e))&&this._model.changed.push(e.id)},_append_html_data:function(t,n,r){t=this.get_node(t),t.children=[],t.children_d=[];var o,a,i,s=n.is("ul")?n.children():n,l=t.id,u=[],c=[],d=this._model.data,p=d[l],f=this._data.core.selected.length;for(s.each(e.proxy(function(t,n){(o=this._parse_model_from_html(e(n),l,p.parents.concat()))&&(u.push(o),c.push(o),d[o].children_d.length&&(c=c.concat(d[o].children_d)))},this)),p.children=u,p.children_d=c,a=0,i=p.parents.length;i>a;a++)d[p.parents[a]].children_d=d[p.parents[a]].children_d.concat(c);this.trigger("model",{nodes:c,parent:l}),l!==e.jstree.root?(this._node_changed(l),this.redraw()):(this.get_container_ul().children(".jstree-initial-node").remove(),this.redraw(!0)),this._data.core.selected.length!==f&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),r.call(this,!0)},_append_json_data:function(t,n,r,o){if(null!==this.element){t=this.get_node(t),t.children=[],t.children_d=[],n.d&&"string"==typeof(n=n.d)&&(n=JSON.parse(n)),e.isArray(n)||(n=[n]);var a=null,i={df:this._model.default_state,dat:n,par:t.id,m:this._model.data,t_id:this._id,t_cnt:this._cnt,sel:this._data.core.selected},s=function(e,t){e.data&&(e=e.data);var n,r,o,a,i=e.dat,s=e.par,l=[],u=[],c=[],d=e.df,p=e.t_id,f=e.t_cnt,h=e.m,m=h[s],y=e.sel,g=function(e,n,r){r=r?r.concat():[],n&&r.unshift(n);var o,a,i,s,l=e.id.toString(),u={id:l,text:e.text||"",icon:e.icon===t||e.icon,parent:n,parents:r,children:e.children||[],children_d:e.children_d||[],data:e.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(o in d)d.hasOwnProperty(o)&&(u.state[o]=d[o]);if(e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(u.icon=e.data.jstree.icon),(u.icon===t||null===u.icon||""===u.icon)&&(u.icon=!0),e&&e.data&&(u.data=e.data,e.data.jstree))for(o in e.data.jstree)e.data.jstree.hasOwnProperty(o)&&(u.state[o]=e.data.jstree[o]);if(e&&"object"==typeof e.state)for(o in e.state)e.state.hasOwnProperty(o)&&(u.state[o]=e.state[o]);if(e&&"object"==typeof e.li_attr)for(o in e.li_attr)e.li_attr.hasOwnProperty(o)&&(u.li_attr[o]=e.li_attr[o]);if(u.li_attr.id||(u.li_attr.id=l),e&&"object"==typeof e.a_attr)for(o in e.a_attr)e.a_attr.hasOwnProperty(o)&&(u.a_attr[o]=e.a_attr[o]);for(e&&e.children&&!0===e.children&&(u.state.loaded=!1,u.children=[],u.children_d=[]),h[u.id]=u,o=0,a=u.children.length;a>o;o++)i=g(h[u.children[o]],u.id,r),s=h[i],u.children_d.push(i),s.children_d.length&&(u.children_d=u.children_d.concat(s.children_d));return delete e.data,delete e.children,h[u.id].original=e,u.state.selected&&c.push(u.id),u.id},v=function(e,n,r){r=r?r.concat():[],n&&r.unshift(n);var o,a,i,s,l,u=!1;do{u="j"+p+"_"+ ++f}while(h[u]);l={id:!1,text:"string"==typeof e?e:"",icon:"object"!=typeof e||e.icon===t||e.icon,parent:n,parents:r,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(o in d)d.hasOwnProperty(o)&&(l.state[o]=d[o]);if(e&&e.id&&(l.id=e.id.toString()),e&&e.text&&(l.text=e.text),e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(l.icon=e.data.jstree.icon),(l.icon===t||null===l.icon||""===l.icon)&&(l.icon=!0),e&&e.data&&(l.data=e.data,e.data.jstree))for(o in e.data.jstree)e.data.jstree.hasOwnProperty(o)&&(l.state[o]=e.data.jstree[o]);if(e&&"object"==typeof e.state)for(o in e.state)e.state.hasOwnProperty(o)&&(l.state[o]=e.state[o]);if(e&&"object"==typeof e.li_attr)for(o in e.li_attr)e.li_attr.hasOwnProperty(o)&&(l.li_attr[o]=e.li_attr[o]);if(l.li_attr.id&&!l.id&&(l.id=l.li_attr.id.toString()),l.id||(l.id=u),l.li_attr.id||(l.li_attr.id=l.id),e&&"object"==typeof e.a_attr)for(o in e.a_attr)e.a_attr.hasOwnProperty(o)&&(l.a_attr[o]=e.a_attr[o]);if(e&&e.children&&e.children.length){for(o=0,a=e.children.length;a>o;o++)i=v(e.children[o],l.id,r),s=h[i],l.children.push(i),s.children_d.length&&(l.children_d=l.children_d.concat(s.children_d));l.children_d=l.children_d.concat(l.children)}return e&&e.children&&!0===e.children&&(l.state.loaded=!1,l.children=[],l.children_d=[]),delete e.data,delete e.children,l.original=e,h[l.id]=l,l.state.selected&&c.push(l.id),l.id};if(i.length&&i[0].id!==t&&i[0].parent!==t){for(r=0,o=i.length;o>r;r++)i[r].children||(i[r].children=[]),h[i[r].id.toString()]=i[r];for(r=0,o=i.length;o>r;r++)h[i[r].parent.toString()].children.push(i[r].id.toString()),m.children_d.push(i[r].id.toString());for(r=0,o=m.children.length;o>r;r++)n=g(h[m.children[r]],s,m.parents.concat()),u.push(n),h[n].children_d.length&&(u=u.concat(h[n].children_d));for(r=0,o=m.parents.length;o>r;r++)h[m.parents[r]].children_d=h[m.parents[r]].children_d.concat(u);a={cnt:f,mod:h,sel:y,par:s,dpc:u,add:c}}else{for(r=0,o=i.length;o>r;r++)(n=v(i[r],s,m.parents.concat()))&&(l.push(n),u.push(n),h[n].children_d.length&&(u=u.concat(h[n].children_d)));for(m.children=l,m.children_d=u,r=0,o=m.parents.length;o>r;r++)h[m.parents[r]].children_d=h[m.parents[r]].children_d.concat(u);a={cnt:f,mod:h,sel:y,par:s,dpc:u,add:c}}return"undefined"!=typeof window&&void 0!==window.document?a:void postMessage(a)},l=function(t,n){if(null!==this.element){this._cnt=t.cnt;var o,a=this._model.data;for(o in a)a.hasOwnProperty(o)&&a[o].state&&a[o].state.loading&&t.mod[o]&&(t.mod[o].state.loading=!0);if(this._model.data=t.mod,n){var i,s=t.add,l=t.sel,u=this._data.core.selected.slice();if(a=this._model.data,l.length!==u.length||e.vakata.array_unique(l.concat(u)).length!==l.length){for(o=0,i=l.length;i>o;o++)-1===e.inArray(l[o],s)&&-1===e.inArray(l[o],u)&&(a[l[o]].state.selected=!1);for(o=0,i=u.length;i>o;o++)-1===e.inArray(u[o],l)&&(a[u[o]].state.selected=!0)}}t.add.length&&(this._data.core.selected=this._data.core.selected.concat(t.add)),this.trigger("model",{nodes:t.dpc,parent:t.par}),t.par!==e.jstree.root?(this._node_changed(t.par),this.redraw()):this.redraw(!0),t.add.length&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),r.call(this,!0)}};if(this.settings.core.worker&&window.Blob&&window.URL&&window.Worker)try{null===this._wrk&&(this._wrk=window.URL.createObjectURL(new window.Blob(["self.onmessage = "+s.toString()],{type:"text/javascript"}))),!this._data.core.working||o?(this._data.core.working=!0,a=new window.Worker(this._wrk),a.onmessage=e.proxy(function(e){l.call(this,e.data,!0);try{a.terminate(),a=null}catch(e){}this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1},this),i.par?a.postMessage(i):this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1):this._data.core.worker_queue.push([t,n,r,!0])}catch(e){l.call(this,s(i),!1),this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1}else l.call(this,s(i),!1)}},_parse_model_from_html:function(n,r,o){o=o?[].concat(o):[],r&&o.unshift(r);var a,i,s,l,u,c=this._model.data,d={id:!1,text:!1,icon:!0,parent:r,parents:o,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(s in this._model.default_state)this._model.default_state.hasOwnProperty(s)&&(d.state[s]=this._model.default_state[s]);if(l=e.vakata.attributes(n,!0),e.each(l,function(t,n){return n=e.trim(n),!n.length||(d.li_attr[t]=n,void("id"===t&&(d.id=n.toString())))}),l=n.children("a").first(),l.length&&(l=e.vakata.attributes(l,!0),e.each(l,function(t,n){n=e.trim(n),n.length&&(d.a_attr[t]=n)})),l=n.children("a").first().length?n.children("a").first().clone():n.clone(),l.children("ins, i, ul").remove(),l=l.html(),l=e("<div />").html(l),d.text=this.settings.core.force_text?l.text():l.html(),l=n.data(),d.data=l?e.extend(!0,{},l):null,d.state.opened=n.hasClass("jstree-open"),d.state.selected=n.children("a").hasClass("jstree-clicked"),d.state.disabled=n.children("a").hasClass("jstree-disabled"),d.data&&d.data.jstree)for(s in d.data.jstree)d.data.jstree.hasOwnProperty(s)&&(d.state[s]=d.data.jstree[s]);l=n.children("a").children(".jstree-themeicon"),l.length&&(d.icon=!l.hasClass("jstree-themeicon-hidden")&&l.attr("rel")),d.state.icon!==t&&(d.icon=d.state.icon),(d.icon===t||null===d.icon||""===d.icon)&&(d.icon=!0),l=n.children("ul").children("li");do{u="j"+this._id+"_"+ ++this._cnt}while(c[u]);return d.id=d.li_attr.id?d.li_attr.id.toString():u,l.length?(l.each(e.proxy(function(t,n){a=this._parse_model_from_html(e(n),d.id,o),i=this._model.data[a],d.children.push(a),i.children_d.length&&(d.children_d=d.children_d.concat(i.children_d))},this)),d.children_d=d.children_d.concat(d.children)):n.hasClass("jstree-closed")&&(d.state.loaded=!1),d.li_attr.class&&(d.li_attr.class=d.li_attr.class.replace("jstree-closed","").replace("jstree-open","")),d.a_attr.class&&(d.a_attr.class=d.a_attr.class.replace("jstree-clicked","").replace("jstree-disabled","")),c[d.id]=d,d.state.selected&&this._data.core.selected.push(d.id),d.id},_parse_model_from_flat_json:function(e,n,r){r=r?r.concat():[],n&&r.unshift(n);var o,a,i,s,l=e.id.toString(),u=this._model.data,c=this._model.default_state,d={id:l,text:e.text||"",icon:e.icon===t||e.icon,parent:n,parents:r,children:e.children||[],children_d:e.children_d||[],data:e.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(o in c)c.hasOwnProperty(o)&&(d.state[o]=c[o]);if(e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(d.icon=e.data.jstree.icon),(d.icon===t||null===d.icon||""===d.icon)&&(d.icon=!0),e&&e.data&&(d.data=e.data,e.data.jstree))for(o in e.data.jstree)e.data.jstree.hasOwnProperty(o)&&(d.state[o]=e.data.jstree[o]);if(e&&"object"==typeof e.state)for(o in e.state)e.state.hasOwnProperty(o)&&(d.state[o]=e.state[o]);if(e&&"object"==typeof e.li_attr)for(o in e.li_attr)e.li_attr.hasOwnProperty(o)&&(d.li_attr[o]=e.li_attr[o]);if(d.li_attr.id||(d.li_attr.id=l),e&&"object"==typeof e.a_attr)for(o in e.a_attr)e.a_attr.hasOwnProperty(o)&&(d.a_attr[o]=e.a_attr[o]);for(e&&e.children&&!0===e.children&&(d.state.loaded=!1,d.children=[],d.children_d=[]),u[d.id]=d,o=0,a=d.children.length;a>o;o++)i=this._parse_model_from_flat_json(u[d.children[o]],d.id,r),s=u[i],d.children_d.push(i),s.children_d.length&&(d.children_d=d.children_d.concat(s.children_d));return delete e.data,delete e.children,u[d.id].original=e,d.state.selected&&this._data.core.selected.push(d.id),d.id},_parse_model_from_json:function(e,n,r){r=r?r.concat():[],n&&r.unshift(n);var o,a,i,s,l,u=!1,c=this._model.data,d=this._model.default_state;do{u="j"+this._id+"_"+ ++this._cnt}while(c[u]);l={id:!1,text:"string"==typeof e?e:"",icon:"object"!=typeof e||e.icon===t||e.icon,parent:n,parents:r,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(o in d)d.hasOwnProperty(o)&&(l.state[o]=d[o]);if(e&&e.id&&(l.id=e.id.toString()),e&&e.text&&(l.text=e.text),e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(l.icon=e.data.jstree.icon),(l.icon===t||null===l.icon||""===l.icon)&&(l.icon=!0),e&&e.data&&(l.data=e.data,e.data.jstree))for(o in e.data.jstree)e.data.jstree.hasOwnProperty(o)&&(l.state[o]=e.data.jstree[o]);if(e&&"object"==typeof e.state)for(o in e.state)e.state.hasOwnProperty(o)&&(l.state[o]=e.state[o]);if(e&&"object"==typeof e.li_attr)for(o in e.li_attr)e.li_attr.hasOwnProperty(o)&&(l.li_attr[o]=e.li_attr[o]);if(l.li_attr.id&&!l.id&&(l.id=l.li_attr.id.toString()),l.id||(l.id=u),l.li_attr.id||(l.li_attr.id=l.id),e&&"object"==typeof e.a_attr)for(o in e.a_attr)e.a_attr.hasOwnProperty(o)&&(l.a_attr[o]=e.a_attr[o]);if(e&&e.children&&e.children.length){for(o=0,a=e.children.length;a>o;o++)i=this._parse_model_from_json(e.children[o],l.id,r),s=c[i],l.children.push(i),s.children_d.length&&(l.children_d=l.children_d.concat(s.children_d));l.children_d=l.children_d.concat(l.children)}return e&&e.children&&!0===e.children&&(l.state.loaded=!1,l.children=[],l.children_d=[]),delete e.data,delete e.children,l.original=e,c[l.id]=l,l.state.selected&&this._data.core.selected.push(l.id),l.id},_redraw:function(){var t,n,r,o=this._model.force_full_redraw?this._model.data[e.jstree.root].children.concat([]):this._model.changed.concat([]),a=l.createElement("UL"),i=this._data.core.focused;for(n=0,r=o.length;r>n;n++)(t=this.redraw_node(o[n],!0,this._model.force_full_redraw))&&this._model.force_full_redraw&&a.appendChild(t);this._model.force_full_redraw&&(a.className=this.get_container_ul()[0].className,a.setAttribute("role","group"),this.element.empty().append(a)),null!==i&&(t=this.get_node(i,!0),t&&t.length&&t.children(".jstree-anchor")[0]!==l.activeElement?t.children(".jstree-anchor").focus():this._data.core.focused=null),this._model.force_full_redraw=!1,this._model.changed=[],this.trigger("redraw",{nodes:o})},redraw:function(e){e&&(this._model.force_full_redraw=!0),this._redraw()},draw_children:function(t){var n=this.get_node(t),r=!1,o=!1,a=!1,i=l;if(!n)return!1;if(n.id===e.jstree.root)return this.redraw(!0);if(!(t=this.get_node(t,!0))||!t.length)return!1;if(t.children(".jstree-children").remove(),t=t[0],n.children.length&&n.state.loaded){for(a=i.createElement("UL"),a.setAttribute("role","group"),a.className="jstree-children",r=0,o=n.children.length;o>r;r++)a.appendChild(this.redraw_node(n.children[r],!0,!0));t.appendChild(a)}},redraw_node:function(t,n,r,o){var a=this.get_node(t),i=!1,s=!1,u=!1,c=!1,d=!1,p=!1,f="",h=l,m=this._model.data,y=!1,g=null,v=0,b=0,_=!1,w=!1;if(!a)return!1;if(a.id===e.jstree.root)return this.redraw(!0);if(n=n||0===a.children.length,t=l.querySelector?this.element[0].querySelector("#"+(-1!=="0123456789".indexOf(a.id[0])?"\\3"+a.id[0]+" "+a.id.substr(1).replace(e.jstree.idregex,"\\$&"):a.id.replace(e.jstree.idregex,"\\$&"))):l.getElementById(a.id))t=e(t),r||(i=t.parent().parent()[0],i===this.element[0]&&(i=null),s=t.index()),n||!a.children.length||t.children(".jstree-children").length||(n=!0),n||(u=t.children(".jstree-children")[0]),y=t.children(".jstree-anchor")[0]===l.activeElement,t.remove();else if(n=!0,!r){if(!(null===(i=a.parent!==e.jstree.root?e("#"+a.parent.replace(e.jstree.idregex,"\\$&"),this.element)[0]:null)||i&&m[a.parent].state.opened))return!1;s=e.inArray(a.id,null===i?m[e.jstree.root].children:m[a.parent].children)}t=this._data.core.node.cloneNode(!0),f="jstree-node ";for(c in a.li_attr)if(a.li_attr.hasOwnProperty(c)){if("id"===c)continue;"class"!==c?t.setAttribute(c,a.li_attr[c]):f+=a.li_attr[c]}for(a.a_attr.id||(a.a_attr.id=a.id+"_anchor"),t.setAttribute("aria-selected",!!a.state.selected),t.setAttribute("aria-level",a.parents.length),t.setAttribute("aria-labelledby",a.a_attr.id),a.state.disabled&&t.setAttribute("aria-disabled",!0),c=0,d=a.children.length;d>c;c++)if(!m[a.children[c]].state.hidden){_=!0;break}if(null!==a.parent&&m[a.parent]&&!a.state.hidden&&(c=e.inArray(a.id,m[a.parent].children),w=a.id,-1!==c))for(c++,d=m[a.parent].children.length;d>c&&(m[m[a.parent].children[c]].state.hidden||(w=m[a.parent].children[c]),w===a.id);c++);a.state.hidden&&(f+=" jstree-hidden"),a.state.loaded&&!_?f+=" jstree-leaf":(f+=a.state.opened&&a.state.loaded?" jstree-open":" jstree-closed",t.setAttribute("aria-expanded",a.state.opened&&a.state.loaded)),w===a.id&&(f+=" jstree-last"),t.id=a.id,t.className=f,f=(a.state.selected?" jstree-clicked":"")+(a.state.disabled?" jstree-disabled":"");for(d in a.a_attr)if(a.a_attr.hasOwnProperty(d)){if("href"===d&&"#"===a.a_attr[d])continue;"class"!==d?t.childNodes[1].setAttribute(d,a.a_attr[d]):f+=" "+a.a_attr[d]}if(f.length&&(t.childNodes[1].className="jstree-anchor "+f),(a.icon&&!0!==a.icon||!1===a.icon)&&(!1===a.icon?t.childNodes[1].childNodes[0].className+=" jstree-themeicon-hidden":-1===a.icon.indexOf("/")&&-1===a.icon.indexOf(".")?t.childNodes[1].childNodes[0].className+=" "+a.icon+" jstree-themeicon-custom":(t.childNodes[1].childNodes[0].style.backgroundImage='url("'+a.icon+'")',t.childNodes[1].childNodes[0].style.backgroundPosition="center center",t.childNodes[1].childNodes[0].style.backgroundSize="auto",t.childNodes[1].childNodes[0].className+=" jstree-themeicon-custom")),this.settings.core.force_text?t.childNodes[1].appendChild(h.createTextNode(a.text)):t.childNodes[1].innerHTML+=a.text,n&&a.children.length&&(a.state.opened||o)&&a.state.loaded){for(p=h.createElement("UL"),p.setAttribute("role","group"),p.className="jstree-children",c=0,d=a.children.length;d>c;c++)p.appendChild(this.redraw_node(a.children[c],n,!0));t.appendChild(p)}if(u&&t.appendChild(u),!r){for(i||(i=this.element[0]),c=0,d=i.childNodes.length;d>c;c++)if(i.childNodes[c]&&i.childNodes[c].className&&-1!==i.childNodes[c].className.indexOf("jstree-children")){g=i.childNodes[c];break}g||(g=h.createElement("UL"),g.setAttribute("role","group"),g.className="jstree-children",i.appendChild(g)),i=g,s<i.childNodes.length?i.insertBefore(t,i.childNodes[s]):i.appendChild(t),y&&(v=this.element[0].scrollTop,b=this.element[0].scrollLeft,t.childNodes[1].focus(),this.element[0].scrollTop=v,this.element[0].scrollLeft=b)}return a.state.opened&&!a.state.loaded&&(a.state.opened=!1,setTimeout(e.proxy(function(){this.open_node(a.id,!1,0)},this),0)),t},open_node:function(n,r,o){var a,i,s,l;if(e.isArray(n)){for(n=n.slice(),a=0,i=n.length;i>a;a++)this.open_node(n[a],r,o);return!0}return!(!(n=this.get_node(n))||n.id===e.jstree.root)&&(o=o===t?this.settings.core.animation:o,this.is_closed(n)?this.is_loaded(n)?(s=this.get_node(n,!0),l=this,s.length&&(o&&s.children(".jstree-children").length&&s.children(".jstree-children").stop(!0,!0),n.children.length&&!this._firstChild(s.children(".jstree-children")[0])&&this.draw_children(n),o?(this.trigger("before_open",{node:n}),s.children(".jstree-children").css("display","none").end().removeClass("jstree-closed").addClass("jstree-open").attr("aria-expanded",!0).children(".jstree-children").stop(!0,!0).slideDown(o,function(){this.style.display="",l.element&&l.trigger("after_open",{node:n})})):(this.trigger("before_open",{node:n}),s[0].className=s[0].className.replace("jstree-closed","jstree-open"),s[0].setAttribute("aria-expanded",!0))),n.state.opened=!0,r&&r.call(this,n,!0),s.length||this.trigger("before_open",{node:n}),this.trigger("open_node",{node:n}),o&&s.length||this.trigger("after_open",{node:n}),!0):this.is_loading(n)?setTimeout(e.proxy(function(){this.open_node(n,r,o)},this),500):void this.load_node(n,function(e,t){return t?this.open_node(e,r,o):!!r&&r.call(this,e,!1)}):(r&&r.call(this,n,!1),!1))},_open_to:function(t){if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;var n,r,o=t.parents;for(n=0,r=o.length;r>n;n+=1)n!==e.jstree.root&&this.open_node(o[n],!1,0);return e("#"+t.id.replace(e.jstree.idregex,"\\$&"),this.element)},close_node:function(n,r){var o,a,i,s;if(e.isArray(n)){for(n=n.slice(),o=0,a=n.length;a>o;o++)this.close_node(n[o],r);return!0}return!(!(n=this.get_node(n))||n.id===e.jstree.root)&&(!this.is_closed(n)&&(r=r===t?this.settings.core.animation:r,i=this,s=this.get_node(n,!0),n.state.opened=!1,this.trigger("close_node",{node:n}),void(s.length?r?s.children(".jstree-children").attr("style","display:block !important").end().removeClass("jstree-open").addClass("jstree-closed").attr("aria-expanded",!1).children(".jstree-children").stop(!0,!0).slideUp(r,function(){this.style.display="",s.children(".jstree-children").remove(),i.element&&i.trigger("after_close",{node:n})}):(s[0].className=s[0].className.replace("jstree-open","jstree-closed"),s.attr("aria-expanded",!1).children(".jstree-children").remove(),this.trigger("after_close",{node:n})):this.trigger("after_close",{node:n}))))},toggle_node:function(t){var n,r;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;r>n;n++)this.toggle_node(t[n]);return!0}return this.is_closed(t)?this.open_node(t):this.is_open(t)?this.close_node(t):void 0},open_all:function(t,n,r){if(t||(t=e.jstree.root),!(t=this.get_node(t)))return!1;var o,a,i,s=t.id===e.jstree.root?this.get_container_ul():this.get_node(t,!0);if(!s.length){for(o=0,a=t.children_d.length;a>o;o++)this.is_closed(this._model.data[t.children_d[o]])&&(this._model.data[t.children_d[o]].state.opened=!0);return this.trigger("open_all",{node:t})}r=r||s,i=this,s=this.is_closed(t)?s.find(".jstree-closed").addBack():s.find(".jstree-closed"),s.each(function(){i.open_node(this,function(e,t){t&&this.is_parent(e)&&this.open_all(e,n,r)},n||0)}),0===r.find(".jstree-closed").length&&this.trigger("open_all",{node:this.get_node(r)})},close_all:function(t,n){if(t||(t=e.jstree.root),!(t=this.get_node(t)))return!1;var r,o,a=t.id===e.jstree.root?this.get_container_ul():this.get_node(t,!0),i=this;for(a.length&&(a=this.is_open(t)?a.find(".jstree-open").addBack():a.find(".jstree-open"),e(a.get().reverse()).each(function(){i.close_node(this,n||0)})),r=0,o=t.children_d.length;o>r;r++)this._model.data[t.children_d[r]].state.opened=!1;this.trigger("close_all",{node:t})},is_disabled:function(e){return(e=this.get_node(e))&&e.state&&e.state.disabled},enable_node:function(t){var n,r;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;r>n;n++)this.enable_node(t[n]);return!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&(t.state.disabled=!1,this.get_node(t,!0).children(".jstree-anchor").removeClass("jstree-disabled").attr("aria-disabled",!1),void this.trigger("enable_node",{node:t}))},disable_node:function(t){var n,r;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;r>n;n++)this.disable_node(t[n]);return!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&(t.state.disabled=!0,this.get_node(t,!0).children(".jstree-anchor").addClass("jstree-disabled").attr("aria-disabled",!0),void this.trigger("disable_node",{node:t}))},is_hidden:function(e){return e=this.get_node(e),!0===e.state.hidden},hide_node:function(t,n){var r,o;if(e.isArray(t)){for(t=t.slice(),r=0,o=t.length;o>r;r++)this.hide_node(t[r],!0);return n||this.redraw(),!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&void(t.state.hidden||(t.state.hidden=!0,this._node_changed(t.parent),n||this.redraw(),this.trigger("hide_node",{node:t})))},show_node:function(t,n){var r,o;if(e.isArray(t)){for(t=t.slice(),r=0,o=t.length;o>r;r++)this.show_node(t[r],!0);return n||this.redraw(),!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&void(t.state.hidden&&(t.state.hidden=!1,this._node_changed(t.parent),n||this.redraw(),this.trigger("show_node",{node:t})))},hide_all:function(t){var n,r=this._model.data,o=[];for(n in r)r.hasOwnProperty(n)&&n!==e.jstree.root&&!r[n].state.hidden&&(r[n].state.hidden=!0,o.push(n));return this._model.force_full_redraw=!0,t||this.redraw(),this.trigger("hide_all",{nodes:o}),o},show_all:function(t){var n,r=this._model.data,o=[];for(n in r)r.hasOwnProperty(n)&&n!==e.jstree.root&&r[n].state.hidden&&(r[n].state.hidden=!1,o.push(n));return this._model.force_full_redraw=!0,t||this.redraw(),this.trigger("show_all",{nodes:o}),o},activate_node:function(e,n){if(this.is_disabled(e))return!1;if(n&&"object"==typeof n||(n={}),this._data.core.last_clicked=this._data.core.last_clicked&&this._data.core.last_clicked.id!==t?this.get_node(this._data.core.last_clicked.id):null,this._data.core.last_clicked&&!this._data.core.last_clicked.state.selected&&(this._data.core.last_clicked=null),!this._data.core.last_clicked&&this._data.core.selected.length&&(this._data.core.last_clicked=this.get_node(this._data.core.selected[this._data.core.selected.length-1])),this.settings.core.multiple&&(n.metaKey||n.ctrlKey||n.shiftKey)&&(!n.shiftKey||this._data.core.last_clicked&&this.get_parent(e)&&this.get_parent(e)===this._data.core.last_clicked.parent))if(n.shiftKey){var r,o,a=this.get_node(e).id,i=this._data.core.last_clicked.id,s=this.get_node(this._data.core.last_clicked.parent).children,l=!1;for(r=0,o=s.length;o>r;r+=1)s[r]===a&&(l=!l),s[r]===i&&(l=!l),this.is_disabled(s[r])||!l&&s[r]!==a&&s[r]!==i?this.deselect_node(s[r],!0,n):this.is_hidden(s[r])||this.select_node(s[r],!0,!1,n);this.trigger("changed",{action:"select_node",node:this.get_node(e),selected:this._data.core.selected,event:n})}else this.is_selected(e)?this.deselect_node(e,!1,n):this.select_node(e,!1,!1,n);else!this.settings.core.multiple&&(n.metaKey||n.ctrlKey||n.shiftKey)&&this.is_selected(e)?this.deselect_node(e,!1,n):(this.deselect_all(!0),this.select_node(e,!1,!1,n),this._data.core.last_clicked=this.get_node(e));this.trigger("activate_node",{node:this.get_node(e),event:n})},hover_node:function(e){if(!(e=this.get_node(e,!0))||!e.length||e.children(".jstree-hovered").length)return!1;var t=this.element.find(".jstree-hovered"),n=this.element;t&&t.length&&this.dehover_node(t),e.children(".jstree-anchor").addClass("jstree-hovered"),this.trigger("hover_node",{node:this.get_node(e)}),setTimeout(function(){n.attr("aria-activedescendant",e[0].id)},0)},dehover_node:function(e){return!!((e=this.get_node(e,!0))&&e.length&&e.children(".jstree-hovered").length)&&(e.children(".jstree-anchor").removeClass("jstree-hovered"),void this.trigger("dehover_node",{node:this.get_node(e)}))},select_node:function(t,n,r,o){var a,i,s;if(e.isArray(t)){for(t=t.slice(),i=0,s=t.length;s>i;i++)this.select_node(t[i],n,r,o);return!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&(a=this.get_node(t,!0),void(t.state.selected||(t.state.selected=!0,this._data.core.selected.push(t.id),r||(a=this._open_to(t)),a&&a.length&&a.attr("aria-selected",!0).children(".jstree-anchor").addClass("jstree-clicked"),this.trigger("select_node",{node:t,selected:this._data.core.selected,event:o}),n||this.trigger("changed",{action:"select_node",node:t,selected:this._data.core.selected,event:o}))))},deselect_node:function(t,n,r){var o,a,i;if(e.isArray(t)){for(t=t.slice(),o=0,a=t.length;a>o;o++)this.deselect_node(t[o],n,r);return!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&(i=this.get_node(t,!0),void(t.state.selected&&(t.state.selected=!1,this._data.core.selected=e.vakata.array_remove_item(this._data.core.selected,t.id),i.length&&i.attr("aria-selected",!1).children(".jstree-anchor").removeClass("jstree-clicked"),this.trigger("deselect_node",{node:t,selected:this._data.core.selected,event:r}),n||this.trigger("changed",{action:"deselect_node",node:t,selected:this._data.core.selected,event:r}))))},select_all:function(t){var n,r,o=this._data.core.selected.concat([]);for(this._data.core.selected=this._model.data[e.jstree.root].children_d.concat(),n=0,r=this._data.core.selected.length;r>n;n++)this._model.data[this._data.core.selected[n]]&&(this._model.data[this._data.core.selected[n]].state.selected=!0);this.redraw(!0),this.trigger("select_all",{selected:this._data.core.selected}),t||this.trigger("changed",{action:"select_all",selected:this._data.core.selected,old_selection:o})},deselect_all:function(e){var t,n,r=this._data.core.selected.concat([]);for(t=0,n=this._data.core.selected.length;n>t;t++)this._model.data[this._data.core.selected[t]]&&(this._model.data[this._data.core.selected[t]].state.selected=!1);this._data.core.selected=[],this.element.find(".jstree-clicked").removeClass("jstree-clicked").parent().attr("aria-selected",!1),this.trigger("deselect_all",{selected:this._data.core.selected,node:r}),e||this.trigger("changed",{action:"deselect_all",selected:this._data.core.selected,old_selection:r})},is_selected:function(t){return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&t.state.selected},get_selected:function(t){return t?e.map(this._data.core.selected,e.proxy(function(e){return this.get_node(e)},this)):this._data.core.selected.slice()},get_top_selected:function(t){var n,r,o,a,i=this.get_selected(!0),s={};for(n=0,r=i.length;r>n;n++)s[i[n].id]=i[n];for(n=0,r=i.length;r>n;n++)for(o=0,a=i[n].children_d.length;a>o;o++)s[i[n].children_d[o]]&&delete s[i[n].children_d[o]];i=[];for(n in s)s.hasOwnProperty(n)&&i.push(n);return t?e.map(i,e.proxy(function(e){return this.get_node(e)},this)):i},get_bottom_selected:function(t){var n,r,o=this.get_selected(!0),a=[];for(n=0,r=o.length;r>n;n++)o[n].children.length||a.push(o[n].id);return t?e.map(a,e.proxy(function(e){return this.get_node(e)},this)):a},get_state:function(){var t,n={core:{open:[],scroll:{left:this.element.scrollLeft(),top:this.element.scrollTop()},selected:[]}};for(t in this._model.data)this._model.data.hasOwnProperty(t)&&t!==e.jstree.root&&(this._model.data[t].state.opened&&n.core.open.push(t),this._model.data[t].state.selected&&n.core.selected.push(t));return n},set_state:function(n,r){if(n){if(n.core&&n.core.selected&&n.core.initial_selection===t&&(n.core.initial_selection=this._data.core.selected.concat([]).sort().join(",")),n.core){var o,a;if(n.core.open)return e.isArray(n.core.open)&&n.core.open.length?this._load_nodes(n.core.open,function(e){this.open_node(e,!1,0),delete n.core.open,this.set_state(n,r)}):(delete n.core.open,this.set_state(n,r)),!1;if(n.core.scroll)return n.core.scroll&&n.core.scroll.left!==t&&this.element.scrollLeft(n.core.scroll.left),n.core.scroll&&n.core.scroll.top!==t&&this.element.scrollTop(n.core.scroll.top),delete n.core.scroll,this.set_state(n,r),!1;if(n.core.selected)return o=this,(n.core.initial_selection===t||n.core.initial_selection===this._data.core.selected.concat([]).sort().join(","))&&(this.deselect_all(),e.each(n.core.selected,function(e,t){o.select_node(t,!1,!0)})),delete n.core.initial_selection,delete n.core.selected,this.set_state(n,r),!1;for(a in n)n.hasOwnProperty(a)&&"core"!==a&&-1===e.inArray(a,this.settings.plugins)&&delete n[a];if(e.isEmptyObject(n.core))return delete n.core,this.set_state(n,r),!1}return!e.isEmptyObject(n)||(n=null,r&&r.call(this),this.trigger("set_state"),!1)}return!1},refresh:function(t,n){this._data.core.state=!0===n?{}:this.get_state(),n&&e.isFunction(n)&&(this._data.core.state=n.call(this,this._data.core.state)),this._cnt=0,this._model.data={},this._model.data[e.jstree.root]={id:e.jstree.root,parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}},this._data.core.selected=[],this._data.core.last_clicked=null,this._data.core.focused=null;var r=this.get_container_ul()[0].className;t||(this.element.html("<ul class='"+r+"' role='group'><li class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='treeitem' id='j"+this._id+"_loading'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading")),this.load_node(e.jstree.root,function(t,n){n&&(this.get_container_ul()[0].className=r,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.set_state(e.extend(!0,{},this._data.core.state),function(){this.trigger("refresh")})),this._data.core.state=null})},refresh_node:function(t){if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;var n=[],r=[],o=this._data.core.selected.concat([]);r.push(t.id),!0===t.state.opened&&n.push(t.id),this.get_node(t,!0).find(".jstree-open").each(function(){r.push(this.id),n.push(this.id)}),this._load_nodes(r,e.proxy(function(e){this.open_node(n,!1,0),this.select_node(o),this.trigger("refresh_node",{node:t,nodes:e})},this),!1,!0)},set_id:function(t,n){if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;var r,o,a=this._model.data,i=t.id;for(n=n.toString(),a[t.parent].children[e.inArray(t.id,a[t.parent].children)]=n,r=0,o=t.parents.length;o>r;r++)a[t.parents[r]].children_d[e.inArray(t.id,a[t.parents[r]].children_d)]=n;for(r=0,o=t.children.length;o>r;r++)a[t.children[r]].parent=n;for(r=0,o=t.children_d.length;o>r;r++)a[t.children_d[r]].parents[e.inArray(t.id,a[t.children_d[r]].parents)]=n;return r=e.inArray(t.id,this._data.core.selected),-1!==r&&(this._data.core.selected[r]=n),r=this.get_node(t.id,!0),r&&(r.attr("id",n),this.element.attr("aria-activedescendant")===t.id&&this.element.attr("aria-activedescendant",n)),delete a[t.id],t.id=n,t.li_attr.id=n,a[n]=t,this.trigger("set_id",{node:t,new:t.id,old:i}),!0},get_text:function(t){return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&t.text},set_text:function(t,n){var r,o;if(e.isArray(t)){for(t=t.slice(),r=0,o=t.length;o>r;r++)this.set_text(t[r],n);return!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&(t.text=n,this.get_node(t,!0).length&&this.redraw_node(t.id),this.trigger("set_text",{obj:t,text:n}),!0)},get_json:function(t,n,r){if(!(t=this.get_node(t||e.jstree.root)))return!1;n&&n.flat&&!r&&(r=[]);var o,a,i={id:t.id,text:t.text,icon:this.get_icon(t),li_attr:e.extend(!0,{},t.li_attr),a_attr:e.extend(!0,{},t.a_attr),state:{},data:(!n||!n.no_data)&&e.extend(!0,e.isArray(t.data)?[]:{},t.data)};if(n&&n.flat?i.parent=t.parent:i.children=[],n&&n.no_state)delete i.state;else for(o in t.state)t.state.hasOwnProperty(o)&&(i.state[o]=t.state[o]);if(n&&n.no_li_attr&&delete i.li_attr,n&&n.no_a_attr&&delete i.a_attr,n&&n.no_id&&(delete i.id,i.li_attr&&i.li_attr.id&&delete i.li_attr.id,i.a_attr&&i.a_attr.id&&delete i.a_attr.id),n&&n.flat&&t.id!==e.jstree.root&&r.push(i),!n||!n.no_children)for(o=0,a=t.children.length;a>o;o++)n&&n.flat?this.get_json(t.children[o],n,r):i.children.push(this.get_json(t.children[o],n));return n&&n.flat?r:t.id===e.jstree.root?i.children:i},create_node:function(n,r,o,a,i){if(null===n&&(n=e.jstree.root),!(n=this.get_node(n)))return!1;if(o=o===t?"last":o,!o.toString().match(/^(before|after)$/)&&!i&&!this.is_loaded(n))return this.load_node(n,function(){this.create_node(n,r,o,a,!0)});r||(r={text:this.get_string("New node")}),r="string"==typeof r?{text:r}:e.extend(!0,{},r),r.text===t&&(r.text=this.get_string("New node"));var s,l,u,c;switch(n.id===e.jstree.root&&("before"===o&&(o="first"),"after"===o&&(o="last")),o){case"before":s=this.get_node(n.parent),o=e.inArray(n.id,s.children),n=s;break;case"after":s=this.get_node(n.parent),o=e.inArray(n.id,s.children)+1,n=s;break;case"inside":case"first":o=0;break;case"last":o=n.children.length;break;default:o||(o=0)}if(o>n.children.length&&(o=n.children.length),r.id||(r.id=!0),!this.check("create_node",r,n,o))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(!0===r.id&&delete r.id,!(r=this._parse_model_from_json(r,n.id,n.parents.concat())))return!1;for(s=this.get_node(r),l=[],l.push(r),l=l.concat(s.children_d),this.trigger("model",{nodes:l,parent:n.id}),n.children_d=n.children_d.concat(l),u=0,c=n.parents.length;c>u;u++)this._model.data[n.parents[u]].children_d=this._model.data[n.parents[u]].children_d.concat(l);for(r=s,s=[],u=0,c=n.children.length;c>u;u++)s[u>=o?u+1:u]=n.children[u];return s[o]=r.id,n.children=s,this.redraw_node(n,!0),this.trigger("create_node",{node:this.get_node(r),parent:n.id,position:o}),a&&a.call(this,this.get_node(r)),r.id},rename_node:function(t,n){var r,o,a;if(e.isArray(t)){for(t=t.slice(),r=0,o=t.length;o>r;r++)this.rename_node(t[r],n);return!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&(a=t.text,this.check("rename_node",t,this.get_parent(t),n)?(this.set_text(t,n),this.trigger("rename_node",{node:t,text:n,old:a}),!0):(this.settings.core.error.call(this,this._data.core.last_error),!1))},delete_node:function(t){var n,r,o,a,i,s,l,u,c,d,p,f;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;r>n;n++)this.delete_node(t[n]);return!0}if(!(t=this.get_node(t))||t.id===e.jstree.root)return!1;if(o=this.get_node(t.parent),a=e.inArray(t.id,o.children),d=!1,!this.check("delete_node",t,o,a))return this.settings.core.error.call(this,this._data.core.last_error),!1;for(-1!==a&&(o.children=e.vakata.array_remove(o.children,a)),i=t.children_d.concat([]),i.push(t.id),s=0,l=t.parents.length;l>s;s++)this._model.data[t.parents[s]].children_d=e.vakata.array_filter(this._model.data[t.parents[s]].children_d,function(t){return-1===e.inArray(t,i)});for(u=0,c=i.length;c>u;u++)if(this._model.data[i[u]].state.selected){d=!0;break}for(d&&(this._data.core.selected=e.vakata.array_filter(this._data.core.selected,function(t){return-1===e.inArray(t,i)})),this.trigger("delete_node",{node:t,parent:o.id}),d&&this.trigger("changed",{action:"delete_node",node:t,selected:this._data.core.selected,parent:o.id}),u=0,c=i.length;c>u;u++)delete this._model.data[i[u]];return-1!==e.inArray(this._data.core.focused,i)&&(this._data.core.focused=null,p=this.element[0].scrollTop,f=this.element[0].scrollLeft,o.id===e.jstree.root?this._model.data[e.jstree.root].children[0]&&this.get_node(this._model.data[e.jstree.root].children[0],!0).children(".jstree-anchor").focus():this.get_node(o,!0).children(".jstree-anchor").focus(),this.element[0].scrollTop=p,this.element[0].scrollLeft=f),this.redraw_node(o,!0),!0},check:function(t,n,r,o,a){n=n&&n.id?n:this.get_node(n),r=r&&r.id?r:this.get_node(r);var i=t.match(/^move_node|copy_node|create_node$/i)?r:n,s=this.settings.core.check_callback;return"move_node"!==t&&"copy_node"!==t||a&&a.is_multi||n.id!==r.id&&("move_node"!==t||e.inArray(n.id,r.children)!==o)&&-1===e.inArray(r.id,n.children_d)?(i&&i.data&&(i=i.data),i&&i.functions&&(!1===i.functions[t]||!0===i.functions[t])?(!1===i.functions[t]&&(this._data.core.last_error={error:"check",plugin:"core",id:"core_02",reason:"Node data prevents function: "+t,data:JSON.stringify({chk:t,pos:o,obj:!(!n||!n.id)&&n.id,par:!(!r||!r.id)&&r.id})}),i.functions[t]):!(!1===s||e.isFunction(s)&&!1===s.call(this,t,n,r,o,a)||s&&!1===s[t])||(this._data.core.last_error={error:"check",plugin:"core",id:"core_03",reason:"User config for core.check_callback prevents function: "+t,data:JSON.stringify({chk:t,pos:o,obj:!(!n||!n.id)&&n.id,par:!(!r||!r.id)&&r.id})},!1)):(this._data.core.last_error={error:"check",plugin:"core",id:"core_01",reason:"Moving parent inside child",data:JSON.stringify({chk:t,pos:o,obj:!(!n||!n.id)&&n.id,par:!(!r||!r.id)&&r.id})},!1)},last_error:function(){return this._data.core.last_error},move_node:function(n,r,o,a,i,s,l){var u,c,d,p,f,h,m,y,g,v,b,_,w,x;if(r=this.get_node(r),o=o===t?0:o,!r)return!1;if(!o.toString().match(/^(before|after)$/)&&!i&&!this.is_loaded(r))return this.load_node(r,function(){this.move_node(n,r,o,a,!0,!1,l)});if(e.isArray(n)){if(1!==n.length){for(u=0,c=n.length;c>u;u++)(g=this.move_node(n[u],r,o,a,i,!1,l))&&(r=g,o="after");return this.redraw(),!0}n=n[0]}if(!(n=n&&n.id?n:this.get_node(n))||n.id===e.jstree.root)return!1;if(d=(n.parent||e.jstree.root).toString(),f=o.toString().match(/^(before|after)$/)&&r.id!==e.jstree.root?this.get_node(r.parent):r,h=l||(this._model.data[n.id]?this:e.jstree.reference(n.id)),m=!h||!h._id||this._id!==h._id,p=h&&h._id&&d&&h._model.data[d]&&h._model.data[d].children?e.inArray(n.id,h._model.data[d].children):-1,h&&h._id&&(n=h._model.data[n.id]),m)return!!(g=this.copy_node(n,r,o,a,i,!1,l))&&(h&&h.delete_node(n),g);switch(r.id===e.jstree.root&&("before"===o&&(o="first"),"after"===o&&(o="last")),o){case"before":o=e.inArray(r.id,f.children);break;case"after":o=e.inArray(r.id,f.children)+1;break;case"inside":case"first":o=0;break;case"last":o=f.children.length;break;default:o||(o=0)}if(o>f.children.length&&(o=f.children.length),!this.check("move_node",n,f,o,{core:!0,origin:l,is_multi:h&&h._id&&h._id!==this._id,is_foreign:!h||!h._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(n.parent===f.id){for(y=f.children.concat(),g=e.inArray(n.id,y),-1!==g&&(y=e.vakata.array_remove(y,g),o>g&&o--),g=[],v=0,b=y.length;b>v;v++)g[v>=o?v+1:v]=y[v];g[o]=n.id,f.children=g,this._node_changed(f.id),this.redraw(f.id===e.jstree.root)}else{for(g=n.children_d.concat(),g.push(n.id),v=0,b=n.parents.length;b>v;v++){for(y=[],x=h._model.data[n.parents[v]].children_d,_=0,w=x.length;w>_;_++)-1===e.inArray(x[_],g)&&y.push(x[_]);h._model.data[n.parents[v]].children_d=y}for(h._model.data[d].children=e.vakata.array_remove_item(h._model.data[d].children,n.id),v=0,b=f.parents.length;b>v;v++)this._model.data[f.parents[v]].children_d=this._model.data[f.parents[v]].children_d.concat(g);for(y=[],v=0,b=f.children.length;b>v;v++)y[v>=o?v+1:v]=f.children[v];for(y[o]=n.id,f.children=y,f.children_d.push(n.id),f.children_d=f.children_d.concat(n.children_d),n.parent=f.id,g=f.parents.concat(),g.unshift(f.id),x=n.parents.length,n.parents=g,g=g.concat(),v=0,b=n.children_d.length;b>v;v++)this._model.data[n.children_d[v]].parents=this._model.data[n.children_d[v]].parents.slice(0,-1*x),Array.prototype.push.apply(this._model.data[n.children_d[v]].parents,g);(d===e.jstree.root||f.id===e.jstree.root)&&(this._model.force_full_redraw=!0),this._model.force_full_redraw||(this._node_changed(d),this._node_changed(f.id)),s||this.redraw()}return a&&a.call(this,n,f,o),this.trigger("move_node",{node:n,parent:f.id,position:o,old_parent:d,old_position:p,is_multi:h&&h._id&&h._id!==this._id,is_foreign:!h||!h._id,old_instance:h,new_instance:this}),n.id},copy_node:function(n,r,o,a,i,s,l){var u,c,d,p,f,h,m,y,g,v;if(r=this.get_node(r),o=o===t?0:o,!r)return!1;if(!o.toString().match(/^(before|after)$/)&&!i&&!this.is_loaded(r))return this.load_node(r,function(){this.copy_node(n,r,o,a,!0,!1,l)});if(e.isArray(n)){if(1!==n.length){for(u=0,c=n.length;c>u;u++)(p=this.copy_node(n[u],r,o,a,i,!0,l))&&(r=p,o="after");return this.redraw(),!0}n=n[0]}if(!(n=n&&n.id?n:this.get_node(n))||n.id===e.jstree.root)return!1;switch(y=(n.parent||e.jstree.root).toString(),g=o.toString().match(/^(before|after)$/)&&r.id!==e.jstree.root?this.get_node(r.parent):r,v=l||(this._model.data[n.id]?this:e.jstree.reference(n.id)),!v||!v._id||this._id!==v._id,v&&v._id&&(n=v._model.data[n.id]),r.id===e.jstree.root&&("before"===o&&(o="first"),"after"===o&&(o="last")),o){case"before":o=e.inArray(r.id,g.children);break;case"after":o=e.inArray(r.id,g.children)+1;break;case"inside":case"first":o=0;break;case"last":o=g.children.length;break;default:o||(o=0)}if(o>g.children.length&&(o=g.children.length),!this.check("copy_node",n,g,o,{core:!0,origin:l,is_multi:v&&v._id&&v._id!==this._id,is_foreign:!v||!v._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(!(m=v?v.get_json(n,{no_id:!0,no_data:!0,no_state:!0}):n))return!1;if(!0===m.id&&delete m.id,!(m=this._parse_model_from_json(m,g.id,g.parents.concat())))return!1;for(p=this.get_node(m),n&&n.state&&!1===n.state.loaded&&(p.state.loaded=!1),d=[],d.push(m),d=d.concat(p.children_d),this.trigger("model",{nodes:d,parent:g.id}),f=0,h=g.parents.length;h>f;f++)this._model.data[g.parents[f]].children_d=this._model.data[g.parents[f]].children_d.concat(d);for(d=[],f=0,h=g.children.length;h>f;f++)d[f>=o?f+1:f]=g.children[f];return d[o]=p.id,g.children=d,g.children_d.push(p.id),g.children_d=g.children_d.concat(p.children_d),g.id===e.jstree.root&&(this._model.force_full_redraw=!0),this._model.force_full_redraw||this._node_changed(g.id),s||this.redraw(g.id===e.jstree.root),a&&a.call(this,p,g,o),this.trigger("copy_node",{node:p,original:n,parent:g.id,position:o,old_parent:y,old_position:v&&v._id&&y&&v._model.data[y]&&v._model.data[y].children?e.inArray(n.id,v._model.data[y].children):-1,is_multi:v&&v._id&&v._id!==this._id,is_foreign:!v||!v._id,old_instance:v,new_instance:this}),p.id},cut:function(t){if(t||(t=this._data.core.selected.concat()),e.isArray(t)||(t=[t]),!t.length)return!1;var n,i,s,l=[];for(i=0,s=t.length;s>i;i++)(n=this.get_node(t[i]))&&n.id&&n.id!==e.jstree.root&&l.push(n);return!!l.length&&(r=l,a=this,o="move_node",void this.trigger("cut",{node:t}))},copy:function(t){if(t||(t=this._data.core.selected.concat()),e.isArray(t)||(t=[t]),!t.length)return!1;var n,i,s,l=[];for(i=0,s=t.length;s>i;i++)(n=this.get_node(t[i]))&&n.id&&n.id!==e.jstree.root&&l.push(n);return!!l.length&&(r=l,a=this,o="copy_node",void this.trigger("copy",{node:t}))},get_buffer:function(){return{mode:o,node:r,inst:a}},can_paste:function(){return!1!==o&&!1!==r},paste:function(e,t){return!!((e=this.get_node(e))&&o&&o.match(/^(copy_node|move_node)$/)&&r)&&(this[o](r,e,t,!1,!1,!1,a)&&this.trigger("paste",{parent:e.id,node:r,mode:o}),r=!1,o=!1,void(a=!1))},clear_buffer:function(){r=!1,o=!1,a=!1,this.trigger("clear_buffer")},edit:function(t,n,r){var o,a,i,s,u,c,d,p,f,h=!1;return!!(t=this.get_node(t))&&(this.check("edit",t,this.get_parent(t))?(f=t,n="string"==typeof n?n:t.text,this.set_text(t,""),t=this._open_to(t),f.text=n,o=this._data.core.rtl,a=this.element.width(),this._data.core.focused=f.id,i=t.children(".jstree-anchor").focus(),s=e("<span>"),u=n,c=e("<div />",{css:{position:"absolute",top:"-200px",left:o?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),d=e("<input />",{value:u,class:"jstree-rename-input",css:{padding:"0",border:"1px solid silver","box-sizing":"border-box",display:"inline-block",height:this._data.core.li_height+"px",lineHeight:this._data.core.li_height+"px",width:"150px"},blur:e.proxy(function(n){n.stopImmediatePropagation(),n.preventDefault();var o,a=s.children(".jstree-rename-input"),l=a.val(),p=this.settings.core.force_text;""===l&&(l=u),c.remove(),s.replaceWith(i),s.remove(),u=p?u:e("<div></div>").append(e.parseHTML(u)).html(),this.set_text(t,u),o=!!this.rename_node(t,p?e("<div></div>").text(l).text():e("<div></div>").append(e.parseHTML(l)).html()),o||this.set_text(t,u),this._data.core.focused=f.id,setTimeout(e.proxy(function(){var e=this.get_node(f.id,!0);e.length&&(this._data.core.focused=f.id,e.children(".jstree-anchor").focus())},this),0),r&&r.call(this,f,o,h),d=null},this),keydown:function(e){var t=e.which;27===t&&(h=!0,this.value=u),(27===t||13===t||37===t||38===t||39===t||40===t||32===t)&&e.stopImmediatePropagation(),(27===t||13===t)&&(e.preventDefault(),this.blur())},click:function(e){e.stopImmediatePropagation()},mousedown:function(e){e.stopImmediatePropagation()},keyup:function(e){d.width(Math.min(c.text("pW"+this.value).width(),a))},keypress:function(e){return 13!==e.which&&void 0}}),p={fontFamily:i.css("fontFamily")||"",fontSize:i.css("fontSize")||"",fontWeight:i.css("fontWeight")||"",fontStyle:i.css("fontStyle")||"",fontStretch:i.css("fontStretch")||"",fontVariant:i.css("fontVariant")||"",letterSpacing:i.css("letterSpacing")||"",wordSpacing:i.css("wordSpacing")||""},s.attr("class",i.attr("class")).append(i.contents().clone()).append(d),i.replaceWith(s),c.css(p),d.css(p).width(Math.min(c.text("pW"+d[0].value).width(),a))[0].select(),void e(l).one("mousedown.jstree touchstart.jstree dnd_start.vakata",function(t){d&&t.target!==d&&e(d).blur()})):(this.settings.core.error.call(this,this._data.core.last_error),!1))},set_theme:function(t,n){if(!t)return!1;if(!0===n){var r=this.settings.core.themes.dir;r||(r=e.jstree.path+"/themes"),n=r+"/"+t+"/style.css"}n&&-1===e.inArray(n,i)&&(e("head").append('<link rel="stylesheet" href="'+n+'" type="text/css" />'),i.push(n)),this._data.core.themes.name&&this.element.removeClass("jstree-"+this._data.core.themes.name),this._data.core.themes.name=t,this.element.addClass("jstree-"+t),this.element[this.settings.core.themes.responsive?"addClass":"removeClass"]("jstree-"+t+"-responsive"),this.trigger("set_theme",{theme:t})},get_theme:function(){return this._data.core.themes.name},set_theme_variant:function(e){this._data.core.themes.variant&&this.element.removeClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant),this._data.core.themes.variant=e,e&&this.element.addClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant)},get_theme_variant:function(){return this._data.core.themes.variant},show_stripes:function(){this._data.core.themes.stripes=!0,this.get_container_ul().addClass("jstree-striped"),this.trigger("show_stripes")},hide_stripes:function(){this._data.core.themes.stripes=!1,this.get_container_ul().removeClass("jstree-striped"),this.trigger("hide_stripes")},toggle_stripes:function(){this._data.core.themes.stripes?this.hide_stripes():this.show_stripes()},show_dots:function(){this._data.core.themes.dots=!0,this.get_container_ul().removeClass("jstree-no-dots"),this.trigger("show_dots")},hide_dots:function(){this._data.core.themes.dots=!1,this.get_container_ul().addClass("jstree-no-dots"),this.trigger("hide_dots")},toggle_dots:function(){this._data.core.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this._data.core.themes.icons=!0,this.get_container_ul().removeClass("jstree-no-icons"),this.trigger("show_icons")},hide_icons:function(){this._data.core.themes.icons=!1,this.get_container_ul().addClass("jstree-no-icons"),this.trigger("hide_icons")},toggle_icons:function(){this._data.core.themes.icons?this.hide_icons():this.show_icons()},show_ellipsis:function(){this._data.core.themes.ellipsis=!0,this.get_container_ul().addClass("jstree-ellipsis"),this.trigger("show_ellipsis")},hide_ellipsis:function(){this._data.core.themes.ellipsis=!1,this.get_container_ul().removeClass("jstree-ellipsis"),this.trigger("hide_ellipsis")},toggle_ellipsis:function(){this._data.core.themes.ellipsis?this.hide_ellipsis():this.show_ellipsis()},set_icon:function(n,r){var o,a,i,s;if(e.isArray(n)){for(n=n.slice(),o=0,a=n.length;a>o;o++)this.set_icon(n[o],r);return!0}return!(!(n=this.get_node(n))||n.id===e.jstree.root)&&(s=n.icon,n.icon=!0===r||null===r||r===t||""===r||r,i=this.get_node(n,!0).children(".jstree-anchor").children(".jstree-themeicon"),!1===r?this.hide_icon(n):!0===r||null===r||r===t||""===r?(i.removeClass("jstree-themeicon-custom "+s).css("background","").removeAttr("rel"),!1===s&&this.show_icon(n)):-1===r.indexOf("/")&&-1===r.indexOf(".")?(i.removeClass(s).css("background",""),i.addClass(r+" jstree-themeicon-custom").attr("rel",r),!1===s&&this.show_icon(n)):(i.removeClass(s).css("background",""),i.addClass("jstree-themeicon-custom").css("background","url('"+r+"') center center no-repeat").attr("rel",r),!1===s&&this.show_icon(n)),!0)},get_icon:function(t){return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&t.icon},hide_icon:function(t){var n,r;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;r>n;n++)this.hide_icon(t[n]);return!0}return!(!(t=this.get_node(t))||t===e.jstree.root)&&(t.icon=!1,this.get_node(t,!0).children(".jstree-anchor").children(".jstree-themeicon").addClass("jstree-themeicon-hidden"),!0)},show_icon:function(t){var n,r,o;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;r>n;n++)this.show_icon(t[n]);return!0}return!(!(t=this.get_node(t))||t===e.jstree.root)&&(o=this.get_node(t,!0),t.icon=!o.length||o.children(".jstree-anchor").children(".jstree-themeicon").attr("rel"),t.icon||(t.icon=!0),o.children(".jstree-anchor").children(".jstree-themeicon").removeClass("jstree-themeicon-hidden"),!0)}},e.vakata={},e.vakata.attributes=function(t,n){t=e(t)[0];var r=n?{}:[];return t&&t.attributes&&e.each(t.attributes,function(t,o){-1===e.inArray(o.name.toLowerCase(),["style","contenteditable","hasfocus","tabindex"])&&null!==o.value&&""!==e.trim(o.value)&&(n?r[o.name]=o.value:r.push(o.name))}),r},e.vakata.array_unique=function(e){var n,r,o=[],a={};for(n=0,r=e.length;r>n;n++)a[e[n]]===t&&(o.push(e[n]),a[e[n]]=!0);return o},e.vakata.array_remove=function(e,t){return e.splice(t,1),e},e.vakata.array_remove_item=function(t,n){var r=e.inArray(n,t);return-1!==r?e.vakata.array_remove(t,r):t},e.vakata.array_filter=function(e,t,n,r,o){if(e.filter)return e.filter(t,n);r=[];for(o in e)~~o+""==o+""&&o>=0&&t.call(n,e[o],+o,e)&&r.push(e[o]);return r},e.jstree.plugins.changed=function(e,t){var n=[];this.trigger=function(e,r){var o,a;if(r||(r={}),"changed"===e.replace(".jstree","")){r.changed={selected:[],deselected:[]};var i={};for(o=0,a=n.length;a>o;o++)i[n[o]]=1;for(o=0,a=r.selected.length;a>o;o++)i[r.selected[o]]?i[r.selected[o]]=2:r.changed.selected.push(r.selected[o]);for(o=0,a=n.length;a>o;o++)1===i[n[o]]&&r.changed.deselected.push(n[o]);n=r.selected.slice()}t.trigger.call(this,e,r)},this.refresh=function(e,r){return n=[],t.refresh.apply(this,arguments)}};var u=l.createElement("I");u.className="jstree-icon jstree-checkbox",u.setAttribute("role","presentation"),e.jstree.defaults.checkbox={visible:!0,three_state:!0,whole_node:!0,keep_selected_style:!0,cascade:"",tie_selection:!0,cascade_to_disabled:!0,cascade_to_hidden:!0},e.jstree.plugins.checkbox=function(n,r){this.bind=function(){r.bind.call(this),this._data.checkbox.uto=!1,this._data.checkbox.selected=[],this.settings.checkbox.three_state&&(this.settings.checkbox.cascade="up+down+undetermined"),this.element.on("init.jstree",e.proxy(function(){this._data.checkbox.visible=this.settings.checkbox.visible,this.settings.checkbox.keep_selected_style||this.element.addClass("jstree-checkbox-no-clicked"),this.settings.checkbox.tie_selection&&this.element.addClass("jstree-checkbox-selection")},this)).on("loading.jstree",e.proxy(function(){this[this._data.checkbox.visible?"show_checkboxes":"hide_checkboxes"]()},this)),-1!==this.settings.checkbox.cascade.indexOf("undetermined")&&this.element.on("changed.jstree uncheck_node.jstree check_node.jstree uncheck_all.jstree check_all.jstree move_node.jstree copy_node.jstree redraw.jstree open_node.jstree",e.proxy(function(){this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(e.proxy(this._undetermined,this),50)},this)),this.settings.checkbox.tie_selection||this.element.on("model.jstree",e.proxy(function(e,t){var n,r,o=this._model.data,a=(o[t.parent],t.nodes);for(n=0,r=a.length;r>n;n++)o[a[n]].state.checked=o[a[n]].state.checked||o[a[n]].original&&o[a[n]].original.state&&o[a[n]].original.state.checked,o[a[n]].state.checked&&this._data.checkbox.selected.push(a[n])},this)),(-1!==this.settings.checkbox.cascade.indexOf("up")||-1!==this.settings.checkbox.cascade.indexOf("down"))&&this.element.on("model.jstree",e.proxy(function(t,n){var r,o,a,i,s,l,u=this._model.data,c=u[n.parent],d=n.nodes,p=[],f=this.settings.checkbox.cascade,h=this.settings.checkbox.tie_selection;if(-1!==f.indexOf("down"))if(c.state[h?"selected":"checked"]){for(o=0,a=d.length;a>o;o++)u[d[o]].state[h?"selected":"checked"]=!0;this._data[h?"core":"checkbox"].selected=this._data[h?"core":"checkbox"].selected.concat(d)}else for(o=0,a=d.length;a>o;o++)if(u[d[o]].state[h?"selected":"checked"]){for(i=0,s=u[d[o]].children_d.length;s>i;i++)u[u[d[o]].children_d[i]].state[h?"selected":"checked"]=!0;this._data[h?"core":"checkbox"].selected=this._data[h?"core":"checkbox"].selected.concat(u[d[o]].children_d)}if(-1!==f.indexOf("up")){for(o=0,a=c.children_d.length;a>o;o++)u[c.children_d[o]].children.length||p.push(u[c.children_d[o]].parent);for(p=e.vakata.array_unique(p),i=0,s=p.length;s>i;i++)for(c=u[p[i]];c&&c.id!==e.jstree.root;){for(r=0,o=0,a=c.children.length;a>o;o++)r+=u[c.children[o]].state[h?"selected":"checked"];if(r!==a)break;c.state[h?"selected":"checked"]=!0,this._data[h?"core":"checkbox"].selected.push(c.id),l=this.get_node(c,!0),l&&l.length&&l.attr("aria-selected",!0).children(".jstree-anchor").addClass(h?"jstree-clicked":"jstree-checked"),c=this.get_node(c.parent)}}this._data[h?"core":"checkbox"].selected=e.vakata.array_unique(this._data[h?"core":"checkbox"].selected)},this)).on(this.settings.checkbox.tie_selection?"select_node.jstree":"check_node.jstree",e.proxy(function(t,n){var r,o,a,i,s=n.node,l=this._model.data,u=this.get_node(s.parent),c=this.settings.checkbox.cascade,d=this.settings.checkbox.tie_selection,p={},f=this._data[d?"core":"checkbox"].selected;for(r=0,o=f.length;o>r;r++)p[f[r]]=!0;if(-1!==c.indexOf("down")){var h=this._cascade_new_checked_state(s.id,!0);s.children_d.concat(s.id).forEach(function(e){h.indexOf(e)>-1?p[e]=!0:delete p[e]})}if(-1!==c.indexOf("up"))for(;u&&u.id!==e.jstree.root;){for(a=0,r=0,o=u.children.length;o>r;r++)a+=l[u.children[r]].state[d?"selected":"checked"];if(a!==o)break;u.state[d?"selected":"checked"]=!0,p[u.id]=!0,i=this.get_node(u,!0),i&&i.length&&i.attr("aria-selected",!0).children(".jstree-anchor").addClass(d?"jstree-clicked":"jstree-checked"),u=this.get_node(u.parent)}f=[];for(r in p)p.hasOwnProperty(r)&&f.push(r);this._data[d?"core":"checkbox"].selected=f},this)).on(this.settings.checkbox.tie_selection?"deselect_all.jstree":"uncheck_all.jstree",e.proxy(function(t,n){var r,o,a,i=this.get_node(e.jstree.root),s=this._model.data;for(r=0,o=i.children_d.length;o>r;r++)(a=s[i.children_d[r]])&&a.original&&a.original.state&&a.original.state.undetermined&&(a.original.state.undetermined=!1)},this)).on(this.settings.checkbox.tie_selection?"deselect_node.jstree":"uncheck_node.jstree",e.proxy(function(e,t){var n,r,o,a=t.node,i=(this.get_node(a,!0),this.settings.checkbox.cascade),s=this.settings.checkbox.tie_selection,l=this._data[s?"core":"checkbox"].selected,u=a.children_d.concat(a.id);if(-1!==i.indexOf("down")){var c=this._cascade_new_checked_state(a.id,!1);l=l.filter(function(e){return-1===u.indexOf(e)||c.indexOf(e)>-1})}if(-1!==i.indexOf("up")&&-1===l.indexOf(a.id)){for(n=0,r=a.parents.length;r>n;n++)o=this._model.data[a.parents[n]],o.state[s?"selected":"checked"]=!1,o&&o.original&&o.original.state&&o.original.state.undetermined&&(o.original.state.undetermined=!1),(o=this.get_node(a.parents[n],!0))&&o.length&&o.attr("aria-selected",!1).children(".jstree-anchor").removeClass(s?"jstree-clicked":"jstree-checked");l=l.filter(function(e){return-1===a.parents.indexOf(e)})}this._data[s?"core":"checkbox"].selected=l},this)),-1!==this.settings.checkbox.cascade.indexOf("up")&&this.element.on("delete_node.jstree",e.proxy(function(t,n){for(var r,o,a,i,s=this.get_node(n.parent),l=this._model.data,u=this.settings.checkbox.tie_selection;s&&s.id!==e.jstree.root&&!s.state[u?"selected":"checked"];){for(a=0,r=0,o=s.children.length;o>r;r++)a+=l[s.children[r]].state[u?"selected":"checked"];if(!(o>0&&a===o))break;s.state[u?"selected":"checked"]=!0,this._data[u?"core":"checkbox"].selected.push(s.id),i=this.get_node(s,!0),i&&i.length&&i.attr("aria-selected",!0).children(".jstree-anchor").addClass(u?"jstree-clicked":"jstree-checked"),s=this.get_node(s.parent)}},this)).on("move_node.jstree",e.proxy(function(t,n){var r,o,a,i,s,l=n.is_multi,u=n.old_parent,c=this.get_node(n.parent),d=this._model.data,p=this.settings.checkbox.tie_selection;if(!l)for(r=this.get_node(u);r&&r.id!==e.jstree.root&&!r.state[p?"selected":"checked"];){for(o=0,a=0,i=r.children.length;i>a;a++)o+=d[r.children[a]].state[p?"selected":"checked"];if(!(i>0&&o===i))break;r.state[p?"selected":"checked"]=!0,this._data[p?"core":"checkbox"].selected.push(r.id),s=this.get_node(r,!0),s&&s.length&&s.attr("aria-selected",!0).children(".jstree-anchor").addClass(p?"jstree-clicked":"jstree-checked"),r=this.get_node(r.parent)}for(r=c;r&&r.id!==e.jstree.root;){for(o=0,a=0,i=r.children.length;i>a;a++)o+=d[r.children[a]].state[p?"selected":"checked"];if(o===i)r.state[p?"selected":"checked"]||(r.state[p?"selected":"checked"]=!0,this._data[p?"core":"checkbox"].selected.push(r.id),(s=this.get_node(r,!0))&&s.length&&s.attr("aria-selected",!0).children(".jstree-anchor").addClass(p?"jstree-clicked":"jstree-checked"));else{if(!r.state[p?"selected":"checked"])break;r.state[p?"selected":"checked"]=!1,this._data[p?"core":"checkbox"].selected=e.vakata.array_remove_item(this._data[p?"core":"checkbox"].selected,r.id),(s=this.get_node(r,!0))&&s.length&&s.attr("aria-selected",!1).children(".jstree-anchor").removeClass(p?"jstree-clicked":"jstree-checked")}r=this.get_node(r.parent)}},this))},this._undetermined=function(){if(null!==this.element){var n,r,o,a,i={},s=this._model.data,l=this.settings.checkbox.tie_selection,u=this._data[l?"core":"checkbox"].selected,c=[],d=this;for(n=0,r=u.length;r>n;n++)if(s[u[n]]&&s[u[n]].parents)for(o=0,a=s[u[n]].parents.length;a>o&&i[s[u[n]].parents[o]]===t;o++)s[u[n]].parents[o]!==e.jstree.root&&(i[s[u[n]].parents[o]]=!0,c.push(s[u[n]].parents[o]));for(this.element.find(".jstree-closed").not(":has(.jstree-children)").each(function(){var l,u=d.get_node(this);if(u)if(u.state.loaded){for(n=0,r=u.children_d.length;r>n;n++)if(l=s[u.children_d[n]],!l.state.loaded&&l.original&&l.original.state&&l.original.state.undetermined&&!0===l.original.state.undetermined)for(i[l.id]===t&&l.id!==e.jstree.root&&(i[l.id]=!0,c.push(l.id)),o=0,a=l.parents.length;a>o;o++)i[l.parents[o]]===t&&l.parents[o]!==e.jstree.root&&(i[l.parents[o]]=!0,c.push(l.parents[o]))}else if(u.original&&u.original.state&&u.original.state.undetermined&&!0===u.original.state.undetermined)for(i[u.id]===t&&u.id!==e.jstree.root&&(i[u.id]=!0,c.push(u.id)),o=0,a=u.parents.length;a>o;o++)i[u.parents[o]]===t&&u.parents[o]!==e.jstree.root&&(i[u.parents[o]]=!0,c.push(u.parents[o]))}),this.element.find(".jstree-undetermined").removeClass("jstree-undetermined"),n=0,r=c.length;r>n;n++)s[c[n]].state[l?"selected":"checked"]||(u=this.get_node(c[n],!0))&&u.length&&u.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-undetermined")}},this.redraw_node=function(t,n,o,a){if(t=r.redraw_node.apply(this,arguments)){var i,s,l=null,c=null;for(i=0,s=t.childNodes.length;s>i;i++)if(t.childNodes[i]&&t.childNodes[i].className&&-1!==t.childNodes[i].className.indexOf("jstree-anchor")){l=t.childNodes[i];break}l&&(!this.settings.checkbox.tie_selection&&this._model.data[t.id].state.checked&&(l.className+=" jstree-checked"),c=u.cloneNode(!1),this._model.data[t.id].state.checkbox_disabled&&(c.className+=" jstree-checkbox-disabled"),l.insertBefore(c,l.childNodes[0]))}return o||-1===this.settings.checkbox.cascade.indexOf("undetermined")||(this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(e.proxy(this._undetermined,this),50)),t},this.show_checkboxes=function(){this._data.core.themes.checkboxes=!0,this.get_container_ul().removeClass("jstree-no-checkboxes")},this.hide_checkboxes=function(){this._data.core.themes.checkboxes=!1,this.get_container_ul().addClass("jstree-no-checkboxes")},this.toggle_checkboxes=function(){this._data.core.themes.checkboxes?this.hide_checkboxes():this.show_checkboxes()},this.is_undetermined=function(t){t=this.get_node(t);var n,r,o=this.settings.checkbox.cascade,a=this.settings.checkbox.tie_selection,i=this._data[a?"core":"checkbox"].selected,s=this._model.data;if(!t||!0===t.state[a?"selected":"checked"]||-1===o.indexOf("undetermined")||-1===o.indexOf("down")&&-1===o.indexOf("up"))return!1;if(!t.state.loaded&&!0===t.original.state.undetermined)return!0;for(n=0,r=t.children_d.length;r>n;n++)if(-1!==e.inArray(t.children_d[n],i)||!s[t.children_d[n]].state.loaded&&s[t.children_d[n]].original.state.undetermined)return!0;return!1},this.disable_checkbox=function(t){var n,r,o;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;r>n;n++)this.disable_checkbox(t[n]);return!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&(o=this.get_node(t,!0),void(t.state.checkbox_disabled||(t.state.checkbox_disabled=!0,o&&o.length&&o.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-checkbox-disabled"),this.trigger("disable_checkbox",{node:t}))))},this.enable_checkbox=function(t){var n,r,o;if(e.isArray(t)){for(t=t.slice(),n=0,r=t.length;r>n;n++)this.enable_checkbox(t[n]);return!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&(o=this.get_node(t,!0),void(t.state.checkbox_disabled&&(t.state.checkbox_disabled=!1,o&&o.length&&o.children(".jstree-anchor").children(".jstree-checkbox").removeClass("jstree-checkbox-disabled"),this.trigger("enable_checkbox",{node:t}))))},this.activate_node=function(t,n){return!e(n.target).hasClass("jstree-checkbox-disabled")&&(this.settings.checkbox.tie_selection&&(this.settings.checkbox.whole_node||e(n.target).hasClass("jstree-checkbox"))&&(n.ctrlKey=!0),this.settings.checkbox.tie_selection||!this.settings.checkbox.whole_node&&!e(n.target).hasClass("jstree-checkbox")?r.activate_node.call(this,t,n):!this.is_disabled(t)&&(this.is_checked(t)?this.uncheck_node(t,n):this.check_node(t,n),void this.trigger("activate_node",{node:this.get_node(t)})))},this._cascade_new_checked_state=function(e,t){var n=this,r=this.settings.checkbox.tie_selection,o=this._model.data[e],a=[],i=[];if(!this.settings.checkbox.cascade_to_disabled&&o.state.disabled||!this.settings.checkbox.cascade_to_hidden&&o.state.hidden){var s=this.get_checked_descendants(e);o.state[r?"selected":"checked"]&&s.push(o.id),a=a.concat(s)}else{o.children&&o.children.forEach(function(e){var r=n._cascade_new_checked_state(e,t);a=a.concat(r),r.indexOf(e)>-1&&i.push(e)});var l=n.get_node(o,!0),u=i.length>0&&i.length<o.children.length;o.original&&o.original.state&&o.original.state.undetermined&&(o.original.state.undetermined=u),u?(o.state[r?"selected":"checked"]=!1,l.attr("aria-selected",!1).children(".jstree-anchor").removeClass(r?"jstree-clicked":"jstree-checked")):t&&i.length===o.children.length?(o.state[r?"selected":"checked"]=t,a.push(o.id),l.attr("aria-selected",!0).children(".jstree-anchor").addClass(r?"jstree-clicked":"jstree-checked")):(o.state[r?"selected":"checked"]=!1,l.attr("aria-selected",!1).children(".jstree-anchor").removeClass(r?"jstree-clicked":"jstree-checked"))}return a},this.get_checked_descendants=function(e){var t=this,n=t.settings.checkbox.tie_selection;return t._model.data[e].children_d.filter(function(e){return t._model.data[e].state[n?"selected":"checked"]})},this.check_node=function(t,n){if(this.settings.checkbox.tie_selection)return this.select_node(t,!1,!0,n);var r,o,a;if(e.isArray(t)){for(t=t.slice(),o=0,a=t.length;a>o;o++)this.check_node(t[o],n);return!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&(r=this.get_node(t,!0),void(t.state.checked||(t.state.checked=!0,this._data.checkbox.selected.push(t.id),r&&r.length&&r.children(".jstree-anchor").addClass("jstree-checked"),this.trigger("check_node",{node:t,selected:this._data.checkbox.selected,event:n}))))},this.uncheck_node=function(t,n){if(this.settings.checkbox.tie_selection)return this.deselect_node(t,!1,n);var r,o,a;if(e.isArray(t)){for(t=t.slice(),r=0,o=t.length;o>r;r++)this.uncheck_node(t[r],n);return!0}return!(!(t=this.get_node(t))||t.id===e.jstree.root)&&(a=this.get_node(t,!0),void(t.state.checked&&(t.state.checked=!1,this._data.checkbox.selected=e.vakata.array_remove_item(this._data.checkbox.selected,t.id),a.length&&a.children(".jstree-anchor").removeClass("jstree-checked"),this.trigger("uncheck_node",{node:t,selected:this._data.checkbox.selected,event:n}))))},this.check_all=function(){if(this.settings.checkbox.tie_selection)return this.select_all();var t,n;this._data.checkbox.selected.concat([]);for(this._data.checkbox.selected=this._model.data[e.jstree.root].children_d.concat(),t=0,n=this._data.checkbox.selected.length;n>t;t++)this._model.data[this._data.checkbox.selected[t]]&&(this._model.data[this._data.checkbox.selected[t]].state.checked=!0);this.redraw(!0),this.trigger("check_all",{selected:this._data.checkbox.selected})},this.uncheck_all=function(){if(this.settings.checkbox.tie_selection)return this.deselect_all();var e,t,n=this._data.checkbox.selected.concat([]);for(e=0,t=this._data.checkbox.selected.length;t>e;e++)this._model.data[this._data.checkbox.selected[e]]&&(this._model.data[this._data.checkbox.selected[e]].state.checked=!1);this._data.checkbox.selected=[],this.element.find(".jstree-checked").removeClass("jstree-checked"),this.trigger("uncheck_all",{selected:this._data.checkbox.selected,node:n})},this.is_checked=function(t){return this.settings.checkbox.tie_selection?this.is_selected(t):!(!(t=this.get_node(t))||t.id===e.jstree.root)&&t.state.checked},this.get_checked=function(t){return this.settings.checkbox.tie_selection?this.get_selected(t):t?e.map(this._data.checkbox.selected,e.proxy(function(e){return this.get_node(e)},this)):this._data.checkbox.selected},this.get_top_checked=function(t){if(this.settings.checkbox.tie_selection)return this.get_top_selected(t);var n,r,o,a,i=this.get_checked(!0),s={};for(n=0,r=i.length;r>n;n++)s[i[n].id]=i[n];for(n=0,r=i.length;r>n;n++)for(o=0,a=i[n].children_d.length;a>o;o++)s[i[n].children_d[o]]&&delete s[i[n].children_d[o]];i=[];for(n in s)s.hasOwnProperty(n)&&i.push(n);return t?e.map(i,e.proxy(function(e){return this.get_node(e)},this)):i},this.get_bottom_checked=function(t){if(this.settings.checkbox.tie_selection)return this.get_bottom_selected(t);var n,r,o=this.get_checked(!0),a=[];for(n=0,r=o.length;r>n;n++)o[n].children.length||a.push(o[n].id);return t?e.map(a,e.proxy(function(e){return this.get_node(e)},this)):a},this.load_node=function(t,n){var o,a,i;if(!e.isArray(t)&&!this.settings.checkbox.tie_selection&&(i=this.get_node(t))&&i.state.loaded)for(o=0,a=i.children_d.length;a>o;o++)this._model.data[i.children_d[o]].state.checked&&(!0,this._data.checkbox.selected=e.vakata.array_remove_item(this._data.checkbox.selected,i.children_d[o]));return r.load_node.apply(this,arguments)},this.get_state=function(){var e=r.get_state.apply(this,arguments);return this.settings.checkbox.tie_selection?e:(e.checkbox=this._data.checkbox.selected.slice(),e)},this.set_state=function(t,n){var o=r.set_state.apply(this,arguments);if(o&&t.checkbox){if(!this.settings.checkbox.tie_selection){this.uncheck_all();var a=this;e.each(t.checkbox,function(e,t){a.check_node(t)})}return delete t.checkbox,this.set_state(t,n),!1}return o},this.refresh=function(e,t){return this.settings.checkbox.tie_selection||(this._data.checkbox.selected=[]),r.refresh.apply(this,arguments)}},e.jstree.defaults.conditionalselect=function(){return!0},e.jstree.plugins.conditionalselect=function(e,t){this.activate_node=function(e,n){this.settings.conditionalselect.call(this,this.get_node(e),n)&&t.activate_node.call(this,e,n)}},e.jstree.defaults.contextmenu={select_node:!0,show_at_node:!0,items:function(t,n){return{create:{separator_before:!1,separator_after:!0,_disabled:!1,label:"Create",action:function(t){var n=e.jstree.reference(t.reference),r=n.get_node(t.reference);n.create_node(r,{},"last",function(e){try{n.edit(e)}catch(t){setTimeout(function(){n.edit(e)},0)}})}},rename:{separator_before:!1,separator_after:!1,_disabled:!1,label:"Rename",action:function(t){var n=e.jstree.reference(t.reference),r=n.get_node(t.reference);n.edit(r)}},remove:{separator_before:!1,icon:!1,separator_after:!1,_disabled:!1,label:"Delete",action:function(t){var n=e.jstree.reference(t.reference),r=n.get_node(t.reference);n.is_selected(r)?n.delete_node(n.get_selected()):n.delete_node(r)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,separator_after:!1,label:"Cut",action:function(t){var n=e.jstree.reference(t.reference),r=n.get_node(t.reference);n.is_selected(r)?n.cut(n.get_top_selected()):n.cut(r)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(t){var n=e.jstree.reference(t.reference),r=n.get_node(t.reference);n.is_selected(r)?n.copy(n.get_top_selected()):n.copy(r)}},paste:{separator_before:!1,icon:!1,_disabled:function(t){return!e.jstree.reference(t.reference).can_paste()},separator_after:!1,label:"Paste",action:function(t){var n=e.jstree.reference(t.reference),r=n.get_node(t.reference);n.paste(r)}}}}}}},e.jstree.plugins.contextmenu=function(n,r){this.bind=function(){r.bind.call(this);var t,n,o=0,a=null;this.element.on("init.jstree loading.jstree ready.jstree",e.proxy(function(){this.get_container_ul().addClass("jstree-contextmenu")},this)).on("contextmenu.jstree",".jstree-anchor",e.proxy(function(e,t){"input"!==e.target.tagName.toLowerCase()&&(e.preventDefault(),o=e.ctrlKey?+new Date:0,(t||a)&&(o=+new Date+1e4),a&&clearTimeout(a),this.is_loading(e.currentTarget)||this.show_contextmenu(e.currentTarget,e.pageX,e.pageY,e))},this)).on("click.jstree",".jstree-anchor",e.proxy(function(t){this._data.contextmenu.visible&&(!o||+new Date-o>250)&&e.vakata.context.hide(),o=0},this)).on("touchstart.jstree",".jstree-anchor",function(r){r.originalEvent&&r.originalEvent.changedTouches&&r.originalEvent.changedTouches[0]&&(t=r.originalEvent.changedTouches[0].clientX,n=r.originalEvent.changedTouches[0].clientY,a=setTimeout(function(){e(r.currentTarget).trigger("contextmenu",!0)},750))}).on("touchmove.vakata.jstree",function(e){a&&e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]&&(Math.abs(t-e.originalEvent.changedTouches[0].clientX)>50||Math.abs(n-e.originalEvent.changedTouches[0].clientY)>50)&&clearTimeout(a)}).on("touchend.vakata.jstree",function(e){a&&clearTimeout(a)}),e(l).on("context_hide.vakata.jstree",e.proxy(function(t,n){this._data.contextmenu.visible=!1,e(n.reference).removeClass("jstree-context")},this))},this.teardown=function(){this._data.contextmenu.visible&&e.vakata.context.hide(),r.teardown.call(this)},this.show_contextmenu=function(n,r,o,a){if(!(n=this.get_node(n))||n.id===e.jstree.root)return!1;var i=this.settings.contextmenu,s=this.get_node(n,!0),l=s.children(".jstree-anchor"),u=!1,c=!1;(i.show_at_node||r===t||o===t)&&(u=l.offset(),r=u.left,o=u.top+this._data.core.li_height),this.settings.contextmenu.select_node&&!this.is_selected(n)&&this.activate_node(n,a),c=i.items,e.isFunction(c)&&(c=c.call(this,n,e.proxy(function(e){this._show_contextmenu(n,r,o,e)},this))),e.isPlainObject(c)&&this._show_contextmenu(n,r,o,c)},this._show_contextmenu=function(t,n,r,o){var a=this.get_node(t,!0),i=a.children(".jstree-anchor");e(l).one("context_show.vakata.jstree",e.proxy(function(t,n){var r="jstree-contextmenu jstree-"+this.get_theme()+"-contextmenu";e(n.element).addClass(r),i.addClass("jstree-context")},this)),this._data.contextmenu.visible=!0,e.vakata.context.show(i,{x:n,y:r},o),this.trigger("show_contextmenu",{node:t,x:n,y:r})}},function(e){var t=!1,n={element:!1,reference:!1,position_x:0,position_y:0,items:[],html:"",is_visible:!1};e.vakata.context={settings:{hide_onmouseleave:0,icons:!0},_trigger:function(t){e(l).triggerHandler("context_"+t+".vakata",{reference:n.reference,element:n.element,position:{x:n.position_x,y:n.position_y}})},_execute:function(t){return!(!(t=n.items[t])||t._disabled&&(!e.isFunction(t._disabled)||t._disabled({item:t,reference:n.reference,element:n.element}))||!t.action)&&t.action.call(null,{item:t,reference:n.reference,element:n.element,position:{x:n.position_x,y:n.position_y}})},_parse:function(t,r){if(!t)return!1;r||(n.html="",n.items=[]);var o,a="",i=!1;return r&&(a+="<ul>"),e.each(t,function(t,r){return!r||(n.items.push(r),!i&&r.separator_before&&(a+="<li class='vakata-context-separator'><a href='#' "+(e.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>"),i=!1,a+="<li class='"+(r._class||"")+(!0===r._disabled||e.isFunction(r._disabled)&&r._disabled({item:r,reference:n.reference,element:n.element})?" vakata-contextmenu-disabled ":"")+"' "+(r.shortcut?" data-shortcut='"+r.shortcut+"' ":"")+">",a+="<a href='#' rel='"+(n.items.length-1)+"' "+(r.title?"title='"+r.title+"'":"")+">",e.vakata.context.settings.icons&&(a+="<i ",r.icon&&(a+=-1!==r.icon.indexOf("/")||-1!==r.icon.indexOf(".")?" style='background:url(\""+r.icon+"\") center center no-repeat' ":" class='"+r.icon+"' "),a+="></i><span class='vakata-contextmenu-sep'>&#160;</span>"),a+=(e.isFunction(r.label)?r.label({item:t,reference:n.reference,element:n.element}):r.label)+(r.shortcut?' <span class="vakata-contextmenu-shortcut vakata-contextmenu-shortcut-'+r.shortcut+'">'+(r.shortcut_label||"")+"</span>":"")+"</a>",r.submenu&&(o=e.vakata.context._parse(r.submenu,!0))&&(a+=o),a+="</li>",void(r.separator_after&&(a+="<li class='vakata-context-separator'><a href='#' "+(e.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>",i=!0)))}),a=a.replace(/<li class\='vakata-context-separator'\><\/li\>$/,""),r&&(a+="</ul>"),r||(n.html=a,e.vakata.context._trigger("parse")),a.length>10&&a},_show_submenu:function(n){if(n=e(n),n.length&&n.children("ul").length){var r=n.children("ul"),o=n.offset().left,a=o+n.outerWidth(),i=n.offset().top,s=r.width(),l=r.height(),u=e(window).width()+e(window).scrollLeft(),c=e(window).height()+e(window).scrollTop();t?n[a-(s+10+n.outerWidth())<0?"addClass":"removeClass"]("vakata-context-left"):n[a+s>u&&o>u-a?"addClass":"removeClass"]("vakata-context-right"),i+l+10>c&&r.css("bottom","-1px"),n.hasClass("vakata-context-right")?s>o&&r.css("margin-right",o-s):s>u-a&&r.css("margin-left",u-a-s),r.show()}},show:function(r,o,a){var i,s,l,u,c,d,p,f;switch(n.element&&n.element.length&&n.element.width(""),!0){case!o&&!r:return!1;case!!o&&!!r:n.reference=r,n.position_x=o.x,n.position_y=o.y;break;case!o&&!!r:n.reference=r,i=r.offset(),n.position_x=i.left+r.outerHeight(),n.position_y=i.top;break;case!!o&&!r:n.position_x=o.x,n.position_y=o.y}r&&!a&&e(r).data("vakata_contextmenu")&&(a=e(r).data("vakata_contextmenu")),e.vakata.context._parse(a)&&n.element.html(n.html),n.items.length&&(n.element.appendTo("body"),s=n.element,l=n.position_x,u=n.position_y,c=s.width(),d=s.height(),p=e(window).width()+e(window).scrollLeft(),f=e(window).height()+e(window).scrollTop(),t&&(l-=s.outerWidth()-e(r).outerWidth())<e(window).scrollLeft()+20&&(l=e(window).scrollLeft()+20),l+c+20>p&&(l=p-(c+20)),u+d+20>f&&(u=f-(d+20)),n.element.css({left:l,top:u}).show().find("a").first().focus().parent().addClass("vakata-context-hover"),n.is_visible=!0,e.vakata.context._trigger("show"))},hide:function(){n.is_visible&&(n.element.hide().find("ul").hide().end().find(":focus").blur().end().detach(),n.is_visible=!1,e.vakata.context._trigger("hide"))}},e(function(){t="rtl"===e("body").css("direction");var r=!1;n.element=e("<ul class='vakata-context'></ul>"),n.element.on("mouseenter","li",function(t){t.stopImmediatePropagation(),e.contains(this,t.relatedTarget)||(r&&clearTimeout(r),n.element.find(".vakata-context-hover").removeClass("vakata-context-hover").end(),e(this).siblings().find("ul").hide().end().end().parentsUntil(".vakata-context","li").addBack().addClass("vakata-context-hover"),e.vakata.context._show_submenu(this))}).on("mouseleave","li",function(t){e.contains(this,t.relatedTarget)||e(this).find(".vakata-context-hover").addBack().removeClass("vakata-context-hover")}).on("mouseleave",function(t){e(this).find(".vakata-context-hover").removeClass("vakata-context-hover"),e.vakata.context.settings.hide_onmouseleave&&(r=setTimeout(function(t){return function(){e.vakata.context.hide()}}(),e.vakata.context.settings.hide_onmouseleave))}).on("click","a",function(t){t.preventDefault(),e(this).blur().parent().hasClass("vakata-context-disabled")||!1===e.vakata.context._execute(e(this).attr("rel"))||e.vakata.context.hide()}).on("keydown","a",function(t){var r=null;switch(t.which){case 13:case 32:t.type="click",t.preventDefault(),e(t.currentTarget).trigger(t);break;case 37:n.is_visible&&(n.element.find(".vakata-context-hover").last().closest("li").first().find("ul").hide().find(".vakata-context-hover").removeClass("vakata-context-hover").end().end().children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 38:n.is_visible&&(r=n.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").prevAll("li:not(.vakata-context-separator)").first(),r.length||(r=n.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").last()),r.addClass("vakata-context-hover").children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 39:n.is_visible&&(n.element.find(".vakata-context-hover").last().children("ul").show().children("li:not(.vakata-context-separator)").removeClass("vakata-context-hover").first().addClass("vakata-context-hover").children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 40:n.is_visible&&(r=n.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").nextAll("li:not(.vakata-context-separator)").first(),r.length||(r=n.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").first()),r.addClass("vakata-context-hover").children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 27:e.vakata.context.hide(),t.preventDefault()}}).on("keydown",function(e){e.preventDefault();var t=n.element.find(".vakata-contextmenu-shortcut-"+e.which).parent();t.parent().not(".vakata-context-disabled")&&t.click()}),e(l).on("mousedown.vakata.jstree",function(t){n.is_visible&&n.element[0]!==t.target&&!e.contains(n.element[0],t.target)&&e.vakata.context.hide()}).on("context_show.vakata.jstree",function(e,r){n.element.find("li:has(ul)").children("a").addClass("vakata-context-parent"),t&&n.element.addClass("vakata-context-rtl").css("direction","rtl"),n.element.find("ul").hide().end()})})}(e),e.jstree.defaults.dnd={copy:!0,open_timeout:500,is_draggable:!0,check_while_dragging:!0,always_copy:!1,inside_pos:0,drag_selection:!0,touch:!0,large_drop_target:!1,large_drag_target:!1,use_html5:!1};var c,d;e.jstree.plugins.dnd=function(t,n){this.init=function(e,t){n.init.call(this,e,t),this.settings.dnd.use_html5=this.settings.dnd.use_html5&&"draggable"in l.createElement("span")},this.bind=function(){n.bind.call(this),this.element.on(this.settings.dnd.use_html5?"dragstart.jstree":"mousedown.jstree touchstart.jstree",this.settings.dnd.large_drag_target?".jstree-node":".jstree-anchor",e.proxy(function(t){if(this.settings.dnd.large_drag_target&&e(t.target).closest(".jstree-node")[0]!==t.currentTarget)return!0;if("touchstart"===t.type&&(!this.settings.dnd.touch||"selected"===this.settings.dnd.touch&&!e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").hasClass("jstree-clicked")))return!0;var n=this.get_node(t.target),r=this.is_selected(n)&&this.settings.dnd.drag_selection?this.get_top_selected().length:1,o=r>1?r+" "+this.get_string("nodes"):this.get_text(t.currentTarget);if(this.settings.core.force_text&&(o=e.vakata.html.escape(o)),n&&n.id&&n.id!==e.jstree.root&&(1===t.which||"touchstart"===t.type||"dragstart"===t.type)&&(!0===this.settings.dnd.is_draggable||e.isFunction(this.settings.dnd.is_draggable)&&this.settings.dnd.is_draggable.call(this,r>1?this.get_top_selected(!0):[n],t))){if(c={jstree:!0,origin:this,obj:this.get_node(n,!0),nodes:r>1?this.get_top_selected():[n.id]},d=t.currentTarget,!this.settings.dnd.use_html5)return this.element.trigger("mousedown.jstree"),e.vakata.dnd.start(t,c,'<div id="jstree-dnd" class="jstree-'+this.get_theme()+" jstree-"+this.get_theme()+"-"+this.get_theme_variant()+" "+(this.settings.core.themes.responsive?" jstree-dnd-responsive":"")+'"><i class="jstree-icon jstree-er"></i>'+o+'<ins class="jstree-copy" style="display:none;">+</ins></div>');e.vakata.dnd._trigger("start",t,{helper:e(),element:d,data:c})}},this)),this.settings.dnd.use_html5&&this.element.on("dragover.jstree",function(t){return t.preventDefault(),e.vakata.dnd._trigger("move",t,{helper:e(),element:d,data:c}),!1}).on("drop.jstree",e.proxy(function(t){return t.preventDefault(),e.vakata.dnd._trigger("stop",t,{helper:e(),element:d,data:c}),!1},this))},this.redraw_node=function(e,t,r,o){if((e=n.redraw_node.apply(this,arguments))&&this.settings.dnd.use_html5)if(this.settings.dnd.large_drag_target)e.setAttribute("draggable",!0);else{var a,i,s=null;for(a=0,i=e.childNodes.length;i>a;a++)if(e.childNodes[a]&&e.childNodes[a].className&&-1!==e.childNodes[a].className.indexOf("jstree-anchor")){s=e.childNodes[a];break}s&&s.setAttribute("draggable",!0)}return e}},e(function(){var n=!1,r=!1,o=!1,a=!1,i=e('<div id="jstree-marker">&#160;</div>').hide();e(l).on("dnd_start.vakata.jstree",function(e,t){n=!1,o=!1,t&&t.data&&t.data.jstree&&i.appendTo("body")}).on("dnd_move.vakata.jstree",function(s,l){var u=l.event.target!==o.target;if(a&&(!l.event||"dragover"!==l.event.type||u)&&clearTimeout(a),l&&l.data&&l.data.jstree&&(!l.event.target.id||"jstree-marker"!==l.event.target.id)){o=l.event;var c,d,p,f,h,m,y,g,v,b,_,w,x,S,C,k,E=e.jstree.reference(l.event.target),M=!1,A=!1,T=!1;if(E&&E._data&&E._data.dnd)if(i.attr("class","jstree-"+E.get_theme()+(E.settings.core.themes.responsive?" jstree-dnd-responsive":"")),C=l.data.origin&&(l.data.origin.settings.dnd.always_copy||l.data.origin.settings.dnd.copy&&(l.event.metaKey||l.event.ctrlKey)),l.helper.children().attr("class","jstree-"+E.get_theme()+" jstree-"+E.get_theme()+"-"+E.get_theme_variant()+" "+(E.settings.core.themes.responsive?" jstree-dnd-responsive":"")).find(".jstree-copy").first()[C?"show":"hide"](),l.event.target!==E.element[0]&&l.event.target!==E.get_container_ul()[0]||0!==E.get_container_ul().children().length){if((M=E.settings.dnd.large_drop_target?e(l.event.target).closest(".jstree-node").children(".jstree-anchor"):e(l.event.target).closest(".jstree-anchor"))&&M.length&&M.parent().is(".jstree-closed, .jstree-open, .jstree-leaf")&&(A=M.offset(),T=(l.event.pageY!==t?l.event.pageY:l.event.originalEvent.pageY)-A.top,p=M.outerHeight(),m=p/3>T?["b","i","a"]:T>p-p/3?["a","i","b"]:T>p/2?["i","a","b"]:["i","b","a"],e.each(m,function(t,o){switch(o){case"b":c=A.left-6,d=A.top,f=E.get_parent(M),h=M.parent().index();break;case"i":x=E.settings.dnd.inside_pos,S=E.get_node(M.parent()),c=A.left-2,d=A.top+p/2+1,f=S.id,h="first"===x?0:"last"===x?S.children.length:Math.min(x,S.children.length);break;case"a":c=A.left-6,d=A.top+p,f=E.get_parent(M),h=M.parent().index()+1}for(y=!0,g=0,v=l.data.nodes.length;v>g;g++)if(b=l.data.origin&&(l.data.origin.settings.dnd.always_copy||l.data.origin.settings.dnd.copy&&(l.event.metaKey||l.event.ctrlKey))?"copy_node":"move_node",_=h,"move_node"===b&&"a"===o&&l.data.origin&&l.data.origin===E&&f===E.get_parent(l.data.nodes[g])&&(w=E.get_node(f),_>e.inArray(l.data.nodes[g],w.children)&&(_-=1)),!(y=y&&(E&&E.settings&&E.settings.dnd&&!1===E.settings.dnd.check_while_dragging||E.check(b,l.data.origin&&l.data.origin!==E?l.data.origin.get_node(l.data.nodes[g]):l.data.nodes[g],f,_,{dnd:!0,ref:E.get_node(M.parent()),pos:o,origin:l.data.origin,is_multi:l.data.origin&&l.data.origin!==E,is_foreign:!l.data.origin})))){E&&E.last_error&&(r=E.last_error());break}return"i"===o&&M.parent().is(".jstree-closed")&&E.settings.dnd.open_timeout&&(!l.event||"dragover"!==l.event.type||u)&&(a&&clearTimeout(a),a=setTimeout(function(e,t){return function(){e.open_node(t)}}(E,M),E.settings.dnd.open_timeout)),y?(k=E.get_node(f,!0),k.hasClass(".jstree-dnd-parent")||(e(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),k.addClass("jstree-dnd-parent")),n={ins:E,par:f,pos:"i"!==o||"last"!==x||0!==h||E.is_loaded(S)?h:"last"},i.css({left:c+"px",top:d+"px"}).show(),l.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),l.event.originalEvent&&l.event.originalEvent.dataTransfer&&(l.event.originalEvent.dataTransfer.dropEffect=C?"copy":"move"),r={},m=!0,!1):void 0}),!0===m))return}else{for(y=!0,g=0,v=l.data.nodes.length;v>g&&(y=y&&E.check(l.data.origin&&(l.data.origin.settings.dnd.always_copy||l.data.origin.settings.dnd.copy&&(l.event.metaKey||l.event.ctrlKey))?"copy_node":"move_node",l.data.origin&&l.data.origin!==E?l.data.origin.get_node(l.data.nodes[g]):l.data.nodes[g],e.jstree.root,"last",{dnd:!0,ref:E.get_node(e.jstree.root),pos:"i",origin:l.data.origin,is_multi:l.data.origin&&l.data.origin!==E,is_foreign:!l.data.origin}));g++);if(y)return n={ins:E,par:e.jstree.root,pos:"last"},i.hide(),l.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),void(l.event.originalEvent&&l.event.originalEvent.dataTransfer&&(l.event.originalEvent.dataTransfer.dropEffect=C?"copy":"move"))}e(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),n=!1,l.helper.find(".jstree-icon").removeClass("jstree-ok").addClass("jstree-er"),l.event.originalEvent&&l.event.originalEvent.dataTransfer&&(l.event.originalEvent.dataTransfer.dropEffect="none"),i.hide()}}).on("dnd_scroll.vakata.jstree",function(e,t){t&&t.data&&t.data.jstree&&(i.hide(),n=!1,o=!1,t.helper.find(".jstree-icon").first().removeClass("jstree-ok").addClass("jstree-er"))}).on("dnd_stop.vakata.jstree",function(t,s){if(e(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),a&&clearTimeout(a),s&&s.data&&s.data.jstree){i.hide().detach();var l,u,c=[];if(n){for(l=0,u=s.data.nodes.length;u>l;l++)c[l]=s.data.origin?s.data.origin.get_node(s.data.nodes[l]):s.data.nodes[l];n.ins[s.data.origin&&(s.data.origin.settings.dnd.always_copy||s.data.origin.settings.dnd.copy&&(s.event.metaKey||s.event.ctrlKey))?"copy_node":"move_node"](c,n.par,n.pos,!1,!1,!1,s.data.origin)}else l=e(s.event.target).closest(".jstree"),l.length&&r&&r.error&&"check"===r.error&&(l=l.jstree(!0))&&l.settings.core.error.call(this,r);o=!1,n=!1}}).on("keyup.jstree keydown.jstree",function(t,s){(s=e.vakata.dnd._get())&&s.data&&s.data.jstree&&("keyup"===t.type&&27===t.which?(a&&clearTimeout(a),n=!1,r=!1,o=!1,a=!1,i.hide().detach(),e.vakata.dnd._clean()):(s.helper.find(".jstree-copy").first()[s.data.origin&&(s.data.origin.settings.dnd.always_copy||s.data.origin.settings.dnd.copy&&(t.metaKey||t.ctrlKey))?"show":"hide"](),o&&(o.metaKey=t.metaKey,o.ctrlKey=t.ctrlKey,e.vakata.dnd._trigger("move",o))))})}),function(e){e.vakata.html={div:e("<div />"),escape:function(t){return e.vakata.html.div.text(t).html()},strip:function(t){return e.vakata.html.div.empty().append(e.parseHTML(t)).text()}};var n={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1};e.vakata.dnd={settings:{scroll_speed:10,scroll_proximity:20,helper_left:5,helper_top:10,threshold:5,threshold_touch:50},_trigger:function(n,r,o){o===t&&(o=e.vakata.dnd._get()),o.event=r,e(l).triggerHandler("dnd_"+n+".vakata",o)},_get:function(){return{data:n.data,element:n.element,helper:n.helper}},_clean:function(){n.helper&&n.helper.remove(),n.scroll_i&&(clearInterval(n.scroll_i),n.scroll_i=!1),n={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1},e(l).off("mousemove.vakata.jstree touchmove.vakata.jstree",e.vakata.dnd.drag),e(l).off("mouseup.vakata.jstree touchend.vakata.jstree",e.vakata.dnd.stop)},_scroll:function(t){if(!n.scroll_e||!n.scroll_l&&!n.scroll_t)return n.scroll_i&&(clearInterval(n.scroll_i),n.scroll_i=!1),!1;if(!n.scroll_i)return n.scroll_i=setInterval(e.vakata.dnd._scroll,100),!1;if(!0===t)return!1;var r=n.scroll_e.scrollTop(),o=n.scroll_e.scrollLeft();n.scroll_e.scrollTop(r+n.scroll_t*e.vakata.dnd.settings.scroll_speed),n.scroll_e.scrollLeft(o+n.scroll_l*e.vakata.dnd.settings.scroll_speed),(r!==n.scroll_e.scrollTop()||o!==n.scroll_e.scrollLeft())&&e.vakata.dnd._trigger("scroll",n.scroll_e)},start:function(t,r,o){"touchstart"===t.type&&t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0]&&(t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,t.target=l.elementFromPoint(t.originalEvent.changedTouches[0].pageX-window.pageXOffset,t.originalEvent.changedTouches[0].pageY-window.pageYOffset)),n.is_drag&&e.vakata.dnd.stop({});try{t.currentTarget.unselectable="on",t.currentTarget.onselectstart=function(){return!1},t.currentTarget.style&&(t.currentTarget.style.touchAction="none",t.currentTarget.style.msTouchAction="none",t.currentTarget.style.MozUserSelect="none")}catch(e){}return n.init_x=t.pageX,n.init_y=t.pageY,n.data=r,n.is_down=!0,n.element=t.currentTarget,n.target=t.target,n.is_touch="touchstart"===t.type,!1!==o&&(n.helper=e("<div id='vakata-dnd'></div>").html(o).css({display:"block",margin:"0",padding:"0",position:"absolute",top:"-2000px",lineHeight:"16px",zIndex:"10000"})),e(l).on("mousemove.vakata.jstree touchmove.vakata.jstree",e.vakata.dnd.drag),e(l).on("mouseup.vakata.jstree touchend.vakata.jstree",e.vakata.dnd.stop),!1},drag:function(t){if("touchmove"===t.type&&t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0]&&(t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,t.target=l.elementFromPoint(t.originalEvent.changedTouches[0].pageX-window.pageXOffset,t.originalEvent.changedTouches[0].pageY-window.pageYOffset)),n.is_down){if(!n.is_drag){if(!(Math.abs(t.pageX-n.init_x)>(n.is_touch?e.vakata.dnd.settings.threshold_touch:e.vakata.dnd.settings.threshold)||Math.abs(t.pageY-n.init_y)>(n.is_touch?e.vakata.dnd.settings.threshold_touch:e.vakata.dnd.settings.threshold)))return;n.helper&&(n.helper.appendTo("body"),n.helper_w=n.helper.outerWidth()),n.is_drag=!0,e(n.target).one("click.vakata",!1),e.vakata.dnd._trigger("start",t)}var r=!1,o=!1,a=!1,i=!1,s=!1,u=!1,c=!1,d=!1,p=!1,f=!1;return n.scroll_t=0,n.scroll_l=0,n.scroll_e=!1,e(e(t.target).parentsUntil("body").addBack().get().reverse()).filter(function(){return/^auto|scroll$/.test(e(this).css("overflow"))&&(this.scrollHeight>this.offsetHeight||this.scrollWidth>this.offsetWidth)}).each(function(){var r=e(this),o=r.offset();return this.scrollHeight>this.offsetHeight&&(o.top+r.height()-t.pageY<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_t=1),t.pageY-o.top<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_t=-1)),this.scrollWidth>this.offsetWidth&&(o.left+r.width()-t.pageX<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_l=1),t.pageX-o.left<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_l=-1)),n.scroll_t||n.scroll_l?(n.scroll_e=e(this),!1):void 0}),n.scroll_e||(r=e(l),o=e(window),a=r.height(),i=o.height(),s=r.width(),u=o.width(),c=r.scrollTop(),d=r.scrollLeft(),a>i&&t.pageY-c<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_t=-1),a>i&&i-(t.pageY-c)<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_t=1),s>u&&t.pageX-d<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_l=-1),s>u&&u-(t.pageX-d)<e.vakata.dnd.settings.scroll_proximity&&(n.scroll_l=1),(n.scroll_t||n.scroll_l)&&(n.scroll_e=r)),n.scroll_e&&e.vakata.dnd._scroll(!0),n.helper&&(p=parseInt(t.pageY+e.vakata.dnd.settings.helper_top,10),f=parseInt(t.pageX+e.vakata.dnd.settings.helper_left,10),a&&p+25>a&&(p=a-50),s&&f+n.helper_w>s&&(f=s-(n.helper_w+2)),n.helper.css({left:f+"px",top:p+"px"})),e.vakata.dnd._trigger("move",t),!1}},stop:function(t){if("touchend"===t.type&&t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0]&&(t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,t.target=l.elementFromPoint(t.originalEvent.changedTouches[0].pageX-window.pageXOffset,t.originalEvent.changedTouches[0].pageY-window.pageYOffset)),n.is_drag)t.target!==n.target&&e(n.target).off("click.vakata"),e.vakata.dnd._trigger("stop",t);else if("touchend"===t.type&&t.target===n.target){var r=setTimeout(function(){e(t.target).click()},100);e(t.target).one("click",function(){r&&clearTimeout(r)})}return e.vakata.dnd._clean(),!1}}}(e),e.jstree.defaults.massload=null,e.jstree.plugins.massload=function(t,n){this.init=function(e,t){this._data.massload={},n.init.call(this,e,t)},this._load_nodes=function(t,r,o,a){var i,s,l,u=this.settings.massload,c=(JSON.stringify(t),[]),d=this._model.data;if(!o){for(i=0,s=t.length;s>i;i++)(!d[t[i]]||!d[t[i]].state.loaded&&!d[t[i]].state.failed||a)&&(c.push(t[i]),(l=this.get_node(t[i],!0))&&l.length&&l.addClass("jstree-loading").attr("aria-busy",!0));if(this._data.massload={},c.length){if(e.isFunction(u))return u.call(this,c,e.proxy(function(e){var i,s;if(e)for(i in e)e.hasOwnProperty(i)&&(this._data.massload[i]=e[i]);for(i=0,s=t.length;s>i;i++)(l=this.get_node(t[i],!0))&&l.length&&l.removeClass("jstree-loading").attr("aria-busy",!1);n._load_nodes.call(this,t,r,o,a)},this));if("object"==typeof u&&u&&u.url)return u=e.extend(!0,{},u),e.isFunction(u.url)&&(u.url=u.url.call(this,c)),e.isFunction(u.data)&&(u.data=u.data.call(this,c)),e.ajax(u).done(e.proxy(function(e,i,s){var u,c;if(e)for(u in e)e.hasOwnProperty(u)&&(this._data.massload[u]=e[u]);for(u=0,c=t.length;c>u;u++)(l=this.get_node(t[u],!0))&&l.length&&l.removeClass("jstree-loading").attr("aria-busy",!1);n._load_nodes.call(this,t,r,o,a)},this)).fail(e.proxy(function(e){n._load_nodes.call(this,t,r,o,a)},this))}}return n._load_nodes.call(this,t,r,o,a)},this._load_node=function(t,r){var o,a=this._data.massload[t.id],i=null;return a?(i=this["string"==typeof a?"_append_html_data":"_append_json_data"](t,"string"==typeof a?e(e.parseHTML(a)).filter(function(){return 3!==this.nodeType}):a,function(e){r.call(this,e)}),o=this.get_node(t.id,!0),o&&o.length&&o.removeClass("jstree-loading").attr("aria-busy",!1),delete this._data.massload[t.id],i):n._load_node.call(this,t,r)}},e.jstree.defaults.search={ajax:!1,fuzzy:!1,case_sensitive:!1,show_only_matches:!1,show_only_matches_children:!1,close_opened_onclear:!0,search_leaves_only:!1,search_callback:!1},e.jstree.plugins.search=function(n,r){this.bind=function(){r.bind.call(this),this._data.search.str="",this._data.search.dom=e(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=!1,this._data.search.smc=!1,this._data.search.hdn=[],this.element.on("search.jstree",e.proxy(function(t,n){if(this._data.search.som&&n.res.length){var r,o,a,i,s=this._model.data,l=[];for(r=0,o=n.res.length;o>r;r++)if(s[n.res[r]]&&!s[n.res[r]].state.hidden&&(l.push(n.res[r]),l=l.concat(s[n.res[r]].parents),this._data.search.smc))for(a=0,i=s[n.res[r]].children_d.length;i>a;a++)s[s[n.res[r]].children_d[a]]&&!s[s[n.res[r]].children_d[a]].state.hidden&&l.push(s[n.res[r]].children_d[a]);l=e.vakata.array_remove_item(e.vakata.array_unique(l),e.jstree.root),this._data.search.hdn=this.hide_all(!0),this.show_node(l,!0),this.redraw(!0)}},this)).on("clear_search.jstree",e.proxy(function(e,t){this._data.search.som&&t.res.length&&(this.show_node(this._data.search.hdn,!0),this.redraw(!0))},this))},this.search=function(n,r,o,a,i,s){if(!1===n||""===e.trim(n.toString()))return this.clear_search();a=this.get_node(a),a=a&&a.id?a.id:null,n=n.toString();var l,u,c=this.settings.search,d=!!c.ajax&&c.ajax,p=this._model.data,f=null,h=[],m=[];if(this._data.search.res.length&&!i&&this.clear_search(),o===t&&(o=c.show_only_matches),s===t&&(s=c.show_only_matches_children),!r&&!1!==d)return e.isFunction(d)?d.call(this,n,e.proxy(function(t){t&&t.d&&(t=t.d),this._load_nodes(e.isArray(t)?e.vakata.array_unique(t):[],function(){this.search(n,!0,o,a,i,s)})},this),a):(d=e.extend({},d),d.data||(d.data={}),d.data.str=n,a&&(d.data.inside=a),this._data.search.lastRequest&&this._data.search.lastRequest.abort(),this._data.search.lastRequest=e.ajax(d).fail(e.proxy(function(){this._data.core.last_error={error:"ajax",plugin:"search",id:"search_01",reason:"Could not load search parents",data:JSON.stringify(d)},this.settings.core.error.call(this,this._data.core.last_error)},this)).done(e.proxy(function(t){t&&t.d&&(t=t.d),this._load_nodes(e.isArray(t)?e.vakata.array_unique(t):[],function(){this.search(n,!0,o,a,i,s)})},this)),this._data.search.lastRequest);if(i||(this._data.search.str=n,this._data.search.dom=e(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=o,this._data.search.smc=s),f=new e.vakata.search(n,!0,{caseSensitive:c.case_sensitive,fuzzy:c.fuzzy}),e.each(p[a||e.jstree.root].children_d,function(e,t){var r=p[t];r.text&&!r.state.hidden&&(!c.search_leaves_only||r.state.loaded&&0===r.children.length)&&(c.search_callback&&c.search_callback.call(this,n,r)||!c.search_callback&&f.search(r.text).isMatch)&&(h.push(t),m=m.concat(r.parents))}),h.length){for(m=e.vakata.array_unique(m),l=0,u=m.length;u>l;l++)m[l]!==e.jstree.root&&p[m[l]]&&!0===this.open_node(m[l],null,0)&&this._data.search.opn.push(m[l]);i?(this._data.search.dom=this._data.search.dom.add(e(this.element[0].querySelectorAll("#"+e.map(h,function(t){return-1!=="0123456789".indexOf(t[0])?"\\3"+t[0]+" "+t.substr(1).replace(e.jstree.idregex,"\\$&"):t.replace(e.jstree.idregex,"\\$&")}).join(", #")))),this._data.search.res=e.vakata.array_unique(this._data.search.res.concat(h))):(this._data.search.dom=e(this.element[0].querySelectorAll("#"+e.map(h,function(t){return-1!=="0123456789".indexOf(t[0])?"\\3"+t[0]+" "+t.substr(1).replace(e.jstree.idregex,"\\$&"):t.replace(e.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.res=h),this._data.search.dom.children(".jstree-anchor").addClass("jstree-search")}this.trigger("search",{nodes:this._data.search.dom,str:n,res:this._data.search.res,show_only_matches:o})},this.clear_search=function(){this.settings.search.close_opened_onclear&&this.close_node(this._data.search.opn,0),this.trigger("clear_search",{nodes:this._data.search.dom,str:this._data.search.str,res:this._data.search.res}),this._data.search.res.length&&(this._data.search.dom=e(this.element[0].querySelectorAll("#"+e.map(this._data.search.res,function(t){return-1!=="0123456789".indexOf(t[0])?"\\3"+t[0]+" "+t.substr(1).replace(e.jstree.idregex,"\\$&"):t.replace(e.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.dom.children(".jstree-anchor").removeClass("jstree-search")),this._data.search.str="",this._data.search.res=[],this._data.search.opn=[],this._data.search.dom=e()},this.redraw_node=function(t,n,o,a){if((t=r.redraw_node.apply(this,arguments))&&-1!==e.inArray(t.id,this._data.search.res)){var i,s,l=null;for(i=0,s=t.childNodes.length;s>i;i++)if(t.childNodes[i]&&t.childNodes[i].className&&-1!==t.childNodes[i].className.indexOf("jstree-anchor")){l=t.childNodes[i];break}l&&(l.className+=" jstree-search")}return t}},function(e){e.vakata.search=function(t,n,r){r=r||{},r=e.extend({},e.vakata.search.defaults,r),!1!==r.fuzzy&&(r.fuzzy=!0),t=r.caseSensitive?t:t.toLowerCase();var o,a,i,s,l=r.location,u=r.distance,c=r.threshold,d=t.length;return d>32&&(r.fuzzy=!1),r.fuzzy&&(o=1<<d-1,a=function(){var e={},n=0;for(n=0;d>n;n++)e[t.charAt(n)]=0;for(n=0;d>n;n++)e[t.charAt(n)]|=1<<d-n-1;return e}(),i=function(e,t){var n=e/d,r=Math.abs(l-t);return u?n+r/u:r?1:n}),s=function(e){if(e=r.caseSensitive?e:e.toLowerCase(),t===e||-1!==e.indexOf(t))return{isMatch:!0,score:0};if(!r.fuzzy)return{isMatch:!1,score:1};var n,s,u,p,f,h,m,y,g,v=e.length,b=c,_=e.indexOf(t,l),w=d+v,x=1,S=[];for(-1!==_&&(b=Math.min(i(0,_),b),-1!==(_=e.lastIndexOf(t,l+d))&&(b=Math.min(i(0,_),b))),_=-1,n=0;d>n;n++){for(u=0,p=w;p>u;)i(n,l+p)<=b?u=p:w=p,p=Math.floor((w-u)/2+u);for(w=p,h=Math.max(1,l-p+1),m=Math.min(l+p,v)+d,y=new Array(m+2),y[m+1]=(1<<n)-1,s=m;s>=h;s--)if(g=a[e.charAt(s-1)],y[s]=0===n?(y[s+1]<<1|1)&g:(y[s+1]<<1|1)&g|(f[s+1]|f[s])<<1|1|f[s+1],y[s]&o&&(x=i(n,s-1),b>=x)){if(b=x,_=s-1,S.push(_),!(_>l))break;h=Math.max(1,2*l-_)}if(i(n+1,l)>b)break;f=y}return{isMatch:_>=0,score:x}},!0===n?{search:s}:s(n)},e.vakata.search.defaults={location:0,distance:100,threshold:.6,fuzzy:!1,caseSensitive:!1}}(e),e.jstree.defaults.sort=function(e,t){return this.get_text(e)>this.get_text(t)?1:-1},e.jstree.plugins.sort=function(t,n){this.bind=function(){n.bind.call(this),this.element.on("model.jstree",e.proxy(function(e,t){this.sort(t.parent,!0)},this)).on("rename_node.jstree create_node.jstree",e.proxy(function(e,t){this.sort(t.parent||t.node.parent,!1),this.redraw_node(t.parent||t.node.parent,!0)},this)).on("move_node.jstree copy_node.jstree",e.proxy(function(e,t){this.sort(t.parent,!1),this.redraw_node(t.parent,!0)},this))},this.sort=function(t,n){var r,o;if((t=this.get_node(t))&&t.children&&t.children.length&&(t.children.sort(e.proxy(this.settings.sort,this)),n))for(r=0,o=t.children_d.length;o>r;r++)this.sort(t.children_d[r],!1)}};var p=!1;e.jstree.defaults.state={key:"jstree",events:"changed.jstree open_node.jstree close_node.jstree check_node.jstree uncheck_node.jstree",ttl:!1,filter:!1},e.jstree.plugins.state=function(t,n){this.bind=function(){n.bind.call(this);var t=e.proxy(function(){this.element.on(this.settings.state.events,e.proxy(function(){p&&clearTimeout(p),p=setTimeout(e.proxy(function(){this.save_state()},this),100)},this)),this.trigger("state_ready")},this);this.element.on("ready.jstree",e.proxy(function(e,n){this.element.one("restore_state.jstree",t),this.restore_state()||t()},this))},this.save_state=function(){var t={state:this.get_state(),ttl:this.settings.state.ttl,sec:+new Date};e.vakata.storage.set(this.settings.state.key,JSON.stringify(t))},this.restore_state=function(){var t=e.vakata.storage.get(this.settings.state.key);if(t)try{t=JSON.parse(t)}catch(e){return!1}return!(t&&t.ttl&&t.sec&&+new Date-t.sec>t.ttl)&&(t&&t.state&&(t=t.state),t&&e.isFunction(this.settings.state.filter)&&(t=this.settings.state.filter.call(this,t)),!!t&&(this.element.one("set_state.jstree",function(n,r){r.instance.trigger("restore_state",{state:e.extend(!0,{},t)})}),this.set_state(t),!0))},this.clear_state=function(){return e.vakata.storage.del(this.settings.state.key)}},function(e,t){e.vakata.storage={set:function(e,t){return window.localStorage.setItem(e,t)},get:function(e){return window.localStorage.getItem(e)},del:function(e){return window.localStorage.removeItem(e)}}}(e),e.jstree.defaults.types={default:{}},e.jstree.defaults.types[e.jstree.root]={},e.jstree.plugins.types=function(n,r){this.init=function(n,o){var a,i;if(o&&o.types&&o.types.default)for(a in o.types)if("default"!==a&&a!==e.jstree.root&&o.types.hasOwnProperty(a))for(i in o.types.default)o.types.default.hasOwnProperty(i)&&o.types[a][i]===t&&(o.types[a][i]=o.types.default[i]);r.init.call(this,n,o),this._model.data[e.jstree.root].type=e.jstree.root},this.refresh=function(t,n){r.refresh.call(this,t,n),this._model.data[e.jstree.root].type=e.jstree.root},this.bind=function(){this.element.on("model.jstree",e.proxy(function(n,r){var o,a,i,s=this._model.data,l=r.nodes,u=this.settings.types,c="default";for(o=0,a=l.length;a>o;o++){if(c="default",s[l[o]].original&&s[l[o]].original.type&&u[s[l[o]].original.type]&&(c=s[l[o]].original.type),s[l[o]].data&&s[l[o]].data.jstree&&s[l[o]].data.jstree.type&&u[s[l[o]].data.jstree.type]&&(c=s[l[o]].data.jstree.type),s[l[o]].type=c,!0===s[l[o]].icon&&u[c].icon!==t&&(s[l[o]].icon=u[c].icon),u[c].li_attr!==t&&"object"==typeof u[c].li_attr)for(i in u[c].li_attr)if(u[c].li_attr.hasOwnProperty(i)){if("id"===i)continue;s[l[o]].li_attr[i]===t?s[l[o]].li_attr[i]=u[c].li_attr[i]:"class"===i&&(s[l[o]].li_attr.class=u[c].li_attr.class+" "+s[l[o]].li_attr.class)}if(u[c].a_attr!==t&&"object"==typeof u[c].a_attr)for(i in u[c].a_attr)if(u[c].a_attr.hasOwnProperty(i)){if("id"===i)continue;s[l[o]].a_attr[i]===t?s[l[o]].a_attr[i]=u[c].a_attr[i]:"href"===i&&"#"===s[l[o]].a_attr[i]?s[l[o]].a_attr.href=u[c].a_attr.href:"class"===i&&(s[l[o]].a_attr.class=u[c].a_attr.class+" "+s[l[o]].a_attr.class)}}s[e.jstree.root].type=e.jstree.root},this)),r.bind.call(this)},this.get_json=function(t,n,o){var a,i,s=this._model.data,l=n?e.extend(!0,{},n,{no_id:!1}):{},u=r.get_json.call(this,t,l,o);if(!1===u)return!1;if(e.isArray(u))for(a=0,i=u.length;i>a;a++)u[a].type=u[a].id&&s[u[a].id]&&s[u[a].id].type?s[u[a].id].type:"default",n&&n.no_id&&(delete u[a].id,u[a].li_attr&&u[a].li_attr.id&&delete u[a].li_attr.id,u[a].a_attr&&u[a].a_attr.id&&delete u[a].a_attr.id);else u.type=u.id&&s[u.id]&&s[u.id].type?s[u.id].type:"default",n&&n.no_id&&(u=this._delete_ids(u));return u},this._delete_ids=function(t){if(e.isArray(t)){for(var n=0,r=t.length;r>n;n++)t[n]=this._delete_ids(t[n]);return t}return delete t.id,t.li_attr&&t.li_attr.id&&delete t.li_attr.id,t.a_attr&&t.a_attr.id&&delete t.a_attr.id,t.children&&e.isArray(t.children)&&(t.children=this._delete_ids(t.children)),t},this.check=function(n,o,a,i,s){if(!1===r.check.call(this,n,o,a,i,s))return!1;o=o&&o.id?o:this.get_node(o),a=a&&a.id?a:this.get_node(a);var l,u,c,d,p=o&&o.id?s&&s.origin?s.origin:e.jstree.reference(o.id):null;switch(p=p&&p._model&&p._model.data?p._model.data:null,n){case"create_node":case"move_node":case"copy_node":if("move_node"!==n||-1===e.inArray(o.id,a.children)){if(l=this.get_rules(a),l.max_children!==t&&-1!==l.max_children&&l.max_children===a.children.length)return this._data.core.last_error={error:"check",plugin:"types",id:"types_01",reason:"max_children prevents function: "+n,data:JSON.stringify({chk:n,pos:i,obj:!(!o||!o.id)&&o.id,par:!(!a||!a.id)&&a.id})},!1;if(l.valid_children!==t&&-1!==l.valid_children&&-1===e.inArray(o.type||"default",l.valid_children))return this._data.core.last_error={error:"check",plugin:"types",id:"types_02",reason:"valid_children prevents function: "+n,data:JSON.stringify({chk:n,pos:i,obj:!(!o||!o.id)&&o.id,par:!(!a||!a.id)&&a.id})},!1;if(p&&o.children_d&&o.parents){for(u=0,c=0,d=o.children_d.length;d>c;c++)u=Math.max(u,p[o.children_d[c]].parents.length);u=u-o.parents.length+1}(0>=u||u===t)&&(u=1);do{if(l.max_depth!==t&&-1!==l.max_depth&&l.max_depth<u)return this._data.core.last_error={error:"check",plugin:"types",id:"types_03",reason:"max_depth prevents function: "+n,data:JSON.stringify({chk:n,pos:i,obj:!(!o||!o.id)&&o.id,par:!(!a||!a.id)&&a.id})},!1;a=this.get_node(a.parent),l=this.get_rules(a),u++}while(a)}}return!0},this.get_rules=function(e){if(!(e=this.get_node(e)))return!1;var n=this.get_type(e,!0);return n.max_depth===t&&(n.max_depth=-1),n.max_children===t&&(n.max_children=-1),n.valid_children===t&&(n.valid_children=-1),n},this.get_type=function(t,n){return!!(t=this.get_node(t))&&(n?e.extend({type:t.type},this.settings.types[t.type]):t.type)},this.set_type=function(n,r){var o,a,i,s,l,u,c,d,p=this._model.data;if(e.isArray(n)){for(n=n.slice(),a=0,i=n.length;i>a;a++)this.set_type(n[a],r);return!0}if(o=this.settings.types,n=this.get_node(n),!o[r]||!n)return!1;if(c=this.get_node(n,!0),c&&c.length&&(d=c.children(".jstree-anchor")),s=n.type,l=this.get_icon(n),n.type=r,(!0===l||!o[s]||o[s].icon!==t&&l===o[s].icon)&&this.set_icon(n,o[r].icon===t||o[r].icon),o[s]&&o[s].li_attr!==t&&"object"==typeof o[s].li_attr)for(u in o[s].li_attr)if(o[s].li_attr.hasOwnProperty(u)){if("id"===u)continue;"class"===u?(p[n.id].li_attr.class=(p[n.id].li_attr.class||"").replace(o[s].li_attr[u],""),c&&c.removeClass(o[s].li_attr[u])):p[n.id].li_attr[u]===o[s].li_attr[u]&&(p[n.id].li_attr[u]=null,c&&c.removeAttr(u))}if(o[s]&&o[s].a_attr!==t&&"object"==typeof o[s].a_attr)for(u in o[s].a_attr)if(o[s].a_attr.hasOwnProperty(u)){if("id"===u)continue;"class"===u?(p[n.id].a_attr.class=(p[n.id].a_attr.class||"").replace(o[s].a_attr[u],""),d&&d.removeClass(o[s].a_attr[u])):p[n.id].a_attr[u]===o[s].a_attr[u]&&("href"===u?(p[n.id].a_attr[u]="#",d&&d.attr("href","#")):(delete p[n.id].a_attr[u],d&&d.removeAttr(u)))}if(o[r].li_attr!==t&&"object"==typeof o[r].li_attr)for(u in o[r].li_attr)if(o[r].li_attr.hasOwnProperty(u)){if("id"===u)continue;p[n.id].li_attr[u]===t?(p[n.id].li_attr[u]=o[r].li_attr[u],c&&("class"===u?c.addClass(o[r].li_attr[u]):c.attr(u,o[r].li_attr[u]))):"class"===u&&(p[n.id].li_attr.class=o[r].li_attr[u]+" "+p[n.id].li_attr.class,c&&c.addClass(o[r].li_attr[u]))}if(o[r].a_attr!==t&&"object"==typeof o[r].a_attr)for(u in o[r].a_attr)if(o[r].a_attr.hasOwnProperty(u)){if("id"===u)continue;p[n.id].a_attr[u]===t?(p[n.id].a_attr[u]=o[r].a_attr[u],d&&("class"===u?d.addClass(o[r].a_attr[u]):d.attr(u,o[r].a_attr[u]))):"href"===u&&"#"===p[n.id].a_attr[u]?(p[n.id].a_attr.href=o[r].a_attr.href,d&&d.attr("href",o[r].a_attr.href)):"class"===u&&(p[n.id].a_attr.class=o[r].a_attr.class+" "+p[n.id].a_attr.class,d&&d.addClass(o[r].a_attr[u]))}return!0}},e.jstree.defaults.unique={case_sensitive:!1,duplicate:function(e,t){return e+" ("+t+")"}},e.jstree.plugins.unique=function(n,r){this.check=function(t,n,o,a,i){if(!1===r.check.call(this,t,n,o,a,i))return!1;if(n=n&&n.id?n:this.get_node(n),!(o=o&&o.id?o:this.get_node(o))||!o.children)return!0;var s,l,u="rename_node"===t?a:n.text,c=[],d=this.settings.unique.case_sensitive,p=this._model.data;for(s=0,l=o.children.length;l>s;s++)c.push(d?p[o.children[s]].text:p[o.children[s]].text.toLowerCase());switch(d||(u=u.toLowerCase()),t){case"delete_node":return!0;case"rename_node":return s=-1===e.inArray(u,c)||n.text&&n.text[d?"toString":"toLowerCase"]()===u,s||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_01",reason:"Child with name "+u+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:a,obj:!(!n||!n.id)&&n.id,par:!(!o||!o.id)&&o.id})}),s;case"create_node":return s=-1===e.inArray(u,c),s||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_04",reason:"Child with name "+u+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:a,obj:!(!n||!n.id)&&n.id,par:!(!o||!o.id)&&o.id})}),s;case"copy_node":return s=-1===e.inArray(u,c),s||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_02",reason:"Child with name "+u+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:a,obj:!(!n||!n.id)&&n.id,par:!(!o||!o.id)&&o.id})}),s;case"move_node":return s=n.parent===o.id&&(!i||!i.is_multi)||-1===e.inArray(u,c),s||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_03",reason:"Child with name "+u+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:a,obj:!(!n||!n.id)&&n.id,par:!(!o||!o.id)&&o.id})}),s}return!0},this.create_node=function(n,o,a,i,s){if(!o||o.text===t){if(null===n&&(n=e.jstree.root),!(n=this.get_node(n)))return r.create_node.call(this,n,o,a,i,s);if(a=a===t?"last":a,!a.toString().match(/^(before|after)$/)&&!s&&!this.is_loaded(n))return r.create_node.call(this,n,o,a,i,s);o||(o={});var l,u,c,d,p,f=this._model.data,h=this.settings.unique.case_sensitive,m=this.settings.unique.duplicate;for(u=l=this.get_string("New node"),c=[],d=0,p=n.children.length;p>d;d++)c.push(h?f[n.children[d]].text:f[n.children[d]].text.toLowerCase());for(d=1;-1!==e.inArray(h?u:u.toLowerCase(),c);)u=m.call(this,l,++d).toString();o.text=u}return r.create_node.call(this,n,o,a,i,s)}};var f=l.createElement("DIV");if(f.setAttribute("unselectable","on"),f.setAttribute("role","presentation"),f.className="jstree-wholerow",f.innerHTML="&#160;",e.jstree.plugins.wholerow=function(t,n){this.bind=function(){n.bind.call(this),this.element.on("ready.jstree set_state.jstree",e.proxy(function(){this.hide_dots()},this)).on("init.jstree loading.jstree ready.jstree",e.proxy(function(){this.get_container_ul().addClass("jstree-wholerow-ul")},this)).on("deselect_all.jstree",e.proxy(function(e,t){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked")},this)).on("changed.jstree",e.proxy(function(e,t){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked");var n,r,o=!1;for(n=0,r=t.selected.length;r>n;n++)(o=this.get_node(t.selected[n],!0))&&o.length&&o.children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("open_node.jstree",e.proxy(function(e,t){this.get_node(t.node,!0).find(".jstree-clicked").parent().children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("hover_node.jstree dehover_node.jstree",e.proxy(function(e,t){"hover_node"===e.type&&this.is_disabled(t.node)||this.get_node(t.node,!0).children(".jstree-wholerow")["hover_node"===e.type?"addClass":"removeClass"]("jstree-wholerow-hovered")},this)).on("contextmenu.jstree",".jstree-wholerow",e.proxy(function(t){if(this._data.contextmenu){t.preventDefault();var n=e.Event("contextmenu",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,pageX:t.pageX,pageY:t.pageY});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(n)}},this)).on("click.jstree",".jstree-wholerow",function(t){t.stopImmediatePropagation();var n=e.Event("click",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(n).focus()}).on("dblclick.jstree",".jstree-wholerow",function(t){t.stopImmediatePropagation();var n=e.Event("dblclick",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(n).focus()}).on("click.jstree",".jstree-leaf > .jstree-ocl",e.proxy(function(t){t.stopImmediatePropagation();var n=e.Event("click",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(n).focus()},this)).on("mouseover.jstree",".jstree-wholerow, .jstree-icon",e.proxy(function(e){return e.stopImmediatePropagation(),this.is_disabled(e.currentTarget)||this.hover_node(e.currentTarget),!1},this)).on("mouseleave.jstree",".jstree-node",e.proxy(function(e){this.dehover_node(e.currentTarget)},this))},this.teardown=function(){this.settings.wholerow&&this.element.find(".jstree-wholerow").remove(),n.teardown.call(this)},this.redraw_node=function(t,r,o,a){if(t=n.redraw_node.apply(this,arguments)){var i=f.cloneNode(!0);-1!==e.inArray(t.id,this._data.core.selected)&&(i.className+=" jstree-wholerow-clicked"),this._data.core.focused&&this._data.core.focused===t.id&&(i.className+=" jstree-wholerow-hovered"),t.insertBefore(i,t.childNodes[0])}return t}},l.registerElement&&Object&&Object.create){var h=Object.create(HTMLElement.prototype);h.createdCallback=function(){var t,n={core:{},plugins:[]};for(t in e.jstree.plugins)e.jstree.plugins.hasOwnProperty(t)&&this.attributes[t]&&(n.plugins.push(t),this.getAttribute(t)&&JSON.parse(this.getAttribute(t))&&(n[t]=JSON.parse(this.getAttribute(t))));for(t in e.jstree.defaults.core)e.jstree.defaults.core.hasOwnProperty(t)&&this.attributes[t]&&(n.core[t]=JSON.parse(this.getAttribute(t))||this.getAttribute(t));e(this).jstree(n)};try{l.registerElement("vakata-jstree",{prototype:h})}catch(e){}}}})},function(e,t){},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=n(1),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(l),c=n(13),d=n(33),p=n(858),f=function(e){return e&&e.__esModule?e:{default:e}}(p),h=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":s(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},m=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.percentile=n.props.percentile,n.pvalueThreshold=String(n.props.pvalueThreshold),n.scoreThreshold=String(n.props.scoreThreshold),n.percentileOptions=[{label:"50%",value:50},{label:"75%",value:75},{label:"100%",value:100}],n.percentileChange=n.percentileChange.bind(n),n.applyFilter=n.applyFilter.bind(n),n}return a(t,e),i(t,[{key:"percentileChange",value:function(e){this.percentile=e?e.value:75}},{key:"applyFilter",value:function(){var e=this.pvalueThreshold?Number(this.pvalueThreshold):NaN,t=this.scoreThreshold?Number(this.scoreThreshold):NaN;Number.isNaN(e)||Number.isNaN(t)||this.props.onApply(this.percentile,e,t)}},{key:"render",value:function(){var e=this;return u.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center",width:"100%",background:"#eee",padding:"10px 10px"}},u.createElement("div",{style:{display:"flex",flexDirection:"column"}},u.createElement("label",{htmlFor:"GSVAScore"},"GSVA score"),u.createElement("input",{id:"GSVAScore",type:"string",value:this.scoreThreshold,style:{width:160,height:36,padding:10},onChange:function(t){return e.scoreThreshold=t.target.value},step:"0.1"})),u.createElement("div",{style:{display:"flex",flexDirection:"column"}},u.createElement("label",{htmlFor:"Pvalue"},"P-value"),u.createElement("input",{id:"Pvalue",type:"string",value:this.pvalueThreshold,style:{width:160,height:36,padding:10},onChange:function(t){return e.pvalueThreshold=t.target.value},step:"0.01",min:"0"})),u.createElement("div",null,u.createElement("label",{htmlFor:"PercentileScoreCalculation"},"Percentile for score calculation"),u.createElement(f.default,{addLabelText:"Percentile for score calculation",style:{width:160,borderRadius:"2px"},clearable:!1,name:"PercentileScoreCalculation",value:this.percentile,options:this.percentileOptions,onChange:this.percentileChange})),u.createElement("div",null,u.createElement("button",{id:"filterButton",className:"btn btn-primary btn-sm",style:{padding:"20px 18px"},onClick:this.applyFilter},"Apply Filter")))}}]),t}(u.Component);h([c.observable],m.prototype,"percentile",void 0),h([c.observable],m.prototype,"pvalueThreshold",void 0),h([c.observable],m.prototype,"scoreThreshold",void 0),m=h([d.observer],m),t.default=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=n(1),d=o(c),p=n(864),f=r(p),h=n(855),m=o(h),y=n(13),g=n(33),v=n(178),b=r(v),_=n(860),w=n(858),x=r(w),S=n(854),C=r(S),k=n(862),E=n(175),M=n(863),A=r(M),T=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},O=m,P=function(e){function t(){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),t}(b.default),j=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.percentileOptions=[{label:"50%",value:"50"},{label:"75%",value:"75"},{label:"100%",value:"100"}],n.percentileChange=n.percentileChange.bind(n),n.updateSelectionFromPlot=n.updateSelectionFromPlot.bind(n),n}return s(t,e),l(t,[{key:"percentileChange",value:function(e){this.store.volcanoPlotSelectedPercentile=e||{label:"75%",value:"75"}}},{key:"updateSelectionFromPlot",value:function(e,t){var n=this,r=e&&e[0].data?e[0].data:[];this.store.volcanoPlotTableData.result.map(function(e){var t=e.representativeScore,o=e.representativePvalue,a=e.name,i=t,s=-Math.log(o)/Math.log(10),l=!0,u=!1,c=void 0;try{for(var d,p=r[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var f=d.value;f.x===i&&f.y===s&&n.store.map_genesets_selected_volcano.set(a,!0)}}catch(e){u=!0,c=e}finally{try{!l&&p.return&&p.return()}finally{if(u)throw c}}})}},{key:"render",value:function(){var e=this;return d.createElement("div",{className:O.GenesetsVolcanoSelectorWindow,style:{height:"400px"}},d.createElement("div",{style:{float:"left"},className:"form-inline"},d.createElement("label",{htmlFor:"PercentileScoreCalculation"},"Percentile for score calculation:"),d.createElement("span",{style:{display:"inline-block",verticalAlign:"middle",marginLeft:"1em"}},d.createElement(x.default,{addLabelText:"Percentile for score calculation",style:{width:160,borderRadius:"2px"},clearable:!1,name:"PercentileScoreCalculation",value:this.store.volcanoPlotSelectedPercentile,options:this.percentileOptions,onChange:this.percentileChange})),d.createElement(C.default,{isLoading:!(this.props.plotData&&this.props.maxY&&this.store.volcanoPlotTableData.isComplete&&this.props.data)}),this.store.volcanoPlotGraphData&&this.store.minYVolcanoPlot&&this.props.plotData&&this.props.maxY&&this.store.volcanoPlotTableData.isComplete&&this.props.data&&d.createElement(k.VictoryChart,{theme:A.default,width:510,height:350,containerComponent:d.createElement(k.VictorySelectionContainer,{onSelection:this.updateSelectionFromPlot,selectionStyle:{fill:"tomato",fillOpacity:.5,stroke:"tomato",strokeWidth:2}})},d.createElement(k.VictoryAxis,{crossAxis:!0,domain:[-1,1.25],tickValues:[-1,-.5,0,.5,1],style:{axisLabel:{padding:35}},label:"GSVA score",offsetY:50,standalone:!1}),d.createElement(k.VictoryAxis,{dependentAxis:!0,crossAxis:!0,domain:[0,this.props.maxY],style:{axisLabel:{padding:35},stroke:"none"},label:"-log10 p-value",offsetX:50,standalone:!1}),d.createElement(k.VictoryLabel,{text:"significance",datum:{x:1,y:1.3},textAnchor:"start"}),d.createElement(k.VictoryLine,{style:{data:{stroke:"black",strokeDasharray:5},parent:{border:"dotted 1px #f00"}},data:[{x:-1.2,y:1.3},{x:1,y:1.3}]}),d.createElement(k.VictoryLine,{style:{data:{stroke:"rgb(144, 164, 174)"},parent:{border:"1px dashed solid"}},data:[{x:0,y:0},{x:0,y:this.props.maxY}]}),d.createElement(k.VictoryScatter,{style:{data:{fill:function(e){return e?e.fill:""},fillOpacity:.3}},size:3,data:this.props.plotData}))),d.createElement("div",{style:{float:"right",height:"356.5px",overflowY:"scroll",width:"650px"}},d.createElement(C.default,{isLoading:!(this.store.volcanoPlotTableData.isComplete&&this.props.data)}),this.store.volcanoPlotTableData.isComplete&&this.props.data&&d.createElement(P,{data:this.props.data,columns:[{name:"Gene Sets",render:function(e){return d.createElement("span",null,e.name)},sortBy:function(e){return e.name},filter:function(e,t,n){return e.name.toUpperCase().indexOf(n)>-1}},{name:"GSVA Score",render:function(e){return d.createElement("span",null,e.representativeScore.toFixed(2))},sortBy:function(e){return e.representativeScore}},{name:"P Value",render:function(e){return d.createElement("span",null,(0,_.toPrecision)(e.representativePvalue,2,.1))},sortBy:function(e){return e.representativePvalue}},{name:"Selected",render:function(t){return d.createElement(f.default,{checked:!!e.store.map_genesets_selected_volcano.get(t.name),onChange:function(n){return e.store.map_genesets_selected_volcano.set(t.name,n.target.checked)}})}}],initialSortColumn:"P Value",initialSortDirection:"asc",showPagination:!0,initialItemsPerPage:100,showColumnVisibility:!1,showFilter:!0,showCopyDownload:!1})),d.createElement("div",{style:{float:"right"}},this.store.volcanoPlotTableData.isComplete&&this.props.data&&d.createElement("button",{style:{marginTop:15,float:"right"},className:"btn btn-primary btn-sm pull-right",onClick:function(){return e.props.onSelect(e.store.map_genesets_selected_volcano)}},"Add selection to the query"),this.store.volcanoPlotTableData.isComplete&&this.props.data&&d.createElement("button",{style:{marginRight:15,marginTop:15,float:"right"},className:"btn btn-primary btn-sm pull-right",onClick:function(){return e.store.map_genesets_selected_volcano.replace(e.props.initialSelection.map(function(e){return[e,!0]}))}},"Clear selection")))}}]),t}(E.QueryStoreComponent);T([y.action],j.prototype,"updateSelectionFromPlot",null),j=T([g.observer],j),t.default=j},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d=n(1),p=o(d),f=n(855),h=o(f),m=n(63),y=n(858),g=r(y),v=n(33),b=n(13),_=n(859),w=n(913),x=r(w),S=n(1037),C=r(S),k=n(174),E=r(k),M=n(25),A=n(175),T=n(1038),O=r(T),P=n(1050),j=r(P),I=n(861),D=r(I),N=n(64),R=r(N),L=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},F=h,z=function(e){function t(){return i(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),u(t,[{key:"render",value:function(){var e=this;return p.createElement(_.FlexRow,{padded:!0,overflow:!0,className:F.GeneSetSelector},p.createElement(D.default,{className:"sectionLabel",secondaryComponent:p.createElement("a",{target:"_blank",href:(0,M.getOncoQueryDocUrl)()},"Advanced: Onco Query Language (OQL)"),promises:[this.store.mutSigForSingleStudy,this.store.gisticForSingleStudy,this.store.genes]},"Enter Genes:"),p.createElement(_.FlexCol,{overflow:!0},p.createElement(g.default,{value:this.selectedGeneListOption,options:this.geneListOptions,onChange:function(t){return e.store.geneQuery=t?t.value:""}}),!(!this.store.mutSigForSingleStudy.result.length&&!this.store.gisticForSingleStudy.result.length)&&p.createElement(_.FlexRow,{padded:!0,className:F.buttonRow},!!this.store.mutSigForSingleStudy.result.length&&p.createElement("button",{className:"btn btn-default btn-sm",onClick:function(){return e.store.showMutSigPopup=!0}},"Select from Recurrently Mutated Genes (MutSig)"),!!this.store.gisticForSingleStudy.result.length&&p.createElement("button",{className:"btn btn-default btn-sm",onClick:function(){return e.store.showGisticPopup=!0}},"Select Genes from Recurrent CNAs (Gistic)")),p.createElement("textarea",{ref:this.textAreaRef,className:(0,E.default)(F.geneSet,this.store.geneQuery?F.notEmpty:F.empty),rows:5,cols:80,placeholder:"Enter HUGO Gene Symbols or Gene Aliases",title:"Enter HUGO Gene Symbols or Gene Aliases",value:this.store.geneQuery,onChange:function(t){return e.store.geneQuery=t.currentTarget.value},"data-test":"geneSet"}),p.createElement(C.default,null),p.createElement(m.Modal,{className:(0,E.default)("cbioportal-frontend",F.MutSigGeneSelectorWindow),show:this.store.showMutSigPopup,onHide:function(){return e.store.showMutSigPopup=!1}},p.createElement(m.Modal.Header,{closeButton:!0},p.createElement(m.Modal.Title,null,"Recently Mutated Genes")),p.createElement(m.Modal.Body,null,p.createElement(O.default,{initialSelection:this.store.geneIds,data:this.store.mutSigForSingleStudy.result,onSelect:function(t){e.store.applyGeneSelection(t),e.store.showMutSigPopup=!1}}))),p.createElement(m.Modal,{className:(0,E.default)("cbioportal-frontend",F.GisticGeneSelectorWindow),show:this.store.showGisticPopup,onHide:function(){return e.store.showGisticPopup=!1}},p.createElement(m.Modal.Header,{closeButton:!0},p.createElement(m.Modal.Title,null,"Recurrent Copy Number Alterations (Gistic)")),p.createElement(m.Modal.Body,null,p.createElement(j.default,{initialSelection:this.store.geneIds,data:this.store.gisticForSingleStudy.result,onSelect:function(t){e.store.applyGeneSelection(t),e.store.showGisticPopup=!1}})))))}},{key:"selectedGeneListOption",get:function(){var e=this,t=this.geneListOptions.find(function(t){return t.value==e.store.geneQuery});return t?t.value:""}},{key:"geneListOptions",get:function(){var e=x.default;return R.default.querySetsOfGenes&&(e=R.default.querySetsOfGenes),[{label:"User-defined List",value:""}].concat(a(e.map(function(e){return{label:e.id+" ("+e.genes.length+" genes)",value:e.genes.join(" ")}})))}},{key:"textAreaRef",get:function(){var e=this;if("shouldFocus"===this.store.geneQueryErrorDisplayStatus)return function(t){var n=e.store.oql.error;t&&n&&(t.focus(),t.setSelectionRange(n.start,n.end),e.store.geneQueryErrorDisplayStatus="focused")}}}]),t}(A.QueryStoreComponent);L([b.computed],z.prototype,"selectedGeneListOption",null),L([b.computed],z.prototype,"geneListOptions",null),L([b.computed],z.prototype,"textAreaRef",null),z=L([v.observer],z),t.default=z},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=n(1),d=o(c),p=n(855),f=o(p),h=n(33),m=n(866),y=r(m),g=n(858),v=r(g),b=n(175),_=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},w=f,x=function(e){function t(){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"render",value:function(){return this.store.oql.error?d.createElement("div",{className:w.GeneSymbolValidator},d.createElement("span",{className:w.errorMessage},"Cannot validate gene symbols because of invalid OQL. "+("unfocused"===this.store.geneQueryErrorDisplayStatus?"Please click 'Submit' to see location of error.":this.store.oql.error.message))):this.store.oql.query.length?this.store.genes.isError?d.createElement("div",{className:w.GeneSymbolValidator},d.createElement("span",{className:w.pendingMessage},"Unable to validate gene symbols.")):this.store.genes.isPending&&0==this.store.genes.result.suggestions.length?d.createElement("div",{className:w.GeneSymbolValidator},d.createElement("span",{className:w.pendingMessage},"Validating gene symbols...")):this.store.genes.result.suggestions.length?d.createElement("div",{className:w.GeneSymbolValidator},d.createElement("div",{className:w.invalidBubble,title:"Please edit the gene symbols."},d.createElement(y.default,{className:w.icon,name:"exclamation-circle"}),d.createElement("span",null,"Invalid gene symbols.")),this.store.genes.result.suggestions.map(this.renderSuggestion,this)):d.createElement("div",{className:w.GeneSymbolValidator},d.createElement("div",{className:w.validBubble,title:"You can now submit the list."},d.createElement(y.default,{className:w.icon,name:"check-circle"}),d.createElement("span",null,"All gene symbols are valid."))):null}},{key:"renderSuggestion",value:function(e,t){var n=this,r=e.alias,o=e.genes;if(0==o.length){var a=function(){return n.store.replaceGene(r,"")};return d.createElement("div",{key:t,className:w.suggestionBubble,title:"Could not find gene symbol. Click to remove it from the gene list.",onClick:a},d.createElement(y.default,{className:w.icon,name:"times-circle"}),d.createElement("span",{className:w.noChoiceLabel},r))}if(1==o.length){var i=o[0].hugoGeneSymbol,s="'"+r+"' is a synonym for '"+i+"'. Click here to replace it with the official symbol.",l=function(){return n.store.replaceGene(r,i)};return d.createElement("div",{key:t,className:w.suggestionBubble,title:s,onClick:l},d.createElement(y.default,{className:w.icon,name:"question"}),d.createElement("span",{className:w.singleChoiceLabel},r),d.createElement("span",null,": "+i))}var u=o.map(function(e){return{label:e.hugoGeneSymbol,value:e.hugoGeneSymbol}});return d.createElement("div",{key:t,className:w.suggestionBubble,title:"Ambiguous gene symbol. Click on one of the alternatives to replace it."},d.createElement(y.default,{className:w.icon,name:"question"}),d.createElement("span",{className:w.multiChoiceLabel},r),d.createElement("span",null,": "),d.createElement(v.default,{placeholder:"select a symbol",options:u,onChange:function(e){return e&&n.store.replaceGene(r,e.value)},autosize:!0}))}}]),t}(b.QueryStoreComponent);x=_([h.observer],x),t.default=x},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=n(3),d=o(c),p=n(1),f=o(p),h=n(864),m=r(h),y=n(855),g=o(y),v=n(13),b=n(33),_=n(914),w=r(_),x=n(884),S=n(860),C=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},k=g,E=function(e){function t(){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),t}(w.default),M=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.map_geneSymbol_selected=v.observable.map(),n.columns={hugoGeneSymbol:{priority:1,dataField:"hugoGeneSymbol",name:"Gene Symbol",sortable:!0,filterable:!0},numberOfMutations:{priority:2,dataField:"numberOfMutations",name:"Num Mutations",sortable:!0,filterable:!0},qValue:{priority:3,dataField:"qValue",name:"Q-Value",sortable:!0,filterable:!0,formatter:function(e){var t=e.name,n=e.columnData;return f.createElement(x.Td,{key:t,column:t,value:n},(0,S.toPrecision)(n,2,.1))}},selected:{name:"Selected",priority:4,sortable:!1,filterable:!1,header:f.createElement("div",{className:k.selectionColumnHeader},f.createElement("span",null,"All"),f.createElement(b.Observer,null,function(){return f.createElement(m.default,{checked:n.selectedGenes.length>0,indeterminate:n.selectedGenes.length>0&&n.selectedGenes.length<n.allGenes.length,onChange:function(e){return n.selectAll(e.target.checked)}})})),formatter:function(e){var t=e.name,r=e.rowData;return f.createElement(x.Td,{key:t,column:t},!!r&&f.createElement("div",{className:k.selectionColumnCell},f.createElement(b.Observer,null,function(){return f.createElement(m.default,{checked:!!n.map_geneSymbol_selected.get(r.hugoGeneSymbol),onChange:function(e){return n.map_geneSymbol_selected.set(r.hugoGeneSymbol,e.target.checked)}})})))}}},n.map_geneSymbol_selected.replace(e.initialSelection.map(function(e){return[e,!0]})),n}return s(t,e),l(t,[{key:"selectAll",value:function(e){var t=!0,n=!1,r=void 0;try{for(var o,a=this.allGenes[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=o.value;this.map_geneSymbol_selected.set(i,e)}}catch(e){n=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}}},{key:"render",value:function(){var e=this;return f.createElement("div",{className:k.MutSigGeneSelector},f.createElement(E,{itemsName:"genes",initItemsPerPage:10,columns:this.columns,rawData:this.props.data,headerControlsProps:{showCopyAndDownload:!1,showHideShowColumnButton:!1,showPagination:!0},reactTableProps:{className:"table table-striped table-border-top",hideFilterInput:!0,defaultSort:this.columns.qValue.name}}),f.createElement("div",null,f.createElement("button",{style:{marginTop:20},className:"btn btn-primary btn-sm pull-right",onClick:function(){return e.props.onSelect(e.map_geneSymbol_selected)}},"Select")))}},{key:"allGenes",get:function(){return d.uniq(this.props.data.map(function(e){return e.hugoGeneSymbol}))}},{key:"selectedGenes",get:function(){var e=this;return this.allGenes.filter(function(t){return e.map_geneSymbol_selected.get(t)})}}]),t}(f.Component);C([v.computed],M.prototype,"allGenes",null),C([v.computed],M.prototype,"selectedGenes",null),C([v.action],M.prototype,"selectAll",null),M=C([b.observer],M),t.default=M},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){return e===t}function a(e){var t=arguments.length<=1||void 0===arguments[1]?o:arguments[1],n=null,r=null;return function(){for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return null!==n&&n.length===a.length&&a.every(function(e,r){return t(e,n[r])})||(r=e.apply(void 0,a)),n=a,r}}function i(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every(function(e){return"function"==typeof e})){var n=t.map(function(e){return typeof e}).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+n+"]")}return t}function s(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return function(){for(var t=arguments.length,o=Array(t),a=0;a<t;a++)o[a]=arguments[a];var s=0,l=o.pop(),u=i(o),c=e.apply(void 0,[function(){return s++,l.apply(void 0,arguments)}].concat(n)),d=function(e,t){for(var n=arguments.length,o=Array(n>2?n-2:0),a=2;a<n;a++)o[a-2]=arguments[a];var i=u.map(function(n){return n.apply(void 0,[e,t].concat(o))});return c.apply(void 0,r(i))};return d.resultFunc=l,d.recomputations=function(){return s},d.resetRecomputations=function(){return s=0},d}}function l(e){var t=arguments.length<=1||void 0===arguments[1]?u:arguments[1];if("object"!=typeof e)throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);var n=Object.keys(e);return t(n.map(function(t){return e[t]}),function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(function(e,t,r){return e[n[r]]=t,e},{})})}t.__esModule=!0,t.defaultMemoize=a,t.createSelectorCreator=s,t.createStructuredSelector=l;var u=t.createSelector=s(a)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,s=u=void 0}},l=n(1),u=function(e){return e&&e.__esModule?e:{default:e}}(l),c=n(867),d=n(1041),p=n(876),f=n(916),h=(n(885),n(917)),m=n(919),y=n(1045),g=function(e){function t(e){if(r(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={currentPage:this.props.currentPage?this.props.currentPage:0,currentSort:{column:null,direction:this.props.defaultSortDescending?-1:1},filter:""},!1!==e.sortBy||!1!==e.defaultSort){var n=e.sortBy||e.defaultSort;this.state.currentSort=this.getCurrentSort(n)}}return o(t,e),i(t,[{key:"filterBy",value:function(e){this.setState({filter:e})}},{key:"translateColumnsArray",value:function(e){return e.map(function(e,t){if("string"==typeof e)return{key:e,label:e};if(void 0!==e.sortable){var n=!0===e.sortable?"default":e.sortable;this._sortable[e.key]=n}return e}.bind(this))}},{key:"parseChildData",value:function(e){var t=[],n=void 0;return void 0!==e.children&&u.default.Children.forEach(e.children,function(e){if(void 0!==e&&null!==e)switch(e.type){case f.Thead:break;case m.Tfoot:void 0!==n&&console.warn("You can only have one <Tfoot>, but more than one was specified.Ignoring all but the last one"),n=e;break;case h.Tr:var r=e.props.data||{};u.default.Children.forEach(e.props.children,function(e){if("object"==typeof e&&null!=e)if(void 0!==e.props.column){var t=void 0;if(void 0!==e.props.data)t=e.props.data;else{if(void 0===e.props.children)return void console.warn("exports.Td specified without a `data` property or children, ignoring");t=e.props.children}r[e.props.column]={value:t,props:(0,c.filterPropsFrom)(e.props),__reactableMeta:!0}}else console.warn("exports.Td specified without a `column` property, ignoring")}),t.push({data:r,props:(0,c.filterPropsFrom)(e.props),__reactableMeta:!0});break;default:console.warn("The only possible children of <Table> are <Thead>, <Tr>, or one <Tfoot>.")}}.bind(this)),{data:t,tfoot:n}}},{key:"initialize",value:function(e){this.data=e.data||[];var t=this.parseChildData(e),n=t.data,r=t.tfoot;this.data=this.data.concat(n),this.tfoot=r,this.initializeSorts(e),this.initializeFilters(e)}},{key:"initializeFilters",value:function(e){this._filterable={};for(var t in e.filterable){var n=e.filterable[t],r=void 0,o=void 0;if(n instanceof Object){if(void 0===n.column){console.warn("Filterable column specified without column name");continue}r=n.column,o="function"==typeof n.filterFunction?n.filterFunction:"default"}else r=n,o="default";this._filterable[r]=o}}},{key:"initializeSorts",value:function(e){this._sortable={};for(var t in e.sortable){var n=e.sortable[t],r=void 0,o=void 0;if(n instanceof Object){if(void 0===n.column)return void console.warn("Sortable column specified without column name");r=n.column,o="function"==typeof n.sortFunction?n.sortFunction:"default"}else r=n,o="default";this._sortable[r]=o}}},{key:"getCurrentSort",value:function(e){var t=void 0,n=void 0;if(e instanceof Object){if(void 0===e.column)return void console.warn("Default column specified without column name");if(t=e.column,void 0!==e.direction)if(1===e.direction||"asc"===e.direction)n=1;else if(-1===e.direction||"desc"===e.direction)n=-1;else{var r=this.props.defaultSortDescending?"descending":"ascending";console.warn("Invalid default sort specified. Defaulting to "+r),n=this.props.defaultSortDescending?-1:1}else n=this.props.defaultSortDescending?-1:1}else t=e,n=this.props.defaultSortDescending?-1:1;return{column:t,direction:n}}},{key:"updateCurrentSort",value:function(e){!1!==e&&e.column!==this.state.currentSort.column&&e.direction!==this.state.currentSort.direction&&this.setState({currentSort:this.getCurrentSort(e)})}},{key:"updateCurrentPage",value:function(e){void 0!==e&&e!==this.state.currentPage&&this.setState({currentPage:e})}},{key:"componentWillMount",value:function(){this.initialize(this.props),this.sortByCurrentSort(),this.filterBy(this.props.filterBy)}},{key:"componentWillReceiveProps",value:function(e){this.initialize(e),this.updateCurrentPage(e.currentPage),this.updateCurrentSort(e.sortBy),this.sortByCurrentSort(),this.filterBy(e.filterBy)}},{key:"applyFilter",value:function(e,t){e=e.toLowerCase();for(var n=[],r=0;r<t.length;r++){var o=t[r].props.data;for(var a in this._filterable)if(void 0!==o[a])if(void 0===this._filterable[a]||"default"===this._filterable[a]){if((0,d.extractDataFrom)(o,a).toString().toLowerCase().indexOf(e)>-1){n.push(t[r]);break}}else if(this._filterable[a]((0,d.extractDataFrom)(o,a).toString(),e)){n.push(t[r]);break}}return n}},{key:"sortByCurrentSort",value:function(){var e=this.state.currentSort;null!==e.column&&this.data.sort(function(t,n){var r=(0,d.extractDataFrom)(t,e.column);r=(0,p.isUnsafe)(r)?r.toString():r||"";var o=(0,d.extractDataFrom)(n,e.column);return o=(0,p.isUnsafe)(o)?o.toString():o||"",void 0===this._sortable[e.column]||"default"===this._sortable[e.column]?r<o?-1*e.direction:r>o?1*e.direction:0:1===e.direction?this._sortable[e.column](r,o):this._sortable[e.column](o,r)}.bind(this))}},{key:"onSort",value:function(e){if(void 0!==this._sortable[e]){var t=this.state.currentSort;t.column===e?t.direction*=-1:(t.column=e,t.direction=this.props.defaultSortDescending?-1:1),this.setState({currentSort:t}),this.sortByCurrentSort(),"function"==typeof this.props.onSort&&this.props.onSort(t)}}},{key:"render",value:function(){var e=this,t=[],n=void 0,r=!1,o=void 0===this.props.hideTableHeader,i=null;if(this.props.children&&(this.props.children.length>0&&this.props.children[0]&&this.props.children[0].type===f.Thead?i=this.props.children[0]:this.props.children.type===f.Thead&&(i=this.props.children)),n=null!==i?f.Thead.getColumns(i):this.props.columns||[],n.length>0&&(r=!0,n=this.translateColumnsArray(n)),this.data&&"function"==typeof this.data.map&&(t=t.concat(this.data.map(function(e,t){var o=e,i={};!0===e.__reactableMeta&&(o=e.data,i=e.props);for(var s in o)o.hasOwnProperty(s)&&!1===r&&function(){var e={key:s,label:s};void 0===n.find(function(t){return t.key===e.key})&&n.push(e)}();return u.default.createElement(h.Tr,a({columns:n,key:t,data:o},i))}.bind(this)))),!0===this.props.sortable)for(var s=0;s<n.length;s++)this._sortable[n[s].key]="default";var l=!1;this.props.filterable&&Array.isArray(this.props.filterable)&&this.props.filterable.length>0&&!this.props.hideFilterInput&&(l=!0);var d=t;""!==this.state.filter&&(d=this.applyFilter(this.state.filter,d));var p=0,m=!1,g=void 0,v=this.state.currentPage,b=this.props.pageButtonLimit||10,_=d;this.props.itemsPerPage>0&&(p=this.props.itemsPerPage,g=Math.ceil(d.length/p),v>g-1&&(v=g-1),m=!0,_=d.slice(v*p,(v+1)*p));var w=(0,c.filterPropsFrom)(this.props),x=this.props.noDataText?u.default.createElement("tr",{className:"reactable-no-data"},u.default.createElement("td",{colSpan:n.length},this.props.noDataText)):null,S=null;return n&&n.length>0&&o&&(S=u.default.createElement(f.Thead,{columns:n,filtering:l,onFilter:function(t){e.setState({filter:t}),e.props.onFilter&&e.props.onFilter(t)},filterPlaceholder:this.props.filterPlaceholder,filterClassName:this.props.filterClassName,currentFilter:this.state.filter,sort:this.state.currentSort,sortableColumns:this._sortable,onSort:this.onSort.bind(this),key:"thead"})),u.default.createElement("table",w,S,u.default.createElement("tbody",{className:"reactable-data",key:"tbody"},_.length>0?_:x),!0===m?u.default.createElement(y.Paginator,{colSpan:n.length,pageButtonLimit:b,numPages:g,currentPage:v,onPageChange:function(t){e.setState({currentPage:t}),e.props.onPageChange&&e.props.onPageChange(t)},previousPageLabel:this.props.previousPageLabel,nextPageLabel:this.props.nextPageLabel,key:"paginator"}):null,this.tfoot)}}]),t}(u.default.Component);t.Table=g,g.defaultProps={sortBy:!1,defaultSort:!1,defaultSortDescending:!1,itemsPerPage:0,filterBy:"",hideFilterInput:!1}},function(e,t,n){"use strict";function r(e,t){var n;return n=void 0!==e&&null!==e&&!0===e.__reactableMeta?e.data[t]:e[t],void 0!==n&&null!==n&&!0===n.__reactableMeta&&(n=void 0!==n.props.value&&null!==n.props.value?n.props.value:n.value),(0,o.stringable)(n)?n:""}Object.defineProperty(t,"__esModule",{value:!0}),t.extractDataFrom=r;var o=n(915)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,s=u=void 0}},l=n(1),u=r(l),c=n(34),d=r(c),p=function(e){function t(){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return a(t,e),i(t,[{key:"onChange",value:function(){this.props.onFilter(d.default.findDOMNode(this).value)}},{key:"render",value:function(){return u.default.createElement("input",{type:"text",className:this.props.className,placeholder:this.props.placeholder,value:this.props.value,onKeyUp:this.onChange.bind(this),onChange:this.onChange.bind(this)})}}]),t}(u.default.Component);t.FiltererInput=p;var f=function(e){function t(){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return a(t,e),i(t,[{key:"render",value:function(){if(void 0===this.props.colSpan)throw new TypeError("Must pass a colSpan argument to Filterer");return u.default.createElement("tr",{className:"reactable-filterer"},u.default.createElement("td",{colSpan:this.props.colSpan},u.default.createElement(p,{onFilter:this.props.onFilter,value:this.props.value,placeholder:this.props.placeholder,className:this.props.className?"reactable-filter-input "+this.props.className:"reactable-filter-input"})))}}]),t}(u.default.Component);t.Filterer=f},function(e,t,n){"use strict";function r(e){return null!==e&&"object"==typeof e&&void 0!==e.props}Object.defineProperty(t,"__esModule",{value:!0}),t.isReactComponent=r},function(e,t,n){"use strict";function r(e){var t=[];for(var n in e)t[n]=e;return t}Object.defineProperty(t,"__esModule",{value:!0}),t.toArray=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return"#page-"+(e+1)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var o=e,a=t,i=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(i)}var u=Object.getPrototypeOf(o);if(null===u)return;e=u,t=a,n=i,r=!0,s=u=void 0}},l=n(1),u=function(e){return e&&e.__esModule?e:{default:e}}(l),c=function(e){function t(){r(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return o(t,e),i(t,[{key:"handlePrevious",value:function(e){e.preventDefault(),this.props.onPageChange(this.props.currentPage-1)}},{key:"handleNext",value:function(e){e.preventDefault(),this.props.onPageChange(this.props.currentPage+1)}},{key:"handlePageButton",value:function(e,t){t.preventDefault(),this.props.onPageChange(e)}},{key:"renderPrevious",value:function(){if(this.props.currentPage>0)return u.default.createElement("a",{className:"reactable-previous-page",href:a(this.props.currentPage-1),onClick:this.handlePrevious.bind(this)},this.props.previousPageLabel||"Previous")}},{key:"renderNext",value:function(){if(this.props.currentPage<this.props.numPages-1)return u.default.createElement("a",{className:"reactable-next-page",href:a(this.props.currentPage+1),onClick:this.handleNext.bind(this)},this.props.nextPageLabel||"Next")}},{key:"renderPageButton",value:function(e,t){return u.default.createElement("a",{className:e,key:t,href:a(t),onClick:this.handlePageButton.bind(this,t)},t+1)}},{key:"render",value:function(){if(void 0===this.props.colSpan)throw new TypeError("Must pass a colSpan argument to Paginator");if(void 0===this.props.numPages)throw new TypeError("Must pass a non-zero numPages argument to Paginator");if(void 0===this.props.currentPage)throw new TypeError("Must pass a currentPage argument to Paginator");for(var e=[],t=this.props.pageButtonLimit,n=this.props.currentPage,r=this.props.numPages,o=Math.round(t/2),a=t-o,i=0;i<this.props.numPages;i++){var s=i,l="reactable-page-button";n===i&&(l+=" reactable-current-page"),e.push(this.renderPageButton(l,s))}return n-t+o>0&&(n>r-o?e.splice(0,r-t):e.splice(0,n-t+o)),r-n>a&&e.splice(t,e.length-t),u.default.createElement("tbody",{className:"reactable-pagination"},u.default.createElement("tr",null,u.default.createElement("td",{colSpan:this.props.colSpan},this.renderPrevious(),e,this.renderNext())))}}]),t}(u.default.Component);t.Paginator=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={Numeric:function(e,t){var n=parseFloat(e.toString().replace(/,/g,"")),r=parseFloat(t.toString().replace(/,/g,""));if(isNaN(n)&&isNaN(r))n=e,r=t;else{if(isNaN(n))return 1;if(isNaN(r))return-1}return n<r?-1:n>r?1:0},NumericInteger:function(e,t){return isNaN(e)||isNaN(t)?e>t?1:-1:e-t},Currency:function(e,n){return e=e.replace(/[^0-9\.\-\,]+/g,""),n=n.replace(/[^0-9\.\-\,]+/g,""),t.Sort.Numeric(e,n)},Date:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,n){var r=Date.parse(e),o=Date.parse(n);return isNaN(r)||isNaN(o)?t.Sort.Numeric(e,n):r>o?1:o>r?-1:0}),CaseInsensitive:function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}};t.Sort=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){var n=[];return t||(Object.keys(e[0]).forEach(function(e){return n.push(e,",")}),n.pop(),n.push("\r\n")),e.forEach(function(e){b.each(e,function(e){n.push(e,",")}),n.pop(),n.push("\r\n")}),n.join("")}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(1),p=o(d),f=n(173),h=r(f),m=n(63),y=n(179),g=r(y),v=n(3),b=o(v),_=n(181),w=n(176),x=n(296),S=(n(1048),n(182)),C=function(e){function t(){a(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.downloadData=function(){e.props.downloadDataGenerator?(0,g.default)(l(e.props.downloadDataGenerator()||[],e.props.downloadDataContainsHeader),e.props.downloadFilename):(0,g.default)(l(e.props.tableData||[],e.props.downloadDataContainsHeader),e.props.downloadFilename)},e.handleInput=e.handleInput.bind(e),e.getText=e.getText.bind(e),e}return s(t,e),c(t,[{key:"componentDidMount",value:function(){this.props.showCopyAndDownload&&this._copyButton&&this.bindCopyButton()}},{key:"bindCopyButton",value:function(){new S(this._copyButton,{text:function(){return this.getText()}.bind(this)})}},{key:"handleInput",value:function(e){var t=this;null!==this.searchTimeout&&(clearTimeout(this.searchTimeout),this.searchTimeout=null);var n=e.currentTarget.value;this.searchTimeout=setTimeout(function(){t.props.handleInput&&t.props.handleInput(n)},this.props.searchDelayMs)}},{key:"render",value:function(){var e=this,t=p.createElement("div",{className:"rc-tooltip-arrow-inner"});return p.createElement("div",{className:(this.props.className||"")+""},p.createElement(m.ButtonToolbar,null,p.createElement(w.If,{condition:this.props.showPagination},p.createElement(_.PaginationControls,u({className:"pull-left"},this.props.paginationProps))),p.createElement(w.If,{condition:this.props.showHideShowColumnButton},p.createElement(x.ColumnVisibilityControls,this.props.columnVisibilityProps)),p.createElement(w.If,{condition:this.props.showCopyAndDownload},p.createElement(m.ButtonGroup,{className:this.props.copyDownloadClassName,style:{marginLeft:10}},p.createElement(h.default,{overlay:p.createElement("span",null,"Copy"),placement:"top",mouseLeaveDelay:0,mouseEnterDelay:.5,arrowContent:t},p.createElement("button",{ref:function(t){e._copyButton=t},className:"btn btn-sm btn-default","data-clipboard-text":"blablabhabha",id:"donkey","option-text":this.getText},p.createElement("i",{className:"fa fa-clipboard"}))),p.createElement(h.default,{overlay:p.createElement("span",null,"Download CSV"),mouseLeaveDelay:0,mouseEnterDelay:.5,placement:"top",arrowContent:t},p.createElement(m.Button,{className:"btn-sm",onClick:this.downloadData},p.createElement("i",{className:"fa fa-cloud-download"}))))),p.createElement(w.If,{condition:this.props.showSearch},p.createElement("div",{className:this.props.searchClassName+" form-group has-feedback input-group-sm",style:{display:"inline-block",marginLeft:10}},p.createElement("input",{type:"text",onInput:this.handleInput,className:"form-control tableSearchInput",style:{width:200}}),p.createElement("span",{className:"fa fa-search form-control-feedback","aria-hidden":"true"})))))}},{key:"getText",value:function(){return this.props.downloadDataGenerator?l(this.props.downloadDataGenerator()||[],this.props.downloadDataContainsHeader):l(this.props.tableData||[],this.props.downloadDataContainsHeader)}}]),t}(p.Component);t.default=C,C.defaultProps={showSearch:!1,showCopyAndDownload:!0,showPagination:!1,searchClassName:"",copyDownloadClassName:"",downloadFilename:"patient-clinical-attributes.tsv",downloadDataContainsHeader:!1,paginationProps:{},columnVisibilityProps:{},searchDelayMs:400}},function(e,t,n){!function(t,r){e.exports=r(n(1),n(2),n(182))}(0,function(e,t,n){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var r=n(1).default,o=n(17).default,a=n(26).default,i=n(29).default,s=n(30).default,l=n(36).default,u=n(39).default;Object.defineProperty(t,"__esModule",{value:!0});var c=n(40),d=u(c),p=n(41),f=u(p),h=function(e){function t(){i(this,t),r(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return o(t,e),a(t,[{key:"propsWith",value:function(e){var t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],n={};return l(this.props).forEach(function(r){if(-1!==r.search(e)){var o=t?r.replace(e,""):r;n[o]=this.props[r]}},this),n}},{key:"componentWillUnmount",value:function(){this.clipboard&&this.clipboard.destroy()}},{key:"componentDidMount",value:function(){var e=this.props.options||this.propsWith(/^option-/,!0),t=d.default.version.match(/0\.13(.*)/)?this.refs.element.getDOMNode():this.refs.element,r=n(42);this.clipboard=new r(t,e);var o=this.propsWith(/^on/,!0);l(o).forEach(function(e){this.clipboard.on(e.toLowerCase(),this.props["on"+e])},this)}},{key:"render",value:function(){var e=s({type:this.getType(),className:this.props.className||"",style:this.props.style||{},ref:"element",onClick:this.props.onClick},this.propsWith(/^data-/),this.propsWith(/^button-/,!0));return d.default.createElement(this.getComponent(),e,this.props.children)}},{key:"getType",value:function(){return"button"===this.getComponent()||"input"===this.getComponent()?this.props.type||"button":void 0}},{key:"getComponent",value:function(){return this.props.component||"button"}}],[{key:"propTypes",value:{options:f.default.object,type:f.default.string,className:f.default.string,style:f.default.object,component:f.default.string,children:f.default.oneOfType([f.default.element,f.default.string,f.default.number,f.default.object])},enumerable:!0},{key:"defaultProps",value:{onClick:function(){}},enumerable:!0}]),t}(d.default.Component);t.default=h,e.exports=t.default},function(e,t,n){"use strict";var r=n(2).default;t.default=function(e,t,n){for(var o=!0;o;){var a=e,i=t,s=n;o=!1,null===a&&(a=Function.prototype);var l=r(a,i);if(void 0!==l){if("value"in l)return l.value;var u=l.get;if(void 0===u)return;return u.call(s)}var c=Object.getPrototypeOf(a);if(null===c)return;e=c,t=i,n=s,o=!0,l=c=void 0}},t.__esModule=!0},function(e,t,n){e.exports={default:n(3),__esModule:!0}},function(e,t,n){var r=n(4);n(5),e.exports=function(e,t){return r.getDesc(e,t)}},function(e,t){var n=Object;e.exports={create:n.create,getProto:n.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:n.getOwnPropertyDescriptor,setDesc:n.defineProperty,setDescs:n.defineProperties,getKeys:n.keys,getNames:n.getOwnPropertyNames,getSymbols:n.getOwnPropertySymbols,each:[].forEach}},function(e,t,n){var r=n(6);n(10)("getOwnPropertyDescriptor",function(e){return function(t,n){return e(r(t),n)}})},function(e,t,n){var r=n(7),o=n(9);e.exports=function(e){return r(o(e))}},function(e,t,n){var r=n(8);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(11),o=n(13),a=n(16);e.exports=function(e,t){var n=(o.Object||{})[e]||Object[e],i={};i[e]=t(n),r(r.S+r.F*a(function(){n(1)}),"Object",i)}},function(e,t,n){var r=n(12),o=n(13),a=n(14),i=function(e,t,n){var s,l,u,c=e&i.F,d=e&i.G,p=e&i.S,f=e&i.P,h=e&i.B,m=e&i.W,y=d?o:o[t]||(o[t]={}),g=d?r:p?r[t]:(r[t]||{}).prototype;d&&(n=t);for(s in n)(l=!c&&g&&s in g)&&s in y||(u=l?g[s]:n[s],y[s]=d&&"function"!=typeof g[s]?n[s]:h&&l?a(u,r):m&&g[s]==u?function(e){var t=function(t){return this instanceof e?new e(t):e(t)};return t.prototype=e.prototype,t}(u):f&&"function"==typeof u?a(Function.call,u):u,f&&((y.prototype||(y.prototype={}))[s]=u))};i.F=1,i.G=2,i.S=4,i.P=8,i.B=16,i.W=32,e.exports=i},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){var n=e.exports={version:"1.2.6"};"number"==typeof __e&&(__e=n)},function(e,t,n){var r=n(15);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){"use strict";var r=n(18).default,o=n(20).default;t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=r(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(o?o(e,t):e.__proto__=t)},t.__esModule=!0},function(e,t,n){e.exports={default:n(19),__esModule:!0}},function(e,t,n){var r=n(4);e.exports=function(e,t){return r.create(e,t)}},function(e,t,n){e.exports={default:n(21),__esModule:!0}},function(e,t,n){n(22),e.exports=n(13).Object.setPrototypeOf},function(e,t,n){var r=n(11);r(r.S,"Object",{setPrototypeOf:n(23).set})},function(e,t,n){var r=n(4).getDesc,o=n(24),a=n(25),i=function(e,t){if(a(e),!o(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,o){try{o=n(14)(Function.call,r(Object.prototype,"__proto__").set,2),o(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return i(e,n),t?e.__proto__=n:o(e,n),e}}({},!1):void 0),check:i}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var r=n(24);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){"use strict";var r=n(27).default;t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),r(e,o.key,o)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),t.__esModule=!0},function(e,t,n){e.exports={default:n(28),__esModule:!0}},function(e,t,n){var r=n(4);e.exports=function(e,t,n){return r.setDesc(e,t,n)}},function(e,t){"use strict";t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t.__esModule=!0},function(e,t,n){"use strict";var r=n(31).default;t.default=r||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t.__esModule=!0},function(e,t,n){e.exports={default:n(32),__esModule:!0}},function(e,t,n){n(33),e.exports=n(13).Object.assign},function(e,t,n){var r=n(11);r(r.S+r.F,"Object",{assign:n(34)})},function(e,t,n){var r=n(4),o=n(35),a=n(7);e.exports=n(16)(function(){var e=Object.assign,t={},n={},r=Symbol(),o="abcdefghijklmnopqrst";return t[r]=7,o.split("").forEach(function(e){n[e]=e}),7!=e({},t)[r]||Object.keys(e({},n)).join("")!=o})?function(e,t){for(var n=o(e),i=arguments,s=i.length,l=1,u=r.getKeys,c=r.getSymbols,d=r.isEnum;s>l;)for(var p,f=a(i[l++]),h=c?u(f).concat(c(f)):u(f),m=h.length,y=0;m>y;)d.call(f,p=h[y++])&&(n[p]=f[p]);return n}:Object.assign},function(e,t,n){var r=n(9);e.exports=function(e){return Object(r(e))}},function(e,t,n){e.exports={default:n(37),__esModule:!0}},function(e,t,n){n(38),e.exports=n(13).Object.keys},function(e,t,n){var r=n(35);n(10)("keys",function(e){return function(t){return e(r(t))}})},function(e,t){"use strict";t.default=function(e){return e&&e.__esModule?e:{default:e}},t.__esModule=!0},function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=n}])})},function(e,t){},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=n(1),d=o(c),p=n(855),f=o(p),h=n(13),m=n(33),y=n(914),g=r(y),v=n(884),b=n(174),_=r(b),w=n(860),x=n(1051),S=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},C=f,k=function(e){function t(){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),t}(g.default),E=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.map_geneSymbol_selected=h.observable.map(),n.columns={amp:{priority:1,columnDataFunction:function(e){var t=e.rowData;return t&&(t.amp?"Amp":"Del")},name:"Amp Del",sortable:!0,filterable:!0,header:d.createElement("div",{className:(0,_.default)(C.header,C.amp,C.del)},d.createElement("span",{className:C.amp},"Amp"),d.createElement("span",{className:C.del},"Del")),formatter:function(e){var t=e.name,n=e.rowData,r=e.columnData;return d.createElement(v.Td,{key:t,column:t,value:r},!!n&&d.createElement("div",{className:n.amp?C.amp:C.del}))}},chromosome:{priority:2,dataField:"chromosome",name:"Chr",sortable:!0,filterable:!0},cytoband:{priority:3,dataField:"cytoband",name:"Cytoband",sortable:x.sortByCytoband,filterable:!0},"#":{priority:4,columnDataFunction:function(e){var t=e.rowData;return(0,x.getGeneSymbols)(t).length},name:"#",sortable:!0,filterable:!0},genes:{priority:5,columnDataFunction:function(e){var t=e.rowData;return(0,x.getGeneSymbols)(t).join(" ")},name:"Genes",sortable:function(e,t){return e.length-t.length||+(e>t)-+(e<t)},filterable:!0,formatter:function(e){var t=e.name,r=e.rowData,o=e.columnData;return d.createElement(v.Td,{key:t,column:t,value:o},d.createElement(M,{gistic:r,map_geneSymbol_selected:n.map_geneSymbol_selected}))}},qValue:{priority:6,dataField:"qValue",name:"Q-Value",sortable:!0,filterable:!0,formatter:function(e){var t=e.name,n=(e.rowData,e.columnData);return d.createElement(v.Td,{key:t,column:t,value:n},(0,w.toPrecision)(n,2,.1))}}},n.map_geneSymbol_selected.replace(e.initialSelection.map(function(e){return[e,!0]})),n}return s(t,e),l(t,[{key:"render",value:function(){var e=this;return d.createElement("div",{className:C.GisticGeneSelector},d.createElement("span",null,"Click on a gene to ",d.createElement("span",{className:(0,_.default)(C.geneToggle,C.selected,C.simulateHovered)},"select")," it."),d.createElement(k,{className:C.gisticTable,itemsName:"genes",initItemsPerPage:10,columns:this.columns,rawData:this.props.data,headerControlsProps:{showCopyAndDownload:!1,showHideShowColumnButton:!1,showPagination:!0},reactTableProps:{className:"table table-striped table-border-top",hideFilterInput:!0,defaultSort:this.columns.qValue.name}}),d.createElement("div",null,d.createElement("button",{style:{marginTop:20},className:"btn btn-primary btn-sm pull-right",onClick:function(){return e.props.onSelect(e.map_geneSymbol_selected)}},"Select")))}}]),t}(d.Component);E=S([m.observer],E),t.default=E;var M=function(e){function t(){a(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.showAll=!1,e}return s(t,e),l(t,[{key:"renderGeneToggles",value:function(e){var t=this;return e.map(function(e){return d.createElement(m.Observer,null,function(){var n=!!t.props.map_geneSymbol_selected.get(e);return d.createElement("span",{key:e,className:(0,_.default)(C.geneToggle,n?C.selected:C.notSelected),onClick:function(r){return t.props.map_geneSymbol_selected.set(e,!n)}},e)})})}},{key:"render",value:function(){var e=this,t=(0,x.getGeneSymbols)(this.props.gistic),n=t.slice(0,5),r=t.slice(5);return d.createElement("div",{className:C.GisticGeneToggles},d.createElement("div",{className:C.someGenes},this.renderGeneToggles(n),!!r.length&&d.createElement("a",{className:C.showMoreLess,onClick:function(){return e.showAll=!e.showAll}},this.showAll?"less":"+"+r.length+" more")),d.createElement("div",{className:C.moreGenes},this.showAll&&this.renderGeneToggles(r)))}}]),t}(d.Component);S([h.observable],M.prototype,"showAll",void 0),M=S([m.observer],M)},function(e,t,n){"use strict";function r(e){return e?e.genes.map(function(e){return e.hugoGeneSymbol}):[]}function o(e,t){var n=e.match(a),r=t.match(a);return n&&r?parseInt(n[1],10)-parseInt(r[1],10)!=0?parseInt(n[1],10)-parseInt(r[1],10):"p"===n[2]&&"q"===r[2]?-1:"q"===n[2]&&"p"===r[2]?1:n[2]===r[2]?parseInt(n[3],10)-parseInt(r[3],10):0:+!!n-+!!r}Object.defineProperty(t,"__esModule",{value:!0}),t.getGeneSymbols=r,t.sortByCytoband=o;var a=new RegExp("^([0-9]{1,2})([pq])([0-9]{1,2})(?:.?)([0-9]{0,2})$")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){return y.includes(e.textLabel.toLowerCase(),t.toLowerCase())}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.filterCaseSetOptions=l;var d=n(1),p=o(d),f=n(855),h=o(f),m=n(3),y=o(m),g=n(858),v=r(g),b=n(33),_=n(13),w=n(859),x=n(175),S=n(25),C=n(173),k=r(C),E=n(861),M=r(E),A=n(1053),T=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},O=h,P=function(e){function t(){a(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.CaseIdsModeRadio=(0,b.observer)(function(t){return p.createElement("label",null,p.createElement("input",{type:"radio",checked:e.store.caseIdsMode==t.state,onChange:function(n){n.currentTarget.checked&&(e.store.caseIdsMode=t.state)}}),t.label)}),e}return s(t,e),u(t,[{key:"render",value:function(){var e=this;return this.store.selectableSelectedStudyIds.length?p.createElement(w.FlexRow,{padded:!0,overflow:!0,className:O.CaseSetSelector,"data-test":"CaseSetSelector"},p.createElement("div",null,p.createElement(M.default,{className:"sectionLabel",secondaryComponent:p.createElement("a",{href:(0,S.getStudySummaryUrl)(this.store.selectableSelectedStudyIds),target:"_blank"},"To build your own case set, try out our enhanced Study View."),promises:[this.store.sampleLists,this.store.asyncCustomCaseSet,this.store.profiledSamplesCount]},"Select Patient/Case Set:")),p.createElement("div",null,p.createElement(v.default,{value:this.store.selectedSampleListId,options:this.caseSetOptions,filterOption:l,onChange:function(t){return e.store.selectedSampleListId=t?t.value:void 0}}),!(this.store.selectedSampleListId!==x.CUSTOM_CASE_LIST_ID)&&p.createElement(w.FlexCol,{padded:!0},p.createElement("div",{className:O.radioRow},p.createElement(w.FlexRow,{padded:!0},p.createElement(this.CaseIdsModeRadio,{label:"By sample ID",state:"sample"}),p.createElement(this.CaseIdsModeRadio,{label:"By patient ID",state:"patient"}))),p.createElement("span",null,"Enter case IDs below:"),p.createElement("textarea",{title:"Enter case IDs",rows:6,cols:80,value:this.store.caseIds,onChange:function(t){return e.store.caseIds=t.currentTarget.value},"data-test":"CustomCaseSetInput"})))):null}},{key:"caseSetOptions",get:function(){var e=this.store.sampleLists.result.map(function(e){return{label:p.createElement(k.default,{placement:"right",mouseEnterDelay:0,overlay:p.createElement("div",{className:O.tooltip},e.description)},p.createElement("span",null,e.name+" ("+e.sampleCount+")")),value:e.sampleListId,textLabel:e.name}}),t=(0,A.getFilteredCustomCaseSets)(this.store.isVirtualStudyQuery,this.store.profiledSamplesCount.result),n=t.map(function(e){return{value:e.value,label:p.createElement(k.default,{placement:"right",mouseEnterDelay:0,overlay:p.createElement("div",{className:O.tooltip},e.description)},p.createElement("span",null,e.name)),textLabel:e.name}});return e.concat(n)}}]),t}(x.QueryStoreComponent);T([_.computed],P.prototype,"caseSetOptions",null),P=T([b.observer],P),t.default=P},function(e,t,n){"use strict";function r(e,t){return a.reduce(s,function(n,r){if(r.isdefault)n.push(r);else if(e){var o=t[r.value];o>0&&n.push(Object.assign({},r,{name:r.name+" ("+o+")"}))}return n},[])}Object.defineProperty(t,"__esModule",{value:!0}),t.CustomCaseSets=t.CaseSetId=void 0,t.getFilteredCustomCaseSets=r;var o=n(3),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(o),i=t.CaseSetId=void 0;!function(e){e.custom="-1",e.mutation_cna="w_mut_cna",e.mutation="w_mut",e.cna="w_cna",e.all="all"}(i||(t.CaseSetId=i={}));var s=t.CustomCaseSets=[{name:"All",description:"All cases in the selected cohorts",value:i.all,isdefault:!1},{name:"Cases with mutations data",description:"All cases with mutations data",value:i.mutation,isdefault:!1},{name:"Cases with copy number alterations data",description:"All cases with copy number alterations data",value:i.cna,isdefault:!1},{name:"Cases with both mutations and copy number alterations data",description:"All cases with both mutations and copy number alterations data",value:i.mutation_cna,isdefault:!1},{name:"User-defined Case List",description:"Specify your own case list",value:i.custom,isdefault:!0}]},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=n(1),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(l),c=n(33),d=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":s(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},p=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),i(t,[{key:"render",value:function(){return this.props.ids.length>0?u.createElement("div",{className:"alert alert-danger",style:{marginBottom:0}},u.createElement("i",{className:"fa fa-exclamation-triangle"})," The following studies do not exist or you do not have access to them: ",this.props.ids.join(", ")):null}}]),t}(u.Component);p=d([c.observer],p),t.default=p},function(e,t,n){"use strict";function r(e,t){if(t.length){var n=!1,r=!1;return"-"===t[0]&&(t=t.substring(1),r=!0),t.length?(n=!(!e.cytoband||0!==e.cytoband.indexOf(t)),r?!n:n):!0}return!0}function o(e,t){if(t=t.trim(),t.length){var n=t.split(/\s+/g),o=[],i=[],s=!0,l=!1,u=void 0;try{for(var c,d=n[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var p=c.value;"-"===p[0]?i.push(p):o.push(p)}}catch(e){l=!0,u=e}finally{try{!s&&d.return&&d.return()}finally{if(l)throw u}}var f=!o.length||(0,a.logicalOr)(o.map(function(t){return r(e,t)})),h=!i.length||(0,a.logicalAnd)(i.map(function(t){return r(e,t)}));return f&&h}return!0}Object.defineProperty(t,"__esModule",{value:!0}),t.cytobandFilter=o;var a=n(308)},function(e,t,n){"use strict";function r(e,t){return(void 0===e?"undefined":o(e))===a?t:e}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=r;var a="undefined"},,,,,,function(e,t,n){e.exports=n(6)(1250)},function(e,t){},function(e,t,n){"use strict";function r(e){for(var t=[],n=e.start.position,r=e.end.position,o=n;o<=r;o++)t.push(""+o);return e.start.insertionCode&&(t[0]+="^"+e.start.insertionCode),t.length>1&&e.end.insertionCode&&(t[t.length-1]+="^"+e.end.insertionCode),t}function o(e){for(var t=[],n=e.start.position,r=e.end.position,o=n;o<=r;o++)t.push({resi:o});return e.start.insertionCode&&(t[0].icode=e.start.insertionCode),t.length>1&&e.end.insertionCode&&(t[t.length-1].icode=e.end.insertionCode),t}function a(e){var t={};return e.forEach(function(e){var n=o(e.positionRange),r=l.groupBy(n,"resi");l.each(l.keys(r),function(n){t[n]||(t[n]=[]),l.each(r[n],function(r){t[n].push({selector:r,residue:e})})})}),t}function i(e,t){var n=[];return l.each(l.keys(e),function(r){l.isEqual(e[r],t[r])||(n=n.concat(e[r]))}),n}Object.defineProperty(t,"__esModule",{value:!0}),t.convertPdbPosToResCode=r,t.convertPdbPosToResAndInsCode=o,t.generateResiduePosToSelectorMap=a,t.findUpdatedResidues=i;var s=n(3),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(s)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.HitZone=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(s),u=t.HitZone=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handlers={onMouseOver:function(){n.props.onMouseOver&&n.props.onMouseOver(),n.props.onMouseEnter&&n.props.onMouseEnter()},onMouseOut:function(){n.props.onMouseOut&&n.props.onMouseOut(),n.props.onMouseLeave&&n.props.onMouseLeave()}},n}return a(t,e),i(t,[{key:"render",value:function(){return l.createElement("svg",{width:this.props.width,height:this.props.height,style:{position:"absolute",top:this.props.y,left:this.props.x,cursor:this.props.cursor},onMouseOver:this.handlers.onMouseOver,onClick:this.props.onClick,onMouseOut:this.handlers.onMouseOut})}}]),t}(l.Component);t.default=u},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e>0?"Co-occurrence":"Mutual exclusivity"}function a(e,t){var n=0,r=0,o=0,a=0;return e.forEach(function(e,i){var s=t[i];e||s?!e&&s?r++:e&&!s?o++:a++:n++}),[n,r,o,a]}function i(e,t,n,r){return(0,v.getCumulativePValue)(e,t,n,r)}function s(e,t){var n=e*t;return n>1?1:n}function l(e,t,n,r){return e*r==0&&t*n==0?1/0:Math.log(e*r/(t*n))}function u(e,t){var n=null,r=null,o=e.filter(function(e){return t(e.logOddsRatio)}),a=o.filter(function(e){return e.adjustedPValue<.05}),i=o.length,s=a.length;return n=0===i?g.createElement("span",null,g.createElement("b",null,"no")," gene pair"):1===i?g.createElement("span",null,g.createElement("b",null,"1")," gene pair"):g.createElement("span",null,g.createElement("b",null,i)," gene pairs"),i>0&&(r=0===s?g.createElement("span",null," (none significant)"):g.createElement("span",null," (",g.createElement("b",null,s)," significant)")),[n,r]}function c(e){var t=u(e,function(e){return e<=0}),n=u(e,function(e){return e>0});return g.createElement("p",null,"The query contains ",t[0]," with mutually exclusive alterations",t[1],", and ",n[0]," with co-occurrent alterations",n[1],".")}function d(e){var t=[],n=_.default.bigCombination(Object.keys(e),2).toArray();return n.forEach(function(r){var u=r[0],c=r[1],d=a(e[u],e[c]),p=i(d[0],d[1],d[2],d[3]),f=l(d[0],d[1],d[2],d[3]),h=o(f);t.push({geneA:u,geneB:c,neitherCount:d[0],bNotACount:d[1],aNotBCount:d[2],bothCount:d[3],logOddsRatio:f,pValue:p,adjustedPValue:s(p,n.length),association:h})}),x.sortBy(t,["pValue"])}function p(e,t,n,r){return e.filter(function(e){var o=!1;return t&&(o=o||e.logOddsRatio<=0),n&&(o=o||e.logOddsRatio>0),r&&(o=o&&e.adjustedPValue<.05),o})}function f(e){return e<.001?"<0.001":e.toFixed(3)}function h(e){var t=g.createElement("span",null,f(e));return e<.05&&(t=g.createElement("b",null,t)),t}function m(e){return e<-3?"<-3":e>3?">3":e.toFixed(3)}Object.defineProperty(t,"__esModule",{value:!0}),t.calculateAssociation=o,t.countOccurences=a,t.calculatePValue=i,t.calculateAdjustedPValue=s,t.calculateLogOddsRatio=l,t.getMutuallyExclusiveCounts=u,t.getCountsText=c,t.getData=d,t.getFilteredData=p,t.formatPValue=f,t.formatPValueWithStyle=h,t.formatLogOddsRatio=m;var y=n(1),g=r(y),v=n(1168),b=n(1169),_=function(e){return e&&e.__esModule?e:{default:e}}(b),w=n(3),x=r(w)},function(e,t){e.exports={portalWidth:"styles-module__portalWidth__22mhB",Checkboxes:"styles-module__Checkboxes__2oyZv",Tendency:"styles-module__Tendency__2Y46X"}},function(e,t,n){"use strict";function r(e){if("promoter"===(e.proteinChange||"").toLowerCase())return"promoter";var t=(0,h.getSimplifiedMutationType)(e.mutationType);switch(t){case"missense":case"inframe":case"fusion":return t;default:return"trunc"}}function o(e,t){var n=Object.keys(e).map(function(t){return{key:t,value:e[t]}});return n.length>0?(n.sort(function(e,n){var r=t[e.key]-t[n.key];return r<0?-1:r>0?1:e.value<n.value?1:e.value>n.value?-1:0}),n[0].key):void 0}function a(e,t,n){e.trackLabel=t,e.data=n;var a=!1,i={},s={},l={},u={},c={},d=new RegExp(g.MUTATION_STATUS_GERMLINE,"i"),p=!0,f=!1,h=void 0;try{for(var m,y=n[Symbol.iterator]();!(p=(m=y.next()).done);p=!0){var v=m.value;switch(v.molecularProfileAlterationType){case"COPY_NUMBER_ALTERATION":var C=b[v.value];C&&(i[C]=i[C]||0,i[C]+=1);break;case"MRNA_EXPRESSION":if(v.alterationSubType){var k=v.alterationSubType;s[k]=s[k]||0,s[k]+=1}break;case"PROTEIN_LEVEL":if(v.alterationSubType){var E=v.alterationSubType;l[E]=l[E]||0,l[E]+=1}break;case"MUTATION_EXTENDED":var M=r(v);"fusion"===M?a=!0:(v.putativeDriver&&(M+="_rec"),c[M]=c[M]||d.test(v.mutationStatus),u[M]=u[M]||0,u[M]+=1)}}}catch(e){f=!0,h=e}finally{try{!p&&y.return&&y.return()}finally{if(f)throw h}}return a&&(e.disp_fusion=!0),e.disp_cna=o(i,w),e.disp_mrna=o(s,x),e.disp_prot=o(l,S),e.disp_mut=o(u,_),e.disp_germ=e.disp_mut?c[e.disp_mut]:void 0,e}function i(e,t,n,r,o){if(!n.length)return[];var i=t instanceof Array?t:[t],s=y.default.keyBy(o,function(e){return e.molecularProfileId}),l=[];if((0,f.isSampleList)(n)){var u=!0,c=!1,d=void 0;try{for(var p,h=n[Symbol.iterator]();!(u=(p=h.next()).done);u=!0)!function(){var t=p.value,n={};n.sample=t.sampleId,n.study_id=t.studyId,n.uid=t.uniqueSampleKey;var o=r.samples[t.uniqueSampleKey];n.profiled_in=y.default.flatMap(i,function(e){return o.byGene[e]||[]}),n.profiled_in=n.profiled_in.concat(o.allGenes).filter(function(e){return!!s[e.molecularProfileId]}),n.profiled_in.length||(n.na=!0),n.not_profiled_in=y.default.flatMap(i,function(e){return o.notProfiledByGene[e]||[]}),n.not_profiled_in=n.not_profiled_in.concat(o.notProfiledAllGenes).filter(function(e){return!!s[e.molecularProfileId]}),l.push(a(n,i.join(" / "),e[t.uniqueSampleKey]))}()}catch(e){c=!0,d=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw d}}}else{var m=!0,g=!1,v=void 0;try{for(var b,_=n[Symbol.iterator]();!(m=(b=_.next()).done);m=!0)!function(){var t=b.value,n={};n.patient=t.patientId,n.study_id=t.studyId,n.uid=t.uniquePatientKey;var o=r.patients[t.uniquePatientKey];n.profiled_in=y.default.flatMap(i,function(e){return o.byGene[e]||[]}),n.profiled_in=n.profiled_in.concat(o.allGenes).filter(function(e){return!!s[e.molecularProfileId]}),n.profiled_in.length||(n.na=!0),n.not_profiled_in=y.default.flatMap(i,function(e){return o.notProfiledByGene[e]||[]}),n.not_profiled_in=n.not_profiled_in.concat(o.notProfiledAllGenes).filter(function(e){return!!s[e.molecularProfileId]}),l.push(a(n,i.join(" / "),e[t.uniquePatientKey]))}()}catch(e){g=!0,v=e}finally{try{!m&&_.return&&_.return()}finally{if(g)throw v}}}return l}function s(e,t,n,r,o){if(e[t]=n,e.study=r.studyId,o&&o.length)if(1===o.length)e.profile_data=o[0].value;else{if((0,f.isSample)(r))throw Error("Unexpectedly received multiple heatmap profile data for one sample");e.profile_data=o.reduce(function(e,t){var n=t.value;return Math.abs(n)>Math.abs(e)?n:e},0)}else e.profile_data=null,e.na=!0;return e}function l(e,t,n,r){if(!n.length)return[];var o=((0,f.isSampleList)(n),void 0),a=void 0;return(0,f.isSampleList)(n)?(o=y.default.groupBy(r,function(e){return e.uniqueSampleKey}),a=n.map(function(n){var r={};r.sample=n.sampleId,r.uid=n.uniqueSampleKey;var a=o[n.uniqueSampleKey];return s(r,e,t,n,a),r})):(o=y.default.groupBy(r,function(e){return e.uniquePatientKey}),a=n.map(function(n){var r={};r.patient=n.patientId,r.uid=n.uniquePatientKey;var a=o[n.uniquePatientKey];return s(r,e,t,n,a),r})),a}function u(e,t){t.clinicalAttributeId===v.SpecialAttribute.MutationCount?e.attr_val=0:e.na=!0}function c(e,t,n,r){if(e.attr_id=t.clinicalAttributeId,e.study_id=n.studyId,e.attr_val_counts={},r&&r.length){if("number"===t.datatype.toLowerCase()){var o=0,a=0,i=!0,s=!1,l=void 0;try{for(var c,d=r[Symbol.iterator]();!(i=(c=d.next()).done);i=!0){var p=c.value;if((0,f.isMutationCount)(p))o+=1,a+=p.mutationCount;else{var h=parseFloat(p.value+"");isNaN(h)||(o+=1,a+=h)}}}catch(e){s=!0,l=e}finally{try{!i&&d.return&&d.return()}finally{if(s)throw l}}0===o?u(e,t):(e.attr_val=a/o,e.attr_val_counts[e.attr_val]=1)}else if("string"===t.datatype.toLowerCase()){var m=e.attr_val_counts,y=!0,g=!1,b=void 0;try{for(var _,w=r[Symbol.iterator]();!(y=(_=w.next()).done);y=!0){var x=_.value;m[x.value]=m[x.value]||0,m[x.value]+=1}}catch(e){g=!0,b=e}finally{try{!y&&w.return&&w.return()}finally{if(g)throw b}}var S=Object.keys(m);S.length>1?e.attr_val="Mixed":e.attr_val=S[0]}else if(t.clinicalAttributeId===v.SpecialAttribute.MutationSpectrum){var C=r,k=e.attr_val_counts;k["C>A"]=0,k["C>G"]=0,k["C>T"]=0,k["T>A"]=0,k["T>C"]=0,k["T>G"]=0;var E=!0,M=!1,A=void 0;try{for(var T,O=C[Symbol.iterator]();!(E=(T=O.next()).done);E=!0){var P=T.value;k["C>A"]+=P.CtoA,k["C>G"]+=P.CtoG,k["C>T"]+=P.CtoT,k["T>A"]+=P.TtoA,k["T>C"]+=P.TtoC,k["T>G"]+=P.TtoG}}catch(e){M=!0,A=e}finally{try{!E&&O.return&&O.return()}finally{if(M)throw A}}0===k["C>A"]&&0===k["C>G"]&&0===k["C>T"]&&0===k["T>A"]&&0===k["T>C"]&&0===k["T>G"]&&u(e,t),e.attr_val=e.attr_val_counts}}else u(e,t);return e}function d(e,t,n){if(e.patientAttribute){var r=y.default.groupBy(n,function(e){return e.uniquePatientKey});return function(e){return r[e.uniquePatientKey]}}var o="sample"===t?function(e){return e.uniqueSampleKey}:function(e){return e.uniquePatientKey},a=y.default.groupBy(n,o);return function(e){return a[o(e)]}}function p(e,t,n){var r=(y.default.groupBy(n,(0,f.isSampleList)(t)?function(e){return e.uniqueSampleKey}:function(e){return e.uniquePatientKey}),d(e,(0,f.isSampleList)(t)?"sample":"patient",n));return(0,f.isSampleList)(t)?t.map(function(t){var n={};return n.uid=t.uniqueSampleKey,n.sample=t.sampleId,c(n,e,t,r(t)),n}):t.map(function(t){var n={};return n.uid=t.uniquePatientKey,n.patient=t.patientId,c(n,e,t,r(t)),n})}Object.defineProperty(t,"__esModule",{value:!0}),t.getOncoprintMutationType=r,t.selectDisplayValue=o,t.fillGeneticTrackDatum=a,t.makeGeneticTrackData=i,t.fillHeatmapTrackDatum=s,t.makeHeatmapTrackData=l,t.fillClinicalTrackDatum=c,t.makeClinicalTrackData=p;var f=n(1176),h=n(189),m=n(3),y=function(e){return e&&e.__esModule?e:{default:e}}(m),g=n(188),v=n(291),b={"-2":"homdel","-1":"hetloss",0:void 0,1:"gain",2:"amp"},_={trunc_rec:1,inframe_rec:2,missense_rec:3,trunc:4,inframe:5,missense:6},w={amp:0,homdel:0,gain:1,hetloss:1},x={up:0,down:0},S={up:0,down:0}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.CLINICAL_TRACK_GROUP_INDEX=t.GENETIC_TRACK_GROUP_INDEX=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(1),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),d=n(1184),p=r(d),f=n(33),h=n(13),m=n(1185),y=n(3),g=r(y);n(1188);var v=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},b=t.GENETIC_TRACK_GROUP_INDEX=1,_=t.CLINICAL_TRACK_GROUP_INDEX=0,w=function(e){function t(){o(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.trackSpecKeyToTrackId={},e.divRefHandler=e.divRefHandler.bind(e),e.refreshOncoprint=g.default.debounce(e.refreshOncoprint.bind(e),0),e}return i(t,e),s(t,[{key:"divRefHandler",value:function(e){this.div=e}},{key:"refreshOncoprint",value:function(e){var t=this;this.oncoprint||(this.oncoprint=new p.default("#"+e.divId,e.width),this.oncoprint.setTrackGroupLegendOrder([b,_]),window.frontendOnc=this.oncoprint,e.oncoprintRef&&e.oncoprintRef(this.oncoprint)),this.oncoprint.webgl_unavailable||((0,m.transition)(e,this.lastTransitionProps||{},this.oncoprint,function(){return t.trackSpecKeyToTrackId},function(){return t.props.molecularProfileIdToMolecularProfile}),this.lastTransitionProps=g.default.clone(e))}},{key:"componentWillReceiveProps",value:function(e){this.refreshOncoprint(e)}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"componentDidMount",value:function(){this.refreshOncoprint(this.props)}},{key:"render",value:function(){return c.createElement("div",{id:this.props.divId,ref:this.divRefHandler})}},{key:"sortByMutationType",get:function(){return this.props.distinguishMutationType&&this.props.sortConfig&&this.props.sortConfig.sortByMutationType}},{key:"sortByDrivers",get:function(){return this.props.distinguishDrivers&&this.props.sortConfig&&this.props.sortConfig.sortByDrivers}}]),t}(c.Component);v([h.computed],w.prototype,"sortByMutationType",null),v([h.computed],w.prototype,"sortByDrivers",null),w=v([f.observer],w),t.default=w},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=n(174),u=r(l),c=n(1192),d=r(c),p=n(933),f=r(p),h=n(1193),m=r(h),y=n(1072),g=r(y),v=n(297),b=r(v),_=n(2),w=r(_),x=n(1),S=r(x),C=n(34),k=r(C),E=n(934),M=r(E),A=n(1074),T=r(A),O=n(878),P=r(O),j=n(1075),I=r(j),D=function(e){function t(n,r){o(this,t);var i=a(this,e.call(this,n,r));return i.onWindowScroll=function(){i.onUpdate()},i.onDocumentClick=function(){(0,b.default)(function(){return i.onUpdate()})},i.onUpdate=function(){if(i._isMounted){var e=i.props,t=e.offsetTop,n=e.viewportOffsetTop,r=(0,g.default)((0,I.default)(i)),o=r+(n||0);return o<=t?void i.updateState("top",null,null):o>i.getPositionTopMax()?void("bottom"===i.state.affixed?i.updateStateAtBottom():i.setState({affixed:"bottom",position:"absolute",top:null},function(){i._isMounted&&i.updateStateAtBottom()})):void i.updateState("affix","fixed",n)}},i.getPositionTopMax=function(){return(0,T.default)((0,P.default)(i))-(0,d.default)(k.default.findDOMNode(i))-i.props.offsetBottom},i.updateState=function(e,t,n){if(e!==i.state.affixed||t!==i.state.position||n!==i.state.top){var r="affix"===e?"":e.charAt(0).toUpperCase()+e.substr(1);i.props["onAffix"+r]&&i.props["onAffix"+r](),i.setState({affixed:e,position:t,top:n},function(){i.props["onAffixed"+r]&&i.props["onAffixed"+r]()})}},i.updateStateAtBottom=function(){var e=i.getPositionTopMax(),t=(0,m.default)(k.default.findDOMNode(i)),n=(0,f.default)(t).top;i.updateState("bottom","absolute",e-n)},i.state={affixed:"top",position:null,top:null},i._needPositionUpdate=!1,i}return i(t,e),t.prototype.componentDidMount=function(){var e=this;this._isMounted=!0,this._windowScrollListener=(0,M.default)((0,I.default)(this),"scroll",function(){return e.onWindowScroll()}),this._documentClickListener=(0,M.default)((0,P.default)(this),"click",function(){return e.onDocumentClick()}),this.onUpdate()},t.prototype.componentWillReceiveProps=function(){this._needPositionUpdate=!0},t.prototype.componentDidUpdate=function(){this._needPositionUpdate&&(this._needPositionUpdate=!1,this.onUpdate())},t.prototype.componentWillUnmount=function(){this._isMounted=!1,this._windowScrollListener&&this._windowScrollListener.remove(),this._documentClickListener&&this._documentClickListener.remove()},t.prototype.render=function(){var e=S.default.Children.only(this.props.children),t=e.props,n=t.className,r=t.style,o=this.state,a=o.affixed,i=o.position,l=o.top,c={position:i,top:l},d=void 0,p=void 0;return"top"===a?(d=this.props.topClassName,p=this.props.topStyle):"bottom"===a?(d=this.props.bottomClassName,p=this.props.bottomStyle):(d=this.props.affixClassName,p=this.props.affixStyle),S.default.cloneElement(e,{className:(0,u.default)(d,n),style:s({},c,p,r)})},t}(S.default.Component);D.propTypes={offsetTop:w.default.number,viewportOffsetTop:w.default.number,offsetBottom:w.default.number,topClassName:w.default.string,topStyle:w.default.object,affixClassName:w.default.string,affixStyle:w.default.object,bottomClassName:w.default.string,bottomStyle:w.default.object,onAffix:w.default.func,onAffixed:w.default.func,onAffixTop:w.default.func,onAffixedTop:w.default.func,onAffixBottom:w.default.func,onAffixedBottom:w.default.func},D.defaultProps={offsetTop:0,viewportOffsetTop:null,offsetBottom:0},t.default=D,e.exports=t.default},function(e,t,n){e.exports=n(6)(185)},function(e,t,n){e.exports=n(6)(660)},function(e,t,n){e.exports=n(6)(178)},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){return Math.max(e.documentElement.offsetHeight||0,e.height||0,e.body.scrollHeight||0,e.body.offsetHeight||0)},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.default=function(e){return(0,s.default)(a.default.findDOMNode(e))};var o=n(34),a=r(o),i=n(1195),s=r(i);e.exports=t.default},function(e,t,n){e.exports=n(6)(93)},function(e,t,n){e.exports=n(6)(14)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=n(174),c=r(u),d=n(2),p=r(d),f=n(907),h=r(f),m=n(1),y=r(m),g=n(34),v=r(g),b=n(1210),_=r(b),w=n(908),x=r(w),S=n(878),C=r(S),k=function(e){function t(n,r){a(this,t);var o=i(this,e.call(this,n,r));return o.getTarget=function(){var e=o.props.target,t="function"==typeof e?e():e;return t&&v.default.findDOMNode(t)||null},o.maybeUpdatePosition=function(e){var t=o.getTarget();(o.props.shouldUpdatePosition||t!==o._lastTarget||e)&&o.updatePosition(t)},o.state={positionLeft:0,positionTop:0,arrowOffsetLeft:null,arrowOffsetTop:null},o._needsFlush=!1,o._lastTarget=null,o}return s(t,e),t.prototype.componentDidMount=function(){this.updatePosition(this.getTarget())},t.prototype.componentWillReceiveProps=function(){this._needsFlush=!0},t.prototype.componentDidUpdate=function(e){this._needsFlush&&(this._needsFlush=!1,this.maybeUpdatePosition(this.props.placement!==e.placement))},t.prototype.render=function(){var e=this.props,t=e.children,n=e.className,r=o(e,["children","className"]),a=this.state,i=a.positionLeft,s=a.positionTop,u=o(a,["positionLeft","positionTop"]);delete r.target,delete r.container,delete r.containerPadding,delete r.shouldUpdatePosition;var d=y.default.Children.only(t);return(0,m.cloneElement)(d,l({},r,u,{positionLeft:i,positionTop:s,className:(0,c.default)(n,d.props.className),style:l({},d.props.style,{left:i,top:s})}))},t.prototype.updatePosition=function(e){if(this._lastTarget=e,!e)return void this.setState({positionLeft:0,positionTop:0,arrowOffsetLeft:null,arrowOffsetTop:null});var t=v.default.findDOMNode(this),n=(0,x.default)(this.props.container,(0,C.default)(this).body);this.setState((0,_.default)(this.props.placement,t,e,n,this.props.containerPadding))},t}(y.default.Component);k.propTypes={target:p.default.oneOfType([h.default,p.default.func]),container:p.default.oneOfType([h.default,p.default.func]),containerPadding:p.default.number,placement:p.default.oneOf(["top","right","bottom","left"]),shouldUpdatePosition:p.default.bool},k.displayName="Position",k.defaultProps={containerPadding:0,placement:"right",shouldUpdatePosition:!1},t.default=k,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return 0===e.button}function l(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}t.__esModule=!0;var u=n(1076),c=r(u),d=n(2),p=r(d),f=n(1),h=r(f),m=n(34),y=r(m),g=n(934),v=r(g),b=n(878),_=r(b),w=27,x=function(e){function t(n,r){o(this,t);var i=a(this,e.call(this,n,r));return i.addEventListeners=function(){var e=i.props.event,t=(0,_.default)(i);i.documentMouseCaptureListener=(0,v.default)(t,e,i.handleMouseCapture,!0),i.documentMouseListener=(0,v.default)(t,e,i.handleMouse),i.documentKeyupListener=(0,v.default)(t,"keyup",i.handleKeyUp)},i.removeEventListeners=function(){i.documentMouseCaptureListener&&i.documentMouseCaptureListener.remove(),i.documentMouseListener&&i.documentMouseListener.remove(),i.documentKeyupListener&&i.documentKeyupListener.remove()},i.handleMouseCapture=function(e){i.preventMouseRootClose=l(e)||!s(e)||(0,c.default)(y.default.findDOMNode(i),e.target)},i.handleMouse=function(e){!i.preventMouseRootClose&&i.props.onRootClose&&i.props.onRootClose(e)},i.handleKeyUp=function(e){e.keyCode===w&&i.props.onRootClose&&i.props.onRootClose(e)},i.preventMouseRootClose=!1,i}return i(t,e),t.prototype.componentDidMount=function(){this.props.disabled||this.addEventListeners()},t.prototype.componentDidUpdate=function(e){!this.props.disabled&&e.disabled?this.addEventListeners():this.props.disabled&&!e.disabled&&this.removeEventListeners()},t.prototype.componentWillUnmount=function(){this.props.disabled||this.removeEventListeners()},t.prototype.render=function(){return this.props.children},t}(h.default.Component);x.displayName="RootCloseWrapper",x.propTypes={onRootClose:p.default.func,children:p.default.element,disabled:p.default.bool,event:p.default.oneOf(["click","mousedown"])},x.defaultProps={event:"click"},t.default=x,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=n(1),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(l),c=n(33),d=n(13),p=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":s(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},f=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.focused=!1,n.mouseInside=!1,n.initialShow=!1,n.initialShow=!0===e.showByDefault,n.onFocus=n.onFocus.bind(n),n.onBlur=n.onBlur.bind(n),n.onMouseEnter=n.onMouseEnter.bind(n),n.onMouseLeave=n.onMouseLeave.bind(n),n}return a(t,e),i(t,[{key:"componentWillUpdate",value:function(e){e.show!==this.props.show&&(this.initialShow=!1)}},{key:"onFocus",value:function(){this.focused=!0}},{key:"onBlur",value:function(){this.focused=!1}},{key:"onMouseEnter",value:function(){this.initialShow=!1,this.mouseInside=!0}},{key:"onMouseLeave",value:function(){this.initialShow=!1,this.mouseInside=!1}},{key:"render",value:function(){return u.createElement("div",{style:this.style,onFocus:this.onFocus,onBlur:this.onBlur,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},this.props.children)}},{key:"fadeInStyle",get:function(){return{WebkitTransition:"opacity "+this.props.fadeInSeconds+"s",MozTransition:"opacity "+this.props.fadeInSeconds+"s",OTransition:"opacity "+this.props.fadeInSeconds+"s",transition:"opacity "+this.props.fadeInSeconds+"s",opacity:1}}},{key:"fadeOutStyle",get:function(){return{WebkitTransition:"opacity "+this.props.fadeOutSeconds+"s",MozTransition:"opacity "+this.props.fadeOutSeconds+"s",OTransition:"opacity "+this.props.fadeOutSeconds+"s",transition:"opacity "+this.props.fadeOutSeconds+"s",opacity:0}}},{key:"style",get:function(){return this.show?this.fadeInStyle:this.fadeOutStyle}},{key:"show",get:function(){return this.props.show||this.focused||this.mouseInside||this.initialShow}}]),t}(u.Component);f.defaultProps={fadeInSeconds:.2,fadeOutSeconds:.6},p([d.observable],f.prototype,"focused",void 0),p([d.observable],f.prototype,"mouseInside",void 0),p([d.computed],f.prototype,"fadeInStyle",null),p([d.computed],f.prototype,"fadeOutStyle",null),p([d.computed],f.prototype,"style",null),p([d.computed],f.prototype,"show",null),p([d.action],f.prototype,"onMouseEnter",null),p([d.action],f.prototype,"onMouseLeave",null),f=p([c.observer],f),t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.CoExpressionDataStore=t.TableMode=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(1),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),d=n(33),p=n(1227),f=r(p),h=n(13),m=n(854),y=r(m),g=n(125),v=n(1230),b=r(v),_=n(91),w=n(1238),x=n(63),S=n(886),C=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},k=t.TableMode=void 0;!function(e){e[e.SHOW_ALL=0]="SHOW_ALL",e[e.SHOW_POSITIVE=1]="SHOW_POSITIVE",e[e.SHOW_NEGATIVE=2]="SHOW_NEGATIVE"}(k||(t.TableMode=k={}));var E=t.CoExpressionDataStore=function(e){function t(e,n,r){o(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.setHighlighted=r,i.tableMode=k.SHOW_ALL,i.dataHighlighter=function(e){var t=n();return!(!t||e.entrezGeneId!==t.entrezGeneId)},i.dataSelector=function(e){var t=void 0;switch(i.tableMode){case k.SHOW_POSITIVE:t=e.pearsonsCorrelation>=0;break;case k.SHOW_NEGATIVE:t=e.pearsonsCorrelation<=0;break;default:t=!0}return t},(0,h.autorun)(function(){i.sortMetric&&i.sortedFilteredData.length>0&&!n()&&i.setHighlighted(i.sortedFilteredData[0])}),i}return i(t,e),t}(g.SimpleGetterLazyMobXTableApplicationDataStore);C([h.observable],E.prototype,"tableMode",void 0);var M=function(e){function t(){o(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.allDataRequested=!0,e.dataStore=new E(function(){return e.props.hidden?e.lastCoExpressionData||[]:e.coExpressionDataPromise.isComplete?(e.lastCoExpressionData=e.coExpressionDataPromise.result,e.coExpressionDataPromise.result):[]},function(){return e.highlightedCoExpression},function(t){e.highlightedCoExpression=t}),e.plotData=(0,_.remoteData)({await:function(){if(e.props.hidden)return[];var t=e.getPlotDataPromises(e.highlightedCoExpression),n=[e.props.coverageInformation,e.props.studyToMutationMolecularProfile,t.molecularX];return t.mutationX&&n.push(t.mutationX),t.molecularY&&n.push(t.molecularY),t.mutationY&&n.push(t.mutationY),n},invoke:function(){if(e.props.hidden)return Promise.resolve([]);if(!e.highlightedCoExpression)return Promise.resolve([]);var t=e.getPlotDataPromises(e.highlightedCoExpression),n=[];t.molecularX&&t.molecularX.isComplete&&(n=n.concat(t.molecularX.result)),t.molecularY&&t.molecularY.isComplete&&(n=n.concat(t.molecularY.result));var r=[];return t.mutationX&&t.mutationX.isComplete&&(r=r.concat(t.mutationX.result)),t.mutationY&&t.mutationY.isComplete&&(r=r.concat(t.mutationY.result)),Promise.resolve((0,w.computePlotData)(n,r,e.props.gene.entrezGeneId,e.props.gene.hugoGeneSymbol,e.highlightedCoExpression.hugoGeneSymbol,e.props.coverageInformation.result,e.props.studyToMutationMolecularProfile.result))}}),e}return i(t,e),s(t,[{key:"onSelectTableMode",value:function(e){this.dataStore.tableMode=e}},{key:"requestAllData",value:function(){this.allDataRequested=!0}},{key:"getPlotDataPromises",value:function(e){var t={molecularX:this.props.numericGeneMolecularDataCache.get({entrezGeneId:this.props.gene.entrezGeneId,molecularProfileId:this.props.molecularProfile.molecularProfileId}),mutationX:void 0,molecularY:void 0,mutationY:void 0};return e&&(t.molecularY=this.props.numericGeneMolecularDataCache.get({entrezGeneId:e.entrezGeneId,molecularProfileId:this.props.molecularProfile.molecularProfileId})),this.props.mutationCache&&(t.mutationX=this.props.mutationCache.get({entrezGeneId:this.props.gene.entrezGeneId}),e&&(t.mutationY=this.props.mutationCache.get({entrezGeneId:e.entrezGeneId}))),t}},{key:"table",value:function(){return c.createElement("div",null,c.createElement(f.default,{referenceGene:this.props.gene,dataStore:this.dataStore,tableMode:this.dataStore.tableMode,onSelectTableMode:this.onSelectTableMode}),this.requestAllDataButton)}},{key:"plot",value:function(){return this.props.hidden?c.createElement("span",null):this.plotData.isError?c.createElement("span",null,"Error fetching data. Please refresh the page and try again."):c.createElement("div",{style:{position:"relative"}},c.createElement(y.default,{isLoading:this.dataStore.allData.length>0&&(this.plotData.isPending||!this.highlightedCoExpression),style:{position:"absolute",top:300,left:"50%",transform:"translate(-50%,0)"}}),this.plotData.isComplete&&this.highlightedCoExpression&&c.createElement("div",{style:{marginLeft:10}},c.createElement(b.default,{xAxisGene:this.props.gene,yAxisGene:this.highlightedCoExpression,data:this.plotData.result,coExpression:this.highlightedCoExpression,showLogScaleControls:this.showLogScaleControls,showMutationControls:this.showMutationControls,showMutations:this.plotShowMutations,logScale:this.plotLogScale,handlers:this.props.plotHandlers,molecularProfile:this.props.molecularProfile,height:530,width:530})))}},{key:"render",value:function(){var e=c.createElement("div",{style:{display:!this.props.hidden&&this.coExpressionDataPromise.isComplete?"inherit":"none"},"data-test":"CoExpressionGeneTabContent"},c.createElement("div",{className:"clearfix"},c.createElement("div",{style:{width:"40%",float:"left",marginTop:6}},c.createElement(d.Observer,null,this.table)),c.createElement("div",{style:{width:"60%",float:"right",marginTop:6}},c.createElement(d.Observer,null,this.plot))));return c.createElement("div",{style:{display:this.props.hidden?"none":"inherit",minHeight:826,position:"relative"}},e,c.createElement(y.default,{isLoading:this.props.hidden||this.coExpressionDataPromise.isPending,style:{position:"absolute",left:"50%",top:100,transform:"translate(-50%,0)"}}))}},{key:"coExpressionDataPromise",get:function(){return this.props.coExpressionCache.get({entrezGeneId:this.props.gene.entrezGeneId,molecularProfile:this.props.molecularProfile,allData:this.allDataRequested})}},{key:"plotShowMutations",get:function(){return this.props.plotState.plotShowMutations&&this.showMutationControls}},{key:"plotLogScale",get:function(){return this.props.plotState.plotLogScale&&this.showLogScaleControls}},{key:"showMutationControls",get:function(){return!!this.props.mutationCache}},{key:"showLogScaleControls",get:function(){var e=this.props.molecularProfile.molecularProfileId.toLowerCase();return e.indexOf("rna_seq")>-1&&-1===e.indexOf("zscore")}},{key:"requestAllDataButton",get:function(){return!this.plotData.isComplete||this.dataStore.allData.length||this.allDataRequested?null:c.createElement("div",null,c.createElement("span",{style:{marginRight:5}},(0,w.requestAllDataMessage)(this.props.gene.hugoGeneSymbol)),c.createElement(x.Button,{onClick:this.requestAllData},"Load data for all genes."))}}]),t}(c.Component);C([h.observable.ref],M.prototype,"highlightedCoExpression",void 0),C([h.observable],M.prototype,"allDataRequested",void 0),C([S.bind,h.action],M.prototype,"onSelectTableMode",null),C([S.bind,h.action],M.prototype,"requestAllData",null),C([h.computed],M.prototype,"plotShowMutations",null),C([h.computed],M.prototype,"plotLogScale",null),C([h.computed],M.prototype,"showMutationControls",null),C([h.computed],M.prototype,"showLogScaleControls",null),C([S.bind],M.prototype,"table",null),C([S.bind],M.prototype,"plot",null),M=C([d.observer],M),t.default=M},function(e,t,n){"use strict";function r(e){var t=e.filter(function(e){var t=!1;if(e.molecularAlterationType===o.AlterationTypeConstants.MRNA_EXPRESSION||e.molecularAlterationType===o.AlterationTypeConstants.PROTEIN_LEVEL){var n=e.molecularProfileId.toLowerCase();t=n.indexOf("merged_median_zscores")>-1||-1===n.indexOf("zscores")}return t});return t.sort(function(e,t){var n=e.molecularProfileId.toLowerCase().indexOf("rna_seq")>-1;return n===t.molecularProfileId.toLowerCase().indexOf("rna_seq")>-1?0:n?-1:1}),t}Object.defineProperty(t,"__esModule",{value:!0}),t.tableSearchInformation=t.correlationInformation=void 0,t.filterAndSortProfiles=r;var o=n(122);t.correlationInformation="Pearson correlations are computed first. For genes with a correlation greater than 0.3 or less than -0.3, the Spearman correlations are also computed. By default, only gene pairs with values > 0.3 or < -0.3 in both measures are shown.",t.tableSearchInformation="Coexpression data can be filtered by gene, or by cytoband. To exclude all genes from a cytoband, prefix with a dash -. For example, to exclude all genes on 1p, search '-1p'."},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=n(1),d=o(c),p=n(3),f=o(p),h=n(33),m=n(13),y=n(1242),g=r(y),v=n(890),b=r(v),_=n(887),w=n(63),x=n(1084),S=r(x),C=n(1253),k=r(C),E=n(1085),M=r(E),A=n(865),T=r(A),O=n(1086),P=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},j=function(e){function t(){a(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.mutualExclusivityFilter=!0,e.coOccurenceFilter=!0,e.significanceFilter=!1,e.checkedGenes=[],e.dataStore=new O.EnrichmentsTableDataStore(function(){return e.filteredData},function(){return e.highlightedRow},function(t){e.highlightedRow=t}),e}return s(t,e),l(t,[{key:"toggleMutualExclusivityFilter",value:function(){this.mutualExclusivityFilter=!this.mutualExclusivityFilter}},{key:"toggleCoOccurenceFilter",value:function(){this.coOccurenceFilter=!this.coOccurenceFilter}},{key:"toggleSignificanceFilter",value:function(){this.significanceFilter=!this.significanceFilter}},{key:"onCheckGene",value:function(e){var t=this.checkedGenes.indexOf(e);-1!==t?this.checkedGenes.splice(t,1):this.checkedGenes.push(e)}},{key:"onGeneNameClick",value:function(e){this.clickedGene=e}},{key:"onSelection",value:function(e){this.selectedGenes=e}},{key:"onSelectionCleared",value:function(){this.selectedGenes=null}},{key:"render",value:function(){return 0===this.props.data.length?d.createElement("div",null,"No data/result available"):d.createElement("div",{className:b.default.Container},d.createElement("div",{className:b.default.LeftColumn},d.createElement(S.default,{data:(0,_.getAlterationScatterData)(this.data,this.props.store.hugoGeneSymbols),xAxisLeftLabel:"Mutual exclusivity",xAxisRightLabel:"Co-occurrence",xAxisDomain:15,xAxisTickValues:[-10,0,10],onGeneNameClick:this.onGeneNameClick,onSelection:this.onSelection,onSelectionCleared:this.onSelectionCleared}),d.createElement(k.default,{totalAlteredCount:this.props.totalAlteredCount,totalUnalteredCount:this.props.totalUnalteredCount,selectedGene:this.clickedGene,selectedGeneStats:this.clickedGene?this.clickedGeneStats:null})),d.createElement("div",{className:b.default.TableContainer},d.createElement("div",null,d.createElement("h3",null,this.props.headerName),d.createElement(M.default,{checkedGenes:this.checkedGenes,store:this.props.store})),d.createElement("hr",{style:{marginTop:0,marginBottom:5,borderWidth:2}}),d.createElement("div",{className:b.default.Checkboxes},d.createElement(w.Checkbox,{checked:this.coOccurenceFilter,onChange:this.toggleCoOccurenceFilter},"Co-occurrence"),d.createElement(w.Checkbox,{checked:this.mutualExclusivityFilter,onChange:this.toggleMutualExclusivityFilter},"Mutual exclusivity"),d.createElement(w.Checkbox,{checked:this.significanceFilter,onChange:this.toggleSignificanceFilter},"Significant only")),d.createElement(g.default,{data:this.filteredData,onCheckGene:this.onCheckGene,onGeneNameClick:this.onGeneNameClick,alterationType:this.props.alterationType,dataStore:this.dataStore})))}},{key:"data",get:function(){return(0,_.getAlterationRowData)(this.props.data,this.props.totalAlteredCount,this.props.totalUnalteredCount,this.props.store.hugoGeneSymbols)}},{key:"filteredData",get:function(){return(0,_.getFilteredData)(this.data,this.mutualExclusivityFilter,this.coOccurenceFilter,this.significanceFilter,this.selectedGenes)}},{key:"clickedGeneStats",get:function(){var e=f.find(this.props.data,["hugoGeneSymbol",this.clickedGene]);return[this.props.totalAlteredCount-e.alteredCount,e.alteredCount,e.unalteredCount,this.props.totalUnalteredCount-e.unalteredCount]}}]),t}(d.Component);P([m.observable],j.prototype,"mutualExclusivityFilter",void 0),P([m.observable],j.prototype,"coOccurenceFilter",void 0),P([m.observable],j.prototype,"significanceFilter",void 0),P([m.observable.shallow],j.prototype,"checkedGenes",void 0),P([m.observable],j.prototype,"clickedGene",void 0),P([m.observable],j.prototype,"selectedGenes",void 0),P([m.observable.ref],j.prototype,"highlightedRow",void 0),P([m.computed],j.prototype,"data",null),P([m.computed],j.prototype,"filteredData",null),P([m.computed],j.prototype,"clickedGeneStats",null),P([T.default],j.prototype,"toggleMutualExclusivityFilter",null),P([T.default],j.prototype,"toggleCoOccurenceFilter",null),P([T.default],j.prototype,"toggleSignificanceFilter",null),P([T.default],j.prototype,"onCheckGene",null),P([T.default],j.prototype,"onGeneNameClick",null),P([T.default],j.prototype,"onSelection",null),P([T.default],j.prototype,"onSelectionCleared",null),j=P([h.observer],j),t.default=j},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=n(1),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(l),c=n(33),d=n(862),p=n(13),f=n(63),h=n(863),m=function(e){return e&&e.__esModule?e:{default:e}}(h),y=n(887),g=n(877),v=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":s(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},b=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),i(t,[{key:"handleSelection",value:function(e,t,n){this.props.onSelection(e[0].data.map(function(e){return e.hugoGeneSymbol}))}},{key:"handleSelectionCleared",value:function(e){this.tooltipModel&&this.props.onGeneNameClick(this.tooltipModel.datum.hugoGeneSymbol,this.tooltipModel.datum.entrezGeneId),this.props.onSelectionCleared()}},{key:"render",value:function(){var e=this,t=[{target:"data",eventHandlers:{onMouseOver:function(){return[{target:"data",mutation:function(t){return e.tooltipModel=t,{datum:Object.assign({},t.datum,{hovered:!0})}}}]},onMouseOut:function(){return[{target:"data",mutation:function(t){return e.tooltipModel=null,{datum:Object.assign({},t.datum,{hovered:!1})}}}]}}}];return u.createElement("div",{className:"posRelative"},u.createElement("div",{className:"borderedChart inlineBlock"},u.createElement(d.VictoryChart,{containerComponent:u.createElement(d.VictorySelectionContainer,{responsive:!1,onSelection:function(t,n,r){return e.handleSelection(t,n,r)},onSelectionCleared:function(t){return e.handleSelectionCleared(t)}}),theme:m.default,domainPadding:{y:[0,20]},height:350,width:350,padding:{top:40,bottom:60,left:60,right:40}},u.createElement(d.VictoryAxis,{tickValues:this.props.xAxisTickValues,domain:[-this.props.xAxisDomain,this.props.xAxisDomain],label:"Log Ratio",tickFormat:function(e){return e>=1e3||e<=-1e3?e/1e3+"k":e},style:{tickLabels:{padding:20},axisLabel:{padding:40},ticks:{size:0}}}),u.createElement(d.VictoryAxis,{label:"-log10 p-Value",dependentAxis:!0,tickCount:4,style:{tickLabels:{padding:135},axisLabel:{padding:165},ticks:{size:0}}}),u.createElement(d.VictoryLabel,{style:h.axisLabelStyles,text:"← "+this.props.xAxisLeftLabel,x:60,y:300}),u.createElement(d.VictoryLabel,{style:h.axisLabelStyles,text:this.props.xAxisRightLabel+" →",x:200,y:300}),u.createElement(d.VictoryLabel,{style:h.axisLabelStyles,text:"Significance →",x:320,y:210,angle:-90}),u.createElement(d.VictoryScatter,{style:{data:{fill:function(e,t){return t?"#FE9929":e.qValue<.05?"#58ACFA":"#D3D3D3"},fillOpacity:.4}},data:this.props.data,symbol:"circle",size:function(e){return e.hovered?10:3},events:t}))),this.tooltipModel&&u.createElement(f.Popover,{className:"cbioTooltip",positionLeft:this.tooltipModel.x+15,positionTop:this.tooltipModel.y-25},"Gene: ",this.tooltipModel.datum.hugoGeneSymbol,u.createElement("br",null),"Log Ratio: ",(0,y.formatLogOddsRatio)(this.tooltipModel.datum.logRatio),u.createElement("br",null),"p-Value: ",(0,g.toConditionalPrecision)(this.tooltipModel.datum.y,3,.01),u.createElement("br",null),"q-Value: ",(0,g.toConditionalPrecision)(this.tooltipModel.datum.qValue,3,.01)))}}]),t}(u.Component);v([p.observable],b.prototype,"tooltipModel",void 0),b=v([c.observer],b),t.default=b},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=n(1),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(l),c=n(33),d=n(63),p=n(865),f=function(e){return e&&e.__esModule?e:{default:e}}(p),h=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":s(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},m=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),i(t,[{key:"onAddGenes",value:function(){this.props.store.queryStore.addGenesAndSubmit(this.props.checkedGenes)}},{key:"render",value:function(){return u.createElement("div",{style:{marginBottom:5}},u.createElement(d.Button,{style:{marginBottom:2},disabled:this.props.checkedGenes.length<1,onClick:this.onAddGenes,bsSize:"xsmall"},"Add checked genes to query:")," ",this.props.checkedGenes.join(", "))}}]),t}(u.Component);h([f.default],m.prototype,"onAddGenes",null),m=h([c.observer],m),t.default=m},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.EnrichmentsTableDataStore=void 0;var i=n(125);t.EnrichmentsTableDataStore=function(e){function t(e,n,a){r(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.setHighlighted=a,i.dataHighlighter=function(e){var t=n();return!(!t||e.entrezGeneId!==t.entrezGeneId)},i}return a(t,e),t}(i.SimpleGetterLazyMobXTableApplicationDataStore)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=n(1),d=o(c),p=n(33),f=n(13),h=n(1256),m=r(h),y=n(890),g=r(y),v=n(63),b=n(887),_=n(1085),w=r(_),x=n(1084),S=r(x),C=n(1257),k=r(C),E=n(3),M=o(E),A=n(865),T=r(A),O=n(1086),P=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},j=function(e){function t(){a(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.overExpressedFilter=!0,e.underExpressedFilter=!0,e.significanceFilter=!1,e.checkedGenes=[],e.dataStore=new O.EnrichmentsTableDataStore(function(){return e.filteredData},function(){return e.highlightedRow},function(t){e.highlightedRow=t}),e}return s(t,e),l(t,[{key:"toggleOverExpressedFilter",value:function(){this.overExpressedFilter=!this.overExpressedFilter}},{key:"toggleUnderExpressedFilter",value:function(){this.underExpressedFilter=!this.underExpressedFilter}},{key:"toggleSignificanceFilter",value:function(){this.significanceFilter=!this.significanceFilter}},{key:"onCheckGene",value:function(e){var t=this.checkedGenes.indexOf(e);-1!==t?this.checkedGenes.splice(t,1):this.checkedGenes.push(e)}},{key:"onGeneNameClick",value:function(e,t){this.clickedGeneHugo=e,this.clickedGeneEntrez=t}},{key:"onSelection",value:function(e){this.selectedGenes=e}},{key:"onSelectionCleared",value:function(){this.selectedGenes=null}},{key:"render",value:function(){var e=this;if(0===this.props.data.length)return d.createElement("div",null,"No data/result available");var t=(0,b.getExpressionScatterData)(this.data,this.props.store.hugoGeneSymbols),n=M.maxBy(t,function(e){return Math.ceil(Math.abs(e.x))}),r=0;return this.clickedGeneHugo&&(r=this.props.data.filter(function(t){return t.hugoGeneSymbol===e.clickedGeneHugo})[0].qValue),d.createElement("div",{className:g.default.Container},d.createElement("div",{className:g.default.LeftColumn},d.createElement(S.default,{data:t,xAxisLeftLabel:"Under-expressed",xAxisRightLabel:"Over-expressed",xAxisDomain:Math.ceil(Math.abs(n.x)),xAxisTickValues:null,onGeneNameClick:this.onGeneNameClick,onSelection:this.onSelection,onSelectionCleared:this.onSelectionCleared}),d.createElement(k.default,{selectedGeneHugo:this.clickedGeneHugo,selectedGeneEntrez:this.clickedGeneEntrez,selectedProfile:this.props.selectedProfile,fileName:"enrichments-plots",queryGenes:this.props.store.hugoGeneSymbols,selectedGeneQValue:r,store:this.props.store})),d.createElement("div",{className:g.default.TableContainer},d.createElement("div",null,d.createElement("h3",null,this.props.selectedProfile.name),d.createElement(w.default,{checkedGenes:this.checkedGenes,store:this.props.store})),d.createElement("hr",{style:{marginTop:0,marginBottom:5,borderWidth:2}}),d.createElement("div",{className:g.default.Checkboxes},d.createElement(v.Checkbox,{checked:this.overExpressedFilter,onChange:this.toggleOverExpressedFilter},"Over-expressed"),d.createElement(v.Checkbox,{checked:this.underExpressedFilter,onChange:this.toggleUnderExpressedFilter},"Under-expressed"),d.createElement(v.Checkbox,{checked:this.significanceFilter,onChange:this.toggleSignificanceFilter},"Significant only")),d.createElement(m.default,{data:this.filteredData,onCheckGene:this.onCheckGene,onGeneNameClick:this.onGeneNameClick,dataStore:this.dataStore})))}},{key:"data",get:function(){return(0,b.getExpressionRowData)(this.props.data,this.props.selectedProfile.datatype,this.props.store.hugoGeneSymbols)}},{key:"filteredData",get:function(){return(0,b.getFilteredData)(this.data,this.underExpressedFilter,this.overExpressedFilter,this.significanceFilter,this.selectedGenes)}}]),t}(d.Component);P([f.observable],j.prototype,"overExpressedFilter",void 0),P([f.observable],j.prototype,"underExpressedFilter",void 0),P([f.observable],j.prototype,"significanceFilter",void 0),P([f.observable.shallow],j.prototype,"checkedGenes",void 0),P([f.observable],j.prototype,"clickedGeneHugo",void 0),P([f.observable],j.prototype,"clickedGeneEntrez",void 0),P([f.observable],j.prototype,"selectedGenes",void 0),P([f.observable.ref],j.prototype,"highlightedRow",void 0),P([f.computed],j.prototype,"data",null),P([f.computed],j.prototype,"filteredData",null),P([T.default],j.prototype,"toggleOverExpressedFilter",null),P([T.default],j.prototype,"toggleUnderExpressedFilter",null),P([T.default],j.prototype,"toggleSignificanceFilter",null),P([T.default],j.prototype,"onCheckGene",null),P([T.default],j.prototype,"onGeneNameClick",null),P([T.default],j.prototype,"onSelection",null),P([T.default],j.prototype,"onSelectionCleared",null),j=P([p.observer],j),t.default=j},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=n(1),d=r(c),p=n(3),f=r(p),h=n(13),m=n(33),y=n(873),g=n(1131);n(1133);var v=n(307),b=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},_=function(e){function t(){o(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.activeTab="all",e.resultsViewPageWidth=1150,e.handleTabClick=e.handleTabClick.bind(e),e.pivotData=e.pivotData.bind(e),e.mapStudyIdToShortName=e.mapStudyIdToShortName.bind(e),e}return i(t,e),l(t,[{key:"handleTabClick",value:function(e){this.activeTab=e}},{key:"pivotData",value:function(e){this.groupAlterationsBy_userSelection=e}},{key:"mapStudyIdToShortName",value:function(e){return e in this.props.studyMap?this.props.studyMap[e].shortName:e}},{key:"render",value:function(){var e=this;return d.createElement("div",{ref:function(t){return e.resultsViewPageContent=t},"data-test":"cancerTypeSummaryWrapper"},d.createElement(y.MSKTabs,{onTabClick:this.handleTabClick,enablePagination:!0,unmountOnHide:!0,arrowStyle:{"line-height":.8},tabButtonStyle:"pills",activeTabId:this.activeTab,className:"pillTabs"},this.tabs))}},{key:"defaultTabId",get:function(){return"all"}},{key:"groupAlterationsBy",get:function(){if(void 0===this.groupAlterationsBy_userSelection){if(this.props.studies.length>1)return"studyId";return 1===f.chain(this.props.samplesExtendedWithClinicalData).map(function(e){return e.cancerType}).uniq().value().length?"cancerTypeDetailed":"cancerType"}return this.groupAlterationsBy_userSelection}},{key:"tabs",get:function(){var e=this,t="studyId"===this.groupAlterationsBy?this.mapStudyIdToShortName:void 0,n=(0,v.getAlterationCountsForCancerTypesByGene)(this.props.alterationsByGeneBySampleKey,this.props.samplesExtendedWithClinicalData,this.groupAlterationsBy),r=f.map(this.props.genes,function(r){var o=n[r.hugoGeneSymbol],a=f.reduce(o,function(e,t){return e+t.alterationTotal},0),i=0===a?{color:"#bbb"}:void 0;return d.createElement(y.MSKTab,s({key:r.hugoGeneSymbol,id:"summaryTab"+r.hugoGeneSymbol,linkText:r.hugoGeneSymbol},{anchorStyle:i}),d.createElement(g.CancerSummaryContent,{groupedAlterationData:n[r.hugoGeneSymbol],groupAlterationsBy:e.groupAlterationsBy,gene:r.hugoGeneSymbol,labelTransformer:t,handlePivotChange:e.pivotData,width:e.resultsViewPageWidth}))});if(r.length>1){var o=(0,v.getAlterationCountsForCancerTypesForAllGenes)(this.props.alterationsByGeneBySampleKey,this.props.samplesExtendedWithClinicalData,this.groupAlterationsBy);r.unshift(d.createElement(y.MSKTab,{key:"all",id:"allGenes",linkText:"All Queried Genes"},d.createElement(g.CancerSummaryContent,{gene:"all",width:this.resultsViewPageWidth,groupedAlterationData:o,handlePivotChange:this.pivotData,labelTransformer:t,groupAlterationsBy:this.groupAlterationsBy})))}return r}}]),t}(d.Component);b([h.observable],_.prototype,"activeTab",void 0),b([h.observable],_.prototype,"resultsViewPageWidth",void 0),b([h.observable],_.prototype,"groupAlterationsBy_userSelection",void 0),b([h.computed],_.prototype,"tabs",null),_=b([m.observer],_),t.default=_},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){return e/t*100}Object.defineProperty(t,"__esModule",{value:!0}),t.CancerSummaryContent=t.OrderedAlterationLabelMap=void 0;var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.calculatePercentage=u;var p=n(1),f=o(p),h=n(3),m=o(h),y=n(63),g=n(13),v=n(33),b=n(1062),_=r(b),w=n(176),x=n(174),S=r(x),C=n(889),k=r(C);n(929),n(1063);var E=n(1132),M=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":d(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},A=t.OrderedAlterationLabelMap={multiple:"Multiple Alterations",protExpressionDown:"Protein Downregulation",protExpressionUp:"Protein Upregulation",mrnaExpressionDown:"mRNA Downregulation",mrnaExpressionUp:"mRNA Upregulation",hetloss:"Shallow Deletion",homdel:"Deep Deletion",gain:"Gain",amp:"Amplification",fusion:"Fusion",mutated:"Mutation"},T={mutated:"#008000",amp:"#ff0000",homdel:"#0000ff",hetloss:"#8fd8d8",gain:"rgb(255,182,193)",fusion:"#8B00C9",mrnaExpressionUp:"#FF989A",mrnaExpressionDown:"#529AC8",protExpressionUp:"#FF989A",protExpressionDown:"#E0FFFF",multiple:"#666"},O=[{value:"studyId",label:"Cancer Study"},{value:"cancerType",label:"Cancer Type"},{value:"cancerTypeDetailed",label:"Cancer Type Detailed"}],P=function(t){function n(e){i(this,n);var t=s(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.tempAltCasesInputValue=0,t.tempTotalCasesInputValue=0,t.pngAnchor="",t.pdf={anchor:"",width:0,height:0},t.showControls=!1,t.hideGenomicAlterations=!1,t.yAxis="alt-freq",t.xAxis="y-axis",t.altCasesValue=0,t.totalCasesValue=0,t.tempTotalCasesValue=0,t.tempAltCasesValue=0,t.viewCountsByCancerSubType=!1,t.svgsaver=new k.default,t.handleYAxisChange=t.handleYAxisChange.bind(t),t.handleXAxisChange=t.handleXAxisChange.bind(t),t.handleGenomicCheckboxChange=t.handleGenomicCheckboxChange.bind(t),t.handleCancerTypeCheckboxChange=t.handleCancerTypeCheckboxChange.bind(t),t.handleAltSliderChange=t.handleAltSliderChange.bind(t),t.handleTotalSliderChange=t.handleTotalSliderChange.bind(t),t.handleAltSliderChangeComplete=t.handleAltSliderChangeComplete.bind(t),t.handleTotalSliderChangeComplete=t.handleTotalSliderChangeComplete.bind(t),t.handleAltInputChange=t.handleAltInputChange.bind(t),t.handleAltInputKeyPress=t.handleAltInputKeyPress.bind(t),t.handleTotalInputChange=t.handleTotalInputChange.bind(t),t.handleTotalInputKeyPress=t.handleTotalInputKeyPress.bind(t),t.toggleShowControls=t.toggleShowControls.bind(t),t.setPngAnchor=t.setPngAnchor.bind(t),t.downloadSvg=t.downloadSvg.bind(t),t.downloadPng=t.downloadPng.bind(t),t}return l(n,t),c(n,[{key:"getYValue",value:function(e,t){return"abs-count"===this.yAxis?e:e/t*100}},{key:"determineSorterAndDirection",value:function(){var e=this,t=function(t){var n=e.countsData[t];return n.alteredSampleCount/n.sampleTotal},n=function(t){return e.countsData[t].alteredSampleCount},r=function(e){return e},o=void 0,a=void 0;return"x-axis"===this.xAxis?(o=r,a="asc"):(o="abs-count"===this.yAxis?n:t,a="desc"),{sorter:o,dir:a}}},{key:"transformLabel",value:function(e){return this.props.labelTransformer?this.props.labelTransformer(e):e}},{key:"handleYAxisChange",value:function(e){this.yAxis=e.target.value,this.altCasesValue=0,this.handleAltSliderChange(0)}},{key:"handleXAxisChange",value:function(e){this.xAxis=e.target.value}},{key:"handleCancerTypeCheckboxChange",value:function(){this.viewCountsByCancerSubType=!1===this.viewCountsByCancerSubType}},{key:"handleGenomicCheckboxChange",value:function(){this.hideGenomicAlterations=!this.hideGenomicAlterations}},{key:"handleAltSliderChange",value:function(e){this.tempAltCasesValue=e,this.tempAltCasesInputValue=e}},{key:"handleTotalSliderChange",value:function(e){this.tempTotalCasesValue=e,this.tempTotalCasesInputValue=e}},{key:"handleAltInputKeyPress",value:function(e){if(13===e.charCode){if(isNaN(this.tempAltCasesInputValue))return void(this.tempAltCasesInputValue=0);this.tempAltCasesInputValue=Number(this.tempAltCasesInputValue),this.tempAltCasesValue=this.tempAltCasesInputValue,this.handleAltSliderChangeComplete()}}},{key:"handleTotalInputKeyPress",value:function(e){if(13===e.charCode){if(isNaN(this.tempTotalCasesInputValue))return void(this.tempTotalCasesInputValue=0);this.tempTotalCasesInputValue=Number(this.tempTotalCasesInputValue),this.tempTotalCasesValue=this.tempTotalCasesInputValue,this.handleTotalSliderChangeComplete()}}},{key:"handleAltInputChange",value:function(e){this.tempAltCasesInputValue=e.target.value.replace(/[^0-9\.]/g,"")}},{key:"handleTotalInputChange",value:function(e){this.tempTotalCasesInputValue=e.target.value.replace(/[^0-9\.]/g,"")}},{key:"handleAltSliderChangeComplete",value:function(){this.altCasesValue=this.tempAltCasesValue}},{key:"handleTotalSliderChangeComplete",value:function(){this.totalCasesValue=this.tempTotalCasesValue}},{key:"toggleShowControls",value:function(){this.showControls=!this.showControls}},{key:"setPngAnchor",value:function(e){this.pngAnchor=e}},{key:"downloadSvg",value:function(){this.svgsaver.asSvg(this.chartComponent.svgContainer.firstChild,"cancer_types_summary.svg")}},{key:"downloadPng",value:function(){this.svgsaver.asPng(this.chartComponent.svgContainer.firstChild,"cancer_types_summary.png")}},{key:"render",value:function(){var t=this;return f.createElement(w.If,{condition:this.hasAlterations},f.createElement(w.Then,null,f.createElement("div",null,f.createElement("div",{className:"cancer-summary--main-options"},f.createElement(y.ButtonGroup,null,O.map(function(n,r){return f.createElement(y.Radio,{checked:n.value===t.props.groupAlterationsBy,onChange:function(n){t.props.handlePivotChange(e(n.target).attr("data-value"))},inline:!0,"data-value":n.value},n.label)}))),f.createElement("div",{role:"group",className:"btn-group cancer-summary--chart-buttons"},f.createElement("button",{onClick:this.toggleShowControls,className:"btn btn-default btn-xs"},"Customize ",f.createElement("i",{className:"fa fa-cog","aria-hidden":"true"})),f.createElement("button",{className:"btn btn-default btn-xs",onClick:this.downloadPng},"PNG ",f.createElement("i",{className:"fa fa-cloud-download","aria-hidden":"true"})),f.createElement("button",{className:"btn btn-default btn-xs",onClick:this.downloadSvg},"SVG ",f.createElement("i",{className:"fa fa-cloud-download","aria-hidden":"true"}))),f.createElement(y.Panel,{className:(0,S.default)({hidden:!this.showControls},"cancer-summary-secondary-options")},f.createElement("button",{type:"button",onClick:this.toggleShowControls,className:"close"},"×"),this.controls),f.createElement(E.CancerSummaryChart,{key:Date.now(),data:this.chartData.data,ref:function(e){return t.chartComponent=e},countsByGroup:this.countsData,representedAlterations:this.chartData.representedAlterations,alterationTypes:A,isPercentage:"alt-freq"===this.yAxis,colors:T,hideGenomicAlterations:this.hideGenomicAlterations,xLabels:this.chartData.labels}))),f.createElement(w.Else,null,f.createElement("div",{className:"alert alert-info"},"There are no alterations in this gene.")))}},{key:"countsData",get:function(){return this.props.groupedAlterationData}},{key:"chartData",get:function(){var e=this,t=this.determineSorterAndDirection(),n=t.dir,r=t.sorter,o={},a=m.chain(this.countsData).keys().orderBy(r,[n]).value(),i=0,s=0,l=0,c=[],d=m.map(A,function(t,n){return m.reduce(a,function(t,r){var a=e.countsData[r],d=u(a.alteredSampleCount,a.sampleTotal),p=void 0;p="abs-count"===e.yAxis?a.alteredSampleCount>=e.tempAltCasesValue:d>=e.tempAltCasesValue;var f=a.sampleTotal>=e.totalCasesValue;if(p&&f){e.props.labelTransformer?c.push(e.props.labelTransformer(r)):c.push(r),i=d>i?d:i,s=a.alteredSampleCount>s?a.alteredSampleCount:s,l=a.sampleTotal>l?a.sampleTotal:l;var h=a.alterationTypeCounts[n];h>0&&(o[n]=!0),t.push({alterationType:n,x:r,y:e.getYValue(h,a.sampleTotal)})}return t},[])});return{labels:m.uniq(c),data:d,representedAlterations:o,maxPercentage:i,maxAbsoluteCount:s,maxSampleCount:l}}},{key:"altCasesMax",get:function(){return"abs-count"===this.yAxis?this.chartData.maxAbsoluteCount:this.chartData.maxPercentage}},{key:"totalCasesMax",get:function(){return this.chartData.maxSampleCount}},{key:"hasAlterations",get:function(){return m.reduce(this.countsData,function(e,t){return e+t.alterationTotal},0)>0}},{key:"controls",get:function(){var e=this,t="alt-freq"===this.yAxis?"%":"";return f.createElement("div",{style:{display:"flex"},className:"cancer-summary--form-controls"},f.createElement("div",null,f.createElement(y.FormGroup,null,f.createElement(y.ControlLabel,null,"Y-Axis Value:"),f.createElement(y.FormControl,{componentClass:"select","data-test":"cancerSummaryYAxisSelect",onChange:this.handleYAxisChange,ref:function(t){return e.inputYAxisEl=t}},f.createElement("option",{value:"alt-freq"},"Alteration Frequency"),f.createElement("option",{value:"abs-count"},"Absolute Counts"))),f.createElement(y.FormGroup,null,f.createElement(y.ControlLabel,null,"Sort X-Axis By:"),f.createElement(y.FormControl,{componentClass:"select","data-test":"cancerSummaryXAxisSelect",onChange:this.handleXAxisChange,ref:function(t){return e.inputXAxisEl=t}},f.createElement("option",{value:"y-axis"},"Y-Axis Values"),f.createElement("option",{value:"x-axis"},"Alphabetically")))),f.createElement("div",{style:{width:400}},f.createElement("div",{className:"slider-holder"},f.createElement(y.FormGroup,null,f.createElement(y.ControlLabel,null,"Min. # Total Cases:"),f.createElement("div",{className:"slider custom-labels"},f.createElement(_.default,{min:0,max:this.totalCasesMax,value:this.tempTotalCasesValue,labels:a({0:0},this.totalCasesMax,this.totalCasesMax),onChange:this.handleTotalSliderChange,onChangeComplete:this.handleTotalSliderChangeComplete}))),f.createElement(y.FormGroup,null,f.createElement(y.ControlLabel,{className:"invisible"},"Hidden"),f.createElement(y.FormControl,{type:"text",value:this.tempTotalCasesInputValue,"data-test":"sampleTotalThresholdInput",onChange:this.handleTotalInputChange,onKeyPress:this.handleTotalInputKeyPress}))),f.createElement("div",{className:"slider-holder"},f.createElement(y.FormGroup,null,f.createElement(y.ControlLabel,null,"Min. "+("alt-freq"===this.yAxis?"%":"#")+" Altered Cases:"),f.createElement("div",{className:"slider custom-labels"},f.createElement(_.default,{min:0,max:this.altCasesMax,value:this.tempAltCasesValue,labels:a({0:0+t},this.altCasesMax,Math.ceil(this.altCasesMax)+t),format:function(e){return e+t},onChange:this.handleAltSliderChange,onChangeComplete:this.handleAltSliderChangeComplete}))),f.createElement(y.FormGroup,null,f.createElement(y.ControlLabel,{className:"invisible"},"Hidden"),f.createElement(y.FormControl,{type:"text",value:this.tempAltCasesInputValue+t,onChange:this.handleAltInputChange,"data-test":"alterationThresholdInput",onKeyPress:this.handleAltInputKeyPress})))),f.createElement("div",null,f.createElement(y.Checkbox,{checked:!this.hideGenomicAlterations,onChange:this.handleGenomicCheckboxChange},"Show Genomic Alteration Types")))}}]),n}(f.Component);M([g.observable],P.prototype,"tempAltCasesInputValue",void 0),M([g.observable],P.prototype,"tempTotalCasesInputValue",void 0),M([g.observable],P.prototype,"pngAnchor",void 0),M([g.observable],P.prototype,"pdf",void 0),M([g.observable],P.prototype,"showControls",void 0),M([g.observable],P.prototype,"hideGenomicAlterations",void 0),M([g.observable],P.prototype,"yAxis",void 0),M([g.observable],P.prototype,"xAxis",void 0),M([g.observable],P.prototype,"altCasesValue",void 0),M([g.observable],P.prototype,"totalCasesValue",void 0),M([g.observable],P.prototype,"tempTotalCasesValue",void 0),M([g.observable],P.prototype,"tempAltCasesValue",void 0),M([g.observable],P.prototype,"viewCountsByCancerSubType",void 0),M([g.computed],P.prototype,"chartData",null),M([g.computed],P.prototype,"altCasesMax",null),M([g.computed],P.prototype,"totalCasesMax",null),M([g.computed],P.prototype,"hasAlterations",null),M([g.computed],P.prototype,"controls",null),t.CancerSummaryContent=P=M([v.observer],P),t.CancerSummaryContent=P}).call(t,n(90))},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return h.round(100*e,2)}function l(e){var t=e[0].map(function(e){return e.x}),n=e.reduce(function(e,t){return t.forEach(function(t){e[t.x]=e[t.x]||0,e[t.x]+=t.y}),e},{});return t.map(function(e){return{x:e,y:n[e],alterationType:"whatever"}})}Object.defineProperty(t,"__esModule",{value:!0}),t.CancerSummaryChart=t.HORIZONTAL_SCROLLING_THRESHOLD=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.mergeAlterationDataAcrossAlterationTypes=l;var d=n(1),p=r(d),f=n(3),h=r(f),m=n(862),y=n(13),g=n(33),v=n(863),b=function(e){return e&&e.__esModule?e:{default:e}}(v),_=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},w=t.HORIZONTAL_SCROLLING_THRESHOLD=37,x=function(e){function t(){o(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.svgContainer=HTMLElement,e.tickFormat=e.tickFormat.bind(e),e}return i(t,e),u(t,[{key:"tickFormat",value:function(){return this.props.isPercentage?function(e){return e+"%"}:function(e){return e}}},{key:"hideTooltip",value:function(){this.tooltipModel=null}},{key:"buildTooltip",value:function(e){var t=this;return p.createElement("div",{className:"popover right",onMouseLeave:function(){return t.hideTooltip()},style:{display:"block",position:"absolute",top:e.y,width:500,left:e.x}},p.createElement("div",{className:"arrow",style:{top:30}}),p.createElement("div",{className:"popover-content"},p.createElement("strong",null,"Summary for ",e.groupName),p.createElement("p",null,"Gene altered in ",s(e.alterationData.alteredSampleCount/e.alterationData.sampleTotal),"% of ",e.alterationData.sampleTotal," cases"),p.createElement("table",{className:"table table-striped"},p.createElement("thead",null,p.createElement("tr",null,p.createElement("th",null,"Alteration"),p.createElement("th",null,"Frequency"))),p.createElement("tbody",null,h.reduce(this.props.alterationTypes,function(t,n,r){if(r in e.alterationData.alterationTypeCounts&&e.alterationData.alterationTypeCounts[r]>0){var o=e.alterationData.alterationTypeCounts[r];t.push(p.createElement("tr",null,p.createElement("td",null,n),p.createElement("td",null,s(e.alterationData.alterationTypeCounts[r]/e.alterationData.sampleTotal),"% (",o," ",1===o?"case":"cases",")")))}return t},[]).reverse()))))}},{key:"render",value:function(){var e=this,t=this.props.hideGenomicAlterations?[l(this.props.data)]:this.props.data;return p.createElement("div",{"data-test":"cancerTypeSummaryChart"},p.createElement("div",{style:this.overflowStyle,className:"borderedChart"},p.createElement("div",{ref:function(t){return e.scrollPane=t},style:{fontFamily:"Arial, Helvetica",overflowX:"auto",overflowY:"hidden"}},this.tooltipModel&&this.buildTooltip(this.tooltipModel),p.createElement(m.VictoryChart,{width:this.width,height:this.height,theme:b.default,padding:{bottom:this.bottomPadding,top:this.topPadding,left:this.leftPadding,right:this.rightPadding},domainPadding:{x:20,y:20},containerComponent:p.createElement(m.VictoryContainer,{containerRef:function(t){return e.svgContainer=t},responsive:!1})},p.createElement(m.VictoryAxis,{dependentAxis:!0,axisLabelComponent:p.createElement(m.VictoryLabel,{dy:-50}),label:this.yAxisLabel,tickFormat:this.tickFormat}),p.createElement(m.VictoryAxis,{tickFormat:this.props.xLabels,tickLabelComponent:p.createElement(m.VictoryLabel,{angle:-85,verticalAnchor:"middle",textAnchor:"end"})}),p.createElement(m.VictoryStack,{colorScale:this.colorArray},t.map(function(t,n){return p.createElement(m.VictoryBar,{style:{data:{width:e.barWidth}},events:e.userEvents,data:t,key:n})})),!this.props.hideGenomicAlterations&&p.createElement(m.VictoryLegend,{x:10,y:this.height-30,orientation:"horizontal",data:this.legendData})))))}},{key:"width",get:function(){return this.bodyWidth+this.rightPadding+this.leftPadding}},{key:"bodyWidth",get:function(){return this.props.xLabels.length*(this.barWidth+8)}},{key:"rightPadding",get:function(){return this.bodyWidth>this.legendWidth?20:this.legendWidth-this.bodyWidth+20}},{key:"height",get:function(){return 300+this.bottomPadding}},{key:"legendWidth",get:function(){var e=this.legendData.map(function(e){return e.name});return 6*e.join("").length+40*e.length}},{key:"legendX",get:function(){return 20}},{key:"leftPadding",get:function(){return 80}},{key:"bottomPadding",get:function(){return 7*this.longestXLabelLength+40}},{key:"topPadding",get:function(){return 20}},{key:"barWidth",get:function(){return 20}},{key:"colorArray",get:function(){var e=this;return h.map(this.props.alterationTypes,function(t,n){return e.props.colors[n]})}},{key:"legendData",get:function(){var e=this;return h.reduce(this.props.alterationTypes,function(t,n,r){return r in e.props.representedAlterations&&t.push({name:n,symbol:{fill:e.props.colors[r]}}),t},[]).reverse()}},{key:"yAxisLabel",get:function(){return this.props.isPercentage?"Alteration Frequency":"Absolute Counts"}},{key:"longestXLabelLength",get:function(){var e=this.props.xLabels.map(function(e){return 2*(e.match(/[A-Z]/g)||[]).length+1*(e.match(/[a-z]/g)||[]).length+2*(e.match(/\s/g)||[]).length});return h.max(e)}},{key:"userEvents",get:function(){var e=this,t=this;return[{target:"data",eventHandlers:{onMouseEnter:function(){return[{target:"data",mutation:function(n){n.datum.x in t.props.countsByGroup?t.tooltipModel={x:n.x+20-e.scrollPane.scrollLeft,y:n.y-18,groupName:n.datum.x,alterationData:t.props.countsByGroup[n.datum.x]}:t.hideTooltip()}}]},onMouseLeave:function(){return[{target:"data",mutation:function(e){t.hideTooltip()}}]}}}]}},{key:"overflowStyle",get:function(){return{position:"relative",display:"inline-block",width:this.props.xLabels.length>w?"100%":"auto"}}}]),t}(p.Component);_([y.observable.ref],x.prototype,"tooltipModel",void 0),t.CancerSummaryChart=x=_([g.observer],x),t.CancerSummaryChart=x},function(e,t){},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(1),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),d=n(33),p=n(873),f=n(1135),h=r(f),m=n(13),y=n(64),g=r(y);n(1165);var v=n(854),b=r(v),_=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},w=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleTabChange.bind(n),n.mutationsGeneTab=n.props.store.hugoGeneSymbols[0],n}return i(t,e),s(t,[{key:"render",value:function(){var e=this,t=this.props.routing?this.props.routing.location.query.mutationsGeneTab:this.mutationsGeneTab;return c.createElement("div",null,c.createElement(b.default,{isLoading:this.props.store.mutationMapperStores.isPending}),this.props.store.mutationMapperStores.isComplete&&c.createElement(p.MSKTabs,{id:"mutationsPageTabs",activeTabId:t,onTabClick:function(t){return e.handleTabChange(t)},className:"pillTabs resultsPageMutationsGeneTabs",enablePagination:!0,arrowStyle:{"line-height":.8},tabButtonStyle:"pills",unmountOnHide:!0},this.generateTabs(this.props.store.hugoGeneSymbols)))}},{key:"generateTabs",value:function(e){var t=this,n=[];return e.forEach(function(e){var r=t.props.store.getMutationMapperStore(e);r&&n.push(c.createElement(p.MSKTab,{key:e,id:e,linkText:e},c.createElement(h.default,{store:r,discreteCNACache:t.props.store.discreteCNACache,genomeNexusEnrichmentCache:t.props.store.genomeNexusEnrichmentCache,oncoKbEvidenceCache:t.props.store.oncoKbEvidenceCache,pubMedCache:t.props.store.pubMedCache,cancerTypeCache:t.props.store.cancerTypeCache,mutationCountCache:t.props.store.mutationCountCache,pdbHeaderCache:t.props.store.pdbHeaderCache,myCancerGenomeData:t.props.store.myCancerGenomeData,config:g.default})))}),n}},{key:"handleTabChange",value:function(e){this.props.routing?this.props.routing.updateRoute({mutationsGeneTab:e}):this.mutationsGeneTab=e}}]),t}(c.Component);_([m.observable],w.prototype,"mutationsGeneTab",void 0),w=_([d.observer],w),t.default=w},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=n(1),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(c),p=n(33),f=n(854),h=r(f),m=n(1136),y=r(m),g=n(180),v=n(1145),b=r(v),_=n(1146),w=r(_),x=n(1155),S=r(x),C=n(1157),k=r(C),E=n(13),M=n(1164),A=r(M),T=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},O=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.is3dPanelOpen=!1,n.lollipopPlotGeneX=0,n.geneWidth=665,n.open3dPanel=n.open3dPanel.bind(n),n.close3dPanel=n.close3dPanel.bind(n),n.toggle3dPanel=n.toggle3dPanel.bind(n),n.handlers={resetDataStore:function(){n.props.store.dataStore.resetFilterAndSelection()},onXAxisOffset:(0,E.action)(function(e){n.lollipopPlotGeneX=e})},n}return i(t,e),l(t,[{key:"render",value:function(){return d.createElement("div",null,this.is3dPanelOpen&&d.createElement(y.default,s({mutationDataStore:this.props.store.dataStore,pdbChainDataStore:this.props.store.pdbChainDataStore,pdbAlignmentIndex:this.props.store.indexedAlignmentData,pdbHeaderCache:this.props.pdbHeaderCache,residueMappingCache:this.props.store.residueMappingCache,uniprotId:this.props.store.uniprotId.result,onClose:this.close3dPanel},g.DEFAULT_PROTEIN_IMPACT_TYPE_COLORS)),d.createElement(h.default,{isLoading:this.props.store.mutationData.isPending}),!this.props.store.mutationData.isPending&&d.createElement("div",null,d.createElement(h.default,{isLoading:this.props.store.pfamDomainData.isPending}),!this.props.store.pfamDomainData.isPending&&d.createElement("div",{style:{display:"flex"}},d.createElement("div",{className:"borderedChart",style:{marginRight:10}},d.createElement(w.default,s({store:this.props.store,onXAxisOffset:this.handlers.onXAxisOffset,geneWidth:this.geneWidth},g.DEFAULT_PROTEIN_IMPACT_TYPE_COLORS)),d.createElement(k.default,{store:this.props.store,pdbHeaderCache:this.props.pdbHeaderCache,geneWidth:this.geneWidth,geneXOffset:this.lollipopPlotGeneX,maxChainsHeight:200})),d.createElement("div",{className:"mutationMapperMetaColumn"},this.geneSummary,this.mutationRateSummary,d.createElement("div",null,d.createElement(S.default,s({dataStore:this.props.store.dataStore},g.DEFAULT_PROTEIN_IMPACT_TYPE_COLORS))),d.createElement("button",{className:"btn btn-default btn-sm",disabled:0===this.props.store.pdbChainDataStore.allData.length,onClick:this.toggle3dPanel,"data-test":"view3DStructure"},"View 3D Structure"))),d.createElement("hr",{style:{marginTop:20}}),!this.props.store.dataStore.showingAllData&&d.createElement("div",{style:{marginTop:"5px",marginBottom:"5px"}},d.createElement("span",{style:{color:"red",fontSize:"14px",fontFamily:"verdana,arial,sans-serif"}},d.createElement("span",null,"Current view shows filtered results. Click "),d.createElement("a",{style:{cursor:"pointer"},onClick:this.handlers.resetDataStore},"here"),d.createElement("span",null," to reset all filters."))),d.createElement(h.default,{isLoading:this.props.store.clinicalDataForSamples.isPending||this.props.store.studiesForSamplesWithoutCancerTypeClinicalData.isPending}),!this.props.store.clinicalDataForSamples.isPending&&!this.props.store.studiesForSamplesWithoutCancerTypeClinicalData.isPending&&d.createElement(b.default,{uniqueSampleKeyToTumorType:this.props.store.uniqueSampleKeyToTumorType,oncoKbAnnotatedGenes:this.props.store.oncoKbAnnotatedGenes,discreteCNACache:this.props.discreteCNACache,studyIdToStudy:this.props.store.studyIdToStudy.result,genomeNexusEnrichmentCache:this.props.genomeNexusEnrichmentCache,molecularProfileIdToMolecularProfile:this.props.store.molecularProfileIdToMolecularProfile.result,oncoKbEvidenceCache:this.props.oncoKbEvidenceCache,pubMedCache:this.props.pubMedCache,mutationCountCache:this.props.mutationCountCache,dataStore:this.props.store.dataStore,itemsLabelPlural:this.itemsLabelPlural,downloadDataFetcher:this.props.store.downloadDataFetcher,myCancerGenomeData:this.props.myCancerGenomeData,hotspotData:this.props.store.indexedHotspotData,cosmicData:this.props.store.cosmicData.result,oncoKbData:this.props.store.oncoKbData,civicGenes:this.props.store.civicGenes,civicVariants:this.props.store.civicVariants,userEmailAddress:this.props.config.userEmailAddress,enableOncoKb:this.props.config.showOncoKB,enableFunctionalImpact:this.props.config.showGenomeNexus,enableHotspot:this.props.config.showHotspot,enableMyCancerGenome:this.props.config.showMyCancerGenome,enableCivic:this.props.config.showCivic})))}},{key:"toggle3dPanel",value:function(){this.is3dPanelOpen?this.close3dPanel():this.open3dPanel()}},{key:"open3dPanel",value:function(){this.is3dPanelOpen=!0,this.props.store.pdbChainDataStore.selectFirstChain()}},{key:"close3dPanel",value:function(){this.is3dPanelOpen=!1,this.props.store.pdbChainDataStore.selectUid()}},{key:"geneSummary",get:function(){var e=this.props.store.gene.hugoGeneSymbol,t=this.props.store.uniprotId.result,n=this.props.store.canonicalTranscript.result&&this.props.store.canonicalTranscript.result.transcriptId;return d.createElement("div",{style:{paddingBottom:10}},d.createElement("h4",null,e),d.createElement("div",{className:this.props.store.uniprotId.result?"":"invisible"},d.createElement("span",{"data-test":"GeneSummaryUniProt"},"UniProt: ",d.createElement("a",{href:"http://www.uniprot.org/uniprot/"+t,target:"_blank"},t))),d.createElement("div",{className:this.props.store.canonicalTranscript.result?"":"invisible"},d.createElement("span",null,"Transcript: "),d.createElement("a",{href:"http://grch37.ensembl.org/homo_sapiens/Transcript/Summary?t="+n,target:"_blank"},n)))}},{key:"mutationRateSummary",get:function(){return this.props.store.germlineConsentedSamples.result&&this.props.store.mutationData.isComplete&&this.props.store.mutationData.result.length>0?d.createElement(A.default,{hugoGeneSymbol:this.props.store.gene.hugoGeneSymbol,molecularProfileIdToMolecularProfile:this.props.store.molecularProfileIdToMolecularProfile,mutations:this.props.store.mutationData.result,samples:this.props.store.samples.result,germlineConsentedSamples:this.props.store.germlineConsentedSamples}):null}},{key:"multipleMutationInfo",get:function(){var e=this.props.store.dataStore.duplicateMutationCountInMultipleSamples,t=1===e?"mutation":"mutations";return e>0?": includes "+e+" duplicate "+t+" in patients with multiple samples":""}},{key:"itemsLabelPlural",get:function(){return"Mutations"+this.multipleMutationInfo}}]),t}(d.Component);T([E.observable],O.prototype,"is3dPanelOpen",void 0),T([E.observable],O.prototype,"lollipopPlotGeneX",void 0),T([E.observable],O.prototype,"geneWidth",void 0),T([E.computed],O.prototype,"geneSummary",null),T([E.computed],O.prototype,"mutationRateSummary",null),T([E.computed],O.prototype,"multipleMutationInfo",null),T([E.computed],O.prototype,"itemsLabelPlural",null),O=T([p.observer],O),t.default=O},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d=n(1),p=o(d),f=n(3),h=o(f),m=n(63),y=n(176),g=n(177),v=n(13),b=n(33),_=n(1137),w=r(_),x=n(179),S=r(x),C=n(174),k=r(C),E=n(173),M=r(E),A=n(180),T=n(1138),O=r(T),P=n(1002),j=r(P),I=n(1001),D=n(1143),N=r(D),R=n(1144),L=r(R),F=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},z=function(e){function t(){i(this,t);var e=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.isCollapsed=!1,e.isIncreasedSize=!1,e.proteinScheme=I.ProteinScheme.CARTOON,e.proteinColor=I.ProteinColor.UNIFORM,e.sideChain=I.SideChain.SELECTED,e.mutationColor=I.MutationColor.MUTATION_TYPE,e.displayBoundMolecules=!0,e.containerRefHandler=e.containerRefHandler.bind(e),e.toggleCollapse=e.toggleCollapse.bind(e),e.toggleDoubleSize=e.toggleDoubleSize.bind(e),e.handleProteinSchemeChange=e.handleProteinSchemeChange.bind(e),e.handleProteinColorChange=e.handleProteinColorChange.bind(e),e.handleSideChainChange=e.handleSideChainChange.bind(e),e.handleMutationColorChange=e.handleMutationColorChange.bind(e),e.handleBoundMoleculeChange=e.handleBoundMoleculeChange.bind(e),e.handlePyMolDownload=e.handlePyMolDownload.bind(e),e}return l(t,e),u(t,[{key:"selectionTitle",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"top",r=null;return t&&(r=this.defaultInfoTooltip(t,n)),p.createElement("span",null,e," ",r,":")}},{key:"defaultInfoTooltip",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top",n=function(){return e};return p.createElement(M.default,{placement:t,overlay:n,arrowContent:p.createElement("div",{className:"rc-tooltip-arrow-inner"}),destroyTooltipOnHide:!0},p.createElement("i",{className:"fa fa-info-circle"}))}},{key:"proteinColorTooltipContent",value:function(){return p.createElement("div",{style:{maxWidth:400,maxHeight:200,overflowY:"auto"}},"Color options for the protein structure. ",p.createElement("br",null),p.createElement("br",null),p.createElement("b",null,"Uniform:")," Colors the entire protein structure with a",p.createElement("span",{className:L.default.loop}," single color"),". ",p.createElement("br",null),p.createElement("b",null,"Secondary structure:")," Colors the protein by secondary structure. Assigns different colors for ",p.createElement("span",{className:L.default["alpha-helix"]},"alpha helices"),",",p.createElement("span",{className:L.default["beta-sheet"]}," beta sheets"),", and",p.createElement("span",{className:L.default.loop}," loops"),". This color option is not available for the space-filling protein scheme. ",p.createElement("br",null),p.createElement("b",null,"N-C rainbow:")," Colors the protein with a rainbow gradient from red (N-terminus) to blue (C-terminus). ",p.createElement("br",null),p.createElement("b",null,"Atom Type:")," Colors the structure with respect to the atom type (CPK color scheme). This color option is only available for the space-filling protein scheme. ",p.createElement("br",null),p.createElement("br",null),"The selected chain is always displayed with full opacity while the rest of the structure has some transparency to help better focusing on the selected chain.")}},{key:"sideChainTooltipContent",value:function(){return p.createElement("div",{style:{maxWidth:400,maxHeight:200,overflowY:"auto"}},"Display options for the side chain atoms. ",p.createElement("br",null),p.createElement("br",null),p.createElement("b",null,"All:")," Displays the side chain atoms for every mapped residue. ",p.createElement("br",null),p.createElement("b",null,"Selected:")," Displays the side chain atoms only for the selected mutations. ",p.createElement("br",null),p.createElement("b",null,"None:")," Hides the side chain atoms. ",p.createElement("br",null),p.createElement("br",null),"This option has no effect for the space-filling protein scheme.")}},{key:"mutationColorTooltipContent",value:function(){return p.createElement("div",{style:{maxWidth:400,maxHeight:200,overflowY:"auto"}},"Color options for the mapped mutations. ",p.createElement("br",null),p.createElement("br",null),p.createElement("b",null,"Uniform:")," Colors all mutated residues with a",p.createElement("span",{className:L.default["uniform-mutation"]}," single color"),". ",p.createElement("br",null),p.createElement("b",null,"Mutation type:")," Enables residue coloring by mutation type. Mutation types and corresponding color codes are as follows:",p.createElement("ul",null,p.createElement("li",null,p.createElement("span",{className:L.default["missense-mutation"]},"Missense Mutations")),p.createElement("li",null,p.createElement("span",{className:L.default["trunc-mutation"]},"Truncating Mutations"),p.createElement("span",null," (Nonsense, Nonstop, FS del, FS ins)")),p.createElement("li",null,p.createElement("span",{className:L.default["inframe-mutation"]},"Inframe Mutations"),p.createElement("span",null," (IF del, IF ins)"))),p.createElement("b",null,"None:")," Disables coloring of the mutated residues except for manually selected (highlighted) residues. ",p.createElement("br",null),p.createElement("br",null),"Highlighted residues are colored with ",p.createElement("span",{className:L.default.highlighted},"yellow"),".")}},{key:"boundMoleculesTooltipContent",value:function(){return p.createElement("div",{style:{maxWidth:400,maxHeight:200,overflowY:"auto"}},"Displays co-crystalized molecules. This option has no effect if the current structure does not contain any co-crystalized bound molecules.")}},{key:"helpTooltipContent",value:function(){return p.createElement("div",{style:{maxWidth:400,maxHeight:200,overflowY:"auto"}},p.createElement("b",null,"Zoom in/out:")," Press and hold the SHIFT key and the left mouse button, and then move the mouse backward/forward.",p.createElement("br",null),p.createElement("b",null,"Pan:")," Press and hold the CTRL key, click and hold the left mouse button, and then move the mouse in the desired direction.",p.createElement("br",null),p.createElement("b",null,"Rotate:")," Press and hold the left mouse button, and then move the mouse in the desired direction to rotate along the x and y axes.",p.createElement("br",null))}},{key:"proteinStyleMenu",value:function(){return p.createElement("span",null,p.createElement("div",{className:"row text-center"},p.createElement("span",null,"Protein Style")),p.createElement("div",{className:"row"},p.createElement("div",{className:"col col-sm-10 col-sm-offset-1"},p.createElement("hr",null))),p.createElement("div",{className:"row"},p.createElement(m.Checkbox,{checked:this.displayBoundMolecules,onChange:this.handleBoundMoleculeChange},"Display bound molecules ",this.defaultInfoTooltip(this.boundMoleculesTooltipContent()))),p.createElement("div",{className:"row"},p.createElement("div",{className:"col col-sm-6"},p.createElement("div",{className:"row"},this.selectionTitle("Scheme")),p.createElement("div",{className:"row"},p.createElement(m.FormControl,{className:L.default["default-option-select"],componentClass:"select",value:""+this.proteinScheme,onChange:this.handleProteinSchemeChange},p.createElement("option",{value:I.ProteinScheme.CARTOON},"cartoon"),p.createElement("option",{value:I.ProteinScheme.SPACE_FILLING},"space-filling"),p.createElement("option",{value:I.ProteinScheme.TRACE},"trace")))),p.createElement("div",{className:"col col-sm-6"},p.createElement("div",{className:"row"},this.selectionTitle("Color",this.proteinColorTooltipContent())),p.createElement("div",{className:"row"},p.createElement(m.FormControl,{className:L.default["default-option-select"],componentClass:"select",value:""+this.proteinColor,onChange:this.handleProteinColorChange},p.createElement("option",{value:I.ProteinColor.UNIFORM},"uniform"),p.createElement("option",{value:I.ProteinColor.SECONDARY_STRUCTURE,disabled:this.colorBySecondaryStructureDisabled},"secondary structure"),p.createElement("option",{value:I.ProteinColor.NC_RAINBOW,disabled:this.colorByNCRainbowDisabled},"N-C rainbow"),p.createElement("option",{value:I.ProteinColor.ATOM_TYPE,disabled:this.colorByAtomTypeDisabled},"atom type"))))))}},{key:"mutationStyleMenu",value:function(){return p.createElement("span",null,p.createElement("div",{className:"row text-center"},p.createElement("span",null,"Mutation Style")),p.createElement("div",{className:"row"},p.createElement("div",{className:"col col-sm-10 col-sm-offset-1"},p.createElement("hr",null))),p.createElement("div",{className:"row"},p.createElement("div",{className:"col col-sm-6"},p.createElement("div",{className:"row"},this.selectionTitle("Side Chain",this.sideChainTooltipContent())),p.createElement("div",{className:"row"},p.createElement(m.FormControl,{className:L.default["default-option-select"],componentClass:"select",value:""+this.sideChain,onChange:this.handleSideChainChange},p.createElement("option",{value:I.SideChain.ALL},"all"),p.createElement("option",{value:I.SideChain.SELECTED},"selected"),p.createElement("option",{value:I.SideChain.NONE},"none")))),p.createElement("div",{className:"col col-sm-6"},p.createElement("div",{className:"row"},this.selectionTitle("Color",this.mutationColorTooltipContent(),"left")),p.createElement("div",{className:"row"},p.createElement(m.FormControl,{className:L.default["default-option-select"],componentClass:"select",value:""+this.mutationColor,onChange:this.handleMutationColorChange},p.createElement("option",{value:I.MutationColor.UNIFORM},"uniform"),p.createElement("option",{value:I.MutationColor.MUTATION_TYPE},"mutation type"),p.createElement("option",{value:I.MutationColor.NONE},"none"))))))}},{key:"topToolbar",value:function(){return p.createElement("div",{className:"row"},p.createElement("div",{className:"col col-sm-6"},p.createElement(m.ButtonGroup,null,p.createElement(M.default,{overlay:p.createElement("span",null,"Download PyMol script"),placement:"top"},p.createElement(m.Button,{className:"btn-sm",onClick:this.handlePyMolDownload},p.createElement("i",{className:"fa fa-cloud-download"})," PyMol")))),p.createElement("div",{className:"col col-sm-6"},p.createElement("span",{className:"pull-right"},"how to pan/zoom/rotate? ",this.defaultInfoTooltip(this.helpTooltipContent(),"left"))))}},{key:"header",value:function(){return p.createElement("div",{className:(0,k.default)("row",L.default.header)},p.createElement("div",{className:"col col-sm-10"},p.createElement("span",null,"3D Structure")),p.createElement("div",{className:"col col-sm-2"},p.createElement("span",{className:"pull-right"},p.createElement("i",{className:(0,k.default)("fa",{"fa-compress":this.isIncreasedSize,"fa-expand":!this.isIncreasedSize}),onClick:this.toggleDoubleSize,style:{marginRight:5,cursor:"pointer"}}),p.createElement("i",{className:"fa fa-minus-circle",onClick:this.toggleCollapse,style:{marginRight:5,cursor:"pointer"}}),p.createElement("i",{className:"fa fa-times-circle",onClick:this.props.onClose,style:{cursor:"pointer"}}))))}},{key:"mainContent",value:function(){return this.pdbId&&this.chainId&&this.residues?p.createElement("span",null,p.createElement("div",{className:"row"},p.createElement(j.default,{pdbId:this.pdbId,chainId:this.chainId,cache:this.props.pdbHeaderCache,truncateText:!0})),p.createElement(y.If,{condition:this.residueWarning.length>0},p.createElement("div",{className:"row"},p.createElement("div",{className:"col col-sm-12 text-center"},p.createElement("span",{className:"text-danger"},this.residueWarning)))),p.createElement("div",{className:"row",style:{paddingTop:5,paddingBottom:5}},p.createElement(O.default,{displayBoundMolecules:this.displayBoundMolecules,proteinScheme:this.proteinScheme,proteinColor:this.proteinColor,sideChain:this.sideChain,mutationColor:this.mutationColor,pdbId:this.pdbId,chainId:this.chainId,residues:this.residues,bounds:this.structureViewerBounds,containerRef:this.containerRefHandler}))):p.createElement("div",{style:{textAlign:"center"}},p.createElement(g.ThreeBounce,{size:25,style:{display:"inline-block",padding:25}}))}},{key:"render",value:function(){return p.createElement(w.default,{handle:".structure-viewer-header"},p.createElement("div",{className:(0,k.default)(L.default["main-3d-panel"],a({},L.default["increased-size-panel"],this.isIncreasedSize))},p.createElement("div",{className:"structure-viewer-header row"},this.header(),p.createElement("hr",{style:{borderTopColor:"#BBBBBB"}})),p.createElement("div",{className:(0,k.default)(L.default.body,a({},L.default["collapsed-panel"],this.isCollapsed))},this.mainContent(),p.createElement("div",{className:"row"},this.topToolbar(),p.createElement("hr",null)),p.createElement("div",{className:"row"},p.createElement("div",{className:"col col-sm-6"},this.proteinStyleMenu()),p.createElement("div",{className:"col col-sm-6"},this.mutationStyleMenu())))))}},{key:"containerRefHandler",value:function(e){this._3dMolDiv=e}},{key:"toggleCollapse",value:function(){this.isCollapsed=!this.isCollapsed}},{key:"toggleDoubleSize",value:function(){this.isIncreasedSize=!this.isIncreasedSize}},{key:"handleProteinSchemeChange",value:function(e){this.proteinScheme=parseInt(e.target.value,10),this.proteinScheme!==I.ProteinScheme.SPACE_FILLING||this.proteinColor!==I.ProteinColor.NC_RAINBOW&&this.proteinColor!==I.ProteinColor.SECONDARY_STRUCTURE?this.proteinScheme!==I.ProteinScheme.TRACE&&this.proteinScheme!==I.ProteinScheme.CARTOON||this.proteinColor!==I.ProteinColor.ATOM_TYPE||(this.proteinColor=I.ProteinColor.UNIFORM):this.proteinColor=I.ProteinColor.UNIFORM}},{key:"handleProteinColorChange",value:function(e){this.proteinColor=parseInt(e.target.value,10)}},{key:"handleSideChainChange",value:function(e){this.sideChain=parseInt(e.target.value,10)}},{key:"handleMutationColorChange",value:function(e){this.mutationColor=parseInt(e.target.value,10)}},{key:"handleBoundMoleculeChange",value:function(){this.displayBoundMolecules=!this.displayBoundMolecules}},{key:"handlePyMolDownload",value:function(){if(this.pdbId&&this.chainId){var e=this.pdbId+"_"+this.chainId+".pml";(0,S.default)(this.pyMolScript,e)}}},{key:"structureViewerBounds",get:function(){var e=void 0,t=void 0;return this.isIncreasedSize?(e=this._3dMolDiv?Math.floor(this._3dMolDiv.offsetWidth*(5/3)):"auto",t=this._3dMolDiv?2*this._3dMolDiv.offsetHeight:350):(e=this._3dMolDiv?Math.floor(this._3dMolDiv.offsetWidth/(5/3)):"auto",t=this._3dMolDiv?this._3dMolDiv.offsetHeight/2:350),{width:e,height:t}}},{key:"pdbId",get:function(){return this.pdbChain?this.pdbChain.pdbId:void 0}},{key:"chainId",get:function(){return this.pdbChain?this.pdbChain.chain:void 0}},{key:"pdbChain",get:function(){var e=this.props.pdbChainDataStore.sortedFilteredSelectedData;return 0===e.length&&(e=this.props.pdbChainDataStore.allData),0===e.length?void 0:e[0]}},{key:"residueWarning",get:function(){var e="";if(0===this.proteinPositions.length||this.residueMappingData&&0===this.residueMappingData.filter(function(e){return null===e||null!==e.data}).length)e="None of the mutations can be mapped onto this structure";else{var t=h.keys(this.selectedMutationsByPosition).length,n=t-this.mappedSelectedPositions.length;1===t&&1===n?e="Selected mutation cannot be mapped onto this structure":n>0&&(e=n+" of the selections cannot be mapped onto this structure")}return e}},{key:"residues",get:function(){var e=this;if(this.residueMappingData){var t=[];return this.residueMappingData.forEach(function(n){if(n&&n.data){var r=e.mutationsByPosition[n.data.queryPosition],o=e.props.mutationDataStore&&(e.props.mutationDataStore.isPositionSelected(n.data.queryPosition)||e.props.mutationDataStore.isPositionHighlighted(n.data.queryPosition))||!1;r&&r.length>0&&t.push({positionRange:{start:{position:n.data.pdbPosition},end:{position:n.data.pdbPosition}},color:(0,A.getColorForProteinImpactType)(r,e.props),highlighted:o})}}),h.uniq(t)}}},{key:"residueMappingData",get:function(){if(0!==this.alignmentIds.length){var e=[];if(this.props.residueMappingCache&&this.props.uniprotId&&this.pdbId&&this.chainId&&this.proteinPositions.length>0){var t=this.props.residueMappingCache.get({uniprotId:this.props.uniprotId,pdbId:this.pdbId,chainId:this.chainId,uniprotPositions:this.proteinPositions});t.result&&(e=t.result)}return e}}},{key:"mappedSelectedPositions",get:function(){var e=this;if(!this.residueMappingData)return[];var t=[];return this.residueMappingData.forEach(function(n){n&&n.data&&e.props.mutationDataStore&&e.props.mutationDataStore.isPositionSelected(n.data.queryPosition)&&t.push(n.data.queryPosition)}),h.uniq(t)}},{key:"alignmentIds",get:function(){var e=[];if(this.pdbChain&&this.props.pdbAlignmentIndex){e=void 0===this.props.pdbAlignmentIndex[this.pdbChain.pdbId][this.pdbChain.chain]?[]:this.props.pdbAlignmentIndex[this.pdbChain.pdbId][this.pdbChain.chain].map(function(e){return e.alignmentId})}return h.uniq(e)}},{key:"mutationsByPosition",get:function(){return this.props.mutationDataStore?(0,A.groupMutationsByProteinStartPos)(this.props.mutationDataStore.sortedFilteredData):{}}},{key:"selectedMutationsByPosition",get:function(){return this.props.mutationDataStore?(0,A.groupMutationsByProteinStartPos)(this.props.mutationDataStore.sortedFilteredSelectedData):{}}},{key:"proteinPositions",get:function(){var e=[];return this.props.mutationDataStore&&this.pdbChain&&(e=(0,A.getProteinStartPositionsByRange)(this.props.mutationDataStore.sortedFilteredData,this.pdbChain.uniprotStart,this.pdbChain.uniprotEnd)),e}},{key:"pyMolScript",get:function(){var e=new N.default,t={displayBoundMolecules:this.displayBoundMolecules,proteinScheme:this.proteinScheme,proteinColor:this.proteinColor,sideChain:this.sideChain,mutationColor:this.mutationColor};return this.pdbId&&this.chainId?e.generateScript(this.pdbId,this.chainId,this.residues||[],t):""}},{key:"colorBySecondaryStructureDisabled",get:function(){return this.proteinScheme===I.ProteinScheme.SPACE_FILLING}},{key:"colorByNCRainbowDisabled",get:function(){return this.proteinScheme===I.ProteinScheme.SPACE_FILLING}},{key:"colorByAtomTypeDisabled",get:function(){return this.proteinScheme!==I.ProteinScheme.SPACE_FILLING}}]),t}(p.Component);F([v.observable],z.prototype,"isCollapsed",void 0),F([v.observable],z.prototype,"isIncreasedSize",void 0),F([v.observable],z.prototype,"proteinScheme",void 0),F([v.observable],z.prototype,"proteinColor",void 0),F([v.observable],z.prototype,"sideChain",void 0),F([v.observable],z.prototype,"mutationColor",void 0),F([v.observable],z.prototype,"displayBoundMolecules",void 0),F([v.computed],z.prototype,"structureViewerBounds",null),F([v.computed],z.prototype,"pdbId",null),F([v.computed],z.prototype,"chainId",null),F([v.computed],z.prototype,"pdbChain",null),F([v.computed],z.prototype,"residueWarning",null),F([v.computed],z.prototype,"residues",null),F([v.computed],z.prototype,"residueMappingData",null),F([v.computed],z.prototype,"mappedSelectedPositions",null),F([v.computed],z.prototype,"alignmentIds",null),F([v.computed],z.prototype,"mutationsByPosition",null),F([v.computed],z.prototype,"selectedMutationsByPosition",null),F([v.computed],z.prototype,"proteinPositions",null),F([v.computed],z.prototype,"pyMolScript",null),F([v.computed],z.prototype,"colorBySecondaryStructureDisabled",null),F([v.computed],z.prototype,"colorByNCRainbowDisabled",null),F([v.computed],z.prototype,"colorByAtomTypeDisabled",null),z=F([b.observer],z),t.default=z},function(e,t,n){!function(t,r){e.exports=r(n(1),n(34))}(0,function(e,t){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";e.exports=n(1).default,e.exports.DraggableCore=n(17).default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(2),p=r(d),f=n(3),h=r(f),m=n(11),y=r(m),g=n(12),v=r(g),b=n(13),_=n(16),w=n(14),x=n(17),S=r(x),C=n(19),k=r(C),E=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onDragStart=function(e,t){if((0,k.default)("Draggable: onDragStart: %j",t),!1===n.props.onStart(e,(0,_.createDraggableData)(n,t)))return!1;n.setState({dragging:!0,dragged:!0})},n.onDrag=function(e,t){if(!n.state.dragging)return!1;(0,k.default)("Draggable: onDrag: %j",t);var r=(0,_.createDraggableData)(n,t),o={x:r.x,y:r.y};if(n.props.bounds){var a=o.x,i=o.y;o.x+=n.state.slackX,o.y+=n.state.slackY;var s=(0,_.getBoundPosition)(n,o.x,o.y),l=u(s,2);o.x=l[0],o.y=l[1],o.slackX=n.state.slackX+(a-o.x),o.slackY=n.state.slackY+(i-o.y),r.x=a,r.y=i,r.deltaX=o.x-n.state.x,r.deltaY=o.y-n.state.y}if(!1===n.props.onDrag(e,r))return!1;n.setState(o)},n.onDragStop=function(e,t){if(!n.state.dragging)return!1;if(!1===n.props.onStop(e,(0,_.createDraggableData)(n,t)))return!1;(0,k.default)("Draggable: onDragStop: %j",t);var r={dragging:!1,slackX:0,slackY:0};if(Boolean(n.props.position)){var o=n.props.position,a=o.x,i=o.y;r.x=a,r.y=i}n.setState(r)},n.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,slackX:0,slackY:0,isElementSVG:!1},n}return s(t,e),c(t,[{key:"componentWillMount",value:function(){!this.props.position||this.props.onDrag||this.props.onStop||console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}},{key:"componentDidMount",value:function(){"undefined"!=typeof SVGElement&&y.default.findDOMNode(this)instanceof SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillReceiveProps",value:function(e){!e.position||this.props.position&&e.position.x===this.props.position.x&&e.position.y===this.props.position.y||this.setState({x:e.position.x,y:e.position.y})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"render",value:function(){var e,t={},n=null,r=Boolean(this.props.position),a=!r||this.state.dragging,i=this.props.position||this.props.defaultPosition,s={x:(0,_.canDragX)(this)&&a?this.state.x:i.x,y:(0,_.canDragY)(this)&&a?this.state.y:i.y};this.state.isElementSVG?n=(0,b.createSVGTransform)(s):t=(0,b.createCSSTransform)(s);var u=this.props,c=u.defaultClassName,d=u.defaultClassNameDragging,f=u.defaultClassNameDragged,h=(0,v.default)(this.props.children.props.className||"",c,(e={},o(e,d,this.state.dragging),o(e,f,this.state.dragged),e));return p.default.createElement(S.default,l({},this.props,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),p.default.cloneElement(p.default.Children.only(this.props.children),{className:h,style:l({},this.props.children.props.style,t),transform:n}))}}]),t}(p.default.Component);E.displayName="Draggable",E.propTypes=l({},S.default.propTypes,{axis:h.default.oneOf(["both","x","y","none"]),bounds:h.default.oneOfType([h.default.shape({left:h.default.number,right:h.default.number,top:h.default.number,bottom:h.default.number}),h.default.string,h.default.oneOf([!1])]),defaultClassName:h.default.string,defaultClassNameDragging:h.default.string,defaultClassNameDragged:h.default.string,defaultPosition:h.default.shape({x:h.default.number,y:h.default.number}),position:h.default.shape({x:h.default.number,y:h.default.number}),className:w.dontSetMe,style:w.dontSetMe,transform:w.dontSetMe}),E.defaultProps=l({},S.default.defaultProps,{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},position:null}),t.default=E},function(t,n){t.exports=e},function(e,t,n){if("production"!=={DRAGGABLE_DEBUG:void 0}.NODE_ENV){var r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,o=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r};e.exports=n(4)(o,!0)}else e.exports=n(10)()},function(e,t,n){"use strict";var r=n(5),o=n(6),a=n(7),i=n(8),s=n(9);e.exports=function(e,t){function n(e){var t=e&&(S&&e[S]||e[C]);if("function"==typeof t)return t}function l(e,t){return e===t?0!==e||1/e==1/t:e!==e&&t!==t}function u(e){this.message=e,this.stack=""}function c(e){function n(n,l,c,d,p,f,h){if(d=d||k,f=f||c,h!==i)if(t)o(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");else if("production"!=={DRAGGABLE_DEBUG:void 0}.NODE_ENV&&"undefined"!=typeof console){var m=d+":"+c;!r[m]&&s<3&&(a(!1,"You are manually calling a React.PropTypes validation function for the `%s` prop on `%s`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details.",f,d),r[m]=!0,s++)}return null==l[c]?n?new u(null===l[c]?"The "+p+" `"+f+"` is marked as required in `"+d+"`, but its value is `null`.":"The "+p+" `"+f+"` is marked as required in `"+d+"`, but its value is `undefined`."):null:e(l,c,d,p,f)}if("production"!=={DRAGGABLE_DEBUG:void 0}.NODE_ENV)var r={},s=0;var l=n.bind(null,!1);return l.isRequired=n.bind(null,!0),l}function d(e){function t(t,n,r,o,a,i){var s=t[n];if(_(s)!==e)return new u("Invalid "+o+" `"+a+"` of type `"+w(s)+"` supplied to `"+r+"`, expected `"+e+"`.");return null}return c(t)}function p(e){function t(t,n,r,o,a){if("function"!=typeof e)return new u("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var s=t[n];if(!Array.isArray(s)){return new u("Invalid "+o+" `"+a+"` of type `"+_(s)+"` supplied to `"+r+"`, expected an array.")}for(var l=0;l<s.length;l++){var c=e(s,l,r,o,a+"["+l+"]",i);if(c instanceof Error)return c}return null}return c(t)}function f(e){function t(t,n,r,o,a){if(!(t[n]instanceof e)){var i=e.name||k;return new u("Invalid "+o+" `"+a+"` of type `"+x(t[n])+"` supplied to `"+r+"`, expected instance of `"+i+"`.")}return null}return c(t)}function h(e){function t(t,n,r,o,a){for(var i=t[n],s=0;s<e.length;s++)if(l(i,e[s]))return null;return new u("Invalid "+o+" `"+a+"` of value `"+i+"` supplied to `"+r+"`, expected one of "+JSON.stringify(e)+".")}return Array.isArray(e)?c(t):("production"!=={DRAGGABLE_DEBUG:void 0}.NODE_ENV&&a(!1,"Invalid argument supplied to oneOf, expected an instance of array."),r.thatReturnsNull)}function m(e){function t(t,n,r,o,a){if("function"!=typeof e)return new u("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var s=t[n],l=_(s);if("object"!==l)return new u("Invalid "+o+" `"+a+"` of type `"+l+"` supplied to `"+r+"`, expected an object.");for(var c in s)if(s.hasOwnProperty(c)){var d=e(s,c,r,o,a+"."+c,i);if(d instanceof Error)return d}return null}return c(t)}function y(e){function t(t,n,r,o,a){for(var s=0;s<e.length;s++){if(null==(0,e[s])(t,n,r,o,a,i))return null}return new u("Invalid "+o+" `"+a+"` supplied to `"+r+"`.")}return Array.isArray(e)?c(t):("production"!=={DRAGGABLE_DEBUG:void 0}.NODE_ENV&&a(!1,"Invalid argument supplied to oneOfType, expected an instance of array."),r.thatReturnsNull)}function g(e){function t(t,n,r,o,a){var s=t[n],l=_(s);if("object"!==l)return new u("Invalid "+o+" `"+a+"` of type `"+l+"` supplied to `"+r+"`, expected `object`.");for(var c in e){var d=e[c];if(d){var p=d(s,c,r,o,a+"."+c,i);if(p)return p}}return null}return c(t)}function v(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(v);if(null===t||e(t))return!0;var r=n(t);if(!r)return!1;var o,a=r.call(t);if(r!==t.entries){for(;!(o=a.next()).done;)if(!v(o.value))return!1}else for(;!(o=a.next()).done;){var i=o.value;if(i&&!v(i[1]))return!1}return!0;default:return!1}}function b(e,t){return"symbol"===e||("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}function _(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":b(t,e)?"symbol":t}function w(e){var t=_(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function x(e){return e.constructor&&e.constructor.name?e.constructor.name:k}var S="function"==typeof Symbol&&Symbol.iterator,C="@@iterator",k="<<anonymous>>",E={array:d("array"),bool:d("boolean"),func:d("function"),number:d("number"),object:d("object"),string:d("string"),symbol:d("symbol"),any:function(){return c(r.thatReturnsNull)}(),arrayOf:p,element:function(){function t(t,n,r,o,a){var i=t[n];if(!e(i)){return new u("Invalid "+o+" `"+a+"` of type `"+_(i)+"` supplied to `"+r+"`, expected a single ReactElement.")}return null}return c(t)}(),instanceOf:f,node:function(){function e(e,t,n,r,o){return v(e[t])?null:new u("Invalid "+r+" `"+o+"` supplied to `"+n+"`, expected a ReactNode.")}return c(e)}(),objectOf:m,oneOf:h,oneOfType:y,shape:g};return u.prototype=Error.prototype,E.checkPropTypes=s,E.PropTypes=E,E}},function(e,t){"use strict";function n(e){return function(){return e}}var r=function(){};r.thatReturns=n,r.thatReturnsFalse=n(!1),r.thatReturnsTrue=n(!0),r.thatReturnsNull=n(null),r.thatReturnsThis=function(){return this},r.thatReturnsArgument=function(e){return e},e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r,a,i,s,l){if(o(t),!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,a,i,s,l],d=0;u=new Error(t.replace(/%s/g,function(){return c[d++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}}var o=function(e){};"production"!=={DRAGGABLE_DEBUG:void 0}.NODE_ENV&&(o=function(e){if(void 0===e)throw new Error("invariant requires an error message argument")}),e.exports=r},function(e,t,n){"use strict";var r=n(5),o=r;"production"!=={DRAGGABLE_DEBUG:void 0}.NODE_ENV&&function(){var e=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=0,a="Warning: "+e.replace(/%s/g,function(){return n[o++]});"undefined"!=typeof console&&console.error(a);try{throw new Error(a)}catch(e){}};o=function(t,n){if(void 0===n)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(0!==n.indexOf("Failed Composite propType: ")&&!t){for(var r=arguments.length,o=Array(r>2?r-2:0),a=2;a<r;a++)o[a-2]=arguments[a];e.apply(void 0,[n].concat(o))}}}(),e.exports=o},function(e,t){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";function r(e,t,n,r,l){if("production"!=={DRAGGABLE_DEBUG:void 0}.NODE_ENV)for(var u in e)if(e.hasOwnProperty(u)){var c;try{o("function"==typeof e[u],"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",r||"React class",n,u),c=e[u](t,u,r,n,null,i)}catch(e){c=e}if(a(!c||c instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",r||"React class",n,u,typeof c),c instanceof Error&&!(c.message in s)){s[c.message]=!0;var d=l?l():"";a(!1,"Failed %s type: %s%s",n,c.message,null!=d?d:"")}}}if("production"!=={DRAGGABLE_DEBUG:void 0}.NODE_ENV)var o=n(6),a=n(7),i=n(8),s={};e.exports=r},function(e,t,n){"use strict";var r=n(5),o=n(6);e.exports=function(){function e(){o(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t};return n.checkPropTypes=r,n.PropTypes=n,n}},function(e,n){e.exports=t},function(e,t,n){var r,o;!function(){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r))e.push(n.apply(null,r));else if("object"===o)for(var i in r)a.call(r,i)&&r[i]&&e.push(i)}}return e.join(" ")}var a={}.hasOwnProperty;void 0!==e&&e.exports?e.exports=n:(r=[],void 0!==(o=function(){return n}.apply(t,r))&&(e.exports=o))}()},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){return C||(C=(0,w.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(t){return(0,w.isFunction)(e[t])})),e[C].call(e,t)}function a(e,t,n){var r=e;do{if(o(r,t))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function i(e,t,n){e&&(e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener?e.addEventListener(t,n,!0):e["on"+t]=n)}function s(e,t,n){e&&(e.detachEvent?e.detachEvent("on"+t,n):e.removeEventListener?e.removeEventListener(t,n,!0):e["on"+t]=null)}function l(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,w.int)(n.borderTopWidth),t+=(0,w.int)(n.borderBottomWidth)}function u(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,w.int)(n.borderLeftWidth),t+=(0,w.int)(n.borderRightWidth)}function c(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,w.int)(n.paddingTop),t-=(0,w.int)(n.paddingBottom)}function d(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,w.int)(n.paddingLeft),t-=(0,w.int)(n.paddingRight)}function p(e,t){var n=t===t.ownerDocument.body,r=n?{left:0,top:0}:t.getBoundingClientRect();return{x:e.clientX+t.scrollLeft-r.left,y:e.clientY+t.scrollTop-r.top}}function f(e){var t=e.x,n=e.y;return r({},(0,x.browserPrefixToKey)("transform",S.default),"translate("+t+"px,"+n+"px)")}function h(e){return"translate("+e.x+","+e.y+")"}function m(e,t){return e.targetTouches&&(0,w.findInArray)(e.targetTouches,function(e){return t===e.identifier})||e.changedTouches&&(0,w.findInArray)(e.changedTouches,function(e){return t===e.identifier})}function y(e){return e.targetTouches&&e.targetTouches[0]?e.targetTouches[0].identifier:e.changedTouches&&e.changedTouches[0]?e.changedTouches[0].identifier:void 0}function g(e){var t=e.getAttribute("style")||"";A.test(t)||e.setAttribute("style",t+M)}function v(e){var t=e.getAttribute("style")||"";e.setAttribute("style",t.replace(A,""))}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _({touchAction:"none"},e)}Object.defineProperty(t,"__esModule",{value:!0});var _=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.matchesSelector=o,t.matchesSelectorAndParentsTo=a,t.addEvent=i,t.removeEvent=s,t.outerHeight=l,t.outerWidth=u,t.innerHeight=c,t.innerWidth=d,t.offsetXYFromParent=p,t.createCSSTransform=f,t.createSVGTransform=h,t.getTouch=m,t.getTouchIdentifier=y,t.addUserSelectStyles=g,t.removeUserSelectStyles=v,t.styleHacks=b;var w=n(14),x=n(15),S=function(e){return e&&e.__esModule?e:{default:e}}(x),C="",k=(0,x.getPrefix)("user-select"),E=(0,x.browserPrefixToStyle)("user-select",k),M=";"+E+": none;",A=new RegExp(";?"+E+": none;")},function(e,t){"use strict";function n(e,t){for(var n=0,r=e.length;n<r;n++)if(t.apply(t,[e[n],n,e]))return e[n]}function r(e){return"function"==typeof e||"[object Function]"===Object.prototype.toString.call(e)}function o(e){return"number"==typeof e&&!isNaN(e)}function a(e){return parseInt(e,10)}function i(e,t,n){if(e[t])return new Error("Invalid prop "+t+" passed to "+n+" - do not set this, set it on the child.")}Object.defineProperty(t,"__esModule",{value:!0}),t.findInArray=n,t.isFunction=r,t.isNum=o,t.int=a,t.dontSetMe=i},function(e,t){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";if("undefined"==typeof window||void 0===window.document)return"";var t=window.document.documentElement.style;if(e in t)return"";for(var n=0;n<i.length;n++)if(r(e,i[n])in t)return i[n];return""}function r(e,t){return t?""+t+a(e):e}function o(e,t){return t?"-"+t.toLowerCase()+"-"+e:e}function a(e){for(var t="",n=!0,r=0;r<e.length;r++)n?(t+=e[r].toUpperCase(),n=!1):"-"===e[r]?n=!0:t+=e[r];return t}Object.defineProperty(t,"__esModule",{value:!0}),t.getPrefix=n,t.browserPrefixToKey=r,t.browserPrefixToStyle=o;var i=["Moz","Webkit","O","ms"];t.default=n()},function(e,t,n){"use strict";function r(e,t,n){if(!e.props.bounds)return[t,n];var r=e.props.bounds;r="string"==typeof r?r:c(r);var o=f.default.findDOMNode(e);if("string"==typeof r){var a=o.ownerDocument,i=a.defaultView,s=void 0;if("parent"===r)s=o.parentNode;else if(!(s=a.querySelector(r)))throw new Error('Bounds selector "'+r+'" could not find an element.');var l=i.getComputedStyle(o),u=i.getComputedStyle(s);r={left:-o.offsetLeft+(0,d.int)(u.paddingLeft)+(0,d.int)(l.marginLeft),top:-o.offsetTop+(0,d.int)(u.paddingTop)+(0,d.int)(l.marginTop),right:(0,h.innerWidth)(s)-(0,h.outerWidth)(o)-o.offsetLeft+(0,d.int)(u.paddingRight)-(0,d.int)(l.marginRight),bottom:(0,h.innerHeight)(s)-(0,h.outerHeight)(o)-o.offsetTop+(0,d.int)(u.paddingBottom)-(0,d.int)(l.marginBottom)}}return(0,d.isNum)(r.right)&&(t=Math.min(t,r.right)),(0,d.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,d.isNum)(r.left)&&(t=Math.max(t,r.left)),(0,d.isNum)(r.top)&&(n=Math.max(n,r.top)),[t,n]}function o(e,t,n){return[Math.round(t/e[0])*e[0],Math.round(n/e[1])*e[1]]}function a(e){return"both"===e.props.axis||"x"===e.props.axis}function i(e){return"both"===e.props.axis||"y"===e.props.axis}function s(e,t,n){var r="number"==typeof t?(0,h.getTouch)(e,t):null;if("number"==typeof t&&!r)return null;var o=f.default.findDOMNode(n),a=n.props.offsetParent||o.offsetParent||o.ownerDocument.body;return(0,h.offsetXYFromParent)(r||e,a)}function l(e,t,n){var r=e.state;return(0,d.isNum)(r.lastX)?{node:f.default.findDOMNode(e),deltaX:t-r.lastX,deltaY:n-r.lastY,lastX:r.lastX,lastY:r.lastY,x:t,y:n}:{node:f.default.findDOMNode(e),deltaX:0,deltaY:0,lastX:t,lastY:n,x:t,y:n}}function u(e,t){return{node:t.node,x:e.state.x+t.deltaX,y:e.state.y+t.deltaY,deltaX:t.deltaX,deltaY:t.deltaY,lastX:e.state.x,lastY:e.state.y}}function c(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}Object.defineProperty(t,"__esModule",{value:!0}),t.getBoundPosition=r,t.snapToGrid=o,t.canDragX=a,t.canDragY=i,t.getControlPosition=s,t.createCoreData=l,t.createDraggableData=u;var d=n(14),p=n(11),f=function(e){return e&&e.__esModule?e:{default:e}}(p),h=n(13)},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(2),c=r(u),d=n(3),p=r(d),f=n(11),h=r(f),m=n(13),y=n(16),g=n(14),v=n(19),b=r(v),_={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}},w=_.mouse,x=function(e){function t(){var e,n,r,i;o(this,t);for(var l=arguments.length,u=Array(l),c=0;c<l;c++)u[c]=arguments[c];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.state={dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null},r.handleDragStart=function(e){if(r.props.onMouseDown(e),!r.props.allowAnyClick&&"number"==typeof e.button&&0!==e.button)return!1;var t=h.default.findDOMNode(r),n=t.ownerDocument;if(!(r.props.disabled||!(e.target instanceof n.defaultView.Node)||r.props.handle&&!(0,m.matchesSelectorAndParentsTo)(e.target,r.props.handle,t)||r.props.cancel&&(0,m.matchesSelectorAndParentsTo)(e.target,r.props.cancel,t))){var o=(0,m.getTouchIdentifier)(e);r.setState({touchIdentifier:o});var a=(0,y.getControlPosition)(e,o,r);if(null!=a){var i=a.x,s=a.y,l=(0,y.createCoreData)(r,i,s);(0,b.default)("DraggableCore: handleDragStart: %j",l),(0,b.default)("calling",r.props.onStart);!1!==r.props.onStart(e,l)&&(r.props.enableUserSelectHack&&(0,m.addUserSelectStyles)(n.body),r.setState({dragging:!0,lastX:i,lastY:s}),(0,m.addEvent)(n,w.move,r.handleDrag),(0,m.addEvent)(n,w.stop,r.handleDragStop))}}},r.handleDrag=function(e){"touchmove"===e.type&&e.preventDefault();var t=(0,y.getControlPosition)(e,r.state.touchIdentifier,r);if(null!=t){var n=t.x,o=t.y;if(Array.isArray(r.props.grid)){var a=n-r.state.lastX,i=o-r.state.lastY,l=(0,y.snapToGrid)(r.props.grid,a,i),u=s(l,2);if(a=u[0],i=u[1],!a&&!i)return;n=r.state.lastX+a,o=r.state.lastY+i}var c=(0,y.createCoreData)(r,n,o);(0,b.default)("DraggableCore: handleDrag: %j",c);if(!1!==r.props.onDrag(e,c))r.setState({lastX:n,lastY:o});else try{r.handleDragStop(new MouseEvent("mouseup"))}catch(e){var d=document.createEvent("MouseEvents");d.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),r.handleDragStop(d)}}},r.handleDragStop=function(e){if(r.state.dragging){var t=(0,y.getControlPosition)(e,r.state.touchIdentifier,r);if(null!=t){var n=t.x,o=t.y,a=(0,y.createCoreData)(r,n,o),i=h.default.findDOMNode(r),s=i.ownerDocument;r.props.enableUserSelectHack&&(0,m.removeUserSelectStyles)(s.body),(0,b.default)("DraggableCore: handleDragStop: %j",a),r.setState({dragging:!1,lastX:NaN,lastY:NaN}),r.props.onStop(e,a),(0,b.default)("DraggableCore: Removing handlers"),(0,m.removeEvent)(s,w.move,r.handleDrag),(0,m.removeEvent)(s,w.stop,r.handleDragStop)}}},r.onMouseDown=function(e){return w=_.mouse,r.handleDragStart(e)},r.onMouseUp=function(e){return w=_.mouse,r.handleDragStop(e)},r.onTouchStart=function(e){return w=_.touch,r.handleDragStart(e)},r.onTouchEnd=function(e){return w=_.touch,r.handleDragStop(e)},i=n,a(r,i)}return i(t,e),l(t,[{key:"componentWillUnmount",value:function(){var e=h.default.findDOMNode(this),t=e.ownerDocument;(0,m.removeEvent)(t,_.mouse.move,this.handleDrag),(0,m.removeEvent)(t,_.touch.move,this.handleDrag),(0,m.removeEvent)(t,_.mouse.stop,this.handleDragStop),(0,m.removeEvent)(t,_.touch.stop,this.handleDragStop),this.props.enableUserSelectHack&&(0,m.removeUserSelectStyles)(t.body)}},{key:"render",value:function(){return c.default.cloneElement(c.default.Children.only(this.props.children),{style:(0,m.styleHacks)(this.props.children.props.style),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}]),t}(c.default.Component);x.displayName="DraggableCore",x.propTypes={allowAnyClick:p.default.bool,disabled:p.default.bool,enableUserSelectHack:p.default.bool,offsetParent:function(t,n){if(e.browser&&t[n]&&1!==t[n].nodeType)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:p.default.arrayOf(p.default.number),handle:p.default.string,cancel:p.default.string,onStart:p.default.func,onDrag:p.default.func,onStop:p.default.func,onMouseDown:p.default.func,className:g.dontSetMe,style:g.dontSetMe,transform:g.dontSetMe},x.defaultProps={allowAnyClick:!1,cancel:null,disabled:!1,enableUserSelectHack:!0,offsetParent:null,handle:null,grid:null,transform:null,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){}},t.default=x}).call(t,n(18))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function a(e){if(d===clearTimeout)return clearTimeout(e);if((d===r||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function i(){m&&f&&(m=!1,f.length?h=f.concat(h):y=-1,h.length&&s())}function s(){if(!m){var e=o(i);m=!0;for(var t=h.length;t;){for(f=h,h=[];++y<t;)f&&f[y].run();y=-1,t=h.length}f=null,m=!1,a(e)}}function l(e,t){this.fun=e,this.array=t}function u(){}var c,d,p=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{d="function"==typeof clearTimeout?clearTimeout:r}catch(e){d=r}}();var f,h=[],m=!1,y=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new l(e,t)),1!==h.length||m||o(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=u,p.addListener=u,p.once=u,p.off=u,p.removeListener=u,p.removeAllListeners=u,p.emit=u,p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(e,t,n){"use strict";function r(){}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r}])})},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(1),c=r(u),d=n(3),p=r(d),f=n(33),h=n(1139),m=function(e){return e&&e.__esModule?e:{default:e}}(h),y=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},g=function(e){function t(){o(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.divHandler=e.divHandler.bind(e),e}return i(t,e),s(t,[{key:"render",value:function(){return c.createElement("div",{ref:this.divHandler,style:{height:this.props.bounds.height,width:this.props.bounds.width,padding:0},className:"borderedChart"})}},{key:"componentDidMount",value:function(){this._3dMolDiv&&(this.wrapper=new m.default(this._3dMolDiv,this.props),this.wrapper.init(this.props.pdbId,this.props.chainId,this.props.residues),this._pdbId=this.props.pdbId)}},{key:"componentDidUpdate",value:function(e){this.wrapper&&(this.props.pdbId!==this._pdbId?(this._pdbId=this.props.pdbId,this.wrapper.loadPdb(this._pdbId,this.props.chainId,this.props.residues,this.props)):this.wrapper.updateViewer(this.props.chainId,this.props.residues,this.props),p.isEqual(this.props.bounds,e.bounds)||this.wrapper.resize())}},{key:"divHandler",value:function(e){this._3dMolDiv=e,this.props.containerRef&&this.props.containerRef(e)}}]),t}(c.Component);g=y([f.observer],g),t.default=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(r)},u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=n(3),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(c),p=n(90),f=r(p),h=n(13),m=n(1001),y=r(m),g=n(1064),v=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},b=n(1140),_=function(e){function t(e,n,r){o(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i._loadingPdb=!1,i.stateChangeReaction=(0,h.reaction)(function(){return i.state},function(e){i.onStateChange(e)}),i._3dMol=r||b,i._3dMolDiv=e,i.props=Object.assign({},y.default.defaultProps,n),i.state={pdbId:"",chainId:"",residues:[]},i._prevState={pdbId:"",chainId:"",residues:[]},i.updateViewer=i.updateViewer.bind(i),i}return i(t,e),s(t,[{key:"setState",value:function(e){this._prevState=Object.assign({},this.state),this.state=Object.assign({},this.state,e)}},{key:"onStateChange",value:function(e){this._prevState&&!this._loadingPdb&&(this.updateVisualStyle(e.residues,e.chainId,this.props),this._3dMolViewer.render())}},{key:"setProps",value:function(e){this._prevProps=this.props,this.props=e}},{key:"init",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.state.residues,r=arguments[3];if(r?this._3dMolViewer=r:this._3dMolDiv&&(this._3dMolViewer=this._3dMol.createViewer((0,f.default)(this._3dMolDiv),{defaultcolors:this._3dMol.elementColors.rasmol})),this._3dMolViewer){var o=this.formatColor(this.props.backgroundColor||y.default.defaultProps.backgroundColor);this._3dMolViewer.setBackgroundColor(o),this.loadPdb(e,t,n)}}},{key:"loadPdb",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.state.residues,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.props,a={doAssembly:!0,pdbUri:o.pdbUri};this._loadingPdb=!0,this.setState({pdbId:e,chainId:t,residues:r}),this._3dMolViewer?(this._3dMolViewer.clear(),this._3dMol.download("pdb:"+e.toUpperCase(),this._3dMolViewer,a,function(){n._loadingPdb=!1,n.onStateChange(n.state)})):this._loadingPdb=!1}},{key:"updateViewer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.residues,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.props;this.setProps(n),this.setState({chainId:e,residues:t})}},{key:"resize",value:function(){this._3dMolViewer&&this._3dMolViewer.resize()}},{key:"selectAll",value:function(){return{}}},{key:"selectChain",value:function(e){return{chain:e}}},{key:"setScheme",value:function(e,n){var r=t.PROTEIN_SCHEME_PRESETS[e];return this.applyStyleForSelector(n,r),r}},{key:"setColor",value:function(e,t,n){var r=this.formatColor(e);n&&(d.each(n,function(e){e.color=r}),this.applyStyleForSelector(t,n))}},{key:"formatColor",value:function(e){return e.replace("#","0x")}},{key:"setTransparency",value:function(e,t,n){n&&(this.addTransparencyToStyle(e,n),this.applyStyleForSelector(t,n))}},{key:"addTransparencyToStyle",value:function(e,t){d.each(t,function(t,n){"sphere"!==n&&(t.opacity=(10-e)/10)})}},{key:"rainbowColor",value:function(e,t){this.setColor("spectrum",e,t)}},{key:"cpkColor",value:function(e,t){var n=this;t&&(d.each(t,function(e){delete e.color,e.colors=n._3dMol.elementColors.defaultColors}),this.applyStyleForSelector(e,t))}},{key:"selectAlphaHelix",value:function(e){return{chain:e,ss:"h"}}},{key:"selectBetaSheet",value:function(e){return{chain:e,ss:"s"}}},{key:"hideBoundMolecules",value:function(){var e={resn:t.ALL_PROTEINS,invert:!0},n={sphere:{hidden:!0}};this._3dMolViewer.setStyle(e,n)}},{key:"enableBallAndStick",value:function(e,n,r){var o=Object.assign({},r,t.PROTEIN_SCHEME_PRESETS[m.ProteinScheme.BALL_AND_STICK]);if(e){var a=this.formatColor(e);o.sphere||(o.sphere={}),o.sphere.color=a,o.stick||(o.stick={}),o.stick.color=a}this._3dMolViewer.setStyle(n,o)}},{key:"updateResidueStyle",value:function(e,n){var r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.props,a=arguments[3],i=y.default.defaultProps;a||(a=t.PROTEIN_SCHEME_PRESETS[o.proteinScheme],this.addTransparencyToStyle(o.chainTranslucency||i.chainTranslucency,a)),this.residuesToUpdate.forEach(function(e){var t=e.residue,s=r.selectResidue(e.selector,n),l=void 0;l=t.highlighted?r.props.highlightColor||i.highlightColor:o.mutationColor===m.MutationColor.MUTATION_TYPE?t.color:o.mutationColor===m.MutationColor.UNIFORM?o.uniformMutationColor||i.uniformMutationColor:o.chainColor||i.chainColor,r.setColor(l,s,a),(o.sideChain===m.SideChain.ALL||!0===t.highlighted&&o.sideChain===m.SideChain.SELECTED)&&r.updateSideChain(n,e.selector,o.proteinScheme,l,a)})}},{key:"updateScheme",value:function(e){return this.needToUpdateResiduesOnly?void 0:l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateScheme",this).call(this,e)}},{key:"updateBaseVisualStyle",value:function(e,n){this.needToUpdateResiduesOnly||l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateBaseVisualStyle",this).call(this,e,n)}},{key:"updateChainVisualStyle",value:function(e,n,r){this.needToUpdateResiduesOnly||l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateChainVisualStyle",this).call(this,e,n,r)}},{key:"updateVisualStyle",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.props;l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateVisualStyle",this).call(this,e,n,r)}},{key:"selectResidues",value:function(e,t){return{rescode:e,chain:t}}},{key:"selectResidue",value:function(e,t){return Object.assign({chain:t},e)}},{key:"selectSideChains",value:function(e,t){return this.selectResidue(e,t)}},{key:"updateSideChain",value:function(e,t,n,r,o){if(n!==m.ProteinScheme.SPACE_FILLING){var a=this.selectSideChains(t,e);this.enableBallAndStick(r,a,o)}}},{key:"applyStyleForSelector",value:function(e,t){this._3dMolViewer.setStyle(e,t)}},{key:"residuesToUpdate",get:function(){return this.needToUpdateResiduesOnly?(0,g.findUpdatedResidues)(this.currentResidueToPositionMap,this.prevResidueToPositionMap):d.flatten(d.values(this.currentResidueToPositionMap))}},{key:"needToUpdateResiduesOnly",get:function(){return this._prevState.pdbId===this.state.pdbId&&this._prevState.chainId===this.state.chainId&&this.visualPropsUnchanged&&this.residuePositionsUnchanged}},{key:"residuePositionsUnchanged",get:function(){return d.isEqual(d.keys(this.currentResidueToPositionMap).sort(),d.keys(this.prevResidueToPositionMap).sort())}},{key:"currentResidueToPositionMap",get:function(){return(0,g.generateResiduePosToSelectorMap)(this.state.residues)}},{key:"prevResidueToPositionMap",get:function(){return(0,g.generateResiduePosToSelectorMap)(this._prevState.residues)}},{key:"visualPropsUnchanged",get:function(){return d.isEqual(d.omit(this.props,["pdbId","chainId","residues"]),d.omit(this._prevProps,["pdbId","chainId","residues"]))}}],[{key:"PROTEIN_SCHEME_PRESETS",get:function(){var e={};return e[m.ProteinScheme.CARTOON]={cartoon:{}},e[m.ProteinScheme.TRACE]={cartoon:{style:"trace"}},e[m.ProteinScheme.SPACE_FILLING]={sphere:{scale:.6}},e[m.ProteinScheme.BALL_AND_STICK]={stick:{},sphere:{scale:.25}},e[m.ProteinScheme.RIBBON]={cartoon:{style:"ribbon"}},e}},{key:"ALL_PROTEINS",get:function(){var e=["asp","glu","arg","lys","his","asn","thr","cys","gln","tyr","ser","gly","ala","leu","val","ile","met","trp","phe","pro"],t=e.map(function(e){return e.toUpperCase()});return e.concat(t)}}]),t}(y.default);t.default=_,v([h.observable],_.prototype,"props",void 0),v([h.observable],_.prototype,"_prevProps",void 0),v([h.observable],_.prototype,"state",void 0),v([h.observable],_.prototype,"_prevState",void 0),v([h.action],_.prototype,"setState",null),v([h.computed],_.prototype,"residuesToUpdate",null),v([h.computed],_.prototype,"needToUpdateResiduesOnly",null),v([h.computed],_.prototype,"residuePositionsUnchanged",null),v([h.computed],_.prototype,"currentResidueToPositionMap",null),v([h.computed],_.prototype,"prevResidueToPositionMap",null),v([h.computed],_.prototype,"visualPropsUnchanged",null)},function(e,t){(function(){!function(e,t){!function(e){"use strict";function t(e,t,n){for(var r=(e.byteLength,0),o=n.length;r<o;r++){var a=n.charCodeAt(r);if(a<128)e.setUint8(t++,a>>>0&127|0);else if(a<2048)e.setUint8(t++,a>>>6&31|192),e.setUint8(t++,a>>>0&63|128);else if(a<65536)e.setUint8(t++,a>>>12&15|224),e.setUint8(t++,a>>>6&63|128),e.setUint8(t++,a>>>0&63|128);else{if(!(a<1114112))throw new Error("bad codepoint "+a);e.setUint8(t++,a>>>18&7|240),e.setUint8(t++,a>>>12&63|128),e.setUint8(t++,a>>>6&63|128),e.setUint8(t++,a>>>0&63|128)}}}function n(e){for(var t=0,n=0,r=e.length;n<r;n++){var o=e.charCodeAt(n);if(o<128)t+=1;else if(o<2048)t+=2;else if(o<65536)t+=3;else{if(!(o<1114112))throw new Error("bad codepoint "+o);t+=4}}return t}function r(e,o,a){var i=typeof e;if("string"===i){var s=n(e);if(s<32)return o.setUint8(a,160|s),t(o,a+1,e),1+s;if(s<256)return o.setUint8(a,217),o.setUint8(a+1,s),t(o,a+2,e),2+s;if(s<65536)return o.setUint8(a,218),o.setUint16(a+1,s),t(o,a+3,e),3+s;if(s<4294967296)return o.setUint8(a,219),o.setUint32(a+1,s),t(o,a+5,e),5+s}if(e instanceof Uint8Array){var s=e.byteLength,l=new Uint8Array(o.buffer);if(s<256)return o.setUint8(a,196),o.setUint8(a+1,s),l.set(e,a+2),2+s;if(s<65536)return o.setUint8(a,197),o.setUint16(a+1,s),l.set(e,a+3),3+s;if(s<4294967296)return o.setUint8(a,198),o.setUint32(a+1,s),l.set(e,a+5),5+s}if("number"===i){if(!isFinite(e))throw new Error("Number not finite: "+e);if(Math.floor(e)!==e)return o.setUint8(a,203),o.setFloat64(a+1,e),9;if(e>=0){if(e<128)return o.setUint8(a,e),1;if(e<256)return o.setUint8(a,204),o.setUint8(a+1,e),2;if(e<65536)return o.setUint8(a,205),o.setUint16(a+1,e),3;if(e<4294967296)return o.setUint8(a,206),o.setUint32(a+1,e),5;throw new Error("Number too big 0x"+e.toString(16))}if(e>=-32)return o.setInt8(a,e),1;if(e>=-128)return o.setUint8(a,208),o.setInt8(a+1,e),2;if(e>=-32768)return o.setUint8(a,209),o.setInt16(a+1,e),3;if(e>=-2147483648)return o.setUint8(a,210),o.setInt32(a+1,e),5;throw new Error("Number too small -0x"+(-e).toString(16).substr(1))}if(null===e)return o.setUint8(a,192),1;if("boolean"===i)return o.setUint8(a,e?195:194),1;if("object"===i){var s,u=0,c=Array.isArray(e);if(c)s=e.length;else{var d=Object.keys(e);s=d.length}var u;if(s<16?(o.setUint8(a,s|(c?144:128)),u=1):s<65536?(o.setUint8(a,c?220:222),o.setUint16(a+1,s),u=3):s<4294967296&&(o.setUint8(a,c?221:223),o.setUint32(a+1,s),u=5),c)for(var p=0;p<s;p++)u+=r(e[p],o,a+u);else for(var p=0;p<s;p++){var f=d[p];u+=r(f,o,a+u),u+=r(e[f],o,a+u)}return u}throw new Error("Unknown type "+i)}function o(e){var t=typeof e;if("string"===t){var r=n(e);if(r<32)return 1+r;if(r<256)return 2+r;if(r<65536)return 3+r;if(r<4294967296)return 5+r}if(e instanceof Uint8Array){var r=e.byteLength;if(r<256)return 2+r;if(r<65536)return 3+r;if(r<4294967296)return 5+r}if("number"===t){if(Math.floor(e)!==e)return 9;if(e>=0){if(e<128)return 1;if(e<256)return 2;if(e<65536)return 3;if(e<4294967296)return 5;throw new Error("Number too big 0x"+e.toString(16))}if(e>=-32)return 1;if(e>=-128)return 2;if(e>=-32768)return 3;if(e>=-2147483648)return 5;throw new Error("Number too small -0x"+e.toString(16).substr(1))}if("boolean"===t||null===e)return 1;if("object"===t){var r,a=0;if(Array.isArray(e)){r=e.length;for(var i=0;i<r;i++)a+=o(e[i])}else{var s=Object.keys(e);r=s.length;for(var i=0;i<r;i++){var l=s[i];a+=o(l)+o(e[l])}}if(r<16)return 1+a;if(r<65536)return 3+a;if(r<4294967296)return 5+a;throw new Error("Array or object too long 0x"+r.toString(16))}throw new Error("Unknown type "+t)}function a(e){var t=new ArrayBuffer(o(e));return r(e,new DataView(t),0),new Uint8Array(t)}function i(e,t,n){return t?new e(t.buffer,t.byteOffset,t.byteLength/(n||1)):void 0}function s(e){return i(DataView,e)}function l(e){return i(Uint8Array,e)}function u(e){return i(Int8Array,e)}function c(e){return i(Int32Array,e,4)}function d(e){return i(Float32Array,e,4)}function p(e,t){var n=e.length/2;t||(t=new Int16Array(n));for(var r=0,o=0;r<n;++r,o+=2)t[r]=e[o]<<8^e[o+1]<<0;return t}function f(e,t){var n=e.length;t||(t=new Uint8Array(2*n));for(var r=s(t),o=0;o<n;++o)r.setInt16(2*o,e[o]);return l(t)}function h(e,t){var n=e.length/4;t||(t=new Int32Array(n));for(var r=0,o=0;r<n;++r,o+=4)t[r]=e[o]<<24^e[o+1]<<16^e[o+2]<<8^e[o+3]<<0;return t}function m(e,t){var n=e.length;t||(t=new Uint8Array(4*n));for(var r=s(t),o=0;o<n;++o)r.setInt32(4*o,e[o]);return l(t)}function y(e,t){var n=e.length;t||(t=new Float32Array(n/4));for(var r=s(t),o=s(e),a=0,i=0,l=n/4;a<l;++a,i+=4)r.setFloat32(i,o.getFloat32(i),!0);return t}function g(e,t,n){var r=e.length,o=1/t;n||(n=new Float32Array(r));for(var a=0;a<r;++a)n[a]=e[a]*o;return n}function v(e,t,n){var r=e.length;n||(n=new Int32Array(r));for(var o=0;o<r;++o)n[o]=Math.round(e[o]*t);return n}function b(e,t){var n,r;if(!t){var o=0;for(n=0,r=e.length;n<r;n+=2)o+=e[n+1];t=new e.constructor(o)}var a=0;for(n=0,r=e.length;n<r;n+=2)for(var i=e[n],s=e[n+1],l=0;l<s;++l)t[a]=i,++a;return t}function _(e){if(0===e.length)return new Int32Array;var t,n,r=2;for(t=1,n=e.length;t<n;++t)e[t-1]!==e[t]&&(r+=2);var o=new Int32Array(r),a=0,i=1;for(t=1,n=e.length;t<n;++t)e[t-1]!==e[t]?(o[a]=e[t-1],o[a+1]=i,i=1,a+=2):++i;return o[a]=e[e.length-1],o[a+1]=i,o}function w(e,t){var n=e.length;t||(t=new e.constructor(n)),n&&(t[0]=e[0]);for(var r=1;r<n;++r)t[r]=e[r]+t[r-1];return t}function x(e,t){var n=e.length;t||(t=new e.constructor(n)),t[0]=e[0];for(var r=1;r<n;++r)t[r]=e[r]-e[r-1];return t}function S(e,t){var n,r,o=e instanceof Int8Array?127:32767,a=-o-1,i=e.length;if(!t){var s=0;for(n=0;n<i;++n)e[n]<o&&e[n]>a&&++s;t=new Int32Array(s)}for(n=0,r=0;n<i;){for(var l=0;e[n]===o||e[n]===a;)l+=e[n],++n;l+=e[n],++n,t[r]=l,++r}return t}function C(e,t){var n,r=t?127:32767,o=-r-1,a=e.length,i=0;for(n=0;n<a;++n){var s=e[n];0===s?++i:i+=s===r||s===o?2:s>0?Math.ceil(s/r):Math.ceil(s/o)}var l=t?new Int8Array(i):new Int16Array(i),u=0;for(n=0;n<a;++n){var s=e[n];if(s>=0)for(;s>=r;)l[u]=r,++u,s-=r;else for(;s<=o;)l[u]=o,++u,s-=o;l[u]=s,++u}return l}function k(e,t){return w(b(e),t)}function E(e){return _(x(e))}function M(e,t,n){return g(b(e,c(n)),t,n)}function A(e,t){return _(v(e,t))}function T(e,t,n){return g(w(e,c(n)),t,n)}function O(e,t,n){return x(v(e,t),n)}function P(e,t,n){return g(S(e,c(n)),t,n)}function j(e,t,n){var r=S(e,c(n));return T(r,t,d(r))}function I(e,t,n){return C(O(e,t),n)}function D(e){var t=s(e),n=t.getInt32(0),r=t.getInt32(4),o=e.subarray(8,12),e=e.subarray(12);return[n,e,r,o]}function N(e,t,n,r){var o=new ArrayBuffer(12+r.byteLength),a=new Uint8Array(o),i=new DataView(o);return i.setInt32(0,e),i.setInt32(4,t),n&&a.set(n,8),a.set(r,12),a}function R(e){return N(2,e.length,void 0,l(e))}function L(e){return N(4,e.length,void 0,m(e))}function F(e,t){return N(5,e.length/t,m([t]),l(e))}function z(e){return N(6,e.length,void 0,m(_(e)))}function B(e){return N(8,e.length,void 0,m(E(e)))}function V(e,t){return N(9,e.length,m([t]),m(A(e,t)))}function G(e,t){return N(10,e.length,m([t]),f(I(e,t)))}function H(e){var t={};return ee.forEach(function(n){void 0!==e[n]&&(t[n]=e[n])}),e.bondAtomList&&(t.bondAtomList=L(e.bondAtomList)),e.bondOrderList&&(t.bondOrderList=R(e.bondOrderList)),t.xCoordList=G(e.xCoordList,1e3),t.yCoordList=G(e.yCoordList,1e3),t.zCoordList=G(e.zCoordList,1e3),e.bFactorList&&(t.bFactorList=G(e.bFactorList,100)),e.atomIdList&&(t.atomIdList=B(e.atomIdList)),e.altLocList&&(t.altLocList=z(e.altLocList)),e.occupancyList&&(t.occupancyList=V(e.occupancyList,100)),t.groupIdList=B(e.groupIdList),t.groupTypeList=L(e.groupTypeList),e.secStructList&&(t.secStructList=R(e.secStructList,1)),e.insCodeList&&(t.insCodeList=z(e.insCodeList)),e.sequenceIndexList&&(t.sequenceIndexList=B(e.sequenceIndexList)),t.chainIdList=F(e.chainIdList,4),e.chainNameList&&(t.chainNameList=F(e.chainNameList,4)),t}function U(e){function t(e){for(var t={},n=0;n<e;n++){t[a()]=a()}return t}function n(t){var n=e.subarray(i,i+t);return i+=t,n}function r(t){var n=e.subarray(i,i+t);i+=t;if(t>65535){for(var r=[],o=0;o<n.length;o+=65535)r.push(String.fromCharCode.apply(null,n.subarray(o,o+65535)));return r.join("")}return String.fromCharCode.apply(null,n)}function o(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=a();return t}function a(){var a,l,u=e[i];if(0==(128&u))return i++,u;if(128==(240&u))return l=15&u,i++,t(l);if(144==(240&u))return l=15&u,i++,o(l);if(160==(224&u))return l=31&u,i++,r(l);if(224==(224&u))return a=s.getInt8(i),i++,a;switch(u){case 192:return i++,null;case 194:return i++,!1;case 195:return i++,!0;case 196:return l=s.getUint8(i+1),i+=2,n(l);case 197:return l=s.getUint16(i+1),i+=3,n(l);case 198:return l=s.getUint32(i+1),i+=5,n(l);case 202:return a=s.getFloat32(i+1),i+=5,a;case 203:return a=s.getFloat64(i+1),i+=9,a;case 204:return a=e[i+1],i+=2,a;case 205:return a=s.getUint16(i+1),i+=3,a;case 206:return a=s.getUint32(i+1),i+=5,a;case 208:return a=s.getInt8(i+1),i+=2,a;case 209:return a=s.getInt16(i+1),i+=3,a;case 210:return a=s.getInt32(i+1),i+=5,a;case 217:return l=s.getUint8(i+1),i+=2,r(l);case 218:return l=s.getUint16(i+1),i+=3,r(l);case 219:return l=s.getUint32(i+1),i+=5,r(l);case 220:return l=s.getUint16(i+1),i+=3,o(l);case 221:return l=s.getUint32(i+1),i+=5,o(l);case 222:return l=s.getUint16(i+1),i+=3,t(l);case 223:return l=s.getUint32(i+1),i+=5,t(l)}throw new Error("Unknown type 0x"+u.toString(16))}var i=0,s=new DataView(e.buffer);return a()}function q(e,t,n,r){switch(e){case 1:return y(t);case 2:return u(t);case 3:return p(t);case 4:return h(t);case 5:return l(t);case 6:return b(h(t),new Uint8Array(n));case 7:return b(h(t));case 8:return k(h(t));case 9:return M(h(t),h(r)[0]);case 10:return j(p(t),h(r)[0]);case 11:return g(p(t),h(r)[0]);case 12:return P(p(t),h(r)[0]);case 13:return P(u(t),h(r)[0]);case 14:return S(p(t));case 15:return S(u(t))}}function W(e,t){t=t||{};var n=t.ignoreFields,r={};return ne.forEach(function(t){var o=!!n&&-1!==n.indexOf(t),a=e[t];o||void 0===a||(a instanceof Uint8Array?r[t]=q.apply(null,D(a)):r[t]=a)}),r}function Z(e){return String.fromCharCode.apply(null,e).replace(/\0/g,"")}function Y(e,t,n){n=n||{};var r,o,a,i,s,l,u=n.firstModelOnly,c=t.onModel,d=t.onChain,p=t.onGroup,f=t.onAtom,h=t.onBond,m=0,y=0,g=0,v=0,b=0,_=-1,w=e.chainNameList,x=e.secStructList,S=e.insCodeList,C=e.sequenceIndexList,k=e.atomIdList,E=e.bFactorList,M=e.altLocList,A=e.occupancyList,T=e.bondAtomList,O=e.bondOrderList;for(r=0,o=e.chainsPerModel.length;r<o&&!(u&&m>0);++r){var P=e.chainsPerModel[m];for(c&&c({chainCount:P,modelIndex:m}),a=0;a<P;++a){var j=e.groupsPerChain[y];if(d){var I=Z(e.chainIdList.subarray(4*y,4*y+4)),D=null;w&&(D=Z(w.subarray(4*y,4*y+4))),d({groupCount:j,chainIndex:y,modelIndex:m,chainId:I,chainName:D})}for(i=0;i<j;++i){var N=e.groupList[e.groupTypeList[g]],R=N.atomNameList.length;if(p){var L=null;x&&(L=x[g]);var F=null;e.insCodeList&&(F=String.fromCharCode(S[g]));var z=null;C&&(z=C[g]),p({atomCount:R,groupIndex:g,chainIndex:y,modelIndex:m,groupId:e.groupIdList[g],groupType:e.groupTypeList[g],groupName:N.groupName,singleLetterCode:N.singleLetterCode,chemCompType:N.chemCompType,secStruct:L,insCode:F,sequenceIndex:z})}for(s=0;s<R;++s){if(f){var B=null;k&&(B=k[v]);var V=null;E&&(V=E[v]);var G=null;M&&(G=String.fromCharCode(M[v]));var H=null;A&&(H=A[v]),f({atomIndex:v,groupIndex:g,chainIndex:y,modelIndex:m,atomId:B,element:N.elementList[s],atomName:N.atomNameList[s],formalCharge:N.formalChargeList[s],xCoord:e.xCoordList[v],yCoord:e.yCoordList[v],zCoord:e.zCoordList[v],bFactor:V,altLoc:G,occupancy:H})}v+=1}if(h){var U=N.bondAtomList;for(s=0,l=N.bondOrderList.length;s<l;++s)h({atomIndex1:v-R+U[2*s],atomIndex2:v-R+U[2*s+1],bondOrder:N.bondOrderList[s]})}g+=1}y+=1}if(b=_+1,_=v-1,h&&T)for(s=0,l=T.length;s<l;s+=2){var q=T[s],W=T[s+1];(q>=b&&q<=_||W>=b&&W<=_)&&h({atomIndex1:q,atomIndex2:W,bondOrder:O?O[s/2]:null})}m+=1}}function K(e){return a(H(e))}function X(e,t){e instanceof ArrayBuffer&&(e=new Uint8Array(e));var n;return n=e instanceof Uint8Array?U(e):e,W(n,t)}function Q(e,t,n,r){function o(){try{var e=X(a.response);n(e)}catch(e){r(e)}}var a=new XMLHttpRequest;a.addEventListener("load",o,!0),a.addEventListener("error",r,!0),a.responseType="arraybuffer",a.open("GET",t+e.toUpperCase()),a.send()}function J(e,t,n){Q(e,oe,t,n)}function $(e,t,n){Q(e,ae,t,n)}var ee=["mmtfVersion","mmtfProducer","unitCell","spaceGroup","structureId","title","depositionDate","releaseDate","experimentalMethods","resolution","rFree","rWork","bioAssemblyList","ncsOperatorList","entityList","groupList","numBonds","numAtoms","numGroups","numChains","numModels","groupsPerChain","chainsPerModel"],te=["xCoordList","yCoordList","zCoordList","groupIdList","groupTypeList","chainIdList","bFactorList","atomIdList","altLocList","occupancyList","secStructList","insCodeList","sequenceIndexList","chainNameList","bondAtomList","bondOrderList"],ne=ee.concat(te),re="http://mmtf.rcsb.org/v1.0/",oe=re+"full/",ae=re+"reduced/";e.encode=K,e.decode=X,e.traverse=Y,e.fetch=J,e.fetchReduced=$,e.version="v1.0.0",e.fetchUrl=oe,e.fetchReducedUrl=ae,e.encodeMsgpack=a,e.encodeMmtf=H,e.decodeMsgpack=U,e.decodeMmtf=W,Object.defineProperty(e,"__esModule",{value:!0})}(e.MMTF=e.MMTF||{})}(this),function(n){if("object"==typeof t&&void 0!==e)e.exports=n();else if("function"==typeof define&&define.amd)define("pako",[],n);else{var r;r="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,r.pako=n()}}(function(){return function e(t,n,r){function o(i,s){if(!n[i]){if(!t[i]){var l="function"==typeof require&&require;if(!s&&l)return l(i,!0);if(a)return a(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[i]={exports:{}};t[i][0].call(c.exports,function(e){var n=t[i][1][e];return o(n||e)},c,c.exports,e,t,n,r)}return n[i].exports}for(var a="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}}return e},n.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var o={arraySet:function(e,t,n,r,o){if(t.subarray&&e.subarray)return void e.set(t.subarray(n,n+r),o);for(var a=0;a<r;a++)e[o+a]=t[n+a]},flattenChunks:function(e){var t,n,r,o,a,i;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(i=new Uint8Array(r),o=0,t=0,n=e.length;t<n;t++)a=e[t],i.set(a,o),o+=a.length;return i}},a={arraySet:function(e,t,n,r,o){for(var a=0;a<r;a++)e[o+a]=t[n+a]},flattenChunks:function(e){return[].concat.apply([],e)}};n.setTyped=function(e){e?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,o)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,a))},n.setTyped(r)},{}],2:[function(e,t,n){"use strict";function r(e,t){if(t<65537&&(e.subarray&&i||!e.subarray&&a))return String.fromCharCode.apply(null,o.shrinkBuf(e,t));for(var n="",r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n}var o=e("./common"),a=!0,i=!0;try{String.fromCharCode.apply(null,[0])}catch(e){a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){i=!1}for(var s=new o.Buf8(256),l=0;l<256;l++)s[l]=l>=252?6:l>=248?5:l>=240?4:l>=224?3:l>=192?2:1;s[254]=s[254]=1,n.string2buf=function(e){var t,n,r,a,i,s=e.length,l=0;for(a=0;a<s;a++)n=e.charCodeAt(a),55296==(64512&n)&&a+1<s&&56320==(64512&(r=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(r-56320),a++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=new o.Buf8(l),i=0,a=0;i<l;a++)n=e.charCodeAt(a),55296==(64512&n)&&a+1<s&&56320==(64512&(r=e.charCodeAt(a+1)))&&(n=65536+(n-55296<<10)+(r-56320),a++),n<128?t[i++]=n:n<2048?(t[i++]=192|n>>>6,t[i++]=128|63&n):n<65536?(t[i++]=224|n>>>12,t[i++]=128|n>>>6&63,t[i++]=128|63&n):(t[i++]=240|n>>>18,t[i++]=128|n>>>12&63,t[i++]=128|n>>>6&63,t[i++]=128|63&n);return t},n.buf2binstring=function(e){return r(e,e.length)},n.binstring2buf=function(e){for(var t=new o.Buf8(e.length),n=0,r=t.length;n<r;n++)t[n]=e.charCodeAt(n);return t},n.buf2string=function(e,t){var n,o,a,i,l=t||e.length,u=new Array(2*l);for(o=0,n=0;n<l;)if((a=e[n++])<128)u[o++]=a;else if((i=s[a])>4)u[o++]=65533,n+=i-1;else{for(a&=2===i?31:3===i?15:7;i>1&&n<l;)a=a<<6|63&e[n++],i--;i>1?u[o++]=65533:a<65536?u[o++]=a:(a-=65536,u[o++]=55296|a>>10&1023,u[o++]=56320|1023&a)}return r(u,o)},n.utf8border=function(e,t){var n;for(t=t||e.length,t>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0?t:0===n?t:n+s[e[n]]>t?n:t}},{"./common":1}],3:[function(e,t,n){"use strict";function r(e,t,n,r){for(var o=65535&e|0,a=e>>>16&65535|0,i=0;0!==n;){i=n>2e3?2e3:n,n-=i;do{o=o+t[r++]|0,a=a+o|0}while(--i);o%=65521,a%=65521}return o|a<<16|0}t.exports=r},{}],4:[function(e,t,n){t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],5:[function(e,t,n){"use strict";function r(e,t,n,r){var a=o,i=r+n;e^=-1;for(var s=r;s<i;s++)e=e>>>8^a[255&(e^t[s])];return-1^e}var o=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=r},{}],6:[function(e,t,n){"use strict";function r(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}t.exports=r},{}],7:[function(e,t,n){"use strict";t.exports=function(e,t){var n,r,o,a,i,s,l,u,c,d,p,f,h,m,y,g,v,b,_,w,x,S,C,k,E;n=e.state,r=e.next_in,k=e.input,o=r+(e.avail_in-5),a=e.next_out,E=e.output,i=a-(t-e.avail_out),s=a+(e.avail_out-257),l=n.dmax,u=n.wsize,c=n.whave,d=n.wnext,p=n.window,f=n.hold,h=n.bits,m=n.lencode,y=n.distcode,g=(1<<n.lenbits)-1,v=(1<<n.distbits)-1;e:do{h<15&&(f+=k[r++]<<h,h+=8,f+=k[r++]<<h,h+=8),b=m[f&g];t:for(;;){if(_=b>>>24,f>>>=_,h-=_,0===(_=b>>>16&255))E[a++]=65535&b;else{if(!(16&_)){if(0==(64&_)){b=m[(65535&b)+(f&(1<<_)-1)];continue t}if(32&_){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}w=65535&b,_&=15,_&&(h<_&&(f+=k[r++]<<h,h+=8),w+=f&(1<<_)-1,f>>>=_,h-=_),h<15&&(f+=k[r++]<<h,h+=8,f+=k[r++]<<h,h+=8),b=y[f&v];n:for(;;){if(_=b>>>24,f>>>=_,h-=_,!(16&(_=b>>>16&255))){if(0==(64&_)){b=y[(65535&b)+(f&(1<<_)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(x=65535&b,_&=15,h<_&&(f+=k[r++]<<h,(h+=8)<_&&(f+=k[r++]<<h,h+=8)),(x+=f&(1<<_)-1)>l){e.msg="invalid distance too far back",n.mode=30;break e}if(f>>>=_,h-=_,_=a-i,x>_){if((_=x-_)>c&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(S=0,C=p,0===d){if(S+=u-_,_<w){w-=_;do{E[a++]=p[S++]}while(--_);S=a-x,C=E}}else if(d<_){if(S+=u+d-_,(_-=d)<w){w-=_;do{E[a++]=p[S++]}while(--_);if(S=0,d<w){_=d,w-=_;do{E[a++]=p[S++]}while(--_);S=a-x,C=E}}}else if(S+=d-_,_<w){w-=_;do{E[a++]=p[S++]}while(--_);S=a-x,C=E}for(;w>2;)E[a++]=C[S++],E[a++]=C[S++],E[a++]=C[S++],w-=3;w&&(E[a++]=C[S++],w>1&&(E[a++]=C[S++]))}else{S=a-x;do{E[a++]=E[S++],E[a++]=E[S++],E[a++]=E[S++],w-=3}while(w>2);w&&(E[a++]=E[S++],w>1&&(E[a++]=E[S++]))}break}}break}}while(r<o&&a<s);w=h>>3,r-=w,h-=w<<3,f&=(1<<h)-1,e.next_in=r,e.next_out=a,e.avail_in=r<o?o-r+5:5-(r-o),e.avail_out=a<s?s-a+257:257-(a-s),n.hold=f,n.bits=h}},{}],8:[function(e,t,n){"use strict";function r(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function o(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new g.Buf16(320),this.work=new g.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function a(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=R,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new g.Buf32(he),t.distcode=t.distdyn=new g.Buf32(me),t.sane=1,t.back=-1,A):P}function i(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,a(e)):P}function s(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?P:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,i(e))):P}function l(e,t){var n,r;return e?(r=new o,e.state=r,r.window=null,n=s(e,t),n!==A&&(e.state=null),n):P}function u(e){return l(e,ye)}function c(e){if(ge){var t;for(m=new g.Buf32(512),y=new g.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(w(S,e.lens,0,288,m,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;w(C,e.lens,0,32,y,0,e.work,{bits:5}),ge=!1}e.lencode=m,e.lenbits=9,e.distcode=y,e.distbits=5}function d(e,t,n,r){var o,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new g.Buf8(a.wsize)),r>=a.wsize?(g.arraySet(a.window,t,n-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):(o=a.wsize-a.wnext,o>r&&(o=r),g.arraySet(a.window,t,n-r,o,a.wnext),r-=o,r?(g.arraySet(a.window,t,n-r,r,0),a.wnext=r,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0}function p(e,t){var n,o,a,i,s,l,u,p,f,h,m,y,he,me,ye,ge,ve,be,_e,we,xe,Se,Ce,ke,Ee=0,Me=new g.Buf8(4),Ae=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return P;n=e.state,n.mode===Z&&(n.mode=Y),s=e.next_out,a=e.output,u=e.avail_out,i=e.next_in,o=e.input,l=e.avail_in,p=n.hold,f=n.bits,h=l,m=u,Se=A;e:for(;;)switch(n.mode){case R:if(0===n.wrap){n.mode=Y;break}for(;f<16;){if(0===l)break e;l--,p+=o[i++]<<f,f+=8}if(2&n.wrap&&35615===p){n.check=0,Me[0]=255&p,Me[1]=p>>>8&255,n.check=b(n.check,Me,2,0),p=0,f=0,n.mode=L;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&p)<<8)+(p>>8))%31){e.msg="incorrect header check",n.mode=de;break}if((15&p)!==N){e.msg="unknown compression method",n.mode=de;break}if(p>>>=4,f-=4,xe=8+(15&p),0===n.wbits)n.wbits=xe;else if(xe>n.wbits){e.msg="invalid window size",n.mode=de;break}n.dmax=1<<xe,e.adler=n.check=1,n.mode=512&p?q:Z,p=0,f=0;break;case L:for(;f<16;){if(0===l)break e;l--,p+=o[i++]<<f,f+=8}if(n.flags=p,(255&n.flags)!==N){e.msg="unknown compression method",n.mode=de;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=de;break}n.head&&(n.head.text=p>>8&1),512&n.flags&&(Me[0]=255&p,Me[1]=p>>>8&255,n.check=b(n.check,Me,2,0)),p=0,f=0,n.mode=F;case F:for(;f<32;){if(0===l)break e;l--,p+=o[i++]<<f,f+=8}n.head&&(n.head.time=p),512&n.flags&&(Me[0]=255&p,Me[1]=p>>>8&255,Me[2]=p>>>16&255,Me[3]=p>>>24&255,n.check=b(n.check,Me,4,0)),p=0,f=0,n.mode=z;case z:for(;f<16;){if(0===l)break e;l--,p+=o[i++]<<f,f+=8}n.head&&(n.head.xflags=255&p,n.head.os=p>>8),512&n.flags&&(Me[0]=255&p,Me[1]=p>>>8&255,n.check=b(n.check,Me,2,0)),p=0,f=0,n.mode=B;case B:if(1024&n.flags){for(;f<16;){if(0===l)break e;l--,p+=o[i++]<<f,f+=8}n.length=p,n.head&&(n.head.extra_len=p),512&n.flags&&(Me[0]=255&p,Me[1]=p>>>8&255,n.check=b(n.check,Me,2,0)),p=0,f=0}else n.head&&(n.head.extra=null);n.mode=V;case V:if(1024&n.flags&&(y=n.length,y>l&&(y=l),y&&(n.head&&(xe=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),g.arraySet(n.head.extra,o,i,y,xe)),512&n.flags&&(n.check=b(n.check,o,y,i)),l-=y,i+=y,n.length-=y),n.length))break e;n.length=0,n.mode=G;case G:if(2048&n.flags){if(0===l)break e;y=0;do{xe=o[i+y++],n.head&&xe&&n.length<65536&&(n.head.name+=String.fromCharCode(xe))}while(xe&&y<l);if(512&n.flags&&(n.check=b(n.check,o,y,i)),l-=y,i+=y,xe)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=H;case H:if(4096&n.flags){if(0===l)break e;y=0;do{xe=o[i+y++],n.head&&xe&&n.length<65536&&(n.head.comment+=String.fromCharCode(xe))}while(xe&&y<l);if(512&n.flags&&(n.check=b(n.check,o,y,i)),l-=y,i+=y,xe)break e}else n.head&&(n.head.comment=null);n.mode=U;case U:if(512&n.flags){for(;f<16;){if(0===l)break e;l--,p+=o[i++]<<f,f+=8}if(p!==(65535&n.check)){e.msg="header crc mismatch",n.mode=de;break}p=0,f=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=Z;break;case q:for(;f<32;){if(0===l)break e;l--,p+=o[i++]<<f,f+=8}e.adler=n.check=r(p),p=0,f=0,n.mode=W;case W:if(0===n.havedict)return e.next_out=s,e.avail_out=u,e.next_in=i,e.avail_in=l,n.hold=p,n.bits=f,O;e.adler=n.check=1,n.mode=Z;case Z:if(t===E||t===M)break e;case Y:if(n.last){p>>>=7&f,f-=7&f,n.mode=le;break}for(;f<3;){if(0===l)break e;l--,p+=o[i++]<<f,f+=8}switch(n.last=1&p,p>>>=1,f-=1,3&p){case 0:n.mode=K;break;case 1:if(c(n),n.mode=te,t===M){p>>>=2,f-=2;break e}break;case 2:n.mode=J;break;case 3:e.msg="invalid block type",n.mode=de}p>>>=2,f-=2;break;case K:for(p>>>=7&f,f-=7&f;f<32;){if(0===l)break e;l--,p+=o[i++]<<f,f+=8}if((65535&p)!=(p>>>16^65535)){e.msg="invalid stored block lengths",n.mode=de;break}if(n.length=65535&p,p=0,f=0,n.mode=X,t===M)break e;case X:n.mode=Q;case Q:if(y=n.length){if(y>l&&(y=l),y>u&&(y=u),0===y)break e;g.arraySet(a,o,i,y,s),l-=y,i+=y,u-=y,s+=y,n.length-=y;break}n.mode=Z;break;case J:for(;f<14;){if(0===l)break e;l--,p+=o[i++]<<f,f+=8}if(n.nlen=257+(31&p),p>>>=5,f-=5,n.ndist=1+(31&p),p>>>=5,f-=5,n.ncode=4+(15&p),p>>>=4,f-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=de;break}n.have=0,n.mode=$;case $:for(;n.have<n.ncode;){for(;f<3;){if(0===l)break e;l--,p+=o[i++]<<f,f+=8}n.lens[Ae[n.have++]]=7&p,p>>>=3,f-=3}for(;n.have<19;)n.lens[Ae[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,Ce={bits:n.lenbits},Se=w(x,n.lens,0,19,n.lencode,0,n.work,Ce),n.lenbits=Ce.bits,Se){e.msg="invalid code lengths set",n.mode=de;break}n.have=0,n.mode=ee;case ee:for(;n.have<n.nlen+n.ndist;){for(;Ee=n.lencode[p&(1<<n.lenbits)-1],ye=Ee>>>24,ge=Ee>>>16&255,ve=65535&Ee,!(ye<=f);){if(0===l)break e;l--,p+=o[i++]<<f,f+=8}if(ve<16)p>>>=ye,f-=ye,n.lens[n.have++]=ve;else{if(16===ve){for(ke=ye+2;f<ke;){if(0===l)break e;l--,p+=o[i++]<<f,f+=8}if(p>>>=ye,f-=ye,0===n.have){e.msg="invalid bit length repeat",n.mode=de;break}xe=n.lens[n.have-1],y=3+(3&p),p>>>=2,f-=2}else if(17===ve){for(ke=ye+3;f<ke;){if(0===l)break e;l--,p+=o[i++]<<f,f+=8}p>>>=ye,f-=ye,xe=0,y=3+(7&p),p>>>=3,f-=3}else{for(ke=ye+7;f<ke;){if(0===l)break e;l--,p+=o[i++]<<f,f+=8}p>>>=ye,f-=ye,xe=0,y=11+(127&p),p>>>=7,f-=7}if(n.have+y>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=de;break}for(;y--;)n.lens[n.have++]=xe}}if(n.mode===de)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=de;break}if(n.lenbits=9,Ce={bits:n.lenbits},Se=w(S,n.lens,0,n.nlen,n.lencode,0,n.work,Ce),n.lenbits=Ce.bits,Se){e.msg="invalid literal/lengths set",n.mode=de;break}if(n.distbits=6,n.distcode=n.distdyn,Ce={bits:n.distbits},Se=w(C,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,Ce),n.distbits=Ce.bits,Se){e.msg="invalid distances set",n.mode=de;break}if(n.mode=te,t===M)break e;case te:n.mode=ne;case ne:if(l>=6&&u>=258){e.next_out=s,e.avail_out=u,e.next_in=i,e.avail_in=l,n.hold=p,n.bits=f,_(e,m),s=e.next_out,a=e.output,u=e.avail_out,i=e.next_in,o=e.input,l=e.avail_in,p=n.hold,f=n.bits,n.mode===Z&&(n.back=-1);break}for(n.back=0;Ee=n.lencode[p&(1<<n.lenbits)-1],ye=Ee>>>24,ge=Ee>>>16&255,ve=65535&Ee,!(ye<=f);){if(0===l)break e;l--,p+=o[i++]<<f,f+=8}if(ge&&0==(240&ge)){for(be=ye,_e=ge,we=ve;Ee=n.lencode[we+((p&(1<<be+_e)-1)>>be)],ye=Ee>>>24,ge=Ee>>>16&255,ve=65535&Ee,!(be+ye<=f);){if(0===l)break e;l--,p+=o[i++]<<f,f+=8}p>>>=be,f-=be,n.back+=be}if(p>>>=ye,f-=ye,n.back+=ye,n.length=ve,0===ge){n.mode=se;break}if(32&ge){n.back=-1,n.mode=Z;break}if(64&ge){e.msg="invalid literal/length code",n.mode=de;break}n.extra=15&ge,n.mode=re;case re:if(n.extra){for(ke=n.extra;f<ke;){if(0===l)break e;l--,p+=o[i++]<<f,f+=8}n.length+=p&(1<<n.extra)-1,p>>>=n.extra,f-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=oe;case oe:for(;Ee=n.distcode[p&(1<<n.distbits)-1],ye=Ee>>>24,ge=Ee>>>16&255,ve=65535&Ee,!(ye<=f);){if(0===l)break e;l--,p+=o[i++]<<f,f+=8}if(0==(240&ge)){for(be=ye,_e=ge,we=ve;Ee=n.distcode[we+((p&(1<<be+_e)-1)>>be)],ye=Ee>>>24,ge=Ee>>>16&255,ve=65535&Ee,!(be+ye<=f);){if(0===l)break e;l--,p+=o[i++]<<f,f+=8}p>>>=be,f-=be,n.back+=be}if(p>>>=ye,f-=ye,n.back+=ye,64&ge){e.msg="invalid distance code",n.mode=de;break}n.offset=ve,n.extra=15&ge,n.mode=ae;case ae:if(n.extra){for(ke=n.extra;f<ke;){if(0===l)break e;l--,p+=o[i++]<<f,f+=8}n.offset+=p&(1<<n.extra)-1,p>>>=n.extra,f-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=de;break}n.mode=ie;case ie:if(0===u)break e;if(y=m-u,n.offset>y){if((y=n.offset-y)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=de;break}y>n.wnext?(y-=n.wnext,he=n.wsize-y):he=n.wnext-y,y>n.length&&(y=n.length),me=n.window}else me=a,he=s-n.offset,y=n.length;y>u&&(y=u),u-=y,n.length-=y;do{a[s++]=me[he++]}while(--y);0===n.length&&(n.mode=ne);break;case se:if(0===u)break e;a[s++]=n.length,u--,n.mode=ne;break;case le:if(n.wrap){for(;f<32;){if(0===l)break e;l--,p|=o[i++]<<f,f+=8}if(m-=u,e.total_out+=m,n.total+=m,m&&(e.adler=n.check=n.flags?b(n.check,a,m,s-m):v(n.check,a,m,s-m)),m=u,(n.flags?p:r(p))!==n.check){e.msg="incorrect data check",n.mode=de;break}p=0,f=0}n.mode=ue;case ue:if(n.wrap&&n.flags){for(;f<32;){if(0===l)break e;l--,p+=o[i++]<<f,f+=8}if(p!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=de;break}p=0,f=0}n.mode=ce;case ce:Se=T;break e;case de:Se=j;break e;case pe:return I;case fe:default:return P}return e.next_out=s,e.avail_out=u,e.next_in=i,e.avail_in=l,n.hold=p,n.bits=f,(n.wsize||m!==e.avail_out&&n.mode<de&&(n.mode<le||t!==k))&&d(e,e.output,e.next_out,m-e.avail_out)?(n.mode=pe,I):(h-=e.avail_in,m-=e.avail_out,e.total_in+=h,e.total_out+=m,n.total+=m,n.wrap&&m&&(e.adler=n.check=n.flags?b(n.check,a,m,e.next_out-m):v(n.check,a,m,e.next_out-m)),e.data_type=n.bits+(n.last?64:0)+(n.mode===Z?128:0)+(n.mode===te||n.mode===X?256:0),(0===h&&0===m||t===k)&&Se===A&&(Se=D),Se)}function f(e){if(!e||!e.state)return P;var t=e.state;return t.window&&(t.window=null),e.state=null,A}function h(e,t){var n;return e&&e.state?(n=e.state,0==(2&n.wrap)?P:(n.head=t,t.done=!1,A)):P}var m,y,g=e("../utils/common"),v=e("./adler32"),b=e("./crc32"),_=e("./inffast"),w=e("./inftrees"),x=0,S=1,C=2,k=4,E=5,M=6,A=0,T=1,O=2,P=-2,j=-3,I=-4,D=-5,N=8,R=1,L=2,F=3,z=4,B=5,V=6,G=7,H=8,U=9,q=10,W=11,Z=12,Y=13,K=14,X=15,Q=16,J=17,$=18,ee=19,te=20,ne=21,re=22,oe=23,ae=24,ie=25,se=26,le=27,ue=28,ce=29,de=30,pe=31,fe=32,he=852,me=592,ye=15,ge=!0;n.inflateReset=i,n.inflateReset2=s,n.inflateResetKeep=a,n.inflateInit=u,n.inflateInit2=l,n.inflate=p,n.inflateEnd=f,n.inflateGetHeader=h,n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":1,"./adler32":3,"./crc32":5,"./inffast":7,"./inftrees":9}],9:[function(e,t,n){"use strict";var r=e("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],i=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,n,l,u,c,d,p){var f,h,m,y,g,v,b,_,w,x=p.bits,S=0,C=0,k=0,E=0,M=0,A=0,T=0,O=0,P=0,j=0,I=null,D=0,N=new r.Buf16(16),R=new r.Buf16(16),L=null,F=0;for(S=0;S<=15;S++)N[S]=0;for(C=0;C<l;C++)N[t[n+C]]++;for(M=x,E=15;E>=1&&0===N[E];E--);if(M>E&&(M=E),0===E)return u[c++]=20971520,u[c++]=20971520,p.bits=1,0;for(k=1;k<E&&0===N[k];k++);for(M<k&&(M=k),O=1,S=1;S<=15;S++)if(O<<=1,(O-=N[S])<0)return-1;if(O>0&&(0===e||1!==E))return-1;for(R[1]=0,S=1;S<15;S++)R[S+1]=R[S]+N[S];for(C=0;C<l;C++)0!==t[n+C]&&(d[R[t[n+C]]++]=C);if(0===e?(I=L=d,v=19):1===e?(I=o,D-=257,L=a,F-=257,v=256):(I=i,L=s,v=-1),j=0,C=0,S=k,g=c,A=M,T=0,m=-1,P=1<<M,y=P-1,1===e&&P>852||2===e&&P>592)return 1;for(var z=0;;){z++,b=S-T,d[C]<v?(_=0,w=d[C]):d[C]>v?(_=L[F+d[C]],w=I[D+d[C]]):(_=96,w=0),f=1<<S-T,h=1<<A,k=h;do{h-=f,u[g+(j>>T)+h]=b<<24|_<<16|w|0}while(0!==h);for(f=1<<S-1;j&f;)f>>=1;if(0!==f?(j&=f-1,j+=f):j=0,C++,0==--N[S]){if(S===E)break;S=t[n+d[C]]}if(S>M&&(j&y)!==m){for(0===T&&(T=M),g+=k,A=S-T,O=1<<A;A+T<E&&!((O-=N[A+T])<=0);)A++,O<<=1;if(P+=1<<A,1===e&&P>852||2===e&&P>592)return 1;m=j&y,u[m]=M<<24|A<<16|g-c|0}}return 0!==j&&(u[g+j]=S-T<<24|64<<16|0),p.bits=M,0}},{"../utils/common":1}],10:[function(e,t,n){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],11:[function(e,t,n){"use strict";function r(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}t.exports=r},{}],"/lib/inflate.js":[function(e,t,n){"use strict";function r(e,t){var n=new f(t);if(n.push(e,!0),n.err)throw n.msg;return n.result}function o(e,t){return t=t||{},t.raw=!0,r(e,t)}var a=e("./zlib/inflate.js"),i=e("./utils/common"),s=e("./utils/strings"),l=e("./zlib/constants"),u=e("./zlib/messages"),c=e("./zlib/zstream"),d=e("./zlib/gzheader"),p=Object.prototype.toString,f=function(e){this.options=i.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var n=a.inflateInit2(this.strm,t.windowBits);if(n!==l.Z_OK)throw new Error(u[n]);this.header=new d,a.inflateGetHeader(this.strm,this.header)};f.prototype.push=function(e,t){var n,r,o,u,c,d=this.strm,f=this.options.chunkSize;if(this.ended)return!1;r=t===~~t?t:!0===t?l.Z_FINISH:l.Z_NO_FLUSH,"string"==typeof e?d.input=s.binstring2buf(e):"[object ArrayBuffer]"===p.call(e)?d.input=new Uint8Array(e):d.input=e,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new i.Buf8(f),d.next_out=0,d.avail_out=f),(n=a.inflate(d,l.Z_NO_FLUSH))!==l.Z_STREAM_END&&n!==l.Z_OK)return this.onEnd(n),this.ended=!0,!1;d.next_out&&(0!==d.avail_out&&n!==l.Z_STREAM_END&&(0!==d.avail_in||r!==l.Z_FINISH&&r!==l.Z_SYNC_FLUSH)||("string"===this.options.to?(o=s.utf8border(d.output,d.next_out),u=d.next_out-o,c=s.buf2string(d.output,o),d.next_out=u,d.avail_out=f-u,u&&i.arraySet(d.output,d.output,o,u,0),this.onData(c)):this.onData(i.shrinkBuf(d.output,d.next_out))))}while(d.avail_in>0&&n!==l.Z_STREAM_END);return n===l.Z_STREAM_END&&(r=l.Z_FINISH),r===l.Z_FINISH?(n=a.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===l.Z_OK):r!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),d.avail_out=0,!0)},f.prototype.onData=function(e){this.chunks.push(e)},f.prototype.onEnd=function(e){e===l.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Inflate=f,n.inflate=r,n.inflateRaw=o,n.ungzip=r},{"./utils/common":1,"./utils/strings":2,"./zlib/constants":4,"./zlib/gzheader":6,"./zlib/inflate.js":8,"./zlib/messages":10,"./zlib/zstream":11}]},{},[])("/lib/inflate.js")}),n=function(e){return e.$3Dmol||{}}(window),"object"==typeof e&&"object"==typeof e.exports&&(e.exports=n),$.get("https://3dmol.csb.pitt.edu/track/report.cgi"),String.prototype.startsWith||(String.prototype.startsWith=function(e){return 0===this.lastIndexOf(e,0)}),String.prototype.endsWith||(String.prototype.endsWith=function(e){return-1!==this.indexOf(e,this.length-e.length)}),$.ajaxTransport("+binary",function(e,t,n){if(window.FormData&&(e.dataType&&"binary"==e.dataType||e.data&&(window.ArrayBuffer&&e.data instanceof ArrayBuffer||window.Blob&&e.data instanceof Blob)))return{send:function(t,n){var r=new XMLHttpRequest,o=e.url,a=e.type,i=e.async||!0,s=e.responseType||"blob",l=e.data||null,u=e.username||null,c=e.password||null;r.addEventListener("load",function(){var t={};t[e.dataType]=r.response,n(r.status,r.statusText,t,r.getAllResponseHeaders())}),r.open(a,o,i,u,c);for(var d in t)r.setRequestHeader(d,t[d]);r.responseType=s,r.send(l)},abort:function(){n.abort()}}}),n.createViewer=function(e,t){if("string"===$.type(e)&&(e=$("#"+e)),e){t=t||{};try{return new n.GLViewer(e,t)}catch(e){throw"error creating viewer: "+e}return null}},n.viewers={},n.getbin=function(e,t){$.ajax({url:e,type:"GET",dataType:"binary",responseType:"arraybuffer",processData:!1}).done(function(e,n,r){t(e)}).fail(function(e,t){console.log(t)})},n.download=function(e,t,r,o){var a="",i="",s="",l=t.addModel();if("mmtf:"===e.substr(0,5)){i=r&&r.pdbUri?r.pdbUri:"https://mmtf.rcsb.org/v1.0/full/",e=e.substr(5).toUpperCase();var u=i+e;r&&void 0===r.noComputeSecondaryStructure&&(r.noComputeSecondaryStructure=!0),n.getbin(u,function(e){l.addMolData(e,"mmtf",r),t.zoomTo(),t.render(),o&&o(l)})}else{if("pdb:"===e.substr(0,4)){if(a="mmtf",r&&r.format&&(a=r.format),r&&void 0===r.noComputeSecondaryStructure&&(r.noComputeSecondaryStructure=!0),e=e.substr(4).toUpperCase(),!e.match(/^[1-9][A-Za-z0-9]{3}$/))return void alert("Wrong PDB ID");"mmtf"==a?(s=r&&r.mmtfUri?r.mmtfUri:"https://mmtf.rcsb.org/v1.0/full/",u=s+e.toUpperCase()):(i=r&&r.pdbUri?r.pdbUri:"https://files.rcsb.org/view/",u=i+e+"."+a)}else if("cid:"==e.substr(0,4)){if(a="sdf",e=e.substr(4),!e.match(/^[0-9]+$/))return void alert("Wrong Compound ID");u="https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+e+"/SDF?record_type=3d"}else"url:"==e.substr(0,4)&&(u=e.substr(4),a=u);var c=function(e){l.addMolData(e,a,r),t.zoomTo(),t.render(),o&&o(l)};"mmtf"==a?n.getbin(u,c):$.get(u,c).fail(function(e){console.log("fetch of "+u+" failed: "+e.statusText)})}return l},n.SurfaceType={VDW:1,MS:2,SAS:3,SES:4},n.mergeGeos=function(e,t){var n=t.geometry;void 0!==n&&e.geometryGroups.push(n.geometryGroups[0])},n.multiLineString=function(e){return e.toString().replace(/^[^\/]+\/\*!?/,"").replace(/\*\/[^\/]+$/,"")},n.syncSurface=!1,(window.navigator.userAgent.indexOf("MSIE ")>=0||window.navigator.userAgent.indexOf("Trident/")>=0)&&(n.syncSurface=!0),n.specStringToObject=function(e){if("object"==typeof e)return e;if(void 0===e||null==e)return e;e=e.replace(/%7E/,"~");var t=function(e){return $.isNumeric(e)?Math.floor(parseFloat(e))==parseInt(e)?parseFloat(e):e.indexOf(".")>=0?parseFloat(e):parseInt(e):"true"===e||"false"!==e&&e},n={};if("all"===e)return n;for(var r=e.split(";"),o=0;o<r.length;o++){var a=r[o].split(":"),i=a[0],s={},l=a[1];if(l)if(l=l.replace(/~/g,"="),-1!==l.indexOf("="))for(var u=l.split(","),c=0;c<u.length;c++){var d=u[c].split("=",2);s[d[0]]=t(d[1])}else s=-1!==l.indexOf(",")?l.split(","):t(l);n[i]=s}return n},n.getExtent=function(e,t){var n,r,o,a,i,s,l,u,c,d,p=!t;if(n=r=o=9999,a=i=s=-9999,l=u=c=d=0,0===e.length)return[[0,0,0],[0,0,0],[0,0,0]];for(var f=0;f<e.length;f++){var h=e[f];if(void 0!==h&&isFinite(h.x)&&isFinite(h.y)&&isFinite(h.z)&&(d++,l+=h.x,u+=h.y,c+=h.z,n=n<h.x?n:h.x,r=r<h.y?r:h.y,o=o<h.z?o:h.z,a=a>h.x?a:h.x,i=i>h.y?i:h.y,s=s>h.z?s:h.z,h.symmetries&&p))for(var m=0;m<h.symmetries.length;m++)d++,l+=h.symmetries[m].x,u+=h.symmetries[m].y,c+=h.symmetries[m].z,n=n<h.symmetries[m].x?n:h.symmetries[m].x,r=r<h.symmetries[m].y?r:h.symmetries[m].y,o=o<h.symmetries[m].z?o:h.symmetries[m].z,a=a>h.symmetries[m].x?a:h.symmetries[m].x,i=i>h.symmetries[m].y?i:h.symmetries[m].y,s=s>h.symmetries[m].z?s:h.symmetries[m].z}return[[n,r,o],[a,i,s],[l/d,u/d,c/d]]},n.getAtomProperty=function(e,t){var n=null;return e.properties&&void 0!==e.properties[t]?n=e.properties[t]:void 0!==e[t]&&(n=e[t]),n},n.getPropertyRange=function(e,t){for(var r=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,a=0,i=e.length;a<i;a++){var s=e[a],l=n.getAtomProperty(s,t);null!=l&&(l<r&&(r=l),l>o&&(o=l))}return isFinite(r)||isFinite(o)?isFinite(r)?isFinite(o)||(o=r):r=o:r=o=0,[r,o]},"function"==typeof define&&define.amd&&define("$3Dmol",n);var n=n||{};n.Math={clamp:function(e,t,n){return Math.min(Math.max(e,t),n)},degToRad:function(){var e=Math.PI/180;return function(t){return t*e}}()},n.Quaternion=function(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==r?r:1},n.Quaternion.prototype={constructor:n.Quaternion,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this},conjugate:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this},inverse:function(){return this.conjugate().normalize()},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},normalize:function(){var e=this.length();return 0===e?(this.x=0,this.y=0,this.z=0,this.w=1):(e=1/e,this.x*=e,this.y*=e,this.z*=e,this.w*=e),this},multiply:function(e){return this.multiplyQuaternions(this,e)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},multiplyQuaternions:function(e,t){var n=e.x,r=e.y,o=e.z,a=e.w,i=t.x,s=t.y,l=t.z,u=t.w;return this.x=n*u+a*i+r*l-o*s,this.y=r*u+a*s+o*i-n*l,this.z=o*u+a*l+n*s-r*i,this.w=a*u-n*i-r*s-o*l,this},sub:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this},clone:function(){return new n.Quaternion(this.x,this.y,this.z,this.w)}},n.Vector2=function(e,t){this.x=e||0,this.y=t||0},n.Vector2.prototype={constructor:n.Vector2,set:function(e,t){return this.x=e,this.y=t,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},copy:function(e){return this.x=e.x,this.y=e.y,this},clone:function(){return new n.Vector2(this.x,this.y)}},n.Vector3=function(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0},n.Vector3.prototype={constructor:n.Vector3,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},sub:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},divideScalar:function(e){return 0!==e?(this.x/=e,this.y/=e,this.z/=e):(this.x=0,this.y=0,this.z=0),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12],this.y=o[1]*t+o[5]*n+o[9]*r+o[13],this.z=o[2]*t+o[6]*n+o[10]*r+o[14],this},applyProjection:function(e){var t=this.x,n=this.y,r=this.z,o=e.elements,a=o[3]*t+o[7]*n+o[11]*r+o[15];return this.x=(o[0]*t+o[4]*n+o[8]*r+o[12])/a,this.y=(o[1]*t+o[5]*n+o[9]*r+o[13])/a,this.z=(o[2]*t+o[6]*n+o[10]*r+o[14])/a,this},applyQuaternion:function(e){var t=this.x,n=this.y,r=this.z,o=e.x,a=e.y,i=e.z,s=(e.w,{});s.x=2*(n*i-r*a),s.y=2*(r*o-t*i),s.z=2*(t*a-n*o);var l={};return l.x=s.y*i-s.z*a,l.y=s.z*o-s.x*i,l.z=s.x*a-s.y*o,this.x=t+e.w*s.x+l.x,this.y=n+e.w*s.y+l.y,this.z=r+e.w*s.z+l.z,this},negate:function(){return this.multiplyScalar(-1)},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},normalize:function(){return this.divideScalar(this.length())},cross:function(e){var t=this.x,n=this.y,r=this.z;return this.x=n*e.z-r*e.y,this.y=r*e.x-t*e.z,this.z=t*e.y-n*e.x,this},crossVectors:function(e,t){return this.x=e.y*t.z-e.z*t.y,this.y=e.z*t.x-e.x*t.z,this.z=e.x*t.y-e.y*t.x,this},getPositionFromMatrix:function(e){return this.x=e.elements[12],this.y=e.elements[13],this.z=e.elements[14],this},setEulerFromRotationMatrix:function(e,t){var r=e.elements,o=r[0],a=r[4],i=r[8],s=(r[1],r[5]),l=r[9],u=(r[2],r[6]),c=r[10];return void 0===t||"XYZ"===t?(this.y=Math.asin(n.Math.clamp(i,-1,1)),Math.abs(i)<.99999?(this.x=Math.atan2(-l,c),this.z=Math.atan2(-a,o)):(this.x=Math.atan2(u,s),this.z=0)):console.error("Error with vector's setEulerFromRotationMatrix: Unknown order: "+t),this},rotateAboutVector:function(e,t){e.normalize();var n=Math.cos(t),r=Math.sin(t),o=this.clone().multiplyScalar(n),a=e.clone().cross(this).multiplyScalar(r),i=e.clone().multiplyScalar(e.clone().dot(this)).multiplyScalar(1-n),s=o.add(a).add(i);return this.x=s.x,this.y=s.y,this.z=s.z,this},clone:function(){return new n.Vector3(this.x,this.y,this.z)}},n.Matrix3=function(e,t,n,r,o,a,i,s,l){this.elements=new Float32Array(9),this.set(void 0!==e?e:1,t||0,n||0,r||0,void 0!==o?o:1,a||0,i||0,s||0,void 0!==l?l:1)},n.Matrix3.prototype={constructor:n.Matrix3,set:function(e,t,n,r,o,a,i,s,l){var u=this.elements;return u[0]=e,u[3]=t,u[6]=n,u[1]=r,u[4]=o,u[7]=a,u[2]=i,u[5]=s,u[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},copy:function(e){var t=e.elements;this.set(t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8])},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},getInverse:function(e,t){var n=e.elements,r=this.elements;r[0]=n[10]*n[5]-n[6]*n[9],r[1]=-n[10]*n[1]+n[2]*n[9],r[2]=n[6]*n[1]-n[2]*n[5],r[3]=-n[10]*n[4]+n[6]*n[8],r[4]=n[10]*n[0]-n[2]*n[8],r[5]=-n[6]*n[0]+n[2]*n[4],r[6]=n[9]*n[4]-n[5]*n[8],r[7]=-n[9]*n[0]+n[1]*n[8],r[8]=n[5]*n[0]-n[1]*n[4];var o=n[0]*r[0]+n[1]*r[3]+n[2]*r[6];if(0===o){var a="Matrix3.getInverse(): can't invert matrix, determinant is 0";if(t)throw new Error(a);return console.warn(a),this.identity(),this}return this.multiplyScalar(1/o),this},getDeterminant:function(){var e=this.elements;return e[0]*e[4]*e[8]+e[1]*e[5]*e[6]+e[2]*e[3]*e[7]-e[2]*e[4]*e[6]-e[1]*e[3]*e[8]-e[0]*e[5]*e[7]},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},clone:function(){var e=this.elements;return new n.Matrix3(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8])}},n.Matrix4=function(e,t,n,r,o,a,i,s,l,u,c,d,p,f,h,m){if(void 0===t&&void 0!==e)this.elements=new Float32Array(e);else{var y=this.elements=new Float32Array(16);y[0]=void 0!==e?e:1,y[4]=t||0,y[8]=n||0,y[12]=r||0,y[1]=o||0,y[5]=void 0!==a?a:1,y[9]=i||0,y[13]=s||0,y[2]=l||0,y[6]=u||0,y[10]=void 0!==c?c:1,y[14]=d||0,y[3]=p||0,y[7]=f||0,y[11]=h||0,y[15]=void 0!==m?m:1}},n.Matrix4.prototype={constructor:n.Matrix4,set:function(e,t,n,r,o,a,i,s,l,u,c,d,p,f,h,m){var y=this.elements;return y[0]=e,y[4]=t,y[8]=n,y[12]=r,y[1]=o,y[5]=a,y[9]=i,y[13]=s,y[2]=l,y[6]=u,y[10]=c,y[14]=d,y[3]=p,y[7]=f,y[11]=h,y[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},copy:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15]),this},matrix3FromTopLeft:function(){var e=this.elements;return new n.Matrix3(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10])},setRotationFromEuler:function(e,t){var n=this.elements,r=e.x,o=e.y,a=e.z,i=Math.cos(r),s=Math.sin(r),l=Math.cos(o),u=Math.sin(o),c=Math.cos(a),d=Math.sin(a);if(void 0===t||"XYZ"===t){var p=i*c,f=i*d,h=s*c,m=s*d;n[0]=l*c,n[4]=-l*d,n[8]=u,n[1]=f+h*u,n[5]=p-m*u,n[9]=-s*l,n[2]=m-p*u,n[6]=h+f*u,n[10]=i*l}else console.error("Error with matrix4 setRotationFromEuler. Order: "+t);return this},setRotationFromQuaternion:function(e){var t=this.elements,n=e.x,r=e.y,o=e.z,a=e.w,i=n+n,s=r+r,l=o+o,u=n*i,c=n*s,d=n*l,p=r*s,f=r*l,h=o*l,m=a*i,y=a*s,g=a*l;return t[0]=1-(p+h),t[4]=c-g,t[8]=d+y,t[1]=c+g,t[5]=1-(u+h),t[9]=f-m,t[2]=d-y,t[6]=f+m,t[10]=1-(u+p),this},lookAt:function(){var e=new n.Vector3,t=new n.Vector3,r=new n.Vector3;return function(n,o,a){var i=this.elements;return r.subVectors(n,o).normalize(),0===r.length()&&(r.z=1),e.crossVectors(a,r).normalize(),0===e.length()&&(r.x+=1e-4,e.crossVectors(a,r).normalize()),t.crossVectors(r,e),i[0]=e.x,i[4]=t.x,i[8]=r.x,i[1]=e.y,i[5]=t.y,i[9]=r.y,i[2]=e.z,i[6]=t.z,i[10]=r.z,this}}(),multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,o=this.elements,a=n[0],i=n[4],s=n[8],l=n[12],u=n[1],c=n[5],d=n[9],p=n[13],f=n[2],h=n[6],m=n[10],y=n[14],g=n[3],v=n[7],b=n[11],_=n[15],w=r[0],x=r[4],S=r[8],C=r[12],k=r[1],E=r[5],M=r[9],A=r[13],T=r[2],O=r[6],P=r[10],j=r[14],I=r[3],D=r[7],N=r[11],R=r[15];return o[0]=a*w+i*k+s*T+l*I,o[4]=a*x+i*E+s*O+l*D,o[8]=a*S+i*M+s*P+l*N,o[12]=a*C+i*A+s*j+l*R,o[1]=u*w+c*k+d*T+p*I,o[5]=u*x+c*E+d*O+p*D,o[9]=u*S+c*M+d*P+p*N,o[13]=u*C+c*A+d*j+p*R,o[2]=f*w+h*k+m*T+y*I,o[6]=f*x+h*E+m*O+y*D,o[10]=f*S+h*M+m*P+y*N,o[14]=f*C+h*A+m*j+y*R,o[3]=g*w+v*k+b*T+_*I,o[7]=g*x+v*E+b*O+_*D,o[11]=g*S+v*M+b*P+_*N,o[15]=g*C+v*A+b*j+_*R,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},getPosition:function(){var e=new n.Vector3;return function(){console.warn("DEPRECATED: Matrix4's .getPosition() has been removed. Use Vector3.getPositionFromMatrix( matrix ) instead.");var t=this.elements;return e.set(t[12],t[13],t[14])}}(),setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var n=this.elements,r=e.elements,o=r[0],a=r[4],i=r[8],s=r[12],l=r[1],u=r[5],c=r[9],d=r[13],p=r[2],f=r[6],h=r[10],m=r[14],y=r[3],g=r[7],v=r[11],b=r[15];n[0]=c*m*g-d*h*g+d*f*v-u*m*v-c*f*b+u*h*b,n[4]=s*h*g-i*m*g-s*f*v+a*m*v+i*f*b-a*h*b,n[8]=i*d*g-s*c*g+s*u*v-a*d*v-i*u*b+a*c*b,n[12]=s*c*f-i*d*f-s*u*h+a*d*h+i*u*m-a*c*m,n[1]=d*h*y-c*m*y-d*p*v+l*m*v+c*p*b-l*h*b,n[5]=i*m*y-s*h*y+s*p*v-o*m*v-i*p*b+o*h*b,n[9]=s*c*y-i*d*y-s*l*v+o*d*v+i*l*b-o*c*b,n[13]=i*d*p-s*c*p+s*l*h-o*d*h-i*l*m+o*c*m,n[2]=u*m*y-d*f*y+d*p*g-l*m*g-u*p*b+l*f*b,n[6]=s*f*y-a*m*y-s*p*g+o*m*g+a*p*b-o*f*b,n[10]=a*d*y-s*u*y+s*l*g-o*d*g-a*l*b+o*u*b,n[14]=s*u*p-a*d*p-s*l*f+o*d*f+a*l*m-o*u*m,n[3]=c*f*y-u*h*y-c*p*g+l*h*g+u*p*v-l*f*v,n[7]=a*h*y-i*f*y+i*p*g-o*h*g-a*p*v+o*f*v,n[11]=i*u*y-a*c*y-i*l*g+o*c*g+a*l*v-o*u*v,n[15]=a*c*p-i*u*p+i*l*f-o*c*f-a*l*h+o*u*h;var _=r[0]*n[0]+r[1]*n[4]+r[2]*n[8]+r[3]*n[12];if(0===_){var w="Matrix4.getInverse(): can't invert matrix, determinant is 0";if(t)throw new Error(w);return console.warn(w),this.identity(),this}return this.multiplyScalar(1/_),this},isReflected:function(){return this.matrix3FromTopLeft().getDeterminant()<0},compose:function(){var e=new n.Matrix4,t=new n.Matrix4;return function(n,r,o){var a=this.elements;return e.identity(),e.setRotationFromQuaternion(r),t.makeScale(o.x,o.y,o.z),this.multiplyMatrices(e,t),a[12]=n.x,a[13]=n.y,a[14]=n.z,this}}(),decompose:function(){var e=new n.Vector3,t=new n.Vector3,r=new n.Vector3,o=new n.Matrix4;return function(a,i,s){var l=this.elements;return e.set(l[0],l[1],l[2]),t.set(l[4],l[5],l[6]),r.set(l[8],l[9],l[10]),a=a instanceof n.Vector3?a:new n.Vector3,i=i instanceof n.Quaternion?i:new n.Quaternion,s=s instanceof n.Vector3?s:new n.Vector3,s.x=e.length(),s.y=t.length(),s.z=r.length(),a.x=l[12],a.y=l[13],a.z=l[14],o.copy(this),o.elements[0]/=s.x,o.elements[1]/=s.x,o.elements[2]/=s.x,o.elements[4]/=s.y,o.elements[5]/=s.y,o.elements[6]/=s.y,o.elements[8]/=s.z,o.elements[9]/=s.z,o.elements[10]/=s.z,i.setFromRotationMatrix(o),[a,i,s]}}(),scale:function(e){var t=this.elements,n=e.x,r=e.y,o=e.z;return t[0]*=n,t[4]*=r,t[8]*=o,t[1]*=n,t[5]*=r,t[9]*=o,t[2]*=n,t[6]*=r,t[10]*=o,t[3]*=n,t[7]*=r,t[11]*=o,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,Math.max(n,r)))},makeFrustum:function(e,t,n,r,o,a){var i=this.elements,s=2*o/(t-e),l=2*o/(r-n),u=(t+e)/(t-e),c=(r+n)/(r-n),d=-(a+o)/(a-o),p=-2*a*o/(a-o);return i[0]=s,i[4]=0,i[8]=u,i[12]=0,i[1]=0,i[5]=l,i[9]=c,i[13]=0,i[2]=0,i[6]=0,i[10]=d,i[14]=p,i[3]=0,i[7]=0,i[11]=-1,i[15]=0,this},makePerspective:function(e,t,r,o){var a=r*Math.tan(n.Math.degToRad(.5*e)),i=-a,s=i*t,l=a*t;return this.makeFrustum(s,l,i,a,r,o)},makeOrthographic:function(e,t,n,r,o,a){var i=this.elements,s=1/(t-e),l=1/(n-r),u=1/(a-o),c=(t+e)*s,d=(n+r)*l,p=(a+o)*u;return i[0]=2*s,i[4]=0,i[8]=0,i[12]=-c,i[1]=0,i[5]=2*l,i[9]=0,i[13]=-d,i[2]=0,i[6]=0,i[10]=-2*u,i[14]=-p,i[3]=0,i[7]=0,i[11]=0,i[15]=1,this},isEqual:function(e){var t=e.elements,n=this.elements;return n[0]==t[0]&&n[4]==t[4]&&n[8]==t[8]&&n[12]==t[12]&&n[1]==t[1]&&n[5]==t[5]&&n[9]==t[9]&&n[13]==t[13]&&n[2]==t[2]&&n[6]==t[6]&&n[10]==t[10]&&n[14]==t[14]&&n[3]==t[3]&&n[7]==t[7]&&n[11]==t[11]&&n[15]==t[15]},clone:function(){var e=this.elements;return new n.Matrix4(e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15])},isIdentity:function(){var e=this.elements;return 1==e[0]&&0==e[4]&&0==e[8]&&0==e[12]&&0==e[1]&&1==e[5]&&0==e[9]&&0==e[13]&&0==e[2]&&0==e[6]&&1==e[10]&&0==e[14]&&0==e[3]&&0==e[7]&&0==e[11]&&1==e[15]}},n.Ray=function(e,t){this.origin=void 0!==e?e:new n.Vector3,this.direction=void 0!==t?t:new n.Vector3},n.Ray.prototype={constructor:n.Ray,set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return(t||new n.Vector3).copy(this.direction).multiplyScalar(e).add(this.origin)},recast:function(){var e=new n.Vector3;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){var r=t||new n.Vector3;r.subVectors(e,this.origin);var o=r.dot(this.direction);return r.copy(this.direction).multiplyScalar(o).add(this.origin)},distanceToPoint:function(e){var t=new n.Vector3;return function(e){var n=t.subVectors(e,this.origin).dot(this.direction);return t.copy(this.direction).multiplyScalar(n).add(this.origin),t.distanceTo(e)}}(),isIntersectionCylinder:function(){},isIntersectionSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},isIntersectionPlane:function(e){return 0!==e.normal.dot(this.direction)||0===e.distanceToPoint(this.origin)},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0!==t){return-(this.origin.dot(e.normal)+e.constant)/t}if(0===e.distanceToPoint(this.origin))return 0},intersectPlane:function(e,t){var n=this.distanceToPlane(e);if(void 0!==n)return this.at(n,t)},applyMatrix4:function(e){return this.direction.add(this.origin).applyMatrix4(e),this.origin.applyMatrix4(e),this.direction.sub(this.origin),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)},clone:function(){return(new n.Ray).copy(this)}},n.Sphere=function(e,t){this.center=void 0!==e?e:new n.Vector3,this.radius=void 0!==t?t:0},n.Sphere.prototype={constructor:n.Sphere,set:function(e,t){return this.center.copy(e),this.radius=t,this},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius},clone:function(){return(new n.Sphere).copy(this)}},n.Cylinder=function(e,t,r){this.c1=void 0!==e?e:new n.Vector3,this.c2=void 0!==t?t:new n.Vector3,this.direction=(new n.Vector3).subVectors(this.c2,this.c1).normalize(),this.radius=void 0!==r?r:0},n.Cylinder.prototype={constructor:n.Cylinder,copy:function(e){return this.c1.copy(e.c1),this.c2.copy(e.c2),this.direction.copy(e.direction),this.radius=e.radius,this},lengthSq:function(){var e=new n.Vector3;return function(){return e.subVectors(this.c2,this.c1).lengthSq()}}(),applyMatrix4:function(e){return this.direction.add(this.c1).applyMatrix4(e),this.c1.applyMatrix4(e),this.c2.applyMatrix4(e),this.direction.sub(this.c1).normalize(),this.radius=this.radius*e.getMaxScaleOnAxis(),this}},n.Triangle=function(e,t,r){this.a=void 0!==e?e:new n.Vector3,this.b=void 0!==t?t:new n.Vector3,this.c=void 0!==r?r:new n.Vector3},n.Triangle.prototype={constructor:n.Triangle,copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},applyMatrix4:function(e){return this.a.applyMatrix4(e),this.b.applyMatrix4(e),this.c.applyMatrix4(e),this},getNormal:function(){var e=new n.Vector3;return function(){var t=this.a.clone();return t.sub(this.b),e.subVectors(this.c,this.b),t.cross(e),t.normalize(),t}}()},n.EventDispatcher=function(){var e={};this.addEventListener=function(t,n){void 0===e[t]&&(e[t]=[]),-1===e[t].indexOf(n)&&e[t].push(n)},this.removeEventListener=function(t,n){var r=e[t].indexOf(n);-1!==r&&e[t].splice(r,1)},this.dispatchEvent=function(t){var n=e[t.type];if(void 0!==n){t.target=this;for(var r=0,o=n.length;r<o;r++)n[r].call(this,t)}}},n.Color=function(e){return arguments.length>1?(this.r=arguments[0]||0,this.g=arguments[1]||0,this.b=arguments[2]||0,this):this.set(e)},n.Color.prototype={constructor:n.Color,r:0,g:0,b:0,set:function(e){if(e instanceof n.Color)return e.clone();"number"==typeof e?this.setHex(e):"object"==typeof e&&"r"in e&&"g"in e&&"b"in e&&(this.r=e.r,this.g=e.g,this.b=e.b)},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},getHex:function(){return Math.round(255*this.r)<<16|Math.round(255*this.g)<<8|Math.round(255*this.b)},clone:function(){return new n.Color(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},scaled:function(){var e={};return e.r=Math.round(255*this.r),e.g=Math.round(255*this.g),e.b=Math.round(255*this.b),e.a=1,e}},n.Object3D=function(){this.id=n.Object3DIDCount++,this.name="",this.parent=void 0,this.children=[],this.position=new n.Vector3,this.rotation=new n.Vector3,this.matrix=new n.Matrix4,this.matrixWorld=new n.Matrix4,this.quaternion=new n.Quaternion,this.eulerOrder="XYZ",this.up=new n.Vector3(0,1,0),this.scale=new n.Vector3(1,1,1),this.matrixAutoUpdate=!0,this.matrixWorldNeedsUpdate=!0,this.rotationAutoUpdate=!0,this.useQuaternion=!1,this.visible=!0},n.Object3D.prototype={constructor:n.Object3D,lookAt:function(e){this.matrix.lookAt(e,this.position,this.up),this.rotationAutoUpdate&&(!0===this.useQuaternion?this.quaternion.copy(this.matrix.decompose()[1]):this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder))},add:function(e){if(e===this)return void console.error("Can't add $3Dmol.Object3D to itself");e.parent=this,this.children.push(e);for(var t=this;void 0!==t.parent;)t=t.parent;void 0!==t&&t instanceof n.Scene&&t.__addObject(e)},remove:function(e){var t=this.children.indexOf(e);if(-1!==t){e.parent=void 0,this.children.splice(t,1);for(var r=this;void 0!==r.parent;)r=r.parent;void 0!==r&&r instanceof n.Scene&&r.__removeObject(e)}},updateMatrix:function(){this.matrix.setPosition(this.position),!1===this.useQuaternion?this.matrix.setRotationFromEuler(this.rotation,this.eulerOrder):this.matrix.setRotationFromQuaternion(this.quaternion),1===this.scale.x&&1===this.scale.y&&1===this.scale.z||this.matrix.scale(this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){!0===this.matrixAutoUpdate&&this.updateMatrix(),!0!==this.matrixWorldNeedsUpdate&&!0!==e||(void 0===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1;for(var t=0;t<this.children.length;t++)this.children[t].updateMatrixWorld(!0)},clone:function(e){void 0===e&&(e=new n.Object3D),e.name=this.name,e.up.copy(this.up),e.position.copy(this.position),e.rotation.copy(this.rotation),e.eulerOrder=this.eulerOrder,e.scale.copy(this.scale),e.rotationAutoUpdate=this.rotationAutoUpdate,e.matrix.copy(this.matrix),e.matrixWorld.copy(this.matrixWorld),e.quaternion.copy(this.quaternion),e.matrixAutoUpdate=this.matrixAutoUpdate,e.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate,e.useQuaternion=this.useQuaternion,e.visible=this.visible;for(var t=0;t<this.children.length;t++){var r=this.children[t];e.add(r.clone())}return e},setVisible:function(e){this.visible=e;for(var t=0;t<this.children.length;t++){this.children[t].setVisible(e)}}},n.Object3DIDCount=0,n.Geometry=function(){var e=function(e){this.id=e||0,this.vertexArray=null,this.colorArray=null,this.normalArray=null,this.faceArray=null,this.radiusArray=null,this.lineArray=null,this.vertices=0,this.faceidx=0,this.lineidx=0};e.prototype.setColors=function(e){var t=this.vertexArray,r=this.colorArray;if(t.length!=r.length)return void console.log("Cannot re-color geometry group due to mismatched lengths.");for(var o=0;o<t.length;o+=3){var a=e(t[o],t[o+1],t[o+2]);a instanceof n.Color||(a=n.CC.color(a)),r[o]=a.r,r[o+1]=a.g,r[o+2]=a.b}},e.prototype.getNumVertices=function(){return this.vertices},e.prototype.getVertices=function(){return this.vertexArray},e.prototype.getCentroid=function(){for(var e,t,r,o,a=new n.Vector3,i=0;i<this.vertices;++i)e=3*i,t=this.vertexArray[e],r=this.vertexArray[e+1],o=this.vertexArray[e+2],a.x+=t,a.y+=r,a.z+=o;return a.divideScalar(this.vertices),a},e.prototype.setNormals=function(){var e=this.faceArray,t=this.vertexArray,r=this.normalArray;if(this.vertices&&this.faceidx)for(var o,a,i,s,l,u,c,d=0;d<e.length/3;++d)o=3*e[3*d],a=3*e[3*d+1],i=3*e[3*d+2],s=new n.Vector3(t[o],t[o+1],t[o+2]),l=new n.Vector3(t[a],t[a+1],t[a+2]),u=new n.Vector3(t[i],t[i+1],t[i+2]),s.subVectors(s,l),u.subVectors(u,l),u.cross(s),c=u,c.normalize(),r[o]+=c.x,r[a]+=c.x,r[i]+=c.x,r[o+1]+=c.y,r[a+1]+=c.y,r[i+1]+=c.y,r[o+2]+=c.z,r[a+2]+=c.z,r[i+2]+=c.z},e.prototype.setLineIndices=function(){if(this.faceidx){var e=this.faceArray,t=this.lineArray=new Uint16Array(2*this.faceidx);this.lineidx=2*this.faceidx;for(var n=0;n<this.faceidx/3;++n){var r=3*n,o=2*r,a=e[r],i=e[r+1],s=e[r+2];t[o]=a,t[o+1]=i,t[o+2]=a,t[o+3]=s,t[o+4]=i,t[o+5]=s}}},e.prototype.truncateArrayBuffers=function(e,t){e=!0===e;var n=this.vertexArray,r=this.colorArray,o=this.normalArray,a=this.faceArray,i=this.lineArray,s=this.radiusArray;this.vertexArray=n.subarray(0,3*this.vertices),this.colorArray=r.subarray(0,3*this.vertices),e?(this.normalArray=o.subarray(0,3*this.vertices),this.faceArray=a.subarray(0,this.faceidx),this.lineidx>0?this.lineArray=i.subarray(0,this.lineidx):this.lineArray=new Uint16Array(0)):(this.normalArray=new Float32Array(0),this.faceArray=new Uint16Array(0),this.lineArray=new Uint16Array(0)),s&&(this.radiusArray=s.subarray(0,this.vertices)),t&&(this.normalArray&&(this.normalArray=new Float32Array(this.normalArray)),this.faceArray&&(this.faceArray=new Uint16Array(this.faceArray)),this.lineArray&&(this.lineArray=new Uint16Array(this.lineArray)),this.vertexArray&&(this.vertexArray=new Float32Array(this.vertexArray)),this.colorArray&&(this.colorArray=new Float32Array(this.colorArray)),this.radiusArray&&(this.radiusArray=new Float32Array(this.radiusArray))),this.__inittedArrays=!0};var t=function(t){var n=new e(t.geometryGroups.length);return t.geometryGroups.push(n),t.groups=t.geometryGroups.length,n.vertexArray=new Float32Array(196605),n.colorArray=new Float32Array(196605),t.mesh&&(n.normalArray=new Float32Array(196605),n.faceArray=new Uint16Array(393210),n.lineArray=new Uint16Array(393210)),t.radii&&(n.radiusArray=new Float32Array(65535)),n.useOffset=t.offset,n},r=function(e,t,r){n.EventDispatcher.call(this),this.id=n.GeometryIDCount++,this.name="",this.hasTangents=!1,this.dynamic=!0,this.mesh=!0===e,this.radii=t||!1,this.offset=r||!1,this.verticesNeedUpdate=!1,this.elementsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.buffersNeedUpdate=!1,this.geometryGroups=[],this.groups=0};return r.prototype={constructor:r,updateGeoGroup:function(e){e=e||0;var n=this.groups>0?this.geometryGroups[this.groups-1]:null;return(!n||n.vertices+e>n.vertexArray.length/3)&&(n=t(this)),n},addGeoGroup:function(){return t(this)},setUpNormals:function(e){e=e||!1;for(var t=0;t<this.groups;t++){this.geometryGroups[t].setNormals(e)}},setColors:function(e){for(var t=this.geometryGroups.length,n=0;n<t;n++){this.geometryGroups[n].setColors(e)}},setUpWireframe:function(){for(var e=0;e<this.groups;e++){this.geometryGroups[e].setLineIndices()}},initTypedArrays:function(){for(var e=0;e<this.groups;e++){var t=this.geometryGroups[e];!0!==t.__inittedArrays&&t.truncateArrayBuffers(this.mesh,!1)}},dispose:function(){this.dispatchEvent({type:"dispose"})}},r}(),Object.defineProperty(n.Geometry.prototype,"vertices",{get:function(){for(var e=0,t=0;t<this.groups;t++)e+=this.geometryGroups[t].vertices;return e}}),n.GeometryIDCount=0,n.Raycaster=function(){var e=function(e,t,r,o){this.ray=new n.Ray(e,t),this.ray.direction.lengthSq()>0&&this.ray.direction.normalize(),this.near=o||0,this.far=r||1/0},t=new n.Sphere,r=new n.Cylinder,o=new n.Triangle,a=new n.Vector3,i=new n.Vector3,s=new n.Vector3,l=new n.Vector3,u=(new n.Ray,new n.Vector3,new n.Vector3),c=(new n.Matrix4,function(e,t){return e.distance-t.distance}),d=function(e){return Math.min(Math.max(e,-1),1)},p=function(e,c,p,f){if(u.getPositionFromMatrix(e.matrixWorld),void 0===c.intersectionShape)return f;var h=c.intersectionShape,m=p.linePrecision;m*=e.matrixWorld.getMaxScaleOnAxis();var y=m*m;if(void 0!==c.boundingSphere&&c.boundingSphere instanceof n.Sphere&&(t.copy(c.boundingSphere),t.applyMatrix4(e.matrixWorld),!p.ray.isIntersectionSphere(t)))return f;var g,v,b,_,w,x,S,C,k,E,M,A,T,O;for(g=0,v=h.triangle.length;g<v;g++)if(h.triangle[g]instanceof n.Triangle){if(o.copy(h.triangle[g]),o.applyMatrix4(e.matrixWorld),b=o.getNormal(),(_=p.ray.direction.dot(b))>=0)continue;if(a.subVectors(o.a,p.ray.origin),(S=b.dot(a)/_)<0)continue;i.copy(p.ray.direction).multiplyScalar(S).add(p.ray.origin),i.sub(o.a),s.copy(o.b).sub(o.a),l.copy(o.c).sub(o.a);var P=s.dot(l),j=s.lengthSq(),I=l.lengthSq();if((A=(j*i.dot(l)-P*i.dot(s))/(j*I-P*P))<0||A>1)continue;if((M=(i.dot(s)-A*P)/j)<0||M>1||M+A>1)continue;f.push({clickable:c,distance:S})}for(g=0,v=h.cylinder.length;g<v;g++)if(h.cylinder[g]instanceof n.Cylinder){if(r.copy(h.cylinder[g]),r.applyMatrix4(e.matrixWorld),a.subVectors(r.c1,p.ray.origin),w=a.dot(r.direction),x=a.dot(p.ray.direction),_=d(p.ray.direction.dot(r.direction)),0===(k=1-_*_))continue;T=(_*x-w)/k,O=(x-_*w)/k,i.copy(r.direction).multiplyScalar(T).add(r.c1),s.copy(p.ray.direction).multiplyScalar(O).add(p.ray.origin),C=l.subVectors(i,s).lengthSq();var D=r.radius*r.radius;if(C<=D){if(E=(_*w-x)*(_*w-x)-k*(a.lengthSq()-w*w-D),A=S=E<=0?Math.sqrt(C):(x-_*w-Math.sqrt(E))/k,(M=_*A-w)<0||M*M>r.lengthSq()||A<0)continue;f.push({clickable:c,distance:S})}}for(g=0,v=h.line.length;g<v;g+=2){i.copy(h.line[g]),i.applyMatrix4(e.matrixWorld),s.copy(h.line[g+1]),s.applyMatrix4(e.matrixWorld),l.subVectors(s,i);var N=l.lengthSq();l.normalize(),a.subVectors(i,p.ray.origin);var R=a.dot(l);x=a.dot(p.ray.direction),_=d(p.ray.direction.dot(l)),k=1-_*_,0!==k&&(T=(_*x-R)/k,O=(x-_*R)/k,i.add(l.multiplyScalar(T)),s.copy(p.ray.direction).multiplyScalar(O).add(p.ray.origin),(C=l.subVectors(s,i).lengthSq())<y&&T*T<N&&f.push({clickable:c,distance:O}))}for(g=0,v=h.sphere.length;g<v;g++)if(h.sphere[g]instanceof n.Sphere&&(t.copy(h.sphere[g]),t.applyMatrix4(e.matrixWorld),p.ray.isIntersectionSphere(t))){i.subVectors(t.center,p.ray.origin);var L=i.dot(p.ray.direction);return E=L*L-(i.lengthSq()-t.radius*t.radius),L<0?f:(S=E<=0?L:L-Math.sqrt(E),f.push({clickable:c,distance:S}),f)}};return e.prototype.precision=1e-4,e.prototype.linePrecision=.2,e.prototype.set=function(e,t){this.ray.set(e,t)},e.prototype.intersectObjects=function(e,t){for(var n=[],r=0,o=t.length;r<o;r++)p(e,t[r],this,n);return n.sort(c),n},e}(),n.Projector=function(){var e=(new n.Matrix4,new n.Matrix4);this.projectVector=function(t,n){return n.matrixWorldInverse.getInverse(n.matrixWorld),e.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),t.applyProjection(e)},this.unprojectVector=function(t,n){return n.projectionMatrixInverse.getInverse(n.projectionMatrix),e.multiplyMatrices(n.matrixWorld,n.projectionMatrixInverse),t.applyProjection(e)}},n.Camera=function(e,t,r,o,a){n.Object3D.call(this),this.fov=void 0!==e?e:50,this.aspect=void 0!==t?t:1,this.near=void 0!==r?r:.1,this.far=void 0!==o?o:2e3,this.projectionMatrix=new n.Matrix4,this.projectionMatrixInverse=new n.Matrix4,this.matrixWorldInverse=new n.Matrix4;var i=this.position.z;this.right=i*Math.tan(Math.PI/180*e),this.left=-this.right,this.top=this.right/this.aspect,this.bottom=-this.top,this.ortho=!!a,this.updateProjectionMatrix()},n.Camera.prototype=Object.create(n.Object3D.prototype),n.Camera.prototype.lookAt=function(e){this.matrix.lookAt(this.position,e,this.up),this.rotationAutoUpdate&&(!1===this.useQuaternion?this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder):this.quaternion.copy(this.matrix.decompose()[1]))},n.Camera.prototype.updateProjectionMatrix=function(){this.ortho?this.projectionMatrix.makeOrthographic(this.left,this.right,this.top,this.bottom,this.near,this.far):this.projectionMatrix.makePerspective(this.fov,this.aspect,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},n.SpritePlugin=function(){function e(e,t){var n=r.createProgram(),o=r.createShader(r.FRAGMENT_SHADER),a=r.createShader(r.VERTEX_SHADER),i="precision "+t+" float;\n";return r.shaderSource(o,i+e.fragmentShader),r.shaderSource(a,i+e.vertexShader),r.compileShader(o),r.compileShader(a),r.getShaderParameter(o,r.COMPILE_STATUS)&&r.getShaderParameter(a,r.COMPILE_STATUS)?(r.attachShader(n,o),r.attachShader(n,a),r.linkProgram(n),r.getProgramParameter(n,r.LINK_STATUS)||console.error("Could not initialize shader"),n):(console.error(r.getShaderInfoLog(o)),console.error("could not initialize shader"),null)}function t(e,t){return e.z!==t.z?t.z-e.z:t.id-e.id}var r,o,a,i={};this.init=function(t){r=t.context,o=t,a=t.getPrecision(),i.vertices=new Float32Array(16),i.faces=new Uint16Array(6);var s=0;i.vertices[s++]=-1,i.vertices[s++]=-1,i.vertices[s++]=0,i.vertices[s++]=0,i.vertices[s++]=1,i.vertices[s++]=-1,i.vertices[s++]=1,i.vertices[s++]=0,i.vertices[s++]=1,i.vertices[s++]=1,i.vertices[s++]=1,i.vertices[s++]=1,i.vertices[s++]=-1,i.vertices[s++]=1,i.vertices[s++]=0,i.vertices[s++]=1,s=0,i.faces[s++]=0,i.faces[s++]=1,i.faces[s++]=2,i.faces[s++]=0,i.faces[s++]=2,i.faces[s++]=3,i.vertexBuffer=r.createBuffer(),i.elementBuffer=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,i.vertexBuffer),r.bufferData(r.ARRAY_BUFFER,i.vertices,r.STATIC_DRAW),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,i.elementBuffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,i.faces,r.STATIC_DRAW),i.program=e(n.ShaderLib.sprite,a),i.attributes={},i.uniforms={},i.attributes.position=r.getAttribLocation(i.program,"position"),i.attributes.uv=r.getAttribLocation(i.program,"uv"),i.uniforms.uvOffset=r.getUniformLocation(i.program,"uvOffset"),i.uniforms.uvScale=r.getUniformLocation(i.program,"uvScale"),i.uniforms.rotation=r.getUniformLocation(i.program,"rotation"),i.uniforms.scale=r.getUniformLocation(i.program,"scale"),i.uniforms.alignment=r.getUniformLocation(i.program,"alignment"),i.uniforms.color=r.getUniformLocation(i.program,"color"),i.uniforms.map=r.getUniformLocation(i.program,"map"),i.uniforms.opacity=r.getUniformLocation(i.program,"opacity"),i.uniforms.useScreenCoordinates=r.getUniformLocation(i.program,"useScreenCoordinates"),i.uniforms.screenPosition=r.getUniformLocation(i.program,"screenPosition"),i.uniforms.modelViewMatrix=r.getUniformLocation(i.program,"modelViewMatrix"),i.uniforms.projectionMatrix=r.getUniformLocation(i.program,"projectionMatrix"),i.uniforms.fogType=r.getUniformLocation(i.program,"fogType"),i.uniforms.fogDensity=r.getUniformLocation(i.program,"fogDensity"),i.uniforms.fogNear=r.getUniformLocation(i.program,"fogNear"),i.uniforms.fogFar=r.getUniformLocation(i.program,"fogFar"),i.uniforms.fogColor=r.getUniformLocation(i.program,"fogColor"),i.uniforms.alphaTest=r.getUniformLocation(i.program,"alphaTest")},this.render=function(e,n,a,s){var l=e.__webglSprites,u=l.length;if(u){var c=i.attributes,d=i.uniforms,p=.5*a,f=.5*s;r.useProgram(i.program),r.enableVertexAttribArray(c.position),r.enableVertexAttribArray(c.uv),r.disable(r.CULL_FACE),r.enable(r.BLEND),r.bindBuffer(r.ARRAY_BUFFER,i.vertexBuffer),r.vertexAttribPointer(c.position,2,r.FLOAT,!1,16,0),r.vertexAttribPointer(c.uv,2,r.FLOAT,!1,16,8),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,i.elementBuffer),r.uniformMatrix4fv(d.projectionMatrix,!1,n.projectionMatrix.elements),r.activeTexture(r.TEXTURE0),r.uniform1i(d.map,0);var h=0,m=0,y=e.fog;y?(r.uniform3f(d.fogColor,y.color.r,y.color.g,y.color.b),r.uniform1f(d.fogNear,y.near),r.uniform1f(d.fogFar,y.far),r.uniform1i(d.fogType,1),h=1,m=1):(r.uniform1i(d.fogType,0),h=0,m=0);var g,v,b,_,w,x=[];for(g=0;g<u;g++)v=l[g],b=v.material,v.visible&&0!==b.opacity&&(b.useScreenCoordinates?v.z=-v.position.z:(v._modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,v.matrixWorld),v.z=-v._modelViewMatrix.elements[14]));for(l.sort(t),g=0;g<u;g++)if(v=l[g],b=v.material,v.visible&&0!==b.opacity&&b.map&&b.map.image&&b.map.image.width){r.uniform1f(d.alphaTest,b.alphaTest);var S=b.map.image.width,C=b.map.image.height;x[0]=S*o.devicePixelRatio/a,x[1]=C*o.devicePixelRatio/s,!0===b.useScreenCoordinates?(r.uniform1i(d.useScreenCoordinates,1),r.uniform3f(d.screenPosition,(v.position.x*o.devicePixelRatio-p)/p,(f-v.position.y*o.devicePixelRatio)/f,Math.max(0,Math.min(1,v.position.z)))):(r.uniform1i(d.useScreenCoordinates,0),r.uniformMatrix4fv(d.modelViewMatrix,!1,v._modelViewMatrix.elements)),w=e.fog&&b.fog?m:0,h!==w&&(r.uniform1i(d.fogType,w),h=w),_=1/(b.scaleByViewport?s:1),x[0]*=_*v.scale.x,x[1]*=_*v.scale.y,r.uniform2f(d.uvScale,b.uvScale.x,b.uvScale.y),r.uniform2f(d.uvOffset,b.uvOffset.x,b.uvOffset.y),r.uniform2f(d.alignment,b.alignment.x,b.alignment.y),r.uniform1f(d.opacity,b.opacity),r.uniform3f(d.color,b.color.r,b.color.g,b.color.b),r.uniform1f(d.rotation,v.rotation),r.uniform2fv(d.scale,x),o.setDepthTest(b.depthTest),o.setDepthWrite(b.depthWrite),o.setTexture(b.map,0),r.drawElements(r.TRIANGLES,6,r.UNSIGNED_SHORT,0)}r.enable(r.CULL_FACE)}}},n.Light=function(e,t){n.Object3D.call(this),this.color=new n.Color(e),this.position=new n.Vector3(0,1,0),this.target=new n.Object3D,this.intensity=void 0!==t?t:1,this.castShadow=!1,this.onlyShadow=!1},n.Light.prototype=Object.create(n.Object3D.prototype),n.Material=function(){n.EventDispatcher.call(this),this.id=n.MaterialIdCount++,this.name="",this.side=n.FrontSide,this.opacity=1,this.transparent=!1,this.depthTest=!0,this.depthWrite=!0,this.stencilTest=!0,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.visible=!0,this.needsUpdate=!0},n.Material.prototype.setValues=function(e){if(void 0!==e)for(var t in e){var r=e[t];if(void 0!==r){if(t in this){var o=this[t];o instanceof n.Color&&r instanceof n.Color?o.copy(r):o instanceof n.Color?o.set(r):o instanceof n.Vector3&&r instanceof n.Vector3?o.copy(r):this[t]=r}}else console.warn("$3Dmol.Material: '"+t+"' parameter is undefined.")}},n.Material.prototype.clone=function(e){return void 0===e&&(e=new n.Material),e.name=this.name,e.side=this.side,e.opacity=this.opacity,e.transparent=this.transparent,e.depthTest=this.depthTest,e.depthWrite=this.depthWrite,e.stencilTest=this.stencilTest,e.polygonOffset=this.polygonOffset,e.polygonOffsetFactor=this.polygonOffsetFactor,e.polygonOffsetUnits=this.polygonOffsetUnits,e.alphaTest=this.alphaTest,e.overdraw=this.overdraw,e.visible=this.visible,e},n.Material.prototype.dispose=function(){this.dispatchEvent({type:"dispose"})},n.MaterialIdCount=0,n.LineBasicMaterial=function(e){n.Material.call(this),this.color=new n.Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.vertexColors=!1,this.fog=!0,this.shaderID="basic",this.setValues(e)},n.LineBasicMaterial.prototype=Object.create(n.Material.prototype),n.LineBasicMaterial.prototype.clone=function(){var e=new n.LineBasicMaterial;return n.Material.prototype.clone.call(this,e),e.color.copy(this.color),e},n.MeshLambertMaterial=function(e){n.Material.call(this),this.color=new n.Color(16777215),this.ambient=new n.Color(1048575),this.emissive=new n.Color(0),this.wrapAround=!1,this.wrapRGB=new n.Vector3(1,1,1),this.map=null,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=n.SmoothShading,this.shaderID="lambert",this.vertexColors=n.NoColors,this.skinning=!1,this.setValues(e)},n.MeshLambertMaterial.prototype=Object.create(n.Material.prototype),n.MeshLambertMaterial.prototype.clone=function(e){return void 0===e&&(e=new n.MeshLambertMaterial),n.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.ambient.copy(this.ambient),e.emissive.copy(this.emissive),e.wrapAround=this.wrapAround,e.wrapRGB.copy(this.wrapRGB),e.map=this.map,e.lightMap=this.lightMap,e.specularMap=this.specularMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.shaderID=this.shaderID,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e},n.MeshDoubleLambertMaterial=function(e){n.MeshLambertMaterial.call(this,e),this.shaderID="lambertdouble",this.side=n.DoubleSide},n.MeshDoubleLambertMaterial.prototype=Object.create(n.MeshLambertMaterial.prototype),n.MeshDoubleLambertMaterial.prototype.clone=function(){var e=new n.MeshDoubleLambertMaterial;return n.MeshLambertMaterial.prototype.clone.call(this,e),e},n.MeshOutlineMaterial=function(e){n.Material.call(this),e=e||{},this.fog=!0,this.shaderID="outline",this.wireframe=!1,this.outlineColor=e.color||new n.Color(0,0,0),this.outlineWidth=e.width||.1,this.outlinePushback=e.pushback||1},n.MeshOutlineMaterial.prototype=Object.create(n.Material.prototype),n.MeshOutlineMaterial.prototype.clone=function(e){return void 0===e&&(e=new n.MeshOutlineMaterial),n.Material.prototype.clone.call(this,e),e.fog=this.fog,e.shaderID=this.shaderID,e.wireframe=this.wireframe,e},n.ImposterMaterial=function(e){n.Material.call(this),this.color=new n.Color(16777215),this.ambient=new n.Color(1048575),this.emissive=new n.Color(0),this.imposter=!0,this.wrapAround=!1,this.wrapRGB=new n.Vector3(1,1,1),this.map=null,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=n.SmoothShading,this.shaderID=null,this.vertexColors=n.NoColors,this.skinning=!1,this.setValues(e)},n.ImposterMaterial.prototype=Object.create(n.Material.prototype),n.ImposterMaterial.prototype.clone=function(){var e=new n.ImposterMaterial;return n.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.ambient.copy(this.ambient),e.emissive.copy(this.emissive),e.wrapAround=this.wrapAround,e.wrapRGB.copy(this.wrapRGB),e.map=this.map,e.lightMap=this.lightMap,e.specularMap=this.specularMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.shaderID=this.shaderID,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e},n.SphereImposterMaterial=function(e){n.ImposterMaterial.call(this),this.shaderID="sphereimposter",this.setValues(e)},n.SphereImposterMaterial.prototype=Object.create(n.ImposterMaterial.prototype),n.SphereImposterMaterial.prototype.clone=function(){var e=new n.SphereImposterMaterial;return n.ImposterMaterial.prototype.clone.call(this,e),e},n.SphereImposterOutlineMaterial=function(e){n.ImposterMaterial.call(this),e=e||{},this.shaderID="sphereimposteroutline",this.outlineColor=e.color||new n.Color(0,0,0),this.outlineWidth=e.width||.1,this.outlinePushback=e.pushback||1,this.setValues(e)},n.SphereImposterOutlineMaterial.prototype=Object.create(n.ImposterMaterial.prototype),n.SphereImposterOutlineMaterial.prototype.clone=function(){var e=new n.SphereImposterOutlineMaterial;return n.ImposterMaterial.prototype.clone.call(this,e),e.outlineColor=this.outlineColor,e.outlineWidth=this.outlineWidth,e.outlinePushback=this.outlinePushback,e},n.StickImposterMaterial=function(e){n.ImposterMaterial.call(this),this.shaderID="stickimposter",this.setValues(e)},n.StickImposterMaterial.prototype=Object.create(n.ImposterMaterial.prototype),n.StickImposterMaterial.prototype.clone=function(){var e=new n.StickImposterOutlineMaterial;return n.ImposterMaterial.prototype.clone.call(this,e),e},n.StickImposterOutlineMaterial=function(e){n.ImposterMaterial.call(this),e=e||{},this.shaderID="stickimposteroutline",this.outlineColor=e.color||new n.Color(0,0,0),this.outlineWidth=e.width||.1,this.outlinePushback=e.pushback||1,this.setValues(e)},n.StickImposterOutlineMaterial.prototype=Object.create(n.ImposterMaterial.prototype),n.StickImposterOutlineMaterial.prototype.clone=function(){var e=new n.StickImposterOutlineMaterial;return n.ImposterMaterial.prototype.clone.call(this,e),e.outlineColor=this.outlineColor,e.outlineWidth=this.outlineWidth,e.outlinePushback=this.outlinePushback,e},n.InstancedMaterial=function(e){n.Material.call(this),this.color=new n.Color(16777215),this.ambient=new n.Color(1048575),this.emissive=new n.Color(0),this.wrapAround=!1,this.wrapRGB=new n.Vector3(1,1,1),this.map=null,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=n.SmoothShading,this.shaderID="instanced",this.vertexColors=n.NoColors,this.skinning=!1,this.sphere=null,this.setValues(e)},n.InstancedMaterial.prototype=Object.create(n.Material.prototype),n.InstancedMaterial.prototype.clone=function(){var e=new n.InstancedMaterial;return n.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.ambient.copy(this.ambient),e.emissive.copy(this.emissive),e.wrapAround=this.wrapAround,e.wrapRGB.copy(this.wrapRGB),e.map=this.map,e.lightMap=this.lightMap,e.specularMap=this.specularMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.shaderID=this.shaderID,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e.sphere=this.sphere,e},n.SpriteMaterial=function(e){n.Material.call(this),this.color=new n.Color(16777215),this.map=new n.Texture,this.useScreenCoordinates=!0,this.depthTest=!this.useScreenCoordinates,this.sizeAttenuation=!this.useScreenCoordinates,this.scaleByViewPort=!this.sizeAttenuation,this.alignment=n.SpriteAlignment.center.clone(),this.fog=!1,this.uvOffset=new n.Vector2(0,0),this.uvScale=new n.Vector2(1,1),this.setValues(e),e=e||{},void 0===e.depthTest&&(this.depthTest=!this.useScreenCoordinates),void 0===e.sizeAttenuation&&(this.sizeAttenuation=!this.useScreenCoordinates),void 0===e.scaleByViewPort&&(this.scaleByViewPort=!this.sizeAttenuation)},n.SpriteMaterial.prototype=Object.create(n.Material.prototype),n.SpriteMaterial.prototype.clone=function(){var e=new n.SpriteMaterial;return n.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.map=this.map,e.useScreenCoordinates=useScreenCoordinates,e.sizeAttenuation=this.sizeAttenuation,e.scaleByViewport=this.scaleByViewPort,e.alignment.copy(this.alignment),e.uvOffset.copy(this.uvOffset),e},n.SpriteAlignment={},n.SpriteAlignment.topLeft=new n.Vector2(1,-1),n.SpriteAlignment.topCenter=new n.Vector2(0,-1),n.SpriteAlignment.topRight=new n.Vector2(-1,-1),n.SpriteAlignment.centerLeft=new n.Vector2(1,0),n.SpriteAlignment.center=new n.Vector2(0,0),n.SpriteAlignment.centerRight=new n.Vector2(-1,0),n.SpriteAlignment.bottomLeft=new n.Vector2(1,1),n.SpriteAlignment.bottomCenter=new n.Vector2(0,1),n.SpriteAlignment.bottomRight=new n.Vector2(-1,1),n.Texture=function(e){n.EventDispatcher.call(this),this.id=n.TextureIdCount++,this.name="",this.image=e,this.mipmaps=[],this.mapping=new n.UVMapping,this.wrapS=n.ClampToEdgeWrapping,this.wrapT=n.ClampToEdgeWrapping,this.magFilter=n.LinearFilter,this.minFilter=n.LinearMipMapLinearFilter,this.anisotropy=1,this.format=n.RGBAFormat,this.type=n.UnsignedByteType,this.offset=new n.Vector2(0,0),this.repeat=new n.Vector2(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.needsUpdate=!1,this.onUpdate=null},n.Texture.prototype={constructor:n.Texture,clone:function(e){return void 0===e&&(e=new n.Texture),e.image=this.image,e.mipmaps=this.mipmaps.slice(0),e.mapping=this.mapping,e.wrapS=this.wrapS,e.wrapT=this.wrapT,e.magFilter=this.magFilter,e.minFilter=this.minFilter,e.anisotropy=this.anisotropy,e.format=this.format,e.type=this.type,e.offset.copy(this.offset),e.repeat.copy(this.repeat),e.generateMipmaps=this.generateMipmaps,e.premultiplyAlpha=this.premultiplyAlpha,e.flipY=this.flipY,e.unpackAlignment=this.unpackAlignment,e},dispose:function(){this.dispatchEvent({type:"dispose"})}},n.TextureIdCount=0,n.FrontSide=0,n.BackSide=1,n.DoubleSide=2,n.NoShading=0,n.FlatShading=1,n.SmoothShading=2,n.NoColors=0,n.FaceColors=1,n.VertexColors=2,n.MultiplyOperation=0,n.MixOperation=1,n.AddOperation=2,n.UVMapping=function(){},n.ClampToEdgeWrapping=1001,n.LinearFilter=1006,n.LinearMipMapLinearFilter=1008,n.UnsignedByteType=1009,n.RGBAFormat=1021,n.Line=function(e,t,r){n.Object3D.call(this),this.geometry=e,this.material=void 0!==t?t:new n.LineBasicMaterial({color:16777215*Math.random()}),this.type=void 0!==r?r:n.LineStrip},n.LineStrip=0,n.LinePieces=1,n.Line.prototype=Object.create(n.Object3D.prototype),n.Line.prototype.clone=function(e){return void 0===e&&(e=new n.Line(this.geometry,this.material,this.type)),n.Object3D.prototype.clone.call(this,e),e},n.Mesh=function(e,t){n.Object3D.call(this),this.geometry=e,this.material=void 0!==t?t:new n.MeshBasicMaterial({color:16777215*Math.random(),wireframe:!0})},n.Mesh.prototype=Object.create(n.Object3D.prototype),n.Mesh.prototype.clone=function(e){return void 0===e&&(e=new n.Mesh(this.geometry,this.material)),n.Object3D.prototype.clone.call(this,e),e},n.Sprite=function(e){n.Object3D.call(this),this.material=void 0!==e?e:new n.SpriteMaterial,this.rotation3d=this.rotation,this.rotation=0},n.Sprite.prototype=Object.create(n.Object3D.prototype),n.Sprite.prototype.updateMatrix=function(){this.matrix.setPosition(this.position),this.rotation3d.set(0,0,this.rotation),this.matrix.setRotationFromEuler(this.rotation3d),1===this.scale.x&&1===this.scale.y||this.matrix.scale(this.scale),this.matrixWorldNeedsUpdate=!0},n.Sprite.prototype.clone=function(e){return void 0===e&&(e=new n.Sprite(this.material)),n.Object3D.prototype.clone.call(this,e),e},n.Renderer=function(e){function t(e){se[e]||(V.enableVertexAttribArray(e),se[e]=!0)}function r(){for(var e in se)se[e]&&(V.disableVertexAttribArray(e),se[e]=!1)}function o(e,t,n){te!==e&&(e?V.enable(V.POLYGON_OFFSET_FILL):V.disable(V.POLYGON_OFFSET_FILL))}function a(e){e!==ne&&(V.lineWidth(e),ne=e)}function i(e,t){var n;return"fragment"===e?n=V.createShader(V.FRAGMENT_SHADER):"vertex"===e&&(n=V.createShader(V.VERTEX_SHADER)),V.shaderSource(n,t),V.compileShader(n),V.getShaderParameter(n,V.COMPILE_STATUS)?n:(console.error(V.getShaderInfoLog(n)),console.error("could not initialize shader"),null)}function s(e,t,n,r){var o,a,s,l,u=[];u.push(e),u.push(t);for(o in r)u.push(o),u.push(r[o]);for(l=u.join(),o=0,a=H.length;o<a;o++){var c=H[o];if(c.code===l)return c.usedTimes++,c.program}s=V.createProgram();var d=T,p="precision "+d+" float;",f=[p].join("\n"),h=[r.fragdepth?"#extension GL_EXT_frag_depth: enable":"",r.wireframe?"#define WIREFRAME 1":"",p].join("\n"),m=i("fragment",h+e),y=i("vertex",f+t);V.attachShader(s,y),V.attachShader(s,m),V.linkProgram(s),V.getProgramParameter(s,V.LINK_STATUS)||console.error("Could not initialize shader"),s.uniforms={},s.attributes={};var g,v,b;g=["viewMatrix","modelViewMatrix","projectionMatrix","normalMatrix"];for(v in n)g.push(v);for(b=0;b<g.length;b++){var _=g[b];s.uniforms[_]=V.getUniformLocation(s,_)}for(g=["position","normal","color","lineDistance","offset","radius"],b=0;b<g.length;b++){var w=g[b];s.attributes[w]=V.getAttribLocation(s,w)}return s.id=U++,H.push({program:s,code:l,usedTimes:1}),G.info.memory.programs=H.length,s}function l(e,t,n,r,o){r.needsUpdate&&(r.program&&be(r),G.initMaterial(r,t,n,o),r.needsUpdate=!1);var a=!1,i=r.program,s=i.uniforms,l=r.uniforms;return i!=q&&(V.useProgram(i),q=i,a=!0),r.id!=W&&(W=r.id,a=!0),e!=Y&&(Y=e,a=!0),V.uniformMatrix4fv(s.projectionMatrix,!1,e.projectionMatrix.elements),V.uniformMatrix4fv(s.modelViewMatrix,!1,o._modelViewMatrix.elements),V.uniformMatrix3fv(s.normalMatrix,!1,o._normalMatrix.elements),a&&(l.fogColor.value=n.color,l.fogNear.value=n.near,l.fogFar.value=n.far,r.shaderID.startsWith("lambert")||"instanced"===r.shaderID||r.shaderID.endsWith("imposter")?(V.uniformMatrix4fv(s.viewMatrix,!1,e.matrixWorldInverse.elements),de&&(M(i,t),de=!1),l.directionalLightColor.value=pe.directional.colors,l.directionalLightDirection.value=pe.directional.positions):r.shaderID.endsWith("outline")?(l.outlineColor.value=r.outlineColor,l.outlineWidth.value=r.outlineWidth,l.outlinePushback.value=r.outlinePushback):"sphereimposter"===r.shaderID&&(V.uniformMatrix4fv(s.viewMatrix,!1,e.matrixWorldInverse.elements),V.uniformMatrix3fv(s.normalMatrix,!1,o._normalMatrix.elements),l.directionalLightColor.value=pe.directional.colors,l.directionalLightDirection.value=pe.directional.positions),l.opacity.value=r.opacity,u(s,l)),i}function u(e,t){var n,r,o,a;for(n in t)e[n]&&(r=t[n].type,o=t[n].value,a=e[n],"f"===r?V.uniform1f(a,o):"fv"===r?V.uniform3fv(a,o):"c"===r?V.uniform3f(a,o.r,o.g,o.b):"f4"===r&&V.uniform4f(a,o[0],o[1],o[2],o[3]))}function c(e,t,n,r,a,i,s,l){var u,c,d,p,f,h,m;t?(f=e.length-1,h=-1,m=-1):(f=0,h=e.length,m=1);for(var y=f;y!==h;y+=m)if(u=e[y],u.render){if(c=u.object,d=u.buffer,!(p=u[n]))continue;s&&G.setBlending(!0),G.setDepthTest(p.depthTest),G.setDepthWrite(p.depthWrite),o(p.polygonOffset,p.polygonOffsetFactor,p.polygonOffsetUnits);var g=c._modelViewMatrix.isReflected();G.setMaterialFaces(p,g),G.renderBuffer(r,a,i,p,d,c),(B||p.outline)&&("sphereimposter"==p.shaderID?G.renderBuffer(r,a,i,F,d,c):"stickimposter"==p.shaderID?G.renderBuffer(r,a,i,z,d,c):p.wireframe||"basic"===p.shaderID||0===p.opacity||G.renderBuffer(r,a,i,L,d,c))}}function d(e,t,n){if(Z=-1,q=null,Y=null,J=-1,ee=-1,$=-1,X=-1,W=-1,Q=-1,e.length)for(var r=0,o=e.length;r<o;r++)de=!0,e[r].render(t,n,ae,ie),Z=-1,q=null,Y=null,J=-1,ee=-1,$=-1,X=-1,W=-1,Q=-1}function p(e,t){var r,o,a,i;if(!e.__webglInit&&(e.__webglInit=!0,e._modelViewMatrix=new n.Matrix4,e._normalMatrix=new n.Matrix3,void 0!==e.geometry&&void 0===e.geometry.__webglInit&&(e.geometry.__webglInit=!0,e.geometry.addEventListener("dispose",me)),e instanceof n.Mesh||e instanceof n.Line))for(a=e.geometry,e.material,r=0,o=a.geometryGroups.length;r<o;r++)i=a.geometryGroups[r],i.id=K++,i.__webglVertexBuffer||(e instanceof n.Mesh?(b(i),a.elementsNeedUpdate=!0,a.normalsNeedUpdate=!0):e instanceof n.Line&&_(i),a.verticesNeedUpdate=!0,a.colorsNeedUpdate=!0);if(!e.__webglActive){if(e instanceof n.Mesh||e instanceof n.Line)for(a=e.geometry,r=0,o=a.geometryGroups.length;r<o;r++)i=a.geometryGroups[r],w(t.__webglObjects,i,e);else e instanceof n.Sprite&&t.__webglSprites.push(e);e.__webglActive=!0}}function f(e){var t,r=e.geometry;e.material;if(e instanceof n.Mesh||e instanceof n.Line){for(var o=0,a=r.geometryGroups.length;o<a;o++)t=r.geometryGroups[o],(r.verticesNeedUpdate||r.elementsNeedUpdate||r.colorsNeedUpdate||r.normalsNeedUpdate)&&v(t,V.STATIC_DRAW);r.verticesNeedUpdate=!1,r.elementsNeedUpdate=!1,r.normalsNeedUpdate=!1,r.colorsNeedUpdate=!1,r.buffersNeedUpdate=!1}}function h(e,t){e instanceof n.Mesh||e instanceof n.Line?m(t.__webglObjects,e):e instanceof n.Sprite&&y(t.__webglSprites,e),e.__webglActive=!1}function m(e,t){for(var n=e.length-1;n>=0;--n)e[n].object===t&&e.splice(n,1)}function y(e,t){for(var n=e.length-1;n>=0;--n)e[n]===t&&e.splice(n,1)}function g(e){var t=e.object,n=t.material;if(n.transparent){if(e.opaque=null,e.transparent=n,!n.wireframe){var r=n.clone();r.opacity=0,e.blank=r}}else e.opaque=n,e.transparent=null}function v(e,t,n){var r=e.vertexArray,o=e.colorArray;if(void 0!==e.__webglOffsetBuffer?(V.bindBuffer(V.ARRAY_BUFFER,e.__webglOffsetBuffer),V.bufferData(V.ARRAY_BUFFER,r,t)):(V.bindBuffer(V.ARRAY_BUFFER,e.__webglVertexBuffer),V.bufferData(V.ARRAY_BUFFER,r,t)),V.bindBuffer(V.ARRAY_BUFFER,e.__webglColorBuffer),V.bufferData(V.ARRAY_BUFFER,o,t),e.normalArray&&void 0!==e.__webglNormalBuffer){var a=e.normalArray;V.bindBuffer(V.ARRAY_BUFFER,e.__webglNormalBuffer),V.bufferData(V.ARRAY_BUFFER,a,t)}if(e.radiusArray&&void 0!==e.__webglRadiusBuffer&&(V.bindBuffer(V.ARRAY_BUFFER,e.__webglRadiusBuffer),V.bufferData(V.ARRAY_BUFFER,e.radiusArray,t)),e.faceArray&&void 0!==e.__webglFaceBuffer){var i=e.faceArray;V.bindBuffer(V.ELEMENT_ARRAY_BUFFER,e.__webglFaceBuffer),V.bufferData(V.ELEMENT_ARRAY_BUFFER,i,t)}if(e.lineArray&&void 0!==e.__webglLineBuffer){var s=e.lineArray;V.bindBuffer(V.ELEMENT_ARRAY_BUFFER,e.__webglLineBuffer),V.bufferData(V.ELEMENT_ARRAY_BUFFER,s,t)}}function b(e){e.radiusArray&&(e.__webglRadiusBuffer=V.createBuffer()),e.useOffset&&(e.__webglOffsetBuffer=V.createBuffer()),e.__webglVertexBuffer=V.createBuffer(),e.__webglNormalBuffer=V.createBuffer(),e.__webglColorBuffer=V.createBuffer(),e.__webglFaceBuffer=V.createBuffer(),e.__webglLineBuffer=V.createBuffer(),G.info.memory.geometries++}function _(e){e.__webglVertexBuffer=V.createBuffer(),e.__webglColorBuffer=V.createBuffer(),G.info.memory.geometries++}function w(e,t,n){e.push({buffer:t,object:n,opaque:null,transparent:null})}function x(e,t){e._modelViewMatrix.multiplyMatrices(t.matrixWorldInverse,e.matrixWorld),e._normalMatrix.getInverse(e._modelViewMatrix),e._normalMatrix.transpose()}function S(e){return 0==(e&e-1)}function C(e){return V.LINEAR}function k(e,t,n){n?(V.texParameteri(e,V.TEXTURE_WRAP_S,E(t.wrapS)),V.texParameteri(e,V.TEXTURE_WRAP_T,E(t.wrapT)),V.texParameteri(e,V.TEXTURE_MAG_FILTER,E(t.magFilter)),V.texParameteri(e,V.TEXTURE_MIN_FILTER,E(t.minFilter))):(V.texParameteri(e,V.TEXTURE_WRAP_S,V.CLAMP_TO_EDGE),V.texParameteri(e,V.TEXTURE_WRAP_T,V.CLAMP_TO_EDGE),V.texParameteri(e,V.TEXTURE_MAG_FILTER,C(t.magFilter)),V.texParameteri(e,V.TEXTURE_MIN_FILTER,C(t.minFilter)))}function E(e){return e===n.UnsignedByteType?V.UNSIGNED_BYTE:e===n.RGBAFormat?V.RGBA:0}function M(e,t){var r,o,a,i,s,l=pe,u=l.directional.colors,c=l.directional.positions,d=0,p=0,f=0;for(r=0,o=t.length;r<o;r++)if(a=t[r],i=a.color,s=a.intensity,a.distance,a instanceof n.Light){if(d++,ce.getPositionFromMatrix(a.matrixWorld),ue.getPositionFromMatrix(a.target.matrixWorld),ce.sub(ue),ce.normalize(),0===ce.x&&0===ce.y&&0===ce.z)continue;c[f]=ce.x,c[f+1]=ce.y,c[f+2]=ce.z,u[f]=i.r*s,u[f+1]=i.g*s,u[f+2]=i.b*s,f+=3,p++}l.ambient[0]=0,l.ambient[1]=0,l.ambient[2]=0,l.directional.length=p}e=e||{};var A=void 0!==e.canvas?e.canvas:document.createElement("canvas"),T=void 0!==e.precision?e.precision:"highp",O=void 0===e.alpha||e.alpha,P=void 0===e.premultipliedAlpha||e.premultipliedAlpha,j=void 0!==e.antialias&&e.antialias,I=void 0===e.stencil||e.stencil,D=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,N=void 0!==e.clearColor?new n.Color(e.clearColor):new n.Color(0),R=void 0!==e.clearAlpha?e.clearAlpha:0,L=new n.MeshOutlineMaterial(e.outline),F=new n.SphereImposterOutlineMaterial(e.outline),z=new n.StickImposterOutlineMaterial(e.outline),B=!!e.outline;this.domElement=A,this.context=null,this.devicePixelRatio=void 0!==e.devicePixelRatio?e.devicePixelRatio:void 0!==self.devicePixelRatio?self.devicePixelRatio:1,A.id=e.id,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.autoUpdateObjects=!0,this.autoUpdateScene=!0,this.renderPluginsPost=[],this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}};var V,G=this,H=[],U=0,q=null,W=-1,Z=null,Y=null,K=0,X=-1,Q=-1,J=-1,$=-1,ee=-1,te=null,ne=null,re=0,oe=0,ae=0,ie=0,se={},le=new n.Matrix4,ue=new n.Vector3,ce=new n.Vector3,de=!0,pe={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],exponents:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}};!function(){try{if(!(V=A.getContext("experimental-webgl",{alpha:O,premultipliedAlpha:P,antialias:j,stencil:I,preserveDrawingBuffer:D}))&&!(V=A.getContext("webgl",{alpha:O,premultipliedAlpha:P,antialias:j,stencil:I,preserveDrawingBuffer:D})))throw"Error creating WebGL context."}catch(e){console.error(e)}}(),function(){V.clearColor(0,0,0,1),V.clearDepth(1),V.clearStencil(0),V.enable(V.DEPTH_TEST),V.depthFunc(V.LEQUAL),V.frontFace(V.CCW),V.cullFace(V.BACK),V.enable(V.CULL_FACE),V.enable(V.BLEND),V.blendEquation(V.FUNC_ADD),V.blendFunc(V.SRC_ALPHA,V.ONE_MINUS_SRC_ALPHA),V.clearColor(N.r,N.g,N.b,R)}(),this.context=V;var fe=V.getExtension("ANGLE_instanced_arrays"),he=V.getExtension("EXT_frag_depth");this.supportedExtensions=function(){return{supportsAIA:Boolean(fe),supportsImposters:Boolean(he)}},this.getContext=function(){return V},this.getPrecision=function(){return T},this.setClearColorHex=function(e,t){N.setHex(e),R=t,V.clearColor(N.r,N.g,N.b,R)},this.enableOutline=function(e){L=new n.MeshOutlineMaterial(e),F=new n.SphereImposterOutlineMaterial(e),z=new n.StickImposterOutlineMaterial(e),B=!0},this.disableOutline=function(){B=!1},this.setSize=function(e,t){re=A.width=e*this.devicePixelRatio,oe=A.height=t*this.devicePixelRatio,A.style.width=e+"px",A.style.height=t+"px",V.viewport(0,0,V.drawingBufferWidth,V.drawingBufferHeight)},this.clear=function(e,t,n){var r=0;(void 0===e||e)&&(r|=V.COLOR_BUFFER_BIT),(void 0===t||t)&&(r|=V.DEPTH_BUFFER_BIT),(void 0===n||n)&&(r|=V.STENCIL_BUFFER_BIT),V.clear(r)},this.clearTarget=function(e,t,n){this.clear(e,t,n)},this.setMaterialFaces=function(e,t){var r=e.side===n.DoubleSide,o=e.side===n.BackSide;o=t?!o:o,X!==r&&(r?V.disable(V.CULL_FACE):V.enable(V.CULL_FACE),X=r),Q!==o&&(o?V.frontFace(V.CW):V.frontFace(V.CCW),Q=o)},this.setDepthTest=function(e){$!==e&&(e?V.enable(V.DEPTH_TEST):V.disable(V.DEPTH_TEST),$=e)},this.setDepthWrite=function(e){ee!==e&&(V.depthMask(e),ee=e)},this.setBlending=function(e){e?(V.enable(V.BLEND),V.blendEquationSeparate(V.FUNC_ADD,V.FUNC_ADD),V.blendFuncSeparate(V.SRC_ALPHA,V.ONE_MINUS_SRC_ALPHA,V.ONE,V.ONE_MINUS_SRC_ALPHA)):V.disable(V.BLEND),J=e},this.addPostPlugin=function(e){e.init(this),this.renderPluginsPost.push(e)};var me=function(e){var t=e.target;t.removeEventListener("dispose",me),ve(t),G.info.memory.geometries--},ye=function(e){var t=e.target;t.removeEventListener("dispose",ye),_e(t),G.info.memory.textures--},ge=function(e){var t=e.target;t.removeEventListener("dispose",ge),be(t)},ve=function(e){if(e.__webglInit=void 0,void 0!==e.__webglVertexBuffer&&V.deleteBuffer(e.__webglVertexBuffer),void 0!==e.__webglColorBuffer&&V.deleteBuffer(e.__webglColorBuffer),void 0!==e.geometryGroups)for(var t=0,n=e.groups;t<n;t++){var r=e.geometryGroups[t];void 0!==r.__webglVertexBuffer&&V.deleteBuffer(r.__webglVertexBuffer),void 0!==r.__webglColorBuffer&&V.deleteBuffer(r.__webglColorBuffer),void 0!==r.__webglNormalBuffer&&V.deleteBuffer(r.__webglNormalBuffer),void 0!==r.__webglFaceBuffer&&V.deleteBuffer(r.__webglFaceBuffer),void 0!==r.__webglLineBuffer&&V.deleteBuffer(r.__webglLineBuffer)}},be=function(e){var t=e.program;if(void 0!==t){e.program=void 0;var n,r,o,a=!1;for(n=0,r=H.length;n<r;n++)if(o=H[n],o.program===t){o.usedTimes--,0===o.usedTimes&&(a=!0);break}if(!0===a){var i=[];for(n=0,r=H.length;n<r;n++)o=H[n],o.program!==t&&i.push(o);H=i,V.deleteProgram(t),G.info.memory.programs--}}},_e=function(e){if(e.image&&e.image.__webglTextureCube)V.deleteTexture(e.image.__webglTextureCube);else{if(!e.__webglInit)return;e.__webglInit=!1,V.deleteTexture(e.__webglTexture)}};this.initMaterial=function(e,t,r,o){e.addEventListener("dispose",ge);var a,i;if(i=e.shaderID){var l=n.ShaderLib[i];e.vertexShader=l.vertexShader,e.fragmentShader=l.fragmentShader,e.uniforms=n.ShaderUtils.clone(l.uniforms)}a={wireframe:e.wireframe,fragdepth:e.imposter},e.program=s(e.fragmentShader,e.vertexShader,e.uniforms,a)},this.renderBuffer=function(e,o,i,s,u,c){if(s.visible){var d,p;d=l(e,o,i,s,c),p=d.attributes;var f=!1,h=s.wireframe?1:0,m=16777215*u.id+2*d.id+h;m!==Z&&(Z=m,f=!0),f&&(r(),p.position>=0&&(V.bindBuffer(V.ARRAY_BUFFER,u.__webglVertexBuffer),t(p.position),V.vertexAttribPointer(p.position,3,V.FLOAT,!1,0,0)),p.color>=0&&(V.bindBuffer(V.ARRAY_BUFFER,u.__webglColorBuffer),t(p.color),V.vertexAttribPointer(p.color,3,V.FLOAT,!1,0,0)),p.normal>=0&&(V.bindBuffer(V.ARRAY_BUFFER,u.__webglNormalBuffer),t(p.normal),V.vertexAttribPointer(p.normal,3,V.FLOAT,!1,0,0)),p.offset>=0&&(V.bindBuffer(V.ARRAY_BUFFER,u.__webglOffsetBuffer),t(p.offset),V.vertexAttribPointer(p.offset,3,V.FLOAT,!1,0,0)),p.radius>=0&&(V.bindBuffer(V.ARRAY_BUFFER,u.__webglRadiusBuffer),t(p.radius),V.vertexAttribPointer(p.radius,1,V.FLOAT,!1,0,0)));var y,g;if(c instanceof n.Mesh){if("instanced"===s.shaderID){var v=s.sphere.geometryGroups[0];f&&(V.bindBuffer(V.ARRAY_BUFFER,u.__webglVertexBuffer),V.bufferData(V.ARRAY_BUFFER,v.vertexArray,V.STATIC_DRAW),V.bindBuffer(V.ARRAY_BUFFER,u.__webglNormalBuffer),V.bufferData(V.ARRAY_BUFFER,v.normalArray,V.STATIC_DRAW),V.bindBuffer(V.ELEMENT_ARRAY_BUFFER,u.__webglFaceBuffer),V.bufferData(V.ELEMENT_ARRAY_BUFFER,v.faceArray,V.STATIC_DRAW)),y=v.faceidx,fe.vertexAttribDivisorANGLE(p.offset,1),fe.vertexAttribDivisorANGLE(p.radius,1),fe.vertexAttribDivisorANGLE(p.color,1),fe.drawElementsInstancedANGLE(V.TRIANGLES,y,V.UNSIGNED_SHORT,0,u.radiusArray.length),fe.vertexAttribDivisorANGLE(p.offset,0),fe.vertexAttribDivisorANGLE(p.radius,0),fe.vertexAttribDivisorANGLE(p.color,0)}else s.wireframe?(g=u.lineidx,a(s.wireframeLinewidth),f&&V.bindBuffer(V.ELEMENT_ARRAY_BUFFER,u.__webglLineBuffer),V.drawElements(V.LINES,g,V.UNSIGNED_SHORT,0)):(y=u.faceidx,f&&V.bindBuffer(V.ELEMENT_ARRAY_BUFFER,u.__webglFaceBuffer),V.drawElements(V.TRIANGLES,y,V.UNSIGNED_SHORT,0));G.info.render.calls++,G.info.render.vertices+=y,G.info.render.faces+=y/3}else c instanceof n.Line&&(g=u.vertices,a(s.linewidth),V.drawArrays(V.LINES,0,g),G.info.render.calls++)}},this.render=function(e,t,r){if(t instanceof n.Camera==!1)return void console.error("$3Dmol.Renderer.render: camera is not an instance of $3Dmol.Camera.");var o,a,i,s,l,u=e.__lights,p=e.fog;for(W=-1,de=!0,this.autoUpdateScene&&e.updateMatrixWorld(),void 0===t.parent&&t.updateMatrixWorld(),t.matrixWorldInverse.getInverse(t.matrixWorld),le.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this.autoUpdateObjects&&this.initWebGLObjects(e),G.info.render.calls=0,G.info.render.vertices=0,G.info.render.faces=0,G.info.render.points=0,ae=re,ie=oe,(this.autoClear||r)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),l=e.__webglObjects,o=0,a=l.length;o<a;o++)i=l[o],s=i.object,i.render=!1,s.visible&&(x(s,t),g(i),i.render=!0);this.setBlending(!1),c(e.__webglObjects,!0,"opaque",t,u,p,!1,null),c(e.__webglObjects,!0,"blank",t,u,p,!0,null),c(e.__webglObjects,!1,"transparent",t,u,p,!0,null),d(this.renderPluginsPost,e,t),this.setDepthTest(!0),this.setDepthWrite(!0)},this.initWebGLObjects=function(e){if(e.__webglObjects||(e.__webglObjects=[],e.__webglObjectsImmediate=[],e.__webglSprites=[],e.__webglFlares=[]),e.__objectsAdded.length){for(;e.__objectsAdded.length;)p(e.__objectsAdded[0],e),e.__objectsAdded.splice(0,1);Z=-1}for(;e.__objectsRemoved.length;)h(e.__objectsRemoved[0],e),e.__objectsRemoved.splice(0,1);for(var t=0,n=e.__webglObjects.length;t<n;t++)f(e.__webglObjects[t].object)},this.setTexture=function(e,t){if(e.needsUpdate){e.__webglInit||(e.__webglInit=!0,e.addEventListener("dispose",ye),e.__webglTexture=V.createTexture(),G.info.memory.textures++),V.activeTexture(V.TEXTURE0+t),V.bindTexture(V.TEXTURE_2D,e.__webglTexture),V.pixelStorei(V.UNPACK_FLIP_Y_WEBGL,e.flipY),V.pixelStorei(V.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),V.pixelStorei(V.UNPACK_ALIGNMENT,e.unpackAlignment);var n=e.image,r=S(n.width)&&S(n.height),o=E(e.format),a=E(e.type);k(V.TEXTURE_2D,e,r);var i,s=e.mipmaps;if(s.length>0&&r){for(var l=0,u=s.length;l<u;l++)i=s[l],V.texImage2D(V.TEXTURE_2D,l,o,o,a,i);e.generateMipmaps=!1}else V.texImage2D(V.TEXTURE_2D,0,o,o,a,e.image);e.generateMipmaps&&r&&V.generateMipmap(V.TEXTURE_2D),e.needsUpdate=!1,e.onUpdate&&e.onUpdate()}else V.activeTexture(V.TEXTURE0+t),V.bindTexture(V.TEXTURE_2D,e.__webglTexture)},this.addPostPlugin(new n.SpritePlugin)},n.Scene=function(){n.Object3D.call(this),this.fog=null,this.overrideMaterial=null,this.matrixAutoUpdate=!1,this.__objects=[],this.__lights=[],this.__objectsAdded=[],this.__objectsRemoved=[]},n.Scene.prototype=Object.create(n.Object3D.prototype),n.Scene.prototype.__addObject=function(e){if(e instanceof n.Light)-1===this.__lights.indexOf(e)&&this.__lights.push(e),e.target&&void 0===e.target.parent&&this.add(e.target);else if(-1===this.__objects.indexOf(e)){this.__objects.push(e),this.__objectsAdded.push(e);var t=this.__objectsRemoved.indexOf(e);-1!==t&&this.__objectsRemoved.splice(r,1)}for(var r=0;r<e.children.length;r++)this.__addObject(e.children[r])},n.Scene.prototype.__removeObject=function(e){var t;if(e instanceof n.Light)-1!==(t=this.__lights.indexOf(e))&&this.__lights.splice(t,1);else if(-1!==(t=this.__objects.indexOf(e))){this.__objects.splice(t,1),this.__objectsRemoved.push(e);var r=this.__objectsAdded.indexOf(e);-1!==r&&this.__objectsAdded.splice(t,1)}for(var o=0;o<e.children.length;o++)this.__removeObject(e.children[o])},n.Fog=function(e,t,r){this.name="",this.color=new n.Color(e),this.near=void 0!==t?t:1,this.far=void 0!==r?r:1e3},n.Fog.prototype.clone=function(){return new n.Fog(this.color.getHex(),this.near,this.far)},n.ShaderUtils={clone:function(e){var t,r={};for(t in e){r[t]={},r[t].type=e[t].type;var o=e[t].value;o instanceof n.Color?r[t].value=o.clone():"number"==typeof o?r[t].value=o:o instanceof Array?r[t].value=[]:console.error("Error copying shader uniforms from ShaderLib: unknown type for uniform")}return r},stickimposterFragmentShader:["uniform float opacity;","uniform mat4 projectionMatrix;","uniform vec3 fogColor;","uniform float fogNear;","uniform float fogFar;","varying vec3 vLight;","varying vec3 vColor;","varying vec3 cposition;","varying vec3 p1;","varying vec3 p2;","varying float r;","void main() {","    vec3 color = abs(vColor);","    vec3 pos = cposition;","    vec3 p = pos;","    vec3 v = normalize(pos);","    vec3 pa = p1;","    vec3 va = normalize(p2-p1);","    vec3 tmp1 = v-(dot(v,va)*va);","    vec3 deltap = p-pa;","    float A = dot(tmp1,tmp1);","    if(A == 0.0) discard;","    vec3 tmp2 = deltap-(dot(deltap,va)*va);","    float B = 2.0*dot(tmp1, tmp2);","    float C = dot(tmp2,tmp2)-r*r;","    float det = (B*B) - (4.0*A*C);","    if(det < 0.0) discard;","    float sqrtDet = sqrt(det);","    float posT = (-B+sqrtDet)/(2.0*A);","    float negT = (-B-sqrtDet)/(2.0*A);","    float intersectionT = min(posT,negT);","    vec3 qi = p+v*intersectionT;","    float dotp1 = dot(va,qi-p1);","    float dotp2 = dot(va,qi-p2);","    vec3 norm;","    if( dotp1 < 0.0 || dotp2 > 0.0) {","       vec3 cp;","       if( dotp1 < 0.0) {        cp = p1;","       } else {","          cp = p2;","       }","       vec3 diff = p-cp;","       A = dot(v,v);","       B = dot(diff,v)*2.0;","       C = dot(diff,diff)-r*r;","       det = (B*B) - (4.0*C);","       if(det < 0.0) discard;","       sqrtDet = sqrt(det);","       posT = (-B+sqrtDet)/(2.0);","       negT = (-B-sqrtDet)/(2.0);","       float t = min(posT,negT);","       qi = p+v*t;","       norm = normalize(qi-cp);","    } else {","       norm = normalize(qi-(dotp1*va + p1));","    }","    vec4 clipPos = projectionMatrix * vec4(qi, 1.0);","    float ndcDepth = clipPos.z / clipPos.w;","    float depth = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;","    gl_FragDepthEXT = depth;"].join("\n")},n.ShaderLib={basic:{fragmentShader:["uniform mat4 viewMatrix;","uniform float opacity;","uniform vec3 fogColor;","uniform float fogNear;","uniform float fogFar;","varying vec3 vColor;","void main() {","    gl_FragColor = vec4( vColor, opacity );","    float depth = gl_FragCoord.z / gl_FragCoord.w;","    float fogFactor = smoothstep( fogNear, fogFar, depth );","    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}"].join("\n"),vertexShader:["uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","attribute vec3 position;","attribute vec3 color;","varying vec3 vColor;","void main() {","    vColor = color;","    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","    gl_Position = projectionMatrix * mvPosition;","}"].join("\n"),uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new n.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3}}},sphereimposter:{fragmentShader:["uniform mat4 viewMatrix;","uniform float opacity;","uniform mat4 projectionMatrix;","uniform vec3 fogColor;","uniform float fogNear;","uniform float fogFar;","uniform float uDepth;","uniform vec3 directionalLightColor[ 1 ];","varying vec3 vColor;","varying vec2 mapping;","varying float rval;","varying vec3 vLight;","varying vec3 center;","void main() {","    float lensqr = dot(mapping,mapping);","    float rsqr = rval*rval;","    if(lensqr > rsqr)","       discard;","    float z = sqrt(rsqr-lensqr);","    vec3 cameraPos = center+ vec3(mapping.x,mapping.y,z);","    vec4 clipPos = projectionMatrix * vec4(cameraPos, 1.0);","    float ndcDepth = clipPos.z / clipPos.w;","    gl_FragDepthEXT = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;","    vec3 norm = normalize(vec3(mapping.x,mapping.y,z));","    float dotProduct = dot( norm, vLight );","    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );","    vec3 vLight = directionalLightColor[ 0 ] * directionalLightWeighting;","    gl_FragColor = vec4(vLight*vColor, opacity*opacity );","    float fogFactor = smoothstep( fogNear, fogFar, gl_FragDepthEXT/gl_FragCoord.w );","    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}"].join("\n"),vertexShader:["uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 directionalLightColor[ 1 ];","uniform vec3 directionalLightDirection[ 1 ];","attribute vec3 position;","attribute vec3 normal;","attribute vec3 color;","varying vec2 mapping;","varying vec3 vColor;","varying float rval;","varying vec3 vLight;","varying vec3 center;","void main() {","    vColor = color;","    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","    center = mvPosition.xyz;","    vec4 projPosition = projectionMatrix * mvPosition;","    vec4 adjust = projectionMatrix* vec4(normal,0.0); adjust.z = 0.0; adjust.w = 0.0;","    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );","    vLight = normalize( lDirection.xyz );","    mapping = normal.xy;","    rval = abs(normal.x);","    gl_Position = projPosition+adjust;","}"].join("\n"),uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new n.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},lambert:{fragmentShader:["uniform mat4 viewMatrix;","uniform float opacity;","uniform vec3 fogColor;","uniform float fogNear;","uniform float fogFar;","varying vec3 vLightFront;","varying vec3 vColor;","void main() {","    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );","    #ifndef WIREFRAME","    gl_FragColor.xyz *= vLightFront;","    #endif","    gl_FragColor = gl_FragColor * vec4( vColor, opacity );","    float depth = gl_FragCoord.z / gl_FragCoord.w;","    float fogFactor = smoothstep( fogNear, fogFar, depth );","    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}"].join("\n"),vertexShader:["uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 directionalLightColor[ 1 ];","uniform vec3 directionalLightDirection[ 1 ];","attribute vec3 position;","attribute vec3 normal;","attribute vec3 color;","varying vec3 vColor;","varying vec3 vLightFront;","void main() {","    vColor = color;","    vec3 objectNormal = normal;","    vec3 transformedNormal = normalMatrix * objectNormal;","    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","    vLightFront = vec3( 0.0 );","    transformedNormal = normalize( transformedNormal );","    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );","    vec3 dirVector = normalize( lDirection.xyz );","    float dotProduct = dot( transformedNormal, dirVector );","    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );","    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;","    gl_Position = projectionMatrix * mvPosition;","}"].join("\n"),uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new n.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},instanced:{fragmentShader:["uniform mat4 viewMatrix;","uniform float opacity;","uniform vec3 fogColor;","uniform float fogNear;","uniform float fogFar;","varying vec3 vLightFront;","varying vec3 vColor;","void main() {","    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );","    #ifndef WIREFRAME","    gl_FragColor.xyz *= vLightFront;","    #endif","    gl_FragColor = gl_FragColor * vec4( vColor, opacity );","    float depth = gl_FragCoord.z / gl_FragCoord.w;","    float fogFactor = smoothstep( fogNear, fogFar, depth );","    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}"].join("\n"),vertexShader:["uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 directionalLightColor[ 1 ];","uniform vec3 directionalLightDirection[ 1 ];","attribute vec3 offset;","attribute vec3 position;","attribute vec3 normal;","attribute vec3 color;","attribute float radius;","varying vec3 vColor;","varying vec3 vLightFront;","void main() {","    vColor = color;","    vec3 objectNormal = normal;","    vec3 transformedNormal = normalMatrix * objectNormal;","    vec4 mvPosition = modelViewMatrix * vec4( position * radius + offset, 1.0 );","    vLightFront = vec3( 0.0 );","    transformedNormal = normalize( transformedNormal );","    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );","    vec3 dirVector = normalize( lDirection.xyz );","    float dotProduct = dot( transformedNormal, dirVector );","    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );","    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;","    gl_Position = projectionMatrix * mvPosition;","}"].join("\n"),uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new n.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},outline:{fragmentShader:["uniform float opacity;","uniform vec3 outlineColor;","uniform vec3 fogColor;","uniform float fogNear;","uniform float fogFar;","void main() {","    gl_FragColor = vec4( outlineColor, 1 );","}"].join("\n"),vertexShader:["uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float outlineWidth;","uniform float outlinePushback;","attribute vec3 position;","attribute vec3 normal;","attribute vec3 color;","void main() {","    vec4 norm = modelViewMatrix*vec4(normalize(normal),0.0);","    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","    mvPosition.xy += norm.xy*outlineWidth;","    gl_Position = projectionMatrix * mvPosition;","    mvPosition.z -= outlinePushback;","    vec4 pushpos = projectionMatrix*mvPosition;","    gl_Position.z = gl_Position.w*pushpos.z/pushpos.w;","}"].join("\n"),uniforms:{opacity:{type:"f",value:1},outlineColor:{type:"c",value:new n.Color(0,0,0)},fogColor:{type:"c",value:new n.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1}}},sphereimposteroutline:{fragmentShader:["uniform float opacity;","uniform vec3 outlineColor;","uniform vec3 fogColor;","uniform float fogNear;","uniform float fogFar;","uniform mat4 projectionMatrix;","varying vec2 mapping;","varying float rval;","varying vec3 center;","uniform float outlinePushback;","void main() {","    float lensqr = dot(mapping,mapping);","    float rsqr = rval*rval;","    if(lensqr > rsqr)","       discard;","    float z = sqrt(rsqr-lensqr);","    vec3 cameraPos = center+ vec3(mapping.x,mapping.y,z-outlinePushback);","    vec4 clipPos = projectionMatrix * vec4(cameraPos, 1.0);","    float ndcDepth = clipPos.z / clipPos.w;","    gl_FragDepthEXT = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;","    gl_FragColor = vec4(outlineColor, 1 );","}"].join("\n"),vertexShader:["uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float outlineWidth;","uniform float outlinePushback;","attribute vec3 position;","attribute vec3 normal;","attribute vec3 color;","varying vec2 mapping;","varying float rval;","varying vec3 center;","void main() {","    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","    center = mvPosition.xyz;","    vec4 projPosition = projectionMatrix * mvPosition;","    vec2 norm = normal.xy + vec2(sign(normal.x)*outlineWidth,sign(normal.y)*outlineWidth);","    vec4 adjust = projectionMatrix* vec4(norm,normal.z,0.0); adjust.z = 0.0; adjust.w = 0.0;","    mapping = norm.xy;","    rval = abs(norm.x);","    gl_Position = projPosition+adjust;","}"].join("\n"),uniforms:{opacity:{type:"f",value:1},outlineColor:{type:"c",value:new n.Color(0,0,0)},fogColor:{type:"c",value:new n.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1}}},stickimposter:{fragmentShader:[n.ShaderUtils.stickimposterFragmentShader,"    float dotProduct = dot( norm, vLight );","    vec3 light = vec3( max( dotProduct, 0.0 ) );","    gl_FragColor = vec4(light*color, opacity*opacity );","    float fogFactor = smoothstep( fogNear, fogFar, depth );","    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}"].join("\n"),vertexShader:["uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 directionalLightColor[ 1 ];","uniform vec3 directionalLightDirection[ 1 ];","attribute vec3 position;","attribute vec3 normal;","attribute vec3 color;","attribute float radius;","varying vec3 vColor;","varying vec3 vLight;","varying vec3 cposition;","varying vec3 p1;","varying vec3 p2;","varying float r;","void main() {","    vColor = color; vColor.z = abs(vColor.z);","    r = abs(radius);","    vec4 to = modelViewMatrix*vec4(normal, 1.0);","    vec4 pt = modelViewMatrix*vec4(position, 1.0);","    vec4 mvPosition = pt;","    p1 = pt.xyz; p2 = to.xyz;","    vec3 norm = to.xyz-pt.xyz;","    float mult = 1.1;","    if(length(p1) > length(p2)) {","       mvPosition = to;","    }","    vec3 n = normalize(mvPosition.xyz);","    if(color.z >= 0.0) {","       vec3 pnorm = normalize(p1);","       float t = dot(mvPosition.xyz-p1,n)/dot(pnorm,n);","       mvPosition.xyz = p1+t*pnorm;","    } else {","       vec3 pnorm = normalize(p2);","       float t = dot(mvPosition.xyz-p2,n)/dot(pnorm,n);","       mvPosition.xyz = p2+t*pnorm;","       mult *= -1.0;","    }","    vec3 cr = normalize(cross(mvPosition.xyz,norm))*radius;","    vec3 doublecr = normalize(cross(mvPosition.xyz,cr))*radius;","    mvPosition.xy +=  mult*(cr + doublecr).xy;","    cposition = mvPosition.xyz;","    gl_Position = projectionMatrix * mvPosition;","    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );","    vLight = normalize( lDirection.xyz )*directionalLightColor[0];","}"].join("\n"),uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new n.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},stickimposteroutline:{fragmentShader:n.ShaderUtils.stickimposterFragmentShader+"gl_FragColor = vec4(color,1.0);}",vertexShader:["uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 directionalLightColor[ 1 ];","uniform vec3 directionalLightDirection[ 1 ];","uniform vec3 outlineColor;","uniform float outlineWidth;","uniform float outlinePushback;","attribute vec3 position;","attribute vec3 normal;","attribute vec3 color;","attribute float radius;","varying vec3 vColor;","varying vec3 vLight;","varying vec3 cposition;","varying vec3 p1;","varying vec3 p2;","varying float r;","void main() {","    vColor = outlineColor;","    float rad = radius+sign(radius)*outlineWidth;","    r = abs(rad);","    vec4 to = modelViewMatrix*vec4(normal, 1.0);","    vec4 pt = modelViewMatrix*vec4(position, 1.0);","    to.xyz += normalize(to.xyz)*outlinePushback;","    pt.xyz += normalize(pt.xyz)*outlinePushback;","    vec4 mvPosition = pt;","    p1 = pt.xyz; p2 = to.xyz;","    vec3 norm = to.xyz-pt.xyz;","    float mult = 1.1;","    if(length(p1) > length(p2)) {","       mvPosition = to;","    }","    vec3 n = normalize(mvPosition.xyz);","    if(color.z >= 0.0) {","       vec3 pnorm = normalize(p1);","       float t = dot(mvPosition.xyz-p1,n)/dot(pnorm,n);","       mvPosition.xyz = p1+t*pnorm;","    } else {","       vec3 pnorm = normalize(p2);","       float t = dot(mvPosition.xyz-p2,n)/dot(pnorm,n);","       mvPosition.xyz = p2+t*pnorm;","       mult *= -1.0;","    }","    vec3 cr = normalize(cross(mvPosition.xyz,norm))*rad;","    vec3 doublecr = normalize(cross(mvPosition.xyz,cr))*rad;","    mvPosition.xy +=  mult*(cr + doublecr).xy;","    cposition = mvPosition.xyz;","    gl_Position = projectionMatrix * mvPosition;","    vLight = vec3(1.0,1.0,1.0);","}"].join("\n"),uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new n.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineColor:{type:"c",value:new n.Color(0,0,0)},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1}}},lambertdouble:{fragmentShader:["uniform mat4 viewMatrix;","uniform float opacity;","uniform vec3 fogColor;","uniform float fogNear;","uniform float fogFar;","varying vec3 vLightFront;","varying vec3 vLightBack;","varying vec3 vColor;","void main() {","    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );","    #ifndef WIREFRAME","    if ( gl_FrontFacing )","       gl_FragColor.xyz *= vLightFront;","    else","       gl_FragColor.xyz *= vLightBack;","    #endif","    gl_FragColor = gl_FragColor * vec4( vColor, opacity );","    float depth = gl_FragCoord.z / gl_FragCoord.w;","    float fogFactor = smoothstep( fogNear, fogFar, depth );","    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}"].join("\n"),vertexShader:["uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 directionalLightColor[ 1 ];","uniform vec3 directionalLightDirection[ 1 ];","attribute vec3 position;","attribute vec3 normal;","attribute vec3 color;","varying vec3 vColor;","varying vec3 vLightFront;","varying vec3 vLightBack;","void main() {","    vColor = color;","    vec3 objectNormal = normal;","    vec3 transformedNormal = normalMatrix * objectNormal;","    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","    vLightFront = vec3( 0.0 );","    vLightBack = vec3( 0.0 );","    transformedNormal = normalize( transformedNormal );","    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );","    vec3 dirVector = normalize( lDirection.xyz );","    float dotProduct = dot( transformedNormal, dirVector );","    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );","    vec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );","    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;","    vLightBack += directionalLightColor[ 0 ] * directionalLightWeightingBack;","    gl_Position = projectionMatrix * mvPosition;","}"].join("\n"),uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new n.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},sprite:{fragmentShader:["uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","    vec4 texture = texture2D(map, vUV);","    if (texture.a < alphaTest) discard;","    gl_FragColor = vec4(color * texture.xyz, texture.a * opacity);","    if (fogType > 0) {","        float depth = gl_FragCoord.z / gl_FragCoord.w;","        float fogFactor = 0.0;","        if (fogType == 1) {","            fogFactor = smoothstep(fogNear, fogFar, depth);","        }","        else {","            const float LOG2 = 1.442695;","            float fogFactor = exp2(- fogDensity * fogDensity * depth * depth * LOG2);","            fogFactor = 1.0 - clamp(fogFactor, 0.0, 1.0);","        }","        gl_FragColor = mix(gl_FragColor, vec4(fogColor, gl_FragColor.w), fogFactor);","    }","}"].join("\n"),vertexShader:["uniform int useScreenCoordinates;","uniform vec3 screenPosition;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 alignment;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","    vUV = uvOffset + uv * uvScale;","    vec2 alignedPosition = position + alignment;","    vec2 rotatedPosition;","    rotatedPosition.x = ( cos(rotation) * alignedPosition.x - sin(rotation) * alignedPosition.y ) * scale.x;","    rotatedPosition.y = ( sin(rotation) * alignedPosition.x + cos(rotation) * alignedPosition.y ) * scale.y;","    vec4 finalPosition;","    if(useScreenCoordinates != 0) {","        finalPosition = vec4(screenPosition.xy + rotatedPosition, screenPosition.z, 1.0);","    }","    else {","        finalPosition = projectionMatrix * modelViewMatrix * vec4(0.0, 0.0, 0.0, 1.0); finalPosition /= finalPosition.w;","        finalPosition.xy += rotatedPosition; ","    }","    gl_Position = finalPosition;","}"].join("\n"),uniforms:{}}},"undefined"==typeof console&&(console={log:function(){}}),n.ProteinSurface=function(){var e,t,r,o=0,a=0,s=0,l=2,u=0,c=0,d=0,p=0,f=null,h=null,m=null,y=0,g=0,v=0,b=0,_=0,w=0,x={H:1.2,Li:1.82,Na:2.27,K:2.75,C:1.7,N:1.55,O:1.52,F:1.47,P:1.8,S:1.8,CL:1.75,BR:1.85,SE:1.9,ZN:1.39,CU:1.4,NI:1.63,X:2},S=function(e){return e.elem&&void 0!==x[e.elem]?e.elem:"X"},C={},E={},M=[new Int32Array([1,0,0]),new Int32Array([-1,0,0]),new Int32Array([0,1,0]),new Int32Array([0,-1,0]),new Int32Array([0,0,1]),new Int32Array([0,0,-1]),new Int32Array([1,1,0]),new Int32Array([1,-1,0]),new Int32Array([-1,1,0]),new Int32Array([-1,-1,0]),new Int32Array([1,0,1]),new Int32Array([1,0,-1]),new Int32Array([-1,0,1]),new Int32Array([-1,0,-1]),new Int32Array([0,1,1]),new Int32Array([0,1,-1]),new Int32Array([0,-1,1]),new Int32Array([0,-1,-1]),new Int32Array([1,1,1]),new Int32Array([1,1,-1]),new Int32Array([1,-1,1]),new Int32Array([-1,1,1]),new Int32Array([1,-1,-1]),new Int32Array([-1,-1,1]),new Int32Array([-1,1,-1]),new Int32Array([-1,-1,-1])];this.getFacesAndVertices=function(n){var r,i,u={};for(r=0,i=n.length;r<i;r++)u[n[r]]=!0;var c=t;for(r=0,i=c.length;r<i;r++)c[r].x=c[r].x/l-o,c[r].y=c[r].y/l-a,c[r].z=c[r].z/l-s;var d=[];for(r=0,i=e.length;r<i;r+=3){var p=e[r],y=e[r+1],g=e[r+2],v=c[p].atomid,b=c[y].atomid,_=c[g].atomid,w=v;if(b<w&&(w=b),_<w&&(w=_),u[w]){c[e[r]],c[e[r+1]],c[e[r+2]];p!==y&&y!==g&&p!==g&&(d.push(p),d.push(y),d.push(g))}}return f=null,h=null,m=null,{vertices:c,faces:d}},this.initparm=function(e,t,n){n>1e6&&(l=1);var i=1/l*5.5;r=e,y=e[0][0],b=e[1][0],g=e[0][1],_=e[1][1],v=e[0][2],w=e[1][2],t?(y-=1.4+i,g-=1.4+i,v-=1.4+i,b+=1.4+i,_+=1.4+i,w+=1.4+i):(y-=i,g-=i,v-=i,b+=i,_+=i,w+=i),y=Math.floor(y*l)/l,g=Math.floor(g*l)/l,v=Math.floor(v*l)/l,b=Math.ceil(b*l)/l,_=Math.ceil(_*l)/l,w=Math.ceil(w*l)/l,o=-y,a=-g,s=-v,d=Math.ceil(l*(b-y))+1,c=Math.ceil(l*(_-g))+1,u=Math.ceil(l*(w-v))+1,this.boundingatom(t),p=1.4*l,f=new Uint8Array(d*c*u),h=new Float64Array(d*c*u),m=new Int32Array(d*c*u)},this.boundingatom=function(e){var t,n,r,o=[];flagradius=e;for(var a in x)if(x.hasOwnProperty(a)){var i=x[a];for(o[a]=e?(i+1.4)*l+.5:i*l+.5,r=o[a]*o[a],E[a]=Math.floor(o[a])+1,C[a]=new Int32Array(E[a]*E[a]),indx=0,j=0;j<E[a];j++)for(k=0;k<E[a];k++)t=j*j+k*k,t>r?C[a][indx]=-1:(n=Math.sqrt(r-t),C[a][indx]=Math.floor(n)),indx++}},this.fillvoxels=function(e,t){var n,r;for(n=0,r=f.length;n<r;n++)f[n]=0,h[n]=-1,m[n]=-1;for(n in t){var o=e[t[n]];void 0!==o&&this.fillAtom(o,e)}for(n=0,r=f.length;n<r;n++)1&f[n]&&(f[n]|=2)},this.fillAtom=function(e,t){var n,r,i,p,h,y,g,v,b,_,w,x,k,M,A,T,O,P,j;n=Math.floor(.5+l*(e.x+o)),r=Math.floor(.5+l*(e.y+a)),i=Math.floor(.5+l*(e.z+s));var I=S(e),D=0,N=c*u;for(_=0,j=E[I];_<j;_++)for(w=0;w<j;w++){if(-1!=C[I][D])for(T=-1;T<2;T++)for(O=-1;O<2;O++)for(P=-1;P<2;P++)if(0!==T&&0!==O&&0!==P)for(g=T*_,b=P*w,x=0;x<=C[I][D];x++)if(v=x*O,k=n+g,M=r+v,A=i+b,!(k<0||M<0||A<0||k>=d||M>=c||A>=u)){var R=k*N+M*u+A;if(1&f[R]){var L=t[m[R]];L.serial!=e.serial&&(p=n+g-Math.floor(.5+l*(L.x+o)),h=r+v-Math.floor(.5+l*(L.y+a)),y=i+b-Math.floor(.5+l*(L.z+s)),g*g+v*v+b*b<p*p+h*h+y*y&&(m[R]=e.serial))}else f[R]|=1,m[R]=e.serial}D++}},this.fillvoxelswaals=function(e,t){var n,r;for(n=0,r=f.length;n<r;n++)f[n]&=-3;for(n in t){var o=e[t[n]];void 0!==o&&this.fillAtomWaals(o,e)}},this.fillAtomWaals=function(e,t){var n,r,i,p,h,y,g,v,b,_,w,x,k,M,A,T,O,P,j,I=0;n=Math.floor(.5+l*(e.x+o)),r=Math.floor(.5+l*(e.y+a)),i=Math.floor(.5+l*(e.z+s));var D=S(e),N=c*u;for(k=0,j=E[D];k<j;k++)for(M=0;M<j;M++){if(-1!=C[D][I])for(T=-1;T<2;T++)for(O=-1;O<2;O++)for(P=-1;P<2;P++)if(0!==T&&0!==O&&0!==P)for(g=T*k,b=P*M,A=0;A<=C[D][I];A++)if(v=A*O,_=n+g,w=r+v,x=i+b,!(_<0||w<0||x<0||_>=d||w>=c||x>=u)){var R=_*N+w*u+x;if(2&f[R]){var L=t[m[R]];L.serial!=e.serial&&(p=n+g-Math.floor(.5+l*(L.x+o)),h=r+v-Math.floor(.5+l*(L.y+a)),y=i+b-Math.floor(.5+l*(L.z+s)),g*g+v*v+b*b<p*p+h*h+y*y&&(m[R]=e.serial))}else f[R]|=2,m[R]=e.serial}I++}},this.buildboundary=function(){var e=c*u;for(i=0;i<d;i++)for(j=0;j<u;j++)for(k=0;k<c;k++){var t=i*e+k*u+j;if(1&f[t])for(var n=0;n<26;){var r=i+M[n][0],o=j+M[n][2],a=k+M[n][1];if(r>-1&&r<d&&a>-1&&a<c&&o>-1&&o<u&&!(1&f[r*e+a*u+o])){f[t]|=4;break}n++}}};var A=function(e,t,n){var r=new Int32Array(e*t*n*3);this.set=function(e,o,a,i){var s=3*((e*t+o)*n+a);r[s]=i.ix,r[s+1]=i.iy,r[s+2]=i.iz},this.get=function(e,o,a){var i=3*((e*t+o)*n+a);return{ix:r[i],iy:r[i+1],iz:r[i+2]}}};this.fastdistancemap=function(){var e,t,n,r,o,a=new A(d,c,u),i=c*u,s=p*p,m=[],y=[];for(e=0;e<d;e++)for(t=0;t<c;t++)for(n=0;n<u;n++)if(o=e*i+t*u+n,f[o]&=-3,1&f[o]&&4&f[o]){var g={ix:e,iy:t,iz:n};a.set(e,t,n,g),m.push(g),h[o]=0,f[o]|=2,f[o]&=-5}do{for(y=this.fastoneshell(m,a),m=[],e=0,r=y.length;e<r;e++)o=i*y[e].ix+u*y[e].iy+y[e].iz,f[o]&=-5,h[o]<=1.0404*s&&m.push({ix:y[e].ix,iy:y[e].iy,iz:y[e].iz})}while(0!==m.length);m=[],y=[],a=null;var v=l-.5;v<0&&(v=0);var b=s-.5/(.1+v);for(e=0;e<d;e++)for(t=0;t<c;t++)for(n=0;n<u;n++)o=e*i+t*u+n,f[o]&=-5,1&f[o]&&(2&f[o]&&!(2&f[o]&&h[o]>=b)||(f[o]|=4))},this.fastoneshell=function(e,t){var n,r,o,a,i,s,l,p,m,y,g,v,b=[];if(0===e.length)return b;tnv={ix:-1,iy:-1,iz:-1};var _=c*u;for(l=0,m=e.length;l<m;l++)for(n=e[l].ix,r=e[l].iy,o=e[l].iz,g=t.get(n,r,o),p=0;p<6;p++)tnv.ix=n+M[p][0],tnv.iy=r+M[p][1],tnv.iz=o+M[p][2],tnv.ix<d&&tnv.ix>-1&&tnv.iy<c&&tnv.iy>-1&&tnv.iz<u&&tnv.iz>-1&&(v=tnv.ix*_+u*tnv.iy+tnv.iz,1&f[v]&&!(2&f[v])?(t.set(tnv.ix,tnv.iy,o+M[p][2],g),a=tnv.ix-g.ix,i=tnv.iy-g.iy,s=tnv.iz-g.iz,y=a*a+i*i+s*s,h[v]=y,f[v]|=2,f[v]|=4,b.push({ix:tnv.ix,iy:tnv.iy,iz:tnv.iz})):1&f[v]&&2&f[v]&&(a=tnv.ix-g.ix,i=tnv.iy-g.iy,s=tnv.iz-g.iz,(y=a*a+i*i+s*s)<h[v]&&(t.set(tnv.ix,tnv.iy,tnv.iz,g),h[v]=y,4&f[v]||(f[v]|=4,b.push({ix:tnv.ix,iy:tnv.iy,iz:tnv.iz})))));for(l=0,m=e.length;l<m;l++)for(n=e[l].ix,r=e[l].iy,o=e[l].iz,g=t.get(n,r,o),p=6;p<18;p++)tnv.ix=n+M[p][0],tnv.iy=r+M[p][1],tnv.iz=o+M[p][2],tnv.ix<d&&tnv.ix>-1&&tnv.iy<c&&tnv.iy>-1&&tnv.iz<u&&tnv.iz>-1&&(v=tnv.ix*_+u*tnv.iy+tnv.iz,1&f[v]&&!(2&f[v])?(t.set(tnv.ix,tnv.iy,o+M[p][2],g),a=tnv.ix-g.ix,i=tnv.iy-g.iy,s=tnv.iz-g.iz,y=a*a+i*i+s*s,h[v]=y,f[v]|=2,f[v]|=4,b.push({ix:tnv.ix,iy:tnv.iy,iz:tnv.iz})):1&f[v]&&2&f[v]&&(a=tnv.ix-g.ix,i=tnv.iy-g.iy,s=tnv.iz-g.iz,(y=a*a+i*i+s*s)<h[v]&&(t.set(tnv.ix,tnv.iy,tnv.iz,g),h[v]=y,4&f[v]||(f[v]|=4,b.push({ix:tnv.ix,iy:tnv.iy,iz:tnv.iz})))));for(l=0,m=e.length;l<m;l++)for(n=e[l].ix,r=e[l].iy,o=e[l].iz,g=t.get(n,r,o),p=18;p<26;p++)tnv.ix=n+M[p][0],tnv.iy=r+M[p][1],tnv.iz=o+M[p][2],tnv.ix<d&&tnv.ix>-1&&tnv.iy<c&&tnv.iy>-1&&tnv.iz<u&&tnv.iz>-1&&(v=tnv.ix*_+u*tnv.iy+tnv.iz,1&f[v]&&!(2&f[v])?(t.set(tnv.ix,tnv.iy,o+M[p][2],g),a=tnv.ix-g.ix,i=tnv.iy-g.iy,s=tnv.iz-g.iz,y=a*a+i*i+s*s,h[v]=y,f[v]|=2,f[v]|=4,b.push({ix:tnv.ix,iy:tnv.iy,iz:tnv.iz})):1&f[v]&&2&f[v]&&(a=tnv.ix-g.ix,i=tnv.iy-g.iy,s=tnv.iz-g.iz,(y=a*a+i*i+s*s)<h[v]&&(t.set(tnv.ix,tnv.iy,tnv.iz,g),h[v]=y,4&f[v]||(f[v]|=4,b.push({ix:tnv.ix,iy:tnv.iy,iz:tnv.iz})))));return b},this.marchingcubeinit=function(e){for(var t=0,n=f.length;t<n;t++)1==e?f[t]&=-5:4==e?(f[t]&=-3,4&f[t]&&(f[t]|=2),f[t]&=-5):2==e?4&f[t]&&2&f[t]?f[t]&=-5:4&f[t]&&!(2&f[t])&&(f[t]|=2):3==e&&(f[t]&=-5)};this.marchingcube=function(r){this.marchingcubeinit(r),t=[],e=[],n.MarchingCube.march(f,t,e,{smooth:1,nX:d,nY:c,nZ:u});for(var o=c*u,a=0,i=t.length;a<i;a++)t[a].atomid=m[t[a].x*o+u*t[a].y+t[a].z];n.MarchingCube.laplacianSmooth(1,t,e)}},n.autoload=function(e){if(void 0!==$(".viewer_3Dmoljs")[0]&&(n.autoinit=!0),n.autoinit){e=void 0!=e?e:null,n.viewers={};var t=0;$(".viewer_3Dmoljs").each(function(){var r=$(this),o=[];"static"==r.css("position")&&r.css("position","relative");var a="function"==typeof window[r.data("callback")]?window[r.data("callback")]:null,i=null;r.data("pdb")?(o.push("https://files.rcsb.org/view/"+r.data("pdb")+".pdb"),i="pdb"):r.data("cid")?(i="sdf",o.push("https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+r.data("cid")+"/SDF?record_type=3d")):r.data("href")&&o.push(r.data("href"));var s=r.data();for(var l in s)"pdb"===l.substring(0,3)&&"pdb"!==l?o.push("https://files.rcsb.org/view/"+s[l]+".pdb"):"href"===l.substring(0,4)&&"href"!==l?o.push(s[l]):"cid"===l.substring(0,3)&&"cid"!==l&&o.push("https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+s[l]+"/SDF?record_type=3d");var u={};r.data("options")&&(u=n.specStringToObject(r.data("options")));var c=n.CC.color(r.data("backgroundcolor")),d={line:{}};r.data("style")&&(d=n.specStringToObject(r.data("style")));var p={};r.data("select")&&(p=n.specStringToObject(r.data("select")));var f=[],h=[],m=[],y=r.data(),g=/style(.+)/,v=/surface(.*)/,b=/labelres(.*)/,_=[];for(var w in y)y.hasOwnProperty(w)&&_.push(w);_.sort();for(var l=0;l<_.length;l++){var w=_[l],x=g.exec(w);if(x){var S="select"+x[1],C=n.specStringToObject(y[S]),k=n.specStringToObject(y[w]);f.push([C,k])}if(x=v.exec(w)){var S="select"+x[1],C=n.specStringToObject(y[S]),k=n.specStringToObject(y[w]);h.push([C,k])}if(x=b.exec(w)){var S="select"+x[1],C=n.specStringToObject(y[S]),k=n.specStringToObject(y[w]);m.push([C,k])}}var E=function(e){e.setStyle(p,d);for(var t=0;t<f.length;t++){var r=f[t][0]||{},o=f[t][1]||{line:{}};e.setStyle(r,o)}for(var t=0;t<h.length;t++){var r=h[t][0]||{},o=h[t][1]||{};e.addSurface(n.SurfaceType.VDW,o,r,r)}for(var t=0;t<m.length;t++){var r=m[t][0]||{},o=m[t][1]||{};e.addResLabels(r,o)}e.zoomTo(),e.render()},M=e;try{null==M&&(M=n.viewers[this.id||t++]=n.createViewer(r,{defaultcolors:n.rasmolElementColors})),M.setBackgroundColor(c)}catch(e){console.log(e),window.location="http://get.webgl.org"}if(0!=o.length)for(var l=0;l<o.length;l++)val=l,uri=o[l],i=r.data("type")||r.data("datatype")||i,i||(i=uri.substr(uri.lastIndexOf(".")+1)),$.get(uri,function(e){M.addModel(e,i,u),E(M),a&&val==o.length-1&&a(M)},"text");else{if(r.data("element")){var A=$("#"+r.data("element")).val()||"",i=r.data("type")||r.data("datatype");i||(console.log("Warning: No type specified for embedded viewer with moldata from "+r.data("element")+"\n assuming type 'pdb'"),i="pdb"),M.addModel(A,i,u)}E(M),a&&a(M)}})}},$(document).ready(function(){n.autoload()}),n.CC={cache:{0:new n.Color(0)},color:function e(t){if(!t)return this.cache[0];if(void 0!==this.cache[t])return this.cache[t];if(t&&t.constructor===Array)return t.map(e,this);if("number"==typeof(t=this.getHex(t))){var r=new n.Color(t);return this.cache[t]=r,r}return t},colorTab:{white:16777215,silver:12632256,gray:8421504,grey:8421504,black:0,red:16711680,maroon:8388608,yellow:16776960,orange:16737792,olive:8421376,lime:65280,green:32768,aqua:65535,cyan:65535,teal:32896,blue:255,navy:128,fuchsia:16711935,magenta:16711935,purple:8388736},getHex:function(e){return isNaN(parseInt(e))?"string"==typeof e?(e=e.trim(),4==e.length&&"#"==e[0]&&(e="#"+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),7==e.length&&"#"==e[0]?parseInt(e.substring(1),16):this.colorTab[e.toLowerCase()]||0):e:parseInt(e)}},n.CC=n.CC,n.CC.color=n.CC.color,n.ssColors=n.ssColors||{},n.ssColors.pyMol={h:16711680,s:16776960,c:65280},n.ssColors.Jmol={h:16711808,s:16762880,c:16777215},n.elementColors=n.elementColors||{},n.elementColors.defaultColor=16716947,n.elementColors.Jmol={H:16777215,He:14286847,HE:14286847,Li:13402367,LI:13402367,B:16758197,C:9474192,N:3166456,O:16715021,F:9494608,Na:11230450,NA:11230450,Mg:9109248,MG:9109248,Al:12560038,AL:12560038,Si:1578e4,SI:1578e4,P:16744448,S:16777008,Cl:2093087,CL:2093087,Ca:4062976,CA:4062976,Ti:12567239,TI:12567239,Cr:9083335,CR:9083335,Mn:10255047,MN:10255047,Fe:14706227,FE:14706227,Ni:5296208,NI:5296208,Cu:13140019,CU:13140019,Zn:8224944,ZN:8224944,Br:10889513,BR:10889513,Ag:12632256,AG:12632256,I:9699476,Ba:51456,BA:51456,Au:16765219,AU:16765219},n.elementColors.rasmol={H:16777215,He:16761035,HE:16761035,Li:11674146,LI:11674146,B:65280,C:13158600,N:9408511,O:15728640,F:14329120,Na:255,NA:255,Mg:2263842,MG:2263842,Al:8421520,AL:8421520,Si:14329120,SI:14329120,P:16753920,S:16762930,Cl:65280,CL:65280,Ca:8421520,CA:8421520,Ti:8421520,TI:8421520,Cr:8421520,CR:8421520,Mn:8421520,MN:8421520,Fe:16753920,FE:16753920,Ni:10824234,NI:10824234,Cu:10824234,CU:10824234,Zn:10824234,ZN:10824234,Br:10824234,BR:10824234,Ag:8421520,AG:8421520,I:10494192,Ba:16753920,BA:16753920,Au:14329120,AU:14329120},n.elementColors.defaultColors=n.elementColors.rasmol,n.elementColors.greenCarbon=$.extend({},n.elementColors.defaultColors),n.elementColors.greenCarbon.C=65280,n.elementColors.cyanCarbon=$.extend({},n.elementColors.defaultColors),n.elementColors.cyanCarbon.C=65535,n.elementColors.magentaCarbon=$.extend({},n.elementColors.defaultColors),n.elementColors.magentaCarbon.C=16711935,n.elementColors.yellowCarbon=$.extend({},n.elementColors.defaultColors),n.elementColors.yellowCarbon.C=16776960,n.elementColors.whiteCarbon=$.extend({},n.elementColors.defaultColors),n.elementColors.whiteCarbon.C=16777215,n.elementColors.orangeCarbon=$.extend({},n.elementColors.defaultColors),n.elementColors.orangeCarbon.C=16737792,n.elementColors.purpleCarbon=$.extend({},n.elementColors.defaultColors),n.elementColors.purpleCarbon.C=8388736,n.elementColors.blueCarbon=$.extend({},n.elementColors.defaultColors),n.elementColors.blueCarbon.C=255,n.residues={},n.residues.amino={Ala:13158600,Arg:1334015,Asn:56540,Asp:15075850,Cys:15132160,Gln:56540,Glu:15075850,Gly:15461355,His:8553170,Ile:1016335,Leu:1016335,Lys:1334015,Met:15132160,Phe:3289770,Pro:14456450,Ser:16422400,Thr:16422400,Trp:11819700,Tyr:3289770,Val:1016335,Asx:16738740,Glx:16738740,other:12492910},n.residues.shapely={Ala:9240460,Arg:124,Asn:16743536,Asp:10485826,Cys:16777072,Gln:16731212,Glu:6684672,Gly:16777215,His:7368959,Ile:19456,Leu:4546117,Lys:4671416,Met:12099650,Phe:5459026,Pro:5395026,Ser:16740418,Thr:12078080,Trp:5195264,Tyr:9203788,Val:16747775,Asx:16711935,Glx:16711935,other:16711935},n.residues.nucleic={A:10526975,G:16740464,I:8454143,C:16747595,T:10551200,U:16744576},n.chains={},n.chains.atom={A:12636415,B:11599792,C:16761032,D:16777088,E:16761087,F:11596016,G:16765040,H:15761536,I:16113331,J:49151,K:13458524,L:6737322,M:10145074,N:15631086,O:52945,P:65407,Q:3978097,R:139,S:12433259,T:25600,U:8388608,V:8421376,W:8388736,X:32896,Y:12092939,Z:11674146},n.chains.hetatm={A:9478351,B:8441752,C:13602992,D:13619056,E:13603023,F:8437952,G:13607008,H:12603504,I:12955267,J:42959,K:11881548,L:5682578,M:9090346,N:12481214,O:46753,P:53103,Q:3447649,R:187,S:10854235,T:37888,U:11534336,V:11579392,W:11534512,X:45232,Y:15250963,Z:12726834},n.builtinColorSchemes={ssPyMol:{prop:"ss",map:n.ssColors.pyMol},ssJmol:{prop:"ss",map:n.ssColors.Jmol},Jmol:{prop:"elem",map:n.elementColors.Jmol},default:{prop:"elem",map:n.elementColors.defaultColors},greenCarbon:{prop:"elem",map:n.elementColors.greenCarbon},cyanCarbon:{prop:"elem",map:n.elementColors.cyanCarbon},magentaCarbon:{prop:"elem",map:n.elementColors.magentaCarbon},yellowCarbon:{prop:"elem",map:n.elementColors.yellowCarbon},whiteCarbon:{prop:"elem",map:n.elementColors.whiteCarbon},orangeCarbon:{prop:"elem",map:n.elementColors.orangeCarbon},purpleCarbon:{prop:"elem",map:n.elementColors.purpleCarbon},blueCarbon:{prop:"elem",map:n.elementColors.blueCarbon},amino:{prop:"resAmino",map:n.residues.amino},shapely:{prop:"resShapely",map:n.residues.shapely},nucleic:{prop:"resNucleic",map:n.residues.nucleic},chain:{prop:"chain",map:n.chains.atom},chainHetatm:{prop:"chain",map:n.chains.hetatm}},n.getColorFromStyle=function(e,t){var r=t.colorscheme;void 0!==n.builtinColorSchemes[r]&&(r=n.builtinColorSchemes[r]);var o=e.color;if(void 0!==t.color&&"spectrum"!=t.color&&(o=t.color),void 0!==r)if(void 0!==n.builtinColorSchemes[r])void 0!==r[e[r.prop]]&&(o=r.map[e[r.prop]]);else if(void 0!==n.elementColors[r]){var r=n.elementColors[r];void 0!==r[e[r.prop]]&&(o=r.map[e[r.prop]])}else if(void 0!==r[e[r.prop]])o=r.map[e[r.prop]];else if(void 0!==r.prop&&void 0!==r.gradient){var a=r.prop,i=r.gradient;void 0!==n.Gradient.builtinGradients[i]&&(i=new n.Gradient.builtinGradients[i](r.min,r.max,r.mid));var s=i.range()||[-1,1],l=n.getAtomProperty(e,a);null!=l&&(o=i.valueToHex(l,s))}else if(void 0!==r.prop&&void 0!==r.map){var a=r.prop,l=n.getAtomProperty(e,a);void 0!==r.map[l]&&(o=r.map[l])}else void 0!==t.colorscheme[e.elem]?o=t.colorscheme[e.elem]:console.log("Could not interpret colorscheme "+r);else void 0!==t.colorfunc&&(o=t.colorfunc(e));return n.CC.color(o)};var n=n||{};n.drawCartoon=function(){var e=function(e,t){var r=[],o=e;o=[],o.push(e[0]);var a,i,s,l,u,c,d,p,f;for(a=1,i=e.length-1;a<i;a++)if(u=e[a],c=e[a+1],u.smoothen){var h=new n.Vector3((u.x+c.x)/2,(u.y+c.y)/2,(u.z+c.z)/2);h.atom=u.atom,o.push(h)}else o.push(u);for(o.push(e[e.length-1]),a=-1,s=o.length;a<=s-3;a++)if(l=o[-1===a?0:a],u=o[a+1],c=o[a+2],d=o[a===s-3?s-1:a+3],p=(new n.Vector3).subVectors(c,l).multiplyScalar(.5),f=(new n.Vector3).subVectors(d,u).multiplyScalar(.5),!c.skip)for(var m=0;m<t;m++){var y=1/t*m,g=u.x+y*p.x+y*y*(-3*u.x+3*c.x-2*p.x-f.x)+y*y*y*(2*u.x-2*c.x+p.x+f.x),v=u.y+y*p.y+y*y*(-3*u.y+3*c.y-2*p.y-f.y)+y*y*y*(2*u.y-2*c.y+p.y+f.y),b=u.z+y*p.z+y*y*(-3*u.z+3*c.z-2*p.z-f.z)+y*y*y*(2*u.z-2*c.z+p.z+f.z),_=new n.Vector3(g,v,b);_.atom=m<t/2?u.atom:c.atom,r.push(_)}return r.push(o[o.length-1]),r},t=function(e,t,r,o,a,i){for(var s,l,u,c,d=0,p=t.length;d<p;d++){c=Math.round(d*(o.length-1)/p),u=n.CC.color(o[c]),geoGroup=e.updateGeoGroup(2);var f=geoGroup.vertexArray,h=geoGroup.colorArray,m=geoGroup.faceArray;s=geoGroup.vertices,l=3*s,f[l]=t[d].x,f[l+1]=t[d].y,f[l+2]=t[d].z,f[l+3]=r[d].x,f[l+4]=r[d].y,f[l+5]=r[d].z;for(var y=0;y<6;++y)h[l+3*y]=u.r,h[l+1+3*y]=u.g,h[l+2+3*y]=u.b;if(d>0){var g=[s,s+1,s-1,s-2],v=geoGroup.faceidx;m[v]=g[0],m[v+1]=g[1],m[v+2]=g[3],m[v+3]=g[1],m[v+4]=g[2],m[v+5]=g[3],geoGroup.faceidx+=6}geoGroup.vertices+=2}},r=function(r,o,a,i,s,l,u){var c,d,p,f;if(!((p=o.length)<2||o[0].length<2)){for(i=i||axisDIV,c=0;c<p;c++)o[c]=e(o[c],i);if(f=o[0].length,!s)return t(r,o[0],o[p-1],a);var h,m,y,g,v,b,_=[],w=[],x=[];for(d=0;d<p;d++)_.push(.25+1.5*Math.sqrt((p-1)*d-Math.pow(d,2))/(p-1)),w.push(.5),x.push(2*(Math.pow(d/p,2)-d/p)+.6);var S=[];for(d=0;d<2*p-1;d++)S[d]=[d,d+1,d+1-2*p,d-2*p];S[2*p-1]=[d,d+1-2*p,d+1-4*p,d-2*p];var C,k,E,M,A,T,O=r.updateGeoGroup(2*p*f);for(c=0;c<f;c++){T=Math.round(c*(a.length-1)/f),A=n.CC.color(a[T]),v=y,b=g,y=[],g=[],h=[],void 0!==o[0][c].atom&&(M=o[0][c].atom,"oval"===u?m=_:"rectangle"===u?m=w:"parabola"===u&&(m=x)),m||(m=w);var P,j;for(d=0;d<p;d++)P=c<f-1?o[d][c+1].clone().sub(o[d][c]):o[d][c-1].clone().sub(o[d][c]).negate(),j=d<p-1?o[d+1][c].clone().sub(o[d][c]):o[d-1][c].clone().sub(o[d][c]).negate(),h[d]=j.cross(P).normalize().multiplyScalar(s*m[d]);for(d=0;d<p;d++)y[d]=o[d][c].clone().add(h[d].clone().negate());for(d=0;d<p;d++)g[d]=o[d][c].clone().add(h[d]);var I=O.vertexArray,D=O.colorArray,N=O.faceArray;for(C=O.vertices,k=3*C,d=0;d<p;d++)I[k+3*d+0]=y[d].x,I[k+3*d+1]=y[d].y,I[k+3*d+2]=y[d].z;for(d=0;d<p;d++)I[k+3*d+0+3*p]=g[p-1-d].x,I[k+3*d+1+3*p]=g[p-1-d].y,I[k+3*d+2+3*p]=g[p-1-d].z;for(d=0;d<2*p;++d)D[k+3*d+0]=A.r,D[k+3*d+1]=A.g,D[k+3*d+2]=A.b;if(c>0){for(d=0;d<2*p;d++){var R=[C+S[d][0],C+S[d][1],C+S[d][2],C+S[d][3]];E=O.faceidx,N[E]=R[0],N[E+1]=R[1],N[E+2]=R[3],N[E+3]=R[1],N[E+4]=R[2],N[E+5]=R[3],O.faceidx+=6}if(M.clickable){var L=[];L.push(new n.Triangle(v[0],y[0],y[p-1])),L.push(new n.Triangle(v[0],y[p-1],v[p-1])),L.push(new n.Triangle(v[p-1],y[p-1],g[p-1])),L.push(new n.Triangle(v[p-1],g[p-1],b[p-1])),L.push(new n.Triangle(g[0],b[0],b[p-1])),L.push(new n.Triangle(g[p-1],g[0],b[p-1])),L.push(new n.Triangle(y[0],v[0],b[0])),L.push(new n.Triangle(g[0],y[0],b[0]));for(d in L)M.intersectionShape.triangle.push(L[d])}}O.vertices+=2*p,M}var I=O.vertexArray,D=O.colorArray,N=O.faceArray;for(C=O.vertices,k=3*C,E=O.faceidx,c=0;c<p-1;c++){var R=[c,c+1,2*p-2-c,2*p-1-c];E=O.faceidx,N[E]=R[0],N[E+1]=R[1],N[E+2]=R[3],N[E+3]=R[1],N[E+4]=R[2],N[E+5]=R[3],O.faceidx+=6}for(c=0;c<p-1;c++){var R=[C-1-c,C-2-c,C-2*p+c+1,C-2*p+c];E=O.faceidx,N[E]=R[0],N[E+1]=R[1],N[E+2]=R[3],N[E+3]=R[1],N[E+4]=R[2],N[E+5]=R[3],O.faceidx+=6}}},o=function(r,o,a,i,s,l){if(!(o.length<2)){var u,c;if(u=o[0],c=o[o.length-1],i=i||axisDIV,u=e(u,i),c=e(c,i),!s)return t(r,u,c,a);var d,p,f,h,m,y,g,v,b,_,w,x,S,C,k,E,M,A,T,O=[],P=[[0,2,-6,-8],[-4,-2,6,4],[7,-1,-5,3],[-3,5,1,-7]];for(S=0,C=u.length;S<C;S++){if(_=Math.round(S*(a.length-1)/C),b=n.CC.color(a[_]),O.push(p=u[S]),O.push(p),O.push(f=c[S]),O.push(f),S<C-1){var j=u[S+1].clone().sub(u[S]);d=c[S].clone().sub(u[S]).cross(j).normalize().multiplyScalar(s)}O.push(h=u[S].clone().add(d)),O.push(h),O.push(m=c[S].clone().add(d)),O.push(m),void 0!==p.atom&&(w=p.atom),T=r.updateGeoGroup(8);var I=T.vertexArray,D=T.colorArray,N=T.faceArray;for(y=T.vertices,g=3*y,I[g]=p.x,I[g+1]=p.y,I[g+2]=p.z,I[g+3]=p.x,I[g+4]=p.y,I[g+5]=p.z,I[g+6]=f.x,I[g+7]=f.y,I[g+8]=f.z,I[g+9]=f.x,I[g+10]=f.y,I[g+11]=f.z,I[g+12]=h.x,I[g+13]=h.y,I[g+14]=h.z,I[g+15]=h.x,I[g+16]=h.y,I[g+17]=h.z,I[g+18]=m.x,I[g+19]=m.y,I[g+20]=m.z,I[g+21]=m.x,I[g+22]=m.y,I[g+23]=m.z,k=0;k<8;++k)D[g+3*k]=b.r,D[g+1+3*k]=b.g,D[g+2+3*k]=b.b;if(S>0){var R=void 0!==x&&void 0!==w&&x.serial!==w.serial;for(k=0;k<4;k++){var L=[y+P[k][0],y+P[k][1],y+P[k][2],y+P[k][3]];if(v=T.faceidx,N[v]=L[0],N[v+1]=L[1],N[v+2]=L[3],N[v+3]=L[1],N[v+4]=L[2],N[v+5]=L[3],T.faceidx+=6,w.clickable||x.clickable){var F=O[L[3]].clone(),z=O[L[0]].clone(),B=O[L[2]].clone(),V=O[L[1]].clone();if(F.atom=O[L[3]].atom||null,B.atom=O[L[2]].atom||null,z.atom=O[L[0]].atom||null,V.atom=O[L[1]].atom||null,R){var G=F.clone().add(z).multiplyScalar(.5),H=B.clone().add(V).multiplyScalar(.5),U=F.clone().add(V).multiplyScalar(.5);k%2==0?(x.clickable&&(E=new n.Triangle(G,U,F),M=new n.Triangle(H,B,U),A=new n.Triangle(U,B,F),x.intersectionShape.triangle.push(E),x.intersectionShape.triangle.push(M),x.intersectionShape.triangle.push(A)),w.clickable&&(E=new n.Triangle(z,V,U),M=new n.Triangle(V,H,U),A=new n.Triangle(z,U,G),w.intersectionShape.triangle.push(E),w.intersectionShape.triangle.push(M),w.intersectionShape.triangle.push(A))):(w.clickable&&(E=new n.Triangle(G,U,F),M=new n.Triangle(H,B,U),A=new n.Triangle(U,B,F),w.intersectionShape.triangle.push(E),w.intersectionShape.triangle.push(M),w.intersectionShape.triangle.push(A)),x.clickable&&(E=new n.Triangle(z,V,U),M=new n.Triangle(V,H,U),A=new n.Triangle(z,U,G),x.intersectionShape.triangle.push(E),x.intersectionShape.triangle.push(M),x.intersectionShape.triangle.push(A)))}else w.clickable&&(E=new n.Triangle(z,V,F),M=new n.Triangle(V,B,F),w.intersectionShape.triangle.push(E),w.intersectionShape.triangle.push(M))}}}T.vertices+=8,x=w}var q=O.length-8;T=r.updateGeoGroup(8);var I=T.vertexArray,D=T.colorArray,N=T.faceArray;for(y=T.vertices,g=3*y,v=T.faceidx,S=0;S<4;S++){O.push(O[2*S]),O.push(O[q+2*S]);var W=O[2*S],Z=O[q+2*S];I[g+6*S]=W.x,I[g+1+6*S]=W.y,I[g+2+6*S]=W.z,I[g+3+6*S]=Z.x,I[g+4+6*S]=Z.y,I[g+5+6*S]=Z.z,D[g+6*S]=b.r,D[g+1+6*S]=b.g,D[g+2+6*S]=b.b,D[g+3+6*S]=b.r,D[g+4+6*S]=b.g,D[g+5+6*S]=b.b}q+=8,E=[y,y+2,y+6,y+4],M=[y+1,y+5,y+7,y+3],N[v]=E[0],N[v+1]=E[1],N[v+2]=E[3],N[v+3]=E[1],N[v+4]=E[2],N[v+5]=E[3],N[v+6]=M[0],N[v+7]=M[1],N[v+8]=M[3],N[v+9]=M[1],N[v+10]=M[2],N[v+11]=M[3],T.faceidx+=12,T.vertices+=8}},a=function(t,r,o,a,i){if(0!==r.length){i=void 0===i?5:i;var s=new n.Geometry,l=(e(r,i),new n.LineBasicMaterial({linewidth:o}));l.vertexColors=!0;var u=new n.Line(s,l);u.type=n.LineStrip,t.add(u)}},i=function(e,t,n,a,i,s,l){l&&"default"!==l||(l="rectangle"),"edged"===l?o(e,t,n,a,i):"rectangle"!==l&&"oval"!==l&&"parabola"!==l||r(e,t,n,a,i,0,l)},s=function(e){return e&&"C"===e.elem&&"CA"===e.atom},l=function(e,t){if(e&&t&&e.chain===t.chain){if(e.reschain===t.reschain&&(e.resi===t.resi||e.resi===t.resi-1))return!0;if(e.resi<t.resi){var n=e.x-t.x,r=e.y-t.y,o=e.z-t.z;if(n*n+r*r+o*o<16)return!0}}return!1},u=function(e,t,r,o,a){if(null!=t&&0!=t.vertices){a&&(t.initTypedArrays(),t.setUpNormals());var i=new n.MeshDoubleLambertMaterial;i.vertexColors=n.FaceColors,"number"==typeof r&&r>=0&&r<1&&(i.transparent=!0,i.opacity=r),i.outline=o;var s=new n.Mesh(t,i);e.add(s)}},c={C:!0,CA:!0,O:!0,P:!0,OP2:!0,O2P:!0,"O5'":!0,"O3'":!0,"C5'":!0,"C2'":!0,"O5*":!0,"O3*":!0,"C5*":!0,"C2*":!0,N1:!0,N3:!0},d={DA:!0,DG:!0,A:!0,G:!0},p={DT:!0,DC:!0,U:!0,C:!0,T:!0},f={DA:!0,DG:!0,A:!0,G:!0,DT:!0,DC:!0,U:!0,C:!0,T:!0},h=function(e,t,r,o,h,y,g){y=y||5,g=g||5;var v,b,_,w,x,S,C,k,E,M,A,T,O,P,j,I,D,N,R=new n.Geometry(!0),L=new n.Geometry(!0),F=[],z=[],B=1,V=!1,G={};for(var H in n.Gradient.builtinGradients)n.Gradient.builtinGradients.hasOwnProperty(H)&&(G[H]=new n.Gradient.builtinGradients[H](r[0],r[1]));for(var U=(function(e,t){return r&&"spectrum"===t.color?t.colorscheme in G?G[t.colorscheme].valueToHex(e.resi):G.sinebow.valueToHex(e.resi):n.getColorFromStyle(e,t).getHex()}),k=0;k<y;k++)z[k]=[];var q=!1,W=!1;k=0;var Z=[];for(k in t){if(w=t[k],"C"===w.elem&&"CA"===w.atom){var Y=l(_,w);Y&&"s"===w.ss?q=!0:q&&(_&&b&&_.style.cartoon.arrows&&b.style.cartoon.arrows&&(_.ss="arrow end",b.ss="arrow start"),q=!1),Y&&"h"===_.ss?(!W&&w.style.cartoon.tubes&&(w.ss="tube start"),W=!0):W&&"tube start"!==_.ss&&(b&&b.style.cartoon.tubes&&(b.ss="tube end"),W=!1),b=_,_=w}w&&w.atom in c&&Z.push(w)}var K=function(t){for(var r=0;!C&&r<y;r++)a(e,z[r],1,0,g);if(o&&z[0].length>0&&i(L,z,F,g,C,0,z.style),t){var s=[];for(r=0;r<y;r++)s[r]=z[r][z[r].length-1];var l=F[F.length-1]}for(z=[],r=0;r<y;r++)z[r]=[];if(F=[],t){for(r=0;r<y;r++)z[r].push(s[r]);F.push(l)}u(e,L,B,V,!0),u(e,R,B,V,!1),L=new n.Geometry(!0),R=new n.Geometry(!0)};_=void 0;for(var X=0;X<Z.length;X++){w=Z[X];var Q=w.resn.trim(),J=Q in f;if(B=1,v=w.style.cartoon,_&&_.style.cartoon&&(B=_.style.cartoon.opacity),_&&_.style.cartoon&&_.style.cartoon.outline&&(V=_.style.cartoon.outline),!_||!_.style.cartoon||w.style.cartoon&&_.style.cartoon.opacity==w.style.cartoon.opacity||K(_.chain==w.chain),z.length&&z[0].length>3e4/y/g/2&&K(!0),"trace"===v.style){if(w.hetflag);else if("C"===w.elem&&"CA"===w.atom||J&&"P"===w.atom){if(S=U(w,v),C=$.isNumeric(v.thickness)?v.thickness:.4,l(_,w))if(S==x){var ee=n.CC.color(S);n.GLDraw.drawCylinder(R,_,w,C,ee,2,2)}else{var te=(new n.Vector3).addVectors(_,w).multiplyScalar(.5),ne=n.CC.color(x),re=n.CC.color(S);n.GLDraw.drawCylinder(R,_,te,C,ne,2,0),n.GLDraw.drawCylinder(R,te,w,C,re,0,2)}_=w,x=S}}else{if(s(w)||J&&("P"===w.atom||0==w.atom.indexOf("O5"))){if(N){if("tube end"!==w.ss)continue;N=!1,D=new n.Vector3(w.x,w.y,w.z),n.GLDraw.drawCylinder(R,I,D,2,n.CC.color(x),1,1),w.ss="h"}if(_&&(!l(_,w)||"tube start"===_.ss)){for("tube start"===_.ss&&(N=!0,I=new n.Vector3(_.x,_.y,_.z),_.ss="h"),j&&(P=T?(new n.Vector3).addVectors(_,T).multiplyScalar(.5):new n.Vector3(_.x,_.y,_.z),n.GLDraw.drawCylinder(R,P,j,.4,n.CC.color(j.color),0,2),m(z,y,!h,T,O,A,_,Z,X),F.push(S),P=null,j=null),k=0;!C&&k<y;k++)a(e,z[k],1,0,g);for(o&&z[0].length>0&&i(L,z,F,g,C,0,z.style),z=[],k=0;k<y;k++)z[k]=[];F=[]}if(void 0===_||_.rescode!=w.rescode||_.resi!=w.resi){if(j){P=(new n.Vector3).addVectors(_,w).multiplyScalar(.5);var oe=P.clone().sub(j).multiplyScalar(.02);P.add(oe),n.GLDraw.drawCylinder(R,P,j,.4,n.CC.color(j.color),0,2),P=null,j=null}S=U(w,v),F.push(S),C=$.isNumeric(v.thickness)?v.thickness:.4,_=w,E=new n.Vector3(_.x,_.y,_.z),E.resi=_.resi,x=S}!0!==w.clickable||void 0!==w.intersectionShape&&void 0!==w.intersectionShape.triangle||(w.intersectionShape={sphere:null,cylinder:[],line:[],triangle:[]})}else s(_)&&"O"===w.atom||J&&"P"===_.atom&&("OP2"===w.atom||"O2P"===w.atom)||J&&0==_.atom.indexOf("O5")&&0==w.atom.indexOf("C5")?(M=new n.Vector3(w.x,w.y,w.z),M.resi=w.resi,"OP2"!==w.atom&&"O2P"!==w.atom||(O=new n.Vector3(w.x,w.y,w.z))):J&&0==w.atom.indexOf("O3")?T=new n.Vector3(w.x,w.y,w.z):("N1"===w.atom&&Q in d||"N3"===w.atom&&Q in p)&&(j=new n.Vector3(w.x,w.y,w.z),j.color=n.getColorFromStyle(w,v).getHex());M&&E&&M.resi===E.resi&&(m(z,y,!h,E,M,A,_,Z,X),A=M,E=null,M=null,F.push(S))}}j&&(P=T?(new n.Vector3).addVectors(_,T).multiplyScalar(.5):new n.Vector3(_.x,_.y,_.z),n.GLDraw.drawCylinder(R,P,j,.4,n.CC.color(j.color),0,2),m(z,y,!h,T,O,A,_,Z,X),F.push(S)),K()},m=function(e,t,r,o,a,i,s,l,u){var c,d,p,f,h,m;if(o&&a&&s){var y=a.sub(o);y.normalize();for(var g=l[u],d=u+1;d<l.length&&(g=l[d],g.atom!=s.atom);d++);if(g=g?new n.Vector3(g.x,g.y,g.z):new n.Vector3(0,0,0),g.sub(o),"arrow start"===s.ss){var v=g.clone().multiplyScalar(.3).cross(a);o.add(v);var b=g.clone().cross(y).normalize();y.rotateAboutVector(b,.43)}for(s.style.cartoon.ribbon?c=s.style.cartoon.thickness||.4:s.style.cartoon.width?c=s.style.cartoon.width:"c"===s.ss?c="P"===s.atom?.8:.5:"arrow start"===s.ss?(c=1.3,h=!0):c="arrow end"===s.ss?.5:"h"===s.ss&&s.style.cartoon.tubes||"tube start"===s.ss?.5:1.3,null!=i&&y.dot(i)<0&&y.negate(),y.multiplyScalar(c),d=0;d<t;d++)p=2*d/(t-1)-1,f=new n.Vector3(o.x+p*y.x,o.y+p*y.y,o.z+p*y.z),f.atom=s,r&&"s"===s.ss&&(f.smoothen=!0),e[d].push(f);if(h)for(y.multiplyScalar(2),d=0;d<t;d++)p=2*d/(t-1)-1,f=new n.Vector3(o.x+p*y.x,o.y+p*y.y,o.z+p*y.z),f.atom=s,f.smoothen=!1,f.skip=!0,e[d].push(f);return m=s.style.cartoon.style||"default",e.style?e.style!=m&&(console.log("Warning: a cartoon chain's strand-style is ambiguous"),e.style="default"):e.style=m,"arrow start"!==s.ss&&"arrow end"!==s.ss||(s.ss="s"),h}};return function(e,t,n,r){r=parseInt(5*parseFloat(r))||5,h(e,t,n,!0,!1,r,r)}}();var n=n||{};n.GLDraw=function(){var e={},t=function(){var e=new n.Vector3;return function(t){e.set(t[0],t[1],t[2]);var n,r,o,a,i,s=e.x,l=e.y,u=e.z,c=Math.sqrt(s*s+l*l);c<1e-4?(r=0,o=1):(r=-s/c,o=l/c),l=-r*s+o*l,n=Math.sqrt(l*l+u*u),n<1e-4?(a=0,i=1):(a=u/n,i=l/n);var d=new Float32Array(9);return d[0]=o,d[1]=r,d[2]=0,d[3]=-r*i,d[4]=o*i,d[5]=a,d[6]=r*a,d[7]=-o*a,d[8]=i,d}}(),r=function(){var e,t=[],r=Math.pow(2,4),o=2,a=Math.pow(2,o),i=r/a;for(t[0]=new n.Vector3(-1,0,0),t[i]=new n.Vector3(0,0,1),t[2*i]=new n.Vector3(1,0,0),t[3*i]=new n.Vector3(0,0,-1),o=3;o<=4;o++){for(a=Math.pow(2,o-1),i=r/a,e=0;e<a-1;e++)t[i/2+e*i]=t[e*i].clone().add(t[(e+1)*i]).normalize();e=a-1,t[i/2+e*i]=t[e*i].clone().add(t[0]).normalize()}return t}(),o={cache:{},getVerticesForRadius:function(e,t,o){if(void 0!==typeof this.chache&&void 0!==this.cache[e]&&void 0!==this.cache[e][t+o])return this.cache[e][t+o];for(var a,i=(new n.Vector3(0,1,0),r.length),s=[],l=[],u=0;u<i;u++)s.push(r[u].clone().multiplyScalar(e)),s.push(r[u].clone().multiplyScalar(e)),a=r[u].clone().normalize(),l.push(a),l.push(a);var c,d,p=[],f=i,h=2*Math.PI,m=Math.PI,y=!1,g=!1;for(d=0;d<=10;d++){y=0===d||10===d,g=5===d;var v=[],b=[];for(c=0;c<=f;c++)if(g){var _=c<f?2*c:0;b.push(_+1),v.push(_)}else{var w=c/f,x=d/10;if(y&&0!==c)y&&v.push(s.length-1);else if(c<f){var S=new n.Vector3;S.x=-e*Math.cos(0+w*h)*Math.sin(0+x*m),S.y=1==t?0:e*Math.cos(0+x*m),S.z=e*Math.sin(0+w*h)*Math.sin(0+x*m),Math.abs(S.x)<1e-5&&(S.x=0),Math.abs(S.y)<1e-5&&(S.y=0),Math.abs(S.z)<1e-5&&(S.z=0),1===t?(a=new n.Vector3(0,Math.cos(0+x*m),0),a.normalize()):(a=new n.Vector3(S.x,S.y,S.z),a.normalize()),s.push(S),l.push(a),v.push(s.length-1)}else v.push(s.length-f)}g&&p.push(b),p.push(v)}var C={vertices:s,normals:l,verticesRows:p,w:f,h:10};return this.cache[e]={},this.cache[e][t+o]=C,C}};this.caps={NONE:0,FLAT:1,ROUND:2};var a=0;e.drawCylinder=function(e,n,r,i,s,l,u){if(n&&r){a++;var c=u||l;s=s||{r:0,g:0,b:0};var d=[r.x,r.y,r.z];d[0]-=n.x,d[1]-=n.y,d[2]-=n.z;var p,f,h,m,y,g,v=t(d),b=o.getVerticesForRadius(i,u,"to"),_=b.w,w=b.h,x=c?w*_+2:2*_,S=e.updateGeoGroup(x),C=b.vertices,k=b.normals,E=b.verticesRows,M=E[w/2],A=E[w/2+1],T=S.vertices,O=S.vertexArray,P=S.normalArray,j=S.colorArray,I=S.faceArray;for(h=0;h<_;++h){var D=2*h;m=v[0]*C[D].x+v[3]*C[D].y+v[6]*C[D].z,y=v[1]*C[D].x+v[4]*C[D].y+v[7]*C[D].z,g=v[5]*C[D].y+v[8]*C[D].z,p=3*(T+D),f=S.faceidx,O[p]=m+n.x,O[p+1]=y+n.y,O[p+2]=g+n.z,O[p+3]=m+r.x,O[p+4]=y+r.y,O[p+5]=g+r.z,P[p]=m,P[p+3]=m,P[p+1]=y,P[p+4]=y,P[p+2]=g,P[p+5]=g,j[p]=s.r,j[p+3]=s.r,j[p+1]=s.g,j[p+4]=s.g,j[p+2]=s.b,j[p+5]=s.b,I[f]=A[h]+T,I[f+1]=A[h+1]+T,I[f+2]=M[h]+T,I[f+3]=M[h]+T,I[f+4]=A[h+1]+T,I[f+5]=M[h+1]+T,S.faceidx+=6}if(c){var N,R,L,F,z,B,V,G,H,U,q,W,Z,Y,K,X,Q,J,$,ee,te,ne,re,oe,ae,ie,se,le,ue,ce,de,pe,fe=u?0:w/2,he=l?w+1:w/2+1;for(y=fe;y<he;y++)if(y!==w/2){var me=y<=w/2?r:n,ye=o.getVerticesForRadius(i,u,"to"),ge=o.getVerticesForRadius(i,l,"from");for(me===r?(C=ye.vertices,k=ye.normals,E=ye.verticesRows):me==n&&(C=ge.vertices,k=ge.normals,E=ge.verticesRows),m=0;m<_;m++)f=S.faceidx,N=E[y][m+1],ue=3*(N+T),R=E[y][m],ce=3*(R+T),L=E[y+1][m],de=3*(L+T),F=E[y+1][m+1],pe=3*(F+T),z=v[0]*C[N].x+v[3]*C[N].y+v[6]*C[N].z,B=v[0]*C[R].x+v[3]*C[R].y+v[6]*C[R].z,V=v[0]*C[L].x+v[3]*C[L].y+v[6]*C[L].z,G=v[0]*C[F].x+v[3]*C[F].y+v[6]*C[F].z,H=v[1]*C[N].x+v[4]*C[N].y+v[7]*C[N].z,U=v[1]*C[R].x+v[4]*C[R].y+v[7]*C[R].z,q=v[1]*C[L].x+v[4]*C[L].y+v[7]*C[L].z,W=v[1]*C[F].x+v[4]*C[F].y+v[7]*C[F].z,Z=v[5]*C[N].y+v[8]*C[N].z,Y=v[5]*C[R].y+v[8]*C[R].z,K=v[5]*C[L].y+v[8]*C[L].z,X=v[5]*C[F].y+v[8]*C[F].z,O[ue]=z+me.x,O[ce]=B+me.x,O[de]=V+me.x,O[pe]=G+me.x,O[ue+1]=H+me.y,O[ce+1]=U+me.y,O[de+1]=q+me.y,O[pe+1]=W+me.y,O[ue+2]=Z+me.z,O[ce+2]=Y+me.z,O[de+2]=K+me.z,O[pe+2]=X+me.z,j[ue]=s.r,j[ce]=s.r,j[de]=s.r,j[pe]=s.r,j[ue+1]=s.g,j[ce+1]=s.g,j[de+1]=s.g,j[pe+1]=s.g,j[ue+2]=s.b,j[ce+2]=s.b,j[de+2]=s.b,j[pe+2]=s.b,Q=v[0]*k[N].x+v[3]*k[N].y+v[6]*k[N].z,J=v[0]*k[R].x+v[3]*k[R].y+v[6]*k[R].z,$=v[0]*k[L].x+v[3]*k[L].y+v[6]*k[L].z,ee=v[0]*k[F].x+v[3]*k[F].y+v[6]*k[F].z,te=v[1]*k[N].x+v[4]*k[N].y+v[7]*k[N].z,ne=v[1]*k[R].x+v[4]*k[R].y+v[7]*k[R].z,re=v[1]*k[L].x+v[4]*k[L].y+v[7]*k[L].z,oe=v[1]*k[F].x+v[4]*k[F].y+v[7]*k[F].z,ae=v[5]*k[N].y+v[8]*k[N].z,ie=v[5]*k[R].y+v[8]*k[R].z,se=v[5]*k[L].y+v[8]*k[L].z,le=v[5]*k[F].y+v[8]*k[F].z,0===y?(P[ue]=Q,P[de]=$,P[pe]=ee,P[ue+1]=te,P[de+1]=re,P[pe+1]=oe,P[ue+2]=ae,P[de+2]=se,P[pe+2]=le,I[f]=N+T,I[f+1]=L+T,I[f+2]=F+T,S.faceidx+=3):y===he-1?(P[ue]=Q,P[ce]=J,P[de]=$,P[ue+1]=te,P[ce+1]=ne,P[de+1]=re,P[ue+2]=ae,P[ce+2]=ie,P[de+2]=se,I[f]=N+T,I[f+1]=R+T,I[f+2]=L+T,S.faceidx+=3):(P[ue]=Q,P[ce]=J,P[pe]=ee,P[ue+1]=te,P[ce+1]=ne,P[pe+1]=oe,P[ue+2]=ae,P[ce+2]=ie,P[pe+2]=le,P[ce]=J,P[de]=$,P[pe]=ee,P[ce+1]=ne,P[de+1]=re,P[pe+1]=oe,P[ce+2]=ie,P[de+2]=se,P[pe+2]=le,I[f]=N+T,I[f+1]=R+T,I[f+2]=F+T,I[f+3]=R+T,I[f+4]=L+T,I[f+5]=F+T,S.faceidx+=6)}}S.vertices+=x}},e.drawCone=function(e,o,a,i,s){if(o&&a){s=s||{r:0,g:0,b:0};var l=[a.x,a.y,a.z];l.x-=o.x,l.y-=o.y,l.z-=o.z;var u,c,d,p,f,h,m=t(l),y=r.length,g=r,v=y+2,b=e.updateGeoGroup(v),_=b.vertices,w=b.vertexArray,x=b.normalArray,S=b.colorArray,C=b.faceArray,u=3*_,k=new n.Vector3(l[0],l[1],l[2]).normalize();for(w[u]=o.x,w[u+1]=o.y,w[u+2]=o.z,x[u]=-k.x,x[u+1]=-k.y,x[u+2]=-k.z,S[u]=s.r,S[u+1]=s.g,S[u+2]=s.b,w[u+3]=a.x,w[u+4]=a.y,w[u+5]=a.z,x[u+3]=k.x,x[u+4]=k.y,x[u+5]=k.z,S[u+3]=s.r,S[u+4]=s.g,S[u+5]=s.b,u+=6,d=0;d<y;++d){var E=g[d].clone();E.multiplyScalar(i),p=m[0]*E.x+m[3]*E.y+m[6]*E.z,f=m[1]*E.x+m[4]*E.y+m[7]*E.z,h=m[5]*E.y+m[8]*E.z,w[u]=p+o.x,w[u+1]=f+o.y,w[u+2]=h+o.z,x[u]=p,x[u+1]=f,x[u+2]=h,S[u]=s.r,S[u+1]=s.g,S[u+2]=s.b,u+=3}b.vertices+=y+2;var c=b.faceidx;for(d=0;d<y;d++){var M=_+2+d,A=_+2+(d+1)%y;C[c]=M,C[c+1]=A,C[c+2]=_,c+=3,C[c]=M,C[c+1]=A,C[c+2]=_+1,c+=3}b.faceidx+=6*y}};var i={cache:{},getVerticesForRadius:function(e){if(void 0!==this.cache[e])return this.cache[e];var t={vertices:[],verticesRows:[],normals:[]},r=16,o=10;e<1&&(r=10,o=8);var a,i,s=2*Math.PI,l=Math.PI;for(i=0;i<=o;i++){var u=[];for(a=0;a<=r;a++){var c=a/r,d=i/o,p={};p.x=-e*Math.cos(0+c*s)*Math.sin(0+d*l),p.y=e*Math.cos(0+d*l),p.z=e*Math.sin(0+c*s)*Math.sin(0+d*l);var f=new n.Vector3(p.x,p.y,p.z);f.normalize(),t.vertices.push(p),t.normals.push(f),u.push(t.vertices.length-1)}t.verticesRows.push(u)}return this.cache[e]=t,t}};return e.drawSphere=function(e,t,r,o){for(var a,s,l=(new n.Vector3(t.x,t.y,t.z),i.getVerticesForRadius(r)),u=l.vertices,c=l.normals,d=e.updateGeoGroup(u.length),p=d.vertices,f=d.vertexArray,h=d.colorArray,m=d.faceArray,y=d.lineArray,g=d.normalArray,v=0,b=u.length;v<b;++v){var _=3*(p+v),w=u[v];f[_]=w.x+t.x,f[_+1]=w.y+t.y,f[_+2]=w.z+t.z,h[_]=o.r,h[_+1]=o.g,h[_+2]=o.b}d.vertices+=u.length;var x=l.verticesRows,S=x.length-1;for(s=0;s<S;s++){var C=x[s].length-1;for(a=0;a<C;a++){var k=d.faceidx,E=d.lineidx,M=x[s][a+1]+p,A=3*M,T=x[s][a]+p,O=3*T,P=x[s+1][a]+p,j=3*P,I=x[s+1][a+1]+p,D=3*I,N=c[M-p],R=c[T-p],L=c[P-p],F=c[I-p];Math.abs(u[M-p].y)===r?(g[A]=N.x,g[j]=L.x,g[D]=F.x,g[A+1]=N.y,g[j+1]=L.y,g[D+1]=F.y,g[A+2]=N.z,g[j+2]=L.z,g[D+2]=F.z,m[k]=M,m[k+1]=P,m[k+2]=I,y[E]=M,y[E+1]=P,y[E+2]=M,y[E+3]=I,y[E+4]=P,y[E+5]=I,d.faceidx+=3,d.lineidx+=6):Math.abs(u[P-p].y)===r?(g[A]=N.x,g[O]=R.x,g[j]=L.x,g[A+1]=N.y,g[O+1]=R.y,g[j+1]=L.y,g[A+2]=N.z,g[O+2]=R.z,g[j+2]=L.z,m[k]=M,m[k+1]=T,m[k+2]=P,y[E]=M,y[E+1]=T,y[E+2]=M,y[E+3]=P,y[E+4]=T,y[E+5]=P,d.faceidx+=3,d.lineidx+=6):(g[A]=N.x,g[O]=R.x,g[D]=F.x,g[A+1]=N.y,g[O+1]=R.y,g[D+1]=F.y,g[A+2]=N.z,g[O+2]=R.z,g[D+2]=F.z,g[O]=R.x,g[j]=L.x,g[D]=F.x,g[O+1]=R.y,g[j+1]=L.y,g[D+1]=F.y,g[O+2]=R.z,g[j+2]=L.z,g[D+2]=F.z,m[k]=M,m[k+1]=T,m[k+2]=I,m[k+3]=T,m[k+4]=P,m[k+5]=I,y[E]=M,y[E+1]=T,y[E+2]=M,y[E+3]=I,y[E+4]=T,y[E+5]=P,y[E+6]=P,y[E+7]=I,d.faceidx+=6,d.lineidx+=8)}}},e}();var n=n||{};n.GLModel=function(){function e(s,d){var p=[],f=[],h=s,m=!1,y=null,g=null,v=null,b={},_=new n.Matrix4,w=!0,x=n.elementColors.defaultColor,S=d||n.elementColors.defaultColors,C=function(e,t){var n=1.5;return void 0!==t.radius?n=t.radius:o[e.elem]&&(n=o[e.elem]),void 0!==t.scale&&(n*=t.scale),n},k=function(e,t){if(e.style.cross){var o=e.style.cross;if(!o.hidden){var a=o.linewidth||r;t[a]||(t[a]=new n.Geometry);var i=t[a].updateGeoGroup(6),s=C(e,o),l=[[s,0,0],[-s,0,0],[0,s,0],[0,-s,0],[0,0,s],[0,0,-s]],u=e.clickable||e.hoverable;u&&void 0===e.intersectionShape&&(e.intersectionShape={sphere:[],cylinder:[],line:[]});for(var c=n.getColorFromStyle(e,o),d=i.vertexArray,p=i.colorArray,f=0;f<6;f++){var h=3*i.vertices;if(i.vertices++,d[h]=e.x+l[f][0],d[h+1]=e.y+l[f][1],d[h+2]=e.z+l[f][2],p[h]=c.r,p[h+1]=c.g,p[h+2]=c.b,u){var m=new n.Vector3(l[f][0],l[f][1],l[f][2]);m.multiplyScalar(.1),m.set(m.x+e.x,m.y+e.y,m.z+e.z),e.intersectionShape.line.push(m)}}}}},E=function(e,t,r){var o=new n.Vector3(e.x,e.y,e.z),a=new n.Vector3(t.x,t.y,t.z),i=a.clone(),s=null;i.sub(o);var l,u,c,d,f;return 1===e.bonds.length?1===t.bonds.length?(s=i.clone(),Math.abs(s.x)>1e-4?s.y+=1:s.x+=1):(l=(r+1)%t.bonds.length,u=t.bonds[l],c=p[u],d=new n.Vector3(c.x,c.y,c.z),f=d.clone(),f.sub(o),s=f.clone(),s.cross(i)):(l=(r+1)%e.bonds.length,u=e.bonds[l],c=p[u],d=new n.Vector3(c.x,c.y,c.z),f=d.clone(),f.sub(o),s=f.clone(),s.cross(i)),s.lengthSq()<.01&&(s=i.clone(),Math.abs(s.x)>1e-4?s.y+=1:s.x+=1),s.cross(i),s.normalize(),s},M=function(e,t,n,r,o,a){e[n]=r.x,e[n+1]=r.y,e[n+2]=r.z,t[n]=a.r,t[n+1]=a.g,t[n+2]=a.b,e[n+3]=o.x,e[n+4]=o.y,e[n+5]=o.z,t[n+3]=a.r,t[n+4]=a.g,t[n+5]=a.b},A=function(e,t,o){if(e.style.line){var a=e.style.line;if(!a.hidden){var i,s,l,u,c=a.linewidth||r;o[c]||(o[c]=new n.Geometry);for(var d=o[c].updateGeoGroup(6*e.bonds.length),p=d.vertexArray,f=d.colorArray,h=0;h<e.bonds.length;h++){var m=e.bonds[h],y=t[m];if(y.style.line&&!(e.serial>=y.serial)){var g=new n.Vector3(e.x,e.y,e.z),v=new n.Vector3(y.x,y.y,y.z),b=g.clone().add(v).multiplyScalar(.5),_=!1;(e.clickable||e.hoverable)&&(void 0===e.intersectionShape&&(e.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),e.intersectionShape.line.push(g),e.intersectionShape.line.push(b),y.intersectionShape.line.push(b),y.intersectionShape.line.push(v));var w=n.getColorFromStyle(e,e.style.line),x=n.getColorFromStyle(y,y.style.line);if(e.bondStyles&&e.bondStyles[h]){var S=e.bondStyles[h];if(!S.iswire)continue;S.radius&&(bondR=S.radius),S.singleBond&&(_=!0),void 0!==S.color1&&(w=n.CC.color(S.color1)),void 0!==S.color2&&(x=n.CC.color(S.color2))}var C=3*d.vertices;if(e.bondOrder[h]>1&&e.bondOrder[h]<4&&!_){var k=E(e,y,h),A=v.clone();if(A.sub(g),2==e.bondOrder[h])if(k.multiplyScalar(.1),i=g.clone(),i.add(k),s=g.clone(),s.sub(k),l=i.clone(),l.add(A),u=s.clone(),u.add(A),w==x)d.vertices+=4,M(p,f,C,i,l,w),M(p,f,C+6,s,u,w);else{d.vertices+=8,A.multiplyScalar(.5);var T=i.clone();T.add(A);var O=s.clone();O.add(A),M(p,f,C,i,T,w),M(p,f,C+6,T,l,x),M(p,f,C+12,s,O,w),M(p,f,C+18,O,u,x)}else if(3==e.bondOrder[h])if(k.multiplyScalar(.1),i=g.clone(),i.add(k),s=g.clone(),s.sub(k),l=i.clone(),l.add(A),u=s.clone(),u.add(A),w==x)d.vertices+=6,M(p,f,C,g,v,w),M(p,f,C+6,i,l,w),M(p,f,C+12,s,u,w);else{d.vertices+=12,A.multiplyScalar(.5);var T=i.clone();T.add(A);var O=s.clone();O.add(A),M(p,f,C,g,b,w),M(p,f,C+6,b,v,x),M(p,f,C+12,i,T,w),M(p,f,C+18,T,l,x),M(p,f,C+24,s,O,w),M(p,f,C+30,O,u,x)}}else w==x?(d.vertices+=2,M(p,f,C,g,v,w)):(d.vertices+=4,M(p,f,C,g,b,w),M(p,f,C+6,b,v,x))}}}}},T=function(e,t){if(e.style.sphere){var r=e.style.sphere;if(!r.hidden){var o=n.getColorFromStyle(e,r),a=C(e,r);if((!0===e.clickable||e.hoverable)&&void 0!==e.intersectionShape){var i=new n.Vector3(e.x,e.y,e.z);e.intersectionShape.sphere.push(new n.Sphere(i,a))}n.GLDraw.drawSphere(t,e,a,o)}}},O=function(e,t){if(e.style.sphere){var r=e.style.sphere;if(!r.hidden){var o=C(e,r),a=n.getColorFromStyle(e,r),i=t.updateGeoGroup(1),s=i.vertices,l=3*s,u=i.vertexArray,c=i.colorArray,d=i.radiusArray;u[l]=e.x,u[l+1]=e.y,u[l+2]=e.z;var c=(i.normalArray,i.colorArray);if(c[l]=a.r,c[l+1]=a.g,c[l+2]=a.b,d[s]=o,(!0===e.clickable||e.hoverable)&&void 0!==e.intersectionShape){var p=new n.Vector3(e.x,e.y,e.z);e.intersectionShape.sphere.push(new n.Sphere(p,o))}i.vertices+=1}}},P=function(e,t,n,r){for(var o=e.updateGeoGroup(4),a=o.vertices,i=3*a,s=o.vertexArray,l=o.colorArray,u=0;u<4;u++)s[i+3*u]=t.x,s[i+3*u+1]=t.y,s[i+3*u+2]=t.z;for(var c=o.normalArray,l=o.colorArray,u=0;u<4;u++)l[i+3*u]=r.r,l[i+3*u+1]=r.g,l[i+3*u+2]=r.b;c[i+0]=-n,c[i+1]=n,c[i+2]=0,c[i+3]=-n,c[i+4]=-n,c[i+5]=0,c[i+6]=n,c[i+7]=-n,c[i+8]=0,c[i+9]=n,c[i+10]=n,c[i+11]=0,o.vertices+=4;var d=o.faceArray,p=o.faceidx;d[p+0]=a,d[p+1]=a+1,d[p+2]=a+2,d[p+3]=a+2,d[p+4]=a+3,d[p+5]=a,o.faceidx+=6},j=function(e,t){if(e.style.sphere){var r=e.style.sphere;if(!r.hidden){var o=C(e,r),a=n.getColorFromStyle(e,r);if((!0===e.clickable||e.hoverable)&&void 0!==e.intersectionShape){var i=new n.Vector3(e.x,e.y,e.z);e.intersectionShape.sphere.push(new n.Sphere(i,o))}P(t,e,o,a)}}},I=function(e,t,n,r,o,a,i){for(var s=e.updateGeoGroup(4),l=s.vertices,u=3*l,c=s.vertexArray,d=s.colorArray,p=s.radiusArray,f=s.normalArray,h=o.r,m=o.g,y=o.b,g=u,v=0;v<4;v++)c[g]=t.x,f[g]=n.x,d[g]=h,g++,c[g]=t.y,f[g]=n.y,d[g]=m,g++,c[g]=t.z,f[g]=n.z,d[g]=v<2?y:function(e){var t=-e;return 0==t&&(t=-1e-4),t}(y),g++;s.vertices+=4,p[l]=-r,p[l+1]=r,p[l+2]=-r,p[l+3]=r;var b=s.faceArray,_=s.faceidx;b[_+0]=l,b[_+1]=l+1,b[_+2]=l+2,b[_+3]=l+2,b[_+4]=l+3,b[_+5]=l,s.faceidx+=6},D=function(e,t,r){if(e.style.stick){var o=e.style.stick;if(!o.hidden){var a,i,s=o.radius||.25,l=s,u=o.singleBonds||!1,c=0,d=0,p=n.getColorFromStyle(e,o);!e.capDrawn&&e.bonds.length<4&&(c=2);var f=n.GLDraw.drawCylinder;r.imposter&&(f=I);for(var h=0;h<e.bonds.length;h++){var m=e.bonds[h],y=t[m];if(e.serial<y.serial){var g=y.style;if(!g.stick)continue;var v=n.getColorFromStyle(y,g.stick);l=s;var b=u;if(e.bondStyles&&e.bondStyles[h]){var _=e.bondStyles[h];if(_.iswire)continue;_.radius&&(l=_.radius),_.singleBond&&(b=!0),void 0!==_.color1&&(p=n.CC.color(_.color1)),void 0!==_.color2&&(v=n.CC.color(_.color2))}var w=new n.Vector3(e.x,e.y,e.z),x=new n.Vector3(y.x,y.y,y.z);if(1===e.bondOrder[h]||b){if(!y.capDrawn&&y.bonds.length<4&&(d=2),p!=v?(a=(new n.Vector3).addVectors(w,x).multiplyScalar(.5),f(r,w,a,l,p,c,0),f(r,a,x,l,v,0,d)):f(r,w,x,l,p,c,d),e.clickable||y.clickable){if(a=(new n.Vector3).addVectors(w,x).multiplyScalar(.5),e.clickable||e.hoverable){var S=new n.Cylinder(w,a,l),C=new n.Sphere(w,l);e.intersectionShape.cylinder.push(S),e.intersectionShape.sphere.push(C)}if(y.clickable||y.hoverable){var k=new n.Cylinder(x,a,l),M=new n.Sphere(x,l);y.intersectionShape.cylinder.push(k),y.intersectionShape.sphere.push(M)}}}else if(e.bondOrder[h]>1){var A=0,T=0;l!=s&&(A=2,T=2);var O=x.clone(),j=null;O.sub(w);var D,N,R,L,F,j=E(e,y,h);if(2==e.bondOrder[h]){var D=l/2.5,j=E(e,y,h);if(j.multiplyScalar(1.5*D),N=w.clone(),N.add(j),R=w.clone(),R.sub(j),L=N.clone(),L.add(O),F=R.clone(),F.add(O),p!=v?(a=(new n.Vector3).addVectors(N,L).multiplyScalar(.5),i=(new n.Vector3).addVectors(R,F).multiplyScalar(.5),f(r,N,a,D,p,A,0),f(r,a,L,D,v,0,T),f(r,R,i,D,p,A,0),f(r,i,F,D,v,0,T)):(f(r,N,L,D,p,A,T),f(r,R,F,D,p,A,T)),e.clickable||y.clickable){if(a=(new n.Vector3).addVectors(N,L).multiplyScalar(.5),i=(new n.Vector3).addVectors(R,F).multiplyScalar(.5),e.clickable||e.hoverable){var z=new n.Cylinder(N,a,D),B=new n.Cylinder(R,i,D);e.intersectionShape.cylinder.push(z),e.intersectionShape.cylinder.push(B)}if(y.clickable||y.hoverable){var V=new n.Cylinder(L,a,D),G=new n.Cylinder(F,i,D);y.intersectionShape.cylinder.push(V),y.intersectionShape.cylinder.push(G)}}}else if(3==e.bondOrder[h]&&(D=l/4,j.cross(O),j.normalize(),j.multiplyScalar(3*D),N=w.clone(),N.add(j),R=w.clone(),R.sub(j),L=N.clone(),L.add(O),F=R.clone(),F.add(O),p!=v?(a=(new n.Vector3).addVectors(N,L).multiplyScalar(.5),i=(new n.Vector3).addVectors(R,F).multiplyScalar(.5),mp3=(new n.Vector3).addVectors(w,x).multiplyScalar(.5),f(r,N,a,D,p,A,0),f(r,a,L,D,v,0,T),f(r,w,mp3,D,p,c,0),f(r,mp3,x,D,v,0,d),f(r,R,i,D,p,A,0),f(r,i,F,D,v,0,T)):(f(r,N,L,D,p,A,T),f(r,w,x,D,p,c,d),f(r,R,F,D,p,A,T)),e.clickable||y.clickable)){if(a=(new n.Vector3).addVectors(N,L).multiplyScalar(.5),i=(new n.Vector3).addVectors(R,F).multiplyScalar(.5),mp3=(new n.Vector3).addVectors(w,x).multiplyScalar(.5),e.clickable||e.hoverable){var z=new n.Cylinder(N.clone(),a.clone(),D),B=new n.Cylinder(R.clone(),i.clone(),D),H=new n.Cylinder(w.clone(),mp3.clone(),D);e.intersectionShape.cylinder.push(z),e.intersectionShape.cylinder.push(B),e.intersectionShape.cylinder.push(H)}if(y.clickable||y.hoverable){var V=new n.Cylinder(L.clone(),a.clone(),D),G=new n.Cylinder(F.clone(),i.clone(),D),U=new n.Cylinder(x.clone(),mp3.clone(),D);y.intersectionShape.cylinder.push(V),y.intersectionShape.cylinder.push(G),y.intersectionShape.cylinder.push(U)}}}}}for(var q=!1,W=0,Z=!1,h=0;h<e.bonds.length;h++){var b=u;if(e.bondStyles&&e.bondStyles[h]){var _=e.bondStyles[h];_.singleBond&&(b=!0),_.radius&&_.radius!=s&&(Z=!0)}(b||1==e.bondOrder[h])&&W++}if(Z?W>0&&(q=!0):0==W&&e.bonds.length>0&&(q=!0),q){e.style;l=s,r.imposter?P(r.sphereGeometry,e,l,p):n.GLDraw.drawSphere(r,e,l,p)}}}},N=function(e,t){t=t||{};var r=new n.Object3D,o=[],a={},i={},s=T,l=null,u=null;t.supportsImposters?(s=j,l=new n.Geometry(!0),l.imposter=!0,u=new n.Geometry(!0,!0),u.imposter=!0,u.sphereGeometry=l,u.drawnCaps={}):t.supportsAIA?(s=O,l=new n.Geometry(!1,!0,!0),l.instanced=!0,u=new n.Geometry(!0)):(l=new n.Geometry(!0),u=new n.Geometry(!0));var c,d,p,f,h={},m=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(c=0,p=e.length;c<p;c++){var y=e[c];if(y&&y.style){(y.clickable||y.hoverable)&&void 0===y.intersectionShape&&(y.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),f={line:void 0,cross:void 0,stick:void 0,sphere:void 0};for(d in f)y.style[d]?y.style[d].opacity?f[d]=parseFloat(y.style[d].opacity):f[d]=1:f[d]=void 0,h[d]?void 0!=f[d]&&h[d]!=f[d]&&(console.log("Warning: "+d+" opacity is ambiguous"),h[d]=1):h[d]=f[d];s(y,l),k(y,i),A(y,e,a),D(y,e,u),void 0===y.style.cartoon||y.style.cartoon.hidden||("spectrum"!==y.style.cartoon.color||"number"!=typeof y.resi||y.hetflag||(y.resi<m[0]&&(m[0]=y.resi),y.resi>m[1]&&(m[1]=y.resi)),o.push(y))}}if(o.length>0&&n.drawCartoon(r,o,m),l&&l.vertices>0){l.initTypedArrays();var g=null;if(l.imposter)g=new n.SphereImposterMaterial({ambient:0,vertexColors:!0,reflectivity:0});else if(l.instanced){var v=new n.Geometry(!0);n.GLDraw.drawSphere(v,{x:0,y:0,z:0},1,new n.Color(.5,.5,.5)),v.initTypedArrays(),g=new n.InstancedMaterial({sphereMaterial:new n.MeshLambertMaterial({ambient:0,vertexColors:!0,reflectivity:0}),sphere:v})}else var g=new n.MeshLambertMaterial({ambient:0,vertexColors:!0,reflectivity:0});h.sphere<1&&h.sphere>=0&&(g.transparent=!0,g.opacity=h.sphere);var v=new n.Mesh(l,g);r.add(v)}if(u.vertices>0)if(u.imposter){var _=new n.StickImposterMaterial({ambient:0,vertexColors:!0,reflectivity:0});u.initTypedArrays();var x=new n.Mesh(u,_);r.add(x)}else{var S=new n.MeshLambertMaterial({vertexColors:!0,ambient:0,reflectivity:0});h.stick<1&&h.stick>=0&&(S.transparent=!0,S.opacity=h.stick),u.initTypedArrays(),S.wireframe&&u.setUpWireframe();var x=new n.Mesh(u,S);r.add(x)}for(c in a)if(a.hasOwnProperty(c)){var C=c,E=new n.LineBasicMaterial({linewidth:C,vertexColors:!0});h.line<1&&h.line>=0&&(E.transparent=!0,E.opacity=h.line),a[c].initTypedArrays();var M=new n.Line(a[c],E,n.LinePieces);r.add(M)}for(c in i)if(i.hasOwnProperty(c)){var C=c,P=new n.LineBasicMaterial({linewidth:C,vertexColors:!0});h.cross<1&&h.cross>=0&&(P.transparent=!0,P.opacity=h.cross),i[c].initTypedArrays();var I=new n.Line(i[c],P,n.LinePieces);r.add(I)}if(w&&b.symmetries&&b.symmetries.length>0){var N,R=new n.Object3D;for(N=0;N<b.symmetries.length;N++){var L=new n.Object3D;L=r.clone(),L.matrix.copy(b.symmetries[N]),L.matrixAutoUpdate=!1,R.add(L)}return R}return r};this.getCrystData=function(){return b.cryst?b.cryst:null},this.getSymmetries=function(){return void 0===b.symmetries&&(b.symmetries=[_]),b.symmetries},this.setSymmetries=function(e){b.symmetries=void 0===e?[_]:e},this.getID=function(){return h},this.getFrames=function(){return f},this.setFrame=function(e){0!=f.length&&(p=e>=0&&e<f.length?f[e]:f[f.length-1],y=null)},this.addFrame=function(e){f.push(e)},this.vibrate=function(e,t){var t=t||1,e=e||10;e--;for(var r=1;r<=e;r++){for(var o=[],a=0;a<p.length;a++){var i=new n.Vector3(n.getAtomProperty(p[a],"dx"),n.getAtomProperty(p[a],"dy"),n.getAtomProperty(p[a],"dz")),s=new n.Vector3(p[a].x,p[a].y,p[a].z);i.multiplyScalar(r*t/e),s.add(i);var l={};for(var u in p[a])l[u]=p[a][u];l.x=s.x,l.y=s.y,l.z=s.z,o.push(l)}f.push(o)}f.unshift(p)},this.setAtomDefaults=function(e){for(var n=0;n<e.length;n++){var r=e[n];r&&(r.style=r.style||t,r.color=r.color||S[r.elem]||x,r.model=h,(r.clickable||r.hoverable)&&(r.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}))}},this.addMolData=function(e,t,r){r=r||{};var o=n.GLModel.parseMolData(e,t,r);w=!r.duplicateAssemblyAtoms;var a=o.modelData;if(a&&(b=Array.isArray(a)?a[0]:a),0==f.length){for(var i=0;i<o.length;i++)0!=o[i].length&&f.push(o[i]);f[0]&&(p=f[0])}else if(r.frames)for(var i=0;i<o.length;i++)f.push(o[i]);else for(var i=0;i<o.length;i++)this.addAtoms(o[i]);for(var i=0;i<f.length;i++)this.setAtomDefaults(f[i],h);r.vibrate&&r.vibrate.frames&&r.vibrate.amplitude&&this.vibrate(r.vibrate.frames,r.vibrate.amplitude),r.style&&this.setStyle({},r.style)},this.setDontDuplicateAtoms=function(e){w=e},this.setModelData=function(e){b=e},this.atomIsSelected=function(e,t){if(void 0===t)return!0;var n=!!t.invert,r=!0;for(var o in t)if("and"==o||"or"==o||"not"==o){if("not"==o){if(this.atomIsSelected(e,t[o])){r=!1;break}}else if("and"==o){for(var a=t[o],i=0;i<a.length;i++)if(!this.atomIsSelected(e,a[i])){r=!1;break}}else if("or"==o){for(var s=t[o],l=!0,i=0;i<s.length;i++){if(this.atomIsSelected(e,s[i])){l=!0;break}l=!1}r=l}}else if("predicate"===o){if(!t.predicate(e)){r=!1;break}}else if("properties"==o&&e[o])for(var u in t.properties){if(void 0===e.properties[u]){r=!1;break}if(e.properties[u]!=t.properties[u]){r=!1;break}}else if(t.hasOwnProperty(o)&&"props"!=o&&"invert"!=o&&"model"!=o&&"byres"!=o&&"expand"!=o&&"within"!=o&&"and"!=o&&"or"!=o&&"not"!=o){if(void 0===e[o]){r=!1;break}var c=!1;if("bonds"===o){var d=t[o];if(d!=e.bonds.length){r=!1;break}}else if($.isArray(t[o])){for(var p=t[o],i=0;i<p.length;i++)if(e[o]==p[i]){c=!0;break}if(!c){r=!1;break}}else{var d=t[o];if(e[o]!=d){r=!1;break}}}return n?!r:r},this.selectedAtoms=function(e,t){var n=[];e=e||{},t||(t=p);for(var r=t.length,o=0;o<r;o++){var a=t[o];a&&this.atomIsSelected(a,e)&&n.push(a)}if(e.hasOwnProperty("expand"))for(var i=L(n,parseFloat(e.expand)),s=n.length,o=0;o<i.length;o++)for(var l=0;l<s;l++){var u=R(i[o],n[l]),c=Math.pow(e.expand,2);u<c&&u>0&&n.push(i[o])}if(e.hasOwnProperty("within")&&e.within.hasOwnProperty("sel")&&e.within.hasOwnProperty("distance")){for(var d=this.selectedAtoms(e.within.sel,p),f={},o=0;o<d.length;o++)for(var l=0;l<n.length;l++){var u=R(d[o],n[l]),c=Math.pow(parseFloat(e.within.distance),2);u<c&&u>0&&(f[l]=1)}var h=[];if(e.within.invert)for(var l=0;l<n.length;l++)f[l]||h.push(n[l]);else for(l in f)h.push(n[l]);n=h}if(e.hasOwnProperty("byres"))for(var m={},y=[],g=[],o=0;o<n.length;o++){var a=n[o],v=a.chain,b=a.resi;if(void 0===m[v]&&(m[v]={}),a.hasOwnProperty("resi")&&void 0===m[v][b])for(m[v][b]=!0,g.push(a);g.length>0;)if(a=g.pop(),v=a.chain,b=a.resi,void 0===y[a.index]){y[a.index]=!0;for(var l=0;l<a.bonds.length;l++){var _=p[a.bonds[l]];void 0===y[_.index]&&_.hasOwnProperty("resi")&&_.chain==v&&_.resi==b&&(g.push(_),n.push(_))}}}return n};var R=function(e,t){var n=t.x-e.x,r=t.y-e.y,o=t.z-e.z;return Math.pow(n,2)+Math.pow(r,2)+Math.pow(o,2)},L=function(e,t){if(t<=0)return e;for(var r=n.getExtent(e),o=[[],[],[]],a=0;a<3;a++)o[0][a]=r[0][a]-t,o[1][a]=r[1][a]+t,o[2][a]=r[2][a];for(var i=[],a=0;a<p.length;a++){var s=p[a].x,l=p[a].y,u=p[a].z;s>=o[0][0]&&s<=o[1][0]&&l>=o[0][1]&&l<=o[1][1]&&u>=o[0][2]&&u<=o[1][2]&&(s>=r[0][0]&&s<=r[1][0]&&l>=r[0][1]&&l<=r[1][1]&&u>=r[0][2]&&u<=r[1][2]||i.push(p[a]))}return i};this.addAtoms=function(e){y=null;var n,r=p.length,o=[];for(n=0;n<e.length;n++)void 0===e[n].index&&(e[n].index=n),void 0===e[n].serial&&(e[n].serial=n),o[e[n].index]=r+n;for(n=0;n<e.length;n++){var a=e[n],i=o[a.index],s=$.extend(!1,{},a);s.index=i,s.bonds=[],s.bondOrder=[],s.model=h,s.style=s.style||t,void 0===s.color&&(s.color=S[s.elem]||x);for(var l=a.bonds?a.bonds.length:0,u=0;u<l;u++){var c=o[a.bonds[u]];void 0!==c&&(s.bonds.push(c),s.bondOrder.push(a.bondOrder?a.bondOrder[u]:1))}p.push(s)}},this.removeAtoms=function(e){y=null;var t,n=[];for(t=0;t<e.length;t++)n[e[t].index]=!0;var r=[];for(t=0;t<p.length;t++){var o=p[t];n[o.index]||r.push(o)}p=[],this.addAtoms(r)},this.setStyle=function(e,t,n){void 0===t&&void 0===n&&(t=e,e={});var r;for(r in e)-1===l.indexOf(r)&&console.log("Unknown selector "+r);for(r in t)-1===u.indexOf(r)&&console.log("Unknown style "+r);var o=!1,a=function(a){for(var s=i.selectedAtoms(e,a),l=0;l<a.length;l++)a[l]&&(a[l].capDrawn=!1);for(var l=0;l<s.length;l++){o=!0,(s[l].clickable||s[l].hoverable)&&(s[l].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),n||(s[l].style={});for(r in t)if(t.hasOwnProperty(r)){s[l].style[r]=s[l].style[r]||{};for(var u in t[r])s[l].style[r][u]=t[r][u]}}},i=this;a(p);for(var s=0;s<f.length;s++)a(f[s]);o&&(y=null)},this.setClickable=function(e,t,n){var r;for(r in e)-1===l.indexOf(r)&&console.log("Unknown selector "+r);if(t=!!t,n&&"function"!=typeof n)return void console.log("Callback is not a function");var o,a=this.selectedAtoms(e,p),i=a.length;for(o=0;o<i;o++)a[o].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},a[o].clickable=t,n&&(a[o].callback=n);i>0&&(y=null)},this.setHoverable=function(e,t,n,r){var o;for(o in e)-1===l.indexOf(o)&&console.log("Unknown selector "+o);if(t=!!t,n&&"function"!=typeof n)return void console.log("Hover_callback is not a function");if(r&&"function"!=typeof r)return void console.log("Unhover_callback is not a function");var a,i=this.selectedAtoms(e,p),s=i.length;for(a=0;a<s;a++)i[a].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},i[a].hoverable=t,n&&(i[a].hover_callback=n),r&&(i[a].unhover_callback=r);s>0&&(y=null)},this.setColorByElement=function(e,t){if(null===y||!c(t,v)){v=t;var n=this.selectedAtoms(e,n);n.length>0&&(y=null);for(var r=0;r<n.length;r++){var o=n[r];void 0!==t[o.elem]&&(o.color=t[o.elem])}}},this.setColorByProperty=function(e,t,r,o){var a,i,s=this.selectedAtoms(e,s);for(v=null,s.length>0&&(y=null),void 0!==n.Gradient.builtinGradients[r]&&(r=new n.Gradient.builtinGradients[r]),o||(o=r.range()),o||(o=n.getPropertyRange(s,t)),a=0;a<s.length;a++){i=s[a];null!=n.getAtomProperty(i,t)&&(i.color=r.valueToHex(parseFloat(i.properties[t]),o))}},this.setColorByFunction=function(e,t){var n=this.selectedAtoms(e,n);if("function"==typeof t)for(v=null,n.length>0&&(y=null),i=0;i<n.length;i++)a=n[i],a.color=t(a)},this.toCDObject=function(e){var t={a:[],b:[]};e&&(t.s=[]);for(var n=0;n<p.length;n++){var r={},o=p[n];if(r.x=o.x,r.y=o.y,r.z=o.z,"C"!=o.elem&&(r.l=o.elem),e){for(var a=0;a<t.s.length&&JSON.stringify(o.style)!==JSON.stringify(t.s[a]);)a++;a===t.s.length&&t.s.push(o.style),0!==a&&(r.s=a)}t.a.push(r);for(var i=0;i<o.bonds.length;i++){var s=n,l=o.bonds[i];if(!(s>=l)){var u={b:s,e:l},c=o.bondOrder[i];1!=c&&(u.o=c),t.b.push(u)}}}return t},this.globj=function(e,t){new Date;if(null===y){y=N(p,t);new Date;g&&(e.remove(g),g=null),g=y.clone(),m&&(g.setVisible(!1),y.setVisible(!1)),e.add(g)}},this.removegl=function(e){g&&(void 0!==g.geometry&&g.geometry.dispose(),void 0!==g.material&&g.material.dispose(),e.remove(g),g=null),y=null},this.hide=function(){m=!0,g&&g.setVisible(!1),y&&y.setVisible(!1)},this.show=function(){m=!1,g&&g.setVisible(!0),y&&y.setVisible(!0)},this.addResLabels=function(e,t,r){for(var o=this.selectedAtoms(e,o),a={},i=0;i<o.length;i++){var s=o[i],l=s.chain,u=s.resn,c=s.resi,d=u+""+c;a[l]||(a[l]={}),a[l][d]||(a[l][d]=[]),a[l][d].push(s)}var p=$.extend(!0,{},r);for(var l in a)if(a.hasOwnProperty(l)){var f=a[l];for(var d in f)if(f.hasOwnProperty(d)){for(var o=f[d],h=new n.Vector3(0,0,0),i=0;i<o.length;i++){var s=o[i];h.x+=s.x,h.y+=s.y,h.z+=s.z}h.divideScalar(o.length),p.position=h,t.addLabel(d,p)}}},this.setCoordinates=function(t,n){if(n=n||"",!t)return[];if(/\.gz$/.test(n)){n=n.replace(/\.gz$/,"");try{t=pako.inflate(t,{to:"string"})}catch(e){console.log(e)}}if("mdcrd"==n||"inpcrd"==n||"pdb"==n){f=[];for(var r=p.length,o=e.parseCrd(t,n),a=0;a<o.length;){for(var i=[],s=0;s<r;s++){var l={};for(var u in p[s])l[u]=p[s][u];i[s]=l,i[s].x=o[a++],i[s].y=o[a++],i[s].z=o[a++]}f.push(i)}return p=f[0],f}return[]},this.addAtomSpecs=function(e){for(var t=0;t<e.length;t++)-1==l.indexOf(e[t])&&l.push(e[t])}}var t={line:{}},r=1,o={H:1.2,Li:1.82,LI:1.82,Na:2.27,NA:2.27,K:2.75,C:1.7,N:1.55,O:1.52,F:1.47,P:1.8,S:1.8,CL:1.75,Cl:1.75,BR:1.85,Br:1.85,SE:1.9,Se:1.9,ZN:1.39,Zn:1.39,CU:1.4,Cu:1.4,NI:1.63,Ni:1.63},s=["resn","x","y","z","color","surfaceColor","elem","hetflag","chain","resi","icode","rescode","serial","atom","bonds","ss","singleBonds","bondOrder","properties","b","pdbline","clickable","callback","invert","reflectivity","altLoc"],l=s.concat(["model","bonds","predicate","invert","byres","expand","within","and","or","not"]),u=["line","cross","stick","sphere","cartoon","colorfunc"],c=function(e,t){return e&&t?JSON.stringify(e)==JSON.stringify(t):e==t};return e.parseCrd=function(e,t){var n=[],r=0;if("pdb"==t){for(var o=e.indexOf("\nATOM");-1!=o;){for(;"\nATOM"==e.slice(o,o+5)||"\nHETATM"==e.slice(o,o+7);)n[r++]=parseFloat(e.slice(o+31,o+39)),n[r++]=parseFloat(e.slice(o+39,o+47)),n[r++]=parseFloat(e.slice(o+47,o+55)),o=e.indexOf("\n",o+54),"\nTER"==e.slice(o,o+4)&&(o=e.indexOf("\n",o+5));o=e.indexOf("\nATOM",o)}return n}var o=e.indexOf("\n");return"inpcrd"==t&&(o=e.indexOf("\n",o+1)),e=e.slice(o+1),n=e.match(/\S+/g).map(parseFloat)},e.parseMolData=function(e,t,r){if(t=t||"",!e)return[];if(/\.gz$/.test(t)){t=t.replace(/\.gz$/,"");try{e=pako.inflate(e,{to:"string"})}catch(e){console.log(e)}}return void 0===n.Parsers[t]&&(t=t.split(".").pop(),void 0===n.Parsers[t]&&(console.log("Unknown format: "+t),t=e.match(/^@<TRIPOS>MOLECULE/gm)?"mol2":e.match(/^HETATM/gm)||e.match(/^ATOM/gm)?"pdb":e.match(/^.*\n.*\n.\s*(\d+)\s+(\d+)/gm)?"sdf":e.match(/^%VERSION\s+\VERSION_STAMP/gm)?"prmtop":"xyz",console.log("Best guess: "+t))),(0,n.Parsers[t])(e,r)},e.setAtomDefaults=function(e,n){for(var r=0;r<e.length;r++){var o=e[r];o&&(o.style=o.style||t,o.color=o.color||ElementColors[o.elem]||defaultColor,o.model=n,(o.clickable||o.hoverable)&&(o.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}))}},e}(),n.GLShape=function(){function e(e){e=e||{},n.ShapeIDCount++,this.boundingSphere=new n.Sphere,this.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},u(this,e);var i=[],c=null,d=null,p=new n.Geometry(!0),f=new n.Geometry(!0);this.updateStyle=function(t){for(var n in t)e[n]=t[n];u(this,e)},this.addCustom=function(e){e.vertexArr=e.vertexArr||[],e.faceArr=e.faceArr||[],e.normalArr=e.normalArr||[];p.geometryGroups.length;s(this,p,e)},this.addSphere=function(e){e.center=e.center||{x:0,y:0,z:0},e.radius=e.radius?n.Math.clamp(e.radius,0,1/0):1.5,e.color=n.CC.color(e.color),this.intersectionShape.sphere.push(new n.Sphere(e.center,e.radius)),n.GLDraw.drawSphere(p,e.center,e.radius,e.color),i.push({centroid:new n.Vector3(e.center.x,e.center.y,e.center.z)});var t=p.updateGeoGroup(0);l(this.boundingSphere,i,t.vertexArray)},this.addCylinder=function(e){e.start=e.start||{},e.end=e.end||{};var t=new n.Vector3(e.start.x||0,e.start.y||0,e.start.z||0),r=new n.Vector3(e.end.x,e.end.y||0,e.end.z||0);void 0===r.x&&(r.x=3);var o=e.radius||.1,a=n.CC.color(e.color);this.intersectionShape.cylinder.push(new n.Cylinder(t,r,o)),n.GLDraw.drawCylinder(p,t,r,o,a,e.fromCap,e.toCap);var s=new n.Vector3;i.push({centroid:s.addVectors(t,r).multiplyScalar(.5)});var u=p.updateGeoGroup(0);l(this.boundingSphere,i,u.vertexArray)},this.addDashedCylinder=function(e){console.log("addDashedCylinder"),e.start=e.start||{},e.end=e.end||{},e.dashLength=e.dashLength||.25,e.gapLength=e.gapLength||.25;var t=new n.Vector3(e.start.x||0,e.start.y||0,e.start.z||0),r=new n.Vector3(e.end.x,e.end.y||0,e.end.z||0);void 0===r.x&&(r.x=3);for(var o=e.radius||.1,a=n.CC.color(e.color),s=Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2)+Math.pow(t.z-r.z,2)),u=s/(e.gapLength+e.dashLength),c=new n.Vector3(e.start.x||0,e.start.y||0,e.start.z||0),d=new n.Vector3(e.end.x,e.end.y||0,e.end.z||0),f=new n.Vector3((r.x-t.x)/(s/e.gapLength),(r.y-t.y)/(s/e.gapLength),(r.z-t.z)/(s/e.gapLength)),h=new n.Vector3((r.x-t.x)/(s/e.dashLength),(r.y-t.y)/(s/e.dashLength),(r.z-t.z)/(s/e.dashLength)),m=0;m<u;m++)d=new n.Vector3(c.x+h.x,c.y+h.y,c.z+h.z),this.intersectionShape.cylinder.push(new n.Cylinder(c,d,o)),n.GLDraw.drawCylinder(p,c,d,o,a,e.fromCap,e.toCap),c=new n.Vector3(d.x+f.x,d.y+f.y,d.z+f.z);var y=new n.Vector3;i.push({centroid:y.addVectors(t,r).multiplyScalar(.5)});var g=p.updateGeoGroup(0);l(this.boundingSphere,i,g.vertexArray)},this.addLine=function(e){e.start=e.start||{},e.end=e.end||{};var t=new n.Vector3(e.start.x||0,e.start.y||0,e.start.z||0),r=new n.Vector3(e.end.x,e.end.y||0,e.end.z||0);void 0===r.x&&(r.x=3);var o=p.updateGeoGroup(2),a=o.vertices,i=3*a,s=o.vertexArray;s[i]=t.x,s[i+1]=t.y,s[i+2]=t.z,s[i+3]=r.x,s[i+4]=r.y,s[i+5]=r.z,o.vertices+=2;var l=o.lineArray,u=o.lineidx;l[u]=a,l[u+1]=a+1,o.lineidx+=2},this.addArrow=function(e){if(e.start=e.start||{},e.end=e.end||{},e.start=new n.Vector3(e.start.x||0,e.start.y||0,e.start.z||0),e.dir instanceof n.Vector3&&e.length instanceof number){var t=e.dir.clone().multiplyScalar(e.length).add(start);e.end=t}else e.end=new n.Vector3(e.end.x,e.end.y||0,e.end.z||0),void 0===e.end.x&&(e.end.x=3);e.radius=e.radius||.1,e.radiusRatio=e.radiusRatio||1.618034,e.mid=0<e.mid&&e.mid<1?e.mid:.618034,a(this,p,e);var r=new n.Vector3;i.push({centroid:r.addVectors(e.start,e.end).multiplyScalar(.5)});var o=p.updateGeoGroup(0);l(this.boundingSphere,i,o.vertexArray)},this.addIsosurface=function(e,r,o){var a,i,l=void 0!==r.isoval&&"number"==typeof r.isoval?r.isoval:0,u=!!r.voxel,c=void 0===r.smoothness?1:r.smoothness,d=e.size.x,f=e.size.y,m=e.size.z,y=new Int16Array(d*f*m),g=e.data;for(a=0,i=y.length;a<i;++a)y[a]=-1;var v=new Uint8Array(d*f*m);for(a=0,i=g.length;a<i;++a){(l>=0?g[a]-l:l-g[a])>0&&(v[a]|=t)}var b=[],_=[];n.MarchingCube.march(v,b,_,{fulltable:!0,voxel:u,unitCube:e.unit,origin:e.origin,matrix:e.matrix,nX:d,nY:f,nZ:m}),!u&&c>0&&n.MarchingCube.laplacianSmooth(c,b,_);var w=[],x=[],S=[];if(void 0!==r.selectedRegion){for(var C=r.selectedRegion[0],k=r.selectedRegion[0],E=r.selectedRegion[0],M=r.selectedRegion[0],A=r.selectedRegion[0],T=r.selectedRegion[0],a=0;a<r.selectedRegion.length;a++)r.selectedRegion[a].x>C.x?C=r.selectedRegion[a]:r.selectedRegion[a].x<M.x&&(M=r.selectedRegion[a]),r.selectedRegion[a].y>k.y?k=r.selectedRegion[a]:r.selectedRegion[a].y<A.y&&(A=r.selectedRegion[a]),r.selectedRegion[a].z>E.z?E=r.selectedRegion[a]:r.selectedRegion[a].z<T.z&&(T=r.selectedRegion[a]);var O=r.radius;C.x=C.x+O,M.x=M.x-O,A.y=A.y-O,k.y=k.y+O,T.z=T.z-O,E.z=E.z+O;for(var a=0;a<b.length;a++)b[a].x>M.x&&b[a].x<C.x&&b[a].y>A.y&&b[a].y<k.y&&b[a].z>T.z&&b[a].z<E.z&&h(b[a],r.selectedRegion,r.selectedOffset,r.radius)?(w.push(x.length),x.push(b[a])):w.push(-1);for(var a=0;a+2<_.length;a+=3)-1!==w[_[a]]&&-1!==w[_[a+1]]&&-1!==w[_[a+2]]&&(S.push(_[a]-(_[a]-w[_[a]])),S.push(_[a+1]-(_[a+1]-w[_[a+1]])),S.push(_[a+2]-(_[a+2]-w[_[a+2]])));b=x,_=S}s(this,p,{vertexArr:b,faceArr:_,normalArr:[],clickable:r.clickable,hoverable:r.hoverable}),this.updateStyle(r);for(var P=new n.Vector3(e.origin.x,e.origin.y,e.origin.z),j=new n.Vector3(e.size.x*e.unit.x,e.size.y*e.unit.y,e.size.z*e.unit.z),I=new n.Vector3(0,0,0),D=P.clone(),N=P.clone().add(j),a=0;a<b.length;a++)I.add(b[a]),D.max(b[a]),N.min(b[a]);I.divideScalar(b.length);var R=I.distanceTo(N),L=I.distanceTo(D);this.boundingSphere.center=I,this.boundingSphere.radius=Math.max(R,L),"function"==typeof o&&o()};var h=function(e,t,n,r){for(var o=0;o<t.length;o++)if(m(t[o],e)<=r)return!0;return!1},m=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)+Math.pow(e.z-t.z,2))};this.addVolumetricData=function(e,t,r){var e=new n.VolumeData(e,t);this.addIsosurface(e,r)},this.globj=function(e){if(d&&(e.remove(d),d=null),!this.hidden){r(p),p.initTypedArrays(),void 0!==this.color&&o(p,this.color),c=new n.Object3D;var t=null;if(this.side==n.DoubleSide)var t=new n.MeshDoubleLambertMaterial({wireframe:this.wireframe,side:this.side,transparent:this.opacity<1,opacity:this.opacity,wireframeLinewidth:this.linewidth});else var t=new n.MeshLambertMaterial({wireframe:this.wireframe,side:this.side,transparent:this.opacity<1,opacity:this.opacity,wireframeLinewidth:this.linewidth});var a=new n.Mesh(p,t);c.add(a);var i=new n.LineBasicMaterial({linewidth:this.linewidth,color:this.color}),s=new n.Line(f,i,n.LinePieces);c.add(s),d=c.clone(),e.add(d)}},this.removegl=function(e){d&&(void 0!==d.geometry&&d.geometry.dispose(),void 0!==d.material&&d.material.dispose(),e.remove(d),d=null),c=null}}var t=2,r=function(e){var t=e.updateGeoGroup(0);t.vertices>0&&t.truncateArrayBuffers(!0,!0)},o=function(e,t){t||n.CC.color(t);e.colorsNeedUpdate=!0;var r,o,a;t.constructor!==Array&&(r=t.r,o=t.g,a=t.b);for(var i in e.geometryGroups)for(var s=e.geometryGroups[i],l=s.colorArray,u=0,c=s.vertices;u<c;++u){if(t.constructor===Array){var d=t[u];r=d.r,o=d.g,a=d.b}l[3*u]=r,l[3*u+1]=o,l[3*u+2]=a}},a=function(e,t,r){var o=r.start,a=r.end,i=r.radius,s=r.radiusRatio,l=r.mid;if(o&&a){var u=t.updateGeoGroup(51),c=a.clone();c.sub(o).multiplyScalar(l);var d=o.clone().add(c),p=c.clone().negate();e.intersectionShape.cylinder.push(new n.Cylinder(o.clone(),d.clone(),i)),e.intersectionShape.sphere.push(new n.Sphere(o.clone(),i));var f=[];f[0]=c.clone(),Math.abs(f[0].x)>1e-4?f[0].y+=1:f[0].x+=1,f[0].cross(c),f[0].normalize(),f[0]=f[0],f[4]=f[0].clone(),f[4].crossVectors(f[0],c),f[4].normalize(),f[8]=f[0].clone().negate(),f[12]=f[4].clone().negate(),f[2]=f[0].clone().add(f[4]).normalize(),f[6]=f[4].clone().add(f[8]).normalize(),f[10]=f[8].clone().add(f[12]).normalize(),f[14]=f[12].clone().add(f[0]).normalize(),f[1]=f[0].clone().add(f[2]).normalize(),f[3]=f[2].clone().add(f[4]).normalize(),f[5]=f[4].clone().add(f[6]).normalize(),f[7]=f[6].clone().add(f[8]).normalize(),f[9]=f[8].clone().add(f[10]).normalize(),f[11]=f[10].clone().add(f[12]).normalize(),f[13]=f[12].clone().add(f[14]).normalize(),f[15]=f[14].clone().add(f[0]).normalize();var h,m,y,g=u.vertices,v=u.vertexArray,b=(u.colorArray,u.faceArray),_=u.normalArray,w=u.lineArray;for(m=0,y=f.length;m<y;++m){h=3*(g+3*m);var x=f[m].clone().multiplyScalar(i).add(o),S=f[m].clone().multiplyScalar(i).add(d),C=f[m].clone().multiplyScalar(i*s).add(d);if(v[h]=x.x,v[h+1]=x.y,v[h+2]=x.z,v[h+3]=S.x,v[h+4]=S.y,v[h+5]=S.z,v[h+6]=C.x,v[h+7]=C.y,v[h+8]=C.z,m>0){var k=v[h-3],E=v[h-2],M=v[h-1],A=new n.Vector3(k,E,M),T=a.clone(),O=d.clone(),P=new n.Vector3(C.x,C.y,C.z);e.intersectionShape.triangle.push(new n.Triangle(P,T,A)),e.intersectionShape.triangle.push(new n.Triangle(A.clone(),O,P.clone()))}}u.vertices+=48,h=3*u.vertices,v[h]=o.x,v[h+1]=o.y,v[h+2]=o.z,v[h+3]=d.x,v[h+4]=d.y,v[h+5]=d.z,v[h+6]=a.x,v[h+7]=a.y,v[h+8]=a.z,u.vertices+=3;var j,I,D,N,R,L,F,z,B,V,G,H,U,q,W,Z,Y,K,X,Q=u.vertices-3,J=u.vertices-2,$=u.vertices-1,ee=3*Q,te=3*J,ne=3*$;for(m=0,y=f.length-1;m<y;++m){var re=g+3*m;h=3*re,I=u.faceidx,D=u.lineidx,N=re,V=3*N,R=re+1,G=3*R,L=re+2,H=3*L,F=re+4,U=3*F,z=re+5,q=3*z,B=re+3,W=3*B,[f[m],f[m],f[m+1],f[m+1]],Z=Y=f[m],K=X=f[m+1],_[V]=Z.x,_[G]=Y.x,_[W]=X.x,_[V+1]=Z.y,_[G+1]=Y.y,_[W+1]=X.y,_[V+2]=Z.z,_[G+2]=Y.z,_[W+2]=X.z,_[G]=Y.x,_[U]=K.x,_[W]=X.x,_[G+1]=Y.y,_[U+1]=K.y,_[W+1]=X.y,_[G+2]=Y.z,_[U+2]=K.z,_[W+2]=X.z,_[H]=Y.x,_[q]=K.x,_[H+1]=Y.y,_[q+1]=K.y,_[H+2]=Y.z,_[q+2]=K.z,b[I]=N,b[I+1]=R,b[I+2]=B,b[I+3]=R,b[I+4]=F,b[I+5]=B,b[I+6]=N,b[I+7]=B,b[I+8]=Q,b[I+9]=L,b[I+10]=J,b[I+11]=z,b[I+12]=L,b[I+13]=$,b[I+14]=z,w[D]=N,w[D+1]=R,w[D+2]=N,w[D+3]=B,w[D+4]=F,w[D+5]=B,w[D+6]=N,w[D+7]=B,w[D+8]=L,w[D+9]=R,w[D+10]=L,w[D+11]=z,w[D+12]=F,w[D+13]=z,w[D+14]=L,w[D+15]=$,w[D+16]=L,w[D+17]=z,w[D+18]=$,w[D+19]=z,u.faceidx+=15,u.lineidx+=20}j=[g+45,g+46,g+1,g,g+47,g+2],[f[15],f[15],f[0],f[0]],I=u.faceidx,D=u.lineidx,N=j[0],V=3*N,R=j[1],G=3*R,L=j[4],H=3*L,F=j[2],U=3*F,z=j[5],q=3*z,B=j[3],W=3*B,Z=Y=f[15],K=X=f[0],_[V]=Z.x,_[G]=Y.x,_[W]=X.x,_[V+1]=Z.y,_[G+1]=Y.y,_[W+1]=X.y,_[V+2]=Z.z,_[G+2]=Y.z,_[W+2]=X.z,_[G]=Y.x,_[U]=K.x,_[W]=X.x,_[G+1]=Y.y,_[U+1]=K.y,_[W+1]=X.y,_[G+2]=Y.z,_[U+2]=K.z,_[W+2]=X.z,_[H]=Y.x,_[q]=K.x,_[H+1]=Y.y,_[q+1]=K.y,_[H+2]=Y.z,_[q+2]=K.z,c.normalize(),p.normalize(),_[ee]=p.x,_[te]=_[ne]=c.x,_[ee+1]=p.y,_[te+1]=_[ne+1]=c.y,_[ee+2]=p.z,_[te+2]=_[ne+2]=c.z,b[I]=N,b[I+1]=R,b[I+2]=B,b[I+3]=R,b[I+4]=F,b[I+5]=B,b[I+6]=N,b[I+7]=B,b[I+8]=Q,b[I+9]=L,b[I+10]=J,b[I+11]=z,b[I+12]=L,b[I+13]=$,b[I+14]=z,w[D]=N,w[D+1]=R,w[D+2]=N,w[D+3]=B,w[D+4]=F,w[D+5]=B,w[D+6]=N,w[D+7]=B,w[D+8]=L,w[D+9]=R,w[D+10]=L,w[D+11]=z,w[D+12]=F,w[D+13]=z,w[D+14]=L,w[D+15]=$,w[D+16]=L,w[D+17]=z,w[D+18]=$,w[D+19]=z,u.faceidx+=15,u.lineidx+=20}},i=function(e,t,r,o,a){var i=t.addGeoGroup(),s=r.vertexArr,u=r.normalArr,c=r.faceArr;i.vertices=s.length,i.faceidx=c.length;var d,p,f,h,m,y,g,v=i.vertexArray,b=i.colorArray;if(o.constructor!==Array)var _=o.r,w=o.g,h=o.b;for(y=0,g=i.vertices;y<g;++y){if(d=3*y,p=s[y],v[d]=p.x,v[d+1]=p.y,v[d+2]=p.z,o.constructor===Array)var m=o[y],_=m.r,w=m.g,h=m.b;b[d]=_,b[d+1]=w,b[d+2]=h}if(a)for(y=0,g=i.faceidx/3;y<g;++y){d=3*y,f=c[d],h=c[d+1],m=c[d+2];var x=new n.Vector3,S=new n.Vector3,C=new n.Vector3;e.intersectionShape.triangle.push(new n.Triangle(x.copy(s[f]),S.copy(s[h]),C.copy(s[m])))}if(a){for(var k=new n.Vector3(0,0,0),E=0,w=0;w<t.geometryGroups.length;w++)k.add(t.geometryGroups[w].getCentroid()),E++;k.divideScalar(E),l(e.boundingSphere,{centroid:k},v)}if(i.faceArray=new Uint16Array(c),i.truncateArrayBuffers(!0,!0),u.length<i.vertices)i.setNormals();else{var M,A=i.normalArray=new Float32Array(3*i.vertices);for(y=0,g=i.vertices;y<g;++y)d=3*y,M=u[y],A[d]=M.x,A[d+1]=M.y,A[d+2]=M.z}i.setLineIndices(),i.lineidx=i.lineArray.length},s=function(e,t,r){var o=r,a=o.vertexArr,s=(o.normalArr,o.faceArr);0!==a.length&&0!==s.length||console.warn("Error adding custom shape component: No vertices and/or face indices supplied!");var l=r.color;void 0===l&&(l=e.color),l=n.CC.color(l);for(var u=n.splitMesh(o),c=0,d=u.length;c<d;c++)i(e,t,u[c],u[c].colorArr?u[c].colorArr:l,r.clickable)},l=function(e,t,n){e.center.set(0,0,0);var r,o;if(t.length>0){for(r=0,o=t.length;r<o;++r){var a=t[r].centroid;e.center.add(a)}e.center.divideScalar(t.length)}var i=e.radius*e.radius;for(r=0,o=n.length/3;r<o;r++){var s=n[3*r],l=n[3*r+1],u=n[3*r+2],c=e.center.distanceToSquared({x:s,y:l,z:u});i=Math.max(i,c)}e.radius=Math.sqrt(i)},u=function(e,t){void 0!==t.color?(e.color=t.color||new n.Color,t.color instanceof n.Color||(e.color=n.CC.color(t.color))):e.color=n.CC.color(0),e.wireframe=!!t.wireframe,e.opacity=t.alpha?n.Math.clamp(t.alpha,0,1):1,void 0!==t.opacity&&(e.opacity=n.Math.clamp(t.opacity,0,1)),e.side=void 0!==t.side?t.side:n.DoubleSide,e.linewidth=void 0===t.linewidth?1:t.linewidth,e.clickable=!!t.clickable,e.callback="function"==typeof t.callback?t.callback:null,e.hoverable=!!t.hoverable,e.hover_callback="function"==typeof t.hover_callback?t.hover_callback:null,e.unhover_callback="function"==typeof t.unhover_callback?t.unhover_callback:null,e.hidden=t.hidden};return Object.defineProperty(e.prototype,"position",{get:function(){return this.boundingSphere.center}}),Object.defineProperty(e.prototype,"x",{get:function(){return this.boundingSphere.center.x}}),Object.defineProperty(e.prototype,"y",{get:function(){return this.boundingSphere.center.y}}),Object.defineProperty(e.prototype,"z",{get:function(){return this.boundingSphere.center.z}}),e}(),n.ShapeIDCount=0,n.splitMesh=function(e){if(e.vertexArr.length<64e3)return[e];var t=(e.vertexArr.length,[{vertexArr:[],normalArr:[],faceArr:[]}]);e.colorArr&&(t.colorArr=[]);for(var n=[],r=[],o=0,a=e.faceArr,i=0,s=a.length;i<s;i+=3){for(var l=t[o],u=0;u<3;u++){var c=a[i+u];n[c]!==o&&(n[c]=o,r[c]=l.vertexArr.length,l.vertexArr.push(e.vertexArr[c]),e.normalArr&&e.normalArr[c]&&l.normalArr.push(e.normalArr[c]),e.colorArr&&e.colorArr[c]&&l.colorArr.push(e.colorArr[c])),l.faceArr.push(r[c])}l.vertexArr.length>=64e3&&(t.push({vertexArr:[],normalArr:[],faceArr:[]}),e.colorArr&&(t.colorArr=[]),o++)}return t},n.GLViewer=function(){function e(e,o){function a(e){var t=[];void 0===e&&(e={});var n,r=[];if(void 0===e.model)for(n=0;n<v.length;n++)v[n]&&r.push(v[n]);else r=e.model,$.isArray(r)||(r=[r]);for(n=0;n<r.length;n++)t=t.concat(r[n].selectedAtoms(e));return t}function i(e,t){void 0===t&&(t={});var n,r=[];if(void 0===t.model)for(n=0;n<v.length;n++)v[n]&&r.push(v[n]);else r=t.model,$.isArray(r)||(r=[r]);for(n=0;n<r.length;n++)if(r[n].atomIsSelected(e,t))return!0;return!1}function s(e,t){e.dashLength=e.dashLength||.5,e.gapLength=e.gapLength||.5,e.start=e.start||{},e.end=e.end||{};var r,o,a,i=new n.Vector3(e.start.x||0,e.start.y||0,e.start.z||0),s=new n.Vector3(e.end.x,e.end.y||0,e.end.z||0),l=new n.Vector3,u=new n.Vector3,c=new n.Vector3,d=i.clone(),p=0;for(l.subVectors(s,i),r=l.length(),l.normalize(),u=l.clone(),c=l.clone(),u.multiplyScalar(e.dashLength),c.multiplyScalar(e.gapLength),o=u.length(),a=c.length();p<r;){if(p+o>r){e.start=i,e.end=s,t.addLine(e);break}d.addVectors(i,u),e.start=i,e.end=d,t.addLine(e),i=d.clone(),p+=o,d.addVectors(i,c),i=d.clone(),p+=a}return t}function l(e,t,n,r,o){var a=[];if(void 0===t.model)for(i=0;i<v.length;i++)v[i]&&a.push(v[i]);else a=t.model,$.isArray(a)||(a=[a]);for(var i=0;i<a.length;i++)a[i]&&("number"==typeof a[i]?v[a[i]][e](t,n,r,o):a[i][e](t,n,r,o))}function u(e){var t=new n.MeshLambertMaterial;t.vertexColors=n.VertexColors;for(var r in e)"color"===r||"map"===r||e.hasOwnProperty(r)&&(t[r]=e[r]);return void 0!==e.opacity&&(1===e.opacity?t.transparent=!1:t.transparent=!0),t}o=o||{};var c=o.callback,d=o.defaultcolors;d||(d=n.elementColors.defaultColors);var p=o.nomouse,f=0;o.backgroundColor=o.backgroundColor||"#ffffff",void 0!=typeof o.backgroundColor&&(f=n.CC.color(o.backgroundColor).getHex());var h=0;void 0!=typeof o.camerax&&(h=parseFloat(o.camerax));var m=this,y=e,g=(y.id,null),v=[],b={},_=[],w=[],x=[],S=[],C=[],k=null,E=500;void 0!=typeof o.hoverDuration&&(E=o.hoverDuration);var M=y.width(),A=y.height(),T=M/A,O=[],P=new n.Renderer({antialias:!0,preserveDrawingBuffer:!0,premultipliedAlpha:!1,id:o.id});P.domElement.style.width="100%",P.domElement.style.height="100%",P.domElement.style.padding="0",P.domElement.style.position="absolute",P.domElement.style.top="0px",P.domElement.style.left="0px",P.domElement.style.zIndex="0";var j=new n.Camera(20,T,1,800,o.orthographic);j.position=new n.Vector3(h,0,150);var I=new n.Vector3;j.lookAt(I);var D=new n.Raycaster(new n.Vector3(0,0,0),new n.Vector3(0,0,0)),N=new n.Projector,R=new n.Vector3(0,0,0),L=null,F=null,z=null,B=-50,V=50,G=new n.Quaternion(0,0,0,1),H=new n.Quaternion(0,0,0,1),U=!1,q=!1,W=0,Z=0,Y=0,K=0,X=0,Q=0,J=0,ee=function(){var e=0;for(var t in b)b.hasOwnProperty(t)&&t>e&&(e=t);return e+1},te=function(){var e=j.position.z-F.position.z;e<1&&(e=1),j.near=e+B,j.near<1&&(j.near=1),j.far=e+V,j.near+1>j.far&&(j.far=j.near+1),j.fov=20,j.right=e*Math.tan(Math.PI/180*20),j.left=-j.right,j.top=j.right/T,j.bottom=-j.top,j.updateProjectionMatrix(),L.fog.near=j.near+.4*(j.far-j.near),L.fog.far=j.far,o.disableFog&&(L.fog.near=L.fog.far)},ne=function(e){if(L&&(te(),P.render(L,j),!e&&O.length>0))for(var t=m.getView(),n=0;n<O.length;n++){var r=O[n];r.setView(t,!0)}};!function(){L=new n.Scene,L.fog=new n.Fog(f,100,200),z=new n.Object3D,F=new n.Object3D,F.useQuaternion=!0,F.quaternion=new n.Quaternion(0,0,0,1),F.add(z),L.add(F);var e=new n.Light(16777215);e.position=new n.Vector3(.2,.2,1).normalize(),e.intensity=1,L.add(e)}(),P.setClearColorHex(f,1),L.fog.color=n.CC.color(f);var re=null,oe=function(){S.splice(0,S.length),C.splice(0,C.length);var e,t;for(e=0,t=v.length;e<t;e++){var n=v[e];if(n){var r=n.selectedAtoms({clickable:!0}),o=n.selectedAtoms({hoverable:!0});Array.prototype.push.apply(C,o),Array.prototype.push.apply(S,r)}}for(e=0,t=_.length;e<t;e++){var a=_[e];a&&a.clickable&&S.push(a),a&&a.hoverable&&C.push(a)}},ae=function(e,t,n){if(0!=S.length){var r={x:e,y:t,z:-1};R.set(r.x,r.y,r.z),N.unprojectVector(R,j),R.sub(j.position).normalize(),D.set(j.position,R);var o=[];if(o=D.intersectObjects(z,S),o.length){var a=o[0].clickable;void 0!==a.callback&&"function"==typeof a.callback&&a.callback(a,m,n,y)}}},ie=function(e,t,n){if(0!=C.length){var r={x:e,y:t,z:-1};R.set(r.x,r.y,r.z),N.unprojectVector(R,j),R.sub(j.position).normalize(),D.set(j.position,R);var o=[];if(o=D.intersectObjects(z,C),o.length){var a=o[0].clickable;k=a,void 0!==a.hover_callback&&"function"==typeof a.hover_callback&&a.hover_callback(a,m,n,y)}else k=null}},se=function(e,t,n){var r={x:e,y:t,z:-1};R.set(r.x,r.y,r.z),N.unprojectVector(R,j),R.sub(j.position).normalize(),D.set(j.position,R);var o=[];o=D.intersectObjects(z,C),void 0===o[0]&&(k.unhover_callback(k,m,n,y),k=null),void 0!==o[0]&&o[0].clickable!==k&&(k.unhover_callback(k,m,n,y),k=null)},le=function(e){var t=e.originalEvent.targetTouches[0].pageX-e.originalEvent.targetTouches[1].pageX,n=e.originalEvent.targetTouches[0].pageY-e.originalEvent.targetTouches[1].pageY;return Math.sqrt(t*t+n*n)},ue=function(e){var t=e.pageX,n=e.pageY;return e.originalEvent.targetTouches&&e.originalEvent.targetTouches[0]?(t=e.originalEvent.targetTouches[0].pageX,n=e.originalEvent.targetTouches[0].pageY):e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]&&(t=e.originalEvent.changedTouches[0].pageX,n=e.originalEvent.changedTouches[0].pageY),[t,n]},ce=function(e,t){var r=e/M,o=t/A,a=F.position.z,i=F.quaternion,s=new n.Vector3(0,0,a);return N.projectVector(s,j),s.x+=2*r,s.y-=2*o,N.unprojectVector(s,j),s.z=0,s.applyQuaternion(i),s};$("body").bind("mouseup touchend",function(e){if(q&&L){var t=ue(e),n=t[0],r=t[1];if(n==W&&r==Z){var o=$("canvas",y).offset(),a=(n-o.left)/M*2-1,i=-(r-o.top)/A*2+1;ae(a,i,e)}}q=!1});var de,pe=this._handleMouseDown=function(e){if(e.preventDefault(),L){var t=ue(e),n=t[0],r=t[1];void 0!==n&&(q=!0,re=null,de=e.which,W=n,Z=r,Y=0,e.originalEvent.targetTouches&&2==e.originalEvent.targetTouches.length&&(Y=le(e)),G=F.quaternion,X=F.position.z,K=z.position.clone(),Q=B,J=V)}},fe=this._handleMouseScroll=function(e){if(e.preventDefault(),L){var t=.85*(150-F.position.z),n=1;e.originalEvent.ctrlKey&&(n=-1),e.originalEvent.detail?F.position.z+=n*t*e.originalEvent.detail/10:e.originalEvent.wheelDelta&&(F.position.z-=n*t*e.originalEvent.wheelDelta/400),F.position.z>150&&(F.position.z=149.85),ne()}};this.pngURI=function(){return $("canvas",y)[0].toDataURL("image/png")},this.setHoverDuration=function(e){E=e};var he,me=this._handleMouseMove=function(e){clearTimeout(he);var t=$("canvas",y).offset(),r=(ue(e)[0]-t.left)/M*2-1,o=-(ue(e)[1]-t.top)/A*2+1;if(null!==k&&se(r,o,e),he=setTimeout(function(){ie(r,o,e)},E),M=y.width(),A=y.height(),e.preventDefault(),L&&q){var a=0,i=ue(e),s=i[0],l=i[1];if(void 0!==s){var u=(s-W)/M,c=(l-Z)/A;if(0!=Y&&e.originalEvent.targetTouches&&2==e.originalEvent.targetTouches.length){var d=le(e);a=2,c=2*(d-Y)/(M+A),console.log("pinch "+Y+" dy "+c)}else e.originalEvent.targetTouches&&3==e.originalEvent.targetTouches.length&&(a=1);var p,f=Math.sqrt(u*u+c*c);if(3==a||3==de&&e.ctrlKey)B=Q+100*u,V=J+100*c;else if(2==a||3==de||e.shiftKey)p=.85*(150-F.position.z),p<80&&(p=80),F.position.z=X+c*p,F.position.z>150&&(F.position.z=149.85);else if(1==a||2==de||e.ctrlKey){var h=ce(s-W,l-Z);z.position.addVectors(K,h)}else if((0===a||1==de)&&0!==f){var m=Math.sin(f*Math.PI)/f;H.x=Math.cos(f*Math.PI),H.y=0,H.z=m*u,H.w=-m*c,F.quaternion=new n.Quaternion(1,0,0,0),F.quaternion.multiply(H),F.quaternion.multiply(G)}ne()}}},ye=function(e){y=e,M=y.width(),A=y.height(),T=M/A,P.setSize(M,A),y.append(P.domElement),g=$(P.domElement),p||(g.bind("mousedown touchstart",pe),g.bind("DOMMouseScroll mousewheel",fe),g.bind("mousemove touchmove",me),g.bind("contextmenu",function(e){e.preventDefault()}))};ye(y),this.setContainer=function(e){return"string"===$.type(e)&&(e=$("#"+e)),e||(e=y),ye(e),this},this.setBackgroundColor=function(e,t){void 0===t?t=1:(t<0||t>1)&&(t=1);var r=n.CC.color(e);return L.fog.color=r,f=r.getHex(),P.setClearColorHex(r.getHex(),t),ne(),this},this.setProjection=function(e){j.ortho="orthographic"===e,te()},this.setViewStyle=function(e){if("outline"===e.style){var t={};e.color&&(t.color=n.CC.color(e.color)),e.width&&(t.width=e.width),P.enableOutline(t)}else P.disableOutline();return this},o.style&&this.setViewStyle(o),this.setWidth=function(e){return M=e||M,P.setSize(M,A),this},this.setHeight=function(e){return A=e||A,P.setSize(M,A),this},this.resize=function(){return M=y.width(),A=y.height(),T=M/A,P.setSize(M,A),j.aspect=T,j.updateProjectionMatrix(),ne(),this},$(window).resize(this.resize),this.getModel=function(e){return e in v?v[e]:0==v.length?null:v[v.length-1]},this.rotate=function(e,t,r,o){r=void 0!==r?r:0,void 0===t&&(t="y");var a=Math.PI*e/180,i=function(e){var r=Math.sin(e/2),o=Math.cos(e/2),a=0,i=0,s=0;return"x"==t&&(a=r),"y"==t&&(i=r),"z"==t&&(s=r),new n.Quaternion(a,i,s,o).normalize()}(a);if(r){var s=(new n.Quaternion).copy(F.quaternion).multiply(i);ve(r,o,z.position,F.position.z,s,I)}else F.quaternion.multiply(i),ne();return this},this.surfacesFinished=function(){for(var e in b)if(!b[e][0].done)return!1;return!0},this.getView=function(){if(!z)return[0,0,0,0,0,0,0,1];var e=z.position,t=F.quaternion;return[e.x,e.y,e.z,F.position.z,t.x,t.y,t.z,t.w]},this.setView=function(e,t){return void 0!==e&&(e instanceof Array||8!==e.length)&&z&&F?(z.position.x=e[0],z.position.y=e[1],z.position.z=e[2],F.position.z=e[3],F.quaternion.x=e[4],F.quaternion.y=e[5],F.quaternion.z=e[6],F.quaternion.w=e[7],void 0!==e[8]&&(F.position.x=e[8],F.position.y=e[9]),ne(t),this):this},this.render=function(e){new Date;oe();var t,r,o=this.getView(),a=P.supportedExtensions();for(t=0;t<v.length;t++)v[t]&&v[t].globj(z,a);for(t=0;t<_.length;t++)_[t]&&_[t].globj(z,a);for(t in b)if(b.hasOwnProperty(t)){var i=b[t];for(r=0;r<i.length;r++)if(i.hasOwnProperty(r)){var s=i[r].geo;if(!i[r].finished){s.verticesNeedUpdate=!0,s.elementsNeedUpdate=!0,s.normalsNeedUpdate=!0,s.colorsNeedUpdate=!0,s.buffersNeedUpdate=!0,s.boundingSphere=null,i[r].done&&(i[r].finished=!0),i[r].lastGL&&z.remove(i[r].lastGL);var l=null;if(l=i[r].mat instanceof n.LineBasicMaterial?new n.Line(s,i[r].mat):new n.Mesh(s,i[r].mat),i[r].mat.transparent&&0==i[r].mat.opacity?l.visible=!1:l.visible=!0,i[r].symmetries.length>1||1==i[r].symmetries.length&&!i[r].symmetries[r].isIdentity()){var u,c=new n.Object3D;for(u=0;u<i[r].symmetries.length;u++){var d=l.clone();d.matrix=i[r].symmetries[u],d.matrixAutoUpdate=!1,c.add(d)}i[r].lastGL=c,z.add(c)}else i[r].lastGL=l,z.add(l)}}}this.setView(o);new Date;return"function"==typeof e&&e(),this},this.autoload=function(e,t){n.autoload(e,t)},this.selectedAtoms=function(e){return a(e)},this.pdbData=function(e){for(var t=a(e),n="",r=0,o=t.length;r<o;++r)n+=t[r].pdbline+"\n";return n};var ge=function(e,t,r){if(1==r)return t;if(0==r)return e;var o=e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w;if(o>.9995){var a=new n.Quaternion(e.x+r*(t.x-e.x),e.y+r*(t.y-e.y),e.z+r*(t.z-e.z),e.w+r*(t.w-e.w));return a.normalize(),a}o<0&&(t=t.clone().multiplyScalar(-1),o=-o),o>1?o=1:o<-1&&(o=-1);var i=Math.acos(o),s=i*r,l=t.clone();l.sub(e.clone().multiplyScalar(o)),l.normalize();var u=Math.cos(s),c=Math.sin(s),d=new n.Quaternion(e.x*u+l.x*c,e.y*u+l.y*c,e.z*u+l.z*c,e.w*u+l.w*c);return d.normalize(),d},ve=function(e,t,n,r,o,a){var i=Math.ceil(e/20);i<1&&(i=1);var s={mpos:z.position.clone(),rz:F.position.z,rot:F.quaternion.clone(),cam:I.clone()};if(t){for(var i=new Array(i),l=i.length,u=0;u<l;u++){var c=(u+1)/l,d={mpos:s.mpos,rz:s.rz,rot:s.rot};n&&(d.mpos=n.clone().sub(s.mpos).multiplyScalar(c).add(s.mpos)),void 0!==r&&null!=r&&(d.rz=s.rz+c*(r-s.rz)),o&&(d.rot=ge(s.rot,o,c)),a&&(d.cam=a.clone().sub(s.cam).multiplyScalar(c).add(s.cam)),i[u]=d}var p=0,f=function(){var e=i[p];p+=1,e.mpos&&(z.position=e.mpos),e.rz&&(F.position.z=e.rz),e.rot&&(F.quaternion=e.rot),e.cam&&j.lookAt(e.cam),p<i.length&&setTimeout(f,20),ne()};setTimeout(f,20)}else{var h={},c=1/i;if(n&&(h.mpos=n.clone().sub(s.mpos).multiplyScalar(c)),void 0!==r&&null!=r&&(h.rz=c*(r-s.rz)),o){var d=ge(s.rot,o,c);h.rot=s.rot.clone().inverse().multiply(d)}a&&(h.cam=a.clone().sub(s.cam).multiplyScalar(c));var p=0,f=function(){p+=1,h.mpos&&z.position.add(h.mpos),h.rz&&(F.position.z+=h.rz),h.rot&&F.quaternion.multiply(h.rot),h.cam&&(I.add(h.cam),j.lookAt(I)),p<i&&setTimeout(f,20),ne()};setTimeout(f,20)}};this.zoom=function(e,t,n){var e=e||2,t=void 0!==t?t:0,r=(150-F.position.z)/e,o=150-r;return t>0?ve(t,n,z.position,o,F.quaternion,I):(F.position.z=o,ne()),this},this.translate=function(e,t,r,o){var r=void 0!==r?r:0,a=e/M,i=t/A,s=new n.Vector3(0,0,-150);N.projectVector(s,j),s.x-=a,s.y-=i,N.unprojectVector(s,j),s.z=0;var l=I.clone().add(s);return r>0?ve(r,o,z.position,F.position.z,F.quaternion,l):(I=l,j.lookAt(I),ne()),this},this.fitSlab=function(e){e=e||{};var t=a(e),r=n.getExtent(t),o=r[1][0]-r[0][0],i=r[1][1]-r[0][1],s=r[1][2]-r[0][2],l=Math.sqrt(o*o+i*i+s*s);return l<5&&(l=5),B=-l/1.9,V=l/2,this},this.center=function(e,t,r){t=void 0!==t?t:0;var o,i;e=e||{};var s=a(e),l=n.getExtent(s);$.isEmptyObject(e)?($.each(_,function(e,t){if(t&&t.boundingSphere&&t.boundingSphere.center){var r=t.boundingSphere.center,o=t.boundingSphere.radius;o>0?(s.push(new n.Vector3(r.x+o,r.y,r.z)),s.push(new n.Vector3(r.x-o,r.y,r.z)),s.push(new n.Vector3(r.x,r.y+o,r.z)),s.push(new n.Vector3(r.x,r.y-o,r.z)),s.push(new n.Vector3(r.x,r.y,r.z+o)),s.push(new n.Vector3(r.x,r.y,r.z-o))):s.push(r)}}),l=n.getExtent(s),o=s,i=l):(o=a({}),i=n.getExtent(o));var u=new n.Vector3(l[2][0],l[2][1],l[2][2]),c=i[1][0]-i[0][0],d=i[1][1]-i[0][1],p=i[1][2]-i[0][2],f=Math.sqrt(c*c+d*d+p*p);f<5&&(f=5),B=-f/1.9,V=f/2,c=l[1][0]-l[0][0],d=l[1][1]-l[0][1],p=l[1][2]-l[0][2],(f=Math.sqrt(c*c+d*d+p*p))<5&&(f=5);for(var h=25,m=0;m<s.length;m++)if(s[m]){var y=u.distanceToSquared(s[m]);y>h&&(h=y)}var f=2*Math.sqrt(h),g=u.clone().multiplyScalar(-1);return t>0?ve(t,r,g,F.position.z,F.quaternion,I):(z.position=g,ne()),this},this.zoomTo=function(e,t,r){t=void 0!==t?t:0;var o,i;e=e||{};var s=a(e),l=n.getExtent(s);$.isEmptyObject(e)?($.each(_,function(e,t){if(t&&t.boundingSphere&&t.boundingSphere.center){var r=t.boundingSphere.center,o=t.boundingSphere.radius;o>0?(s.push(new n.Vector3(r.x+o,r.y,r.z)),s.push(new n.Vector3(r.x-o,r.y,r.z)),s.push(new n.Vector3(r.x,r.y+o,r.z)),s.push(new n.Vector3(r.x,r.y-o,r.z)),s.push(new n.Vector3(r.x,r.y,r.z+o)),s.push(new n.Vector3(r.x,r.y,r.z-o))):s.push(r)}}),l=n.getExtent(s),o=s,i=l):(o=a({}),i=n.getExtent(o));var u=new n.Vector3(l[2][0],l[2][1],l[2][2]),c=i[1][0]-i[0][0],d=i[1][1]-i[0][1],p=i[1][2]-i[0][2],f=Math.sqrt(c*c+d*d+p*p);f<5&&(f=5),B=-f/1.9,V=f/2,c=l[1][0]-l[0][0],d=l[1][1]-l[0][1],p=l[1][2]-l[0][2],(f=Math.sqrt(c*c+d*d+p*p))<5&&(f=5);for(var h=25,m=0;m<s.length;m++)if(s[m]){var y=u.distanceToSquared(s[m]);y>h&&(h=y)}var f=2*Math.sqrt(h),g=u.clone().multiplyScalar(-1),v=-(.5*f/Math.tan(Math.PI/180*j.fov/2)-150);return t>0?ve(t,r,g,v,F.quaternion,I):(z.position=g,F.position.z=v,ne()),this},this.setSlab=function(e,t){B=e,V=t},this.getSlab=function(e){return{near:B,far:V}},this.addLabel=function(e,t,r){if(t=t||{},r){var o=n.getExtent(a(r));t.position={x:o[2][0],y:o[2][1],z:o[2][2]}}var i=new n.Label(e,t);return i.setContext(),z.add(i.sprite),t.fixed&&x.push(w.length),w.push(i),ne(),i},this.addResLabels=function(e,t){return l("addResLabels",e,this,t),this},this.removeLabel=function(e){for(var t=0;t<w.length;t++)if(w[t]==e){w.splice(t,1),e.dispose(),z.remove(e.sprite);break}return this},this.removeAllLabels=function(){for(var e=0;e<w.length;e++)z.remove(w[e].sprite);return w.splice(0,w.length),this},this.setLabelStyle=function(e,t){return z.remove(e.sprite),e.dispose(),e.stylespec=t,e.setContext(),z.add(e.sprite),ne(),e},this.setLabelText=function(e,t){return z.remove(e.sprite),e.dispose(),e.text=t,e.setContext(),z.add(e.sprite),ne(),e};this.addShape=function(e){e=e||{};var t=new n.GLShape(e);return t.shapePosition=_.length,_.push(t),t},this.removeShape=function(e){if(!e)return this;for(e.removegl(z),delete _[e.shapePosition];_.length>0&&void 0===_[_.length-1];)_.pop();return this},this.removeAllShapes=function(){for(var e=0;e<_.length;e++){_[e].removegl(z)}return _.splice(0,_.length),this},this.addSphere=function(e){e=e||{};var t=new n.GLShape(e);return t.shapePosition=_.length,t.addSphere(e),_.push(t),t},this.addArrow=function(e){e=e||{};var t=new n.GLShape(e);return t.shapePosition=_.length,t.addArrow(e),_.push(t),t},this.addCylinder=function(e){e=e||{};var t=new n.GLShape(e);return t.shapePosition=_.length,e.dashed?t.addDashedCylinder(e):t.addCylinder(e),_.push(t),t},this.addLine=function(e){e=e||{},e.wireframe=!0;var t=new n.GLShape(e);return t.shapePosition=_.length,e.dashed?t=s(e,t):t.addLine(e),_.push(t),t},this.addUnitCell=function(e){var t=new n.GLShape({wireframe:!0});t.shapePosition=_.length;var r=e.getCrystData();if(r){if(r.matrix)var o=r.matrix;else{var a=r.a,i=r.b,s=r.c,l=r.alpha,u=r.beta,c=r.gamma;l=l*Math.PI/180,u=u*Math.PI/180,c=c*Math.PI/180;var d,p,f;d=Math.cos(u),p=(Math.cos(l)-Math.cos(u)*Math.cos(c))/Math.sin(c),f=Math.sqrt(Math.max(0,1-d*d-p*p));var o=new n.Matrix4(a,i*Math.cos(c),s*d,0,0,i*Math.sin(c),s*p,0,0,0,s*f,0,0,0,0,1)}for(var h=[new n.Vector3(0,0,0),new n.Vector3(1,0,0),new n.Vector3(0,1,0),new n.Vector3(0,0,1),new n.Vector3(1,1,0),new n.Vector3(0,1,1),new n.Vector3(1,0,1),new n.Vector3(1,1,1)],m=0;m<h.length;m++)h[m]=h[m].applyMatrix4(o);t.addLine({start:h[0],end:h[1]}),t.addLine({start:h[0],end:h[2]}),t.addLine({start:h[1],end:h[4]}),t.addLine({start:h[2],end:h[4]}),t.addLine({start:h[0],end:h[3]}),t.addLine({start:h[3],end:h[5]}),t.addLine({start:h[2],end:h[5]}),t.addLine({start:h[1],end:h[6]}),t.addLine({start:h[4],end:h[7]}),t.addLine({start:h[6],end:h[7]}),t.addLine({start:h[3],end:h[6]}),t.addLine({start:h[5],end:h[7]})}return _.push(t),t},this.addCustom=function(e){e=e||{};var t=new n.GLShape(e);return t.shapePosition=_.length,t.addCustom(e),_.push(t),t},this.addVolumetricData=function(e,t,r){r=r||{};var o=new n.GLShape(r);return o.shapePosition=_.length,o.addVolumetricData(e,t,r),_.push(o),o},this.addIsosurface=function(e,t,r){t=t||{};var o=new n.GLShape(t);return o.shapePosition=_.length,o.addIsosurface(e,t,r),_.push(o),o},this.enableFog=function(e){e?L.fog=new n.Fog(f,100,200):(o.disableFog=!0,ne())},this.setFrame=function(e){for(var t=0;t<v.length;t++)v[t].setFrame(e);return this},this.getFrames=function(){for(var e=0,t=0;t<v.length;t++)v[t].getFrames().length>e&&(t,e=v[t].getFrames().length);return e},this.animate=function(e){U=!0;var t=100,n="forward",r=0;e=e||{},e.interval&&(t=e.interval),e.loop&&(n=e.loop),e.reps&&(r=e.reps);var o=this.getFrames(),a=this,i=0,s=1,l=0,u=o*r,c=function(e){"forward"==e?(a.setFrame(i),i=(i+s)%o):"backward"==e?(a.setFrame(o-1-i),i=(i+s)%o):(a.setFrame(i),i+=s,s*=i%(o-1)==0?-1:1),a.render(),++l!=u&&a.isAnimated()||clearInterval(d)},d=setInterval(function(){c(n)},t);return this},this.stopAnimate=function(){return U=!1,this},this.isAnimated=function(){return U},this.addModel=function(e,t,r){var o=new n.GLModel(v.length,d);return o.addMolData(e,t,r),v.push(o),o},this.addModels=function(e,t,r){r=r||{},r.multimodel=!0,r.frames=!0;for(var o=n.GLModel.parseMolData(e,t,r),a=0;a<o.length;a++){var i=new n.GLModel(v.length,d);i.setAtomDefaults(o[a]),i.addFrame(o[a]),i.setFrame(0),o.modelData&&i.setModelData(o.modelData[a]),i.setDontDuplicateAtoms(!r.duplicateAssemblyAtoms),v.push(i)}return v},this.addModelsAsFrames=function(e,t,r){r=r||{},r.multimodel=!0,r.frames=!0;var o=new n.GLModel(v.length,d);return o.addMolData(e,t,r),v.push(o),o},this.addAsOneMolecule=function(e,t,r){r=r||{},r.multimodel=!0,r.onemol=!0;var o=new n.GLModel(v.length,d);return o.addMolData(e,t,r),v.push(o),o},this.removeModel=function(e){if(e){for(e.removegl(z),delete v[e.getID()];v.length>0&&void 0===v[v.length-1];)v.pop();return this}},this.removeAllModels=function(){for(var e=0;e<v.length;e++){v[e].removegl(z)}return v.splice(0,v.length),this},this.exportJSON=function(e,t){var n={};return n.m=void 0===t?v.map(function(t){return t.toCDObject(e)}):[model[t].toCDObject()],JSON.stringify(n)},this.createModelFrom=function(e,t){for(var r=new n.GLModel(v.length,d),o=0;o<v.length;o++)if(v[o]){var a=v[o].selectedAtoms(e);r.addAtoms(a),t&&v[o].removeAtoms(a)}return v.push(r),r},this.setStyle=function(e,t){return void 0===t&&(t=e,e={}),l("setStyle",e,t,!1),this},this.addStyle=function(e,t){return void 0===t&&(t=e,e={}),l("setStyle",e,t,!0),this},this.setClickable=function(e,t,n){return l("setClickable",e,t,n),this},this.setHoverable=function(e,t,n,r){return l("setHoverable",e,t,n,r),this},this.vibrate=function(e,t){return l("vibrate",e,t),this},this.setColorByProperty=function(e,t,n,r){return l("setColorByProperty",e,t,n,r),this},this.setColorByElement=function(e,t){return l("setColorByElement",e,t),this};var be=function(e,t){for(var n=[],r=0;r<e.length;r++){var o=e[r];void 0!==o&&(o.x<t[0][0]||o.x>t[1][0]||o.y<t[0][1]||o.y>t[1][1]||o.z<t[0][2]||o.z>t[1][2]||n.push(o))}return n},_e=function(e){return(e[1][0]-e[0][0])*(e[1][1]-e[0][1])*(e[1][2]-e[0][2])},we=function(e,t,n){for(var o=[],a={},i=0,s=t.length;i<s;i++)a[t[i].index]=i;for(var l=(function(e){for(var t=[],n=0,r=e.length;n<r;n++)e[n].index in a&&t.push(a[e[n].index]);return t}),u=function(e){var t=[];return t[0]=[e[0][0],e[0][1],e[0][2]],t[1]=[e[1][0],e[1][1],e[1][2]],t},c=function(e){if(_e(e)<r)return[e];var t,n=e[1][0]-e[0][0],o=e[1][1]-e[0][1],a=e[1][2]-e[0][2];t=n>o&&n>a?0:o>n&&o>a?1:2;var i=u(e),s=u(e),l=(e[1][t]-e[0][t])/2+e[0][t];i[1][t]=l,s[0][t]=l;var d=c(i),p=c(s);return d.concat(p)},d=c(e),i=0,s=d.length;i<s;i++){var p=u(d[i]);p[0][0]-=6,p[0][1]-=6,p[0][2]-=6,p[1][0]+=6,p[1][1]+=6,p[1][2]+=6;var f=be(t,p),h=be(n,d[i]);o.push({extent:d[i],atoms:l(f),toshow:l(h)})}return o},xe=function(e,t,r){var o=new n.Geometry(!0),a=o.updateGeoGroup(0),i=[];for(u=0,c=e.length;u<c;u++){var s=e[u];s&&(void 0!==s.surfaceColor?i[u]=s.surfaceColor:s.color&&(i[u]=n.CC.color(s.color)))}var l,u,c,d=a.vertexArray,p=t.vertices;for(u=0,c=p.length;u<c;u++)l=3*a.vertices,d[l]=p[u].x,d[l+1]=p[u].y,d[l+2]=p[u].z,a.vertices++;var f=a.colorArray;if(r.voldata&&r.volscheme){var h=r.volscheme,m=r.voldata,y=h.range()||[-1,1];for(u=0,c=p.length;u<c;u++){var g=m.getVal(p[u].x,p[u].y,p[u].z),v=n.CC.color(h.valueToHex(g,y)),l=3*u;f[l]=v.r,f[l+1]=v.g,f[l+2]=v.b}}else if(i.length>0)for(u=0,c=p.length;u<c;u++){var b=p[u].atomid,_=3*u;f[_]=i[b].r,f[_+1]=i[b].g,f[_+2]=i[b].b}var w=t.faces;a.faceidx=w.length,o.initTypedArrays();var x,S,C,k,E=a.vertexArray,M=a.normalArray;for(u=0,c=w.length;u<c;u+=3){var A=w[u],T=w[u+1],O=w[u+2],b=p[A].atomid,_=(p[T].atomid,p[O].atomid,3*A),P=3*T,j=3*O;x=new n.Vector3(E[_],E[_+1],E[_+2]),S=new n.Vector3(E[P],E[P+1],E[P+2]),C=new n.Vector3(E[j],E[j+1],E[j+2]),C.subVectors(C,S),x.subVectors(x,S),C.cross(x),k=C,k.normalize(),M[_]+=k.x,M[P]+=k.x,M[j]+=k.x,M[_+1]+=k.y,M[P+1]+=k.y,M[j+1]+=k.y,M[_+2]+=k.z,M[P+2]+=k.z,M[j+2]+=k.z}a.faceArray=new Uint16Array(w);var I=new n.Mesh(o,r);return I.doubleSided=!0,I},Se=function(e,t,r,o,a,i){var s=(new Date,new n.ProteinSurface);s.initparm(t,1!==e,i);new Date;s.fillvoxels(a,r);new Date;s.buildboundary(),e!=n.SurfaceType.SES&&e!=n.SurfaceType.MS||(s.fastdistancemap(),s.boundingatom(!1),s.fillvoxelswaals(a,r));new Date;s.marchingcube(e);new Date;return s.getFacesAndVertices(o)};this.addMesh=function(e){var t={geo:e.geometry,mat:e.material,done:!0,finished:!1},n=ee();return b[n]=t,n};var Ce=function(e){var t=[];return $.each(e,function(e,n){t[e]=$.extend({},n)}),t},ke={VDW:n.SurfaceType.VDW,MS:n.SurfaceType.MS,SAS:n.SurfaceType.SAS,SES:n.SurfaceType.SES};this.addSurface=function(e,r,o,i,s,l){var c=ee();"string"==typeof e?void 0!==ke[e]?e=ke[e]:console.log("Surface type : "+e+" is not recognized"):void 0===e&&console.log("Surface type : "+e+" is not recognized");var d=null,p=null,f=Ce(a(o));d=i?Ce(a(i)):f;var h,y=!1;for(h=0;h<v.length;h++)if(v[h]){var g=v[h].getSymmetries();if(g.length>1||1==g.length&&!g[0].isIdentity()){y=!0;break}}var _=function(o,i,u){p=s?Ce(a(s)):u;var d,f,h,y=(new Date,n.getExtent(u,!0));if(r.map&&r.map.prop){var g=r.map.prop,v=r.map.scheme||r.map.gradient||new n.Gradient.RWB,b=v.range();b||(b=n.getPropertyRange(u,g)),r.colorscheme={prop:g,gradient:v}}for(f=0,h=i.length;f<h;f++)d=i[f],d.surfaceColor=n.getColorFromStyle(d,r);var _=_e(y),x=we(y,i,u);if(p&&p.length&&p.length>0){var S=n.getExtent(p,!0),C=function(e,t){var n=function(e,t){var n=e.extent,r=n[1][0]-n[0][0],o=n[1][1]-n[0][1],a=n[1][2]-n[0][2],i=r-t[2][0];i*=i;var s=o-t[2][1];s*=s;var l=a-t[2][2];return l*=l,i+s+l};return n(e,S)-n(t,S)};x.sort(C)}var k=[];for(f=0,h=i.length;f<h;f++)d=i[f],k[f]={x:d.x,y:d.y,z:d.z,serial:f,elem:d.elem};if(!n.syncSurface){var E=[];for(e<0&&(e=0),f=0,h=t;f<h;f++){var M=new Worker(n.SurfaceWorker);E.push(M),M.postMessage({type:-1,atoms:k,volume:_})}var A=0,T=function(e){for(var t=n.splitMesh({vertexArr:e.data.vertices,faceArr:e.data.faces}),r=0,a=t.length;r<a;r++){var s={vertices:t[r].vertexArr,faces:t[r].faceArr},u=xe(i,s,w);n.mergeGeos(o.geo,u)}m.render(),++A==x.length&&(o.done=!0,l&&"function"==typeof l&&l(c))},O=function(e){console.log(e.message+" ("+e.filename+":"+e.lineno+")")};for(f=0;f<x.length;f++){var P=E[f%E.length];P.onmessage=T,P.onerror=O,P.postMessage({type:e,expandedExtent:x[f].extent,extendedAtoms:x[f].atoms,atomsToShow:x[f].toshow})}}else{var j=function t(r){if(r>=x.length)return void(l&&"function"==typeof l&&l(c));for(var a=Se(e,x[r].extent,x[r].atoms,x[r].toshow,k,_),s=n.splitMesh({vertexArr:a.vertices,faceArr:a.faces}),u=0,d=s.length;u<d;u++){var a={vertices:s[u].vertexArr,faces:s[u].faceArr},p=xe(i,a,w);n.mergeGeos(o.geo,p)}m.render(),setTimeout(t,1,r+1)};setTimeout(j,1,0)}};r=r||{};var w=u(r),x=[];if(y){var S={},C={};for(h=0;h<v.length;h++)S[h]=[],C[h]=[];for(h=0;h<d.length;h++)S[d[h].model].push(d[h]);for(h=0;h<f.length;h++)C[f[h].model].push(f[h]);for(h=0;h<v.length;h++)C[h].length>0&&(x.push({geo:new n.Geometry(!0),mat:w,done:!1,finished:!1,symmetries:v[h].getSymmetries()}),_(x[h],S[h],C[h]))}else x.push({geo:new n.Geometry(!0),mat:w,done:!1,finished:!1,symmetries:[new n.Matrix4]}),_(x[x.length-1],d,f);return b[c]=x,c},this.setSurfaceMaterialStyle=function(e,t){if(b[e])for(var r=b[e],o=0;o<r.length;o++){var a=r[o].mat=u(t);if(r[o].mat.side=n.FrontSide,t.color){r[o].mat.color=t.color,r[o].geo.colorsNeedUpdate=!0;var i=n.CC.color(t.color);r[o].geo.setColors(function(){return i})}else if(a.voldata&&a.volscheme){var s=a.volscheme,l=a.voldata,c=s.range()||[-1,1];r[o].geo.setColors(function(e,t,r){var o=l.getVal(e,t,r);return n.CC.color(s.valueToHex(o,c))})}r[o].finished=!1}return this},this.removeSurface=function(e){for(var t=b[e],n=0;n<t.length;n++)t[n]&&t[n].lastGL&&(void 0!==t[n].geo&&t[n].geo.dispose(),void 0!==t[n].mat&&t[n].mat.dispose(),z.remove(t[n].lastGL));return delete b[e],ne(),this},this.removeAllSurfaces=function(){for(var e in b)if(b.hasOwnProperty(e)){for(var t=b[e],n=0;n<t.length;n++)t[n]&&t[n].lastGL&&(void 0!==t[n].geo&&t[n].geo.dispose(),void 0!==t[n].mat&&t[n].mat.dispose(),z.remove(t[n].lastGL));delete b[e]}return ne(),this},this.jmolMoveTo=function(){var e=z.position,t="center { "+-e.x+" "+-e.y+" "+-e.z+" }; ",n=F.quaternion;return t+="moveto .5 quaternion { "+n.x+" "+n.y+" "+n.z+" "+n.w+" };"},this.clear=function(){return this.removeAllSurfaces(),this.removeAllModels(),this.removeAllLabels(),this.removeAllShapes(),ne(),this},this.mapAtomProperties=function(e,t){t=t||{};var n=a(t);if("function"==typeof e)for(var r=0,o=n.length;r<o;r++){var s=n[r];e(s)}else for(var r=0,o=n.length;r<o;r++)for(var s=n[r],l=0,u=e.length;l<u;l++){var c=e[l];if(c.props)for(var d in c.props)c.props.hasOwnProperty(d)&&i(s,c)&&(s.properties||(s.properties={}),s.properties[d]=c.props[d])}return this},this.linkViewer=function(e){return O.push(e),this};try{"function"==typeof c&&c(this)}catch(e){console.log("error with glviewer callback: "+e)}}var t=4,r=64e3;return e}(),n.glmolViewer=n.GLViewer;var n=n||{};n.Gradient=function(e,t){},n.Gradient.valueToHex=function(e,t){},n.Gradient.range=function(){},n.Gradient.RWB=function(e,t,n){void 0===t&&$.isArray(e)&&e.length>=2&&(t=e[1],e=e[0]),this.valueToHex=function(r,o){var a,i;if(r*=1,o?(a=o[0],i=o[1]):(a=e,i=t),void 0===r)return 16777215;i>a?(r<a&&(r=a),r>i&&(r=i)):(r>a&&(r=a),r<i&&(r=i));var s=(i+a)/2;s=o&&void 0!==o[2]?o[2]:void 0!==n?n:(a+i)/2;var l;return a<i?r<=s?(l=Math.floor(255*Math.sqrt((r-a)/(s-a))),16711680+256*l+l):(l=Math.floor(255*Math.sqrt(1-(r-s)/(i-s))),65536*l+256*l+255):a>i?r<=s?(l=Math.floor(255*Math.sqrt(1-(r-s)/(i-s))),65536*l+256*l+255):(l=Math.floor(255*Math.sqrt((r-a)/(s-a))),16711680+256*l+l):void 0},this.range=function(){return void 0!==e&&void 0!==t?[e,t]:null}},n.Gradient.ROYGB=function(e,t){void 0===t&&$.isArray(e)&&e.length>=2&&(t=e[1],e=e[0]),this.valueToHex=function(n,r){var o,a;if(n*=1,r?(o=r[0],a=r[1]):(o=e,a=t),void 0===n)return 16777215;if(a>o)n<o&&(n=o),n>a&&(n=a);else{n>o&&(n=o),n<a&&(n=a),n=o-n;var i=o;o=a,a=i}var s,l=(o+a)/2,u=(o+l)/2,c=(l+a)/2;return n<u?(s=Math.floor(255*Math.sqrt((n-o)/(u-o))),16711680+256*s+0):n<l?(s=Math.floor(255*Math.sqrt(1-(n-u)/(l-u))),65536*s+65280+0):n<c?(s=Math.floor(255*Math.sqrt((n-l)/(c-l))),65280+1*s):(s=Math.floor(255*Math.sqrt(1-(n-c)/(a-c))),0+256*s+255)},this.range=function(){return void 0!==e&&void 0!==t?[e,t]:null}},n.Gradient.Sinebow=function(e,t){var n=1;void 0===t&&$.isArray(e)&&e.length>=2&&(t=e[1],e=e[0]),t<e&&(n=-1,e*=-1,t*=-1),this.valueToHex=function(r,o){var a,i;if(r*=n,o?(a=o[0],i=o[1]):(a=e,i=t),void 0===r)return 16777215;i>a?(r<a&&(r=a),r>i&&(r=i)):(r>a&&(r=a),r<i&&(r=i));var s=(r-a)/(i-a),l=5*s/6+.5,u=Math.sin(Math.PI*l);u*=255*u;var c=Math.sin(Math.PI*(l+1/3));c*=255*c;var d=Math.sin(Math.PI*(l+2/3));return d*=255*d,65536*Math.floor(u)+256*Math.floor(d)+1*Math.floor(c)},this.range=function(){return void 0!==e&&void 0!==t?[e,t]:null}},n.Gradient.builtinGradients={rwb:n.Gradient.RWB,roygb:n.Gradient.ROYGB,sinebow:n.Gradient.Sinebow},n.LabelCount=0,n.Label=function(e,t){this.id=n.LabelCount++,this.stylespec=t||{},this.canvas=document.createElement("canvas"),this.canvas.width=134,this.canvas.height=35,this.context=this.canvas.getContext("2d"),this.sprite=new n.Sprite,this.text=e},n.Label.prototype={constructor:n.Label,getStyle:function(){return this.stylespec},setContext:function(){var e=function(e,t,n,r,o,a,i){e.beginPath(),e.moveTo(t+a,n),e.lineTo(t+r-a,n),e.quadraticCurveTo(t+r,n,t+r,n+a),e.lineTo(t+r,n+o-a),e.quadraticCurveTo(t+r,n+o,t+r-a,n+o),e.lineTo(t+a,n+o),e.quadraticCurveTo(t,n+o,t,n+o-a),e.lineTo(t,n+a),e.quadraticCurveTo(t,n,t+a,n),e.closePath(),e.fill(),i&&e.stroke()},t=function(e,t,r){var o=r;return void 0!==e&&(o=e instanceof n.Color?e.scaled():n.CC.color(e).scaled()),void 0!==t&&(o.a=parseFloat(t)),o};return function(){var r=this.stylespec,o=void 0!==r.useScreen&&r.useScreen,a=r.showBackground;"0"!==a&&"false"!==a||(a=!1),void 0===a&&(a=!0);var i=r.font?r.font:"sans-serif",s=parseInt(r.fontSize)?parseInt(r.fontSize):18,l=t(r.fontColor,r.fontOpacity,{r:255,g:255,b:255,a:1}),u=r.padding?r.padding:4,c=r.borderThickness?r.borderThickness:0,d=t(r.backgroundColor,r.backgroundOpacity,{r:0,g:0,b:0,a:1}),p=t(r.borderColor,r.borderOpacity,d),f=r.position?r.position:{x:-10,y:1,z:1},h=void 0===r.inFront||r.inFront;"false"!==h&&"0"!==h||(h=!1);var m=r.alignment||n.SpriteAlignment.topLeft;"string"==typeof m&&m in n.SpriteAlignment&&(m=n.SpriteAlignment[m]);var y="";r.bold&&(y="bold "),this.context.font=y+s+"px  "+i;var g=this.context.measureText(this.text),v=g.width;a||(c=0);var b=v+2.5*c+2*u,_=1.25*s+2*c+2*u;if(r.backgroundImage){var w=r.backgroundImage,x=r.backgroundWidth?r.backgroundWidth:w.width,S=r.backgroundHeight?r.backgroundHeight:w.height;x>b&&(b=x),S>_&&(_=S)}this.canvas.width=b,this.canvas.height=_,this.context.clearRect(0,0,this.canvas.width,this.canvas.height);var y="";if(r.bold&&(y="bold "),this.context.font=y+s+"px  "+i,this.context.fillStyle="rgba("+d.r+","+d.g+","+d.b+","+d.a+")",this.context.strokeStyle="rgba("+p.r+","+p.g+","+p.b+","+p.a+")",this.context.lineWidth=c,a&&e(this.context,c,c,b-2*c,_-2*c,6,c>0),r.backgroundImage){var w=r.backgroundImage,x=r.backgroundWidth?r.backgroundWidth:w.width,S=r.backgroundHeight?r.backgroundHeight:w.height;this.context.drawImage(w,0,0,x,S)}this.context.fillStyle="rgba("+l.r+","+l.g+","+l.b+","+l.a+")",this.context.fillText(this.text,c+u,s+c+u,v);var C=new n.Texture(this.canvas);C.needsUpdate=!0,this.sprite.material=new n.SpriteMaterial({map:C,useScreenCoordinates:o,alignment:m,depthTest:!h}),this.sprite.scale.set(1,1,1),this.sprite.position.set(f.x,f.y,f.z)}}(),dispose:function(){void 0!==this.sprite.material.map&&this.sprite.material.map.dispose(),void 0!==this.sprite.material&&this.sprite.material.dispose()}},n=n||{},n.MarchingCubeInitializer=function(){var e={};e.march=function(e,i,s,l){var u=!!l.fulltable,c=l.hasOwnProperty("origin")&&l.origin.hasOwnProperty("x")?l.origin:{x:0,y:0,z:0},d=!!l.voxel,p=l.matrix,f=l.nX||0,h=l.nY||0,m=l.nZ||0,y=l.scale||1,g=null;g=l.unitCube?l.unitCube:{x:y,y:y,z:y};var v,b,_=new Int32Array(f*h*m);for(v=0,b=_.length;v<b;++v)_[v]=-1;var w=function(e,t,r,o,a,s){var l={x:0,y:0,z:0},u=!!(o&1<<a),f=!!(o&1<<s),y=a;!u&&f&&(y=s),1&y&&r++,2&y&&t++,4&y&&e++,p?(l=new n.Vector3(e,t,r),l=l.applyMatrix4(p),l={x:l.x,y:l.y,z:l.z}):(l.x=c.x+g.x*e,l.y=c.y+g.y*t,l.z=c.z+g.z*r);var v=(h*e+t)*m+r;return d?(i.push(l),i.length-1):(_[v]<0&&(_[v]=i.length,i.push(l)),_[v])},x=new Int32Array(12),S=u?o:t,C=u?a:r;for(v=0;v<f-1;++v)for(var k=0;k<h-1;++k)for(var E=0;E<m-1;++E){for(var M=0,A=0;A<8;++A){var T=(h*(v+((4&A)>>2))+k+((2&A)>>1))*m+E+(1&A),O=!!(2&e[T]);M|=O<<A}if(0!==M&&255!==M){var P=S[M];if(0!==P){var j=C[M];1&P&&(x[0]=w(v,k,E,M,0,1)),2&P&&(x[1]=w(v,k,E,M,1,3)),4&P&&(x[2]=w(v,k,E,M,3,2)),8&P&&(x[3]=w(v,k,E,M,2,0)),16&P&&(x[4]=w(v,k,E,M,4,5)),32&P&&(x[5]=w(v,k,E,M,5,7)),64&P&&(x[6]=w(v,k,E,M,7,6)),128&P&&(x[7]=w(v,k,E,M,6,4)),256&P&&(x[8]=w(v,k,E,M,0,4)),512&P&&(x[9]=w(v,k,E,M,1,5)),1024&P&&(x[10]=w(v,k,E,M,3,7)),2048&P&&(x[11]=w(v,k,E,M,2,6));for(var I=0;I<j.length;I+=3){var D=x[j[I]],N=x[j[I+1]],R=x[j[I+2]];d&&I>=3&&(i.push(i[D]),D=i.length-1,i.push(i[N]),N=i.length-1,i.push(i[R]),R=i.length-1),s.push(D),s.push(N),s.push(R)}}}}},e.laplacianSmooth=function(e,t,n){var r,o,a,i,s,l=new Array(t.length);for(r=0,o=t.length;r<o;r++)l[r]={x:0,y:0,z:0};var u,c=new Array(20);for(r=0;r<20;r++)c[r]=new Array(t.length);for(r=0,o=t.length;r<o;r++)c[0][r]=0;for(r=0,o=n.length/3;r<o;r++){var d=3*r,p=3*r+1,f=3*r+2;for(u=!0,a=0,i=c[0][n[d]];a<i;a++)if(n[p]==c[a+1][n[d]]){u=!1;break}for(u&&(c[0][n[d]]++,c[c[0][n[d]]][n[d]]=n[p]),u=!0,a=0,i=c[0][n[d]];a<i;a++)if(n[f]==c[a+1][n[d]]){u=!1;break}for(u&&(c[0][n[d]]++,c[c[0][n[d]]][n[d]]=n[f]),u=!0,a=0,i=c[0][n[p]];a<i;a++)if(n[d]==c[a+1][n[p]]){u=!1;break}for(u&&(c[0][n[p]]++,c[c[0][n[p]]][n[p]]=n[d]),u=!0,a=0,i=c[0][n[p]];a<i;a++)if(n[f]==c[a+1][n[p]]){u=!1;break}for(u&&(c[0][n[p]]++,c[c[0][n[p]]][n[p]]=n[f]),u=!0,a=0;a<c[0][n[f]];a++)if(n[d]==c[a+1][n[f]]){u=!1;break}for(u&&(c[0][n[f]]++,c[c[0][n[f]]][n[f]]=n[d]),u=!0,a=0,i=c[0][n[f]];a<i;a++)if(n[p]==c[a+1][n[f]]){u=!1;break}u&&(c[0][n[f]]++,c[c[0][n[f]]][n[f]]=n[p])}for(s=0;s<e;s++){for(r=0,o=t.length;r<o;r++)if(c[0][r]<3)l[r].x=t[r].x,l[r].y=t[r].y,l[r].z=t[r].z;else if(3==c[0][r]||4==c[0][r]){for(l[r].x=0,l[r].y=0,l[r].z=0,a=0,i=c[0][r];a<i;a++)l[r].x+=t[c[a+1][r]].x,l[r].y+=t[c[a+1][r]].y,l[r].z+=t[c[a+1][r]].z;l[r].x+=.5*t[r].x,l[r].y+=.5*t[r].y,l[r].z+=.5*t[r].z,l[r].x/=.5+c[0][r],l[r].y/=.5+c[0][r],l[r].z/=.5+c[0][r]}else{for(l[r].x=0,l[r].y=0,l[r].z=0,a=0,i=c[0][r];a<i;a++)l[r].x+=t[c[a+1][r]].x,l[r].y+=t[c[a+1][r]].y,l[r].z+=t[c[a+1][r]].z;l[r].x+=1*t[r].x,l[r].y+=1*t[r].y,l[r].z+=1*t[r].z,l[r].x/=1+c[0][r],l[r].y/=1+c[0][r],l[r].z/=1+c[0][r]}for(r=0,o=t.length;r<o;r++)t[r].x=l[r].x,t[r].y=l[r].y,t[r].z=l[r].z}},e.edgeTable=[0,0,0,0,0,0,0,2816,0,0,0,1792,0,3328,3584,3840,0,0,0,138,0,21,0,134,0,0,0,652,0,2067,3865,3600,0,0,0,42,0,0,0,294,0,0,21,28,0,3875,1049,3360,0,168,162,170,0,645,2475,2210,0,687,293,172,4010,3747,3497,3232,0,0,0,0,0,69,0,900,0,0,0,1792,138,131,1608,1920,0,81,0,2074,84,85,84,86,0,81,0,3676,330,1105,1881,1616,0,0,0,42,0,69,0,502,0,0,21,3580,138,2035,1273,1520,2816,104,2337,106,840,581,367,102,2816,3695,3429,3180,1898,1635,1385,1120,0,0,0,0,0,0,0,3910,0,0,69,588,42,2083,41,2880,0,0,0,1722,0,2293,4095,3830,0,255,757,764,2538,2291,3065,2800,0,0,81,338,0,3925,1119,3414,84,855,85,340,2130,2899,89,2384,1792,712,194,1162,4036,3781,3535,3270,708,719,197,204,3018,2755,2505,2240,0,0,0,0,168,420,168,1958,162,162,676,2988,170,163,680,928,3328,3096,3328,3642,52,53,1855,1590,2340,2111,2869,2620,298,51,825,560,3584,3584,3090,3482,1668,1941,1183,1430,146,2975,2069,2460,154,915,153,400,3840,3592,3329,3082,1796,1541,1295,1030,2818,2575,2309,2060,778,515,265,0];var t=new Uint32Array(e.edgeTable),r=e.triTable=[[],[],[],[],[],[],[],[11,9,8],[],[],[],[8,10,9],[],[10,8,11],[9,11,10],[8,10,9,8,11,10],[],[],[],[1,7,3],[],[4,2,0],[],[2,1,7],[],[],[],[2,7,3,2,9,7],[],[1,4,11,1,0,4],[3,8,0,11,9,4,11,10,9],[4,11,9,11,10,9],[],[],[],[5,3,1],[],[],[],[2,5,8,2,1,5],[],[],[2,4,0],[3,2,4],[],[0,9,1,8,10,5,8,11,10],[3,4,0,3,10,4],[5,8,10,8,11,10],[],[3,5,7],[7,1,5],[1,7,3,1,5,7],[],[9,2,0,9,7,2],[0,3,8,1,7,11,1,5,7],[11,1,7,1,5,7],[],[9,1,0,5,3,2,5,7,3],[8,2,5,8,0,2],[2,5,3,5,7,3],[3,9,1,3,8,9,7,11,10,7,10,5],[9,1,0,10,7,11,10,5,7],[3,8,0,7,10,5,7,11,10],[11,5,7,11,10,5],[],[],[],[],[],[0,6,2],[],[7,2,9,7,9,8],[],[],[],[8,10,9],[7,1,3],[7,1,0],[6,9,3,6,10,9],[7,10,8,10,9,8],[],[6,0,4],[],[11,1,4,11,3,1],[2,4,6],[2,0,4,2,4,6],[2,4,6],[1,4,2,4,6,2],[],[6,0,4],[],[2,11,3,6,9,4,6,10,9],[8,6,1,8,1,3],[10,0,6,0,4,6],[8,0,3,9,6,10,9,4,6],[10,4,6,10,9,4],[],[],[],[5,3,1],[],[0,6,2],[],[7,4,8,5,2,1,5,6,2],[],[],[2,4,0],[7,4,8,2,11,3,10,5,6],[7,1,3],[5,6,10,0,9,1,8,7,4],[5,6,10,7,0,3,7,4,0],[10,5,6,4,8,7],[9,11,8],[3,5,6],[0,5,11,0,11,8],[6,3,5,3,1,5],[3,9,6,3,8,9],[9,6,0,6,2,0],[0,3,8,2,5,6,2,1,5],[1,6,2,1,5,6],[9,11,8],[1,0,9,6,10,5,11,3,2],[6,10,5,2,8,0,2,11,8],[3,2,11,10,5,6],[10,5,6,9,3,8,9,1,3],[0,9,1,5,6,10],[8,0,3,10,5,6],[10,5,6],[],[],[],[],[],[],[],[1,10,2,9,11,6,9,8,11],[],[],[6,0,2],[3,6,9,3,2,6],[3,5,1],[0,5,1,0,11,5],[0,3,5],[6,9,11,9,8,11],[],[],[],[4,5,9,7,1,10,7,3,1],[],[11,6,7,2,4,5,2,0,4],[11,6,7,8,0,3,1,10,2,9,4,5],[6,7,11,1,10,2,9,4,5],[],[4,1,0,4,5,1,6,7,3,6,3,2],[9,4,5,0,6,7,0,2,6],[4,5,9,6,3,2,6,7,3],[6,7,11,5,3,8,5,1,3],[6,7,11,4,1,0,4,5,1],[4,5,9,3,8,0,11,6,7],[9,4,5,7,11,6],[],[],[0,6,4],[8,6,4,8,1,6],[],[0,10,2,0,9,10,4,8,11,4,11,6],[10,2,1,6,0,3,6,4,0],[10,2,1,11,4,8,11,6,4],[4,2,6],[1,0,9,2,4,8,2,6,4],[2,4,0,2,6,4],[8,2,4,2,6,4],[11,4,1,11,6,4],[0,9,1,4,11,6,4,8,11],[3,6,0,6,4,0],[8,6,4,8,11,6],[10,8,9],[6,3,9,6,7,3],[6,7,1],[10,7,1,7,3,1],[7,11,6,8,10,2,8,9,10],[11,6,7,10,0,9,10,2,0],[2,1,10,7,11,6,8,0,3],[1,10,2,6,7,11],[7,2,6,7,9,2],[1,0,9,3,6,7,3,2,6],[7,0,6,0,2,6],[2,7,3,2,6,7],[7,11,6,3,9,1,3,8,9],[9,1,0,11,6,7],[0,3,8,11,6,7],[11,6,7],[],[],[],[],[5,3,7],[8,5,2,8,7,5],[5,3,7],[1,10,2,5,8,7,5,9,8],[1,7,5],[1,7,5],[9,2,7,9,7,5],[11,3,2,8,5,9,8,7,5],[1,3,7,1,7,5],[0,7,1,7,5,1],[9,3,5,3,7,5],[9,7,5,9,8,7],[8,10,11],[3,4,10,3,10,11],[8,10,11],[5,9,4,1,11,3,1,10,11],[2,4,5],[5,2,4,2,0,4],[0,3,8,5,9,4,10,2,1],[2,1,10,9,4,5],[2,8,5,2,11,8],[3,2,11,1,4,5,1,0,4],[9,4,5,8,2,11,8,0,2],[11,3,2,9,4,5],[8,5,3,5,1,3],[5,0,4,5,1,0],[3,8,0,4,5,9],[9,4,5],[11,9,10],[11,9,10],[1,11,4,1,10,11],[8,7,4,11,1,10,11,3,1],[2,7,9,2,9,10],[4,8,7,0,10,2,0,9,10],[2,1,10,0,7,4,0,3,7],[10,2,1,8,7,4],[1,7,4],[3,2,11,4,8,7,9,1,0],[11,4,2,4,0,2],[2,11,3,7,4,8],[4,1,7,1,3,7],[1,0,9,8,7,4],[3,4,0,3,7,4],[8,7,4],[8,9,10,8,10,11],[3,9,11,9,10,11],[0,10,8,10,11,8],[10,3,1,10,11,3],[2,8,10,8,9,10],[9,2,0,9,10,2],[8,0,3,1,10,2],[10,2,1],[1,11,9,11,8,9],[11,3,2,0,9,1],[11,0,2,11,8,0],[11,3,2],[8,1,3,8,9,1],[9,1,0],[8,0,3],[]],o=[0,265,515,778,2060,2309,2575,2822,1030,1295,1541,1804,3082,3331,3593,3840,400,153,915,666,2460,2197,2975,2710,1430,1183,1941,1692,3482,3219,3993,3728,560,825,51,314,2620,2869,2111,2358,1590,1855,1077,1340,3642,3891,3129,3376,928,681,419,170,2988,2725,2479,2214,1958,1711,1445,1196,4010,3747,3497,3232,2240,2505,2755,3018,204,453,719,966,3270,3535,3781,4044,1226,1475,1737,1984,2384,2137,2899,2650,348,85,863,598,3414,3167,3925,3676,1370,1107,1881,1616,2800,3065,2291,2554,764,1013,255,502,3830,4095,3317,3580,1786,2035,1273,1520,2912,2665,2403,2154,876,613,367,102,3942,3695,3429,3180,1898,1635,1385,1120,1120,1385,1635,1898,3180,3429,3695,3942,102,367,613,876,2154,2403,2665,2912,1520,1273,2035,1786,3580,3317,4095,3830,502,255,1013,764,2554,2291,3065,2800,1616,1881,1107,1370,3676,3925,3167,3414,598,863,85,348,2650,2899,2137,2384,1984,1737,1475,1226,4044,3781,3535,3270,966,719,453,204,3018,2755,2505,2240,3232,3497,3747,4010,1196,1445,1711,1958,2214,2479,2725,2988,170,419,681,928,3376,3129,3891,3642,1340,1077,1855,1590,2358,2111,2869,2620,314,51,825,560,3728,3993,3219,3482,1692,1941,1183,1430,2710,2975,2197,2460,666,915,153,400,3840,3593,3331,3082,1804,1541,1295,1030,2822,2575,2309,2060,778,515,265,0],a=[[],[8,3,0],[9,0,1],[8,3,1,8,1,9],[11,2,3],[11,2,0,11,0,8],[11,2,3,0,1,9],[2,1,11,1,9,11,11,9,8],[10,1,2],[8,3,0,1,2,10],[9,0,2,9,2,10],[3,2,8,2,10,8,8,10,9],[10,1,3,10,3,11],[1,0,10,0,8,10,10,8,11],[0,3,9,3,11,9,9,11,10],[8,10,9,8,11,10],[8,4,7],[3,0,4,3,4,7],[1,9,0,8,4,7],[9,4,1,4,7,1,1,7,3],[2,3,11,7,8,4],[7,11,4,11,2,4,4,2,0],[3,11,2,4,7,8,9,0,1],[2,7,11,2,1,7,1,4,7,1,9,4],[10,1,2,8,4,7],[2,10,1,0,4,7,0,7,3],[4,7,8,0,2,10,0,10,9],[2,7,3,2,9,7,7,9,4,2,10,9],[8,4,7,11,10,1,11,1,3],[11,4,7,1,4,11,1,11,10,1,0,4],[3,8,0,7,11,4,11,9,4,11,10,9],[7,11,4,4,11,9,11,10,9],[9,5,4],[3,0,8,4,9,5],[5,4,0,5,0,1],[4,8,5,8,3,5,5,3,1],[11,2,3,9,5,4],[9,5,4,8,11,2,8,2,0],[3,11,2,1,5,4,1,4,0],[8,5,4,2,5,8,2,8,11,2,1,5],[2,10,1,9,5,4],[0,8,3,5,4,9,10,1,2],[10,5,2,5,4,2,2,4,0],[3,4,8,3,2,4,2,5,4,2,10,5],[5,4,9,1,3,11,1,11,10],[0,9,1,4,8,5,8,10,5,8,11,10],[3,4,0,3,10,4,4,10,5,3,11,10],[4,8,5,5,8,10,8,11,10],[9,5,7,9,7,8],[0,9,3,9,5,3,3,5,7],[8,0,7,0,1,7,7,1,5],[1,7,3,1,5,7],[11,2,3,8,9,5,8,5,7],[9,2,0,9,7,2,2,7,11,9,5,7],[0,3,8,2,1,11,1,7,11,1,5,7],[2,1,11,11,1,7,1,5,7],[1,2,10,5,7,8,5,8,9],[9,1,0,10,5,2,5,3,2,5,7,3],[5,2,10,8,2,5,8,5,7,8,0,2],[10,5,2,2,5,3,5,7,3],[3,9,1,3,8,9,7,11,10,7,10,5],[9,1,0,10,7,11,10,5,7],[3,8,0,7,10,5,7,11,10],[11,5,7,11,10,5],[11,7,6],[0,8,3,11,7,6],[9,0,1,11,7,6],[7,6,11,3,1,9,3,9,8],[2,3,7,2,7,6],[8,7,0,7,6,0,0,6,2],[1,9,0,3,7,6,3,6,2],[7,6,2,7,2,9,2,1,9,7,9,8],[1,2,10,6,11,7],[2,10,1,7,6,11,8,3,0],[11,7,6,10,9,0,10,0,2],[7,6,11,3,2,8,8,2,10,8,10,9],[6,10,7,10,1,7,7,1,3],[6,10,1,6,1,7,7,1,0,7,0,8],[9,0,3,6,9,3,6,10,9,6,3,7],[6,10,7,7,10,8,10,9,8],[8,4,6,8,6,11],[11,3,6,3,0,6,6,0,4],[0,1,9,4,6,11,4,11,8],[1,9,4,11,1,4,11,3,1,11,4,6],[3,8,2,8,4,2,2,4,6],[2,0,4,2,4,6],[1,9,0,3,8,2,2,8,4,2,4,6],[9,4,1,1,4,2,4,6,2],[10,1,2,11,8,4,11,4,6],[10,1,2,11,3,6,6,3,0,6,0,4],[0,2,10,0,10,9,4,11,8,4,6,11],[2,11,3,6,9,4,6,10,9],[8,4,6,8,6,1,6,10,1,8,1,3],[1,0,10,10,0,6,0,4,6],[8,0,3,9,6,10,9,4,6],[10,4,6,10,9,4],[9,5,4,7,6,11],[4,9,5,3,0,8,11,7,6],[6,11,7,4,0,1,4,1,5],[6,11,7,4,8,5,5,8,3,5,3,1],[4,9,5,6,2,3,6,3,7],[9,5,4,8,7,0,0,7,6,0,6,2],[4,0,1,4,1,5,6,3,7,6,2,3],[7,4,8,5,2,1,5,6,2],[6,11,7,1,2,10,9,5,4],[11,7,6,8,3,0,1,2,10,9,5,4],[11,7,6,10,5,2,2,5,4,2,4,0],[7,4,8,2,11,3,10,5,6],[4,9,5,6,10,7,7,10,1,7,1,3],[5,6,10,0,9,1,8,7,4],[5,6,10,7,0,3,7,4,0],[10,5,6,4,8,7],[5,6,9,6,11,9,9,11,8],[0,9,5,0,5,3,3,5,6,3,6,11],[0,1,5,0,5,11,5,6,11,0,11,8],[11,3,6,6,3,5,3,1,5],[9,5,6,3,9,6,3,8,9,3,6,2],[5,6,9,9,6,0,6,2,0],[0,3,8,2,5,6,2,1,5],[1,6,2,1,5,6],[1,2,10,5,6,9,9,6,11,9,11,8],[1,0,9,6,10,5,11,3,2],[6,10,5,2,8,0,2,11,8],[3,2,11,10,5,6],[10,5,6,9,3,8,9,1,3],[0,9,1,5,6,10],[8,0,3,10,5,6],[10,5,6],[10,6,5],[8,3,0,10,6,5],[0,1,9,5,10,6],[10,6,5,9,8,3,9,3,1],[3,11,2,10,6,5],[6,5,10,2,0,8,2,8,11],[1,9,0,6,5,10,11,2,3],[1,10,2,5,9,6,9,11,6,9,8,11],[1,2,6,1,6,5],[0,8,3,2,6,5,2,5,1],[5,9,6,9,0,6,6,0,2],[9,6,5,3,6,9,3,9,8,3,2,6],[11,6,3,6,5,3,3,5,1],[0,5,1,0,11,5,5,11,6,0,8,11],[0,5,9,0,3,5,3,6,5,3,11,6],[5,9,6,6,9,11,9,8,11],[10,6,5,4,7,8],[5,10,6,7,3,0,7,0,4],[5,10,6,0,1,9,8,4,7],[4,5,9,6,7,10,7,1,10,7,3,1],[7,8,4,2,3,11,10,6,5],[11,6,7,10,2,5,2,4,5,2,0,4],[11,6,7,8,0,3,1,10,2,9,4,5],[6,7,11,1,10,2,9,4,5],[7,8,4,5,1,2,5,2,6],[4,1,0,4,5,1,6,7,3,6,3,2],[9,4,5,8,0,7,0,6,7,0,2,6],[4,5,9,6,3,2,6,7,3],[6,7,11,4,5,8,5,3,8,5,1,3],[6,7,11,4,1,0,4,5,1],[4,5,9,3,8,0,11,6,7],[9,4,5,7,11,6],[10,6,4,10,4,9],[8,3,0,9,10,6,9,6,4],[1,10,0,10,6,0,0,6,4],[8,6,4,8,1,6,6,1,10,8,3,1],[2,3,11,6,4,9,6,9,10],[0,10,2,0,9,10,4,8,11,4,11,6],[10,2,1,11,6,3,6,0,3,6,4,0],[10,2,1,11,4,8,11,6,4],[9,1,4,1,2,4,4,2,6],[1,0,9,3,2,8,2,4,8,2,6,4],[2,4,0,2,6,4],[3,2,8,8,2,4,2,6,4],[1,4,9,11,4,1,11,1,3,11,6,4],[0,9,1,4,11,6,4,8,11],[11,6,3,3,6,0,6,4,0],[8,6,4,8,11,6],[6,7,10,7,8,10,10,8,9],[9,3,0,6,3,9,6,9,10,6,7,3],[6,1,10,6,7,1,7,0,1,7,8,0],[6,7,10,10,7,1,7,3,1],[7,11,6,3,8,2,8,10,2,8,9,10],[11,6,7,10,0,9,10,2,0],[2,1,10,7,11,6,8,0,3],[1,10,2,6,7,11],[7,2,6,7,9,2,2,9,1,7,8,9],[1,0,9,3,6,7,3,2,6],[8,0,7,7,0,6,0,2,6],[2,7,3,2,6,7],[7,11,6,3,9,1,3,8,9],[9,1,0,11,6,7],[0,3,8,11,6,7],[11,6,7],[11,7,5,11,5,10],[3,0,8,7,5,10,7,10,11],[9,0,1,10,11,7,10,7,5],[3,1,9,3,9,8,7,10,11,7,5,10],[10,2,5,2,3,5,5,3,7],[5,10,2,8,5,2,8,7,5,8,2,0],[9,0,1,10,2,5,5,2,3,5,3,7],[1,10,2,5,8,7,5,9,8],[2,11,1,11,7,1,1,7,5],[0,8,3,2,11,1,1,11,7,1,7,5],[9,0,2,9,2,7,2,11,7,9,7,5],[11,3,2,8,5,9,8,7,5],[1,3,7,1,7,5],[8,7,0,0,7,1,7,5,1],[0,3,9,9,3,5,3,7,5],[9,7,5,9,8,7],[4,5,8,5,10,8,8,10,11],[3,0,4,3,4,10,4,5,10,3,10,11],[0,1,9,4,5,8,8,5,10,8,10,11],[5,9,4,1,11,3,1,10,11],[3,8,4,3,4,2,2,4,5,2,5,10],[10,2,5,5,2,4,2,0,4],[0,3,8,5,9,4,10,2,1],[2,1,10,9,4,5],[8,4,5,2,8,5,2,11,8,2,5,1],[3,2,11,1,4,5,1,0,4],[9,4,5,8,2,11,8,0,2],[11,3,2,9,4,5],[4,5,8,8,5,3,5,1,3],[5,0,4,5,1,0],[3,8,0,4,5,9],[9,4,5],[7,4,11,4,9,11,11,9,10],[3,0,8,7,4,11,11,4,9,11,9,10],[11,7,4,1,11,4,1,10,11,1,4,0],[8,7,4,11,1,10,11,3,1],[2,3,7,2,7,9,7,4,9,2,9,10],[4,8,7,0,10,2,0,9,10],[2,1,10,0,7,4,0,3,7],[10,2,1,8,7,4],[2,11,7,2,7,1,1,7,4,1,4,9],[3,2,11,4,8,7,9,1,0],[7,4,11,11,4,2,4,0,2],[2,11,3,7,4,8],[9,1,4,4,1,7,1,3,7],[1,0,9,8,7,4],[3,4,0,3,7,4],[8,7,4],[8,9,10,8,10,11],[0,9,3,3,9,11,9,10,11],[1,10,0,0,10,8,10,11,8],[10,3,1,10,11,3],[3,8,2,2,8,10,8,9,10],[9,2,0,9,10,2],[8,0,3,1,10,2],[10,2,1],[2,11,1,1,11,9,11,8,9],[11,3,2,0,9,1],[11,0,2,11,8,0],[11,3,2],[8,1,3,8,9,1],[9,1,0],[8,0,3],[]];return e},n.MarchingCube=n.MarchingCubeInitializer(),n.Parsers=function(){var e={},t=function(e){for(var t=0,n=e.length;t<n;t++)e[t].index||(e[t].index=t);for(var r={},o=0;o<e.length;o++){var a=e[o],i=Math.floor(a.x/4.95),s=Math.floor(a.y/4.95),l=Math.floor(a.z/4.95);r[i]||(r[i]={}),r[i][s]||(r[i][s]={}),r[i][s][l]||(r[i][s][l]=[]),r[i][s][l].push(a)}var u=[{x:0,y:0,z:1},{x:0,y:1,z:-1},{x:0,y:1,z:0},{x:0,y:1,z:1},{x:1,y:-1,z:-1},{x:1,y:-1,z:0},{x:1,y:-1,z:1},{x:1,y:0,z:-1},{x:1,y:0,z:0},{x:1,y:0,z:1},{x:1,y:1,z:-1},{x:1,y:1,z:0},{x:1,y:1,z:1}];for(var i in r){i=parseInt(i);for(var s in r[i]){s=parseInt(s);for(var l in r[i][s]){l=parseInt(l);for(var d=r[i][s][l],t=0;t<d.length;t++)for(var p=d[t],f=t+1;f<d.length;f++){var h=d[f];c(p,h)&&-1==p.bonds.indexOf(h.index)&&(p.bonds.push(h.index),p.bondOrder.push(1),h.bonds.push(p.index),h.bondOrder.push(1))}for(var m=0;m<u.length;m++){var y=u[m];if(r[i+y.x]&&r[i+y.x][s+y.y]&&r[i+y.x][s+y.y][l+y.z]){var g=r[i+y.x][s+y.y][l+y.z];!function(e,t){for(var n=0;n<e.length;n++)for(var r=e[n],o=0;o<t.length;o++){var a=t[o];if(c(r,a)){var i=r.bonds.indexOf(a.index),s=a.bonds.indexOf(r.index);-1==i&&-1==s?(r.bonds.push(a.index),r.bondOrder.push(1),a.bonds.push(r.index),a.bondOrder.push(1)):-1==i?(r.bonds.push(a.index),r.bondOrder.push(a.bondOrder[s])):-1==s&&(a.bonds.push(r.index),a.bondOrder.push(r.bondOrder[i]))}}}(d,g)}}}}}},r=function(e){var n,r,o=[],a=[];for(n=0,r=e.length;n<r;n++){var i=e[n];i.index=n,i.hetflag?a.push(i):o.push(i)}t(a),o.sort(function(e,t){return e.chain!=t.chain?e.chain<t.chain?-1:1:e.resi-t.resi});var s,l=-1,u=-1;for(n=0,r=o.length;n<r;n++){var d=o[n];d.resi!==l&&(l=d.resi,s||u++,s=!1),d.reschain=u;for(var p=n+1;p<o.length;p++){var f=o[p];if(f.chain!=d.chain)break;if(f.resi-d.resi>1)break;c(d,f)&&(-1===d.bonds.indexOf(f.index)&&(d.bonds.push(f.index),d.bondOrder.push(1),f.bonds.push(d.index),f.bondOrder.push(1)),d.resi!==f.resi&&(s=!0))}}},o=function(e){var t,n,r,o=[];for(t=0,r=e.length;t<r;t++){e[t].index=t;var a=e[t];a.hetflag||"N"!==a.atom&&"O"!==a.atom||(o.push(a),a.hbondOther=null,a.hbondDistanceSq=Number.POSITIVE_INFINITY)}for(o.sort(function(e,t){return e.z-t.z}),t=0,r=o.length;t<r;t++){var i=o[t];for(n=t+1;n<r;n++){var s=o[n],l=s.z-i.z;if(l>3.2)break;if(s.atom!=i.atom){var u=Math.abs(s.y-i.y);if(!(u>3.2)){var c=Math.abs(s.x-i.x);if(!(c>3.2)){var d=c*c+u*u+l*l;d>10.24||s.chain==i.chain&&Math.abs(s.resi-i.resi)<4||(d<i.hbondDistanceSq&&(i.hbondOther=s,i.hbondDistanceSq=d),d<s.hbondDistanceSq&&(s.hbondOther=i,s.hbondDistanceSq=d))}}}}}},a=function(e){o(e);var t,n,r,a,i,s,l={};for(t=0,n=e.length;t<n;t++)if(i=e[t],void 0===l[i.chain]&&(l[i.chain]=[]),isFinite(i.hbondDistanceSq)){var u=i.hbondOther;void 0===l[u.chain]&&(l[u.chain]=[]),4===Math.abs(u.resi-i.resi)&&(l[i.chain][i.resi]="h")}for(r in l)for(a=1;a<l[r].length-1;a++){var c=l[r][a-1],d=l[r][a+1];s=l[r][a],"h"==c&&c==d&&s!=c&&(l[r][a]=c)}for(t=0,n=e.length;t<n;t++)i=e[t],isFinite(i.hbondDistanceSq)&&"h"!=l[i.chain][i.resi]&&"h"!=i.ss&&(l[i.chain][i.resi]="maybesheet");for(t=0,n=e.length;t<n;t++)if(i=e[t],isFinite(i.hbondDistanceSq)&&"maybesheet"==l[i.chain][i.resi]){var u=i.hbondOther,p=l[u.chain][u.resi];"maybesheet"!=p&&"s"!=p||(l[i.chain][i.resi]="s",l[u.chain][u.resi]="s")}for(r in l){for(a=1;a<l[r].length-1;a++){var c=l[r][a-1],d=l[r][a+1];s=l[r][a],"s"==c&&c==d&&s!=c&&(l[r][a]=c)}for(a=0;a<l[r].length;a++)"h"!=(s=l[r][a])&&"s"!=s||l[r][a-1]!=s&&l[r][a+1]!=s&&delete l[r][a]}for(t=0,n=e.length;t<n;t++)i=e[t],void 0!==(s=l[i.chain][i.resi])&&"maybesheet"!=s&&(i.ss=s,l[i.chain][i.resi-1]!=s&&(i.ssbegin=!0),l[i.chain][i.resi+1]!=s&&(i.ssend=!0))},s=function(e,t){for(var n=0,r=e.length;n<r;n++)for(var o=e[n],a=0;a<o.bonds.length;a++){var i=o.bonds[a],s=e[i],l=t[o.serial];if(s&&l){var u=s.bonds.indexOf(l);u<0&&(s.bonds.push(l),s.bondOrder.push(o.bondOrder[a]))}}};e.vasp=e.VASP=function(e,t){var r=[[]],o={},a=e.replace(/^\s+/,"").split(/[\n\r]/);if(a.length<3)return r;if(!a[1].match(/\d+/))return console.log("Warning: second line of the vasp structure file must be a number"),r;if(o.length=parseFloat(a[1]),o.length<0)return console.log("Warning: Vasp implementation for negative lattice lengths is not yet available"),r;o.xVec=new Float32Array(a[2].replace(/^\s+/,"").split(/\s+/)),o.yVec=new Float32Array(a[3].replace(/^\s+/,"").split(/\s+/)),o.zVec=new Float32Array(a[4].replace(/^\s+/,"").split(/\s+/));var i=new n.Matrix4(o.xVec[0],o.xVec[1],o.xVec[2],0,o.yVec[0],o.yVec[1],o.yVec[2],0,o.zVec[0],o.zVec[1],o.zVec[2],0,0,0,0,1);i.multiplyScalar(o.length);var s=(r.modelData=[{symmetries:[],cryst:{matrix:i}}],a[5].replace(/\s+/,"").replace(/\s+$/,"").split(/\s+/)),l=new Int16Array(a[6].replace(/^\s+/,"").split(/\s+/)),u=a[7].replace(/\s+/,"");if(u.match(/C/))u="cartesian";else{if(!u.match(/D/))return console.log("Warning: Unknown vasp mode in POSCAR file: mode must be either C(artesian) or D(irect)"),r;u="direct"}if(s.length!=l.length)return console.log("Warning: declaration of atomary species wrong:"),console.log(s),console.log(l),r;a.splice(0,8);for(var c=0,d=0,p=s.length;d<p;d++){for(var f=s[d],h=0,m=l[d];h<m;h++){var y=new Float32Array(a[c+h].replace(/^\s+/,"").split(/\s+/));atom={},atom.elem=f,"cartesian"==u?(atom.x=o.length*y[0],atom.y=o.length*y[1],atom.z=o.length*y[2]):(atom.x=o.length*(y[0]*o.xVec[0]+y[1]*o.yVec[0]+y[2]*o.zVec[0]),atom.y=o.length*(y[0]*o.xVec[1]+y[1]*o.yVec[1]+y[2]*o.zVec[1]),atom.z=o.length*(y[0]*o.xVec[2]+y[1]*o.yVec[2]+y[2]*o.zVec[2])),atom.bonds=[],r[0].push(atom)}c+=l[d]}return r},e.cube=e.CUBE=function(e,n){var r=[[]],o=e.replace(/^\s+/,"").split(/\n\r|\r+/);if(o.length<6)return r;var a=o[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),i=Math.abs(parseFloat(a[0]));a=o[3].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");var s=parseFloat(a[0])>0?.529177:1;o=o.splice(6,i);for(var l=r[r.length-1].length,u=l+o.length,c=l;c<u;++c){var d={};d.serial=c;var p=o[c-l],f=p.replace(/^\s+/,"").replace(/\s+/g," ").split(" ");6==f[0]?d.elem="C":1==f[0]?d.elem="H":8==f[0]?d.elem="O":17==f[0]&&(d.elem="Cl"),d.x=parseFloat(f[2])*s,d.y=parseFloat(f[3])*s,d.z=parseFloat(f[4])*s,d.hetflag=!0,d.bonds=[],d.bondOrder=[],d.properties={},r[r.length-1].push(d)}for(var c=0;c<r.length;c++)t(r[c]);return r},e.xyz=e.XYZ=function(e,n){for(var r=[[]],o=e.split(/\r?\n|\r/);o.length>0&&!(o.length<3);){var a=parseInt(o[0]);if(isNaN(a)||a<=0)break;if(o.length<a+2)break;for(var i=2,s=r[r.length-1].length,l=s+a,u=s;u<l;u++){var c=o[i++],d=c.replace(/^\s+/,"").replace(/\s+/g," ").split(" "),p={};p.serial=u;var f=d[0];p.atom=p.elem=f[0].toUpperCase()+f.substr(1).toLowerCase(),p.x=parseFloat(d[1]),p.y=parseFloat(d[2]),p.z=parseFloat(d[3]),p.hetflag=!0,p.bonds=[],p.bondOrder=[],p.properties={},r[r.length-1][u]=p,d.length>=7&&(p.dx=parseFloat(d[4]),p.dy=parseFloat(d[5]),p.dz=parseFloat(d[6]))}if(!n.multimodel)break;r.push([]),o.splice(0,i)}for(var u=0;u<r.length;u++)t(r[u]);if(n.onemol){var h=r;r=[],r.push(h[0]);for(var u=1;u<h.length;u++)for(var i=r[0].length,m=0;m<h[u].length;m++){for(var y=h[u][m],g=0;g<y.bonds.length;g++)y.bonds[g]=y.bonds[g]+i;y.index=r[0].length,y.serial=r[0].length,r[0].push(y)}}return r},e.sdf=e.SDF=function(e,t){var n=[[]],r=!1;void 0!==t.keepH&&(r=!t.keepH);for(var o=e.split(/\r?\n|\r/);o.length>0&&!(o.length<4);){var a=parseInt(o[3].substr(0,3));if(isNaN(a)||a<=0)break;var i=parseInt(o[3].substr(3,3)),s=4;if(o.length<4+a+i)break;var l,u,c=[],d=n[n.length-1].length,p=d+a;for(l=d;l<p;l++,s++){u=o[s];var f={},h=u.substr(31,3).replace(/ /g,"");f.atom=f.elem=h[0].toUpperCase()+h.substr(1).toLowerCase(),"H"==f.elem&&r||(f.serial=l,c[l]=n[n.length-1].length,f.x=parseFloat(u.substr(0,10)),f.y=parseFloat(u.substr(10,10)),f.z=parseFloat(u.substr(20,10)),f.hetflag=!0,f.bonds=[],f.bondOrder=[],f.properties={},f.index=n[n.length-1].length,n[n.length-1].push(f))}for(l=0;l<i;l++,s++){u=o[s];var m=c[parseInt(u.substr(0,3))-1+d],y=c[parseInt(u.substr(3,3))-1+d],g=parseInt(u.substr(6,3));void 0!==m&&void 0!==y&&(n[n.length-1][m].bonds.push(y),n[n.length-1][m].bondOrder.push(g),n[n.length-1][y].bonds.push(m),n[n.length-1][y].bondOrder.push(g))}if(!t.multimodel)break;for(t.onemol||n.push([]);"$$$$"!=o[s];)s++;o.splice(0,++s)}return n},e.cdjson=e.json=function(e,t){var n=[[]];"string"==typeof e&&(e=JSON.parse(e));for(var r=e.m,o=r[0].a,a=r[0].b,i=r[0].s,s=void 0!==t&&void 0!==t.parseStyle?t.parseStyle:void 0!==i,l=n[n.length-1].length,u=0;u<o.length;u++){var c=o[u],d={};d.id=c.i,d.x=c.x,d.y=c.y,d.z=c.z||0,d.bonds=[],d.bondOrder=[];var p=c.l||"C";d.elem=p[0].toUpperCase()+p.substr(1).toLowerCase(),d.serial=n[n.length-1].length,s&&(d.style=i[c.s||0]),n[n.length-1].push(d)}for(var u=0;u<a.length;u++){var f=a[u],h=f.b+l,m=f.e+l,y=f.o||1,g=n[n.length-1][h],v=n[n.length-1][m];g.bonds.push(m),g.bondOrder.push(y),v.bonds.push(h),v.bondOrder.push(y)}return n},e.mcif=e.cif=function(e,r){function o(e){return e*e}for(var i=[],s=!r.doAssembly,l=!r.duplicateAssemblyAtoms,u=i.modelData=[],c=e.split(/\r?\n|\r/),p=[],f=!1,h=0;h<c.length;h++){var m=c[h].split("#")[0];if(f?";"===m[0]&&(f=!1):";"===m[0]&&(f=!0),f||""!==m){if(!f&&(m=m.trim(),"_"===m[0])){var y=m.split(/\s/)[0].indexOf(".");y>-1&&(m[y]="_",m=m.substr(0,y)+"_"+m.substr(y+1))}p.push(m)}}for(var h=0;h<p.length;){for(;!p[h].startsWith("data_")||"data_global"===p[h];)h++;h++;for(var g={};h<p.length&&!p[h].startsWith("data_");)if(void 0===p[h][0])h++;else if("_"===p[h][0]){var v=p[h].split(/\s/)[0].toLowerCase(),b=g[v]=g[v]||[],_=p[h].substr(p[h].indexOf(v)+v.length);if(""===_)if(h++,";"===p[h][0]){var w=p[h].substr(1);for(h++;";"!==p[h];)w=w+"\n"+p[h],h++;b.push(w)}else b.push(p[h]);else b.push(_.trim());h++}else if("loop_"===p[h].substr(0,5)){h++;for(var x=[];""===p[h]||"_"===p[h][0];){if(""!==p[h]){var v=p[h].split(/\s/)[0].toLowerCase(),b=g[v]=g[v]||[];x.push(b)}h++}for(var S=0;h<p.length&&"_"!==p[h][0]&&!p[h].startsWith("loop_")&&!p[h].startsWith("data_");){for(var m=function(e,t){for(var n=[],r=0,o=0;o<e.length;){for(;e.substr(o,t.length)!==t&&o<e.length;){if("'"===e[o])for(o++;o<e.length&&"'"!==e[o];)o++;else if('"'===e[o])for(o++;o<e.length&&'"'!==e[o];)o++;o++}n.push(e.substr(r,o-r)),r=o+=t.length}return n}(p[h]," "),C=0;C<m.length;C++)""!==m[C]&&(x[S].push(m[C]),S=(S+1)%x.length);h++}}else h++;u.push({symmetries:[]}),i.push([]);var k,E=void 0!==g._atom_site_id?g._atom_site_id.length:g._atom_site_label.length;if(void 0!==g._cell_length_a){var M=parseFloat(g._cell_length_a),A=parseFloat(g._cell_length_b),T=parseFloat(g._cell_length_c),O=parseFloat(g._cell_angle_alpha)||90,P=parseFloat(g._cell_angle_beta)||90,j=parseFloat(g._cell_angle_gamma)||90,I=O*Math.PI/180,D=P*Math.PI/180,N=j*Math.PI/180,R=Math.cos(I),L=Math.cos(D),F=Math.cos(N),z=Math.sin(N);k=[[M,A*F,T*L],[0,A*z,T*(R-L*F)/z],[0,0,T*Math.sqrt(1-o(R)-o(L)-o(F)+2*R*L*F)/z]],u[u.length-1].cryst={a:M,b:A,c:T,alpha:O,beta:P,gamma:j}}for(var B=0;B<E;B++)if(void 0===g._atom_site_group_pdb||"TER"!==g._atom_site_group_pdb[B]){var V={};if(void 0!==g._atom_site_cartn_x)V.x=parseFloat(g._atom_site_cartn_x[B]),V.y=parseFloat(g._atom_site_cartn_y[B]),V.z=parseFloat(g._atom_site_cartn_z[B]);else{var G=function(e,t,n){return{x:k[0][0]*e+k[0][1]*t+k[0][2]*n,y:k[1][0]*e+k[1][1]*t+k[1][2]*n,z:k[2][0]*e+k[2][1]*t+k[2][2]*n}}(parseFloat(g._atom_site_fract_x[B]),parseFloat(g._atom_site_fract_y[B]),parseFloat(g._atom_site_fract_z[B]));V.x=G.x,V.y=G.y,V.z=G.z}V.chain=g._atom_site_auth_asym_id?g._atom_site_auth_asym_id[B]:void 0,V.resi=g._atom_site_auth_seq_id?parseInt(g._atom_site_auth_seq_id[B]):void 0,V.resn=g._atom_site_auth_comp_id?g._atom_site_auth_comp_id[B].trim():void 0,V.atom=g._atom_site_auth_atom_id?g._atom_site_auth_atom_id[B].replace(/"/gm,""):void 0,V.hetflag=!g._atom_site_group_pdb||"HETA"===g._atom_site_group_pdb[B]||"HETATM"===g._atom_site_group_pdb[B];var H=g._atom_site_type_symbol[B];V.elem=H[0].toUpperCase()+H.substr(1).toLowerCase(),V.bonds=[],V.ss="c",V.serial=B,V.bondOrder=[],V.properties={},i[i.length-1].push(V)}if(void 0!==g._pdbx_struct_oper_list_id&&!s){for(var B=0;B<g._pdbx_struct_oper_list_id.length;B++){var U=parseFloat(g["_pdbx_struct_oper_list_matrix[1][1]"][B]),q=parseFloat(g["_pdbx_struct_oper_list_matrix[1][2]"][B]),W=parseFloat(g["_pdbx_struct_oper_list_matrix[1][3]"][B]),Z=parseFloat(g["_pdbx_struct_oper_list_vector[1]"][B]),Y=parseFloat(g["_pdbx_struct_oper_list_matrix[2][1]"][B]),K=parseFloat(g["_pdbx_struct_oper_list_matrix[2][2]"][B]),X=parseFloat(g["_pdbx_struct_oper_list_matrix[2][3]"][B]),Q=parseFloat(g["_pdbx_struct_oper_list_vector[2]"][B]),J=parseFloat(g["_pdbx_struct_oper_list_matrix[3][1]"][B]),$=parseFloat(g["_pdbx_struct_oper_list_matrix[3][2]"][B]),ee=parseFloat(g["_pdbx_struct_oper_list_matrix[3][3]"][B]),te=parseFloat(g["_pdbx_struct_oper_list_vector[3]"][B]),ne=new n.Matrix4(U,q,W,Z,Y,K,X,Q,J,$,ee,te);u[u.length-1].symmetries.push(ne)}for(var B=0;B<i.length;B++)d(u[u.length-1].symmetries,l,i[B])}if(void 0!==g._symmetry_equiv_pos_as_xyz)for(var re=0;re<g._symmetry_equiv_pos_as_xyz.length;re++){for(var oe=g._symmetry_equiv_pos_as_xyz[re].replace(/["' ]/g,""),ae=oe.split(",").map(function(e){return e.replace(/-/g,"+-")}),ne=new n.Matrix4(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1),ie=0;ie<3;ie++)for(var se=ae[ie].split("+"),le=0;le<se.length;le++){var ue=se[le];if(""!==ue){var ce=function(e){var t=e.match("-");e=e.replace(/[-xyz]/g,"");var n,r=e.split("/");return n=void 0===r[1]?1:parseInt(r[1]),(""===r[0]?1:parseInt(r[0]))/n*(t?-1:1)}(ue);ue.match("x")?ne.elements[ie+0]=ce:ue.match("y")?ne.elements[ie+4]=ce:ue.match("z")?ne.elements[ie+8]=ce:ne.elements[ie+12]=ce}}var de=new n.Matrix4(k[0][0],k[0][1],k[0][2],0,k[1][0],k[1][1],k[1][2],0,k[2][0],k[2][1],k[2][2],0),pe=(new n.Matrix4).getInverse(de,!0);ne=(new n.Matrix4).multiplyMatrices(ne,pe),ne=(new n.Matrix4).multiplyMatrices(de,ne),u[u.length-1].symmetries.push(ne)}}for(var B=0;B<i.length;B++)t(i[B]),a(i[B]),d(u[B].symmetries,l,i[B]);return i},e.mol2=e.MOL2=function(e,t){var n=[[]],r=!1;void 0!==t.keepH&&(r=!t.keepH);for(var o=e.substr(a,e.length).split(/\r?\n|\r/);o.length>0;){var a=e.search(/@<TRIPOS>MOLECULE/),i=e.search(/@<TRIPOS>ATOM/);if(-1==a||-1==i)break;var s=[],l=o[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),u=parseInt(l[0]),c=0;l.length>1&&(c=parseInt(l[1]));var d,p=4;for(d=3;d<o.length;d++)if("@<TRIPOS>ATOM"==o[d]){p=d+1;break}var f,h=n[n.length-1].length,m=h+u;for(d=h;d<m;d++){f=o[p++],l=f.replace(/^\s+/,"").replace(/\s+/g," ").split(" ");var y={},g=l[5].split(".")[0];if(y.atom=y.elem=g[0].toUpperCase()+g.substr(1).toLowerCase(),"H"==y.elem&&r);else{var v=n[n.length-1].length,b=parseInt(l[0]);y.serial=b,y.x=parseFloat(l[2]),y.y=parseFloat(l[3]),y.z=parseFloat(l[4]),y.atom=l[5];var _=parseFloat(l[8]);y.index=v,y.bonds=[],y.bondOrder=[],y.properties={charge:_,partialCharge:_},s[b]=v,n[n.length-1].push(y)}}for(var w=!1;p<o.length;)if("@<TRIPOS>BOND"==o[p++]){w=!0;break}if(w&&c)for(d=0;d<c;d++){f=o[p++],l=f.replace(/^\s+/,"").replace(/\s+/g," ").split(" ");var x=parseInt(l[1]);fromAtom=n[n.length-1][s[x]];var S=parseInt(l[2]);toAtom=n[n.length-1][s[S]];var C=parseInt(l[3]);isNaN(C)&&(C=1),void 0!==fromAtom&&void 0!==toAtom&&(fromAtom.bonds.push(s[S]),fromAtom.bondOrder.push(C),toAtom.bonds.push(s[x]),toAtom.bondOrder.push(C))}if(!t.multimodel)break;t.onemol||n.push([]),o.splice(0,p),e=o.join("\n")}return n};var l={H:.37,He:.32,Li:1.34,Be:.9,B:.82,C:.77,N:.75,O:.73,F:.71,Ne:.69,Na:1.54,Mg:1.3,Al:1.18,Si:1.11,P:1.06,S:1.02,Cl:.99,Ar:.97,K:1.96,Ca:1.74,Sc:1.44,Ti:1.56,V:1.25,Mn:1.39,Fe:1.25,Co:1.26,Ni:1.21,Cu:1.38,Zn:1.31,Ga:1.26,Ge:1.22,Se:1.16,Br:1.14,Kr:1.1,Rb:2.11,Sr:1.92,Y:1.62,Zr:1.48,Nb:1.37,Mo:1.45,Tc:1.56,Ru:1.26,Rh:1.35,Pd:1.31,Ag:1.53,Cd:1.48,In:1.44,Sn:1.41,Sb:1.38,Te:1.35,I:1.33,Xe:1.3,Cs:2.25,Ba:1.98,Lu:1.6,Hf:1.5,Ta:1.38,W:1.46,Re:1.59,Os:1.44,Ir:1.37,Pt:1.28,Au:1.44,Hg:1.49,Tl:1.48,Pb:1.47,Bi:1.46,Rn:1.45},u=function(e){return l[e]||1.6},c=function(e,t){var n=u(e.elem)+u(t.elem);n+=.25,n*=n;var r=e.x-t.x;if((r*=r)>n)return!1;var o=e.y-t.y;if((o*=o)>n)return!1;var a=e.z-t.z;if((a*=a)>n)return!1;var i=r+o+a;return!isNaN(i)&&(!(i<.5)&&(!(i>n)&&(e.altLoc==t.altLoc||" "==e.altLoc||" "==t.altLoc)))},d=function(e,t,r){var o,a,i,s=r.length,l=s;if(t){if(e.length>1)for(o=0;o<r.length;o++){var u=[];for(a=0;a<e.length;a++)if(!e[a].isIdentity()){var c=new n.Vector3;c.set(r[o].x,r[o].y,r[o].z),c.applyMatrix4(e[a]),u.push(c)}r[o].symmetries=u}}else for(o=0;o<e.length;o++)if(!e[o].isIdentity()){var d=new n.Vector3;for(i=0;i<s;i++){var p=[];for(a=0;a<r[i].bonds.length;a++)p.push(r[i].bonds[a]+l);d.set(r[i].x,r[i].y,r[i].z),d.applyMatrix4(e[o]);var f={};for(var h in r[i])f[h]=r[i][h];f.x=d.x,f.y=d.y,f.z=d.z,f.bonds=p,r.push(f)}l=r.length}},p=function(e){var t;for(t in e)return!1;return!0},f=function(e,t,o){var i,u,c,f,h=[],m=!t.keepH,y=!!t.noSecondaryStructure,g=!t.noComputeSecondaryStructure,v=!t.doAssembly,b=!t.duplicateAssemblyAtoms,_=t.altLoc?t.altLoc:"A",w={symmetries:[]},x=[],S=[],C={};for(u=0;u<e.length;u++){f=e[u].replace(/^\s*/,"");var k,E,M,A=f.substr(0,6);if(0==A.indexOf("END")){if(x=e.slice(u+1),"END"==A)for(var T in o)o.hasOwnProperty(T)&&delete o[T];break}if("ATOM  "==A||"HETATM"==A){var O,P,j,I,D,N,R,L,F,z,B,V;if(" "!=(B=f.substr(16,1))&&B!=_&&"*"!=_)continue;if(z=parseInt(f.substr(6,5)),i=f.substr(12,4).replace(/ /g,""),O=f.substr(17,3).replace(/ /g,""),P=f.substr(21,1),j=parseInt(f.substr(22,4)),I=f.substr(26,1),D=parseFloat(f.substr(30,8)),N=parseFloat(f.substr(38,8)),R=parseFloat(f.substr(46,8)),V=parseFloat(f.substr(60,8)),F=f.substr(76,2).replace(/ /g,""),""===F||void 0===l[F]?(F=f.substr(12,2).replace(/ /g,""),F.length>0&&"H"==F[0]&&"Hg"!=F&&(F="H"),F.length>1&&(F=F[0].toUpperCase()+F.substr(1).toLowerCase(),void 0===l[F]?F=F[0]:"A"==f[0]&&"Ca"==F&&(F="C"))):F=F[0].toUpperCase()+F.substr(1).toLowerCase(),"H"==F&&m)continue;L="H"==A[0],S[z]=h.length,h.push({resn:O,x:D,y:N,z:R,elem:F,hetflag:L,altLoc:B,chain:P,resi:j,icode:I,rescode:j+(" "!=I?"^"+I:""),serial:z,atom:i,bonds:[],ss:"c",bondOrder:[],properties:{},b:V,pdbline:f})}else if("SHEET "==A){!0,k=f.substr(21,1),E=parseInt(f.substr(22,4)),f.substr(32,1),M=parseInt(f.substr(33,4)),k in o||(o[k]={}),o[k][E]="s1";for(var G=E+1;G<M;G++)o[k][G]="s";o[k][M]="s2"}else if("CONECT"==A){var H=parseInt(f.substr(6,5)),U=S[H],q=h[U],W=[11,16,21,26];for(c=0;c<4;c++){var Z=parseInt(f.substr(W[c],5)),Y=S[Z],K=h[Y];if(void 0!==q&&void 0!==K)if(C[[U,Y]]){C[[U,Y]]+=1;for(var X=0;X<q.bonds.length;X++)if(q.bonds[X]==Y){var Q=C[[U,Y]];q.bondOrder[X]=Q>=4?1:Q}}else C[[U,Y]]=1,0!=q.bonds.length&&q.bonds[q.bonds.length-1]==Y||(q.bonds.push(Y),q.bondOrder.push(1))}}else if("HELIX "==A){!0,k=f.substr(19,1),E=parseInt(f.substr(21,4)),f.substr(31,1),M=parseInt(f.substr(33,4)),k in o||(o[k]={}),o[k][E]="h1";for(var G=E+1;G<M;G++)o[k][G]="h";o[k][M]="h2"}else if(v||"REMARK"!=A||"BIOMT"!=f.substr(13,5)){if("CRYST1"==A){var J,V,$,ee,te,ne;J=parseFloat(f.substr(7,8)),V=parseFloat(f.substr(16,8)),$=parseFloat(f.substr(25,8)),ee=parseFloat(f.substr(34,6)),te=parseFloat(f.substr(41,6)),ne=parseFloat(f.substr(48,6)),w.cryst={a:J,b:V,c:$,alpha:ee,beta:te,gamma:ne}}else if("ANISOU"==A){var z=parseInt(f.substr(6,5)),re=S[z],oe=h[re];if(oe){var ae=f.substr(30).trim().split(/\s+/),ie={u11:parseInt(ae[0]),u22:parseInt(ae[1]),u33:parseInt(ae[2]),u12:parseInt(ae[3]),u13:parseInt(ae[4]),u23:parseInt(ae[5])};oe.uMat=ie}}}else{var se,le=new n.Matrix4;for(se=1;se<=3;se++)if(f=e[u].replace(/^\s*/,""),parseInt(f.substr(18,1))==se)le.elements[se-1]=parseFloat(f.substr(23,10)),le.elements[se-1+4]=parseFloat(f.substr(33,10)),le.elements[se-1+8]=parseFloat(f.substr(43,10)),le.elements[se-1+12]=parseFloat(f.substr(53)),u++;else for(;"BIOMT"==f.substr(13,5);)u++,f=e[u].replace(/^\s*/,"");le.elements[3]=0,le.elements[7]=0,le.elements[11]=0,le.elements[15]=1,w.symmetries.push(le),u--}}(new Date).getTime();if(s(h,S),r(h),v||d(w.symmetries,b,h),g&&!y&&((new Date).getTime(),a(h)),(new Date).getTime(),!p(o))for(u=0;u<h.length;u++)if(void 0!==(i=h[u])&&i.chain in o&&i.resi in o[i.chain]){var ue=o[i.chain][i.resi];i.ss=ue[0],ue.length>1&&("1"==ue[1]?i.ssbegin=!0:"2"==ue[1]&&(i.ssend=!0))}return[h,w,x]};e.pdb=e.PDB=e.pdbqt=e.PDBQT=function(e,t){var n=[],r={};n.modelData=[];for(var o=e.split(/\r?\n|\r/);o.length>0;){var a=f(o,t,r),i=a[0],s=a[1];if(o=a[2],0!=i.length){if(t.multimodel&&t.onemol&&n.length>0)for(var l=n[0].length,u=0;u<i.length;u++){var c=i[u];c.index=u;for(var d=0;d<c.bonds.length;d++)c.bonds[d]+=l;n[0].push(c)}else n.modelData.push(s),n.push(i);if(!t.multimodel)break}}return n},e.pqr=e.PQR=function(e,t){var n,o,i,s,l=[[]],u=(l[l.length-1].length,!t.noSecondaryStructure),c=(t.doAssembly,t.duplicateAssemblyAtoms,l.modelData=[{symmetries:[]}],[]),d=e.split(/\r?\n|\r/);for(o=0;o<d.length;o++){s=d[o].replace(/^\s*/,"");var p=s.substr(0,6);if(0==p.indexOf("END")){if(t.multimodel){t.onemol||l.push([]);continue}break}if("ATOM  "==p||"HETATM"==p){var f,h=parseInt(s.substr(6,5)),n=s.substr(12,4).replace(/ /g,""),m=s.substr(17,3),y=s.substr(21,1),g=parseInt(s.substr(22,4)),v=s.substr(30).trim().split(/\s+/),b=parseFloat(v[0]),_=parseFloat(v[1]),w=parseFloat(v[2]),x=parseFloat(v[3]),S=parseFloat(v[4]),C=n[0];n.length>1&&n[1].toUpperCase()!=n[1]&&(C=n.substr(0,2)),f="H"==s[0],c[h]=l[l.length-1].length,l[l.length-1].push({resn:m,x:b,y:_,z:w,elem:C,hetflag:f,chain:y,resi:g,serial:h,atom:n,bonds:[],ss:"c",bondOrder:[],properties:{charge:x,partialCharge:x,radius:S},pdbline:s})}else if("CONECT"==p){var k=parseInt(s.substr(6,5)),E=l[l.length-1][c[k]];for(i=0;i<4;i++){var M=parseInt(s.substr([11,16,21,26][i],5)),A=l[l.length-1][c[M]];void 0!==E&&void 0!==A&&(E.bonds.push(c[M]),E.bondOrder.push(1))}}}for(var o=0;o<l.length;o++)r(l[o]),u&&a(l[o]);return l};var h=function(e){return String.fromCharCode.apply(null,e).replace(/\0/g,"")},m=function(e){return 2==e?"h":3==e?"s":"c"};return e.mmtf=e.MMTF=function(e,t){var r=!t.keepH,o=t.altLoc?t.altLoc:"A",i=!!t.noSecondaryStructure,s=!t.noComputeSecondaryStructure,l=!t.doAssembly,u=!t.duplicateAssemblyAtoms,c=t.assemblyIndex?t.assemblyIndex:0,p=MMTF.decode(e),f=[[]],y=f.modelData=[],g=0,v=0,b=0,_=0,w=(p.chainNameList,p.secStructList),x=p.insCodeList,S=p.sequenceIndexList,C=p.bFactorList,k=p.altLocList,E=p.occupancyList,M=p.bondAtomList,A=p.bondOrderList,T=p.numModels;if(0==T)return f;t.multimodel||(T=1);var O,P,j,I,D,N,R=[];if(!l&&p.bioAssemblyList&&p.bioAssemblyList.length>0){var L=p.bioAssemblyList[c].transformList;for(O=0,N=L.length;O<N;O++){var F=new n.Matrix4(L[O].matrix);F.transpose(),R.push(F)}}var z=0;for(D=0;D<T;D++){var B=p.chainsPerModel[D],V=f[f.length-1],G=[];for(y.push({symmetries:R}),O=0;O<B;++O){var H=p.groupsPerChain[v],U=h(p.chainIdList.subarray(4*v,4*v+4));p.chainNameList&&(U=h(p.chainNameList.subarray(4*v,4*v+4)));var q=b,W="";for(P=0;P<H;++P){var Z=p.groupList[p.groupTypeList[b]],Y=Z.atomNameList.length,K=0,X=!1,Q=!1;if(w){K=w[b];var J=m(K);0!=b&&J==W||(X=!0),W=J;var $=b+1;($>=w.length||m(w[$]!=J))&&(Q=!0)}p.insCodeList&&String.fromCharCode(x[b]);S&&S[b];var ee=p.groupIdList[b],te=Z.groupName,ne=_;for(j=0;j<Y;++j){var re=Z.elementList[j];if(r&&"H"==re)_+=1;else{var oe="";C&&(oe=C[_]);var ae="";k&&k[_]&&(ae=String.fromCharCode(k[_]));var ie="";if(E&&(ie=E[_]),""==ae||ae==o||"*"==o){var se=p.atomIdList[_],le=Z.atomNameList[j],ue=0;Z.atomChargeList&&(ue=Z.atomChargeList[j]);var ce=p.xCoordList[_],de=p.yCoordList[_],pe=p.zCoordList[_];G[_]=V.length,V.push({resn:te,x:ce,y:de,z:pe,elem:re,hetflag:K<0,chain:U,resi:ee,icode:ae,rescode:ee+(" "!=ae?"^"+ae:""),serial:se,altLoc:ae,index:_,atom:le,bonds:[],ss:m(K),ssbegin:X,ssend:Q,bondOrder:[],properties:{charge:ue,occupancy:ie},b:oe}),_+=1}else _+=1}}var fe=Z.bondAtomList;for(j=0,I=Z.bondOrderList.length;j<I;++j){var he=ne+fe[2*j],me=ne+fe[2*j+1],ye=Z.bondOrderList[j],ge=G[he],ve=G[me],be=V[ge],_e=V[ve];be&&_e&&(be.bonds.push(ve),be.bondOrder.push(ye),_e.bonds.push(ge),_e.bondOrder.push(ye))}b+=1}for(b=q,P=0;P<H;++P)b+=1;v+=1}if(M)for(j=z,I=M.length;j<I;j+=2){var he=M[j],me=M[j+1],ye=A?A[j/2]:1;if(he>=_){z=j;break}var ge=G[he],ve=G[me],be=V[ge],_e=V[ve];be&&_e&&(be.bonds.push(ve),be.bondOrder.push(ye),_e.bonds.push(ge),_e.bondOrder.push(ye))}if(t.multimodel&&(t.onemol||f.push([])),!l)for(var N=0;N<f.length;N++)d(y[g].symmetries,u,f[N]);g+=1}return s&&!i&&a(f),f},e.prmtop=e.PRMTOP=function(e,t){function n(e){var t=s.indexOf(l.filter(function(t){return t.includes(e)})[0]);if(Number.isInteger(t)&&t>0){for(;!s[t].includes("FORMAT");)t++;return t}return-1}function r(e){var t=s[e].match(/\((\d*)\S*/),n=s[e].match(/[a-zA-Z](\d*)\)\s*/);return null==n&&(n=s[e].match(/[a-zA-Z](\d*)\.\d*\)\s*/)),[t[1],n[1]]}var o=[],a=0,s=e.split(/\r?\n|\r/);if(!(s.length>0&&s[0].includes("VERSION")))return[];var l=s.filter(function(e){return e.includes("POINTERS")||e.includes("ATOM_NAME")||e.includes("CHARGE")||e.includes("RADII")||e.includes("BONDS_INC_HYDROGEN")||e.includes("BONDS_WITHOUT_HYDROGEN")}),u=n("POINTERS");if(-1==u)return[];var c=r(u),d=parseInt(s[u+1].slice(0,c[1]));if(isNaN(d)||d<=0)return[];if(-1==(u=n("ATOM_NAME")))return[];c=r(u);var p=c[0];for(i=0;i<d/c[0];i++){for(i==parseInt(d/c[0])&&(p=d%c[0]),j=0;j<p;j++){var f={},h={charge:"",radii:""};f.serial=a,f.x=0,f.y=0,f.z=0,f.atom=s[u+1].slice(c[1]*j,c[1]*(j+1)),f.elem=s[u+1].slice(c[1]*j,c[1]*j+1),f.properties=h,f.bonds=[],f.bondOrder=[],o.push(f),a++}u++}if(-1!=(u=n("CHARGE")))for(c=r(u),a=0,p=c[0],i=0;i<d/c[0];i++){for(i==parseInt(d/c[0])&&(p=d%c[0]),j=0;j<p;j++)o[a].properties.charge=s[u+1].slice(c[1]*j,c[1]*(j+1)),a++;u++}if(-1!=(u=n("RADII")))for(c=r(u),a=0,p=c[0],i=0;i<d/c[0];i++){for(i==parseInt(d/c[0])&&(p=d%c[0]),j=0;j<p;j++)o[a].properties.radii=s[u+1].slice(c[1]*j,c[1]*(j+1)),a++;u++}if(-1!=(u=n("BONDS_WITHOUT_HYDROGEN"))){c=r(u),a=0,p=c[0];var m;for(i=0;i<d/c[0];i++){for(i==parseInt(d/c[0])&&(p=d%c[0]),j=0;j<p;j++)a%3==0&&(m=parseInt(s[u+1].slice(c[1]*j,c[1]*(j+1))/3+1)),a%3==1&&o[m].bonds.push(parseInt(s[u+1].slice(c[1]*j,c[1]*(j+1))/3+1)),a++;u++}}if(-1!=(u=n("BONDS_INC_HYDROGEN"))){c=r(u),a=0,p=c[0];var m;for(i=0;i<d/c[0];i++){for(i==parseInt(d/c[0])&&(p=d%c[0]),j=0;j<p;j++)a%3==0&&(m=parseInt(s[u+1].slice(c[1]*j,c[1]*(j+1))/3+1)),a%3==1&&o[m].bonds.push(parseInt(s[u+1].slice(c[1]*j,c[1]*(j+1))/3+1)),a++;u++}}return[o]},e.gro=e.GRO=function(e,n){for(var r=[],o=e.split(/\r?\n|\r/);o.length>0&&!(o.length<3);){var a=parseInt(o[1]);if(isNaN(a)||a<=0)break;if(o.length<a+3)break;r.push([]);for(var i=2,s=r[r.length-1].length,l=s+a,u=s;u<l;u++){var c=o[i++],d={};d.serial=u,d.atom=c.slice(10,15).trim(),d.atom.charCodeAt(1)>=97&&d.atom.charCodeAt(1)<=122?d.elem=d.atom.slice(0,2):d.elem=d.atom[0],d.x=parseFloat(c.slice(20,28)),d.y=parseFloat(c.slice(28,36)),d.z=parseFloat(c.slice(36,44)),d.resi=c.slice(5,10),d.bonds=[],d.bondOrder=[],d.properties={},c.length>44&&(d.dx=parseFloat(c.slice(44,52)),d.dy=parseFloat(c.slice(52,60)),d.dz=parseFloat(c.slice(60,68))),r[r.length-1][u]=d}o.splice(0,++i)}for(var u=0;u<r.length;u++)t(r[u]);return r},e}();var n=n||{};n.partialCharges={"ALA:N":-.15,"ALA:CA":.1,"ALA:CB":0,"ALA:C":.6,"ALA:O":-.55,"ARG:N":-.15,"ARG:CA":.1,"ARG:CB":0,"ARG:CG":0,"ARG:CD":.1,"ARG:NE":-.1,"ARG:CZ":.5,"ARG:NH1":.25,"ARG:NH2":.25,"ARG:C":.6,"ARG:O":-.55,"ASN:N":-.15,"ASN:CA":.1,"ASN:CB":0,"ASN:CG":.55,"ASN:OD1":-.55,"ASN:ND2":0,"ASN:C":.6,"ASN:O":-.55,"ASP:N":-.15,"ASP:CA":.1,"ASP:CB":0,"ASP:CG":.14,"ASP:OD1":-.57,"ASP:OD2":-.57,"ASP:C":.6,"ASP:O":-.55,"CYS:N":-.15,"CYS:CA":.1,"CYS:CB":.19,"CYS:SG":-.19,"CYS:C":.6,"CYS:O":-.55,"GLN:N":-.15,"GLN:CA":.1,"GLN:CB":0,"GLN:CG":0,"GLN:CD":.55,"GLN:OE1":-.55,"GLN:NE2":0,"GLN:C":.6,"GLN:O":-.55,"GLU:N":-.15,"GLU:CA":.1,"GLU:CB":0,"GLU:CG":0,"GLU:CD":.14,"GLU:OE1":-.57,"GLU:OE2":-.57,"GLU:C":.6,"GLU:O":-.55,"GLY:N":-.15,"GLY:CA":.1,"GLY:C":.6,"GLY:O":-.55,"HIS:N":-.15,"HIS:CA":.1,"HIS:CB":0,"HIS:CG":.1,"HIS:ND1":-.1,"HIS:CD2":.1,"HIS:NE2":-.4,"HIS:CE1":.3,"HIS:C":.6,"HIS:O":-.55,"ILE:N":-.15,"ILE:CA":.1,"ILE:CB":0,"ILE:CG2":0,"ILE:CG1":0,"ILE:CD":0,"ILE:C":.6,"ILE:O":-.55,"LEU:N":-.15,"LEU:CA":.1,"LEU:CB":0,"LEU:CG":0,"LEU:CD1":0,"LEU:CD2":0,"LEU:C":.6,"LEU:O":-.55,"LYS:N":-.15,"LYS:CA":.1,"LYS:CB":0,"LYS:CG":0,"LYS:CD":0,"LYS:CE":.25,"LYS:NZ":.75,"LYS:C":.6,"LYS:O":-.55,"MET:N":-.15,"MET:CA":.1,"MET:CB":0,"MET:CG":.06,"MET:SD":-.12,"MET:CE":.06,"MET:C":.6,"MET:O":-.55,"PHE:N":-.15,"PHE:CA":.1,"PHE:CB":0,"PHE:CG":0,"PHE:CD1":0,"PHE:CD2":0,"PHE:CE1":0,"PHE:CE2":0,"PHE:CZ":0,"PHE:C":.6,"PHE:O":-.55,"PRO:N":-.25,"PRO:CD":.1,"PRO:CA":.1,"PRO:CB":0,"PRO:CG":0,"PRO:C":.6,"PRO:O":-.55,"SER:N":-.15,"SER:CA":.1,"SER:CB":.25,"SER:OG":-.25,"SER:C":.6,"SER:O":-.55,"THR:N":-.15,"THR:CA":.1,"THR:CB":.25,"THR:OG1":-.25,"THR:CG2":0,"THR:C":.6,"THR:O":-.55,"TRP:N":-.15,"TRP:CA":.1,"TRP:CB":0,"TRP:CG":-.03,"TRP:CD2":.1,"TRP:CE2":-.04,"TRP:CE3":-.03,"TRP:CD1":.06,"TRP:NE1":-.06,"TRP:CZ2":0,"TRP:CZ3":0,"TRP:CH2":0,"TRP:C":.6,"TRP:O":-.55,"TYR:N":-.15,"TYR:CA":.1,"TYR:CB":0,"TYR:CG":0,"TYR:CD1":0,"TYR:CE1":0,"TYR:CD2":0,"TYR:CE2":0,"TYR:CZ":.25,"TYR:OH":-.25,"TYR:C":.6,"TYR:O":-.55,"VAL:N":-.15,"VAL:CA":.1,"VAL:CB":0,"VAL:CG1":0,"VAL:CG2":0,"VAL:C":.6,"VAL:O":-.55},n.applyPartialCharges=function(e,t){if((!t||void 0===e.partialCharge)&&e.resn&&e.atom){var r=e.resn+":"+e.atom;e.properties.partialCharge=n.partialCharges[r]}},n.VolumeData=function(e,t,n){if(this.unit={x:1,y:1,z:1},this.origin={x:0,y:0,z:0},this.size={x:0,y:0,z:0},this.data=new Float32Array([]),this.matrix=null,t=t.toLowerCase(),/\.gz$/.test(t)){t=t.replace(/\.gz$/,"");try{e=this[t]&&this[t].isbinary?pako.inflate(e):new TextDecoder("utf-8").decode(pako.inflate(e))}catch(e){console.log(e)}}if(this[t]&&this[t](e),n){if(n.negate)for(var r=0,o=this.data.length;r<o;r++)this.data[r]=-this.data[r];if(n.normalize){for(var a=0,r=0,o=this.data.length;r<o;r++)a+=this.data[r];var i=a/this.data.length;console.log("computed mean: "+i),a=0;for(var r=0,o=this.data.length;r<o;r++){var s=this.data[r]-i;a+=s*s}var l=a/this.data.length;console.log("Computed variance: "+l);for(var r=0,o=this.data.length;r<o;r++)this.data[r]=(this.data[r]-i)/l}}},n.VolumeData.prototype.getVal=function(e,t,n){return e-=this.origin.x,t-=this.origin.y,n-=this.origin.z,e/=this.unit.x,t/=this.unit.y,n/=this.unit.z,e=Math.round(e),t=Math.round(t),n=Math.round(n),e<0||e>=this.size.x?0:t<0||t>=this.size.y?0:n<0||n>=this.size.z?0:this.data[e*this.size.y*this.size.z+t*this.size.z+n]},n.VolumeData.prototype.getCoordinates=function(e){var t=e/(this.size.y*this.size.z),n=e%(this.size.y*this.size.z),r=e%this.size.z;return t*=this.unit.x,n*=this.unit.y,r*=this.unit.z,t+=this.origin.x,n+=this.origin.y,r+=this.origin.z,{x:t,y:n,z:r}},n.VolumeData.prototype.vasp=function(e){var t=e.replace(/^\s+/,"").split(/[\n\r]/),r=n.Parsers.vasp(e)[0],o=r.length;if(0==o)return console.log("No good formating of CHG or CHGCAR file, not atomic information provided in the file."),void(this.data=[]);var a,i=1.889725992,s=parseFloat(t[1]);a=t[2].replace(/^\s+/,"").split(/\s+/);var l=new n.Vector3(parseFloat(a[0]),parseFloat(a[1]),parseFloat(a[2])).multiplyScalar(s*i);a=t[3].replace(/^\s+/,"").split(/\s+/);var u=new n.Vector3(parseFloat(a[0]),parseFloat(a[1]),parseFloat(a[2])).multiplyScalar(s*i);a=t[4].replace(/^\s+/,"").split(/\s+/);var c=new n.Vector3(parseFloat(a[0]),parseFloat(a[1]),parseFloat(a[2])).multiplyScalar(s*i),d=l.x*(u.y*c.z-c.y*u.z)-u.x*(l.y*c.z-c.y*l.z)+c.x*(l.y*u.z-u.y*l.z);d=Math.abs(d)/Math.pow(i,3);var p=1/d;t.splice(0,8+o+1);var f=t[0].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),h=Math.abs(f[0]),m=Math.abs(f[1]),y=Math.abs(f[2]),g=this.origin=new n.Vector3(0,0,0);this.size={x:h,y:m,z:y},this.unit=new n.Vector3(l.x,u.y,c.z),l=l.multiplyScalar(1/(i*h)),u=u.multiplyScalar(1/(i*m)),c=c.multiplyScalar(1/(i*y)),0==l.y&&0==l.z&&0==u.x&&0==u.z&&0==c.x&&0==c.y||(this.matrix=new n.Matrix4(l.x,u.x,c.x,0,l.y,u.y,c.y,0,l.z,u.z,c.z,0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,(new n.Matrix4).makeTranslation(g.x,g.y,g.z)),this.origin=new n.Vector3(0,0,0),this.unit=new n.Vector3(1,1,1)),t.splice(0,1);var v=t.join(" ");v=v.replace(/^\s+/,""),v=v.split(/[\s\r]+/),v.splice(h*m*y+1);for(var b=new Float32Array(v),_=0;_<b.length;_++)b[_]=b[_]*p*.036749309;this.data=b},n.VolumeData.prototype.dx=function(e){var t,r,o=e.split(/[\n\r]+/),a=/gridpositions\s+counts\s+(\d+)\s+(\d+)\s+(\d+)/,i=/^origin\s+(\S+)\s+(\S+)\s+(\S+)/,s=/^delta\s+(\S+)\s+(\S+)\s+(\S+)/,l=/data follows/;for(t=0;t<o.length;t++){var u=o[t];if(r=a.exec(u)){var c=parseInt(r[1]),d=parseInt(r[2]),p=parseInt(r[3]);this.size={x:c,y:d,z:p}}else if(r=s.exec(u)){var f=parseFloat(r[1]);if(0==parseFloat(r[2])&&0==parseFloat(r[3])||console.log("Non-orthogonal delta matrix not currently supported in dx format"),t+=1,u=o[t],null==(r=s.exec(u)))return void console.log("Parse error in dx delta matrix");var h=parseFloat(r[2]);if(0==parseFloat(r[1])&&0==parseFloat(r[3])||console.log("Non-orthogonal delta matrix not currently supported in dx format"),t+=1,u=o[t],null==(r=s.exec(u)))return void console.log("Parse error in dx delta matrix");var m=parseFloat(r[3]);0==parseFloat(r[1])&&0==parseFloat(r[2])||console.log("Non-orthogonal delta matrix not currently supported in dx format"),this.unit=new n.Vector3(f,h,m)}else if(r=i.exec(u)){var y=parseFloat(r[1]),g=parseFloat(r[2]),v=parseFloat(r[3]);this.origin=new n.Vector3(y,g,v)}else if(r=l.exec(u))break}if(t+=1,!(this.size&&this.origin&&this.unit&&this.size))return void console.log("Error parsing dx format");var b=o.splice(t).join(" ");b=b.split(/[\s\r]+/),this.data=new Float32Array(b)},n.VolumeData.prototype.cube=function(e){var t=e.replace(/^\s+/,"").split(/[\n\r]+/);if(!(t.length<6)){var r=t[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),o=parseFloat(r[0]),a=Math.abs(o),i=this.origin=new n.Vector3(parseFloat(r[1]),parseFloat(r[2]),parseFloat(r[3]));r=t[3].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");var s=r[0]>0?.529177:1;i.multiplyScalar(s);var l=Math.abs(r[0]),u=new n.Vector3(parseFloat(r[1]),parseFloat(r[2]),parseFloat(r[3])).multiplyScalar(s);r=t[4].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");var c=Math.abs(r[0]),d=new n.Vector3(parseFloat(r[1]),parseFloat(r[2]),parseFloat(r[3])).multiplyScalar(s);r=t[5].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");var p=Math.abs(r[0]),f=new n.Vector3(parseFloat(r[1]),parseFloat(r[2]),parseFloat(r[3])).multiplyScalar(s);this.size={x:l,y:c,z:p},this.unit=new n.Vector3(u.x,d.y,f.z),0==u.y&&0==u.z&&0==d.x&&0==d.z&&0==f.x&&0==f.y||(this.matrix=new n.Matrix4(u.x,d.x,f.x,0,u.y,d.y,f.y,0,u.z,d.z,f.z,0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,(new n.Matrix4).makeTranslation(i.x,i.y,i.z)),this.origin=new n.Vector3(0,0,0),this.unit=new n.Vector3(1,1,1));var h=6;o<0&&h++;var m=t.splice(a+h).join(" ");m=m.replace(/^\s+/,""),m=m.split(/[\s\r]+/),this.data=new Float32Array(m)}},n.VolumeData.prototype.ccp4=function(e){var t={};e=new Int8Array(e);var r=new Int32Array(e.buffer,0,56),o=new Float32Array(e.buffer,0,56),a=new DataView(e.buffer);if(t.MAP=String.fromCharCode(a.getUint8(208),a.getUint8(209),a.getUint8(210),a.getUint8(211)),t.MACHST=[a.getUint8(212),a.getUint8(213)],17===t.MACHST[0]&&17===t.MACHST[1])for(var i=e.byteLength,s=0;s<i;s+=4)a.setFloat32(s,a.getFloat32(s),!0);t.NX=r[0],t.NY=r[1],t.NZ=r[2],t.MODE=r[3],t.NXSTART=r[4],t.NYSTART=r[5],t.NZSTART=r[6],t.MX=r[7],t.MY=r[8],t.MZ=r[9],t.xlen=o[10],t.ylen=o[11],t.zlen=o[12],t.alpha=o[13],t.beta=o[14],t.gamma=o[15],t.MAPC=r[16],t.MAPR=r[17],t.MAPS=r[18],t.DMIN=o[19],t.DMAX=o[20],t.DMEAN=o[21],t.ISPG=r[22],t.NSYMBT=r[23],t.LSKFLG=r[24],t.originX=o[49],t.originY=o[50],t.originZ=o[51],t.ARMS=o[54],console.log("Map has min,mean,average,rmsddv: "+t.DMIN+","+t.DMAX+","+t.DMEAN+","+t.ARMS);var l=t,u=[l.xlen,0,0],c=[l.ylen*Math.cos(Math.PI/180*l.gamma),l.ylen*Math.sin(Math.PI/180*l.gamma),0],d=[l.zlen*Math.cos(Math.PI/180*l.beta),l.zlen*(Math.cos(Math.PI/180*l.alpha)-Math.cos(Math.PI/180*l.gamma)*Math.cos(Math.PI/180*l.beta))/Math.sin(Math.PI/180*l.gamma),0];d[2]=Math.sqrt(l.zlen*l.zlen*Math.sin(Math.PI/180*l.beta)*Math.sin(Math.PI/180*l.beta)-d[1]*d[1]);var p=[0,u,c,d],f=[0,l.MX,l.MY,l.MZ],h=[0,l.MAPC,l.MAPR,l.MAPS];this.matrix=new n.Matrix4,this.matrix.set(p[h[1]][0]/f[h[1]],p[h[2]][0]/f[h[2]],p[h[3]][0]/f[h[3]],0,p[h[1]][1]/f[h[1]],p[h[2]][1]/f[h[2]],p[h[3]][1]/f[h[3]],0,p[h[1]][2]/f[h[1]],p[h[2]][2]/f[h[2]],p[h[3]][2]/f[h[3]],0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,(new n.Matrix4).makeTranslation(l.NXSTART+l.originX,l.NYSTART+l.originY,l.NZSTART+l.originZ)),this.origin=new n.Vector3(0,0,0),this.unit=new n.Vector3(1,1,1),this.size={x:t.NX,y:t.NY,z:t.NZ};var m=new Float32Array(e.buffer,1024+t.NSYMBT),y=t.NX,g=t.NY,v=t.NZ;this.data=new Float32Array(y*g*v);for(var s=0;s<y;s++)for(var b=0;b<g;b++)for(var _=0;_<v;_++)this.data[(s*g+b)*v+_]=m[(_*g+b)*y+s]},n.VolumeData.prototype.ccp4.isbinary=!0,n.workerString=function(){self.onmessage=function(e){var t=e.data,n=t.type;if(n<0)self.atomData=t.atoms,self.volume=t.volume,self.ps=new ProteinSurface;else{var r=self.ps;r.initparm(t.expandedExtent,1!=n,self.volume),r.fillvoxels(self.atomData,t.extendedAtoms),r.buildboundary(),4!==n&&2!==n||(r.fastdistancemap(),r.boundingatom(!1),r.fillvoxelswaals(self.atomData,t.extendedAtoms)),r.marchingcube(n);var o=r.getFacesAndVertices(t.atomsToShow);self.postMessage(o)}}}.toString().replace(/(^.*?\{|\}$)/g,""),n.workerString+="; var ProteinSurface="+n.ProteinSurface.toString().replace(/[a-zA-Z_$]{1}[0-9a-zA-Z_$]*.MarchingCube./g,"MarchingCube."),n.workerString+=",MarchingCube=("+n.MarchingCubeInitializer.toString()+")();",n.SurfaceWorker=window.URL?window.URL.createObjectURL(new Blob([n.workerString],{type:"text/javascript"})):{postMessage:function(){}},n.workerString=n.workerString,n.SurfaceWorker=n.SurfaceWorker}).call(window)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=n(1),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(l),c=n(33),d=n(176),p=n(1142),f=function(e){return e&&e.__esModule?e:{default:e}}(p),h=n(13),m=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":s(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},y=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.isTextTruncated=!0,e.toggleText=e.toggleText.bind(e),e}return a(t,e),i(t,[{key:"render",value:function(){var e=this.props.text;return"string"==typeof this.props.text&&(e=u.createElement(f.default,{text:this.props.text,line:this.props.line,truncateText:this.props.truncateText,textTruncateChild:u.createElement("a",{onClick:this.toggleText,style:{cursor:"pointer"}},this.props.expandIndicator)})),u.createElement(d.If,{condition:this.isTextTruncated},u.createElement(d.Then,null,e),u.createElement(d.Else,null,u.createElement("span",null,u.createElement("span",null,this.props.text," "),u.createElement("span",null,u.createElement("a",{onClick:this.toggleText,style:{cursor:"pointer"}},this.props.collapseIndicator)))))}},{key:"toggleText",value:function(){this.isTextTruncated=!this.isTextTruncated}}]),t}(u.Component);y.defaultProps={line:1,expandIndicator:"[...]",collapseIndicator:"[^]",truncateText:" "},m([h.observable],y.prototype,"isTextTruncated",void 0),y=m([c.observer],y),t.default=y},function(e,t,n){var r,o,a;!function(i,s){o=[e,t,n(1),n(2)],r=s,void 0!==(a="function"==typeof r?r.apply(t,o):r)&&(e.exports=a)}(0,function(e,t,n,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=o(n),c=o(r),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=function(e){function t(){var e,n,r,o;i(this,t);for(var a=arguments.length,l=Array(a),u=0;u<a;u++)l[u]=arguments[u];return n=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.onResize=function(){r.rafId&&window.cancelAnimationFrame(r.rafId),r.rafId=window.requestAnimationFrame(r.update.bind(r))},r.update=function(){r.forceUpdate()},o=n,s(r,o)}return l(t,e),d(t,[{key:"componentDidMount",value:function(){var e=document.createElement("canvas"),t=document.createDocumentFragment(),n=window.getComputedStyle(this.scope),r=[n["font-weight"],n["font-style"],n["font-size"],n["font-family"]].join(" ");t.appendChild(e),this.canvas=e.getContext("2d"),this.canvas.font=r,this.forceUpdate(),window.addEventListener("resize",this.onResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize),this.rafId&&window.cancelAnimationFrame(this.rafId)}},{key:"measureWidth",value:function(e){return this.canvas.measureText(e).width}},{key:"getRenderText",value:function(){var e=this.props,t=(e.containerClassName,e.line),n=e.text,r=e.textTruncateChild,o=e.truncateText,i=a(e,["containerClassName","line","text","textTruncateChild","truncateText"]),s=this.scope.getBoundingClientRect().width;if(0===s)return null;if(s>=this.measureWidth(n))return u.default.createElement("div",i,n);var l="";if(r&&"string"==typeof r.type){var c=r.type;(c.indexOf("span")>=0||c.indexOf("a")>=0)&&(l=r.props.children)}for(var d=1,p=n.length,f="",h=0,m=0,y=t,g=0,v=!1,b=-1;y--;){for(var _=y?"":o+" "+l;d<=p;){if(f=n.substr(m,d),!((g=this.measureWidth(f+_))<s)){do{d--,f=n.substr(m,d)," "===f[f.length-1]&&(f=n.substr(m,d-1)),v&&(b=f.lastIndexOf(" "))>-1&&(d=b,f=n.substr(m,d)),g=this.measureWidth(f+_)}while(g>=s&&f.length>0);m+=d;break}h=n.indexOf(" ",d+1),-1===h?(d+=1,v=!1):(v=!0,d=h)}if(d>=p){m=p;break}}return m===p?u.default.createElement("div",i,n):u.default.createElement("div",i,n.substr(0,m)+o+" ",r)}},{key:"render",value:function(){var e=this,t=this.props,n=t.text,r=t.containerClassName,o=n;return this.scope&&(o=this.getRenderText()),u.default.createElement("div",{ref:function(t){e.scope=t},className:r,style:{overflow:"hidden"}},o)}}]),t}(n.Component);p.propTypes={containerClassName:c.default.string,line:c.default.number,text:c.default.string,textTruncateChild:c.default.node,truncateText:c.default.string},p.defaultProps={line:1,text:"",truncateText:"…"},t.default=p,e.exports=t.default})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(3),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(s),u=n(1001),c=function(e){return e&&e.__esModule?e:{default:e}}(u),d=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e._script=[],e}return a(t,e),i(t,[{key:"generateScript",value:function(e,t,n,r){return this._script=[],this.reinitialize(),this.bgColor(r.backgroundColor||c.default.defaultProps.backgroundColor),this.loadPdb(e),this.updateVisualStyle(n,t,r),this.selectNone(),this._script.join("\n")}},{key:"reinitialize",value:function(){this._script.push("reinitialize;")}},{key:"bgColor",value:function(e){this._script.push("bg_color "+this.formatColor(e)+";")}},{key:"loadPdb",value:function(e){this._script.push("fetch "+e+", async=0;")}},{key:"setScheme",value:function(e){this._script.push(t.PROTEIN_SCHEME_PRESETS[e])}},{key:"setColor",value:function(e){this._script.push("color "+this.formatColor(e)+", sele;")}},{key:"selectChain",value:function(e){this._script.push("select chain "+e+";")}},{key:"selectAlphaHelix",value:function(e){this._script.push("select (chain "+e+") and (ss h);")}},{key:"selectBetaSheet",value:function(e){this._script.push("select (chain "+e+") and (ss s);")}},{key:"selectResidues",value:function(e,t){this._script.push("select (resi "+e.join(",")+") and (chain "+t+");")}},{key:"selectSideChains",value:function(e,t){this._script.push("select ((resi "+e.join(",")+") and (chain "+t+") and (not name c+n+o));")}},{key:"setTransparency",value:function(e){this._script.push("set transparency, "+e/10+", sele;"),this._script.push("set cartoon_transparency, "+e/10+", sele;"),this._script.push("set sphere_transparency, "+e/10+", sele;"),this._script.push("set stick_transparency, "+e/10+", sele;")}},{key:"enableBallAndStick",value:function(){this._script.push("show spheres, sele; show sticks, sele; alter sele, vdw=0.50;")}},{key:"disableBallAndStick",value:function(){this._script.push("hide spheres, sele; hide sticks, sele;")}},{key:"rainbowColor",value:function(){return this._script.push("spectrum count, rainbow_rev, sele;")}},{key:"cpkColor",value:function(){this._script.push("util.cbaw sele;")}},{key:"hideBoundMolecules",value:function(){this._script.push("hide everything, not resn asp+glu+arg+lys+his+asn+thr+cys+gln+tyr+ser+gly+ala+leu+val+ile+met+trp+phe+pro;")}},{key:"formatColor",value:function(e){return e.replace("#","0x")}},{key:"selectAll",value:function(){this._script.push("select all;")}},{key:"selectNone",value:function(){this._script.push("select none;")}},{key:"updateResidueStyle",value:function(e,t,n){var r=this,o=c.default.defaultProps,a=n.highlightColor||o.highlightColor,i=l.groupBy(e,function(e){return e.highlighted?a:e.color});l.each(l.keys(i),function(e){var a=i[e].map(function(e){return e.positionRange}),s=r.convertPositionsToResCode(a);i[e][0].highlighted?(r.selectResidues(s,t),r.setColor(n.highlightColor||o.highlightColor)):n.mutationColor===u.MutationColor.MUTATION_TYPE?(r.selectResidues(s,t),r.setColor(e)):n.mutationColor===u.MutationColor.UNIFORM&&(r.selectResidues(s,t),r.setColor(n.uniformMutationColor||o.uniformMutationColor));var l=n.sideChain===u.SideChain.ALL||!0===i[e][0].highlighted&&n.sideChain===u.SideChain.SELECTED;r.updateSideChains(t,s,l,n)})}},{key:"updateSideChains",value:function(e,t,n,r){n&&r.proteinScheme!==u.ProteinScheme.SPACE_FILLING&&(this.selectSideChains(t,e),this.enableBallAndStick())}}],[{key:"PROTEIN_SCHEME_PRESETS",get:function(){var e={};return e[u.ProteinScheme.CARTOON]="hide everything; show cartoon;",e[u.ProteinScheme.SPACE_FILLING]="hide everything; show spheres;",e[u.ProteinScheme.BALL_AND_STICK]="hide everything; show spheres; show sticks; alter all, vdw=0.50",e[u.ProteinScheme.RIBBON]="hide everything; show ribbon;",e[u.ProteinScheme.TRACE]=e[u.ProteinScheme.RIBBON],e}}]),t}(c.default);t.default=d},function(e,t){e.exports={portalWidth:"structureViewer-module__portalWidth__250aJ","main-3d-panel":"structureViewer-module__main-3d-panel__2asbr",header:"structureViewer-module__header__243uA",body:"structureViewer-module__body__3BGGR","collapsed-panel":"structureViewer-module__collapsed-panel__3T7vs","increased-size-panel":"structureViewer-module__increased-size-panel__1nCD-","default-option-select":"structureViewer-module__default-option-select__3EsrF","alpha-helix":"structureViewer-module__alpha-helix__3U1NC","beta-sheet":"structureViewer-module__beta-sheet__2rza2",loop:"structureViewer-module__loop__25tQU",highlighted:"structureViewer-module__highlighted__9IwJz","uniform-mutation":"structureViewer-module__uniform-mutation__2nUW-","missense-mutation":"structureViewer-module__missense-mutation__3m1Or","trunc-mutation":"structureViewer-module__trunc-mutation__1VdGC","inframe-mutation":"structureViewer-module__inframe-mutation__bSE4n"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(r)},u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=n(33),d=n(974),p=r(d),f=n(928),h=r(f),m=n(888),y=r(m),g=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},v=function(e){function t(e){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),s(t,[{key:"componentWillUpdate",value:function(e){this._columns[d.MutationTableColumnType.STUDY].visible=!!(e.studyIdToStudy&&Object.keys(e.studyIdToStudy).length>1)}},{key:"generateColumns",value:function(){var e=this;l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"generateColumns",this).call(this),this._columns[d.MutationTableColumnType.CANCER_TYPE].visible=h.default.isVisible(this.props.dataStore?this.props.dataStore.allData:this.props.data,this.props.uniqueSampleKeyToTumorType),this._columns[d.MutationTableColumnType.TUMOR_ALLELE_FREQ].visible=y.default.isVisible(this.props.dataStore?this.props.dataStore.allData:this.props.data),this._columns[d.MutationTableColumnType.STUDY].order=0,this._columns[d.MutationTableColumnType.SAMPLE_ID].order=10,this._columns[d.MutationTableColumnType.CANCER_TYPE].order=15,this._columns[d.MutationTableColumnType.PROTEIN_CHANGE].order=20,this._columns[d.MutationTableColumnType.ANNOTATION].order=30,this._columns[d.MutationTableColumnType.FUNCTIONAL_IMPACT].order=38,this._columns[d.MutationTableColumnType.MUTATION_TYPE].order=40,this._columns[d.MutationTableColumnType.COPY_NUM].order=50,this._columns[d.MutationTableColumnType.COSMIC].order=60,this._columns[d.MutationTableColumnType.MUTATION_STATUS].order=70,this._columns[d.MutationTableColumnType.VALIDATION_STATUS].order=80,this._columns[d.MutationTableColumnType.CENTER].order=100,this._columns[d.MutationTableColumnType.CHROMOSOME].order=110,this._columns[d.MutationTableColumnType.START_POS].order=120,this._columns[d.MutationTableColumnType.END_POS].order=130,this._columns[d.MutationTableColumnType.REF_ALLELE].order=140,this._columns[d.MutationTableColumnType.VAR_ALLELE].order=150,this._columns[d.MutationTableColumnType.TUMOR_ALLELE_FREQ].order=160,this._columns[d.MutationTableColumnType.NORMAL_ALLELE_FREQ].order=170,this._columns[d.MutationTableColumnType.VAR_READS].order=180,this._columns[d.MutationTableColumnType.REF_READS].order=190,this._columns[d.MutationTableColumnType.VAR_READS_N].order=200,this._columns[d.MutationTableColumnType.REF_READS_N].order=210,this._columns[d.MutationTableColumnType.NUM_MUTATIONS].order=220,this._columns[d.MutationTableColumnType.CANCER_TYPE].shouldExclude=function(){return!e.props.uniqueSampleKeyToTumorType},this._columns[d.MutationTableColumnType.NUM_MUTATIONS].shouldExclude=function(){return!e.props.mutationCountCache}}}]),t}(p.default);v.defaultProps=Object.assign({},p.default.defaultProps,{columns:[d.MutationTableColumnType.STUDY,d.MutationTableColumnType.SAMPLE_ID,d.MutationTableColumnType.COPY_NUM,d.MutationTableColumnType.ANNOTATION,d.MutationTableColumnType.FUNCTIONAL_IMPACT,d.MutationTableColumnType.REF_READS_N,d.MutationTableColumnType.VAR_READS_N,d.MutationTableColumnType.REF_READS,d.MutationTableColumnType.VAR_READS,d.MutationTableColumnType.START_POS,d.MutationTableColumnType.END_POS,d.MutationTableColumnType.REF_ALLELE,d.MutationTableColumnType.VAR_ALLELE,d.MutationTableColumnType.MUTATION_STATUS,d.MutationTableColumnType.VALIDATION_STATUS,d.MutationTableColumnType.CENTER,d.MutationTableColumnType.CHROMOSOME,d.MutationTableColumnType.PROTEIN_CHANGE,d.MutationTableColumnType.MUTATION_TYPE,d.MutationTableColumnType.COSMIC,d.MutationTableColumnType.TUMOR_ALLELE_FREQ,d.MutationTableColumnType.NORMAL_ALLELE_FREQ,d.MutationTableColumnType.CANCER_TYPE,d.MutationTableColumnType.NUM_MUTATIONS]}),v=g([c.observer],v),t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(1),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),d=n(1147),p=r(d),f=n(91),h=n(854),m=r(h),y=n(18),g=r(y),v=n(174),b=r(v),_=n(33),w=n(13),x=n(3),S=r(x),C=n(905),k=r(C),E=n(123),M=n(180),A=n(1153),T=n(25),O=n(34),P=r(O),j=n(179),I=r(j),D=n(1154),N=r(D),R=n(892),L=r(R),F=n(295),z=r(F),B=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},V=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.mouseInPlot=!0,n.legendShown=!1,n.yMaxInputFocused=!1,n.mutationAlignerLinks=(0,f.remoteData)({await:function(){return[n.props.store.canonicalTranscript]},invoke:function(){return new Promise(function(e,t){for(var r=n.props.store.canonicalTranscript.result?n.props.store.canonicalTranscript.result.pfamDomains:void 0,o=[],a=0;r&&a<r.length;a++)o.push(g.default.get((0,T.getMutationAlignerUrl)()+"?pfamAccession="+r[a].pfamDomainId));var i=Promise.all(o);i.then(function(t){for(var n=t.map(function(e){return JSON.parse(e.text)}),o={},a=void 0,i=void 0,s=0;s<n.length;s++)a=n[s],(i=r?r[s].pfamDomainId:null)&&a.linkToMutationAligner&&(o[i]=a.linkToMutationAligner);e(o)}),i.catch(t)})}},{}),n.handlers={handleYAxisMaxSliderChange:(0,w.action)(function(e){var t=e.target.value,r=parseInt(t,10);n._yMaxInput=r<n.countRange[0]?n.countRange[0]:r}),handleYAxisMaxChange:(0,w.action)(function(e){var t=parseInt(e,10);n._yMaxInput=t<n.countRange[0]?n.countRange[0]:t}),handleSVGClick:function(){(0,I.default)((new XMLSerializer).serializeToString(n.toSVGDOMNode()),n.hugoGeneSymbol+"_lollipop.svg")},handlePDFClick:function(){(0,k.default)(n.hugoGeneSymbol+"_lollipop.pdf",n.toSVGDOMNode())},onYMaxInputFocused:function(){n.yMaxInputFocused=!0},onYMaxInputBlurred:function(){n.yMaxInputFocused=!1},handleToggleLegend:(0,w.action)(function(){n.legendShown=!n.legendShown}),onMouseEnterPlot:(0,w.action)(function(){n.mouseInPlot=!0}),onMouseLeavePlot:(0,w.action)(function(){n.mouseInPlot=!1}),ref:function(e){n.plot=e}},n}return i(t,e),s(t,[{key:"lollipopLabel",value:function(e){var t=S.default.uniq(e.map(function(e){return e.proteinChange}));t.sort();var n="";return t.length>1&&(n=(0,E.longestCommonStartingSubstring)(t[0],t[t.length-1])),t=t.map(function(e){return e.substring(n.length)}),n+t.join("/")}},{key:"lollipopTooltip",value:function(e,t){var n=e[0].proteinPosStart,r=t[n],o="mutation"+(r>1?"s":""),a=this.lollipopLabel(e);return c.createElement("div",null,c.createElement("b",null,r," ",o),c.createElement("br",null),c.createElement("span",null,"AA Change: ",a))}},{key:"domainTooltip",value:function(e,t,n){var r=t?t.pfamAccession:n,o=this.mutationAlignerLinks.result[r],a=o?c.createElement("a",{href:o,target:"_blank"},"Mutation Aligner"):null,i=t?t.name+": "+t.description:r;return c.createElement("div",{style:{maxWidth:200}},c.createElement("div",null,i," (",e.pfamDomainStart," - ",e.pfamDomainEnd,")"),c.createElement("div",null,c.createElement("a",{style:{marginRight:"5px"},href:"http://pfam.xfam.org/family/"+r,target:"_blank"},"PFAM"),a))}},{key:"sequenceTooltip",value:function(){return c.createElement("div",{style:{maxWidth:200}},c.createElement("a",{href:"http://www.uniprot.org/uniprot/"+this.props.store.uniprotId.result,target:"_blank"},this.props.store.uniprotId.result))}},{key:"toSVGDOMNode",value:function(){if(this.plot){var e=this.plot.toSVGDOMNode(),t=c.createElement("text",{fill:"#2E3436",textAnchor:"start",dy:"1em",x:"2",y:"2",style:{fontFamily:"verdana",fontSize:"12px",fontWeight:"bold"}},this.hugoGeneSymbol),n=document.createElementNS("http://www.w3.org/2000/svg","g");return P.default.render(t,n),e.appendChild(n),e}return document.createElementNS("http://www.w3.org/2000/svg","svg")}},{key:"render",value:function(){return this.props.store.pfamDomainData.isComplete&&this.props.store.pfamDomainData.result?c.createElement("div",{style:{display:"inline-block"},onMouseEnter:this.handlers.onMouseEnterPlot,onMouseLeave:this.handlers.onMouseLeavePlot},this.controls,c.createElement(L.default,{isOpened:this.legendShown},this.legend),c.createElement(p.default,{ref:this.handlers.ref,sequence:this.sequence,lollipops:this.lollipops,domains:this.domains,dataStore:this.props.store.dataStore,vizWidth:this.props.geneWidth,vizHeight:130,xMax:this.props.store.canonicalTranscript.result&&this.props.store.canonicalTranscript.result.proteinLength||this.props.store.gene.length/3,yMax:this.yMaxInput,onXAxisOffset:this.props.onXAxisOffset})):c.createElement(m.default,{isLoading:!0})}},{key:"showControls",get:function(){return this.yMaxInputFocused||this.mouseInPlot}},{key:"mutationsByPosition",get:function(){var e={},t=void 0,n=!0,r=!1,o=void 0;try{for(var a,i=this.props.store.dataStore.sortedFilteredData[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var s=a.value,l=!0,u=!1,c=void 0;try{for(var d,p=s[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var f=d.value;t=f.proteinPosStart,e[t]=e[t]||[],e[t].push(f)}}catch(e){u=!0,c=e}finally{try{!l&&p.return&&p.return()}finally{if(u)throw c}}}}catch(e){r=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw o}}return e}},{key:"uniqueMutationCountsByPosition",get:function(){var e=this,t={};return Object.keys(this.mutationsByPosition).forEach(function(n){var r=parseInt(n,10);t[r]=(0,M.countUniqueMutations)(e.mutationsByPosition[r])}),t}},{key:"lollipops",get:function(){var e=this;if(0===Object.keys(this.mutationsByPosition).length)return[];var t=this.uniqueMutationCountsByPosition,n=Object.keys(this.mutationsByPosition).map(function(t){return e.mutationsByPosition[parseInt(t,10)]}).sort(function(e,n){return t[e[0].proteinPosStart]<t[n[0].proteinPosStart]?1:-1}),r=t[n[0][0].proteinPosStart],o=n.findIndex(function(e){return t[e[0].proteinPosStart]!==r});-1===o&&(o=n.length);var a=void 0;a=o>1&&o>2?0:Math.min(o,1);for(var i=[],s=0;s<n.length;s++){var l=n[s],u=l[0].proteinPosStart,c=t[u];if(!(isNaN(u)||u<0||this.props.store.canonicalTranscript.isComplete&&this.props.store.canonicalTranscript.result&&u>this.props.store.canonicalTranscript.result.proteinLength+1)){var d=void 0;d=s<a&&c>=1?this.lollipopLabel(l):void 0,i.push({codon:u,count:c,tooltip:this.lollipopTooltip(l,t),color:(0,M.getColorForProteinImpactType)(l,this.props),label:d})}}return i}},{key:"domains",get:function(){var e=this;return this.props.store.pfamDomainData.isComplete&&this.props.store.pfamDomainData.result&&0!==this.props.store.pfamDomainData.result.length&&this.props.store.canonicalTranscript.isComplete&&this.props.store.canonicalTranscript.result&&0!==this.props.store.canonicalTranscript.result.pfamDomains.length?this.props.store.canonicalTranscript.result.pfamDomains.map(function(t){var n=e.domainMap[t.pfamDomainId];return{startCodon:t.pfamDomainStart,endCodon:t.pfamDomainEnd,label:n?n.name:t.pfamDomainId,color:e.domainColorMap[t.pfamDomainId],tooltip:e.domainTooltip(t,n,t.pfamDomainId)}}):[]}},{key:"domainColorMap",get:function(){return!this.props.store.canonicalTranscript.isPending&&this.props.store.canonicalTranscript.result&&this.props.store.canonicalTranscript.result.pfamDomains&&this.props.store.canonicalTranscript.result.pfamDomains.length>0?(0,A.generatePfamDomainColorMap)(this.props.store.canonicalTranscript.result.pfamDomains):{}}},{key:"domainMap",get:function(){return!this.props.store.pfamDomainData.isPending&&this.props.store.pfamDomainData.result&&this.props.store.pfamDomainData.result.length>0?S.default.keyBy(this.props.store.pfamDomainData.result,"pfamAccession"):{}}},{key:"sequence",get:function(){return{tooltip:this.sequenceTooltip()}}},{key:"hugoGeneSymbol",get:function(){return this.props.store.gene.hugoGeneSymbol}},{key:"countRange",get:function(){if(0===this.lollipops.length)return[0,0];var e=5,t=1,n=!0,r=!1,o=void 0;try{for(var a,i=this.lollipops[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var s=a.value;e=Math.max(e,s.count),t=Math.min(t,s.count)}}catch(e){r=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw o}}return[t,e]}},{key:"sliderRange",get:function(){return[this.countRange[0],Math.max(this.countRange[1],this.countRange[0]+5)]}},{key:"yMaxSlider",get:function(){return Math.min(this.countRange[1],this._yMaxInput||this.countRange[1])}},{key:"yMaxInput",get:function(){return this._yMaxInput||this.countRange[1]}},{key:"legend",get:function(){return c.createElement("div",{style:{maxWidth:700,marginTop:5}},c.createElement("span",{style:{color:"#2153AA",fontWeight:"bold",fontSize:"14px",fontFamily:"verdana, arial"}},"Color Codes"),c.createElement("p",null,"Mutation diagram circles are colored with respect to the corresponding mutation types. In case of different mutation types at a single position, color of the circle is determined with respect to the most frequent mutation type."),c.createElement("br",null),c.createElement("div",null,"Mutation types and corresponding color codes are as follows:",c.createElement("ul",null,c.createElement("li",null,c.createElement("span",{style:{color:this.props.missenseColor,fontWeight:"bold",fontSize:"14px",fontFamily:"verdana, arial"}},"Missense Mutations")),c.createElement("li",null,c.createElement("span",{style:{color:this.props.truncatingColor,fontWeight:"bold",fontSize:"14px",fontFamily:"verdana, arial"}},"Truncating Mutations"),": Nonsense, Nonstop, Frameshift deletion, Frameshift insertion, Splice site"),c.createElement("li",null,c.createElement("span",{style:{color:this.props.inframeColor,fontWeight:"bold",fontSize:"14px",fontFamily:"verdana, arial"}},"Inframe Mutations"),": Inframe deletion, Inframe insertion"),c.createElement("li",null,c.createElement("span",{style:{color:this.props.otherColor,fontWeight:"bold",fontSize:"14px",fontFamily:"verdana, arial"}},"Other Mutations"),": All other types of mutations"))))}},{key:"controls",get:function(){return c.createElement("div",{className:(0,b.default)(this.showControls?N.default["fade-in"]:N.default["fade-out"])},c.createElement("span",null,c.createElement("div",{role:"group",className:"btn-group"},c.createElement("button",{className:"btn btn-default btn-xs",onClick:this.handlers.handleSVGClick},"SVG ",c.createElement("i",{className:"fa fa-cloud-download","aria-hidden":"true"})),c.createElement("button",{className:"btn btn-default btn-xs",onClick:this.handlers.handlePDFClick},"PDF ",c.createElement("i",{className:"fa fa-cloud-download","aria-hidden":"true"})),c.createElement("button",{className:"btn btn-default btn-xs",onClick:this.handlers.handleToggleLegend},"Legend ",c.createElement("i",{className:"fa fa-eye","aria-hidden":"true"}))),c.createElement("div",{className:"small",style:{float:"right",display:"flex",alignItems:"center"}},c.createElement("span",null,"Y-Axis Max:"),c.createElement("input",{style:{display:"inline-block",padding:0,width:200,marginLeft:10,marginRight:10},type:"range",min:this.countRange[0],max:this.countRange[1],step:"1",onChange:this.handlers.handleYAxisMaxSliderChange,value:this.yMaxSlider}),c.createElement(z.default,{className:N.default["ymax-number-input"],value:""+this.yMaxInput,setValue:this.handlers.handleYAxisMaxChange,numericOnly:!0,onFocus:this.handlers.onYMaxInputFocused,onBlur:this.handlers.onYMaxInputBlurred})),"  "))}}]),t}(c.Component);B([w.observable],V.prototype,"mouseInPlot",void 0),B([w.observable],V.prototype,"_yMaxInput",void 0),B([w.observable],V.prototype,"legendShown",void 0),B([w.observable],V.prototype,"yMaxInputFocused",void 0),B([w.computed],V.prototype,"showControls",null),B([w.computed],V.prototype,"mutationsByPosition",null),B([w.computed],V.prototype,"uniqueMutationCountsByPosition",null),B([w.computed],V.prototype,"lollipops",null),B([w.computed],V.prototype,"domains",null),B([w.computed],V.prototype,"domainColorMap",null),B([w.computed],V.prototype,"domainMap",null),B([w.computed],V.prototype,"sequence",null),B([w.computed],V.prototype,"hugoGeneSymbol",null),B([w.computed],V.prototype,"countRange",null),B([w.computed],V.prototype,"sliderRange",null),B([w.computed],V.prototype,"yMaxSlider",null),B([w.computed],V.prototype,"yMaxInput",null),B([w.computed],V.prototype,"controls",null),V=B([_.observer],V),t.default=V},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=n(1),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(c),p=n(33),f=n(13),h=n(173),m=r(h),y=n(1148),g=r(y),v=n(1065),b=r(v),_=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},w=function(e){function t(){o(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.hitZoneConfig={hitRect:{x:0,y:0,width:0,height:0},content:d.createElement("span",null),tooltipPlacement:"top",cursor:"pointer",onMouseOver:function(){return 0},onClick:function(){return 0},onMouseOut:function(){return 0}},e.handlers={ref:function(t){e.plot=t},setHitZone:function(t,n,r,o,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"pointer",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"top";e.hitZoneConfig={hitRect:t,content:n,onMouseOver:r,onClick:o,onMouseOut:a,cursor:i,tooltipPlacement:s}},getOverlay:function(){return e.hitZoneConfig.content},getOverlayPlacement:function(){return e.hitZoneConfig.tooltipPlacement},onMouseLeave:function(){e.hitZoneConfig.onMouseOut&&e.hitZoneConfig.onMouseOut()},onBackgroundMouseMove:function(){e.hitZoneConfig.onMouseOut&&e.hitZoneConfig.onMouseOut()}},e}return i(t,e),l(t,[{key:"toSVGDOMNode",value:function(){return this.plot?this.plot.toSVGDOMNode():document.createElementNS("http://www.w3.org/2000/svg","svg")}},{key:"render",value:function(){var e={};return this.tooltipVisible||(e.visible=!1),d.createElement("div",{style:{position:"relative"},"data-test":"LollipopPlot"},d.createElement(m.default,s({placement:this.handlers.getOverlayPlacement(),overlay:this.handlers.getOverlay},e),this.hitZone),d.createElement(g.default,s({ref:this.handlers.ref,setHitZone:this.handlers.setHitZone,onMouseLeave:this.handlers.onMouseLeave,onBackgroundMouseMove:this.handlers.onBackgroundMouseMove},this.props)))}},{key:"tooltipVisible",get:function(){return!!this.hitZoneConfig.content}},{key:"hitZone",get:function(){return d.createElement(b.default,{y:this.hitZoneConfig.hitRect.y,x:this.hitZoneConfig.hitRect.x,width:this.hitZoneConfig.hitRect.width,height:this.hitZoneConfig.hitRect.height,onMouseOver:this.hitZoneConfig.onMouseOver,onClick:this.hitZoneConfig.onClick,onMouseOut:this.hitZoneConfig.onMouseOut,cursor:this.hitZoneConfig.cursor})}}]),t}(d.Component);_([f.observable],w.prototype,"hitZoneConfig",void 0),_([f.computed],w.prototype,"tooltipVisible",null),_([f.computed],w.prototype,"hitZone",null),w=_([p.observer],w),t.default=w},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(1),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),d=n(3),p=r(d),f=n(1149),h=r(f),m=n(1150),y=r(m),g=n(1151),v=r(g),b=n(1152),_=r(b),w=n(33),x=n(13),S=n(90),C=r(S),k=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},E=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.sequenceComponents=[],n.shiftPressed=!1,n.lollipopZeroHeight=10,n.xAxisCandidateTickIntervals=[50,100,200,250,500,1e3,2500,5e3,1e4,25e3],n.yAxisCandidateTickIntervals=[1,2,5,10,20,50,100,200,500],n.xAxisHeight=30,n.yAxisWidth=50,n.geneHeight=14,n.domainHeight=24,n.handlers={ref:function(e){n.svg=e},onBackgroundClick:function(){n.props.dataStore.clearSelectedPositions()},onBackgroundMouseMove:function(){n.props.onBackgroundMouseMove&&n.props.onBackgroundMouseMove(),n.unhoverAllLollipops()},onLollipopClick:function(e){var t=n.props.dataStore.isPositionSelected(e);n.shiftPressed||n.props.dataStore.clearSelectedPositions(),n.props.dataStore.setPositionSelected(e,!t)},onKeyDown:function(e){16===e.which&&(n.shiftPressed=!0)},onKeyUp:function(e){16===e.which&&(n.shiftPressed=!1)},onMouseOver:function(e){n.unhoverAllLollipops();var t=e.target,r=t.getAttribute("class")||"",o=n.getLollipopIndex(r),a=null,i=null;if(null!==o){var s=n.lollipopComponents[o];s&&(s.isHovered=!0,n.props.setHitZone&&n.props.setHitZone(s.circleHitRect,s.props.spec.tooltip,(0,x.action)(function(){n.props.dataStore.setPositionHighlighted(s.props.spec.codon,!0),s.isHovered=!0}),function(){return n.handlers.onLollipopClick(s.props.spec.codon)}))}else a=n.getDomainIndex(r);if(null!==a){var l=n.domainComponents[a];l&&n.props.setHitZone&&n.props.setHitZone(l.hitRect,l.props.spec.tooltip,void 0,void 0,void 0,"auto")}else i=n.getSequenceIndex(r);if(null!==i){var u=n.sequenceComponents[i];u&&n.props.setHitZone&&n.props.setHitZone(u.hitRect,u.props.spec.tooltip,void 0,void 0,void 0,"auto")}},onSVGMouseLeave:function(e){"svg"===e.target.tagName.toLowerCase()&&n.props.onMouseLeave&&n.props.onMouseLeave()}},n}return i(t,e),s(t,[{key:"unhoverAllLollipops",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,o=Object.keys(this.lollipopComponents)[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var a=r.value,i=this.lollipopComponents[a];i&&(i.isHovered=!1)}}catch(e){t=!0,n=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw n}}this.props.dataStore.clearHighlightedPositions()}},{key:"componentDidMount",value:function(){(0,C.default)(document).on("keydown",this.handlers.onKeyDown),(0,C.default)(document).on("keyup",this.handlers.onKeyUp),this.props.onXAxisOffset&&this.props.onXAxisOffset(this.geneX)}},{key:"componentWillUnmount",value:function(){(0,C.default)(document).off("keydown",this.handlers.onKeyDown),(0,C.default)(document).off("keyup",this.handlers.onKeyUp)}},{key:"componentDidUpdate",value:function(){this.props.onXAxisOffset&&this.props.onXAxisOffset(this.geneX)}},{key:"codonToX",value:function(e){return e/this.props.xMax*this.props.vizWidth}},{key:"countToHeight",value:function(e){return this.lollipopZeroHeight+Math.min(1,e/this.yMax)*this.yAxisHeight}},{key:"calculateTickInterval",value:function(e,t,n){var r=void 0,o=e.find(function(e){return t/e<n-1});if(o)r=o;else for(r=10;t/r>n-1;)r*=10;return r}},{key:"calculateTicks",value:function(e,t,n){for(var r=[],o=e;o<t;){var a=void 0;n&&t-o>2*e/3&&o%(2*e)==0&&(a=o+""),r.push({position:o,label:a}),o+=e}return r}},{key:"makeDomainIndexClass",value:function(e){return"domain-"+e}},{key:"makeLollipopIndexClass",value:function(e){return"lollipop-"+e}},{key:"makeSequenceIndexClass",value:function(e){return"sequence-"+e}},{key:"getComponentIndex",value:function(e,t){var n=e.split(/[\s]+/g).map(function(e){return e.match(new RegExp("^"+t+"(.*)$"))}).find(function(e){return null!==e});return n?parseInt(n[1],10):null}},{key:"getDomainIndex",value:function(e){return this.getComponentIndex(e,"domain-")}},{key:"getLollipopIndex",value:function(e){return this.getComponentIndex(e,"lollipop-")}},{key:"getSequenceIndex",value:function(e){return this.getComponentIndex(e,"sequence-")}},{key:"toSVGDOMNode",value:function(){if(this.svg){var e=this.svg.cloneNode(!0);return(0,C.default)(e).find(".delete-for-download").remove(),e}return document.createElementNS("http://www.w3.org/2000/svg","svg")}},{key:"render",value:function(){return c.createElement("div",{onMouseOver:this.handlers.onMouseOver},c.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",ref:this.handlers.ref,width:this.svgWidth,height:this.svgHeight,onMouseLeave:this.handlers.onSVGMouseLeave},c.createElement("rect",{fill:"#FFFFFF",x:0,y:0,width:this.svgWidth,height:this.svgHeight,onClick:this.handlers.onBackgroundClick,onMouseMove:this.handlers.onBackgroundMouseMove}),c.createElement("rect",{fill:"#BABDB6",x:this.geneX,y:this.geneY,height:this.geneHeight,width:this.props.vizWidth+1}),this.lollipops,this.domains,c.createElement(_.default,{key:"horz",x:this.geneX,y:this.geneY+this.geneHeight+10,length:this.props.vizWidth,tickLength:7,rangeLower:0,rangeUpper:this.props.xMax,ticks:this.xTicks}),c.createElement(_.default,{key:"vert",x:this.geneX-10,y:this.geneY-this.lollipopZeroHeight-this.yAxisHeight,length:this.yAxisHeight,tickLength:7,rangeLower:0,rangeUpper:this.yMax,ticks:this.yTicks,vertical:!0,label:"# Mutations"})))}},{key:"xAxisTickInterval",get:function(){return this.calculateTickInterval(this.xAxisCandidateTickIntervals,this.props.xMax,16)}},{key:"yAxisTickInterval",get:function(){return this.calculateTickInterval(this.yAxisCandidateTickIntervals,this.yMax,10)}},{key:"xTicks",get:function(){var e=[];return e.push({position:0,label:"0"}),e.push({position:this.props.xMax,label:this.props.xMax+"aa"}),e=e.concat(this.calculateTicks(this.xAxisTickInterval,this.props.xMax,!0))}},{key:"yTicks",get:function(){var e=[];return e.push({position:0,label:"0"}),e.push({position:this.yMax,label:this.yMaxLabel}),e=e.concat(this.calculateTicks(this.yAxisTickInterval,this.yMax,!1))}},{key:"yMax",get:function(){return this.props.yMax||this.props.lollipops.reduce(function(e,t){return Math.max(e,t.count)},1)}},{key:"yMaxLabel",get:function(){var e=this;return(this.props.lollipops.find(function(t){return t.count>e.yMax})?">= ":"")+this.yMax}},{key:"yAxisHeight",get:function(){return this.props.vizHeight-this.domainHeight-this.lollipopZeroHeight}},{key:"geneX",get:function(){return this.yAxisWidth+20}},{key:"geneY",get:function(){return this.props.vizHeight-this.geneHeight+30}},{key:"domainY",get:function(){return this.geneY-(this.domainHeight-this.geneHeight)/2}},{key:"sequenceSegments",get:function(){var e=this,t=[],n=0,r=p.default.map(this.props.domains,function(t){var r={start:n,end:e.codonToX(t.startCodon)};return n=e.codonToX(t.endCodon),r}),o=this.props.vizWidth;return r.push({start:n,end:o}),r.sort(function(e,t){return e.start-t.start}),r.forEach(function(n,r){t.push(c.createElement(h.default,{ref:function(t){null!==t&&(e.sequenceComponents[r]=t)},color:"#BABDB6",x:e.geneX+n.start,y:e.geneY,height:e.geneHeight,width:n.end-n.start,spec:e.props.sequence,hitzoneClassName:["delete-for-download",e.makeSequenceIndexClass(r)].join(" ")}))}),t}},{key:"lollipops",get:function(){var e=this;this.lollipopComponents={};this.yMax;return this.props.lollipops.map(function(t,n){return c.createElement(y.default,{key:t.codon,ref:function(t){null!==t&&(e.lollipopComponents[n]=t)},x:e.geneX+e.codonToX(t.codon),stickBaseY:e.geneY,stickHeight:e.countToHeight(t.count),headRadius:e.props.dataStore.isPositionSelected(t.codon)?5:2.8,hoverHeadRadius:5,label:t.label,headColor:t.color,hitzoneClassName:["delete-for-download",e.makeLollipopIndexClass(n)].join(" "),spec:t})})}},{key:"domains",get:function(){var e=this;return this.domainComponents={},this.props.domains.map(function(t,n){var r=e.codonToX(t.startCodon),o=e.codonToX(t.endCodon)-r;return c.createElement(v.default,{key:n,ref:function(t){null!==t&&(e.domainComponents[n]=t)},x:e.geneX+r,y:e.domainY,width:o,height:e.domainHeight,color:t.color,label:t.label,labelColor:t.labelColor,hitzoneClassName:["delete-for-download",e.makeDomainIndexClass(n)].join(" "),spec:t})})}},{key:"svgWidth",get:function(){return this.props.vizWidth+this.geneX+30}},{key:"svgHeight",get:function(){return this.geneY+this.domainHeight+this.xAxisHeight}}]),t}(c.Component);k([x.computed],E.prototype,"xAxisTickInterval",null),k([x.computed],E.prototype,"yAxisTickInterval",null),k([x.computed],E.prototype,"xTicks",null),k([x.computed],E.prototype,"yTicks",null),k([x.computed],E.prototype,"yMax",null),k([x.computed],E.prototype,"yMaxLabel",null),k([x.computed],E.prototype,"yAxisHeight",null),k([x.computed],E.prototype,"geneX",null),k([x.computed],E.prototype,"geneY",null),k([x.computed],E.prototype,"domainY",null),k([x.computed],E.prototype,"sequenceSegments",null),k([x.computed],E.prototype,"lollipops",null),k([x.computed],E.prototype,"domains",null),k([x.computed],E.prototype,"svgWidth",null),k([x.computed],E.prototype,"svgHeight",null),E=k([w.observer],E),t.default=E},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=n(1),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(l),c=n(33),d=n(13),p=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":s(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},f=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.isMounted=!1,n}return a(t,e),i(t,[{key:"componentDidMount",value:function(){this.isMounted=!0}},{key:"render",value:function(){return u.createElement("g",null,u.createElement("rect",{x:this.props.x,y:this.props.y,width:this.props.width,height:this.props.height,fill:this.props.color}),u.createElement("rect",{className:this.props.hitzoneClassName,x:this.props.x,y:this.props.y,width:this.props.width,height:this.props.height,fill:"rgba(0,0,0,0)"}))}},{key:"hitRect",get:function(){return{x:this.props.x,y:this.props.y,width:this.props.width,height:this.props.height}}}]),t}(u.Component);p([d.observable],f.prototype,"isMounted",void 0),f=p([c.observer],f),t.default=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=n(1),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(l),c=n(33),d=n(13),p=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":s(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},f=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.isHovered=!1,e}return a(t,e),i(t,[{key:"render",value:function(){var e=null;return this.props.label&&(e=u.createElement("text",{fill:"#2E3436",style:{fontSize:"10px",fontFamily:"arial"},textAnchor:"middle",x:this.props.x,y:this.props.stickBaseY-this.props.stickHeight-this.props.headRadius-5},this.props.label)),u.createElement("g",null,u.createElement("line",{strokeWidth:"1",stroke:this.props.stickColor||"#BABDB6",x1:this.props.x,x2:this.props.x,y1:this.props.stickBaseY,y2:this.props.stickBaseY-this.props.stickHeight}),u.createElement("circle",{stroke:"#BABDB6",strokeWidth:"0.5",fill:this.props.headColor||"#000000",r:this.headRadius,cx:this.circleX,cy:this.circleY}),u.createElement("circle",{className:this.props.hitzoneClassName,fill:"rgba(0,0,0,0)",r:this.props.hoverHeadRadius,cx:this.circleX,cy:this.circleY,cursor:"pointer"}),e)}},{key:"headRadius",get:function(){return this.isHovered?this.props.hoverHeadRadius:this.props.headRadius}},{key:"circleX",get:function(){return this.props.x}},{key:"circleY",get:function(){return this.props.stickBaseY-this.props.stickHeight}},{key:"circleHitRect",get:function(){return{x:this.circleX-this.props.hoverHeadRadius,y:this.circleY-this.props.hoverHeadRadius,width:2*this.props.hoverHeadRadius,height:2*this.props.hoverHeadRadius}}}]),t}(u.Component);p([d.observable],f.prototype,"isHovered",void 0),p([d.computed],f.prototype,"headRadius",null),p([d.computed],f.prototype,"circleX",null),p([d.computed],f.prototype,"circleY",null),p([d.computed],f.prototype,"circleHitRect",null),f=p([c.observer],f),t.default=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=n(1),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(l),c=n(90),d=function(e){return e&&e.__esModule?e:{default:e}}(c),p=n(33),f=n(13),h=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":s(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},m=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.isMounted=!1,n.state={displayText:e.label||""},n.handlers={textRef:function(e){n.textElt=e}},n}return a(t,e),i(t,[{key:"componentDidMount",value:function(){this.isMounted=!0}},{key:"makeTextElement",value:function(e){var t={x:this.centerX,y:this.centerY,textAnchor:"middle",dy:"0.3em",fill:this.props.labelColor||"#FFFFFF",style:{fontSize:"12px",fontFamily:"arial"}},n=e?this.props.label||"":this.displayText;return e&&(t.ref=this.handlers.textRef,t.visibility="hidden",t.className=this.props.hitzoneClassName),u.createElement("text",t,n)}},{key:"render",value:function(){return u.createElement("g",null,u.createElement("rect",{x:this.props.x,y:this.props.y,width:this.props.width,height:this.props.height,fill:this.props.color}),this.makeTextElement(!0),this.makeTextElement(!1),u.createElement("rect",{className:this.props.hitzoneClassName,x:this.props.x,y:this.props.y,width:this.props.width,height:this.props.height,fill:"rgba(0,0,0,0)"}))}},{key:"hitRect",get:function(){return{x:this.props.x,y:this.props.y,width:this.props.width,height:this.props.height}}},{key:"centerX",get:function(){return this.props.x+this.props.width/2}},{key:"centerY",get:function(){return this.props.y+this.props.height/2}},{key:"displayText",get:function(){var e=this.props.label||"";if(!this.textElt||!this.isMounted)return e;if(!(0,d.default)(this.textElt).is(":visible"))return e;for(var t=e.length;t>0&&this.textElt.getSubStringLength(0,t)>this.props.width;)t-=1;var n=e;return t<e.length&&(t-=2,n=t<=0?"":e.substr(0,t)+".."),n}}]),t}(u.Component);h([f.observable],m.prototype,"textElt",void 0),h([f.observable],m.prototype,"isMounted",void 0),h([f.computed],m.prototype,"displayText",null),m=h([p.observer],m),t.default=m},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(s),u=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),i(t,[{key:"positionToAxisPosition",value:function(e){return e/(this.props.rangeUpper-this.props.rangeLower)*this.props.length}},{key:"render",value:function(){var e=this.props.vertical?this.props.x:this.props.x+this.props.length,t=this.props.vertical?this.props.y+this.props.length:this.props.y;return l.createElement("g",null,l.createElement("line",{stroke:"rgb(170,170,170)",strokeWidth:"1",x1:this.props.x,y1:this.props.y,x2:e,y2:t}),this.ticks,this.label)}},{key:"ticks",get:function(){var e=this;return this.props.ticks.map(function(t){var n=e.positionToAxisPosition(t.position),r=e.props.vertical?e.props.x:e.props.x+n,o=e.props.vertical?e.props.y+e.props.length-n:e.props.y,a=e.props.vertical?e.props.x-e.props.tickLength:e.props.x+n,i=e.props.vertical?e.props.y+e.props.length-n:e.props.y+e.props.tickLength,s=null;return t.label&&(s=e.props.vertical?l.createElement("text",{textAnchor:"end",style:{fontSize:"10px",fontFamily:"arial"},dx:-3,dy:"0.4em",x:a,y:i},t.label):l.createElement("text",{textAnchor:"middle",style:{fontSize:"10px",fontFamily:"arial"},x:a,y:i,dy:"1em"},t.label)),l.createElement("g",{key:n},l.createElement("line",{stroke:"rgb(170,170,170)",strokeWidth:"1",x1:r,y1:o,x2:a,y2:i}),s)})}},{key:"label",get:function(){if(this.props.label){var e=void 0,t=void 0,n=void 0;return this.props.vertical?(e=this.props.x-this.props.tickLength-20,t=this.props.y+this.props.length/2,n="rotate(270,"+e+","+t+")"):(e=this.props.x+this.props.length/2,t=this.props.y+this.props.tickLength+5,n=""),l.createElement("text",{textAnchor:"middle",style:{fontFamily:"arial",fontSize:"12px",fontWeight:"normal"},fill:"#2E3436",x:e,y:t,transform:n},this.props.label)}return null}}]),t}(l.Component);t.default=u},function(e,t,n){"use strict";function r(e){var t=["#2dcf00","#ff5353","#5b5bff","#ebd61d","#ba21e0","#ff9c42","#ff7dff","#b9264f","#baba21","#c48484","#1f88a7","#cafeb8","#4a9586","#ceb86c","#0e180f"],n={},r=0;return e.sort(function(e,t){return e.pfamDomainStart-t.pfamDomainStart}).forEach(function(e){void 0===n[e.pfamDomainId]&&(n[e.pfamDomainId]=t[r%t.length],r++)}),n}Object.defineProperty(t,"__esModule",{value:!0}),t.generatePfamDomainColorMap=r},function(e,t){e.exports={portalWidth:"lollipopMutationPlot-module__portalWidth__hppyp","fade-out":"lollipopMutationPlot-module__fade-out__3kZVS","fade-in":"lollipopMutationPlot-module__fade-in__29Gnz","input-addon":"lollipopMutationPlot-module__input-addon__vMG_R","ymax-number-input":"lollipopMutationPlot-module__ymax-number-input__29v6p"}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t,n,r){return c.createElement("span",{key:t,onClick:r,style:{cursor:"pointer"}},c.createElement("span",{className:"badge",style:{backgroundColor:n}},e||0),c.createElement("span",{style:{color:n}},t))}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.mutationTypeButton=i;var u=n(1),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),d=n(33),p=n(290),f=n(1156),h=function(e){return e&&e.__esModule?e:{default:e}}(f),m=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},y=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"handleMutationClick",value:function(e){this.props.dataStore.setFilter(function(t){return(0,p.getProteinImpactType)(t[0].mutationType)===e}),this.props.dataStore.filterString=""}},{key:"render",value:function(){var e=this,t={},n=!0,r=!1,o=void 0;try{for(var a,s=this.props.dataStore.sortedFilteredData[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value,u=(0,p.getProteinImpactType)(l[0].mutationType);t[u]=t[u]||0,t[u]+=1}}catch(e){r=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}return c.createElement("table",{className:h.default.mutationTypeTable},c.createElement("tr",null,c.createElement("td",null,i(t.missense,"Missense",this.props.missenseColor,function(){return e.handleMutationClick("missense")})),c.createElement("td",null,i(t.truncating,"Truncating",this.props.truncatingColor,function(){return e.handleMutationClick("truncating")}))),c.createElement("tr",null,c.createElement("td",null,i(t.inframe,"Inframe",this.props.inframeColor,function(){return e.handleMutationClick("inframe")})),c.createElement("td",null,i(t.other,"Other",this.props.otherColor,function(){return e.handleMutationClick("other")}))))}}]),t}(c.Component);y=m([d.observer],y),t.default=y},function(e,t){e.exports={portalWidth:"styles-module__portalWidth__Ay5NA",mutationTypeTable:"styles-module__mutationTypeTable__2CihA"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=n(1),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(c),p=n(1158),f=r(p),h=n(1161),m=r(h),y=n(33),g=n(13),v=n(892),b=r(v),_=n(173),w=r(_),x=n(1065),S=n(302),C=n(1002),k=r(C),E=n(1163),M=r(E),A=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},T=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.isExpanded=!1,n.pdbChainTableShown=!1,n.hitZoneConfig={x:0,y:0,width:0,height:0,onClick:function(){}},n._chainScrollY=0,n.collapseTimeout=null,n.expandTimeout=null,n.chainUidToY={},n.expandDelayMs=750,n.collapseDelayMs=3e3,n.handlers={onMouseEnter:(0,g.action)(function(){n.expandTimeout=window.setTimeout(function(){n.isExpanded=!0},n.expandDelayMs),n.collapseTimeout&&window.clearTimeout(n.collapseTimeout)}),onMouseLeave:(0,g.action)(function(){n.collapseTimeout=window.setTimeout(function(){n.isExpanded=!1},n.collapseDelayMs),n.expandTimeout&&window.clearTimeout(n.expandTimeout)}),chainDivRef:function(e){n.chainDiv=e},onChainScroll:function(){n.chainDiv&&n.isExpanded&&(n._chainScrollY=n.chainDiv.scrollTop)},togglePDBTable:(0,g.action)(function(){n.pdbChainTableShown=!n.pdbChainTableShown}),getTooltipContent:function(){return n.hoveredChain?d.createElement(k.default,{pdbId:n.hoveredChain.pdbId,chainId:n.hoveredChain.chain,cache:n.props.pdbHeaderCache}):null},setHitZone:function(e,t){n.hitZoneConfig.x=e.x,n.hitZoneConfig.y=e.y,n.hitZoneConfig.width=e.width,n.hitZoneConfig.height=e.height,n.hitZoneConfig.onClick=function(){n.selectChain(t)},n.hoveredChain=n.props.store.pdbChainDataStore.getPdbChain(t)},setChainUidToY:function(e){n.chainUidToY=e}},n.onChainSelectReaction=(0,g.reaction)(function(){return n.props.store.pdbChainDataStore.selectedUid},function(e){var t=n.chainUidToY[e];if(void 0!==t&&(t<n.chainDiv.scrollTop||t>n.chainDiv.scrollTop+n.props.maxChainsHeight)){var r=n.props.maxChainsHeight/2;n.chainDiv.scrollTop=t-r}}),n}return i(t,e),l(t,[{key:"componentWillUnmount",value:function(){this.onChainSelectReaction()}},{key:"selectChain",value:function(e){this.props.store.pdbChainDataStore.selectUid(e)}},{key:"componentDidUpdate",value:function(){var e=this;(0,M.default)(function(){e.chainDiv&&(e.chainDiv.scrollTop=e.chainScrollY)})}},{key:"helpTooltipContent",value:function(){return d.createElement("div",{style:{maxWidth:400}},"This panel displays a list of PDB chains for the corresponding uniprot ID. PDB chains are ranked with respect to their sequence similarity ratio, and aligned to the y-axis of the mutation diagram. Highly ranked chains have darker color than the lowly ranked ones.",d.createElement("br",null),d.createElement("br",null),"Each chain is represented by a single rectangle. Gaps within the chains are represented by a thin line connecting the segments of the chain.",d.createElement("br",null),d.createElement("br",null),"By default, only a first few rows are displayed. To see more chains, use the scroll bar next to the panel. To see the detailed list of all available PDB chains in a table click on the link below the panel.",d.createElement("br",null),d.createElement("br",null),"To select a chain, simply click on it. Selected chain is highlighted with a different frame color. You can also select a chain by clicking on a row in the table. Selecting a chain reloads the PDB data for the 3D structure visualizer.")}},{key:"render",value:function(){var e={};return this.tooltipVisible||(e.visible=!1),d.createElement("div",{onMouseEnter:this.handlers.onMouseEnter,onMouseLeave:this.handlers.onMouseLeave},d.createElement(b.default,{isOpened:this.isOpen},d.createElement("div",{style:{position:"relative"}},d.createElement("div",{className:"small",style:{display:this.isExpanded?"inherit":"none",position:"absolute",left:20}},"PDB",d.createElement(w.default,{placement:"left",overlay:this.helpTooltipContent,destroyTooltipOnHide:!0},d.createElement("i",{className:"fa fa-info-circle",style:{paddingLeft:5}})),d.createElement("br",null),"Chains"),d.createElement("div",{ref:this.handlers.chainDivRef,style:{overflowY:"scroll",maxHeight:this.props.maxChainsHeight,marginLeft:this.props.geneXOffset,position:"relative"},onScroll:this.handlers.onChainScroll},d.createElement(f.default,{width:this.props.geneWidth,chains:this.chains,proteinLength:this.proteinLength,setHitZone:this.handlers.setHitZone,selectedChainUid:this.props.store.pdbChainDataStore.selectedUid,setChainUidToY:this.handlers.setChainUidToY}),d.createElement(w.default,s({placement:"top",overlay:this.handlers.getTooltipContent},e),this.hitZone)),d.createElement("br",null),d.createElement("div",{style:{display:this.isExpanded?"inherit":"none"}},d.createElement("button",{onClick:this.handlers.togglePDBTable,className:"btn btn-default"},this.pdbChainTableShown?"Hide PDB Chain Table":"Show PDB Chain Table"),d.createElement("div",{style:{display:this.pdbChainTableShown?"inherit":"none",maxWidth:this.props.geneWidth}},d.createElement(m.default,{dataStore:this.props.store.pdbChainDataStore,cache:this.props.pdbHeaderCache}))),d.createElement("br",null))))}},{key:"chainScrollY",get:function(){return this.isExpanded?this._chainScrollY:0}},{key:"isOpen",get:function(){return!!this.props.store.pdbChainDataStore.selectedChain}},{key:"displayChains",get:function(){return this.props.store.pdbChainDataStore.selectedChain?this.isExpanded?this.props.store.pdbChainDataStore.allData:[this.props.store.pdbChainDataStore.selectedChain]:[]}},{key:"chains",get:function(){var e=this;return this.displayChains.map(function(t){for(var n=[],r=-1,o=t.alignment,a=0;a<o.length;a++)o[a]===S.ALIGNMENT_GAP?-1===r&&(r=a):-1!==r&&(n.push({start:t.uniprotStart+r,end:t.uniprotStart+a}),r=-1);return{start:t.uniprotStart,end:t.uniprotEnd+1,gaps:n,opacity:t.identityPerc,uid:e.props.store.pdbChainDataStore.getChainUid(t)}})}},{key:"proteinLength",get:function(){var e=this.props.store.canonicalTranscript.result&&this.props.store.canonicalTranscript.result.proteinLength||0;return Math.max(e,1)}},{key:"tooltipVisible",get:function(){return null!==this.handlers.getTooltipContent()}},{key:"hitZone",get:function(){return d.createElement(x.HitZone,{x:this.hitZoneConfig.x,y:this.hitZoneConfig.y,width:this.hitZoneConfig.width,height:this.hitZoneConfig.height,onClick:this.hitZoneConfig.onClick,cursor:"pointer"})}}]),t}(d.Component);A([g.observable],T.prototype,"isExpanded",void 0),A([g.observable],T.prototype,"pdbChainTableShown",void 0),A([g.observable],T.prototype,"hoveredChain",void 0),A([g.observable],T.prototype,"hitZoneConfig",void 0),A([g.computed],T.prototype,"chainScrollY",null),A([g.action],T.prototype,"selectChain",null),A([g.computed],T.prototype,"isOpen",null),A([g.computed],T.prototype,"displayChains",null),A([g.computed],T.prototype,"chains",null),A([g.computed],T.prototype,"proteinLength",null),A([g.computed],T.prototype,"tooltipVisible",null),A([g.computed],T.prototype,"hitZone",null),T=A([y.observer],T),t.default=T},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=n(1),d=o(c),p=n(33),f=n(13),h=n(1159),m=r(h),y=n(3),g=o(y),v=n(1160),b=r(v),_=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},w=function(e){function t(){a(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.rowHeight=6,e.rowPadding=3,e.chainComponents={},e.onMouseOver=e.onMouseOver.bind(e),e.positionToX=e.positionToX.bind(e),e}return s(t,e),l(t,[{key:"positionToX",value:function(e){return e*this.props.width/this.props.proteinLength}},{key:"makeChainIdClass",value:function(e){return"chain-"+e}},{key:"getChainId",value:function(e){var t=e.split(/[\s]+/g).map(function(e){return e.match(new RegExp("^(chain-.*)$"))}).find(function(e){return null!==e});return t&&t[1]||null}},{key:"chainY",value:function(e){return e*(this.rowHeight+this.rowPadding)}},{key:"onMouseOver",value:function(e){var t=e.target,n=t.getAttribute("class")||"",r=this.getChainId(n);if(null!==r){var o=this.chainComponents[r];o&&this.props.setHitZone&&this.props.setHitZone({x:parseInt(t.getAttribute("x")||"0",10),y:parseInt(t.getAttribute("y")||"0",10),width:parseInt(t.getAttribute("width")||"0",10),height:parseInt(t.getAttribute("height")||"0",10)},o.props.uid)}}},{key:"render",value:function(){return d.createElement("div",null,d.createElement("div",{onMouseOver:this.onMouseOver},d.createElement("svg",{width:this.props.width,height:this.svgHeight},this.rows)))}},{key:"rowSpecs",get:function(){var e=[[]],t=[new m.default],n=!0,r=!1,o=void 0;try{for(var a,i=this.props.chains[Symbol.iterator]();!(n=(a=i.next()).done);n=!0)!function(){var n=a.value,r=g.findIndex(t,function(e){return!e.check(n.start,n.end)});-1===r&&(r=e.length,e.push([]),t.push(new m.default)),e[r].push(n),t[r].add(n.start,n.end)}()}catch(e){r=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw o}}return e}},{key:"rows",get:function(){var e=this,t=0;this.chainComponents={};var n={},r=this.rowSpecs.map(function(r,o){return d.createElement("g",{key:o},r.map(function(r){var a=e.makeChainIdClass(t++),i=r.uid,s=e.chainY(o);return n[i]=s,d.createElement(b.default,{ref:function(t){null!==t&&(e.chainComponents[a]=t)},positionToX:e.positionToX,y:s,height:e.rowHeight,uniqueHitZoneClassName:a,start:r.start,end:r.end,gaps:r.gaps,opacity:r.opacity,uid:i,highlighted:e.props.selectedChainUid===r.uid})}))});return this.props.setChainUidToY&&this.props.setChainUidToY(n),r}},{key:"svgHeight",get:function(){return this.rows.length*this.rowHeight+(this.rows.length-1)*this.rowPadding}}]),t}(d.Component);_([f.observable],w.prototype,"rowHeight",void 0),_([f.observable],w.prototype,"rowPadding",void 0),_([f.computed],w.prototype,"rowSpecs",null),_([f.computed],w.prototype,"rows",null),_([f.computed],w.prototype,"svgHeight",null),w=_([p.observer],w),t.default=w},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){if(0===e.length)return[];e.sort(function(e,t){return e[0]<t[0]?-1:1});for(var t=[],n=[e[0][0],e[0][1]],r=void 0,o=1;o<=e.length;)o===e.length?t.push(n):(r=e[o],r[0]>n[1]?(t.push(n),n=[e[o][0],e[o][1]]):n[1]=Math.max(n[1],r[1])),o++;return t}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){r(this,e),this.regions=t?o(t):[]}return a(e,[{key:"check",value:function(e,t){void 0===t&&(t=e);for(var n=this.regions,r=0,o=n.length,a=void 0,i=void 0,s=!1;r<o;)if(a=Math.floor((r+o)/2),i=n[a],i[0]>t)o=a;else{if(!(i[1]<e)){s=!0;break}r=a+1}return s}},{key:"add",value:function(e,t){this.regions.push([e,t]),this.regions=o(this.regions)}},{key:"_getHotspotRegions",value:function(){return this.regions}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(1),c=r(u),d=n(33),p=n(13),f=n(3),h=r(f),m=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},y=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){var e=this;return c.createElement("g",{key:this.props.uniqueHitZoneClassName},this.segmentsAndGaps.map(function(t){return t.gap?c.createElement("line",{stroke:"#666666",strokeWidth:"0.5",x1:e.props.positionToX(t.start),x2:e.props.positionToX(t.end),y1:e.props.y+e.props.height/2,y2:e.props.y+e.props.height/2}):c.createElement("rect",{fill:"#3366cc",fillOpacity:e.props.opacity,stroke:"#666666",strokeWidth:"0.5",x:e.props.positionToX(t.start),y:e.props.y,width:e.props.positionToX(t.end)-e.props.positionToX(t.start),height:e.props.height})}),c.createElement("rect",{stroke:"#FF9900",strokeWidth:"2",fillOpacity:"0",strokeOpacity:+!!this.props.highlighted,height:this.props.height,width:this.props.positionToX(this.props.end)-this.props.positionToX(this.props.start),x:this.props.positionToX(this.props.start),y:this.props.y,className:this.props.uniqueHitZoneClassName}))}},{key:"segmentsAndGaps",get:function(){var e=[],t=h.sortBy(this.props.gaps,function(e){return e.start});if(0===t.length)e.push({gap:!1,start:this.props.start,end:this.props.end});else{t[0].start>this.props.start&&e.push({gap:!1,start:this.props.start,end:t[0].start}),e.push({gap:!0,start:t[0].start,end:t[0].end});for(var n=1;n<t.length;n++)e.push({gap:!1,start:t[n-1].end,end:t[n].start}),e.push({gap:!0,start:t[n].start,end:t[n].end});var r=t[t.length-1];r.end<this.props.end&&e.push({gap:!1,start:r.end,end:this.props.end})}return e}}]),t}(c.Component);m([p.computed],y.prototype,"segmentsAndGaps",null),y=m([d.observer],y),t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(1),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),d=n(178),p=r(d),f=n(33),h=n(1002),m=r(h),y=n(13),g=n(1162),v=r(g),b=n(927),_=r(b),w=n(183),x=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},S=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),t}(p.default),C=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){return c.createElement(S,{showColumnVisibility:!1,showCopyDownload:!1,itemsLabel:"PDB chain",itemsLabelPlural:"PDB chains",paginationProps:{showItemsPerPageSelector:!1,showMoreButton:!1},initialItemsPerPage:6,columns:this.columns,dataStore:this.props.dataStore,pageToHighlight:!0})}},{key:"columns",get:function(){var e=this,t=[];return t.push({name:"PDB Id",render:function(e){return c.createElement("a",{href:"http://www.rcsb.org/pdb/explore/explore.do?structureId="+e.pdbId,target:"_blank"},e.pdbId)},sortBy:function(e){return e.pdbId},filter:function(e,t,n){return e.pdbId.toUpperCase().indexOf(n)>-1}}),t.push({name:"Chain",render:function(t){return c.createElement("span",null,c.createElement("span",{style:{float:"left",fontWeight:"bold",fontStyle:"italic"}},t.chain),c.createElement("a",{style:{float:"right",fontWeight:"bold",cursor:"pointer"},onClick:function(){e.props.dataStore.selectUid(e.props.dataStore.getChainUid(t))}},"3D"))},sortBy:function(e){return e.chain},filter:function(e,t,n){return e.chain.toUpperCase().indexOf(n)>-1}}),t.push({name:"Uniprot Positions",render:function(e){return c.createElement("span",null,e.uniprotStart+"-"+e.uniprotEnd)},sortBy:function(e){return[e.uniprotStart,e.uniprotEnd]},filter:function(e,t){return(e.uniprotStart+"").indexOf(t)>-1||(e.uniprotEnd+"").indexOf(t)>-1}}),t.push({name:"Organism",render:(0,_.default)(function(t){return e.props.cache?e.props.cache.get(t.pdbId):null},function(e,t){return c.createElement("span",null,v.default.getOrganism(e,t.chain))}),sortBy:function(t){return v.default.getOrganismFromCache(e.props.cache,t)},filter:function(t,n,r){return(v.default.getOrganismFromCache(e.props.cache,t)||"").toUpperCase().indexOf(r)>-1},visible:!!this.props.cache}),t.push({name:"Summary",render:function(t){return c.createElement(m.default,{pdbId:t.pdbId,chainId:t.chain,cache:e.props.cache,truncateText:!1,summaryFormat:!0})},filter:function(t,n,r){if(!e.props.cache)return!1;var o=e.props.cache.get(t.pdbId);if(o&&o.data){var a=(0,w.generatePdbInfoSummary)(o.data,t.chain);return a.pdbInfo.toUpperCase().indexOf(r)>-1||(a.moleculeInfo||"").toUpperCase().indexOf(r)>-1}return!1},visible:!!this.props.cache}),t}}]),t}(c.Component);x([y.computed],C.prototype,"columns",null),C=x([f.observer],C),t.default=C},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(3),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(a),s=function(){function e(){r(this,e)}return o(e,null,[{key:"getOrganism",value:function(e,t){var n="NA";return i.find(e.compound,function(r){if(-1!=i.indexOf(r.chain,t.toLowerCase())&&null!=e.source[r.mol_id])return n=e.source[r.mol_id].organism_scientific||n,r}),n}},{key:"getOrganismFromCache",value:function(t,n){if(!t)return"";var r=t.get(n.pdbId);return r&&r.data?e.getOrganism(r.data,n.chain):""}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e){setTimeout(function(){window.requestAnimationFrame(e)},0)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=n(1),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(l),c=n(180),d=n(33),p=n(173),f=function(e){return e&&e.__esModule?e:{default:e}}(p),h=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":s(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},m=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),i(t,[{key:"somaticMutationFrequency",value:function(){var e=0;return this.props.samples.length>0&&(e=(0,c.somaticMutationRate)(this.props.hugoGeneSymbol,this.props.mutations,this.props.molecularProfileIdToMolecularProfile.result,this.props.samples)),u.createElement("div",{"data-test":"somaticMutationRate"},u.createElement("label",null,"Somatic Mutation Frequency:"),e.toFixed(1),"%",u.createElement(f.default,{placement:"right",overlay:u.createElement("span",null,"Percentage of samples with a somatic mutation in "+this.props.hugoGeneSymbol)},u.createElement("i",{className:"glyphicon glyphicon-info-sign",style:{marginLeft:5}})))}},{key:"germlineMutationFrequency",value:function(){var e=void 0;"pending"!==this.props.germlineConsentedSamples.status&&(e=this.props.germlineConsentedSamples&&this.props.germlineConsentedSamples.result&&this.props.germlineConsentedSamples.result.length>0?this.props.germlineConsentedSamples.result:this.props.samples);var t=e?(0,c.germlineMutationRate)(this.props.hugoGeneSymbol,this.props.mutations,this.props.molecularProfileIdToMolecularProfile.result,e):0;return u.createElement("div",{"data-test":"germlineMutationRate",className:t>0?"":"invisible"},u.createElement("label",null,"Germline Mutation Frequency:"),t>0?t.toFixed(1)+"%":"--",u.createElement(f.default,{placement:"right",overlay:u.createElement("span",null,"Percentage of samples with a germline mutation in "+this.props.hugoGeneSymbol)},u.createElement("i",{className:"glyphicon glyphicon-info-sign",style:{marginLeft:5}})))}},{key:"render",value:function(){return u.createElement("div",null,this.somaticMutationFrequency(),this.germlineMutationFrequency())}}]),t}(u.Component);m=h([d.observer],m),t.default=m},function(e,t){},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=n(1),d=o(c),p=n(3),f=o(p),h=n(1167),m=r(h),y=n(33),g=n(63),v=n(1067),b=r(v),_=n(13),w=n(854),x=r(w),S=n(1066),C=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},k=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.mutualExclusivityFilter=!0,n.coOccurenceFilter=!0,n.significantPairsFilter=!1,n.mutualExclusivityFilterChange=n.mutualExclusivityFilterChange.bind(n),n.coOccurenceFilterChange=n.coOccurenceFilterChange.bind(n),n.significantPairsFilterChange=n.significantPairsFilterChange.bind(n),n}return s(t,e),l(t,[{key:"mutualExclusivityFilterChange",value:function(){this.mutualExclusivityFilter=!this.mutualExclusivityFilter}},{key:"coOccurenceFilterChange",value:function(){this.coOccurenceFilter=!this.coOccurenceFilter}},{key:"significantPairsFilterChange",value:function(){this.significantPairsFilter=!this.significantPairsFilter}},{key:"render",value:function(){return this.props.store.isSampleAlteredMap.isPending?d.createElement(x.default,{isLoading:!0}):this.props.store.isSampleAlteredMap.isComplete?f.size(this.props.store.isSampleAlteredMap.result)>1?d.createElement("div",null,(0,S.getCountsText)(this.data),d.createElement("div",{className:b.default.Checkboxes},d.createElement(g.Checkbox,{checked:this.mutualExclusivityFilter,onChange:this.mutualExclusivityFilterChange},"Mutual exclusivity"),d.createElement(g.Checkbox,{checked:this.coOccurenceFilter,onChange:this.coOccurenceFilterChange},"Co-occurrence"),d.createElement(g.Checkbox,{checked:this.significantPairsFilter,onChange:this.significantPairsFilterChange},"Significant only")),d.createElement(m.default,{data:this.filteredData})):d.createElement("div",null,"Mutual exclusivity analysis cannot be provided when only a single gene is selected."):null}},{key:"data",get:function(){return(0,S.getData)(this.props.store.isSampleAlteredMap.result)}},{key:"filteredData",get:function(){return(0,S.getFilteredData)(this.data,this.mutualExclusivityFilter,this.coOccurenceFilter,this.significantPairsFilter)}}]),t}(d.Component);C([_.observable],k.prototype,"mutualExclusivityFilter",void 0),C([_.observable],k.prototype,"coOccurenceFilter",void 0),C([_.observable],k.prototype,"significantPairsFilter",void 0),C([_.computed],k.prototype,"data",null),C([_.computed],k.prototype,"filteredData",null),k=C([y.observer],k),t.default=k},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.MutualExclusivityTableComponent=t.MutualExclusivityTableColumnType=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=n(1),d=o(c),p=n(3),f=o(p),h=n(178),m=r(h),y=n(33),g=n(13),v=n(63),b=n(1066),_=n(1067),w=r(_),x=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},S=t.MutualExclusivityTableColumnType=void 0;!function(e){e[e.GENE_A=0]="GENE_A",e[e.GENE_B=1]="GENE_B",e[e.NEITHER=2]="NEITHER",e[e.A_NOT_B=3]="A_NOT_B",e[e.B_NOT_A=4]="B_NOT_A",e[e.BOTH=5]="BOTH",e[e.LOG_ODDS_RATIO=6]="LOG_ODDS_RATIO",e[e.P_VALUE=7]="P_VALUE",e[e.ADJUSTED_P_VALUE=8]="ADJUSTED_P_VALUE",e[e.ASSOCIATION=9]="ASSOCIATION"}(S||(t.MutualExclusivityTableColumnType=S={}));var C=t.MutualExclusivityTableComponent=function(e){function t(){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),t}(m.default),k=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._columns={},n.generateColumns(),n}return s(t,e),l(t,[{key:"generateColumns",value:function(){this._columns={},this._columns[S.GENE_A]={name:"Gene A",render:function(e){return d.createElement("span",null,d.createElement("b",null,e.geneA))},tooltip:d.createElement("span",null,"Gene A"),filter:function(e,t,n){return e.geneA.toUpperCase().includes(n)},sortBy:function(e){return e.geneA},download:function(e){return e.geneA}},this._columns[S.GENE_B]={name:"Gene B",render:function(e){return d.createElement("span",null,d.createElement("b",null,e.geneB))},tooltip:d.createElement("span",null,"Gene B"),filter:function(e,t,n){return e.geneB.toUpperCase().includes(n)},sortBy:function(e){return e.geneB},download:function(e){return e.geneB}},this._columns[S.NEITHER]={name:"Neither",render:function(e){return d.createElement("span",null,e.neitherCount)},tooltip:d.createElement("span",null,"Number of samples with alterations in neither Gene A nor Gene B"),sortBy:function(e){return e.neitherCount},download:function(e){return e.neitherCount.toString()}},this._columns[S.A_NOT_B]={name:"A Not B",render:function(e){return d.createElement("span",null,e.aNotBCount)},tooltip:d.createElement("span",null,"Number of samples with alterations in Gene A but not in Gene B"),sortBy:function(e){return e.aNotBCount},download:function(e){return e.aNotBCount.toString()}},this._columns[S.B_NOT_A]={name:"B Not A",render:function(e){return d.createElement("span",null,e.bNotACount)},tooltip:d.createElement("span",null,"Number of samples with alterations in Gene B but not in Gene A"),sortBy:function(e){return e.bNotACount},download:function(e){return e.bNotACount.toString()}},this._columns[S.BOTH]={name:"Both",render:function(e){return d.createElement("span",null,e.bothCount)},tooltip:d.createElement("span",null,"Number of samples with alterations in both Gene A and Gene B"),sortBy:function(e){return e.bothCount},download:function(e){return e.bothCount.toString()}},this._columns[S.LOG_ODDS_RATIO]={name:"Log Odds Ratio",render:function(e){return d.createElement("span",null,(0,b.formatLogOddsRatio)(e.logOddsRatio))},tooltip:d.createElement("span",{style:{display:"inline-block",maxWidth:300}},"Quantifies how strongly the presence or absence of alterations in Gene A are associated with the presence or absence of alterations in Gene B in the selected samples."),sortBy:function(e){return e.logOddsRatio},download:function(e){return(0,b.formatLogOddsRatio)(e.logOddsRatio)}},this._columns[S.P_VALUE]={name:"p-Value",render:function(e){return d.createElement("span",null,(0,b.formatPValue)(e.pValue))},tooltip:d.createElement("span",null,"Derived from Fisher Exact Test"),sortBy:function(e){return e.pValue},download:function(e){return(0,b.formatPValue)(e.pValue)}},this._columns[S.ADJUSTED_P_VALUE]={name:"Adjusted p-Value",render:function(e){return(0,b.formatPValueWithStyle)(e.adjustedPValue)},tooltip:d.createElement("span",null,"Bonferroni adjusted p-Value"),sortBy:function(e){return e.adjustedPValue},download:function(e){return(0,b.formatPValue)(e.adjustedPValue)}},this._columns[S.ASSOCIATION]={name:"Tendency",render:function(e){return d.createElement("div",{className:w.default.Tendency},e.association,e.adjustedPValue<.05?d.createElement(v.Badge,{style:{backgroundColor:"#58ACFA"}},"Significant"):"")},tooltip:d.createElement("table",null,d.createElement("tr",null,d.createElement("td",null,"Log ratio > 0"),d.createElement("td",null,": Tendency towards co-occurrence")),d.createElement("tr",null,d.createElement("td",null,"Log ratio <= 0"),d.createElement("td",null,": Tendency towards mutual exclusivity")),d.createElement("tr",null,d.createElement("td",null,"Adjusted p-Value < 0.05"),d.createElement("td",null,": Significant association"))),filter:function(e,t,n){return e.association.toUpperCase().includes(n)},sortBy:function(e){return e.association},download:function(e){return e.association}}}},{key:"render",value:function(){var e=f.sortBy(this._columns,function(e){return e.order});return d.createElement(C,{columns:e,data:this.props.data,initialItemsPerPage:50,initialSortColumn:this.props.initialSortColumn,paginationProps:{itemsPerPageOptions:[50]}})}}]),t}(d.Component);k.defaultProps={columns:[S.GENE_A,S.GENE_B,S.NEITHER,S.A_NOT_B,S.B_NOT_A,S.BOTH,S.LOG_ODDS_RATIO,S.P_VALUE,S.ADJUSTED_P_VALUE,S.ASSOCIATION],initialSortColumn:"Adjusted p-Value"},x([g.observable],k.prototype,"_columns",void 0),k=x([y.observer],k),t.default=k},function(e,t,n){"use strict";function r(e,t,n,r,o){var a=e+t+n+r,i=o[e+t]+o[n+r]+o[e+n]+o[t+r]-(o[e]+o[t]+o[n]+o[r]+o[a]);return Math.exp(i)}function o(e,t,n,o){var a=void 0,i=void 0,s=e+t+n+o,l=0,u=new Array(s+1);u[0]=0;for(var c=1;c<=s;c++)u[c]=u[c-1]+Math.log(c);if(l+=r(e,t,n,o,u),e*o>=t*n)for(a=n<t?n:t,i=0;i<a;i++)l+=r(++e,--t,--n,++o,u);if(e*o<t*n)for(a=e<o?e:o,i=0;i<a;i++)l+=r(--e,++t,++n,--o,u);return l}Object.defineProperty(t,"__esModule",{value:!0}),t.getCumulativePValue=o},function(e,t,n){var r,o,a;!function(n,i){o=[],r=i,void 0!==(a="function"==typeof r?r.apply(t,o):r)&&(e.exports=a)}(0,function(){"use strict";var e=function(e,t){for(var n=1;t--;)n*=e--;return n},t=function(t,n){return n>t?0:e(t,n)/e(n,n)},n=function(t){return e(t,t)},r=function(e,t){var r=1;if(t)r=n(t);else{for(t=1;r<e;r*=++t);r>e&&(r/=t--)}for(var o=[0];t;r/=t--)o[t]=Math.floor(e/r),e%=r;return o},o=function(e,t){Object.keys(t).forEach(function(n){Object.defineProperty(e,n,{value:t[n],configurable:"next"==n})})},a=function(e,t){Object.defineProperty(e,t,{writable:!0})},i=function(e){var t,n=[];for(this.init();t=this.next();)n.push(e?e(t):t);return this.init(),n},s={toArray:i,map:i,forEach:function(e){var t;for(this.init();t=this.next();)e(t);this.init()},filter:function(e){var t,n=[];for(this.init();t=this.next();)e(t)&&n.push(t);return this.init(),n},lazyMap:function(e){return this._lazyMap=e,this},lazyFilter:function(e){if(Object.defineProperty(this,"next",{writable:!0}),"function"!=typeof e)this.next=this._next;else{"function"!=typeof this._next&&(this._next=this.next);var t=this._next.bind(this);this.next=function(){for(var n;n=t();)if(e(n))return n;return n}.bind(this)}return Object.defineProperty(this,"next",{writable:!1}),this}},l=function(e,t){var n=1<<e.length,r=function(){return n},i=Object.create(e.slice(),{length:{get:r}});return a(i,"index"),o(i,{valueOf:r,init:function(){i.index=0},nth:function(e){if(!(e>=n)){for(var t=0,r=[];e;e>>>=1,t++)1&e&&r.push(this[t]);return"function"==typeof i._lazyMap?i._lazyMap(r):r}},next:function(){return this.nth(this.index++)}}),o(i,s),i.init(),"function"==typeof t?i.map(t):i},u=function(e){var t=e&-e,n=e+t;return n|((n&-n)/t>>1)-1},c=function(e,n,r){if(n||(n=e.length),n<1)throw new RangeError;if(n>e.length)throw new RangeError;var i=(1<<n)-1,l=t(e.length,n),c=1<<e.length,d=function(){return l},p=Object.create(e.slice(),{length:{get:d}});return a(p,"index"),o(p,{valueOf:d,init:function(){this.index=i},next:function(){if(!(this.index>=c)){for(var e=0,t=this.index,n=[];t;t>>>=1,e++)1&t&&(n[n.length]=this[e]);return this.index=u(this.index),"function"==typeof p._lazyMap?p._lazyMap(n):n}}}),o(p,s),p.init(),"function"==typeof r?p.map(r):p},d=function(e,t){var n=e,r=t,o=0;for(o=n.length-1;o>=0&&1==n[o];o--)r--;if(0==r){n[n.length]=1;for(var a=n.length-2;a>=0;a--)n[a]=a<t-1?1:0}else{for(var i=-1,s=-1,o=0;o<n.length;o++)if(0==n[o]&&-1!=i&&(s=o),1==n[o]&&(i=o),-1!=s&&-1!=i){n[s]=1,n[i]=0;break}r=t;for(var o=n.length-1;o>=i;o--)1==n[o]&&r--;for(var o=0;o<i;o++)n[o]=o<r?1:0}return n},p=function(e){for(var t=[],n=0;n<e;n++)t[n]=1;return t[0]=1,t},f=function(e,n,r){if(n||(n=e.length),n<1)throw new RangeError;if(n>e.length)throw new RangeError;var i=p(n),l=t(e.length,n),u=e.length,c=function(){return l},f=Object.create(e.slice(),{length:{get:c}});return a(f,"index"),o(f,{valueOf:c,init:function(){this.index=i.concat()},next:function(){if(!(this.index.length>u)){for(var e=0,t=this.index,r=[],o=0;o<t.length;o++,e++)t[o]&&(r[r.length]=this[e]);return d(this.index,n),"function"==typeof f._lazyMap?f._lazyMap(r):r}}}),o(f,s),f.init(),"function"==typeof r?f.map(r):f},h=function(e){var t=e.slice(),o=n(t.length);return t.index=0,t.next=function(){if(!(this.index>=o)){for(var e=this.slice(),n=r(this.index,this.length),a=[],i=this.length-1;i>=0;--i)a.push(e.splice(n[i],1)[0]);return this.index++,"function"==typeof t._lazyMap?t._lazyMap(a):a}},t},m=function(t,n,r){if(n||(n=t.length),n<1)throw new RangeError;if(n>t.length)throw new RangeError;var i=e(t.length,n),l=function(){return i},u=Object.create(t.slice(),{length:{get:l}});return a(u,"cmb"),a(u,"per"),o(u,{valueOf:function(){return i},init:function(){this.cmb=c(t,n),this.per=h(this.cmb.next())},next:function(){var e=this.per.next();if(!e){var t=this.cmb.next();if(!t)return;return this.per=h(t),this.next()}return"function"==typeof u._lazyMap?u._lazyMap(e):e}}),o(u,s),u.init(),"function"==typeof r?u.map(r):u},y=function(t){for(var n=0,r=1;r<=t;r++){n+=e(t,r)}return n},g=function(e,t){var n=y(e.length),r=function(){return n},i=Object.create(e.slice(),{length:{get:r}});return a(i,"cmb"),a(i,"per"),a(i,"nelem"),o(i,{valueOf:function(){return n},init:function(){this.nelem=1,this.cmb=c(e,this.nelem),this.per=h(this.cmb.next())},next:function(){var t=this.per.next();if(!t){var n=this.cmb.next();if(!n){if(++this.nelem>e.length)return;if(this.cmb=c(e,this.nelem),!(n=this.cmb.next()))return}return this.per=h(n),this.next()}return"function"==typeof i._lazyMap?i._lazyMap(t):t}}),o(i,s),i.init(),"function"==typeof t?i.map(t):i},v=Array.prototype.slice,b=function(){if(!arguments.length)throw new RangeError;var e=v.call(arguments),t=e.reduce(function(e,t){return e*t.length},1),n=function(){return t},r=e.length,i=Object.create(e,{length:{get:n}});if(!t)throw new RangeError;return a(i,"index"),o(i,{valueOf:n,dim:r,init:function(){this.index=0},get:function(){if(arguments.length===this.length){for(var e=[],t=0;t<r;t++){var n=arguments[t];if(n>=this[t].length)return;e.push(this[t][n])}return"function"==typeof i._lazyMap?i._lazyMap(e):e}},nth:function(e){for(var t=[],n=0;n<r;n++){var o=this[n].length,a=e%o;t.push(this[n][a]),e-=a,e/=o}return"function"==typeof i._lazyMap?i._lazyMap(t):t},next:function(){if(!(this.index>=t)){var e=this.nth(this.index);return this.index++,e}}}),o(i,s),i.init(),i},_=function(e,t,n){if(t||(t=e.length),t<1)throw new RangeError;var r=e.length,i=Math.pow(r,t),l=function(){return i},u=Object.create(e.slice(),{length:{get:l}});return a(u,"index"),o(u,{valueOf:l,init:function(){u.index=0},nth:function(n){if(!(n>=i)){for(var o=[],a=0;a<t;a++){var s=n%r;o.push(e[s]),n-=s,n/=r}return"function"==typeof u._lazyMap?u._lazyMap(o):o}},next:function(){return this.nth(this.index++)}}),o(u,s),u.init(),"function"==typeof n?u.map(n):u},w=Object.create(null);return o(w,{C:t,P:e,factorial:n,factoradic:r,cartesianProduct:b,combination:c,bigCombination:f,permutation:m,permutationCombination:g,power:l,baseN:_,VERSION:"0.5.2"}),w})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(1),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),d=n(1003),p=r(d),f=n(854),h=r(f),m=n(33),y=n(930),g=r(y),v=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},b=function(e){function t(){o(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.overallSurvivalTitleText="Overall Survival Kaplan-Meier Estimate",e.diseaseFreeSurvivalTitleText="Disease/Progression-free Kaplan-Meier Estimate",e}return i(t,e),s(t,[{key:"render",value:function(){if(this.props.store.overallAlteredPatientSurvivals.isPending||this.props.store.overallUnalteredPatientSurvivals.isPending||this.props.store.diseaseFreeAlteredPatientSurvivals.isPending||this.props.store.diseaseFreeUnalteredPatientSurvivals.isPending)return c.createElement(h.default,{isLoading:!0});var e=[],t=!1,n=!1;return this.props.store.overallAlteredPatientSurvivals.isComplete&&this.props.store.overallUnalteredPatientSurvivals.isComplete&&this.props.store.overallAlteredPatientSurvivals.result.length>0&&this.props.store.overallUnalteredPatientSurvivals.result.length>0?e.push(c.createElement("div",{style:{marginBottom:40}},c.createElement("h4",{className:"forceHeaderStyle h4"},this.overallSurvivalTitleText),c.createElement(p.default,{alteredPatientSurvivals:this.props.store.overallAlteredPatientSurvivals.result,unalteredPatientSurvivals:this.props.store.overallUnalteredPatientSurvivals.result,title:this.overallSurvivalTitleText,xAxisLabel:"Months Survival",yAxisLabel:"Overall Survival",totalCasesHeader:"Number of Cases, Total",statusCasesHeader:"Number of Cases, Deceased",medianMonthsHeader:"Median Months Survival",yLabelTooltip:"Survival estimate",xLabelWithEventTooltip:"Time of death",xLabelWithoutEventTooltip:"Time of last observation",fileName:"Overall_Survival"}))):t=!0,this.props.store.diseaseFreeAlteredPatientSurvivals.isComplete&&this.props.store.diseaseFreeUnalteredPatientSurvivals.isComplete&&this.props.store.diseaseFreeAlteredPatientSurvivals.result.length>0&&this.props.store.diseaseFreeUnalteredPatientSurvivals.result.length>0?e.push(c.createElement("div",null,c.createElement("h4",{className:"forceHeaderStyle h4"},this.diseaseFreeSurvivalTitleText),c.createElement(p.default,{alteredPatientSurvivals:this.props.store.diseaseFreeAlteredPatientSurvivals.result,unalteredPatientSurvivals:this.props.store.diseaseFreeUnalteredPatientSurvivals.result,title:this.diseaseFreeSurvivalTitleText,xAxisLabel:"Months Disease/Progression-free",yAxisLabel:"Disease/Progression-free Survival",totalCasesHeader:"Number of Cases, Total",statusCasesHeader:"Number of Cases, Relapsed/Progressed",medianMonthsHeader:"Median Months Disease-free",yLabelTooltip:"Disease-free Estimate",xLabelWithEventTooltip:"Time of Relapse",xLabelWithoutEventTooltip:"Time of Last Observation",fileName:"Disease_Free_Survival"}))):n=!0,t&&n&&(e.push(c.createElement("div",{className:g.default.NotAvailable},this.overallSurvivalTitleText," not available")),e.push(c.createElement("div",{className:g.default.NotAvailable},this.diseaseFreeSurvivalTitleText," not available"))),c.createElement("div",null,e)}}]),t}(c.Component);b=v([m.observer],b),t.default=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=n(1),d=o(c),p=n(3),f=o(p),h=n(13),m=n(33),y=n(179),g=r(y),v=n(938),b=r(v),_=n(304),w=n(1172),x=r(w),S=n(1173),C=r(S),k=n(1174),E=n(1177),M=r(E),A=n(174),T=r(A),O=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},P=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleMutationDownload=n.handleMutationDownload.bind(n),n.handleTransposedMutationDownload=n.handleTransposedMutationDownload.bind(n),n.handleCnaDownload=n.handleCnaDownload.bind(n),n.handleTransposedCnaDownload=n.handleTransposedCnaDownload.bind(n),n.handleMrnaDownload=n.handleMrnaDownload.bind(n),n.handleTransposedMrnaDownload=n.handleTransposedMrnaDownload.bind(n),n.handleProteinDownload=n.handleProteinDownload.bind(n),n.handleTransposedProteinDownload=n.handleTransposedProteinDownload.bind(n),n}return s(t,e),l(t,[{key:"render",value:function(){var e="pending"===this.props.store.putativeDriverFilteredCaseAggregatedDataByOQLLine.status||"pending"===this.props.store.sequencedSampleKeysByGene.status,t=("error"===this.props.store.putativeDriverFilteredCaseAggregatedDataByOQLLine.status||this.props.store.sequencedSampleKeysByGene.status,"pending"===this.props.store.putativeDriverFilteredCaseAggregatedDataByOQLLine.status||"pending"===this.props.store.samples.status||"pending"===this.props.store.coverageInformation.status),n="error"===this.props.store.putativeDriverFilteredCaseAggregatedDataByOQLLine.status||"error"===this.props.store.samples.status||"error"===this.props.store.coverageInformation.status,r=e||"pending"===this.props.store.unfilteredCaseAggregatedData.status,o=n||"error"===this.props.store.unfilteredCaseAggregatedData.status;return d.createElement("div",{className:"cbioportal-frontend"},d.createElement("div",null,d.createElement(b.default,{title:"Downloadable Data Files",className:"forceHeaderStyle h4",isLoading:r,style:{marginBottom:15}}),!r&&!o&&this.downloadableFilesTable()),d.createElement("hr",null),d.createElement("div",{className:M.default["tables-container"],"data-test":"dataDownloadGeneAlterationTable"},d.createElement(b.default,{title:"Gene Alteration Frequency",isLoading:e,className:"pull-left forceHeaderStyle h4"}),d.createElement(x.default,{geneAlterationData:this.geneAlterationData})),d.createElement("hr",null),d.createElement("div",{className:M.default["tables-container"]},d.createElement(b.default,{title:"Type of Genetic Alterations Across All Samples",isLoading:t,className:"pull-left forceHeaderStyle h4"}),d.createElement(C.default,{caseAlterationData:this.caseAlterationData,oqls:this.oqls})))}},{key:"downloadableFilesTable",value:function(){return d.createElement("table",{className:(0,T.default)("table","table-striped",M.default.downloadCopyTable)},d.createElement("tbody",null,(0,k.hasValidData)(this.cnaData)&&this.cnaDownloadControls(),(0,k.hasValidMutationData)(this.mutationData)&&this.mutationDownloadControls(),(0,k.hasValidData)(this.mrnaData)&&this.mrnaExprDownloadControls(),(0,k.hasValidData)(this.proteinData)&&this.proteinExprDownloadControls(),this.alteredSamplesDownloadControls(),this.sampleMatrixDownloadControls()))}},{key:"cnaDownloadControls",value:function(){return this.downloadControlsRow("Copy-number Alterations",this.handleCnaDownload,this.handleTransposedCnaDownload)}},{key:"mutationDownloadControls",value:function(){return this.downloadControlsRow("Mutations",this.handleMutationDownload,this.handleTransposedMutationDownload)}},{key:"mrnaExprDownloadControls",value:function(){return this.downloadControlsRow("mRNA Expression",this.handleMrnaDownload,this.handleTransposedMrnaDownload)}},{key:"proteinExprDownloadControls",value:function(){return this.downloadControlsRow("Protein Expression",this.handleProteinDownload,this.handleTransposedProteinDownload)}},{key:"downloadControlsRow",value:function(e,t,n){return d.createElement("tr",null,d.createElement("td",{style:{width:500}},e),d.createElement("td",null,d.createElement("a",{onClick:t},d.createElement("i",{className:"fa fa-cloud-download",style:{marginRight:5}}),"Tab Delimited Format"),d.createElement("span",{style:{margin:"0px 10px"}},"|"),d.createElement("a",{onClick:n},d.createElement("i",{className:"fa fa-cloud-download",style:{marginRight:5}}),"Transposed Matrix")))}},{key:"copyDownloadControlsRow",value:function(e,t,n){return d.createElement("tr",null,d.createElement("td",null,e),d.createElement("td",null,d.createElement(_.SimpleCopyDownloadControls,{controlsStyle:"LINK",downloadData:t,downloadFilename:n})))}},{key:"alteredSamplesDownloadControls",value:function(){var e=this,t=function(){return e.alteredSamplesText};return this.copyDownloadControlsRow("Samples affected: Only samples with an alteration are included",t,"affected_samples.txt")}},{key:"sampleMatrixDownloadControls",value:function(){var e=this,t=function(){return e.sampleMatrixText};return this.copyDownloadControlsRow("Sample matrix: 1 = Sample harbors alteration in one of the input genes",t,"sample_matrix.txt")}},{key:"handleMutationDownload",value:function(){(0,g.default)(this.mutationDataText,"mutations.txt")}},{key:"handleTransposedMutationDownload",value:function(){(0,g.default)(this.transposedMutationDataText,"mutations_transposed.txt")}},{key:"handleMrnaDownload",value:function(){(0,g.default)(this.mrnaDataText,"mRNA_exp.txt")}},{key:"handleTransposedMrnaDownload",value:function(){(0,g.default)(this.transposedMrnaDataText,"mRNA_exp_transposed.txt")}},{key:"handleProteinDownload",value:function(){(0,g.default)(this.proteinDataText,"protein_exp.txt")}},{key:"handleTransposedProteinDownload",value:function(){(0,g.default)(this.transposedProteinDataText,"protein_exp_transposed.txt")}},{key:"handleCnaDownload",value:function(){(0,g.default)(this.cnaDataText,"cna.txt")}},{key:"handleTransposedCnaDownload",value:function(){(0,g.default)(this.transposedCnaDataText,"cna_transposed.txt")}},{key:"caseAggregatedDataByOQLLine",get:function(){return this.props.store.putativeDriverFilteredCaseAggregatedDataByOQLLine.result}},{key:"unfilteredCaseAggregatedData",get:function(){return this.props.store.unfilteredCaseAggregatedData.result}},{key:"sequencedSampleKeysByGene",get:function(){return this.props.store.sequencedSampleKeysByGene.result}},{key:"samples",get:function(){return this.props.store.samples.result}},{key:"genes",get:function(){return this.props.store.genes.result}},{key:"genePanelInformation",get:function(){return this.props.store.coverageInformation.result}},{key:"geneAlterationData",get:function(){return(0,k.generateGeneAlterationData)(this.caseAggregatedDataByOQLLine,this.sequencedSampleKeysByGene)}},{key:"geneAlterationDataByGene",get:function(){return f.keyBy(this.geneAlterationData,"gene")}},{key:"caseAlterationData",get:function(){return this.props.store.selectedMolecularProfiles.isComplete?(0,k.generateCaseAlterationData)(this.props.store.selectedMolecularProfiles.result,this.caseAggregatedDataByOQLLine,this.genePanelInformation,this.samples,this.geneAlterationDataByGene):[]}},{key:"mutationData",get:function(){return(0,k.generateMutationData)(this.unfilteredCaseAggregatedData)}},{key:"mutationDownloadData",get:function(){return(0,k.generateMutationDownloadData)(this.mutationData,this.samples,this.genes)}},{key:"transposedMutationDownloadData",get:function(){return f.unzip(this.mutationDownloadData)}},{key:"mutationDataText",get:function(){return(0,k.stringify2DArray)(this.mutationDownloadData)}},{key:"transposedMutationDataText",get:function(){return(0,k.stringify2DArray)(this.transposedMutationDownloadData)}},{key:"mrnaData",get:function(){return(0,k.generateMrnaData)(this.unfilteredCaseAggregatedData)}},{key:"mrnaDownloadData",get:function(){return(0,k.generateDownloadData)(this.mrnaData,this.samples,this.genes)}},{key:"transposedMrnaDownloadData",get:function(){return f.unzip(this.mrnaDownloadData)}},{key:"mrnaDataText",get:function(){return(0,k.stringify2DArray)(this.mrnaDownloadData)}},{key:"transposedMrnaDataText",get:function(){return(0,k.stringify2DArray)(this.transposedMrnaDownloadData)}},{key:"proteinData",get:function(){return(0,k.generateProteinData)(this.unfilteredCaseAggregatedData)}},{key:"proteinDownloadData",get:function(){return(0,k.generateDownloadData)(this.proteinData,this.samples,this.genes)}},{key:"transposedProteinDownloadData",get:function(){return f.unzip(this.proteinDownloadData)}},{key:"proteinDataText",get:function(){return(0,k.stringify2DArray)(this.proteinDownloadData)}},{key:"transposedProteinDataText",get:function(){return(0,k.stringify2DArray)(this.transposedProteinDownloadData)}},{key:"cnaData",get:function(){return(0,k.generateCnaData)(this.unfilteredCaseAggregatedData)}},{key:"cnaDownloadData",get:function(){return(0,k.generateDownloadData)(this.cnaData,this.samples,this.genes)}},{key:"transposedCnaDownloadData",get:function(){return f.unzip(this.cnaDownloadData)}},{key:"cnaDataText",get:function(){return(0,k.stringify2DArray)(this.cnaDownloadData)}},{key:"transposedCnaDataText",get:function(){return(0,k.stringify2DArray)(this.transposedCnaDownloadData)}},{key:"alteredSamples",get:function(){return this.caseAlterationData.filter(function(e){return e.altered}).map(function(e){return e.studyId+":"+e.sampleId})}},{key:"alteredSamplesText",get:function(){return this.alteredSamples.join("\n")}},{key:"sampleMatrix",get:function(){return this.caseAlterationData.map(function(e){return[e.studyId+":"+e.sampleId,e.altered?"1":"0"]})}},{key:"sampleMatrixText",get:function(){return(0,k.stringify2DArray)(this.sampleMatrix)}},{key:"oqls",get:function(){return this.caseAggregatedDataByOQLLine?this.caseAggregatedDataByOQLLine.map(function(e){return e.oql}):[]}}]),t}(d.Component);O([h.computed],P.prototype,"caseAggregatedDataByOQLLine",null),O([h.computed],P.prototype,"unfilteredCaseAggregatedData",null),O([h.computed],P.prototype,"sequencedSampleKeysByGene",null),O([h.computed],P.prototype,"samples",null),O([h.computed],P.prototype,"genes",null),O([h.computed],P.prototype,"genePanelInformation",null),O([h.computed],P.prototype,"geneAlterationData",null),O([h.computed],P.prototype,"geneAlterationDataByGene",null),O([h.computed],P.prototype,"caseAlterationData",null),O([h.computed],P.prototype,"mutationData",null),O([h.computed],P.prototype,"mutationDownloadData",null),O([h.computed],P.prototype,"transposedMutationDownloadData",null),O([h.computed],P.prototype,"mutationDataText",null),O([h.computed],P.prototype,"transposedMutationDataText",null),O([h.computed],P.prototype,"mrnaData",null),O([h.computed],P.prototype,"mrnaDownloadData",null),O([h.computed],P.prototype,"transposedMrnaDownloadData",null),O([h.computed],P.prototype,"mrnaDataText",null),O([h.computed],P.prototype,"transposedMrnaDataText",null),O([h.computed],P.prototype,"proteinData",null),O([h.computed],P.prototype,"proteinDownloadData",null),O([h.computed],P.prototype,"transposedProteinDownloadData",null),O([h.computed],P.prototype,"proteinDataText",null),O([h.computed],P.prototype,"transposedProteinDataText",null),O([h.computed],P.prototype,"cnaData",null),O([h.computed],P.prototype,"cnaDownloadData",null),O([h.computed],P.prototype,"transposedCnaDownloadData",null),O([h.computed],P.prototype,"cnaDataText",null),O([h.computed],P.prototype,"transposedCnaDataText",null),O([h.computed],P.prototype,"alteredSamples",null),O([h.computed],P.prototype,"alteredSamplesText",null),O([h.computed],P.prototype,"sampleMatrix",null),O([h.computed],P.prototype,"sampleMatrixText",null),O([h.computed],P.prototype,"oqls",null),P=O([m.observer],P),t.default=P},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(33),c=n(1),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(c),p=n(178),f=r(p),h=n(891),m=r(h),y=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},g=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),t}(f.default),v=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){return d.createElement(g,{data:this.props.geneAlterationData,columns:[{name:"Gene Symbol",render:function(e){return d.createElement("span",null,e.gene)},download:function(e){return e.gene},sortBy:function(e){return e.gene},filter:function(e,t,n){return e.gene.toUpperCase().indexOf(n)>-1}},{name:"OQL Line",visible:!1,render:function(e){return d.createElement("span",null,e.oqlLine)},download:function(e){return e.oqlLine},sortBy:function(e){return e.oqlLine},filter:function(e,t,n){return e.oqlLine.toUpperCase().indexOf(n)>-1}},{name:"Num Samples Altered",render:function(e){return d.createElement("span",null,e.sequenced?e.altered:"Not Profiled")},download:function(e){return e.sequenced?""+e.altered:"N/P"},sortBy:function(e){return e.altered}},{name:"Percent Samples Altered",render:function(e){return e.sequenced?d.createElement(m.default,{barWidth:200,textWidth:45,counts:[e.altered],totalCount:e.sequenced}):d.createElement("span",null,"Not Profiled")},download:function(e){return e.percentAltered},sortBy:function(e){return e.altered/e.sequenced}}],initialSortColumn:"Percent Samples Altered",initialSortDirection:"desc",showPagination:!0,initialItemsPerPage:10,showColumnVisibility:!0,showFilter:!0,showCopyDownload:!0,copyDownloadProps:{downloadFilename:"gene_alteration_frequency.tsv"}})}}]),t}(d.Component);v=y([u.observer],v),t.default=v},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){var t=[],n=function(e){return e},r=function(e){return e.map(function(e){return e.type})};return[{label:"MUT",getAlterationData:function(e){return e.mutation},getValues:n},{label:"FUSION",getAlterationData:function(e){return e.fusion},getValues:n},{label:"CNA",getAlterationData:function(e){return e.cna},getValues:r},{label:"EXP",getAlterationData:function(e){return e.mrnaExp},getValues:r},{label:"PROT",getAlterationData:function(e){return e.proteinLevel},getValues:r}].forEach(function(n){var r=n.getAlterationData(e);r.length>0&&t.push(n.label+": "+n.getValues(r).join(",")+";")}),t.join(" ")}function l(e,t){var n="";if(!m.isEmpty(e)){var r=e[t];r&&(n=r.sequenced?s(e[t]):"N/P")}return n}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.generateOqlValue=s,t.generateOqlDisplayValue=l;var d=n(33),p=n(1),f=r(p),h=n(3),m=r(h),y=n(178),g=function(e){return e&&e.__esModule?e:{default:e}}(y),v=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},b=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),t}(g.default),_=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){var e=[{name:"Study ID",render:function(e){return f.createElement("span",{style:{whiteSpace:"nowrap"}},e.studyId)},download:function(e){return e.studyId},sortBy:function(e){return e.studyId},filter:function(e,t,n){return e.studyId.toUpperCase().includes(n)}},{name:"Sample ID",render:function(e){return f.createElement("span",{style:{whiteSpace:"nowrap"}},e.sampleId)},download:function(e){return""+e.sampleId},sortBy:function(e){return e.sampleId},filter:function(e,t,n){return e.sampleId.toUpperCase().includes(n)}},{name:"Patient ID",render:function(e){return f.createElement("span",{style:{whiteSpace:"nowrap"}},e.patientId)},download:function(e){return""+e.patientId},sortBy:function(e){return e.patientId},filter:function(e,t,n){return e.patientId.toUpperCase().includes(n)}},{name:"Altered",tooltip:f.createElement("span",null,"1 = Sample harbors alteration in one of the input genes"),render:function(e){return f.createElement("span",null,e.altered?"1":"0")},download:function(e){return e.altered?"1":"0"},sortBy:function(e){return e.altered?1:0}}];return this.props.oqls.forEach(function(t){e.push({name:t.gene,tooltip:f.createElement("span",null,t.oql_line),headerDownload:function(e){return t.oql_line},render:function(e){return f.createElement("span",{style:{whiteSpace:"nowrap"}},l(e.oqlData,t.oql_line))},download:function(e){return l(e.oqlData,t.oql_line)},sortBy:function(e){return l(e.oqlData,t.oql_line)},filter:function(e,n,r){return l(e.oqlData,t.oql_line).toUpperCase().includes(r)}})}),f.createElement(b,{data:this.props.caseAlterationData,columns:e,initialSortColumn:"Altered",initialSortDirection:"desc",initialItemsPerPage:20,showPagination:!0,showColumnVisibility:!0,showFilter:!0,showCopyDownload:!0,enableHorizontalScroll:!0,copyDownloadProps:{downloadFilename:"alterations_across_samples.tsv"}})}}]),t}(f.Component);_=v([d.observer],_),t.default=_},function(e,t,n){"use strict";function r(e,t){var n=[],r=[],o=[],a=[],i=[],s=!0,l=!1,u=void 0;try{for(var c,d=e.data[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var p=c.value,f=p.molecularProfileAlterationType,h=p.alterationSubType.toUpperCase();switch(f){case _.AlterationTypeConstants.COPY_NUMBER_ALTERATION:h.length>0&&o.push({type:h,value:p.value});break;case _.AlterationTypeConstants.MRNA_EXPRESSION:h.length>0&&i.push({type:h,value:p.value});break;case _.AlterationTypeConstants.PROTEIN_LEVEL:h.length>0&&a.push({type:h,value:p.value});break;case _.AlterationTypeConstants.MUTATION_EXTENDED:p.mutationType.toLowerCase().includes("fusion")?r.push(p.proteinChange):n.push(p.proteinChange)}}}catch(e){l=!0,u=e}finally{try{!s&&d.return&&d.return()}finally{if(l)throw u}}return{sequenced:!t||!t[e.trackLabel]||t[e.trackLabel].sequenced>0,geneSymbol:e.trackLabel,mutation:n,fusion:r,cna:o,mrnaExp:i,proteinLevel:a}}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e&&!b.isEmpty(t)?e.map(function(e){var n=(0,w.alterationInfoForCaseAggregatedDataByOQLLine)(!0,e,t,{});return{gene:e.oql.gene,oqlLine:e.oql.oql_line,altered:n.altered,sequenced:n.sequenced,percentAltered:n.percent}}):[]}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"\t",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\n";return e.map(function(e){return e.join(t)}).join(n)}function i(e){var t=function(e){return e.molecularProfileAlterationType===_.AlterationTypeConstants.MUTATION_EXTENDED||e.molecularProfileAlterationType===_.AlterationTypeConstants.FUSION};return e?d(e,t):{}}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e?f(e,t,n,g):[]}function l(e){var t=function(e){return e.molecularProfileAlterationType===_.AlterationTypeConstants.MRNA_EXPRESSION};return e?d(e,t):{}}function u(e){var t=function(e){return e.molecularProfileAlterationType===_.AlterationTypeConstants.PROTEIN_LEVEL};return e?d(e,t):{}}function c(e){var t=function(e){return e.molecularProfileAlterationType===_.AlterationTypeConstants.COPY_NUMBER_ALTERATION};return e?d(e,t):{}}function d(e,t){var n={};return b.values(e.samples).forEach(function(e){e.forEach(function(e){var r=e.gene.hugoGeneSymbol+"_"+e.uniqueSampleKey;n[r]=n[r]||[],t&&!t(e)||n[r].push(e)})}),n}function p(e,t,n,r,o){var a={};return r.forEach(function(r){var i=n[r],s=a[r]||{studyId:i.studyId,sampleId:i.sampleId,patientId:i.patientId,alterationData:{}};a[r]=s,t.forEach(function(t){s.alterationData[t]=s.alterationData[t]||[];var n=t+"_"+r;e[n]&&e[n].forEach(function(e){var n=o?o(e):String(e.value);s.alterationData[t].push(n)})})}),a}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments[3],o=arguments[4],a=n.map(function(e){return e.hugoGeneSymbol}),i=b.keyBy(t,"uniqueSampleKey"),s=t.map(function(e){return e.uniqueSampleKey}),l=p(e,a,i,s,r),u=[];return u.push(["STUDY_ID","SAMPLE_ID"].concat(a)),s.forEach(function(e){var t=l[e],n=[];n.push(t.studyId),n.push(t.sampleId),a.forEach(function(e){var r=o?o(t.alterationData[e]):t.alterationData[e].join(" ")||"NA";n.push(r)}),u.push(n)}),u}function h(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments[4],i={};if(t&&n){var s=b.keyBy(o,"uniqueSampleKey");t.forEach(function(t){(0,x.makeGeneticTrackData)(t.cases.samples,t.oql.gene,o,n,e).forEach(function(e){var n=e.study_id,o=e.sample||(s[e.uid]?s[e.uid].sampleId:""),l=n+":"+e.uid;i[l]=i[l]||{studyId:n,sampleId:o,patientId:s[e.uid]?s[e.uid].patientId:"",altered:!1,oqlData:{}},i[l].altered=i[l].altered||e.data.length>0,i[l].oqlData[t.oql.oql_line]=r(e,a)})})}return b.values(i)}function m(e,t){var n=!0,r=!1,o=void 0;try{for(var a,i=b.values(e)[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var s=a.value,l=!0,u=!1,c=void 0;try{for(var d,p=s[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var f=d.value,h=t?t(f):f.value;if(h&&String(h).length>0)return!0}}catch(e){u=!0,c=e}finally{try{!l&&p.return&&p.return()}finally{if(u)throw c}}}}catch(e){r=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw o}}return!1}function y(e){return m(e,g)}function g(e){return e.proteinChange}Object.defineProperty(t,"__esModule",{value:!0}),t.generateOqlData=r,t.generateGeneAlterationData=o,t.stringify2DArray=a,t.generateMutationData=i,t.generateMutationDownloadData=s,t.generateMrnaData=l,t.generateProteinData=u,t.generateCnaData=c,t.generateSampleAlterationDataByGene=d,t.generateDownloadFileRows=p,t.generateDownloadData=f,t.generateCaseAlterationData=h,t.hasValidData=m,t.hasValidMutationData=y;var v=n(3),b=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(v),_=n(122),w=n(1007),x=n(1068)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.genetic_rule_set_different_colors_recurrence=t.genetic_rule_set_different_colors_no_recurrence=t.genetic_rule_set_same_color_for_all_recurrence=t.genetic_rule_set_same_color_for_all_no_recurrence=t.CNA_COLOR_HOMDEL=t.CNA_COLOR_HETLOSS=t.CNA_COLOR_GAIN=t.CNA_COLOR_AMP=t.PROT_COLOR_DOWN=t.PROT_COLOR_UP=t.MUT_COLOR_GERMLINE=t.MRNA_COLOR_DOWN=t.MRNA_COLOR_UP=t.MUT_COLOR_PROMOTER=t.MUT_COLOR_FUSION=t.MUT_COLOR_TRUNC_PASSENGER=t.MUT_COLOR_TRUNC=t.MUT_COLOR_INFRAME_PASSENGER=t.MUT_COLOR_INFRAME=t.MUT_COLOR_MISSENSE_PASSENGER=t.MUT_COLOR_MISSENSE=t.DEFAULT_GREY=void 0;var r=n(90),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(r),a=t.DEFAULT_GREY="rgba(190, 190, 190, 1)",i=t.MUT_COLOR_MISSENSE="#008000",s=t.MUT_COLOR_MISSENSE_PASSENGER="#53D400",l=t.MUT_COLOR_INFRAME="#993404",u=t.MUT_COLOR_INFRAME_PASSENGER="#fe9929",c=t.MUT_COLOR_TRUNC="#000000",d=t.MUT_COLOR_TRUNC_PASSENGER="#708090",p=t.MUT_COLOR_FUSION="#8B00C9",f=t.MUT_COLOR_PROMOTER="#00B7CE",h=t.MRNA_COLOR_UP="#ff9999",m=t.MRNA_COLOR_DOWN="#6699cc",y=t.MUT_COLOR_GERMLINE="#FFFFFF",g=t.PROT_COLOR_UP="#ff3df8",v=t.PROT_COLOR_DOWN="#00E1FF",b=t.CNA_COLOR_AMP="#ff0000",_=t.CNA_COLOR_GAIN="#ffb6c1",w=t.CNA_COLOR_HETLOSS="#8fd8d8",x=t.CNA_COLOR_HOMDEL="#0000ff",S={"*":{shapes:[{type:"rectangle",fill:a,z:1}],legend_label:"No alterations",legend_order:Number.POSITIVE_INFINITY},disp_cna:{amp:{shapes:[{type:"rectangle",fill:b,x:"0%",y:"0%",width:"100%",height:"100%",z:2}],legend_label:"Amplification",legend_order:10},gain:{shapes:[{type:"rectangle",fill:_,x:"0%",y:"0%",width:"100%",height:"100%",z:2}],legend_label:"Gain",legend_order:11},homdel:{shapes:[{type:"rectangle",fill:x,x:"0%",y:"0%",width:"100%",height:"100%",z:2}],legend_label:"Deep Deletion",legend_order:12},hetloss:{shapes:[{type:"rectangle",fill:w,x:"0%",y:"0%",width:"100%",height:"100%",z:2}],legend_label:"Shallow Deletion",legend_order:13}},disp_mrna:{up:{shapes:[{type:"rectangle",fill:"rgba(0, 0, 0, 0)",stroke:h,"stroke-width":"2",x:"0%",y:"0%",width:"100%",height:"100%",z:3}],legend_label:"mRNA Upregulation",legend_order:20},down:{shapes:[{type:"rectangle",fill:"rgba(0, 0, 0, 0)",stroke:m,"stroke-width":"2",x:"0%",y:"0%",width:"100%",height:"100%",z:3}],legend_label:"mRNA Downregulation",legend_order:21}},disp_prot:{up:{shapes:[{type:"rectangle",fill:g,x:"0%",y:"0%",width:"100%",height:"20%",z:4}],legend_label:"Protein Upregulation",legend_order:31},down:{shapes:[{type:"rectangle",fill:v,x:"0%",y:"80%",width:"100%",height:"20%",z:4}],legend_label:"Protein Downregulation",legend_order:32}},disp_fusion:{true:{shapes:[{type:"rectangle",fill:p,x:"0%",y:"20%",width:"100%",height:"60%",z:5}],legend_label:"Fusion",legend_order:1}},disp_germ:{true:{shapes:[{type:"rectangle",fill:y,x:"0%",y:"46%",width:"100%",height:"8%",z:7}],legend_label:"Germline Mutation",legend_order:2}}},C={type:"gene",legend_label:"Genetic Alteration",na_legend_label:"Not profiled",legend_base_color:a};t.genetic_rule_set_same_color_for_all_no_recurrence=o.extend({},C,{rule_params:o.extend({},S,{disp_mut:{"trunc,inframe,missense,promoter,trunc_rec,inframe_rec,missense_rec,promoter_rec":{shapes:[{type:"rectangle",fill:i,x:"0%",y:"33.33%",width:"100%",height:"33.33%",z:6}],legend_label:"Mutation",legend_order:0}}})}),t.genetic_rule_set_same_color_for_all_recurrence=o.extend({},C,{rule_params:o.extend({},S,{disp_mut:{"missense_rec,inframe_rec,trunc_rec":{shapes:[{type:"rectangle",fill:i,x:"0%",y:"33.33%",width:"100%",height:"33.33%",z:6}],legend_label:"Mutation (putative driver)",legend_order:0},"missense,inframe,trunc,promoter,promoter_rec":{shapes:[{type:"rectangle",fill:s,x:"0%",y:"33.33%",width:"100%",height:"33.33%",z:6}],legend_label:"Mutation (unknown significance)",legend_order:0}}})}),t.genetic_rule_set_different_colors_no_recurrence=o.extend({},C,{rule_params:o.extend({},S,{disp_mut:{"promoter,promoter_rec":{shapes:[{type:"rectangle",fill:f,x:"0%",y:"33.33%",width:"100%",height:"33.33%",z:6}],legend_label:"Promoter Mutation",legend_order:0},"trunc,trunc_rec":{shapes:[{type:"rectangle",fill:c,x:"0%",y:"33.33%",width:"100%",height:"33.33%",z:6}],legend_label:"Truncating Mutation",legend_order:0},"inframe,inframe_rec":{shapes:[{type:"rectangle",fill:l,x:"0%",y:"33.33%",width:"100%",height:"33.33%",z:6}],legend_label:"Inframe Mutation",legend_order:0},"missense,missense_rec":{shapes:[{type:"rectangle",fill:i,x:"0%",y:"33.33%",width:"100%",height:"33.33%",z:6}],legend_label:"Missense Mutation",legend_order:0}}})}),t.genetic_rule_set_different_colors_recurrence=o.extend({},C,{rule_params:o.extend({},S,{disp_mut:{"promoter,promoter_rec":{shapes:[{type:"rectangle",fill:f,x:"0%",y:"33.33%",width:"100%",height:"33.33%",z:6}],legend_label:"Promoter Mutation",legend_order:0},trunc_rec:{shapes:[{type:"rectangle",fill:c,x:"0%",y:"33.33%",width:"100%",height:"33.33%",z:6}],legend_label:"Truncating Mutation (putative driver)",legend_order:0},trunc:{shapes:[{type:"rectangle",fill:d,x:"0%",y:"33.33%",width:"100%",height:"33.33%",z:6}],legend_label:"Truncating Mutation (unknown significance)",legend_order:0},inframe_rec:{shapes:[{type:"rectangle",fill:l,x:"0%",y:"33.33%",width:"100%",height:"33.33%",z:6}],legend_label:"Inframe Mutation (putative driver)",legend_order:0},inframe:{shapes:[{type:"rectangle",fill:u,x:"0%",y:"33.33%",width:"100%",height:"33.33%",z:6}],legend_label:"Inframe Mutation (unknown significance)",legend_order:0},missense_rec:{shapes:[{type:"rectangle",fill:i,x:"0%",y:"33.33%",width:"100%",height:"33.33%",z:6}],legend_label:"Missense Mutation (putative driver)",legend_order:0},missense:{shapes:[{type:"rectangle",fill:s,x:"0%",y:"33.33%",width:"100%",height:"33.33%",z:6}],legend_label:"Missense Mutation (unknown significance)",legend_order:0}}})})},function(e,t,n){"use strict";function r(e){return e.hasOwnProperty("mutationType")}function o(e){return e.hasOwnProperty("sampleId")}function a(e){return!e.length||o(e[0])}function i(e){return e.hasOwnProperty("mutationCount")}Object.defineProperty(t,"__esModule",{value:!0}),t.isMutation=r,t.isSample=o,t.isSampleList=a,t.isMutationCount=i},function(e,t){e.exports={portalWidth:"styles-module__portalWidth__1Fjw6","tables-container":"styles-module__tables-container__1wDsF",downloadCopyTable:"styles-module__downloadCopyTable__1jMBv"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(1),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),d=n(33),p=n(1179),f=r(p),h=n(854),m=r(h),y=n(13),g=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},v=function(e){function t(){o(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.isReady=!1,e}return i(t,e),s(t,[{key:"componentDidMount",value:function(){this.addAddThis()}},{key:"componentDidUpdate",value:function(){this.addAddThis()}},{key:"addAddThis",value:function(){var e=this,t=this.props.store,n=t.bitlyShortenedURL,r=t.sessionIdURL;if(n.isError||n.isComplete){var o=n.result||r;(0,f.default)({pubid:"ra-59959e35901cdde7"},this.props.getParameters.setup(o),function(){e.isReady=!0})}}},{key:"render",value:function(){var e=this.props.store.bitlyShortenedURL,t=e.isComplete,n=e.isError;return this.isReady&&(t||n)?c.createElement("div",{className:this.props.getParameters.className}):c.createElement(m.default,{isLoading:!0})}}]),t}(c.Component);g([y.observable],v.prototype,"isReady",void 0),v=g([d.observer],v),t.default=v},function(e,t,n){function r(e,t,n){window.addthis_share=t,window.addthis_config=e,o("https://s7.addthis.com/js/300/addthis_widget.js#domready=1").onload=n}var o=n(1180);e.exports=r},function(e,t){e.exports=function(e,t){var n=document.createElement("script");return n.src=e,"boolean"==typeof t&&(n.async=t),(document.head||document.body).appendChild(n),n}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(1),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),d=n(90),p=r(d),f=n(33),h=n(873),m=n(123),y=n(13),g=n(64),v=r(g),b=n(179),_=r(b),w=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},x=function(e){function t(){o(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.downloadSegmentData=e.downloadSegmentData.bind(e),e}return i(t,e),s(t,[{key:"getIframeBody",value:function(){var e=1.5*this.props.sampleIds.length,t=300+2*this.props.sampleIds.length;return t=Math.min(t,800),'<head>    <link rel="stylesheet" type="text/css"  href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/themes/smoothness/jquery-ui.css"/><link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css"><link rel="stylesheet" type="text/css" href="'+v.default.frontendUrl+'reactapp/igv.css"><script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"><\/script><script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/jquery-ui.min.js"><\/script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"><\/script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.7/es5-shim.min.js"><\/script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/es6-shim/0.35.3/es6-shim.js"><\/script><script type="text/javascript" src="'+v.default.frontendUrl+'reactapp/igv.min.js"><\/script></head><body style="margin:0"><div id="igvDiv" style="padding-top: 10px;padding-bottom: 10px;"></div><script type="text/javascript">  $(document).ready(function () {    var div = $("#igvDiv"),   options = {divId: "igvDiv", showNavigation: true, showRuler: true, genome: "hg19", divId: "igvDiv", locus: "'+this.props.gene.hugoGeneSymbol+'", tracks: [  { url: "api-legacy/copynumbersegments", indexed: false, isLog: true, contentType: "application/x-www-form-urlencoded", name: "Alt click to sort", type:"seg", json: true, method: "POST", height: '+e+', sendData: "cancerStudyId='+this.props.studyId+"&chromosome="+this.props.gene.chromosome+"&sampleIds="+this.props.sampleIds.join(",")+'"},{name: "Genes", url: "https://s3.amazonaws.com/igv.broadinstitute.org/annotations/hg19/genes/gencode.v18.collapsed.bed", order: Number.MAX_VALUE,  displayMode: "EXPANDED"}]};igv.createBrowser(div, options);});<\/script></body>'}},{key:"downloadSegmentData",value:function(){var e=this,t=new XMLHttpRequest,n="cancerStudyId="+e.props.studyId+"&sampleIds="+e.props.sampleIds.join(",");t.onreadystatechange=function(){if(4===t.readyState&&200===t.status){var n=new FileReader;n.addEventListener("loadend",function(t){var n=(0,m.unescapeTabDelimited)((0,m.unquote)(t.srcElement.result));(0,_.default)(n,e.props.studyId+"_segments.seg")}),n.readAsText(t.response)}},t.open("POST","api-legacy/segmentfile"),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.responseType="blob",t.send(n)}},{key:"componentDidMount",value:function(){var e=document.createElement("iframe");e.id="cnSegmentsFrame",(0,p.default)(e).css({width:"100%",height:630,border:"none"}).appendTo((0,p.default)(this.iframeDiv).empty()),e.contentWindow.document.open(),e.contentWindow.document.write(this.getIframeBody()),e.contentWindow.document.close()}},{key:"render",value:function(){var e=this;return c.createElement("div",null,c.createElement("div",{style:{border:"1px solid #ddd",marginBottom:10},ref:function(t){return e.iframeDiv=t}}),c.createElement("p",null,"Download a copy number segment file for the selected samples  ",c.createElement("button",{onClick:this.downloadSegmentData,className:"btn btn-default btn-sm"},"Download")))}}]),t}(c.Component),S=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){var e=this;return this.props.store.samples.isComplete&&this.props.store.genes.isComplete&&this.props.store.studyIds.isComplete?c.createElement(h.MSKTabs,{tabButtonStyle:"pills",activeTabId:this.activeTabId,className:"pillTabs",onTabClick:function(t){e.activeTabId=t}},this.props.store.genes.result.map(function(t){return c.createElement(h.MSKTab,{key:t.hugoGeneSymbol,id:"CNSegmentsTab"+t.hugoGeneSymbol,linkText:t.hugoGeneSymbol},c.createElement(x,{studyId:e.props.store.studyIds.result[0],sampleIds:e.props.store.samples.result.map(function(e){return e.sampleId}),gene:t}))})):null}}]),t}(c.Component);w([y.observable],S.prototype,"activeTabId",void 0),S=w([f.observer],S),t.default=S},function(e,t){},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d=n(1),p=o(d),f=n(33),h=n(13),m=n(91),y=n(1069),g=r(y),v=n(1189),b=r(v),_=n(1007),w=n(3),x=r(w),S=n(310),C=r(S),k=n(64),E=r(k),M=n(854),A=r(M),T=n(179),O=r(T),P=n(905),j=r(P),I=n(173),D=r(I),N=n(63),R=n(1222),L=r(R),F=n(94),z=o(F),B=n(174),V=r(B),G=n(1080),H=r(G),U=n(920),q=r(U),W=n(291),Z=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":c(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},Y=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(i,s)}l((r=r.apply(e,t||[])).next())})},K=[{clinicalAttributeId:W.SpecialAttribute.FractionGenomeAltered,datatype:"NUMBER",description:"Fraction Genome Altered",displayName:"Fraction Genome Altered",patientAttribute:!1},{clinicalAttributeId:W.SpecialAttribute.MutationCount,datatype:"NUMBER",description:"Number of mutations",displayName:"Total mutations",patientAttribute:!1},{clinicalAttributeId:W.SpecialAttribute.StudyOfOrigin,datatype:"STRING",description:"Study which the sample is a part of.",displayName:"Study of origin",patientAttribute:!1},{clinicalAttributeId:W.SpecialAttribute.MutationSpectrum,datatype:"COUNTS_MAP",description:"Number of point mutations in the sample counted by different types of nucleotide changes.",displayName:"Mutation spectrum",patientAttribute:!1}],X="show_samples",Q="clinicallist",J="heatmap_track_groups",$=function(e){function t(e){i(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.columnMode="patient",n.sortMode={type:"data"},n.distinguishMutationType=!0,n.sortByMutationType=!0,n.sortByDrivers=!0,n.showUnalteredColumns=!0,n.showWhitespaceBetweenColumns=!0,n.showClinicalTrackLegends=!0,n.showMinimap=!1,n.selectedHeatmapProfile="",n.heatmapGeneInputValue="",n.horzZoom=.5,n.mouseInsideBounds=!1,n.renderingComplete=!1,n.selectedClinicalAttributeIds=h.observable.shallowMap(),n.expansionsByGeneticTrackKey=h.observable.map(),n.expansionsByGenesetHeatmapTrackKey=h.observable.map(),n.molecularProfileIdToHeatmapTracks=h.observable.map(),n.unalteredKeys=(0,m.remoteData)({await:function(){return[n.props.store.unalteredSampleKeys,n.props.store.unalteredPatientKeys]},invoke:function(){return Y(n,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("sample"!==this.columnMode){e.next=4;break}return e.abrupt("return",this.props.store.unalteredSampleKeys.result);case 4:return e.abrupt("return",this.props.store.unalteredPatientKeys.result);case 5:case"end":return e.stop()}},e,this)}))},default:[]}),n.clinicalAttributes_profiledIn=(0,m.remoteData)({await:function(){return[n.props.store.coverageInformation,n.props.store.molecularProfileIdToMolecularProfile,n.props.store.selectedMolecularProfiles]},invoke:function(){var e=x.default.groupBy(n.props.store.selectedMolecularProfiles.result,"molecularAlterationType"),t={},r=n.props.store.coverageInformation.result.samples,o=n.props.store.molecularProfileIdToMolecularProfile.result,a=!0,i=!1,s=void 0;try{for(var l,u=Object.keys(r)[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value,d=!0,p=!1,f=void 0;try{for(var h,m=r[c].notProfiledAllGenes[Symbol.iterator]();!(d=(h=m.next()).done);d=!0){t[o[h.value.molecularProfileId].molecularAlterationType]=!0}}catch(e){p=!0,f=e}finally{try{!d&&m.return&&m.return()}finally{if(p)throw f}}var y=r[c].notProfiledByGene,g=!0,v=!1,b=void 0;try{for(var _,w=Object.keys(y)[Symbol.iterator]();!(g=(_=w.next()).done);g=!0){var S=_.value,C=!0,k=!1,E=void 0;try{for(var M,A=y[S][Symbol.iterator]();!(C=(M=A.next()).done);C=!0){t[o[M.value.molecularProfileId].molecularAlterationType]=!0}}catch(e){k=!0,E=e}finally{try{!C&&A.return&&A.return()}finally{if(k)throw E}}}}catch(e){v=!0,b=e}finally{try{!g&&w.return&&w.return()}finally{if(v)throw b}}}}catch(e){i=!0,s=e}finally{try{!a&&u.return&&u.return()}finally{if(i)throw s}}var T={MUTATION_EXTENDED:"mutations",COPY_NUMBER_ALTERATION:"copy number alterations",MRNA_EXPRESSION:"mRNA expression",PROTEIN_LEVEL:"protein expression"},O=Object.keys(t).map(function(t){var n=e[t];if(n){if(1===n.length){var r=n[0];return{clinicalAttributeId:W.SpecialAttribute.Profiled+"_"+r.molecularProfileId,datatype:"STRING",description:"Profiled in "+r.name+": "+r.description,displayName:"Profiled in "+r.name,molecularProfileIds:[r.molecularProfileId],patientAttribute:!1}}return{clinicalAttributeId:W.SpecialAttribute.Profiled+"_"+t,datatype:"STRING",description:"",displayName:"Profiled for "+T[t],molecularProfileIds:n.map(function(e){return e.molecularProfileId}),patientAttribute:!1}}return null}).filter(function(e){return!!e});return O.sort(function(e,t){return(0,q.default)(e.displayName,t.displayName)}),Promise.resolve(O)},onResult:function(e){var t=!0,r=!1,o=void 0;try{for(var a,i=(e||[])[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var s=a.value;n.selectedClinicalAttributeIds.set(s.clinicalAttributeId,!0)}}catch(e){r=!0,o=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw o}}}}),n.clinicalAttributes=(0,m.remoteData)({await:function(){return[n.props.store.studies,n.props.store.clinicalAttributes,n.clinicalAttributes_profiledIn]},invoke:function(){var e=x.default.sortBy(n.props.store.clinicalAttributes.result,function(e){return e.displayName});return e=K.concat(n.clinicalAttributes_profiledIn.result).concat(e),1===n.props.store.studies.result.length&&(e=e.filter(function(e){return e.clinicalAttributeId!==W.SpecialAttribute.StudyOfOrigin})),e=x.default.uniqBy(e,function(e){return e.clinicalAttributeId}),Promise.resolve(e)}}),n.clinicalAttributesById=(0,m.remoteData)({await:function(){return[n.clinicalAttributes]},invoke:function(){return Promise.resolve(x.default.reduce(n.clinicalAttributes.result,function(e,t){return e[t.clinicalAttributeId]=t,e},{}))}}),n.sampleGeneticTracks=(0,_.makeGeneticTracksMobxPromise)(n,!0),n.patientGeneticTracks=(0,_.makeGeneticTracksMobxPromise)(n,!1),n.sampleClinicalTracks=(0,_.makeClinicalTracksMobxPromise)(n,!0),n.patientClinicalTracks=(0,_.makeClinicalTracksMobxPromise)(n,!1),n.sampleHeatmapTracks=(0,_.makeHeatmapTracksMobxPromise)(n,!0),n.patientHeatmapTracks=(0,_.makeHeatmapTracksMobxPromise)(n,!1),n.sampleGenesetHeatmapTracks=(0,_.makeGenesetHeatmapTracksMobxPromise)(n,!0,(0,_.makeGenesetHeatmapExpansionsMobxPromise)(n,!0)),n.patientGenesetHeatmapTracks=(0,_.makeGenesetHeatmapTracksMobxPromise)(n,!1,(0,_.makeGenesetHeatmapExpansionsMobxPromise)(n,!1)),n.caseSetName=(0,m.remoteData)({await:function(){return[n.props.store.sampleLists]},invoke:function(){return 1===n.props.store.sampleLists.result.length?Promise.resolve(n.props.store.sampleLists.result[0].name):Promise.resolve(void 0)}}),window.resultsViewOncoprint=n,n.initFromUrlParams(z.parse(window.location.href,!0).query),(0,C.default)(e.store.studyIds,function(e){e.length>1&&n.selectedClinicalAttributeIds.set(W.SpecialAttribute.StudyOfOrigin,!0)});var r=n;return n.onChangeSelectedClinicalTracks=n.onChangeSelectedClinicalTracks.bind(n),n.onDeleteClinicalTrack=n.onDeleteClinicalTrack.bind(n),n.onMinimapClose=n.onMinimapClose.bind(n),n.oncoprintRef=n.oncoprintRef.bind(n),n.toggleColumnMode=n.toggleColumnMode.bind(n),n.onTrackSortDirectionChange=n.onTrackSortDirectionChange.bind(n),n.onSuppressRendering=n.onSuppressRendering.bind(n),n.onReleaseRendering=n.onReleaseRendering.bind(n),(0,C.default)(n.props.store.heatmapMolecularProfiles,function(e){e.length&&(n.selectedHeatmapProfile=e[0].molecularProfileId)}),n.heatmapGeneInputValueUpdater=(0,C.default)(n.props.store.genes,function(e){n.heatmapGeneInputValue=e.map(function(e){return e.hugoGeneSymbol}).join(" ")},Number.POSITIVE_INFINITY),n.onMouseEnter=n.onMouseEnter.bind(n),n.onMouseLeave=n.onMouseLeave.bind(n),n.urlParamsReaction=(0,h.reaction)(function(){return[n.columnMode,n.heatmapTrackGroupsUrlParam,n.clinicalTracksUrlParam]},function(){var e=z.parse(window.location.href,!0),t=Object.assign({},e.query);t[X]=("sample"===n.columnMode)+"",n.clinicalTracksUrlParam?t[Q]=n.clinicalTracksUrlParam:delete t[Q],n.heatmapTrackGroupsUrlParam?t[J]=n.heatmapTrackGroupsUrlParam:delete t[J];var r=Object.assign(e,{query:t,search:null});window.history.replaceState({},"",z.format(r))}),n.controlsHandlers=n.buildControlsHandlers(),n.controlsState=(0,h.observable)({get selectedClinicalAttributeIds(){return r.selectedClinicalAttributeIds.keys()},get selectedColumnType(){return r.columnMode},get showUnalteredColumns(){return r.showUnalteredColumns},get showWhitespaceBetweenColumns(){return r.showWhitespaceBetweenColumns},get showClinicalTrackLegends(){return r.showClinicalTrackLegends},get showMinimap(){return r.showMinimap},get hideHeatmapMenu(){return r.props.store.queryStore.isVirtualStudyQuery},get sortByMutationType(){return r.sortByMutationType},get sortByCaseListDisabled(){return!r.props.store.givenSampleOrder.isComplete||!r.props.store.givenSampleOrder.result.length},get distinguishMutationType(){return r.distinguishMutationType},get distinguishDrivers(){return r.distinguishDrivers},get annotateDriversOncoKb(){return r.props.store.mutationAnnotationSettings.oncoKb},get annotateDriversOncoKbDisabled(){return r.props.store.didOncoKbFailInOncoprint},get annotateDriversHotspots(){return r.props.store.mutationAnnotationSettings.hotspots},get annotateDriversHotspotsDisabled(){return!1},get annotateDriversCBioPortal(){return r.props.store.mutationAnnotationSettings.cbioportalCount},get annotateDriversCOSMIC(){return r.props.store.mutationAnnotationSettings.cosmicCount},get hidePutativePassengers(){return r.props.store.mutationAnnotationSettings.ignoreUnknown},get annotateCBioPortalInputValue(){return r.props.store.mutationAnnotationSettings.cbioportalCountThreshold+""},get annotateCOSMICInputValue(){return r.props.store.mutationAnnotationSettings.cosmicCountThreshold+""},get clinicalAttributesPromise(){return r.clinicalAttributes},get sortMode(){return r.sortMode},get sortByDrivers(){return r.sortByDrivers},get heatmapProfilesPromise(){return r.props.store.heatmapMolecularProfiles},get selectedHeatmapProfile(){return r.selectedHeatmapProfile},get heatmapIsDynamicallyQueried(){return r.heatmapIsDynamicallyQueried},get clusterHeatmapButtonActive(){return r.isClusteredByCurrentSelectedHeatmapProfile},get hideClusterHeatmapButton(){var e=r.props.store.genesetMolecularProfile.result&&r.props.store.genesetMolecularProfile.result.value&&r.props.store.genesetMolecularProfile.result.value.molecularProfileId;return!(r.molecularProfileIdToHeatmapTracks.get(r.selectedHeatmapProfile)||r.selectedHeatmapProfile===e)},get heatmapGeneInputValue(){return r.heatmapGeneInputValue},get customDriverAnnotationBinaryMenuLabel(){var e=E.default.oncoprintCustomDriverAnnotationBinaryMenuLabel,t=r.props.store.customDriverAnnotationReport.result;return e&&t&&t.hasBinary?e:void 0},get customDriverAnnotationTiersMenuLabel(){var e=E.default.oncoprintCustomDriverAnnotationTiersMenuLabel,t=r.props.store.customDriverAnnotationReport.result;return e&&t&&t.tiers.length?e:void 0},get customDriverAnnotationTiers(){var e=r.props.store.customDriverAnnotationReport.result;return e&&e.tiers.length?e.tiers:void 0},get annotateCustomDriverBinary(){return r.props.store.mutationAnnotationSettings.driverFilter},get selectedCustomDriverAnnotationTiers(){return r.props.store.mutationAnnotationSettings.driverTiers},get columnMode(){return r.columnMode},get horzZoom(){return isNaN(r.horzZoom)?1:r.horzZoom}}),n}return l(t,e),u(t,[{key:"onMouseEnter",value:function(){this.mouseInsideBounds=!0}},{key:"onMouseLeave",value:function(){this.mouseInsideBounds=!1}},{key:"componentWillUnmount",value:function(){this.putativeDriverSettingsReaction(),this.urlParamsReaction()}},{key:"selectHeatmapProfile",value:function(e){var t=this;(0,C.default)(this.props.store.heatmapMolecularProfiles,function(n){t.selectedHeatmapProfile=t.props.store.heatmapMolecularProfiles.result[e].molecularProfileId})}},{key:"setAnnotateCBioPortalInputValue",value:function(e){this.controlsHandlers.onChangeAnnotateCBioPortalInputValue&&this.controlsHandlers.onChangeAnnotateCBioPortalInputValue(e)}},{key:"setAnnotateCOSMICInputValue",value:function(e){this.controlsHandlers.onChangeAnnotateCOSMICInputValue&&this.controlsHandlers.onChangeAnnotateCOSMICInputValue(e)}},{key:"buildControlsHandlers",value:function(){var e=this;return{onSelectColumnType:function(t){e.setColumnMode(t)},onSelectShowUnalteredColumns:function(t){e.showUnalteredColumns=t},onSelectShowWhitespaceBetweenColumns:function(t){e.showWhitespaceBetweenColumns=t},onSelectShowClinicalTrackLegends:function(t){e.showClinicalTrackLegends=t},onSelectShowMinimap:function(t){e.showMinimap=t},onSelectDistinguishMutationType:function(t){e.distinguishMutationType=t},onSelectDistinguishDrivers:(0,h.action)(function(t){t?(e.controlsState.annotateDriversOncoKbDisabled||(e.props.store.mutationAnnotationSettings.oncoKb=!0),e.controlsState.annotateDriversHotspotsDisabled||(e.props.store.mutationAnnotationSettings.hotspots=!0),e.props.store.mutationAnnotationSettings.cbioportalCount=!0,e.props.store.mutationAnnotationSettings.cosmicCount=!0,e.props.store.mutationAnnotationSettings.driverFilter=!0,e.props.store.mutationAnnotationSettings.driverTiers.forEach(function(t,n){e.props.store.mutationAnnotationSettings.driverTiers.set(n,!0)})):(e.props.store.mutationAnnotationSettings.oncoKb=!1,e.props.store.mutationAnnotationSettings.hotspots=!1,e.props.store.mutationAnnotationSettings.cbioportalCount=!1,e.props.store.mutationAnnotationSettings.cosmicCount=!1,e.props.store.mutationAnnotationSettings.driverFilter=!1,e.props.store.mutationAnnotationSettings.driverTiers.forEach(function(t,n){e.props.store.mutationAnnotationSettings.driverTiers.set(n,!1)}),e.props.store.mutationAnnotationSettings.ignoreUnknown=!1)}),onSelectAnnotateOncoKb:(0,h.action)(function(t){e.props.store.mutationAnnotationSettings.oncoKb=t}),onSelectAnnotateHotspots:(0,h.action)(function(t){e.props.store.mutationAnnotationSettings.hotspots=t}),onSelectAnnotateCBioPortal:(0,h.action)(function(t){e.props.store.mutationAnnotationSettings.cbioportalCount=t}),onSelectAnnotateCOSMIC:(0,h.action)(function(t){e.props.store.mutationAnnotationSettings.cosmicCount=t}),onChangeAnnotateCBioPortalInputValue:(0,h.action)(function(t){e.props.store.mutationAnnotationSettings.cbioportalCountThreshold=parseInt(t,10),e.controlsHandlers.onSelectAnnotateCBioPortal&&e.controlsHandlers.onSelectAnnotateCBioPortal(!0)}),onChangeAnnotateCOSMICInputValue:(0,h.action)(function(t){e.props.store.mutationAnnotationSettings.cosmicCountThreshold=parseInt(t,10),e.controlsHandlers.onSelectAnnotateCOSMIC&&e.controlsHandlers.onSelectAnnotateCOSMIC(!0)}),onSelectCustomDriverAnnotationBinary:(0,h.action)(function(t){e.props.store.mutationAnnotationSettings.driverFilter=t}),onSelectCustomDriverAnnotationTier:(0,h.action)(function(t,n){e.props.store.mutationAnnotationSettings.driverTiers.set(t,n)}),onSelectHidePutativePassengers:function(t){e.props.store.mutationAnnotationSettings.ignoreUnknown=t},onSelectSortByMutationType:function(t){e.sortByMutationType=t},onClickSortAlphabetical:function(){e.sortMode={type:"alphabetical"}},onClickSortCaseListOrder:function(){e.sortMode={type:"caseList"}},onSelectSortByDrivers:function(t){e.sortByDrivers=t},onClickSortByData:function(){e.sortMode={type:"data"}},onChangeSelectedClinicalTracks:this.onChangeSelectedClinicalTracks,onChangeHeatmapGeneInputValue:(0,h.action)(function(t){e.heatmapGeneInputValue=t,e.heatmapGeneInputValueUpdater()}),onSelectHeatmapProfile:function(t){e.selectedHeatmapProfile=t},onClickAddGenesToHeatmap:function(){e.addHeatmapTracks(e.selectedHeatmapProfile,e.heatmapGeneInputValue.toUpperCase().trim().split(/\s+/))},onClickRemoveHeatmap:(0,h.action)(function(){e.molecularProfileIdToHeatmapTracks.clear()}),onClickClusterHeatmap:function(){e.isClusteredByCurrentSelectedHeatmapProfile?e.sortByData():e.sortMode={type:"heatmap",clusteredHeatmapProfile:e.selectedHeatmapProfile}},onClickDownload:function(t){switch(t){case"pdf":(0,j.default)("oncoprint.pdf",e.oncoprint.toSVG(!0))||alert("Oncoprint too big to download as PDF - please download as SVG.");break;case"png":e.oncoprint.toCanvas(function(e,t){e.toBlob(function(n){t&&alert("Oncoprint too large - PNG truncated to "+e.getAttribute("width")+"x"+e.getAttribute("height")),(0,O.default)(n,"oncoprint.png")})},2);break;case"svg":(0,O.default)((new XMLSerializer).serializeToString(e.oncoprint.toSVG(!1)),"oncoprint.svg");break;case"order":var n=e.columnMode[0].toUpperCase()+e.columnMode.slice(1);(0,C.default)([e.props.store.sampleKeyToSample,e.props.store.patientKeyToPatient],function(t,r){var o=n+" order in the Oncoprint is:\n",a=(e.columnMode,e.oncoprint.getIdOrder().map("sample"===e.columnMode?function(e){return t[e].sampleId}:function(e){return r[e].patientId})),i=!0,s=!1,l=void 0;try{for(var u,c=a[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){o+=u.value+"\n"}}catch(e){s=!0,l=e}finally{try{!i&&c.return&&c.return()}finally{if(s)throw l}}(0,O.default)(o,"OncoPrint"+n+"s.txt")});break;case"tabular":(0,C.default)([e.props.store.sampleKeyToSample,e.props.store.patientKeyToPatient],function(t,n){(0,L.default)(e.geneticTracks.result,e.clinicalTracks.result,e.heatmapTracks.result,e.oncoprint.getIdOrder(),"sample"===e.columnMode?function(e){return t[e].sampleId}:function(e){return n[e].patientId},e.columnMode,e.distinguishDrivers)})}},onSetHorzZoom:function(t){e.oncoprint.setHorzZoom(t)},onClickZoomIn:function(){e.oncoprint.setHorzZoom(e.oncoprint.getHorzZoom()/.7)},onClickZoomOut:function(){e.oncoprint.setHorzZoom(.7*e.oncoprint.getHorzZoom())}}}},{key:"initFromUrlParams",value:function(e){var t=this;if(e[X]&&(this.columnMode=e[X]&&"true"===e[X]?"sample":"patient"),e[J]){var n=e[J].split(";").map(function(e){return e.split(",")}),r=!0,o=!1,a=void 0;try{for(var i,s=n[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var l=i.value;this.addHeatmapTracks(l[0],l.slice(1))}}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}}if(e[Q]){e[Q].split(",").map(function(e){return t.selectedClinicalAttributeIds.set(e,!0)})}}},{key:"sortByData",value:function(){this.sortMode={type:"data"}}},{key:"addHeatmapTracks",value:function(e,t){var n=this.molecularProfileIdToHeatmapTracks.get(e);if(!n){var r=2,o=!0,a=!1,i=void 0;try{for(var s,l=this.molecularProfileIdToHeatmapTracks.values()[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var u=s.value;r=Math.max(r,u.trackGroupIndex+1)}}catch(e){a=!0,i=e}finally{try{!o&&l.return&&l.return()}finally{if(a)throw i}}n=(0,h.observable)({trackGroupIndex:r,molecularProfileId:e,genes:h.observable.shallowMap({})})}var c=!0,d=!1,p=void 0;try{for(var f,m=t[Symbol.iterator]();!(c=(f=m.next()).done);c=!0){var y=f.value;n.genes.set(y,!0)}}catch(e){d=!0,p=e}finally{try{!c&&m.return&&m.return()}finally{if(d)throw p}}this.molecularProfileIdToHeatmapTracks.set(e,n)}},{key:"toggleColumnMode",value:function(){"sample"===this.columnMode?this.controlsHandlers.onSelectColumnType&&this.controlsHandlers.onSelectColumnType("patient"):this.controlsHandlers.onSelectColumnType&&this.controlsHandlers.onSelectColumnType("sample")}},{key:"oncoprintRef",value:function(e){var t=this;this.oncoprint=e,this.props.addOnBecomeVisibleListener&&this.props.addOnBecomeVisibleListener(function(){return t.oncoprint.triggerPendingResizeAndOrganize(t.onReleaseRendering)}),this.oncoprint.onHorzZoom(function(e){return t.horzZoom=e}),this.horzZoom=this.oncoprint.getHorzZoom(),(0,C.default)([this.props.store.alteredSampleKeys,this.props.store.alteredPatientKeys],function(e,n){t.oncoprint.setHorzZoomToFit("sample"===t.columnMode?e:n)})}},{key:"setColumnMode",value:function(e){this.columnMode!==e&&(this.columnMode=e)}},{key:"onMinimapClose",value:function(){this.showMinimap=!1}},{key:"onSuppressRendering",value:function(){this.renderingComplete=!1}},{key:"onReleaseRendering",value:function(){this.renderingComplete=!0}},{key:"clinicalTrackKeyToAttributeId",value:function(e){return e.substr("CLINICALTRACK_".length)}},{key:"clinicalAttributeIdToTrackKey",value:function(e){return"CLINICALTRACK_"+e}},{key:"onChangeSelectedClinicalTracks",value:function(e){this.selectedClinicalAttributeIds.clear();var t=!0,n=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=o.value;this.selectedClinicalAttributeIds.set(i,!0)}}catch(e){n=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}}},{key:"onDeleteClinicalTrack",value:function(e){this.selectedClinicalAttributeIds.delete(this.clinicalTrackKeyToAttributeId(e))}},{key:"onTrackSortDirectionChange",value:function(e,t){1!==t&&-1!==t||this.sortByData()}},{key:"render",value:function(){return p.createElement("div",{style:{position:"relative",minHeight:this.isHidden?this.loadingIndicatorHeight:"auto"},className:"cbioportal-frontend"},p.createElement("div",{className:(0,V.default)("oncoprintLoadingIndicator",{hidden:!this.isHidden}),style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",minHeight:this.loadingIndicatorHeight}},p.createElement("div",null,this.loadingIndicatorMessage),p.createElement(A.default,{style:{display:"block"},isLoading:!0})),p.createElement("div",{className:(0,V.default)("oncoprintContainer",{fadeIn:!this.isHidden}),onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},this.caseSetInfo,this.oncoprint&&!this.oncoprint.webgl_unavailable&&p.createElement(H.default,{showByDefault:!0,show:this.mouseInsideBounds},p.createElement(b.default,{handlers:this.controlsHandlers,state:this.controlsState})),p.createElement("div",{style:{position:"relative"}},p.createElement("div",null,this.alterationInfo,p.createElement(g.default,{oncoprintRef:this.oncoprintRef,clinicalTracks:this.clinicalTracks.result,geneticTracks:this.geneticTracks.result,genesetHeatmapTracks:this.genesetHeatmapTracks.result,heatmapTracks:this.heatmapTracks.result,divId:this.props.divId,width:1050,suppressRendering:this.isLoading,onSuppressRendering:this.onSuppressRendering,onReleaseRendering:this.onReleaseRendering,hiddenIds:this.showUnalteredColumns?void 0:this.unalteredKeys.result,molecularProfileIdToMolecularProfile:this.props.store.molecularProfileIdToMolecularProfile.result,horzZoomToFitIds:this.horzZoomToFitIds,distinguishMutationType:this.distinguishMutationType,distinguishDrivers:this.distinguishDrivers,sortConfig:this.sortConfig,showClinicalTrackLegends:this.showClinicalTrackLegends,showWhitespaceBetweenColumns:this.showWhitespaceBetweenColumns,showMinimap:this.showMinimap,onMinimapClose:this.onMinimapClose,onDeleteClinicalTrack:this.onDeleteClinicalTrack,onTrackSortDirectionChange:this.onTrackSortDirectionChange})))))}},{key:"distinguishDrivers",get:function(){return this.props.store.mutationAnnotationSettings.oncoKb||this.props.store.mutationAnnotationSettings.hotspots||this.props.store.mutationAnnotationSettings.cbioportalCount||this.props.store.mutationAnnotationSettings.cosmicCount||this.props.store.mutationAnnotationSettings.driverFilter||this.props.store.mutationAnnotationSettings.driverTiers.entries().reduce(function(e,t){return e||t[1]},!1)}},{key:"heatmapIsDynamicallyQueried",get:function(){var e=this.props.store.molecularProfileIdToMolecularProfile.result;return e.hasOwnProperty(this.selectedHeatmapProfile)&&"GENESET_SCORE"!==e[this.selectedHeatmapProfile].molecularAlterationType}},{key:"isClusteredByCurrentSelectedHeatmapProfile",get:function(){return"heatmap"===this.sortMode.type&&this.selectedHeatmapProfile===this.sortMode.clusteredHeatmapProfile}},{key:"clinicalTracksUrlParam",get:function(){return this.selectedClinicalAttributeIds.keys().join(",")}},{key:"heatmapTrackGroupsUrlParam",get:function(){return x.default.sortBy(this.molecularProfileIdToHeatmapTracks.values(),function(e){return e.trackGroupIndex}).filter(function(e){return!!e.genes.size}).map(function(e){return e.molecularProfileId+","+e.genes.keys().join(",")}).join(";")}},{key:"horzZoomToFitIds",get:function(){return"sample"===this.columnMode&&this.props.store.alteredSampleKeys.isComplete?this.props.store.alteredSampleKeys.result:"patient"===this.columnMode&&this.props.store.alteredPatientKeys.isComplete?this.props.store.alteredPatientKeys.result:[]}},{key:"sortOrder",get:function(){return"alphabetical"===this.sortMode.type?"sample"===this.columnMode?this.alphabeticalSampleOrder:this.alphabeticalPatientOrder:"caseList"===this.sortMode.type?"sample"===this.columnMode&&this.props.store.givenSampleOrder.isComplete?this.props.store.givenSampleOrder.result.map(function(e){return e.uniqueSampleKey}):"patient"===this.columnMode&&this.props.store.givenSampleOrder.isComplete?this.props.store.givenSampleOrder.result.map(function(e){return e.uniquePatientKey}):void 0:void 0}},{key:"alphabeticalSampleOrder",get:function(){return this.props.store.samples.isComplete?x.default.sortBy(this.props.store.samples.result,function(e){return e.sampleId}).map(function(e){return e.uniqueSampleKey}):void 0}},{key:"alphabeticalPatientOrder",get:function(){return this.props.store.patients.isComplete?x.default.sortBy(this.props.store.patients.result,function(e){return e.patientId}).map(function(e){return e.uniquePatientKey}):void 0}},{key:"geneticTracks",get:function(){return"sample"===this.columnMode?this.sampleGeneticTracks:this.patientGeneticTracks}},{key:"clinicalTracks",get:function(){return"sample"===this.columnMode?this.sampleClinicalTracks:this.patientClinicalTracks}},{key:"heatmapTracks",get:function(){return"sample"===this.columnMode?this.sampleHeatmapTracks:this.patientHeatmapTracks}},{key:"genesetHeatmapTrackGroup",get:function(){return 1+Math.max.apply(Math,[y.GENETIC_TRACK_GROUP_INDEX].concat(a(this.heatmapTracks.result.map(function(e){return e.trackGroupIndex}))))}},{key:"genesetHeatmapTracks",get:function(){return"sample"===this.columnMode?this.sampleGenesetHeatmapTracks:this.patientGenesetHeatmapTracks}},{key:"clusterHeatmapTrackGroupIndex",get:function(){if("heatmap"===this.sortMode.type){var e=this.sortMode.clusteredHeatmapProfile;if(e===(this.props.store.genesetMolecularProfile.result&&this.props.store.genesetMolecularProfile.result.value&&this.props.store.genesetMolecularProfile.result.value.molecularProfileId))return this.genesetHeatmapTrackGroup;var t=this.molecularProfileIdToHeatmapTracks.get(e);return t&&t.trackGroupIndex}}},{key:"sortConfig",get:function(){return{sortByMutationType:this.sortByMutationType,sortByDrivers:this.sortByDrivers,order:this.sortOrder,clusterHeatmapTrackGroupIndex:this.clusterHeatmapTrackGroupIndex}}},{key:"headerColumnModeButton",get:function(){if(!this.props.store.samples.isComplete||!this.props.store.patients.isComplete||this.props.store.samples.result.length===this.props.store.patients.result.length)return null;var e=void 0,t=void 0;return"sample"===this.columnMode?(e="Show only one column per patient.",t="Each sample for each patient is in a separate column. Click to show only one column per patient"):(e="Show all samples",t="All samples from a patient are merged into one column. Click to split samples into multiple columns."),p.createElement(D.default,{overlay:p.createElement("div",{style:{maxWidth:"400px"}},t),placement:"top"},p.createElement(N.Button,{bsSize:"xs",bsStyle:"primary",style:{fontSize:"11px",display:"inline-block",color:"white",marginLeft:"5px"},onClick:this.toggleColumnMode},e))}},{key:"caseSetInfo",get:function(){var e=null;if(this.props.store.patients.isComplete&&this.props.store.samples.isComplete&&this.caseSetName.isComplete){var t=this.caseSetName.result||"User-defined Patient List",n=this.props.store.patients.result.length,r=this.props.store.samples.result.length;e=p.createElement("span",null,"Case Set: ",t," (",n," patients / ",r," samples)")}return p.createElement("div",null,e,this.headerColumnModeButton)}},{key:"alterationInfo",get:function(){var e="sample"===this.columnMode?this.props.store.alteredSampleKeys:this.props.store.alteredPatientKeys,t="sample"===this.columnMode?this.props.store.sequencedSampleKeys:this.props.store.sequencedPatientKeys,n="sample"===this.columnMode?this.props.store.samples:this.props.store.patients;return n.isComplete&&e.isComplete&&t.isComplete?p.createElement("span",{style:{marginTop:"15px",marginBottom:"15px",display:"block"}},"Altered in "+e.result.length+" ("+(0,_.percentAltered)(e.result.length,t.result.length)+") of "+t.result.length+" sequenced "+("sample"===this.columnMode?"samples":"cases/patients")+" ("+n.result.length+" total)"):null}},{key:"isLoading",get:function(){return this.clinicalTracks.isPending||this.geneticTracks.isPending||this.genesetHeatmapTracks.isPending||this.heatmapTracks.isPending}},{key:"isHidden",get:function(){return this.isLoading||!this.renderingComplete}},{key:"loadingIndicatorHeight",get:function(){return 300}},{key:"loadingIndicatorMessage",get:function(){return this.isLoading?"Downloading Oncoprint data...":this.renderingComplete?"":"Data downloaded. Rendering Oncoprint.."}}]),t}(p.Component);Z([h.observable],$.prototype,"columnMode",void 0),Z([h.observable],$.prototype,"sortMode",void 0),Z([h.observable],$.prototype,"distinguishMutationType",void 0),Z([h.observable],$.prototype,"sortByMutationType",void 0),Z([h.observable],$.prototype,"sortByDrivers",void 0),Z([h.observable],$.prototype,"showUnalteredColumns",void 0),Z([h.observable],$.prototype,"showWhitespaceBetweenColumns",void 0),Z([h.observable],$.prototype,"showClinicalTrackLegends",void 0),Z([h.observable],$.prototype,"showMinimap",void 0),Z([h.observable],$.prototype,"selectedHeatmapProfile",void 0),Z([h.observable],$.prototype,"heatmapGeneInputValue",void 0),Z([h.observable],$.prototype,"horzZoom",void 0),Z([h.observable],$.prototype,"mouseInsideBounds",void 0),Z([h.observable],$.prototype,"renderingComplete",void 0),Z([h.computed],$.prototype,"distinguishDrivers",null),Z([h.action],$.prototype,"selectHeatmapProfile",null),Z([h.action],$.prototype,"setAnnotateCBioPortalInputValue",null),Z([h.action],$.prototype,"setAnnotateCOSMICInputValue",null),Z([h.computed],$.prototype,"heatmapIsDynamicallyQueried",null),Z([h.action],$.prototype,"initFromUrlParams",null),Z([h.action],$.prototype,"sortByData",null),Z([h.computed],$.prototype,"isClusteredByCurrentSelectedHeatmapProfile",null),Z([h.computed],$.prototype,"clinicalTracksUrlParam",null),Z([h.computed],$.prototype,"heatmapTrackGroupsUrlParam",null),Z([h.computed],$.prototype,"horzZoomToFitIds",null),Z([h.action],$.prototype,"onSuppressRendering",null),Z([h.action],$.prototype,"onReleaseRendering",null),Z([h.action],$.prototype,"onChangeSelectedClinicalTracks",null),Z([h.computed],$.prototype,"sortOrder",null),Z([h.computed],$.prototype,"alphabeticalSampleOrder",null),Z([h.computed],$.prototype,"alphabeticalPatientOrder",null),Z([h.computed],$.prototype,"geneticTracks",null),Z([h.computed],$.prototype,"clinicalTracks",null),Z([h.computed],$.prototype,"heatmapTracks",null),Z([h.computed],$.prototype,"genesetHeatmapTrackGroup",null),Z([h.computed],$.prototype,"genesetHeatmapTracks",null),Z([h.computed],$.prototype,"clusterHeatmapTrackGroupIndex",null),Z([h.computed],$.prototype,"sortConfig",null),Z([h.computed],$.prototype,"headerColumnModeButton",null),Z([h.computed],$.prototype,"caseSetInfo",null),Z([h.computed],$.prototype,"alterationInfo",null),Z([h.computed],$.prototype,"isLoading",null),Z([h.computed],$.prototype,"isHidden",null),Z([h.computed],$.prototype,"loadingIndicatorMessage",null),$=Z([f.observer],$),t.default=$},function(e,t,n){(function(t){e.exports=function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=11)}([function(e,t,n){var r,o;!function(t,n){"object"==typeof e&&"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,function(n,a){function i(e){var t=!!e&&"length"in e&&e.length,n=ye.type(e);return"function"!==n&&!ye.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function s(e,t,n){if(ye.isFunction(t))return ye.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return ye.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(Ee.test(t))return ye.filter(t,e,n);t=ye.filter(t,e)}return ye.grep(e,function(e){return ye.inArray(e,t)>-1!==n})}function l(e,t){do{e=e[t]}while(e&&1!==e.nodeType);return e}function u(e){var t={};return ye.each(e.match(Pe)||[],function(e,n){t[n]=!0}),t}function c(){se.addEventListener?(se.removeEventListener("DOMContentLoaded",d),n.removeEventListener("load",d)):(se.detachEvent("onreadystatechange",d),n.detachEvent("onload",d))}function d(){(se.addEventListener||"load"===n.event.type||"complete"===se.readyState)&&(c(),ye.ready())}function p(e,t,n){if(void 0===n&&1===e.nodeType){var r="data-"+t.replace(Re,"-$1").toLowerCase();if("string"==typeof(n=e.getAttribute(r))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:Ne.test(n)?ye.parseJSON(n):n)}catch(e){}ye.data(e,t,n)}else n=void 0}return n}function f(e){var t;for(t in e)if(("data"!==t||!ye.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function h(e,t,n,r){if(De(e)){var o,a,i=ye.expando,s=e.nodeType,l=s?ye.cache:e,u=s?e[i]:e[i]&&i;if(u&&l[u]&&(r||l[u].data)||void 0!==n||"string"!=typeof t)return u||(u=s?e[i]=ie.pop()||ye.guid++:i),l[u]||(l[u]=s?{}:{toJSON:ye.noop}),"object"!=typeof t&&"function"!=typeof t||(r?l[u]=ye.extend(l[u],t):l[u].data=ye.extend(l[u].data,t)),a=l[u],r||(a.data||(a.data={}),a=a.data),void 0!==n&&(a[ye.camelCase(t)]=n),"string"==typeof t?null==(o=a[t])&&(o=a[ye.camelCase(t)]):o=a,o}}function m(e,t,n){if(De(e)){var r,o,a=e.nodeType,i=a?ye.cache:e,s=a?e[ye.expando]:ye.expando;if(i[s]){if(t&&(r=n?i[s]:i[s].data)){ye.isArray(t)?t=t.concat(ye.map(t,ye.camelCase)):t in r?t=[t]:(t=ye.camelCase(t),t=t in r?[t]:t.split(" ")),o=t.length;for(;o--;)delete r[t[o]];if(n?!f(r):!ye.isEmptyObject(r))return}(n||(delete i[s].data,f(i[s])))&&(a?ye.cleanData([e],!0):me.deleteExpando||i!=i.window?delete i[s]:i[s]=void 0)}}}function y(e,t,n,r){var o,a=1,i=20,s=r?function(){return r.cur()}:function(){return ye.css(e,t,"")},l=s(),u=n&&n[3]||(ye.cssNumber[t]?"":"px"),c=(ye.cssNumber[t]||"px"!==u&&+l)&&Fe.exec(ye.css(e,t));if(c&&c[3]!==u){u=u||c[3],n=n||[],c=+l||1;do{a=a||".5",c/=a,ye.style(e,t,c+u)}while(a!==(a=s()/l)&&1!==a&&--i)}return n&&(c=+c||+l||0,o=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=u,r.start=c,r.end=o)),o}function g(e){var t=We.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function v(e,t){var n,r,o=0,a=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):void 0;if(!a)for(a=[],n=e.childNodes||e;null!=(r=n[o]);o++)!t||ye.nodeName(r,t)?a.push(r):ye.merge(a,v(r,t));return void 0===t||t&&ye.nodeName(e,t)?ye.merge([e],a):a}function b(e,t){for(var n,r=0;null!=(n=e[r]);r++)ye._data(n,"globalEval",!t||ye._data(t[r],"globalEval"))}function _(e){Ge.test(e.type)&&(e.defaultChecked=e.checked)}function w(e,t,n,r,o){for(var a,i,s,l,u,c,d,p=e.length,f=g(t),h=[],m=0;m<p;m++)if((i=e[m])||0===i)if("object"===ye.type(i))ye.merge(h,i.nodeType?[i]:i);else if(Ye.test(i)){for(l=l||f.appendChild(t.createElement("div")),u=(He.exec(i)||["",""])[1].toLowerCase(),d=Ze[u]||Ze._default,l.innerHTML=d[1]+ye.htmlPrefilter(i)+d[2],a=d[0];a--;)l=l.lastChild;if(!me.leadingWhitespace&&qe.test(i)&&h.push(t.createTextNode(qe.exec(i)[0])),!me.tbody)for(i="table"!==u||Ke.test(i)?"<table>"!==d[1]||Ke.test(i)?0:l:l.firstChild,a=i&&i.childNodes.length;a--;)ye.nodeName(c=i.childNodes[a],"tbody")&&!c.childNodes.length&&i.removeChild(c);for(ye.merge(h,l.childNodes),l.textContent="";l.firstChild;)l.removeChild(l.firstChild);l=f.lastChild}else h.push(t.createTextNode(i));for(l&&f.removeChild(l),me.appendChecked||ye.grep(v(h,"input"),_),m=0;i=h[m++];)if(r&&ye.inArray(i,r)>-1)o&&o.push(i);else if(s=ye.contains(i.ownerDocument,i),l=v(f.appendChild(i),"script"),s&&b(l),n)for(a=0;i=l[a++];)Ue.test(i.type||"")&&n.push(i);return l=null,f}function x(){return!0}function S(){return!1}function C(){try{return se.activeElement}catch(e){}}function k(e,t,n,r,o,a){var i,s;if("object"==typeof t){"string"!=typeof n&&(r=r||n,n=void 0);for(s in t)k(e,s,n,r,t[s],a);return e}if(null==r&&null==o?(o=n,r=n=void 0):null==o&&("string"==typeof n?(o=r,r=void 0):(o=r,r=n,n=void 0)),!1===o)o=S;else if(!o)return e;return 1===a&&(i=o,o=function(e){return ye().off(e),i.apply(this,arguments)},o.guid=i.guid||(i.guid=ye.guid++)),e.each(function(){ye.event.add(this,t,o,r,n)})}function E(e,t){return ye.nodeName(e,"table")&&ye.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function M(e){return e.type=(null!==ye.find.attr(e,"type"))+"/"+e.type,e}function A(e){var t=it.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function T(e,t){if(1===t.nodeType&&ye.hasData(e)){var n,r,o,a=ye._data(e),i=ye._data(t,a),s=a.events;if(s){delete i.handle,i.events={};for(n in s)for(r=0,o=s[n].length;r<o;r++)ye.event.add(t,n,s[n][r])}i.data&&(i.data=ye.extend({},i.data))}}function O(e,t){var n,r,o;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!me.noCloneEvent&&t[ye.expando]){o=ye._data(t);for(r in o.events)ye.removeEvent(t,r,o.handle);t.removeAttribute(ye.expando)}"script"===n&&t.text!==e.text?(M(t).text=e.text,A(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),me.html5Clone&&e.innerHTML&&!ye.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Ge.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}}function P(e,t,n,r){t=ue.apply([],t);var o,a,i,s,l,u,c=0,d=e.length,p=d-1,f=t[0],h=ye.isFunction(f);if(h||d>1&&"string"==typeof f&&!me.checkClone&&at.test(f))return e.each(function(o){var a=e.eq(o);h&&(t[0]=f.call(this,o,a.html())),P(a,t,n,r)});if(d&&(u=w(t,e[0].ownerDocument,!1,e,r),o=u.firstChild,1===u.childNodes.length&&(u=o),o||r)){for(s=ye.map(v(u,"script"),M),i=s.length;c<d;c++)a=u,c!==p&&(a=ye.clone(a,!0,!0),i&&ye.merge(s,v(a,"script"))),n.call(e[c],a,c);if(i)for(l=s[s.length-1].ownerDocument,ye.map(s,A),c=0;c<i;c++)a=s[c],Ue.test(a.type||"")&&!ye._data(a,"globalEval")&&ye.contains(l,a)&&(a.src?ye._evalUrl&&ye._evalUrl(a.src):ye.globalEval((a.text||a.textContent||a.innerHTML||"").replace(st,"")));u=o=null}return e}function j(e,t,n){for(var r,o=t?ye.filter(t,e):e,a=0;null!=(r=o[a]);a++)n||1!==r.nodeType||ye.cleanData(v(r)),r.parentNode&&(n&&ye.contains(r.ownerDocument,r)&&b(v(r,"script")),r.parentNode.removeChild(r));return e}function I(e,t){var n=ye(t.createElement(e)).appendTo(t.body),r=ye.css(n[0],"display");return n.detach(),r}function D(e){var t=se,n=dt[e];return n||(n=I(e,t),"none"!==n&&n||(ct=(ct||ye("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=(ct[0].contentWindow||ct[0].contentDocument).document,t.write(),t.close(),n=I(e,t),ct.detach()),dt[e]=n),n}function N(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function R(e){if(e in Et)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=kt.length;n--;)if((e=kt[n]+t)in Et)return e}function L(e,t){for(var n,r,o,a=[],i=0,s=e.length;i<s;i++)r=e[i],r.style&&(a[i]=ye._data(r,"olddisplay"),n=r.style.display,t?(a[i]||"none"!==n||(r.style.display=""),""===r.style.display&&Be(r)&&(a[i]=ye._data(r,"olddisplay",D(r.nodeName)))):(o=Be(r),(n&&"none"!==n||!o)&&ye._data(r,"olddisplay",o?n:ye.css(r,"display"))));for(i=0;i<s;i++)r=e[i],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?a[i]||"":"none"));return e}function F(e,t,n){var r=xt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function z(e,t,n,r,o){for(var a=n===(r?"border":"content")?4:"width"===t?1:0,i=0;a<4;a+=2)"margin"===n&&(i+=ye.css(e,n+ze[a],!0,o)),r?("content"===n&&(i-=ye.css(e,"padding"+ze[a],!0,o)),"margin"!==n&&(i-=ye.css(e,"border"+ze[a]+"Width",!0,o))):(i+=ye.css(e,"padding"+ze[a],!0,o),"padding"!==n&&(i+=ye.css(e,"border"+ze[a]+"Width",!0,o)));return i}function B(e,t,n){var r=!0,o="width"===t?e.offsetWidth:e.offsetHeight,a=yt(e),i=me.boxSizing&&"border-box"===ye.css(e,"boxSizing",!1,a);if(o<=0||null==o){if(o=gt(e,t,a),(o<0||null==o)&&(o=e.style[t]),ft.test(o))return o;r=i&&(me.boxSizingReliable()||o===e.style[t]),o=parseFloat(o)||0}return o+z(e,t,n||(i?"border":"content"),r,a)+"px"}function V(e,t,n,r,o){return new V.prototype.init(e,t,n,r,o)}function G(){return n.setTimeout(function(){Mt=void 0}),Mt=ye.now()}function H(e,t){var n,r={height:e},o=0;for(t=t?1:0;o<4;o+=2-t)n=ze[o],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function U(e,t,n){for(var r,o=(Z.tweeners[t]||[]).concat(Z.tweeners["*"]),a=0,i=o.length;a<i;a++)if(r=o[a].call(n,t,e))return r}function q(e,t,n){var r,o,a,i,s,l,u,c=this,d={},p=e.style,f=e.nodeType&&Be(e),h=ye._data(e,"fxshow");n.queue||(s=ye._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,c.always(function(){c.always(function(){s.unqueued--,ye.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],u=ye.css(e,"display"),"inline"===("none"===u?ye._data(e,"olddisplay")||D(e.nodeName):u)&&"none"===ye.css(e,"float")&&(me.inlineBlockNeedsLayout&&"inline"!==D(e.nodeName)?p.zoom=1:p.display="inline-block")),n.overflow&&(p.overflow="hidden",me.shrinkWrapBlocks()||c.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(r in t)if(o=t[r],Tt.exec(o)){if(delete t[r],a=a||"toggle"===o,o===(f?"hide":"show")){if("show"!==o||!h||void 0===h[r])continue;f=!0}d[r]=h&&h[r]||ye.style(e,r)}else u=void 0;if(ye.isEmptyObject(d))"inline"===("none"===u?D(e.nodeName):u)&&(p.display=u);else{h?"hidden"in h&&(f=h.hidden):h=ye._data(e,"fxshow",{}),a&&(h.hidden=!f),f?ye(e).show():c.done(function(){ye(e).hide()}),c.done(function(){var t;ye._removeData(e,"fxshow");for(t in d)ye.style(e,t,d[t])});for(r in d)i=U(f?h[r]:0,r,c),r in h||(h[r]=i.start,f&&(i.end=i.start,i.start="width"===r||"height"===r?1:0))}}function W(e,t){var n,r,o,a,i;for(n in e)if(r=ye.camelCase(n),o=t[r],a=e[n],ye.isArray(a)&&(o=a[1],a=e[n]=a[0]),n!==r&&(e[r]=a,delete e[n]),(i=ye.cssHooks[r])&&"expand"in i){a=i.expand(a),delete e[r];for(n in a)n in e||(e[n]=a[n],t[n]=o)}else t[r]=o}function Z(e,t,n){var r,o,a=0,i=Z.prefilters.length,s=ye.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var t=Mt||G(),n=Math.max(0,u.startTime+u.duration-t),r=n/u.duration||0,a=1-r,i=0,l=u.tweens.length;i<l;i++)u.tweens[i].run(a);return s.notifyWith(e,[u,a,n]),a<1&&l?n:(s.resolveWith(e,[u]),!1)},u=s.promise({elem:e,props:ye.extend({},t),opts:ye.extend(!0,{specialEasing:{},easing:ye.easing._default},n),originalProperties:t,originalOptions:n,startTime:Mt||G(),duration:n.duration,tweens:[],createTween:function(t,n){var r=ye.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(r),r},stop:function(t){var n=0,r=t?u.tweens.length:0;if(o)return this;for(o=!0;n<r;n++)u.tweens[n].run(1);return t?(s.notifyWith(e,[u,1,0]),s.resolveWith(e,[u,t])):s.rejectWith(e,[u,t]),this}}),c=u.props;for(W(c,u.opts.specialEasing);a<i;a++)if(r=Z.prefilters[a].call(u,e,c,u.opts))return ye.isFunction(r.stop)&&(ye._queueHooks(u.elem,u.opts.queue).stop=ye.proxy(r.stop,r)),r;return ye.map(c,U,u),ye.isFunction(u.opts.start)&&u.opts.start.call(e,u),ye.fx.timer(ye.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function Y(e){return ye.attr(e,"class")||""}function K(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,o=0,a=t.toLowerCase().match(Pe)||[];if(ye.isFunction(n))for(;r=a[o++];)"+"===r.charAt(0)?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function X(e,t,n,r){function o(s){var l;return a[s]=!0,ye.each(e[s]||[],function(e,s){var u=s(t,n,r);return"string"!=typeof u||i||a[u]?i?!(l=u):void 0:(t.dataTypes.unshift(u),o(u),!1)}),l}var a={},i=e===en;return o(t.dataTypes[0])||!a["*"]&&o("*")}function Q(e,t){var n,r,o=ye.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((o[r]?e:n||(n={}))[r]=t[r]);return n&&ye.extend(!0,e,n),e}function J(e,t,n){for(var r,o,a,i,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===o&&(o=e.mimeType||t.getResponseHeader("Content-Type"));if(o)for(i in s)if(s[i]&&s[i].test(o)){l.unshift(i);break}if(l[0]in n)a=l[0];else{for(i in n){if(!l[0]||e.converters[i+" "+l[0]]){a=i;break}r||(r=i)}a=a||r}if(a)return a!==l[0]&&l.unshift(a),n[a]}function $(e,t,n,r){var o,a,i,s,l,u={},c=e.dataTypes.slice();if(c[1])for(i in e.converters)u[i.toLowerCase()]=e.converters[i];for(a=c.shift();a;)if(e.responseFields[a]&&(n[e.responseFields[a]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=a,a=c.shift())if("*"===a)a=l;else if("*"!==l&&l!==a){if(!(i=u[l+" "+a]||u["* "+a]))for(o in u)if(s=o.split(" "),s[1]===a&&(i=u[l+" "+s[0]]||u["* "+s[0]])){!0===i?i=u[o]:!0!==u[o]&&(a=s[0],c.unshift(s[1]));break}if(!0!==i)if(i&&e.throws)t=i(t);else try{t=i(t)}catch(e){return{state:"parsererror",error:i?e:"No conversion from "+l+" to "+a}}}return{state:"success",data:t}}function ee(e){return e.style&&e.style.display||ye.css(e,"display")}function te(e){if(!ye.contains(e.ownerDocument||se,e))return!0;for(;e&&1===e.nodeType;){if("none"===ee(e)||"hidden"===e.type)return!0;e=e.parentNode}return!1}function ne(e,t,n,r){var o;if(ye.isArray(t))ye.each(t,function(t,o){n||an.test(e)?r(e,o):ne(e+"["+("object"==typeof o&&null!=o?t:"")+"]",o,n,r)});else if(n||"object"!==ye.type(t))r(e,t);else for(o in t)ne(e+"["+o+"]",t[o],n,r)}function re(){try{return new n.XMLHttpRequest}catch(e){}}function oe(){try{return new n.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function ae(e){return ye.isWindow(e)?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}var ie=[],se=n.document,le=ie.slice,ue=ie.concat,ce=ie.push,de=ie.indexOf,pe={},fe=pe.toString,he=pe.hasOwnProperty,me={},ye=function(e,t){return new ye.fn.init(e,t)},ge=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ve=/^-ms-/,be=/-([\da-z])/gi,_e=function(e,t){return t.toUpperCase()};ye.fn=ye.prototype={jquery:"1.12.4",constructor:ye,selector:"",length:0,toArray:function(){return le.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:le.call(this)},pushStack:function(e){var t=ye.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return ye.each(this,e)},map:function(e){return this.pushStack(ye.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(le.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:ce,sort:ie.sort,splice:ie.splice},ye.extend=ye.fn.extend=function(){var e,t,n,r,o,a,i=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof i&&(u=i,i=arguments[s]||{},s++),"object"==typeof i||ye.isFunction(i)||(i={}),s===l&&(i=this,s--);s<l;s++)if(null!=(o=arguments[s]))for(r in o)e=i[r],n=o[r],i!==n&&(u&&n&&(ye.isPlainObject(n)||(t=ye.isArray(n)))?(t?(t=!1,a=e&&ye.isArray(e)?e:[]):a=e&&ye.isPlainObject(e)?e:{},i[r]=ye.extend(u,a,n)):void 0!==n&&(i[r]=n));return i},ye.extend({expando:"jQuery"+("1.12.4"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===ye.type(e)},isArray:Array.isArray||function(e){return"array"===ye.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){var t=e&&e.toString();return!ye.isArray(e)&&t-parseFloat(t)+1>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==ye.type(e)||e.nodeType||ye.isWindow(e))return!1;try{if(e.constructor&&!he.call(e,"constructor")&&!he.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}if(!me.ownFirst)for(t in e)return he.call(e,t);for(t in e);return void 0===t||he.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?pe[fe.call(e)]||"object":typeof e},globalEval:function(e){e&&ye.trim(e)&&(n.execScript||function(e){n.eval.call(n,e)})(e)},camelCase:function(e){return e.replace(ve,"ms-").replace(be,_e)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var n,r=0;if(i(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(ge,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(i(Object(e))?ye.merge(n,"string"==typeof e?[e]:e):ce.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(de)return de.call(t,e,n);for(r=t.length,n=n?n<0?Math.max(0,r+n):n:0;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){for(var n=+t.length,r=0,o=e.length;r<n;)e[o++]=t[r++];if(n!==n)for(;void 0!==t[r];)e[o++]=t[r++];return e.length=o,e},grep:function(e,t,n){for(var r=[],o=0,a=e.length,i=!n;o<a;o++)!t(e[o],o)!==i&&r.push(e[o]);return r},map:function(e,t,n){var r,o,a=0,s=[];if(i(e))for(r=e.length;a<r;a++)null!=(o=t(e[a],a,n))&&s.push(o);else for(a in e)null!=(o=t(e[a],a,n))&&s.push(o);return ue.apply([],s)},guid:1,proxy:function(e,t){var n,r,o;if("string"==typeof t&&(o=e[t],t=e,e=o),ye.isFunction(e))return n=le.call(arguments,2),r=function(){return e.apply(t||this,n.concat(le.call(arguments)))},r.guid=e.guid=e.guid||ye.guid++,r},now:function(){return+new Date},support:me}),"function"==typeof Symbol&&(ye.fn[Symbol.iterator]=ie[Symbol.iterator]),ye.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){pe["[object "+t+"]"]=t.toLowerCase()});var we=function(e){function t(e,t,n,r){var o,a,i,s,u,d,p,f,h=t&&t.ownerDocument,m=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==m&&9!==m&&11!==m)return n;if(!r&&((t?t.ownerDocument||t:F)!==O&&T(t),t=t||O,j)){if(11!==m&&(d=me.exec(e)))if(o=d[1]){if(9===m){if(!(i=t.getElementById(o)))return n;if(i.id===o)return n.push(i),n}else if(h&&(i=h.getElementById(o))&&R(t,i)&&i.id===o)return n.push(i),n}else{if(d[2])return X.apply(n,t.getElementsByTagName(e)),n;if((o=d[3])&&b.getElementsByClassName&&t.getElementsByClassName)return X.apply(n,t.getElementsByClassName(o)),n}if(b.qsa&&!H[e+" "]&&(!I||!I.test(e))){if(1!==m)h=t,f=e;else if("object"!==t.nodeName.toLowerCase()){for((s=t.getAttribute("id"))?s=s.replace(ge,"\\$&"):t.setAttribute("id",s=L),p=S(e),a=p.length,u=ce.test(s)?"#"+s:"[id='"+s+"']";a--;)p[a]=u+" "+c(p[a]);f=p.join(","),h=ye.test(e)&&l(t.parentNode)||t}if(f)try{return X.apply(n,h.querySelectorAll(f)),n}catch(e){}finally{s===L&&t.removeAttribute("id")}}}return k(e.replace(ae,"$1"),t,n,r)}function n(){function e(n,r){return t.push(n+" ")>_.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[L]=!0,e}function o(e){var t=O.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function a(e,t){for(var n=e.split("|"),r=n.length;r--;)_.attrHandle[n[r]]=t}function i(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||q)-(~e.sourceIndex||q);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return r(function(t){return t=+t,r(function(n,r){for(var o,a=e([],n.length,t),i=a.length;i--;)n[o=a[i]]&&(n[o]=!(r[o]=n[o]))})})}function l(e){return e&&void 0!==e.getElementsByTagName&&e}function u(){}function c(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function d(e,t,n){var r=t.dir,o=n&&"parentNode"===r,a=B++;return t.first?function(t,n,a){for(;t=t[r];)if(1===t.nodeType||o)return e(t,n,a)}:function(t,n,i){var s,l,u,c=[z,a];if(i){for(;t=t[r];)if((1===t.nodeType||o)&&e(t,n,i))return!0}else for(;t=t[r];)if(1===t.nodeType||o){if(u=t[L]||(t[L]={}),l=u[t.uniqueID]||(u[t.uniqueID]={}),(s=l[r])&&s[0]===z&&s[1]===a)return c[2]=s[2];if(l[r]=c,c[2]=e(t,n,i))return!0}}}function p(e){return e.length>1?function(t,n,r){for(var o=e.length;o--;)if(!e[o](t,n,r))return!1;return!0}:e[0]}function f(e,n,r){for(var o=0,a=n.length;o<a;o++)t(e,n[o],r);return r}function h(e,t,n,r,o){for(var a,i=[],s=0,l=e.length,u=null!=t;s<l;s++)(a=e[s])&&(n&&!n(a,r,o)||(i.push(a),u&&t.push(s)));return i}function m(e,t,n,o,a,i){return o&&!o[L]&&(o=m(o)),a&&!a[L]&&(a=m(a,i)),r(function(r,i,s,l){var u,c,d,p=[],m=[],y=i.length,g=r||f(t||"*",s.nodeType?[s]:s,[]),v=!e||!r&&t?g:h(g,p,e,s,l),b=n?a||(r?e:y||o)?[]:i:v;if(n&&n(v,b,s,l),o)for(u=h(b,m),o(u,[],s,l),c=u.length;c--;)(d=u[c])&&(b[m[c]]=!(v[m[c]]=d));if(r){if(a||e){if(a){for(u=[],c=b.length;c--;)(d=b[c])&&u.push(v[c]=d);a(null,b=[],u,l)}for(c=b.length;c--;)(d=b[c])&&(u=a?J(r,d):p[c])>-1&&(r[u]=!(i[u]=d))}}else b=h(b===i?b.splice(y,b.length):b),a?a(null,i,b,l):X.apply(i,b)})}function y(e){for(var t,n,r,o=e.length,a=_.relative[e[0].type],i=a||_.relative[" "],s=a?1:0,l=d(function(e){return e===t},i,!0),u=d(function(e){return J(t,e)>-1},i,!0),f=[function(e,n,r){var o=!a&&(r||n!==E)||((t=n).nodeType?l(e,n,r):u(e,n,r));return t=null,o}];s<o;s++)if(n=_.relative[e[s].type])f=[d(p(f),n)];else{if(n=_.filter[e[s].type].apply(null,e[s].matches),n[L]){for(r=++s;r<o&&!_.relative[e[r].type];r++);return m(s>1&&p(f),s>1&&c(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(ae,"$1"),n,s<r&&y(e.slice(s,r)),r<o&&y(e=e.slice(r)),r<o&&c(e))}f.push(n)}return p(f)}function g(e,n){var o=n.length>0,a=e.length>0,i=function(r,i,s,l,u){var c,d,p,f=0,m="0",y=r&&[],g=[],v=E,b=r||a&&_.find.TAG("*",u),w=z+=null==v?1:Math.random()||.1,x=b.length;for(u&&(E=i===O||i||u);m!==x&&null!=(c=b[m]);m++){if(a&&c){for(d=0,i||c.ownerDocument===O||(T(c),s=!j);p=e[d++];)if(p(c,i||O,s)){l.push(c);break}u&&(z=w)}o&&((c=!p&&c)&&f--,r&&y.push(c))}if(f+=m,o&&m!==f){for(d=0;p=n[d++];)p(y,g,i,s);if(r){if(f>0)for(;m--;)y[m]||g[m]||(g[m]=Y.call(l));g=h(g)}X.apply(l,g),u&&!r&&g.length>0&&f+n.length>1&&t.uniqueSort(l)}return u&&(z=w,E=v),y};return o?r(i):i}var v,b,_,w,x,S,C,k,E,M,A,T,O,P,j,I,D,N,R,L="sizzle"+1*new Date,F=e.document,z=0,B=0,V=n(),G=n(),H=n(),U=function(e,t){return e===t&&(A=!0),0},q=1<<31,W={}.hasOwnProperty,Z=[],Y=Z.pop,K=Z.push,X=Z.push,Q=Z.slice,J=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},$="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ee="[\\x20\\t\\r\\n\\f]",te="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ne="\\["+ee+"*("+te+")(?:"+ee+"*([*^$|!~]?=)"+ee+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+te+"))|)"+ee+"*\\]",re=":("+te+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ne+")*)|.*)\\)|)",oe=new RegExp(ee+"+","g"),ae=new RegExp("^"+ee+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ee+"+$","g"),ie=new RegExp("^"+ee+"*,"+ee+"*"),se=new RegExp("^"+ee+"*([>+~]|"+ee+")"+ee+"*"),le=new RegExp("="+ee+"*([^\\]'\"]*?)"+ee+"*\\]","g"),ue=new RegExp(re),ce=new RegExp("^"+te+"$"),de={ID:new RegExp("^#("+te+")"),CLASS:new RegExp("^\\.("+te+")"),TAG:new RegExp("^("+te+"|[*])"),ATTR:new RegExp("^"+ne),PSEUDO:new RegExp("^"+re),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ee+"*(even|odd|(([+-]|)(\\d*)n|)"+ee+"*(?:([+-]|)"+ee+"*(\\d+)|))"+ee+"*\\)|)","i"),bool:new RegExp("^(?:"+$+")$","i"),needsContext:new RegExp("^"+ee+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ee+"*((?:-\\d)?\\d*)"+ee+"*\\)|)(?=[^-]|$)","i")},pe=/^(?:input|select|textarea|button)$/i,fe=/^h\d$/i,he=/^[^{]+\{\s*\[native \w/,me=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ye=/[+~]/,ge=/'|\\/g,ve=new RegExp("\\\\([\\da-f]{1,6}"+ee+"?|("+ee+")|.)","ig"),be=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},_e=function(){T()};try{X.apply(Z=Q.call(F.childNodes),F.childNodes),Z[F.childNodes.length].nodeType}catch(e){X={apply:Z.length?function(e,t){K.apply(e,Q.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}b=t.support={},x=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},T=t.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:F;return r!==O&&9===r.nodeType&&r.documentElement?(O=r,P=O.documentElement,j=!x(O),(n=O.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",_e,!1):n.attachEvent&&n.attachEvent("onunload",_e)),b.attributes=o(function(e){return e.className="i",!e.getAttribute("className")}),b.getElementsByTagName=o(function(e){return e.appendChild(O.createComment("")),!e.getElementsByTagName("*").length}),b.getElementsByClassName=he.test(O.getElementsByClassName),b.getById=o(function(e){return P.appendChild(e).id=L,!O.getElementsByName||!O.getElementsByName(L).length}),b.getById?(_.find.ID=function(e,t){if(void 0!==t.getElementById&&j){var n=t.getElementById(e);return n?[n]:[]}},_.filter.ID=function(e){var t=e.replace(ve,be);return function(e){return e.getAttribute("id")===t}}):(delete _.find.ID,_.filter.ID=function(e){var t=e.replace(ve,be);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),_.find.TAG=b.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):b.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],o=0,a=t.getElementsByTagName(e);if("*"===e){for(;n=a[o++];)1===n.nodeType&&r.push(n);return r}return a},_.find.CLASS=b.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&j)return t.getElementsByClassName(e)},D=[],I=[],(b.qsa=he.test(O.querySelectorAll))&&(o(function(e){P.appendChild(e).innerHTML="<a id='"+L+"'></a><select id='"+L+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&I.push("[*^$]="+ee+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||I.push("\\["+ee+"*(?:value|"+$+")"),e.querySelectorAll("[id~="+L+"-]").length||I.push("~="),e.querySelectorAll(":checked").length||I.push(":checked"),e.querySelectorAll("a#"+L+"+*").length||I.push(".#.+[+~]")}),o(function(e){var t=O.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&I.push("name"+ee+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||I.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),I.push(",.*:")})),(b.matchesSelector=he.test(N=P.matches||P.webkitMatchesSelector||P.mozMatchesSelector||P.oMatchesSelector||P.msMatchesSelector))&&o(function(e){b.disconnectedMatch=N.call(e,"div"),N.call(e,"[s!='']:x"),D.push("!=",re)}),I=I.length&&new RegExp(I.join("|")),D=D.length&&new RegExp(D.join("|")),t=he.test(P.compareDocumentPosition),R=t||he.test(P.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},U=t?function(e,t){if(e===t)return A=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!b.sortDetached&&t.compareDocumentPosition(e)===n?e===O||e.ownerDocument===F&&R(F,e)?-1:t===O||t.ownerDocument===F&&R(F,t)?1:M?J(M,e)-J(M,t):0:4&n?-1:1)}:function(e,t){if(e===t)return A=!0,0;var n,r=0,o=e.parentNode,a=t.parentNode,s=[e],l=[t];if(!o||!a)return e===O?-1:t===O?1:o?-1:a?1:M?J(M,e)-J(M,t):0;if(o===a)return i(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)l.unshift(n);for(;s[r]===l[r];)r++;return r?i(s[r],l[r]):s[r]===F?-1:l[r]===F?1:0},O):O},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==O&&T(e),n=n.replace(le,"='$1']"),b.matchesSelector&&j&&!H[n+" "]&&(!D||!D.test(n))&&(!I||!I.test(n)))try{var r=N.call(e,n);if(r||b.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){}return t(n,O,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==O&&T(e),R(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==O&&T(e);var n=_.attrHandle[t.toLowerCase()],r=n&&W.call(_.attrHandle,t.toLowerCase())?n(e,t,!j):void 0;return void 0!==r?r:b.attributes||!j?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],r=0,o=0;if(A=!b.detectDuplicates,M=!b.sortStable&&e.slice(0),e.sort(U),A){for(;t=e[o++];)t===e[o]&&(r=n.push(o));for(;r--;)e.splice(n[r],1)}return M=null,e},w=t.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=w(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[r++];)n+=w(t);return n},_=t.selectors={cacheLength:50,createPseudo:r,match:de,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ve,be),e[3]=(e[3]||e[4]||e[5]||"").replace(ve,be),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return de.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&ue.test(n)&&(t=S(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ve,be).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=V[e+" "];return t||(t=new RegExp("(^|"+ee+")"+e+"("+ee+"|$)"))&&V(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,r){return function(o){var a=t.attr(o,e);return null==a?"!="===n:!n||(a+="","="===n?a===r:"!="===n?a!==r:"^="===n?r&&0===a.indexOf(r):"*="===n?r&&a.indexOf(r)>-1:"$="===n?r&&a.slice(-r.length)===r:"~="===n?(" "+a.replace(oe," ")+" ").indexOf(r)>-1:"|="===n&&(a===r||a.slice(0,r.length+1)===r+"-"))}},CHILD:function(e,t,n,r,o){var a="nth"!==e.slice(0,3),i="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===o?function(e){return!!e.parentNode}:function(t,n,l){var u,c,d,p,f,h,m=a!==i?"nextSibling":"previousSibling",y=t.parentNode,g=s&&t.nodeName.toLowerCase(),v=!l&&!s,b=!1;if(y){if(a){for(;m;){for(p=t;p=p[m];)if(s?p.nodeName.toLowerCase()===g:1===p.nodeType)return!1;h=m="only"===e&&!h&&"nextSibling"}return!0}if(h=[i?y.firstChild:y.lastChild],i&&v){for(p=y,d=p[L]||(p[L]={}),c=d[p.uniqueID]||(d[p.uniqueID]={}),u=c[e]||[],f=u[0]===z&&u[1],b=f&&u[2],p=f&&y.childNodes[f];p=++f&&p&&p[m]||(b=f=0)||h.pop();)if(1===p.nodeType&&++b&&p===t){c[e]=[z,f,b];break}}else if(v&&(p=t,d=p[L]||(p[L]={}),c=d[p.uniqueID]||(d[p.uniqueID]={}),u=c[e]||[],f=u[0]===z&&u[1],b=f),!1===b)for(;(p=++f&&p&&p[m]||(b=f=0)||h.pop())&&((s?p.nodeName.toLowerCase()!==g:1!==p.nodeType)||!++b||(v&&(d=p[L]||(p[L]={}),c=d[p.uniqueID]||(d[p.uniqueID]={}),c[e]=[z,b]),p!==t)););return(b-=o)===r||b%r==0&&b/r>=0}}},PSEUDO:function(e,n){var o,a=_.pseudos[e]||_.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return a[L]?a(n):a.length>1?(o=[e,e,"",n],_.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){for(var r,o=a(e,n),i=o.length;i--;)r=J(e,o[i]),e[r]=!(t[r]=o[i])}):function(e){return a(e,0,o)}):a}},pseudos:{not:r(function(e){var t=[],n=[],o=C(e.replace(ae,"$1"));return o[L]?r(function(e,t,n,r){for(var a,i=o(e,null,r,[]),s=e.length;s--;)(a=i[s])&&(e[s]=!(t[s]=a))}):function(e,r,a){return t[0]=e,o(t,null,a,n),t[0]=null,!n.pop()}}),has:r(function(e){return function(n){return t(e,n).length>0}}),contains:r(function(e){return e=e.replace(ve,be),function(t){return(t.textContent||t.innerText||w(t)).indexOf(e)>-1}}),lang:r(function(e){return ce.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(ve,be).toLowerCase(),function(t){var n;do{if(n=j?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===P},focus:function(e){return e===O.activeElement&&(!O.hasFocus||O.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!_.pseudos.empty(e)},header:function(e){return fe.test(e.nodeName)},input:function(e){return pe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:s(function(){return[0]}),last:s(function(e,t){return[t-1]}),eq:s(function(e,t,n){return[n<0?n+t:n]}),even:s(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:s(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:s(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:s(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}},_.pseudos.nth=_.pseudos.eq;for(v in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})_.pseudos[v]=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}(v);for(v in{submit:!0,reset:!0})_.pseudos[v]=function(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}(v);return u.prototype=_.filters=_.pseudos,_.setFilters=new u,S=t.tokenize=function(e,n){var r,o,a,i,s,l,u,c=G[e+" "];if(c)return n?0:c.slice(0);for(s=e,l=[],u=_.preFilter;s;){r&&!(o=ie.exec(s))||(o&&(s=s.slice(o[0].length)||s),l.push(a=[])),r=!1,(o=se.exec(s))&&(r=o.shift(),a.push({value:r,type:o[0].replace(ae," ")}),s=s.slice(r.length));for(i in _.filter)!(o=de[i].exec(s))||u[i]&&!(o=u[i](o))||(r=o.shift(),a.push({value:r,type:i,matches:o}),s=s.slice(r.length));if(!r)break}return n?s.length:s?t.error(e):G(e,l).slice(0)},C=t.compile=function(e,t){var n,r=[],o=[],a=H[e+" "];if(!a){for(t||(t=S(e)),n=t.length;n--;)a=y(t[n]),a[L]?r.push(a):o.push(a);a=H(e,g(o,r)),a.selector=e}return a},k=t.select=function(e,t,n,r){var o,a,i,s,u,d="function"==typeof e&&e,p=!r&&S(e=d.selector||e);if(n=n||[],1===p.length){if(a=p[0]=p[0].slice(0),a.length>2&&"ID"===(i=a[0]).type&&b.getById&&9===t.nodeType&&j&&_.relative[a[1].type]){if(!(t=(_.find.ID(i.matches[0].replace(ve,be),t)||[])[0]))return n;d&&(t=t.parentNode),e=e.slice(a.shift().value.length)}for(o=de.needsContext.test(e)?0:a.length;o--&&(i=a[o],!_.relative[s=i.type]);)if((u=_.find[s])&&(r=u(i.matches[0].replace(ve,be),ye.test(a[0].type)&&l(t.parentNode)||t))){if(a.splice(o,1),!(e=r.length&&c(a)))return X.apply(n,r),n;break}}return(d||C(e,p))(r,t,!j,n,!t||ye.test(e)&&l(t.parentNode)||t),n},b.sortStable=L.split("").sort(U).join("")===L,b.detectDuplicates=!!A,T(),b.sortDetached=o(function(e){return 1&e.compareDocumentPosition(O.createElement("div"))}),o(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||a("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),b.attributes&&o(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||a("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),o(function(e){return null==e.getAttribute("disabled")})||a($,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),t}(n);ye.find=we,ye.expr=we.selectors,ye.expr[":"]=ye.expr.pseudos,ye.uniqueSort=ye.unique=we.uniqueSort,ye.text=we.getText,ye.isXMLDoc=we.isXML,ye.contains=we.contains;var xe=function(e,t,n){for(var r=[],o=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&ye(e).is(n))break;r.push(e)}return r},Se=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},Ce=ye.expr.match.needsContext,ke=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,Ee=/^.[^:#\[\.,]*$/;ye.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?ye.find.matchesSelector(r,e)?[r]:[]:ye.find.matches(e,ye.grep(t,function(e){return 1===e.nodeType}))},ye.fn.extend({find:function(e){var t,n=[],r=this,o=r.length;if("string"!=typeof e)return this.pushStack(ye(e).filter(function(){for(t=0;t<o;t++)if(ye.contains(r[t],this))return!0}));for(t=0;t<o;t++)ye.find(e,r[t],n);return n=this.pushStack(o>1?ye.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(s(this,e||[],!1))},not:function(e){return this.pushStack(s(this,e||[],!0))},is:function(e){return!!s(this,"string"==typeof e&&Ce.test(e)?ye(e):e||[],!1).length}});var Me,Ae=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(ye.fn.init=function(e,t,n){var r,o;if(!e)return this;if(n=n||Me,"string"==typeof e){if(!(r="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:Ae.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof ye?t[0]:t,ye.merge(this,ye.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:se,!0)),ke.test(r[1])&&ye.isPlainObject(t))for(r in t)ye.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}if((o=se.getElementById(r[2]))&&o.parentNode){if(o.id!==r[2])return Me.find(e);this.length=1,this[0]=o}return this.context=se,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):ye.isFunction(e)?void 0!==n.ready?n.ready(e):e(ye):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),ye.makeArray(e,this))}).prototype=ye.fn,Me=ye(se);var Te=/^(?:parents|prev(?:Until|All))/,Oe={children:!0,contents:!0,next:!0,prev:!0};ye.fn.extend({has:function(e){var t,n=ye(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(ye.contains(this,n[t]))return!0})},closest:function(e,t){for(var n,r=0,o=this.length,a=[],i=Ce.test(e)||"string"!=typeof e?ye(e,t||this.context):0;r<o;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(i?i.index(n)>-1:1===n.nodeType&&ye.find.matchesSelector(n,e))){a.push(n);break}return this.pushStack(a.length>1?ye.uniqueSort(a):a)},index:function(e){return e?"string"==typeof e?ye.inArray(this[0],ye(e)):ye.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(ye.uniqueSort(ye.merge(this.get(),ye(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ye.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return xe(e,"parentNode")},parentsUntil:function(e,t,n){return xe(e,"parentNode",n)},next:function(e){return l(e,"nextSibling")},prev:function(e){return l(e,"previousSibling")},nextAll:function(e){return xe(e,"nextSibling")},prevAll:function(e){return xe(e,"previousSibling")},nextUntil:function(e,t,n){return xe(e,"nextSibling",n)},prevUntil:function(e,t,n){return xe(e,"previousSibling",n)},siblings:function(e){return Se((e.parentNode||{}).firstChild,e)},children:function(e){return Se(e.firstChild)},contents:function(e){return ye.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:ye.merge([],e.childNodes)}},function(e,t){ye.fn[e]=function(n,r){var o=ye.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(o=ye.filter(r,o)),this.length>1&&(Oe[e]||(o=ye.uniqueSort(o)),Te.test(e)&&(o=o.reverse())),this.pushStack(o)}});var Pe=/\S+/g;ye.Callbacks=function(e){e="string"==typeof e?u(e):ye.extend({},e);var t,n,r,o,a=[],i=[],s=-1,l=function(){for(o=e.once,r=t=!0;i.length;s=-1)for(n=i.shift();++s<a.length;)!1===a[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=a.length,n=!1);e.memory||(n=!1),t=!1,o&&(a=n?[]:"")},c={add:function(){return a&&(n&&!t&&(s=a.length-1,i.push(n)),function t(n){ye.each(n,function(n,r){ye.isFunction(r)?e.unique&&c.has(r)||a.push(r):r&&r.length&&"string"!==ye.type(r)&&t(r)})}(arguments),n&&!t&&l()),this},remove:function(){return ye.each(arguments,function(e,t){for(var n;(n=ye.inArray(t,a,n))>-1;)a.splice(n,1),n<=s&&s--}),this},has:function(e){return e?ye.inArray(e,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return o=i=[],a=n="",this},disabled:function(){return!a},lock:function(){return o=!0,n||c.disable(),this},locked:function(){return!!o},fireWith:function(e,n){return o||(n=n||[],n=[e,n.slice?n.slice():n],i.push(n),t||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},ye.extend({Deferred:function(e){var t=[["resolve","done",ye.Callbacks("once memory"),"resolved"],["reject","fail",ye.Callbacks("once memory"),"rejected"],["notify","progress",ye.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var e=arguments;return ye.Deferred(function(n){ye.each(t,function(t,a){var i=ye.isFunction(e[t])&&e[t];o[a[1]](function(){var e=i&&i.apply(this,arguments);e&&ye.isFunction(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[a[0]+"With"](this===r?n.promise():this,i?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?ye.extend(e,r):r}},o={};return r.pipe=r.then,ye.each(t,function(e,a){var i=a[2],s=a[3];r[a[1]]=i.add,s&&i.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),o[a[0]]=function(){return o[a[0]+"With"](this===o?r:this,arguments),this},o[a[0]+"With"]=i.fireWith}),r.promise(o),e&&e.call(o,o),o},when:function(e){var t,n,r,o=0,a=le.call(arguments),i=a.length,s=1!==i||e&&ye.isFunction(e.promise)?i:0,l=1===s?e:ye.Deferred(),u=function(e,n,r){return function(o){n[e]=this,r[e]=arguments.length>1?le.call(arguments):o,r===t?l.notifyWith(n,r):--s||l.resolveWith(n,r)}};if(i>1)for(t=new Array(i),n=new Array(i),r=new Array(i);o<i;o++)a[o]&&ye.isFunction(a[o].promise)?a[o].promise().progress(u(o,n,t)).done(u(o,r,a)).fail(l.reject):--s;return s||l.resolveWith(r,a),l.promise()}});var je;ye.fn.ready=function(e){return ye.ready.promise().done(e),this},ye.extend({isReady:!1,readyWait:1,holdReady:function(e){e?ye.readyWait++:ye.ready(!0)},ready:function(e){(!0===e?--ye.readyWait:ye.isReady)||(ye.isReady=!0,!0!==e&&--ye.readyWait>0||(je.resolveWith(se,[ye]),ye.fn.triggerHandler&&(ye(se).triggerHandler("ready"),ye(se).off("ready"))))}}),ye.ready.promise=function(e){if(!je)if(je=ye.Deferred(),"complete"===se.readyState||"loading"!==se.readyState&&!se.documentElement.doScroll)n.setTimeout(ye.ready);else if(se.addEventListener)se.addEventListener("DOMContentLoaded",d),n.addEventListener("load",d);else{se.attachEvent("onreadystatechange",d),n.attachEvent("onload",d);var t=!1;try{t=null==n.frameElement&&se.documentElement}catch(e){}t&&t.doScroll&&function e(){if(!ye.isReady){try{t.doScroll("left")}catch(t){return n.setTimeout(e,50)}c(),ye.ready()}}()}return je.promise(e)},ye.ready.promise();var Ie;for(Ie in ye(me))break;me.ownFirst="0"===Ie,me.inlineBlockNeedsLayout=!1,ye(function(){var e,t,n,r;(n=se.getElementsByTagName("body")[0])&&n.style&&(t=se.createElement("div"),r=se.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(t),void 0!==t.style.zoom&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",me.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(n.style.zoom=1)),n.removeChild(r))}),function(){var e=se.createElement("div");me.deleteExpando=!0;try{delete e.test}catch(e){me.deleteExpando=!1}e=null}();var De=function(e){var t=ye.noData[(e.nodeName+" ").toLowerCase()],n=+e.nodeType||1;return(1===n||9===n)&&(!t||!0!==t&&e.getAttribute("classid")===t)},Ne=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Re=/([A-Z])/g;ye.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return!!(e=e.nodeType?ye.cache[e[ye.expando]]:e[ye.expando])&&!f(e)},data:function(e,t,n){return h(e,t,n)},removeData:function(e,t){return m(e,t)},_data:function(e,t,n){return h(e,t,n,!0)},_removeData:function(e,t){return m(e,t,!0)}}),ye.fn.extend({data:function(e,t){var n,r,o,a=this[0],i=a&&a.attributes;if(void 0===e){if(this.length&&(o=ye.data(a),1===a.nodeType&&!ye._data(a,"parsedAttrs"))){for(n=i.length;n--;)i[n]&&(r=i[n].name,0===r.indexOf("data-")&&(r=ye.camelCase(r.slice(5)),p(a,r,o[r])));ye._data(a,"parsedAttrs",!0)}return o}return"object"==typeof e?this.each(function(){ye.data(this,e)}):arguments.length>1?this.each(function(){ye.data(this,e,t)}):a?p(a,e,ye.data(a,e)):void 0},removeData:function(e){return this.each(function(){ye.removeData(this,e)})}}),ye.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=ye._data(e,t),n&&(!r||ye.isArray(n)?r=ye._data(e,t,ye.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=ye.queue(e,t),r=n.length,o=n.shift(),a=ye._queueHooks(e,t),i=function(){ye.dequeue(e,t)};"inprogress"===o&&(o=n.shift(),r--),o&&("fx"===t&&n.unshift("inprogress"),delete a.stop,o.call(e,i,a)),!r&&a&&a.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return ye._data(e,n)||ye._data(e,n,{empty:ye.Callbacks("once memory").add(function(){ye._removeData(e,t+"queue"),ye._removeData(e,n)})})}}),ye.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?ye.queue(this[0],e):void 0===t?this:this.each(function(){var n=ye.queue(this,e,t);ye._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&ye.dequeue(this,e)})},dequeue:function(e){return this.each(function(){ye.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,o=ye.Deferred(),a=this,i=this.length,s=function(){--r||o.resolveWith(a,[a])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";i--;)(n=ye._data(a[i],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),o.promise(t)}}),function(){var e;me.shrinkWrapBlocks=function(){if(null!=e)return e;e=!1;var t,n,r;return(n=se.getElementsByTagName("body")[0])&&n.style?(t=se.createElement("div"),r=se.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(t),void 0!==t.style.zoom&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(se.createElement("div")).style.width="5px",e=3!==t.offsetWidth),n.removeChild(r),e):void 0}}();var Le=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Fe=new RegExp("^(?:([+-])=|)("+Le+")([a-z%]*)$","i"),ze=["Top","Right","Bottom","Left"],Be=function(e,t){return e=t||e,"none"===ye.css(e,"display")||!ye.contains(e.ownerDocument,e)},Ve=function(e,t,n,r,o,a,i){var s=0,l=e.length,u=null==n;if("object"===ye.type(n)){o=!0;for(s in n)Ve(e,t,s,n[s],!0,a,i)}else if(void 0!==r&&(o=!0,ye.isFunction(r)||(i=!0),u&&(i?(t.call(e,r),t=null):(u=t,t=function(e,t,n){return u.call(ye(e),n)})),t))for(;s<l;s++)t(e[s],n,i?r:r.call(e[s],s,t(e[s],n)));return o?e:u?t.call(e):l?t(e[0],n):a},Ge=/^(?:checkbox|radio)$/i,He=/<([\w:-]+)/,Ue=/^$|\/(?:java|ecma)script/i,qe=/^\s+/,We="abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video";!function(){var e=se.createElement("div"),t=se.createDocumentFragment(),n=se.createElement("input");e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",me.leadingWhitespace=3===e.firstChild.nodeType,me.tbody=!e.getElementsByTagName("tbody").length,me.htmlSerialize=!!e.getElementsByTagName("link").length,me.html5Clone="<:nav></:nav>"!==se.createElement("nav").cloneNode(!0).outerHTML,n.type="checkbox",n.checked=!0,t.appendChild(n),me.appendChecked=n.checked,e.innerHTML="<textarea>x</textarea>",me.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,t.appendChild(e),n=se.createElement("input"),n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),e.appendChild(n),me.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,me.noCloneEvent=!!e.addEventListener,e[ye.expando]=1,me.attributes=!e.getAttribute(ye.expando)}();var Ze={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:me.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]};Ze.optgroup=Ze.option,Ze.tbody=Ze.tfoot=Ze.colgroup=Ze.caption=Ze.thead,Ze.th=Ze.td;var Ye=/<|&#?\w+;/,Ke=/<tbody/i;!function(){var e,t,r=se.createElement("div");for(e in{submit:!0,change:!0,focusin:!0})t="on"+e,(me[e]=t in n)||(r.setAttribute(t,"t"),me[e]=!1===r.attributes[t].expando);r=null}();var Xe=/^(?:input|select|textarea)$/i,Qe=/^key/,Je=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,$e=/^(?:focusinfocus|focusoutblur)$/,et=/^([^.]*)(?:\.(.+)|)/;ye.event={global:{},add:function(e,t,n,r,o){var a,i,s,l,u,c,d,p,f,h,m,y=ye._data(e);if(y){for(n.handler&&(l=n,n=l.handler,o=l.selector),n.guid||(n.guid=ye.guid++),(i=y.events)||(i=y.events={}),(c=y.handle)||(c=y.handle=function(e){return void 0===ye||e&&ye.event.triggered===e.type?void 0:ye.event.dispatch.apply(c.elem,arguments)},c.elem=e),t=(t||"").match(Pe)||[""],s=t.length;s--;)a=et.exec(t[s])||[],f=m=a[1],h=(a[2]||"").split(".").sort(),f&&(u=ye.event.special[f]||{},f=(o?u.delegateType:u.bindType)||f,u=ye.event.special[f]||{},d=ye.extend({type:f,origType:m,data:r,handler:n,guid:n.guid,selector:o,needsContext:o&&ye.expr.match.needsContext.test(o),namespace:h.join(".")},l),(p=i[f])||(p=i[f]=[],p.delegateCount=0,u.setup&&!1!==u.setup.call(e,r,h,c)||(e.addEventListener?e.addEventListener(f,c,!1):e.attachEvent&&e.attachEvent("on"+f,c))),u.add&&(u.add.call(e,d),d.handler.guid||(d.handler.guid=n.guid)),o?p.splice(p.delegateCount++,0,d):p.push(d),ye.event.global[f]=!0);e=null}},remove:function(e,t,n,r,o){var a,i,s,l,u,c,d,p,f,h,m,y=ye.hasData(e)&&ye._data(e);if(y&&(c=y.events)){for(t=(t||"").match(Pe)||[""],u=t.length;u--;)if(s=et.exec(t[u])||[],f=m=s[1],h=(s[2]||"").split(".").sort(),f){for(d=ye.event.special[f]||{},f=(r?d.delegateType:d.bindType)||f,p=c[f]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=a=p.length;a--;)i=p[a],!o&&m!==i.origType||n&&n.guid!==i.guid||s&&!s.test(i.namespace)||r&&r!==i.selector&&("**"!==r||!i.selector)||(p.splice(a,1),i.selector&&p.delegateCount--,d.remove&&d.remove.call(e,i));l&&!p.length&&(d.teardown&&!1!==d.teardown.call(e,h,y.handle)||ye.removeEvent(e,f,y.handle),delete c[f])}else for(f in c)ye.event.remove(e,f+t[u],n,r,!0);ye.isEmptyObject(c)&&(delete y.handle,ye._removeData(e,"events"))}},trigger:function(e,t,r,o){var a,i,s,l,u,c,d,p=[r||se],f=he.call(e,"type")?e.type:e,h=he.call(e,"namespace")?e.namespace.split("."):[];if(s=c=r=r||se,3!==r.nodeType&&8!==r.nodeType&&!$e.test(f+ye.event.triggered)&&(f.indexOf(".")>-1&&(h=f.split("."),f=h.shift(),h.sort()),i=f.indexOf(":")<0&&"on"+f,e=e[ye.expando]?e:new ye.Event(f,"object"==typeof e&&e),e.isTrigger=o?2:3,e.namespace=h.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),t=null==t?[e]:ye.makeArray(t,[e]),u=ye.event.special[f]||{},o||!u.trigger||!1!==u.trigger.apply(r,t))){if(!o&&!u.noBubble&&!ye.isWindow(r)){for(l=u.delegateType||f,$e.test(l+f)||(s=s.parentNode);s;s=s.parentNode)p.push(s),c=s;c===(r.ownerDocument||se)&&p.push(c.defaultView||c.parentWindow||n)}for(d=0;(s=p[d++])&&!e.isPropagationStopped();)e.type=d>1?l:u.bindType||f,a=(ye._data(s,"events")||{})[e.type]&&ye._data(s,"handle"),a&&a.apply(s,t),(a=i&&s[i])&&a.apply&&De(s)&&(e.result=a.apply(s,t),!1===e.result&&e.preventDefault());if(e.type=f,!o&&!e.isDefaultPrevented()&&(!u._default||!1===u._default.apply(p.pop(),t))&&De(r)&&i&&r[f]&&!ye.isWindow(r)){c=r[i],c&&(r[i]=null),ye.event.triggered=f;try{r[f]()}catch(e){}ye.event.triggered=void 0,c&&(r[i]=c)}return e.result}},dispatch:function(e){e=ye.event.fix(e);var t,n,r,o,a,i=[],s=le.call(arguments),l=(ye._data(this,"events")||{})[e.type]||[],u=ye.event.special[e.type]||{};if(s[0]=e,e.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,e)){for(i=ye.event.handlers.call(this,e,l),t=0;(o=i[t++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,n=0;(a=o.handlers[n++])&&!e.isImmediatePropagationStopped();)e.rnamespace&&!e.rnamespace.test(a.namespace)||(e.handleObj=a,e.data=a.data,void 0!==(r=((ye.event.special[a.origType]||{}).handle||a.handler).apply(o.elem,s))&&!1===(e.result=r)&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,o,a,i=[],s=t.delegateCount,l=e.target;if(s&&l.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==e.type)){for(r=[],n=0;n<s;n++)a=t[n],o=a.selector+" ",void 0===r[o]&&(r[o]=a.needsContext?ye(o,this).index(l)>-1:ye.find(o,this,null,[l]).length),r[o]&&r.push(a);r.length&&i.push({elem:l,handlers:r})}return s<t.length&&i.push({elem:this,handlers:t.slice(s)}),i},fix:function(e){if(e[ye.expando])return e;var t,n,r,o=e.type,a=e,i=this.fixHooks[o];for(i||(this.fixHooks[o]=i=Je.test(o)?this.mouseHooks:Qe.test(o)?this.keyHooks:{}),r=i.props?this.props.concat(i.props):this.props,e=new ye.Event(a),t=r.length;t--;)n=r[t],e[n]=a[n];return e.target||(e.target=a.srcElement||se),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,i.filter?i.filter(e,a):e},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,o,a=t.button,i=t.fromElement;return null==e.pageX&&null!=t.clientX&&(r=e.target.ownerDocument||se,o=r.documentElement,n=r.body,e.pageX=t.clientX+(o&&o.scrollLeft||n&&n.scrollLeft||0)-(o&&o.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(o&&o.scrollTop||n&&n.scrollTop||0)-(o&&o.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&i&&(e.relatedTarget=i===e.target?t.toElement:i),e.which||void 0===a||(e.which=1&a?1:2&a?3:4&a?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==C()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===C()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(ye.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(e){return ye.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n){var r=ye.extend(new ye.Event,n,{type:e,isSimulated:!0});ye.event.trigger(r,null,t),r.isDefaultPrevented()&&n.preventDefault()}},ye.removeEvent=se.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)}:function(e,t,n){var r="on"+t;e.detachEvent&&(void 0===e[r]&&(e[r]=null),e.detachEvent(r,n))},ye.Event=function(e,t){if(!(this instanceof ye.Event))return new ye.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?x:S):this.type=e,t&&ye.extend(this,t),this.timeStamp=e&&e.timeStamp||ye.now(),this[ye.expando]=!0},ye.Event.prototype={constructor:ye.Event,isDefaultPrevented:S,isPropagationStopped:S,isImmediatePropagationStopped:S,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=x,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=x,e&&!this.isSimulated&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=x,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},ye.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){ye.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,o=e.relatedTarget,a=e.handleObj;return o&&(o===r||ye.contains(r,o))||(e.type=a.origType,n=a.handler.apply(this,arguments),e.type=t),n}}}),me.submit||(ye.event.special.submit={setup:function(){if(ye.nodeName(this,"form"))return!1;ye.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,n=ye.nodeName(t,"input")||ye.nodeName(t,"button")?ye.prop(t,"form"):void 0;n&&!ye._data(n,"submit")&&(ye.event.add(n,"submit._submit",function(e){e._submitBubble=!0}),ye._data(n,"submit",!0))})},postDispatch:function(e){e._submitBubble&&(delete e._submitBubble,this.parentNode&&!e.isTrigger&&ye.event.simulate("submit",this.parentNode,e))},teardown:function(){if(ye.nodeName(this,"form"))return!1;ye.event.remove(this,"._submit")}}),me.change||(ye.event.special.change={setup:function(){if(Xe.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(ye.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._justChanged=!0)}),ye.event.add(this,"click._change",function(e){this._justChanged&&!e.isTrigger&&(this._justChanged=!1),ye.event.simulate("change",this,e)})),!1;ye.event.add(this,"beforeactivate._change",function(e){var t=e.target;Xe.test(t.nodeName)&&!ye._data(t,"change")&&(ye.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||ye.event.simulate("change",this.parentNode,e)}),ye._data(t,"change",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type)return e.handleObj.handler.apply(this,arguments)},teardown:function(){return ye.event.remove(this,"._change"),!Xe.test(this.nodeName)}}),me.focusin||ye.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){ye.event.simulate(t,e.target,ye.event.fix(e))};ye.event.special[t]={setup:function(){var r=this.ownerDocument||this,o=ye._data(r,t);o||r.addEventListener(e,n,!0),ye._data(r,t,(o||0)+1)},teardown:function(){var r=this.ownerDocument||this,o=ye._data(r,t)-1;o?ye._data(r,t,o):(r.removeEventListener(e,n,!0),ye._removeData(r,t))}}}),ye.fn.extend({on:function(e,t,n,r){return k(this,e,t,n,r)},one:function(e,t,n,r){return k(this,e,t,n,r,1)},off:function(e,t,n){var r,o;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,ye(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=S),this.each(function(){ye.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){ye.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return ye.event.trigger(e,t,n,!0)}});var tt=/ jQuery\d+="(?:null|\d+)"/g,nt=new RegExp("<(?:"+We+")[\\s/>]","i"),rt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,ot=/<script|<style|<link/i,at=/checked\s*(?:[^=]|=\s*.checked.)/i,it=/^true\/(.*)/,st=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,lt=g(se),ut=lt.appendChild(se.createElement("div"));ye.extend({htmlPrefilter:function(e){return e.replace(rt,"<$1></$2>")},clone:function(e,t,n){var r,o,a,i,s,l=ye.contains(e.ownerDocument,e);if(me.html5Clone||ye.isXMLDoc(e)||!nt.test("<"+e.nodeName+">")?a=e.cloneNode(!0):(ut.innerHTML=e.outerHTML,ut.removeChild(a=ut.firstChild)),!(me.noCloneEvent&&me.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ye.isXMLDoc(e)))for(r=v(a),s=v(e),i=0;null!=(o=s[i]);++i)r[i]&&O(o,r[i]);if(t)if(n)for(s=s||v(e),r=r||v(a),i=0;null!=(o=s[i]);i++)T(o,r[i]);else T(e,a);return r=v(a,"script"),r.length>0&&b(r,!l&&v(e,"script")),r=s=o=null,a},cleanData:function(e,t){for(var n,r,o,a,i=0,s=ye.expando,l=ye.cache,u=me.attributes,c=ye.event.special;null!=(n=e[i]);i++)if((t||De(n))&&(o=n[s],a=o&&l[o])){if(a.events)for(r in a.events)c[r]?ye.event.remove(n,r):ye.removeEvent(n,r,a.handle);l[o]&&(delete l[o],u||void 0===n.removeAttribute?n[s]=void 0:n.removeAttribute(s),ie.push(o))}}}),ye.fn.extend({domManip:P,detach:function(e){return j(this,e,!0)},remove:function(e){return j(this,e)},text:function(e){return Ve(this,function(e){return void 0===e?ye.text(this):this.empty().append((this[0]&&this[0].ownerDocument||se).createTextNode(e))},null,e,arguments.length)},append:function(){return P(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){E(this,e).appendChild(e)}})},prepend:function(){return P(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=E(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return P(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return P(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&ye.cleanData(v(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&ye.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return ye.clone(this,e,t)})},html:function(e){return Ve(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(tt,""):void 0;if("string"==typeof e&&!ot.test(e)&&(me.htmlSerialize||!nt.test(e))&&(me.leadingWhitespace||!qe.test(e))&&!Ze[(He.exec(e)||["",""])[1].toLowerCase()]){e=ye.htmlPrefilter(e);try{for(;n<r;n++)t=this[n]||{},1===t.nodeType&&(ye.cleanData(v(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return P(this,arguments,function(t){var n=this.parentNode;ye.inArray(this,e)<0&&(ye.cleanData(v(this)),n&&n.replaceChild(t,this))},e)}}),ye.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){ye.fn[e]=function(e){for(var n,r=0,o=[],a=ye(e),i=a.length-1;r<=i;r++)n=r===i?this:this.clone(!0),ye(a[r])[t](n),ce.apply(o,n.get());return this.pushStack(o)}});var ct,dt={HTML:"block",BODY:"block"},pt=/^margin/,ft=new RegExp("^("+Le+")(?!px)[a-z%]+$","i"),ht=function(e,t,n,r){var o,a,i={};for(a in t)i[a]=e.style[a],e.style[a]=t[a];o=n.apply(e,r||[]);for(a in t)e.style[a]=i[a];return o},mt=se.documentElement;!function(){function e(){var e,c,d=se.documentElement;d.appendChild(l),u.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",t=o=s=!1,r=i=!0,n.getComputedStyle&&(c=n.getComputedStyle(u),t="1%"!==(c||{}).top,s="2px"===(c||{}).marginLeft,o="4px"===(c||{width:"4px"}).width,u.style.marginRight="50%",r="4px"===(c||{marginRight:"4px"}).marginRight,e=u.appendChild(se.createElement("div")),e.style.cssText=u.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",e.style.marginRight=e.style.width="0",u.style.width="1px",i=!parseFloat((n.getComputedStyle(e)||{}).marginRight),u.removeChild(e)),u.style.display="none",a=0===u.getClientRects().length,a&&(u.style.display="",u.innerHTML="<table><tr><td></td><td>t</td></tr></table>",u.childNodes[0].style.borderCollapse="separate",e=u.getElementsByTagName("td"),e[0].style.cssText="margin:0;border:0;padding:0;display:none",(a=0===e[0].offsetHeight)&&(e[0].style.display="",e[1].style.display="none",a=0===e[0].offsetHeight)),d.removeChild(l)}var t,r,o,a,i,s,l=se.createElement("div"),u=se.createElement("div");u.style&&(u.style.cssText="float:left;opacity:.5",me.opacity="0.5"===u.style.opacity,me.cssFloat=!!u.style.cssFloat,u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",me.clearCloneStyle="content-box"===u.style.backgroundClip,l=se.createElement("div"),l.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",u.innerHTML="",l.appendChild(u),me.boxSizing=""===u.style.boxSizing||""===u.style.MozBoxSizing||""===u.style.WebkitBoxSizing,ye.extend(me,{reliableHiddenOffsets:function(){return null==t&&e(),a},boxSizingReliable:function(){return null==t&&e(),o},pixelMarginRight:function(){return null==t&&e(),r},pixelPosition:function(){return null==t&&e(),t},reliableMarginRight:function(){return null==t&&e(),i},reliableMarginLeft:function(){return null==t&&e(),s}}))}();var yt,gt,vt=/^(top|right|bottom|left)$/;n.getComputedStyle?(yt=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=n),t.getComputedStyle(e)},gt=function(e,t,n){var r,o,a,i,s=e.style;return n=n||yt(e),i=n?n.getPropertyValue(t)||n[t]:void 0,""!==i&&void 0!==i||ye.contains(e.ownerDocument,e)||(i=ye.style(e,t)),n&&!me.pixelMarginRight()&&ft.test(i)&&pt.test(t)&&(r=s.width,o=s.minWidth,a=s.maxWidth,s.minWidth=s.maxWidth=s.width=i,i=n.width,s.width=r,s.minWidth=o,s.maxWidth=a),void 0===i?i:i+""}):mt.currentStyle&&(yt=function(e){return e.currentStyle},gt=function(e,t,n){var r,o,a,i,s=e.style;return n=n||yt(e),i=n?n[t]:void 0,null==i&&s&&s[t]&&(i=s[t]),ft.test(i)&&!vt.test(t)&&(r=s.left,o=e.runtimeStyle,a=o&&o.left,a&&(o.left=e.currentStyle.left),s.left="fontSize"===t?"1em":i,i=s.pixelLeft+"px",s.left=r,a&&(o.left=a)),void 0===i?i:i+""||"auto"});var bt=/alpha\([^)]*\)/i,_t=/opacity\s*=\s*([^)]*)/i,wt=/^(none|table(?!-c[ea]).+)/,xt=new RegExp("^("+Le+")(.*)$","i"),St={position:"absolute",visibility:"hidden",display:"block"},Ct={letterSpacing:"0",fontWeight:"400"},kt=["Webkit","O","Moz","ms"],Et=se.createElement("div").style;ye.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=gt(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:me.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,a,i,s=ye.camelCase(t),l=e.style;if(t=ye.cssProps[s]||(ye.cssProps[s]=R(s)||s),i=ye.cssHooks[t]||ye.cssHooks[s],void 0===n)return i&&"get"in i&&void 0!==(o=i.get(e,!1,r))?o:l[t];if(a=typeof n,"string"===a&&(o=Fe.exec(n))&&o[1]&&(n=y(e,t,o),a="number"),null!=n&&n===n&&("number"===a&&(n+=o&&o[3]||(ye.cssNumber[s]?"":"px")),me.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),!(i&&"set"in i&&void 0===(n=i.set(e,n,r)))))try{l[t]=n}catch(e){}}},css:function(e,t,n,r){var o,a,i,s=ye.camelCase(t);return t=ye.cssProps[s]||(ye.cssProps[s]=R(s)||s),i=ye.cssHooks[t]||ye.cssHooks[s],i&&"get"in i&&(a=i.get(e,!0,n)),void 0===a&&(a=gt(e,t,r)),"normal"===a&&t in Ct&&(a=Ct[t]),""===n||n?(o=parseFloat(a),!0===n||isFinite(o)?o||0:a):a}}),ye.each(["height","width"],function(e,t){ye.cssHooks[t]={get:function(e,n,r){if(n)return wt.test(ye.css(e,"display"))&&0===e.offsetWidth?ht(e,St,function(){return B(e,t,r)}):B(e,t,r)},set:function(e,n,r){var o=r&&yt(e);return F(e,n,r?z(e,t,r,me.boxSizing&&"border-box"===ye.css(e,"boxSizing",!1,o),o):0)}}}),me.opacity||(ye.cssHooks.opacity={get:function(e,t){return _t.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,o=ye.isNumeric(t)?"alpha(opacity="+100*t+")":"",a=r&&r.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===ye.trim(a.replace(bt,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=bt.test(a)?a.replace(bt,o):a+" "+o)}}),ye.cssHooks.marginRight=N(me.reliableMarginRight,function(e,t){if(t)return ht(e,{display:"inline-block"},gt,[e,"marginRight"])}),ye.cssHooks.marginLeft=N(me.reliableMarginLeft,function(e,t){if(t)return(parseFloat(gt(e,"marginLeft"))||(ye.contains(e.ownerDocument,e)?e.getBoundingClientRect().left-ht(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}):0))+"px"}),ye.each({margin:"",padding:"",border:"Width"},function(e,t){ye.cssHooks[e+t]={expand:function(n){for(var r=0,o={},a="string"==typeof n?n.split(" "):[n];r<4;r++)o[e+ze[r]+t]=a[r]||a[r-2]||a[0];return o}},pt.test(e)||(ye.cssHooks[e+t].set=F)}),ye.fn.extend({css:function(e,t){return Ve(this,function(e,t,n){var r,o,a={},i=0;if(ye.isArray(t)){for(r=yt(e),o=t.length;i<o;i++)a[t[i]]=ye.css(e,t[i],!1,r);return a}return void 0!==n?ye.style(e,t,n):ye.css(e,t)},e,t,arguments.length>1)},show:function(){return L(this,!0)},hide:function(){return L(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Be(this)?ye(this).show():ye(this).hide()})}}),ye.Tween=V,V.prototype={constructor:V,init:function(e,t,n,r,o,a){this.elem=e,this.prop=n,this.easing=o||ye.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=a||(ye.cssNumber[n]?"":"px")},cur:function(){var e=V.propHooks[this.prop];return e&&e.get?e.get(this):V.propHooks._default.get(this)},run:function(e){var t,n=V.propHooks[this.prop];return this.options.duration?this.pos=t=ye.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):V.propHooks._default.set(this),this}},V.prototype.init.prototype=V.prototype,V.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=ye.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){ye.fx.step[e.prop]?ye.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[ye.cssProps[e.prop]]&&!ye.cssHooks[e.prop]?e.elem[e.prop]=e.now:ye.style(e.elem,e.prop,e.now+e.unit)}}},V.propHooks.scrollTop=V.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ye.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},ye.fx=V.prototype.init,ye.fx.step={};var Mt,At,Tt=/^(?:toggle|show|hide)$/,Ot=/queueHooks$/;ye.Animation=ye.extend(Z,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return y(n.elem,e,Fe.exec(t),n),n}]},tweener:function(e,t){ye.isFunction(e)?(t=e,e=["*"]):e=e.match(Pe);for(var n,r=0,o=e.length;r<o;r++)n=e[r],Z.tweeners[n]=Z.tweeners[n]||[],Z.tweeners[n].unshift(t)},prefilters:[q],prefilter:function(e,t){t?Z.prefilters.unshift(e):Z.prefilters.push(e)}}),ye.speed=function(e,t,n){var r=e&&"object"==typeof e?ye.extend({},e):{complete:n||!n&&t||ye.isFunction(e)&&e,duration:e,easing:n&&t||t&&!ye.isFunction(t)&&t};return r.duration=ye.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in ye.fx.speeds?ye.fx.speeds[r.duration]:ye.fx.speeds._default,null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){ye.isFunction(r.old)&&r.old.call(this),r.queue&&ye.dequeue(this,r.queue)},r},ye.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Be).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var o=ye.isEmptyObject(e),a=ye.speed(t,n,r),i=function(){var t=Z(this,ye.extend({},e),a);(o||ye._data(this,"finish"))&&t.stop(!0)};return i.finish=i,o||!1===a.queue?this.each(i):this.queue(a.queue,i)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,o=null!=e&&e+"queueHooks",a=ye.timers,i=ye._data(this);if(o)i[o]&&i[o].stop&&r(i[o]);else for(o in i)i[o]&&i[o].stop&&Ot.test(o)&&r(i[o]);for(o=a.length;o--;)a[o].elem!==this||null!=e&&a[o].queue!==e||(a[o].anim.stop(n),t=!1,a.splice(o,1));!t&&n||ye.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=ye._data(this),r=n[e+"queue"],o=n[e+"queueHooks"],a=ye.timers,i=r?r.length:0;for(n.finish=!0,ye.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;t<i;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),ye.each(["toggle","show","hide"],function(e,t){var n=ye.fn[t];ye.fn[t]=function(e,r,o){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(H(t,!0),e,r,o)}}),ye.each({slideDown:H("show"),slideUp:H("hide"),slideToggle:H("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){ye.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),ye.timers=[],ye.fx.tick=function(){var e,t=ye.timers,n=0;for(Mt=ye.now();n<t.length;n++)(e=t[n])()||t[n]!==e||t.splice(n--,1);t.length||ye.fx.stop(),Mt=void 0},ye.fx.timer=function(e){ye.timers.push(e),e()?ye.fx.start():ye.timers.pop()},ye.fx.interval=13,ye.fx.start=function(){At||(At=n.setInterval(ye.fx.tick,ye.fx.interval))},ye.fx.stop=function(){n.clearInterval(At),At=null},ye.fx.speeds={slow:600,fast:200,_default:400},ye.fn.delay=function(e,t){return e=ye.fx?ye.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,r){var o=n.setTimeout(t,e);r.stop=function(){n.clearTimeout(o)}})},function(){var e,t=se.createElement("input"),n=se.createElement("div"),r=se.createElement("select"),o=r.appendChild(se.createElement("option"));n=se.createElement("div"),n.setAttribute("className","t"),n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",e=n.getElementsByTagName("a")[0],t.setAttribute("type","checkbox"),n.appendChild(t),e=n.getElementsByTagName("a")[0],e.style.cssText="top:1px",me.getSetAttribute="t"!==n.className,me.style=/top/.test(e.getAttribute("style")),me.hrefNormalized="/a"===e.getAttribute("href"),me.checkOn=!!t.value,me.optSelected=o.selected,me.enctype=!!se.createElement("form").enctype,r.disabled=!0,me.optDisabled=!o.disabled,t=se.createElement("input"),t.setAttribute("value",""),me.input=""===t.getAttribute("value"),t.value="t",t.setAttribute("type","radio"),me.radioValue="t"===t.value}();var Pt=/\r/g,jt=/[\x20\t\r\n\f]+/g;ye.fn.extend({val:function(e){var t,n,r,o=this[0];{if(arguments.length)return r=ye.isFunction(e),this.each(function(n){var o;1===this.nodeType&&(o=r?e.call(this,n,ye(this).val()):e,null==o?o="":"number"==typeof o?o+="":ye.isArray(o)&&(o=ye.map(o,function(e){return null==e?"":e+""})),(t=ye.valHooks[this.type]||ye.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))});if(o)return(t=ye.valHooks[o.type]||ye.valHooks[o.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(o,"value"))?n:(n=o.value,"string"==typeof n?n.replace(Pt,""):null==n?"":n)}}}),ye.extend({valHooks:{option:{get:function(e){var t=ye.find.attr(e,"value");return null!=t?t:ye.trim(ye.text(e)).replace(jt," ")}},select:{get:function(e){for(var t,n,r=e.options,o=e.selectedIndex,a="select-one"===e.type||o<0,i=a?null:[],s=a?o+1:r.length,l=o<0?s:a?o:0;l<s;l++)if(n=r[l],(n.selected||l===o)&&(me.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!ye.nodeName(n.parentNode,"optgroup"))){if(t=ye(n).val(),a)return t;i.push(t)}return i},set:function(e,t){for(var n,r,o=e.options,a=ye.makeArray(t),i=o.length;i--;)if(r=o[i],ye.inArray(ye.valHooks.option.get(r),a)>-1)try{r.selected=n=!0}catch(e){r.scrollHeight}else r.selected=!1;return n||(e.selectedIndex=-1),o}}}}),ye.each(["radio","checkbox"],function(){ye.valHooks[this]={set:function(e,t){if(ye.isArray(t))return e.checked=ye.inArray(ye(e).val(),t)>-1}},me.checkOn||(ye.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var It,Dt,Nt=ye.expr.attrHandle,Rt=/^(?:checked|selected)$/i,Lt=me.getSetAttribute,Ft=me.input;ye.fn.extend({attr:function(e,t){return Ve(this,ye.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){ye.removeAttr(this,e)})}}),ye.extend({attr:function(e,t,n){var r,o,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return void 0===e.getAttribute?ye.prop(e,t,n):(1===a&&ye.isXMLDoc(e)||(t=t.toLowerCase(),o=ye.attrHooks[t]||(ye.expr.match.bool.test(t)?Dt:It)),void 0!==n?null===n?void ye.removeAttr(e,t):o&&"set"in o&&void 0!==(r=o.set(e,n,t))?r:(e.setAttribute(t,n+""),n):o&&"get"in o&&null!==(r=o.get(e,t))?r:(r=ye.find.attr(e,t),null==r?void 0:r))},attrHooks:{type:{set:function(e,t){if(!me.radioValue&&"radio"===t&&ye.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r,o=0,a=t&&t.match(Pe);if(a&&1===e.nodeType)for(;n=a[o++];)r=ye.propFix[n]||n,ye.expr.match.bool.test(n)?Ft&&Lt||!Rt.test(n)?e[r]=!1:e[ye.camelCase("default-"+n)]=e[r]=!1:ye.attr(e,n,""),e.removeAttribute(Lt?n:r)}}),Dt={set:function(e,t,n){return!1===t?ye.removeAttr(e,n):Ft&&Lt||!Rt.test(n)?e.setAttribute(!Lt&&ye.propFix[n]||n,n):e[ye.camelCase("default-"+n)]=e[n]=!0,n}},ye.each(ye.expr.match.bool.source.match(/\w+/g),function(e,t){var n=Nt[t]||ye.find.attr;Ft&&Lt||!Rt.test(t)?Nt[t]=function(e,t,r){var o,a;return r||(a=Nt[t],Nt[t]=o,o=null!=n(e,t,r)?t.toLowerCase():null,Nt[t]=a),o}:Nt[t]=function(e,t,n){if(!n)return e[ye.camelCase("default-"+t)]?t.toLowerCase():null}}),Ft&&Lt||(ye.attrHooks.value={set:function(e,t,n){if(!ye.nodeName(e,"input"))return It&&It.set(e,t,n);e.defaultValue=t}}),Lt||(It={set:function(e,t,n){var r=e.getAttributeNode(n);if(r||e.setAttributeNode(r=e.ownerDocument.createAttribute(n)),r.value=t+="","value"===n||t===e.getAttribute(n))return t}},Nt.id=Nt.name=Nt.coords=function(e,t,n){var r;if(!n)return(r=e.getAttributeNode(t))&&""!==r.value?r.value:null},ye.valHooks.button={get:function(e,t){var n=e.getAttributeNode(t);if(n&&n.specified)return n.value},set:It.set},ye.attrHooks.contenteditable={set:function(e,t,n){It.set(e,""!==t&&t,n)}},ye.each(["width","height"],function(e,t){ye.attrHooks[t]={set:function(e,n){if(""===n)return e.setAttribute(t,"auto"),n}}})),me.style||(ye.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var zt=/^(?:input|select|textarea|button|object)$/i,Bt=/^(?:a|area)$/i;ye.fn.extend({prop:function(e,t){return Ve(this,ye.prop,e,t,arguments.length>1)},removeProp:function(e){return e=ye.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(e){}})}}),ye.extend({prop:function(e,t,n){var r,o,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&ye.isXMLDoc(e)||(t=ye.propFix[t]||t,o=ye.propHooks[t]),void 0!==n?o&&"set"in o&&void 0!==(r=o.set(e,n,t))?r:e[t]=n:o&&"get"in o&&null!==(r=o.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=ye.find.attr(e,"tabindex");return t?parseInt(t,10):zt.test(e.nodeName)||Bt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),me.hrefNormalized||ye.each(["href","src"],function(e,t){ye.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),me.optSelected||(ye.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),ye.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ye.propFix[this.toLowerCase()]=this}),me.enctype||(ye.propFix.enctype="encoding");var Vt=/[\t\r\n\f]/g;ye.fn.extend({addClass:function(e){var t,n,r,o,a,i,s,l=0;if(ye.isFunction(e))return this.each(function(t){ye(this).addClass(e.call(this,t,Y(this)))});if("string"==typeof e&&e)for(t=e.match(Pe)||[];n=this[l++];)if(o=Y(n),r=1===n.nodeType&&(" "+o+" ").replace(Vt," ")){for(i=0;a=t[i++];)r.indexOf(" "+a+" ")<0&&(r+=a+" ");s=ye.trim(r),o!==s&&ye.attr(n,"class",s)}return this},removeClass:function(e){var t,n,r,o,a,i,s,l=0;if(ye.isFunction(e))return this.each(function(t){ye(this).removeClass(e.call(this,t,Y(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(Pe)||[];n=this[l++];)if(o=Y(n),r=1===n.nodeType&&(" "+o+" ").replace(Vt," ")){for(i=0;a=t[i++];)for(;r.indexOf(" "+a+" ")>-1;)r=r.replace(" "+a+" "," ");s=ye.trim(r),o!==s&&ye.attr(n,"class",s)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):ye.isFunction(e)?this.each(function(n){ye(this).toggleClass(e.call(this,n,Y(this),t),t)}):this.each(function(){var t,r,o,a;if("string"===n)for(r=0,o=ye(this),a=e.match(Pe)||[];t=a[r++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else void 0!==e&&"boolean"!==n||(t=Y(this),t&&ye._data(this,"__className__",t),ye.attr(this,"class",t||!1===e?"":ye._data(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+Y(n)+" ").replace(Vt," ").indexOf(t)>-1)return!0;return!1}}),ye.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){ye.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),ye.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}});var Gt=n.location,Ht=ye.now(),Ut=/\?/,qt=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;ye.parseJSON=function(e){if(n.JSON&&n.JSON.parse)return n.JSON.parse(e+"");var t,r=null,o=ye.trim(e+"");return o&&!ye.trim(o.replace(qt,function(e,n,o,a){return t&&n&&(r=0),0===r?e:(t=o||n,r+=!a-!o,"")}))?Function("return "+o)():ye.error("Invalid JSON: "+e)},ye.parseXML=function(e){var t,r;if(!e||"string"!=typeof e)return null;try{n.DOMParser?(r=new n.DOMParser,t=r.parseFromString(e,"text/xml")):(t=new n.ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e))}catch(e){t=void 0}return t&&t.documentElement&&!t.getElementsByTagName("parsererror").length||ye.error("Invalid XML: "+e),t};var Wt=/#.*$/,Zt=/([?&])_=[^&]*/,Yt=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Kt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Xt=/^(?:GET|HEAD)$/,Qt=/^\/\//,Jt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,$t={},en={},tn="*/".concat("*"),nn=Gt.href,rn=Jt.exec(nn.toLowerCase())||[];ye.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:nn,type:"GET",isLocal:Kt.test(rn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":tn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ye.parseJSON,"text xml":ye.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Q(Q(e,ye.ajaxSettings),t):Q(ye.ajaxSettings,e)},ajaxPrefilter:K($t),ajaxTransport:K(en),ajax:function(e,t){function r(e,t,r,o){var a,d,v,b,w,S=t;2!==_&&(_=2,l&&n.clearTimeout(l),c=void 0,s=o||"",x.readyState=e>0?4:0,a=e>=200&&e<300||304===e,r&&(b=J(p,x,r)),b=$(p,b,x,a),a?(p.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(ye.lastModified[i]=w),(w=x.getResponseHeader("etag"))&&(ye.etag[i]=w)),204===e||"HEAD"===p.type?S="nocontent":304===e?S="notmodified":(S=b.state,d=b.data,v=b.error,a=!v)):(v=S,!e&&S||(S="error",e<0&&(e=0))),x.status=e,x.statusText=(t||S)+"",a?m.resolveWith(f,[d,S,x]):m.rejectWith(f,[x,S,v]),x.statusCode(g),g=void 0,u&&h.trigger(a?"ajaxSuccess":"ajaxError",[x,p,a?d:v]),y.fireWith(f,[x,S]),u&&(h.trigger("ajaxComplete",[x,p]),--ye.active||ye.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var o,a,i,s,l,u,c,d,p=ye.ajaxSetup({},t),f=p.context||p,h=p.context&&(f.nodeType||f.jquery)?ye(f):ye.event,m=ye.Deferred(),y=ye.Callbacks("once memory"),g=p.statusCode||{},v={},b={},_=0,w="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(2===_){if(!d)for(d={};t=Yt.exec(s);)d[t[1].toLowerCase()]=t[2];t=d[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===_?s:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return _||(e=b[n]=b[n]||e,v[e]=t),this},overrideMimeType:function(e){return _||(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(_<2)for(t in e)g[t]=[g[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||w;return c&&c.abort(t),r(0,t),this}};if(m.promise(x).complete=y.add,x.success=x.done,x.error=x.fail,p.url=((e||p.url||nn)+"").replace(Wt,"").replace(Qt,rn[1]+"//"),p.type=t.method||t.type||p.method||p.type,p.dataTypes=ye.trim(p.dataType||"*").toLowerCase().match(Pe)||[""],null==p.crossDomain&&(o=Jt.exec(p.url.toLowerCase()),p.crossDomain=!(!o||o[1]===rn[1]&&o[2]===rn[2]&&(o[3]||("http:"===o[1]?"80":"443"))===(rn[3]||("http:"===rn[1]?"80":"443")))),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=ye.param(p.data,p.traditional)),X($t,p,t,x),2===_)return x;u=ye.event&&p.global,u&&0==ye.active++&&ye.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Xt.test(p.type),i=p.url,p.hasContent||(p.data&&(i=p.url+=(Ut.test(i)?"&":"?")+p.data,delete p.data),!1===p.cache&&(p.url=Zt.test(i)?i.replace(Zt,"$1_="+Ht++):i+(Ut.test(i)?"&":"?")+"_="+Ht++)),p.ifModified&&(ye.lastModified[i]&&x.setRequestHeader("If-Modified-Since",ye.lastModified[i]),ye.etag[i]&&x.setRequestHeader("If-None-Match",ye.etag[i])),(p.data&&p.hasContent&&!1!==p.contentType||t.contentType)&&x.setRequestHeader("Content-Type",p.contentType),x.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+tn+"; q=0.01":""):p.accepts["*"]);for(a in p.headers)x.setRequestHeader(a,p.headers[a]);if(p.beforeSend&&(!1===p.beforeSend.call(f,x,p)||2===_))return x.abort();w="abort";for(a in{success:1,error:1,complete:1})x[a](p[a]);if(c=X(en,p,t,x)){if(x.readyState=1,u&&h.trigger("ajaxSend",[x,p]),2===_)return x;p.async&&p.timeout>0&&(l=n.setTimeout(function(){x.abort("timeout")},p.timeout));try{_=1,c.send(v,r)}catch(e){if(!(_<2))throw e;r(-1,e)}}else r(-1,"No Transport");return x},getJSON:function(e,t,n){return ye.get(e,t,n,"json")},getScript:function(e,t){return ye.get(e,void 0,t,"script")}}),ye.each(["get","post"],function(e,t){ye[t]=function(e,n,r,o){return ye.isFunction(n)&&(o=o||r,r=n,n=void 0),ye.ajax(ye.extend({url:e,type:t,dataType:o,data:n,success:r},ye.isPlainObject(e)&&e))}}),ye._evalUrl=function(e){return ye.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},ye.fn.extend({wrapAll:function(e){if(ye.isFunction(e))return this.each(function(t){ye(this).wrapAll(e.call(this,t))});if(this[0]){var t=ye(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return ye.isFunction(e)?this.each(function(t){ye(this).wrapInner(e.call(this,t))}):this.each(function(){var t=ye(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=ye.isFunction(e);return this.each(function(n){ye(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){ye.nodeName(this,"body")||ye(this).replaceWith(this.childNodes)}).end()}}),ye.expr.filters.hidden=function(e){return me.reliableHiddenOffsets()?e.offsetWidth<=0&&e.offsetHeight<=0&&!e.getClientRects().length:te(e)},ye.expr.filters.visible=function(e){return!ye.expr.filters.hidden(e)};var on=/%20/g,an=/\[\]$/,sn=/\r?\n/g,ln=/^(?:submit|button|image|reset|file)$/i,un=/^(?:input|select|textarea|keygen)/i;ye.param=function(e,t){var n,r=[],o=function(e,t){t=ye.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=ye.ajaxSettings&&ye.ajaxSettings.traditional),ye.isArray(e)||e.jquery&&!ye.isPlainObject(e))ye.each(e,function(){o(this.name,this.value)});else for(n in e)ne(n,e[n],t,o);return r.join("&").replace(on,"+")},ye.fn.extend({serialize:function(){return ye.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ye.prop(this,"elements");return e?ye.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ye(this).is(":disabled")&&un.test(this.nodeName)&&!ln.test(e)&&(this.checked||!Ge.test(e))}).map(function(e,t){var n=ye(this).val();return null==n?null:ye.isArray(n)?ye.map(n,function(e){return{name:t.name,value:e.replace(sn,"\r\n")}}):{name:t.name,value:n.replace(sn,"\r\n")}}).get()}}),ye.ajaxSettings.xhr=void 0!==n.ActiveXObject?function(){return this.isLocal?oe():se.documentMode>8?re():/^(get|post|head|put|delete|options)$/i.test(this.type)&&re()||oe()}:re;var cn=0,dn={},pn=ye.ajaxSettings.xhr();n.attachEvent&&n.attachEvent("onunload",function(){for(var e in dn)dn[e](void 0,!0)}),me.cors=!!pn&&"withCredentials"in pn,pn=me.ajax=!!pn,pn&&ye.ajaxTransport(function(e){if(!e.crossDomain||me.cors){var t;return{send:function(r,o){var a,i=e.xhr(),s=++cn;if(i.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)i[a]=e.xhrFields[a];e.mimeType&&i.overrideMimeType&&i.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");for(a in r)void 0!==r[a]&&i.setRequestHeader(a,r[a]+"");i.send(e.hasContent&&e.data||null),t=function(n,r){var a,l,u;if(t&&(r||4===i.readyState))if(delete dn[s],t=void 0,i.onreadystatechange=ye.noop,r)4!==i.readyState&&i.abort();else{u={},a=i.status,"string"==typeof i.responseText&&(u.text=i.responseText);try{l=i.statusText}catch(e){l=""}a||!e.isLocal||e.crossDomain?1223===a&&(a=204):a=u.text?200:404}u&&o(a,l,u,i.getAllResponseHeaders())},e.async?4===i.readyState?n.setTimeout(t):i.onreadystatechange=dn[s]=t:t()},abort:function(){t&&t(void 0,!0)}}}}),ye.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return ye.globalEval(e),e}}}),ye.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),ye.ajaxTransport("script",function(e){if(e.crossDomain){var t,n=se.head||ye("head")[0]||se.documentElement;return{send:function(r,o){t=se.createElement("script"),t.async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,n){(n||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,n||o(200,"success"))},n.insertBefore(t,n.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}});var fn=[],hn=/(=)\?(?=&|$)|\?\?/;ye.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=fn.pop()||ye.expando+"_"+Ht++;return this[e]=!0,e}}),ye.ajaxPrefilter("json jsonp",function(e,t,r){var o,a,i,s=!1!==e.jsonp&&(hn.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&hn.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return o=e.jsonpCallback=ye.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(hn,"$1"+o):!1!==e.jsonp&&(e.url+=(Ut.test(e.url)?"&":"?")+e.jsonp+"="+o),e.converters["script json"]=function(){return i||ye.error(o+" was not called"),i[0]},e.dataTypes[0]="json",a=n[o],n[o]=function(){i=arguments},r.always(function(){void 0===a?ye(n).removeProp(o):n[o]=a,e[o]&&(e.jsonpCallback=t.jsonpCallback,fn.push(o)),i&&ye.isFunction(a)&&a(i[0]),i=a=void 0}),"script"}),ye.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||se;var r=ke.exec(e),o=!n&&[];return r?[t.createElement(r[1])]:(r=w([e],t,o),o&&o.length&&ye(o).remove(),ye.merge([],r.childNodes))};var mn=ye.fn.load;ye.fn.load=function(e,t,n){if("string"!=typeof e&&mn)return mn.apply(this,arguments);var r,o,a,i=this,s=e.indexOf(" ");return s>-1&&(r=ye.trim(e.slice(s,e.length)),e=e.slice(0,s)),ye.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(o="POST"),i.length>0&&ye.ajax({url:e,type:o||"GET",dataType:"html",data:t}).done(function(e){a=arguments,i.html(r?ye("<div>").append(ye.parseHTML(e)).find(r):e)}).always(n&&function(e,t){i.each(function(){n.apply(this,a||[e.responseText,t,e])})}),this},ye.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ye.fn[t]=function(e){return this.on(t,e)}}),ye.expr.filters.animated=function(e){return ye.grep(ye.timers,function(t){return e===t.elem}).length},ye.offset={setOffset:function(e,t,n){var r,o,a,i,s,l,u,c=ye.css(e,"position"),d=ye(e),p={};"static"===c&&(e.style.position="relative"),s=d.offset(),a=ye.css(e,"top"),l=ye.css(e,"left"),u=("absolute"===c||"fixed"===c)&&ye.inArray("auto",[a,l])>-1,u?(r=d.position(),i=r.top,o=r.left):(i=parseFloat(a)||0,o=parseFloat(l)||0),ye.isFunction(t)&&(t=t.call(e,n,ye.extend({},s))),null!=t.top&&(p.top=t.top-s.top+i),null!=t.left&&(p.left=t.left-s.left+o),"using"in t?t.using.call(e,p):d.css(p)}},ye.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){ye.offset.setOffset(this,e,t)});var t,n,r={top:0,left:0},o=this[0],a=o&&o.ownerDocument;if(a)return t=a.documentElement,ye.contains(t,o)?(void 0!==o.getBoundingClientRect&&(r=o.getBoundingClientRect()),n=ae(a),{top:r.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:r.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):r},position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===ye.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),ye.nodeName(e[0],"html")||(n=e.offset()),n.top+=ye.css(e[0],"borderTopWidth",!0),n.left+=ye.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-ye.css(r,"marginTop",!0),left:t.left-n.left-ye.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&!ye.nodeName(e,"html")&&"static"===ye.css(e,"position");)e=e.offsetParent;return e||mt})}}),ye.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n=/Y/.test(t);ye.fn[e]=function(r){return Ve(this,function(e,r,o){var a=ae(e);if(void 0===o)return a?t in a?a[t]:a.document.documentElement[r]:e[r];a?a.scrollTo(n?ye(a).scrollLeft():o,n?o:ye(a).scrollTop()):e[r]=o},e,r,arguments.length,null)}}),ye.each(["top","left"],function(e,t){ye.cssHooks[t]=N(me.pixelPosition,function(e,n){if(n)return n=gt(e,t),ft.test(n)?ye(e).position()[t]+"px":n})}),ye.each({Height:"height",Width:"width"},function(e,t){ye.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){ye.fn[r]=function(r,o){var a=arguments.length&&(n||"boolean"!=typeof r),i=n||(!0===r||!0===o?"margin":"border");return Ve(this,function(t,n,r){var o;return ye.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===r?ye.css(t,n,i):ye.style(t,n,r,i)},t,a?r:void 0,a,null)}})}),ye.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),ye.fn.size=function(){return this.length},ye.fn.andSelf=ye.fn.addBack,r=[],void 0!==(o=function(){return ye}.apply(t,r))&&(e.exports=o);var yn=n.jQuery,gn=n.$;return ye.noConflict=function(e){return n.$===ye&&(n.$=gn),e&&n.jQuery===ye&&(n.jQuery=yn),ye},a||(n.jQuery=n.$=ye),ye})},function(e,t){var n={};n.EPSILON=1e-6,n.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,n.RANDOM=Math.random,n.ENABLE_SIMD=!1,n.SIMD_AVAILABLE=n.ARRAY_TYPE===Float32Array&&"SIMD"in this,n.USE_SIMD=n.ENABLE_SIMD&&n.SIMD_AVAILABLE,n.setMatrixArrayType=function(e){n.ARRAY_TYPE=e};var r=Math.PI/180;n.toRadian=function(e){return e*r},n.equals=function(e,t){return Math.abs(e-t)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))},e.exports=n},function(e,t,n){var r=n(25),o=n(26),a=n(3),i=function(e){if(e.indexOf("rgb(")>-1||e.indexOf("url(")>-1)return{rgb:e,opacity:1};var t=a(e);return{rgb:"rgb("+Math.round(255*t[0])+","+Math.round(255*t[1])+","+Math.round(255*t[2])+")",opacity:t[3]}},s=function(){var e=0;return function(){return e+=1}}();e.exports={text:function(e,t,n,o,a,i,s){o=o||12;var l=o;"middle"===s?l=o/2:"bottom"===s&&(l=0);var u=r("text",{x:t||0,y:(n||0)+l,"font-size":o,"font-family":a||"serif","font-weight":i||"normal","text-anchor":"start"});return u.textContent=e+"",u},group:function(e,t){return e=e||0,t=t||0,r("g",{transform:"translate("+e+","+t+")",x:e,y:t})},svg:function(e,t){return r("svg",{width:e||0,height:t||0})},wrapText:function(e,t){var n=e.textContent;e.textContent="";var o=n.split(" "),a=0,i=r("tspan",{x:"0",dy:a});e.appendChild(i);for(var s=[],l=0;l<o.length;l++)s.push(o[l]),i.textContent=s.join(" "),i.getComputedTextLength()>t&&(i.textContent=s.slice(0,s.length-1).join(" "),a=e.getBBox().height,s=[o[l]],i=r("tspan",{x:"0",dy:a}),e.appendChild(i),i.textContent=o[l])},fromShape:function(e,t,n){return o(e,t,n)},polygon:function(e,t){return t=i(t),r("polygon",{points:e,fill:t.rgb,"fill-opacity":t.opacity})},rect:function(e,t,n,o,a){return a=i(a),r("rect",{x:e,y:t,width:n,height:o,fill:a.rgb,"fill-opacity":a.opacity})},bgrect:function(e,t,n){return n=i(n),r("rect",{width:e,height:t,fill:n.rgb,"fill-opacity":n.opacity})},path:function(e,t,n,o){e=e.map(function(e){return e.join(",")}),e[0]="M"+e[0];for(var a=1;a<e.length;a++)e[a]="L"+e[a];return o||(t=i(t),n=i(n)),r("path",{d:e.join(" "),stroke:o?"url(#"+o.getAttribute("id")+")":t.rgb,"stroke-opacity":o?0:t.opacity,fill:o?"url(#"+o.getAttribute("id")+")":n.rgb,"fill-opacity":o?1:n.opacity})},stop:function(e,t){var n=i(t);return r("stop",{offset:e+"%","stop-color":n.rgb,"stop-opacity":n.opacity})},linearGradient:function(){return r("linearGradient",{id:"linearGradient"+s()})},defs:function(){return r("defs")},gradient:function(e){for(var t=r("linearGradient",{id:"gradient"+s(),x1:0,y1:0,x2:1,y2:0}),n=0;n<=100;n++)t.appendChild(this.stop(n,e(n/100)));return t}}},function(e,t){e.exports=function(e){var t=[0,0,0,1];if("#"===e[0]){e="rgba("+parseInt(e[1]+e[2],16)+","+parseInt(e[3]+e[4],16)+","+parseInt(e[5]+e[6],16)+",1)"}var n=e.match(/^[\s]*rgba\([\s]*([0-9.]+)[\s]*,[\s]*([0-9.]+)[\s]*,[\s]*([0-9.]+)[\s]*,[\s]*([0-9.]+)[\s]*\)[\s]*$/);return n&&5===n.length&&(t=[parseFloat(n[1])/255,parseFloat(n[2])/255,parseFloat(n[3])/255,parseFloat(n[4])]),t}},function(e,t){e.exports=function(e,t,n,r){if(!e.length)return-1;for(var o,a=e.length,i=0;i<a;){o=Math.floor((a+i)/2);var s=n(e[o]);if(s===t)return o;if(t>s)i=o+1;else{if(!(t<s))return-1;a=o}}return r?Math.max(0,i-1):-1}},function(e,t){var n=function(){function e(e,t){this.value=e,this.updateFn=t,this.bound_properties=[]}return e.prototype.update=function(){this.value=this.updateFn.apply(null,arguments);for(var e=0;e<this.bound_properties.length;e++)this.bound_properties[e].update()},e.prototype.get=function(){return this.value},e.prototype.updateAndGet=function(){return this.update(),this.get()},e.prototype.addBoundProperty=function(e){this.bound_properties.push(e)},e}();e.exports=n},function(e,t,n){t.glMatrix=n(1),t.mat2=n(20),t.mat2d=n(21),t.mat3=n(7),t.mat4=n(22),t.quat=n(23),t.vec2=n(24),t.vec3=n(8),t.vec4=n(9)},function(e,t,n){var r=n(1),o={};o.create=function(){var e=new r.ARRAY_TYPE(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},o.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},o.clone=function(e){var t=new r.ARRAY_TYPE(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},o.fromValues=function(e,t,n,o,a,i,s,l,u){var c=new r.ARRAY_TYPE(9);return c[0]=e,c[1]=t,c[2]=n,c[3]=o,c[4]=a,c[5]=i,c[6]=s,c[7]=l,c[8]=u,c},o.set=function(e,t,n,r,o,a,i,s,l,u){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e[4]=a,e[5]=i,e[6]=s,e[7]=l,e[8]=u,e},o.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},o.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],o=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=o}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},o.invert=function(e,t){var n=t[0],r=t[1],o=t[2],a=t[3],i=t[4],s=t[5],l=t[6],u=t[7],c=t[8],d=c*i-s*u,p=-c*a+s*l,f=u*a-i*l,h=n*d+r*p+o*f;return h?(h=1/h,e[0]=d*h,e[1]=(-c*r+o*u)*h,e[2]=(s*r-o*i)*h,e[3]=p*h,e[4]=(c*n-o*l)*h,e[5]=(-s*n+o*a)*h,e[6]=f*h,e[7]=(-u*n+r*l)*h,e[8]=(i*n-r*a)*h,e):null},o.adjoint=function(e,t){var n=t[0],r=t[1],o=t[2],a=t[3],i=t[4],s=t[5],l=t[6],u=t[7],c=t[8];return e[0]=i*c-s*u,e[1]=o*u-r*c,e[2]=r*s-o*i,e[3]=s*l-a*c,e[4]=n*c-o*l,e[5]=o*a-n*s,e[6]=a*u-i*l,e[7]=r*l-n*u,e[8]=n*i-r*a,e},o.determinant=function(e){var t=e[0],n=e[1],r=e[2],o=e[3],a=e[4],i=e[5],s=e[6],l=e[7],u=e[8];return t*(u*a-i*l)+n*(-u*o+i*s)+r*(l*o-a*s)},o.multiply=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8],p=n[0],f=n[1],h=n[2],m=n[3],y=n[4],g=n[5],v=n[6],b=n[7],_=n[8];return e[0]=p*r+f*i+h*u,e[1]=p*o+f*s+h*c,e[2]=p*a+f*l+h*d,e[3]=m*r+y*i+g*u,e[4]=m*o+y*s+g*c,e[5]=m*a+y*l+g*d,e[6]=v*r+b*i+_*u,e[7]=v*o+b*s+_*c,e[8]=v*a+b*l+_*d,e},o.mul=o.multiply,o.translate=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8],p=n[0],f=n[1];return e[0]=r,e[1]=o,e[2]=a,e[3]=i,e[4]=s,e[5]=l,e[6]=p*r+f*i+u,e[7]=p*o+f*s+c,e[8]=p*a+f*l+d,e},o.rotate=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8],p=Math.sin(n),f=Math.cos(n);return e[0]=f*r+p*i,e[1]=f*o+p*s,e[2]=f*a+p*l,e[3]=f*i-p*r,e[4]=f*s-p*o,e[5]=f*l-p*a,e[6]=u,e[7]=c,e[8]=d,e},o.scale=function(e,t,n){var r=n[0],o=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=o*t[3],e[4]=o*t[4],e[5]=o*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},o.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e},o.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},o.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},o.fromMat2d=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e},o.fromQuat=function(e,t){var n=t[0],r=t[1],o=t[2],a=t[3],i=n+n,s=r+r,l=o+o,u=n*i,c=r*i,d=r*s,p=o*i,f=o*s,h=o*l,m=a*i,y=a*s,g=a*l;return e[0]=1-d-h,e[3]=c-g,e[6]=p+y,e[1]=c+g,e[4]=1-u-h,e[7]=f-m,e[2]=p-y,e[5]=f+m,e[8]=1-u-d,e},o.normalFromMat4=function(e,t){var n=t[0],r=t[1],o=t[2],a=t[3],i=t[4],s=t[5],l=t[6],u=t[7],c=t[8],d=t[9],p=t[10],f=t[11],h=t[12],m=t[13],y=t[14],g=t[15],v=n*s-r*i,b=n*l-o*i,_=n*u-a*i,w=r*l-o*s,x=r*u-a*s,S=o*u-a*l,C=c*m-d*h,k=c*y-p*h,E=c*g-f*h,M=d*y-p*m,A=d*g-f*m,T=p*g-f*y,O=v*T-b*A+_*M+w*E-x*k+S*C;return O?(O=1/O,e[0]=(s*T-l*A+u*M)*O,e[1]=(l*E-i*T-u*k)*O,e[2]=(i*A-s*E+u*C)*O,e[3]=(o*A-r*T-a*M)*O,e[4]=(n*T-o*E+a*k)*O,e[5]=(r*E-n*A-a*C)*O,e[6]=(m*S-y*x+g*w)*O,e[7]=(y*_-h*S-g*b)*O,e[8]=(h*x-m*_+g*v)*O,e):null},o.str=function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},o.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2))},o.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e},o.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e},o.sub=o.subtract,o.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e},o.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e},o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},o.equals=function(e,t){var n=e[0],o=e[1],a=e[2],i=e[3],s=e[4],l=e[5],u=e[6],c=e[7],d=e[8],p=t[0],f=t[1],h=t[2],m=t[3],y=t[4],g=t[5],v=e[6],b=t[7],_=t[8];return Math.abs(n-p)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(p))&&Math.abs(o-f)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(a-h)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(i-m)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(s-y)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(l-g)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(g))&&Math.abs(u-v)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(c-b)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(b))&&Math.abs(d-_)<=r.EPSILON*Math.max(1,Math.abs(d),Math.abs(_))},e.exports=o},function(e,t,n){var r=n(1),o={};o.create=function(){var e=new r.ARRAY_TYPE(3);return e[0]=0,e[1]=0,e[2]=0,e},o.clone=function(e){var t=new r.ARRAY_TYPE(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},o.fromValues=function(e,t,n){var o=new r.ARRAY_TYPE(3);return o[0]=e,o[1]=t,o[2]=n,o},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},o.set=function(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e},o.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e},o.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e},o.sub=o.subtract,o.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e},o.mul=o.multiply,o.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e},o.div=o.divide,o.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e},o.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e},o.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e},o.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e},o.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e},o.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e},o.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e},o.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2];return Math.sqrt(n*n+r*r+o*o)},o.dist=o.distance,o.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2];return n*n+r*r+o*o},o.sqrDist=o.squaredDistance,o.length=function(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)},o.len=o.length,o.squaredLength=function(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r},o.sqrLen=o.squaredLength,o.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},o.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e},o.normalize=function(e,t){var n=t[0],r=t[1],o=t[2],a=n*n+r*r+o*o;return a>0&&(a=1/Math.sqrt(a),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a),e},o.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},o.cross=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=n[0],s=n[1],l=n[2];return e[0]=o*l-a*s,e[1]=a*i-r*l,e[2]=r*s-o*i,e},o.lerp=function(e,t,n,r){var o=t[0],a=t[1],i=t[2];return e[0]=o+r*(n[0]-o),e[1]=a+r*(n[1]-a),e[2]=i+r*(n[2]-i),e},o.hermite=function(e,t,n,r,o,a){var i=a*a,s=i*(2*a-3)+1,l=i*(a-2)+a,u=i*(a-1),c=i*(3-2*a);return e[0]=t[0]*s+n[0]*l+r[0]*u+o[0]*c,e[1]=t[1]*s+n[1]*l+r[1]*u+o[1]*c,e[2]=t[2]*s+n[2]*l+r[2]*u+o[2]*c,e},o.bezier=function(e,t,n,r,o,a){var i=1-a,s=i*i,l=a*a,u=s*i,c=3*a*s,d=3*l*i,p=l*a;return e[0]=t[0]*u+n[0]*c+r[0]*d+o[0]*p,e[1]=t[1]*u+n[1]*c+r[1]*d+o[1]*p,e[2]=t[2]*u+n[2]*c+r[2]*d+o[2]*p,e},o.random=function(e,t){t=t||1;var n=2*r.RANDOM()*Math.PI,o=2*r.RANDOM()-1,a=Math.sqrt(1-o*o)*t;return e[0]=Math.cos(n)*a,e[1]=Math.sin(n)*a,e[2]=o*t,e},o.transformMat4=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=n[3]*r+n[7]*o+n[11]*a+n[15];return i=i||1,e[0]=(n[0]*r+n[4]*o+n[8]*a+n[12])/i,e[1]=(n[1]*r+n[5]*o+n[9]*a+n[13])/i,e[2]=(n[2]*r+n[6]*o+n[10]*a+n[14])/i,e},o.transformMat3=function(e,t,n){var r=t[0],o=t[1],a=t[2];return e[0]=r*n[0]+o*n[3]+a*n[6],e[1]=r*n[1]+o*n[4]+a*n[7],e[2]=r*n[2]+o*n[5]+a*n[8],e},o.transformQuat=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=n[0],s=n[1],l=n[2],u=n[3],c=u*r+s*a-l*o,d=u*o+l*r-i*a,p=u*a+i*o-s*r,f=-i*r-s*o-l*a;return e[0]=c*u+f*-i+d*-l-p*-s,e[1]=d*u+f*-s+p*-i-c*-l,e[2]=p*u+f*-l+c*-s-d*-i,e},o.rotateX=function(e,t,n,r){var o=[],a=[];return o[0]=t[0]-n[0],o[1]=t[1]-n[1],o[2]=t[2]-n[2],a[0]=o[0],a[1]=o[1]*Math.cos(r)-o[2]*Math.sin(r),a[2]=o[1]*Math.sin(r)+o[2]*Math.cos(r),e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e},o.rotateY=function(e,t,n,r){var o=[],a=[];return o[0]=t[0]-n[0],o[1]=t[1]-n[1],o[2]=t[2]-n[2],a[0]=o[2]*Math.sin(r)+o[0]*Math.cos(r),a[1]=o[1],a[2]=o[2]*Math.cos(r)-o[0]*Math.sin(r),e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e},o.rotateZ=function(e,t,n,r){var o=[],a=[];return o[0]=t[0]-n[0],o[1]=t[1]-n[1],o[2]=t[2]-n[2],a[0]=o[0]*Math.cos(r)-o[1]*Math.sin(r),a[1]=o[0]*Math.sin(r)+o[1]*Math.cos(r),a[2]=o[2],e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e},o.forEach=function(){var e=o.create();return function(t,n,r,o,a,i){var s,l;for(n||(n=3),r||(r=0),l=o?Math.min(o*n+r,t.length):t.length,s=r;s<l;s+=n)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],a(e,e,i),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2];return t}}(),o.angle=function(e,t){var n=o.fromValues(e[0],e[1],e[2]),r=o.fromValues(t[0],t[1],t[2]);o.normalize(n,n),o.normalize(r,r);var a=o.dot(n,r);return a>1?0:Math.acos(a)},o.str=function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},o.equals=function(e,t){var n=e[0],o=e[1],a=e[2],i=t[0],s=t[1],l=t[2];return Math.abs(n-i)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(o-s)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(a-l)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))},e.exports=o},function(e,t,n){var r=n(1),o={};o.create=function(){var e=new r.ARRAY_TYPE(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e},o.clone=function(e){var t=new r.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},o.fromValues=function(e,t,n,o){var a=new r.ARRAY_TYPE(4);return a[0]=e,a[1]=t,a[2]=n,a[3]=o,a},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},o.set=function(e,t,n,r,o){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e},o.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e},o.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e},o.sub=o.subtract,o.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e},o.mul=o.multiply,o.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e},o.div=o.divide,o.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e},o.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e},o.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e},o.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e},o.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e},o.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},o.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e},o.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2],a=t[3]-e[3];return Math.sqrt(n*n+r*r+o*o+a*a)},o.dist=o.distance,o.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2],a=t[3]-e[3];return n*n+r*r+o*o+a*a},o.sqrDist=o.squaredDistance,o.length=function(e){var t=e[0],n=e[1],r=e[2],o=e[3];return Math.sqrt(t*t+n*n+r*r+o*o)},o.len=o.length,o.squaredLength=function(e){var t=e[0],n=e[1],r=e[2],o=e[3];return t*t+n*n+r*r+o*o},o.sqrLen=o.squaredLength,o.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},o.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},o.normalize=function(e,t){var n=t[0],r=t[1],o=t[2],a=t[3],i=n*n+r*r+o*o+a*a;return i>0&&(i=1/Math.sqrt(i),e[0]=n*i,e[1]=r*i,e[2]=o*i,e[3]=a*i),e},o.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},o.lerp=function(e,t,n,r){var o=t[0],a=t[1],i=t[2],s=t[3];return e[0]=o+r*(n[0]-o),e[1]=a+r*(n[1]-a),e[2]=i+r*(n[2]-i),e[3]=s+r*(n[3]-s),e},o.random=function(e,t){return t=t||1,e[0]=r.RANDOM(),e[1]=r.RANDOM(),e[2]=r.RANDOM(),e[3]=r.RANDOM(),o.normalize(e,e),o.scale(e,e,t),e},o.transformMat4=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=t[3];return e[0]=n[0]*r+n[4]*o+n[8]*a+n[12]*i,e[1]=n[1]*r+n[5]*o+n[9]*a+n[13]*i,e[2]=n[2]*r+n[6]*o+n[10]*a+n[14]*i,e[3]=n[3]*r+n[7]*o+n[11]*a+n[15]*i,e},o.transformQuat=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=n[0],s=n[1],l=n[2],u=n[3],c=u*r+s*a-l*o,d=u*o+l*r-i*a,p=u*a+i*o-s*r,f=-i*r-s*o-l*a;return e[0]=c*u+f*-i+d*-l-p*-s,e[1]=d*u+f*-s+p*-i-c*-l,e[2]=p*u+f*-l+c*-s-d*-i,e[3]=t[3],e},o.forEach=function(){var e=o.create();return function(t,n,r,o,a,i){var s,l;for(n||(n=4),r||(r=0),l=o?Math.min(o*n+r,t.length):t.length,s=r;s<l;s+=n)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],a(e,e,i),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2],t[s+3]=e[3];return t}}(),o.str=function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},o.equals=function(e,t){var n=e[0],o=e[1],a=e[2],i=e[3],s=t[0],l=t[1],u=t[2],c=t[3];return Math.abs(n-s)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-l)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(a-u)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(i-c)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))},e.exports=o},function(e,t){var n=function(){function e(e){this.params=e,this.params_with_type={},this.completeWithDefaults(),this.markParameterTypes()}var t={width:"100%",height:"100%",x:"0%",y:"0%",z:0,x1:"0%",x2:"0%",x3:"0%",y1:"0%",y2:"0%",y3:"0%",stroke:"rgba(0,0,0,0)",fill:"rgba(23,23,23,1)","stroke-width":"0","stroke-opacity":"0"},n={"stroke-width":0,width:0,x:0,x1:0,x2:0,x3:0,height:1,y:1,y1:1,y2:1,y3:1},r=Object.keys(t).concat("type"),o=function(){var t={};return function(n){var r=e.hashComputedShape(n);return t[r]=t[r]||Object.freeze(n),t[r]}}();return e.prototype.completeWithDefaults=function(){for(var e=this.getRequiredParameters(),n=0;n<e.length;n++){var r=e[n];this.params[r]=void 0===this.params[r]?t[r]:this.params[r]}},e.prototype.markParameterTypes=function(){for(var e=Object.keys(this.params),t=0;t<e.length;t++){var n=e[t],r=this.params[n];this.params_with_type[n]="function"==typeof r?{type:"function",value:r}:{type:"value",value:r}}},e.prototype.getComputedParams=function(e,t,r){for(var a={},i=Object.keys(this.params_with_type),s=[t,r],l=0;l<i.length;l++){var u=i[l],c=this.params_with_type[u],d=c.value;"type"!==u&&("function"===c.type&&(d=d(e)),"%"===d[d.length-1]&&(d="100%"===d?1:parseFloat(d)/100,d*=s[n[u]])),a[u]=d}return o(a)},e.hashComputedShape=function(e,t){return r.reduce(function(t,n){return t+","+e[n]},"")+","+t},e}(),r=function(){function e(e){n.call(this,e)}return e.prototype=Object.create(n.prototype),e.prototype.getRequiredParameters=function(){return["width","height","x","y","z","stroke","fill","stroke-width"]},e}(),o=function(){function e(e){n.call(this,e)}return e.prototype=Object.create(n.prototype),e.prototype.getRequiredParameters=function(){return["x1","x2","x3","y1","y2","y3","z","stroke","fill","stroke-width"]},e}(),a=function(){function e(e){n.call(this,e)}return e.prototype=Object.create(n.prototype),e.prototype.getRequiredParameters=function(){return["width","height","x","y","z","stroke","fill","stroke-width"]},e}(),i=function(){function e(e){n.call(this,e)}return e.prototype=Object.create(n.prototype),e.prototype.getRequiredParameters=function(){return["x1","x2","y1","y2","z","stroke","stroke-width"]},e}();e.exports={Rectangle:r,Triangle:o,Ellipse:a,Line:i,Shape:n}},function(e,t,n){n(12);var r=n(13),o=n(19),a=n(28),i=n(29),s=n(31),l=n(32),u=n(33),c=n(34),d=n(35),p=n(2),f=n(0),h=function(e,t,n){return Math.min(Math.max(e,t),n)},m=function(){function e(e,t){var n=this;if(this.webgl_unavailable=null===document.createElement("canvas").getContext("experimental-webgl"),this.webgl_unavailable)return void f(e).append("<p class='oncoprintjs__webgl_unavailable_message'>WebGL context cannot be retrieved, so oncoprint cannot be used. Please visit <a href='http://webglreport.com'>WebGL Report</a> to explore your browsers WebGL capabilities.</p>");this.ctr_selector=e;var i=f("<span></span>").css({position:"relative",display:"inline-block"}).appendTo(e),p=f("<div></div>").css({position:"absolute",display:"inline-block"}).appendTo(i),m=f("<span></span>").css({position:"absolute"}).appendTo(e),y=f("<div></div>").css({position:"absolute",display:"inline-block",top:0,left:0,"min-height":1}).appendTo(i),v=f("<canvas></canvas>").css({display:"inline-block",position:"absolute",left:"0px",top:"0px"}).addClass("noselect").attr({width:"150",height:"250"}),S=f("<div></div>").css({position:"absolute",left:"150px",top:"0px"}).addClass("noselect").attr({width:"50",height:"250"}),C=f("<div></div>").css({position:"absolute",top:"250px","min-height":1}).addClass("noselect"),k=f("<div>").css({width:t,display:"inline-block",position:"absolute",left:"200px",top:"0px"}).addClass("noselect"),M=f("<canvas></canvas>").attr({width:"0px",height:"0px"}).css({position:"absolute",top:"0px",left:"0px"}).addClass("noselect"),A=f("<div>").css({position:"absolute","overflow-x":"scroll","overflow-y":"scroll",top:"0",left:"0px",height:"1px"}).addClass("oncoprintjs__scroll_div"),T=f("<div>").appendTo(A),O=f("<canvas></canvas>").attr({width:"0px",height:"0px"}).css({position:"absolute",top:"0px",left:"0px"}).addClass("noselect"),P=f("<div>").css({position:"absolute"}),j=f("<div>").css({position:"absolute",outline:"solid 1px black",display:"none"}).addClass("noselect"),I=f("<canvas></canvas>").attr("width",300).attr("height",300).css({position:"absolute",top:"0px",left:"0px","z-index":0}).addClass("noselect"),D=f("<canvas></canvas>").attr("width",300).attr("height",300).css({position:"absolute",top:"0px",left:"0px","z-index":1}).addClass("noselect");v.appendTo(p),k.appendTo(p),S.appendTo(p),P.appendTo(p),C.appendTo(y),j.appendTo(i),M.appendTo(k),O.appendTo(k),A.appendTo(k),A.on("mousemove mousedown mouseup",function(e){O.trigger(e)}),I.appendTo(j),D.appendTo(j),this.$ctr=i,this.$oncoprint_ctr=p,this.$cell_div=k,this.$legend_div=C,this.$track_options_div=S,this.$track_info_div=P,this.$dummy_scroll_div=A,this.$minimap_div=j,this.$cell_canvas=M,this.$cell_overlay_canvas=O,this.model=new r,this.cell_view=new o(k,M,O,T,this.model,new u(m),function(e,t){var r=n.model.getIdsInLeftInterval(e,t);n.setHorzZoom(n.model.getHorzZoomToFit(n.cell_view.visible_area_width,r)),n.$dummy_scroll_div.scrollLeft(n.model.getZoomedColumnLeft(r[0])),n.id_clipboard=r},function(){var e=null,t=null;return function(r,o){null===r?(t=null,n.highlightTrack(null),clearTimeout(e)):t!==r&&(n.highlightTrack(null),clearTimeout(e),t=r,e=setTimeout(function(){n.highlightTrack(t)},250))}}()),this.minimap_view=new d(j,I,D,this.model,this.cell_view,150,150,function(e,t){n.setScroll(e,t)},function(e){n.setViewport(e.col,e.scroll_y_proportion,e.num_cols,e.zoom_y)},function(e){var t=n.cell_view.getViewportOncoprintSpace(n.model),r=(t.left+t.right)/2,o=Math.floor(r/(n.model.getCellWidth(!0)+n.model.getCellPadding(!0)));n.setHorzZoom(e);var a=n.cell_view.getViewportOncoprintSpace(n.model),i=o*(n.model.getCellWidth()+n.model.getCellPadding()),s=n.model.getHorzZoom()*(a.right-a.left)/2;n.setHorzScroll(i-s)},function(e){var t=n.cell_view.getViewportOncoprintSpace(n.model),r=(t.top+t.bottom)/2;n.setVertZoom(e);var o=n.cell_view.getViewportOncoprintSpace(n.model),a=n.model.getVertZoom()*(o.bottom-o.top)/2;n.setVertScroll(r*n.model.getVertZoom()-a)},function(){x(n);var e=n.model.getZoomedColumnLeft();n.setHorzScroll(Math.min.apply(null,n.keep_horz_zoomed_to_fit_ids.map(function(t){return e[t]})))},function(){n.setMinimapVisible(!1)}),this.track_options_view=new s(S,function(e){var t=n.model.getContainingTrackGroup(e),r=t.indexOf(e);if(r>0){var o=null;r>=2&&(o=t[r-2]),n.moveTrack(e,o)}},function(e){var t=n.model.getContainingTrackGroup(e),r=t.indexOf(e);r<t.length-1&&n.moveTrack(e,t[r+1])},function(e){n.removeTrack(e)},function(e,t){n.setTrackSortDirection(e,t)},function(e){n.removeExpansionTracksFor(e)}),this.track_info_view=new c(P),this.label_view=new a(v,this.model,new u(m,{noselect:!0})),this.label_view.setDragCallback(function(e,t){n.moveTrack(e,t)}),this.legend_view=new l(C,10,20),this.keep_sorted=!1,this.keep_horz_zoomed_to_fit=!1,this.keep_horz_zoomed_to_fit_ids=[];this.cell_view,this.model;this.target_dummy_scroll_left=0,this.target_dummy_scroll_top=0,function(e){A.scroll(function(t){var r=A.scrollLeft(),o=A.scrollTop();if(r!==n.target_dummy_scroll_left||o!==n.target_dummy_scroll_top){n.target_dummy_scroll_left=r,n.target_dummy_scroll_top=o;var a=w(e),i=a.left,s=a.top,l=i>0?r/i:0,u=s>0?o/s:0;l=h(l,0,1),u=h(u,0,1);var c=b(n),d=_(n),p=Math.round(c*l),f=Math.round(d*u);n.keep_horz_zoomed_to_fit=!1,E(n,p,f)}})}(n),this.horz_zoom_callbacks=[],this.minimap_close_callbacks=[],f(window).resize(function(){g(n)}),this.id_clipboard=[],this.clipboard_change_callbacks=[],this.pending_resize_and_organize=!1}var t=function(){var e=0;return function(){return e+=1}}(),n=function(e){e.model.rendering_suppressed_depth>0||e.$legend_div.css({top:e.model.getCellViewHeight()+30})},m=function(e){e.model.rendering_suppressed_depth>0||setTimeout(function(){y(e),n(e)},0)},y=function(e){e.$ctr.css({"min-height":e.model.getCellViewHeight()+Math.max(e.$legend_div.outerHeight(),e.$minimap_div.is(":visible")?e.$minimap_div.outerHeight():0)+30})},g=function(e,t){if(!(e.model.rendering_suppressed_depth>0)){var r=f(e.ctr_selector).width();if(0===r)return void(e.pending_resize_and_organize=!0);e.$track_options_div.css({left:e.label_view.getWidth()}),e.$track_info_div.css({left:e.label_view.getWidth()+e.track_options_view.getWidth()});var o=e.label_view.getWidth()+e.track_options_view.getWidth()+e.track_info_view.getWidth();e.$cell_div.css("left",o),e.cell_view.setWidth(r-o-20,e.model),n(e),e.legend_view.setWidth(r-e.$minimap_div.outerWidth()-20,e.model),y(e),e.$ctr.css({"min-width":r}),setTimeout(function(){e.keep_horz_zoomed_to_fit&&x(e),t&&t()},0)}},v=function(e,t){e.model.rendering_suppressed_depth>0||setTimeout(function(){g(e,t)},0)},b=function(e){return Math.max(0,e.model.getOncoprintWidth()-e.cell_view.getWidth())},_=function(e){return Math.max(0,e.model.getOncoprintHeight()-e.model.getCellViewHeight())},w=function(e){var t=e.cell_view.getDummyScrollDivClientSize();return{left:Math.max(0,e.$dummy_scroll_div[0].scrollWidth-t.width),top:Math.max(0,e.$dummy_scroll_div[0].scrollHeight-t.height)}};e.prototype.setMinimapVisible=function(e){this.webgl_unavailable||(e?this.$minimap_div.css({display:"block",top:this.model.getCellViewHeight()+30,left:f(this.ctr_selector).width()-this.$minimap_div.outerWidth()-10}):(this.$minimap_div.css("display","none"),k(this)),v(this))},e.prototype.scrollTo=function(e){this.webgl_unavailable||this.$dummy_scroll_div.scrollLeft(e)},e.prototype.onHorzZoom=function(e){this.webgl_unavailable||this.horz_zoom_callbacks.push(e)},e.prototype.onMinimapClose=function(e){this.webgl_unavailable||this.minimap_close_callbacks.push(e)},e.prototype.moveTrack=function(e,t){this.webgl_unavailable||(this.model.moveTrack(e,t),this.cell_view.moveTrack(this.model),this.label_view.moveTrack(this.model),this.track_options_view.moveTrack(this.model),this.track_info_view.moveTrack(this.model),this.minimap_view.moveTrack(this.model,this.cell_view),this.keep_sorted&&this.model.isSortAffected([e,t],"track")&&this.sort(),v(this))},e.prototype.setTrackGroupOrder=function(e,t,n){this.webgl_unavailable||(this.model.setTrackGroupOrder(e,t),this.cell_view.setTrackGroupOrder(this.model),this.label_view.setTrackGroupOrder(this.model),this.track_options_view.setTrackGroupOrder(this.model),this.track_info_view.setTrackGroupOrder(this.model),!n&&this.keep_sorted&&this.model.isSortAffected(e,"group")&&this.sort(),v(this))},e.prototype.setTrackGroupLegendOrder=function(e){this.webgl_unavailable||(this.model.setTrackGroupLegendOrder(e),this.legend_view.setTrackGroupLegendOrder(this.model),v(this))},e.prototype.keepSorted=function(e){this.webgl_unavailable||(this.keep_sorted=void 0===e||e,this.keep_sorted&&this.sort())},e.prototype.addTracks=function(e){if(!this.webgl_unavailable){var n=[];return e=e.map(function(e){return e.track_id=t(),e.rule_set=i(e.rule_set_params),n.push(e.track_id),e}),this.model.addTracks(e),this.cell_view.addTracks(this.model,n),this.label_view.addTracks(this.model,n),this.track_options_view.addTracks(this.model),this.track_info_view.addTracks(this.model),this.legend_view.addTracks(this.model),this.minimap_view.addTracks(this.model,this.cell_view),this.keep_sorted&&this.model.isSortAffected(n,"track")&&this.sort(),v(this),n}},e.prototype.removeTrack=function(e){this.webgl_unavailable||(this.model.removeTrack(e),this.cell_view.removeTrack(this.model,e),this.label_view.removeTrack(this.model,e),this.track_options_view.removeTrack(this.model,e),this.track_info_view.removeTrack(this.model),this.legend_view.removeTrack(this.model),this.minimap_view.removeTrack(this.model,this.cell_view),this.keep_sorted&&this.model.isSortAffected(e,"track")&&this.sort(),v(this))},e.prototype.removeTracks=function(e){if(!this.webgl_unavailable){this.keepSorted(!1),this.suppressRendering();for(var t=0;t<e.length;t++)this.removeTrack(e[t]);this.keepSorted(!0),this.releaseRendering()}},e.prototype.getTracks=function(){if(!this.webgl_unavailable)return this.model.getTracks().slice()},e.prototype.removeAllTracks=function(){if(!this.webgl_unavailable){var e=this.model.getTracks();this.removeTracks(e)}},e.prototype.removeExpansionTracksFor=function(e){this.removeTracks(this.model.track_expansion_tracks[e].slice())},e.prototype.disableTrackExpansion=function(e){this.model.disableTrackExpansion(e)},e.prototype.enableTrackExpansion=function(e){this.model.enableTrackExpansion(e)},e.prototype.removeAllExpansionTracksInGroup=function(e){var t,n=this.model.getTrackGroups()[e],r=[];for(t=0;t<n.length;t++)this.model.isTrackExpanded(n[t])&&r.push(n[t]);for(this.suppressRendering(),t=0;t<r.length;t++)this.removeExpansionTracksFor(r[t]);this.releaseRendering()},e.prototype.setHorzZoomToFit=function(e){this.webgl_unavailable||(this.keep_horz_zoomed_to_fit=!0,this.updateHorzZoomToFitIds(e),x(this))},e.prototype.updateHorzZoomToFitIds=function(e){this.webgl_unavailable||(this.keep_horz_zoomed_to_fit_ids=e.slice(),this.keep_horz_zoomed_to_fit&&x(this))};var x=function(e){e.setHorzZoom(S(e,e.keep_horz_zoomed_to_fit_ids),!0)},S=function(e,t){return t=t||[],e.model.getHorzZoomToFit(e.cell_view.visible_area_width,t)},C=function(e){for(var t=0;t<e.horz_zoom_callbacks.length;t++)e.horz_zoom_callbacks[t](e.model.getHorzZoom())},k=function(e){for(var t=0;t<e.minimap_close_callbacks.length;t++)e.minimap_close_callbacks[t]()};e.prototype.getHorzZoom=function(){if(!this.webgl_unavailable)return this.model.getHorzZoom()},e.prototype.setHorzZoom=function(e,t){if(!this.webgl_unavailable)return this.keep_horz_zoomed_to_fit=this.keep_horz_zoomed_to_fit&&t,this.model.setHorzZoom(e),this.cell_view.setHorzZoom(this.model),this.minimap_view.setHorzZoom(this.model,this.cell_view),C(this),this.model.getHorzZoom()},e.prototype.getVertZoom=function(){if(!this.webgl_unavailable)return this.model.getVertZoom()},e.prototype.setVertZoom=function(e){if(!this.webgl_unavailable)return this.model.setVertZoom(e),this.cell_view.setVertZoom(this.model,e),this.label_view.setVertZoom(this.model,e),this.track_info_view.setVertZoom(this.model),this.track_options_view.setVertZoom(this.model),this.minimap_view.setVertZoom(this.model,this.cell_view),v(this),this.model.getVertZoom()};var E=function(e,t,n){t=Math.min(t,b(e)),n=Math.min(n,_(e)),e.model.setScroll(t,n),e.cell_view.setScroll(e.model),e.label_view.setScroll(e.model),e.track_info_view.setScroll(e.model),e.track_options_view.setScroll(e.model),e.minimap_view.setScroll(e.model,e.cell_view)},M=function(e){var t=e.model.getHorzScroll(),n=e.model.getVertScroll(),r=b(e),o=_(e),a=r>0?t/r:0,i=o>0?n/o:0;a=h(a,0,1),i=h(i,0,1);var s=w(e),l=s.left,u=s.top;e.target_dummy_scroll_left=Math.round(a*l),e.target_dummy_scroll_top=Math.round(i*u),e.$dummy_scroll_div.scrollLeft(e.target_dummy_scroll_left),e.$dummy_scroll_div.scrollTop(e.target_dummy_scroll_top)};return e.prototype.setScroll=function(e,t){this.webgl_unavailable||(E(this,e,t),M(this))},e.prototype.setZoom=function(e,t){this.webgl_unavailable||(this.model.setZoom(e,t),this.cell_view.setZoom(this.model),this.label_view.setZoom(this.model),this.track_info_view.setZoom(this.model),this.track_options_view.setZoom(this.model),this.minimap_view.setZoom(this.model,this.cell_view))},e.prototype.setHorzScroll=function(e){if(!this.webgl_unavailable)return this.model.setHorzScroll(Math.min(e,b(this))),this.cell_view.setHorzScroll(this.model),this.label_view.setHorzScroll(this.model),this.track_info_view.setHorzScroll(this.model),this.track_options_view.setHorzScroll(this.model),this.minimap_view.setHorzScroll(this.model,this.cell_view),M(this),this.model.getHorzScroll()},e.prototype.setVertScroll=function(e){if(!this.webgl_unavailable)return this.model.setVertScroll(Math.min(e,_(this))),this.cell_view.setVertScroll(this.model),this.label_view.setVertScroll(this.model),this.track_info_view.setVertScroll(this.model),this.track_options_view.setVertScroll(this.model),this.minimap_view.setVertScroll(this.model,this.cell_view),M(this),this.model.getVertScroll()},e.prototype.setViewport=function(e,t,n,r){if(!this.webgl_unavailable){var o=this.model.getHorzZoomToFitNumCols(this.cell_view.getWidth(),n);this.setZoom(o,r);var a=Math.min(e*(this.model.getCellWidth()+this.model.getCellPadding()),b(this)),i=Math.min(t*this.model.getOncoprintHeight(),_(this));this.setScroll(a,i),C(this)}},e.prototype.getTrackData=function(e){if(!this.webgl_unavailable)return this.model.getTrackData(e)},e.prototype.getTrackDataIdKey=function(e){if(!this.webgl_unavailable)return this.model.getTrackDataIdKey(e)},e.prototype.setTrackData=function(e,t,n){this.webgl_unavailable||(this.model.setTrackData(e,t,n),this.cell_view.setTrackData(this.model,e),this.legend_view.setTrackData(this.model),this.minimap_view.setTrackData(this.model,this.cell_view),this.keep_sorted&&this.model.isSortAffected(e,"track")&&this.sort(),v(this))},e.prototype.setTrackGroupSortPriority=function(e){this.webgl_unavailable||(this.model.setTrackGroupSortPriority(e),this.cell_view.setTrackGroupSortPriority(this.model),this.keep_sorted&&this.sort(),v(this))},e.prototype.setTrackSortDirection=function(e,t){if(!this.webgl_unavailable)return this.model.isTrackSortDirectionChangeable(e)&&(this.model.setTrackSortDirection(e,t),this.keep_sorted&&this.model.isSortAffected(e,"track")&&this.sort()),this.model.getTrackSortDirection(e)},e.prototype.setTrackSortComparator=function(e,t){this.webgl_unavailable||(this.model.setTrackSortComparator(e,t),this.keep_sorted&&this.model.isSortAffected(e,"track")&&this.sort())},e.prototype.getTrackSortDirection=function(e){if(!this.webgl_unavailable)return this.model.getTrackSortDirection(e)},e.prototype.setTrackInfo=function(e,t){this.webgl_unavailable||(this.model.setTrackInfo(e,t),this.track_info_view.setTrackInfo(this.model))},e.prototype.setTrackTooltipFn=function(e,t){this.webgl_unavailable||this.model.setTrackTooltipFn(e,t)},e.prototype.sort=function(){if(!this.webgl_unavailable){var e=this;this.model.sort().then(function(t){e.cell_view.sort(e.model),e.minimap_view.sort(e.model,e.cell_view),t&&e.setTrackGroupOrder(t.track_group_index,t.track_id_order,!0)})}},e.prototype.shareRuleSet=function(e,t){this.webgl_unavailable||(this.model.shareRuleSet(e,t),this.cell_view.shareRuleSet(this.model,t),this.legend_view.shareRuleSet(this.model),this.minimap_view.shareRuleSet(this.model,this.cell_view))},e.prototype.setRuleSet=function(e,t){this.webgl_unavailable||(this.model.setRuleSet(e,i(t)),this.cell_view.setRuleSet(this.model,e),this.legend_view.setRuleSet(this.model),this.minimap_view.setRuleSet(this.model,this.cell_view),v(this))},e.prototype.setSortConfig=function(e){this.webgl_unavailable||(this.model.setSortConfig(e),this.cell_view.setSortConfig(this.model),this.track_options_view.setSortConfig(this.model),this.keep_sorted&&this.sort())},e.prototype.setIdOrder=function(e){this.webgl_unavailable||(this.model.setIdOrder(e),this.cell_view.setIdOrder(this.model,e),this.minimap_view.setIdOrder(this.model,this.cell_view),this.keep_sorted&&this.sort())},e.prototype.disableInteraction=function(){this.webgl_unavailable||this.track_options_view.disableInteraction()},e.prototype.enableInteraction=function(){this.webgl_unavailable||this.track_options_view.enableInteraction()},e.prototype.suppressRendering=function(){this.webgl_unavailable||(this.model.rendering_suppressed_depth+=1,this.label_view.suppressRendering(),this.cell_view.suppressRendering(),this.track_options_view.suppressRendering(),this.track_info_view.suppressRendering(),this.legend_view.suppressRendering(),this.minimap_view.suppressRendering())},e.prototype.releaseRendering=function(e){this.webgl_unavailable||(this.model.rendering_suppressed_depth-=1,this.model.rendering_suppressed_depth=Math.max(0,this.model.rendering_suppressed_depth),0===this.model.rendering_suppressed_depth&&(this.label_view.releaseRendering(this.model),this.cell_view.releaseRendering(this.model),this.track_options_view.releaseRendering(this.model),this.track_info_view.releaseRendering(this.model),this.legend_view.releaseRendering(this.model),this.minimap_view.releaseRendering(this.model,this.cell_view),v(this,e)))},e.prototype.triggerPendingResizeAndOrganize=function(e){this.webgl_unavailable||this.pending_resize_and_organize&&(this.pending_resize_and_organize=!1,v(this,e))},e.prototype.hideIds=function(e,t){this.webgl_unavailable||(this.model.hideIds(e,t),this.cell_view.hideIds(this.model),this.minimap_view.hideIds(this.model,this.cell_view))},e.prototype.hideTrackLegends=function(e){this.webgl_unavailable||(e=[].concat(e),this.model.hideTrackLegends(e),this.legend_view.hideTrackLegends(this.model),m(this))},e.prototype.showTrackLegends=function(e){this.webgl_unavailable||(e=[].concat(e),this.model.showTrackLegends(e),this.legend_view.showTrackLegends(this.model),m(this))},e.prototype.setCellPaddingOn=function(e){this.webgl_unavailable||(this.model.setCellPaddingOn(e),this.cell_view.setCellPaddingOn(this.model))},e.prototype.toSVG=function(e){if(!this.webgl_unavailable){var t=p.svg(10,10);this.$ctr.append(t);var n=p.group(0,0);t.appendChild(n);var r=p.bgrect(10,10,"#ffffff");e&&n.appendChild(r);var o=this.label_view.toSVGGroup(this.model,!0,0,0);n.appendChild(o);var a=o.getBBox().width+30,i=this.track_info_view.toSVGGroup(this.model,a,0);n.appendChild(i);var s=a+i.getBBox().width+10;n.appendChild(this.cell_view.toSVGGroup(this.model,s,0)),n.appendChild(this.legend_view.toSVGGroup(this.model,0,o.getBBox().y+o.getBBox().height+20));var l=n.getBBox(),u=l.x+l.width,c=l.y+l.height;return t.setAttribute("width",u),t.setAttribute("height",c),e&&(r.setAttribute("width",u),r.setAttribute("height",c)),t.parentNode.removeChild(t),t}},e.prototype.toCanvas=function(e,t){if(!this.webgl_unavailable){var n=this.toSVG(!0);n.setAttribute("xmlns","http://www.w3.org/2000/svg");var r=parseInt(n.getAttribute("width"),10),o=parseInt(n.getAttribute("height"),10),a=document.createElement("canvas");t=t||1;var i=r*t>8192||o*t>8192;a.setAttribute("width",Math.min(8192,r*t)),a.setAttribute("height",Math.min(8192,o*t));var s=document.createElement("div");s.appendChild(n);var l=s.innerHTML,u="data:image/svg+xml;base64,"+window.btoa(l),c=a.getContext("2d");c.setTransform(t,0,0,t,0,0);var d=new Image;return d.onload=function(){c.drawImage(d,0,0),e(a,i)},d.onerror=function(){console.log("IMAGE LOAD ERROR")},d.src=u,d}},e.prototype.toDataUrl=function(e){this.webgl_unavailable||this.toCanvas(function(t){e(t.toDataURL())})},e.prototype.highlightTrack=function(e){this.webgl_unavailable||this.label_view.highlightTrack(e,this.model)},e.prototype.getIdOrder=function(e){if(!this.webgl_unavailable)return this.model.getIdOrder(e)},e.prototype.setIdClipboardContents=function(e){if(!this.webgl_unavailable){this.id_clipboard=e.slice();for(var t=0;t<this.clipboard_change_callbacks.length;t++)this.clipboard_change_callbacks[t](e)}},e.prototype.getIdClipboardContents=function(){if(!this.webgl_unavailable)return this.id_clipboard.slice()},e.prototype.onClipboardChange=function(e){this.webgl_unavailable||this.clipboard_change_callbacks.push(e)},e}();e.exports=m},function(e,t){e.exports=function(){Math.log2=Math.log2||function(e){return Math.log(e)/Math.LN2}}()},function(e,t,n){function r(e,t){return void 0===e?t:e}var o=n(4),a=n(14),i=n(5),s=n(15),l=n(0),u=n(18),c=function(){function e(){this.union_count={},this.sets={}}var t=function(e){var t={};for(var n in e)void 0!==e[n]&&(t[n]=!0);return t};return e.prototype.putSet=function(e,t){this.removeSet(e),this.sets[e]=t;this.union_count;for(var n in t)t[n]&&(this.union_count[n]=this.union_count[n]||0,this.union_count[n]+=1)},e.prototype.removeSet=function(e){var t=this.union_count,n=this.sets[e]||{};for(var r in n)n[r]&&(t[r]-=1,0===t[r]&&delete t[r]);delete this.sets[e]},e.prototype.getUnion=function(){return t(this.union_count)},e}(),d=function(e){for(var t={},n=[],r=0;r<e.length;r++)void 0===t[e[r]]&&(t[e[r]]=!0,n.push(e[r]));return n},p=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},f=function(e,t,n){return Math.min(n,Math.max(t,e))},h=function(){function e(e,t,n,o,a,s){var l=this;this.sort_config={},this.rendering_suppressed_depth=0,this.max_height=500,this.cell_width=r(a,6),this.horz_zoom=r(n,1),this.vert_zoom=r(o,1),this.horz_scroll=0,this.vert_scroll=0,this.bottom_padding=0,this.track_group_padding=r(s,10),this.cell_padding=r(e,3),this.cell_padding_on=r(t,!0),this.cell_padding_off_cell_width_threshold=2,this.cell_padding_off_because_of_zoom=this.getCellWidth()<this.cell_padding_off_cell_width_threshold,this.id_order=[],this.hidden_ids={},this.track_group_legend_order=[],this.track_label={},this.track_label_color={},this.track_html_label={},this.track_link_url={},this.track_description={},this.cell_height={},this.track_padding={},this.track_data_id_key={},this.track_tooltip_fn={},this.track_removable={},this.track_remove_callback={},this.track_sort_cmp_fn={},this.track_sort_direction_changeable={},this.track_sort_direction={},this.track_sort_direction_change_callback={},this.track_data={},this.track_rule_set_id={},this.track_active_rules={},this.track_info={},this.track_has_column_spacing={},this.track_expansion_enabled={},this.track_expand_callback={},this.track_expand_button_getter={},this.track_expansion_tracks={},this.track_expansion_parent={},this.rule_sets={},this.rule_set_active_rules={},this.visible_id_order=new i([],function(){var e=l.hidden_ids;return l.id_order.filter(function(t){return!e[t]})}),this.track_id_to_datum=new i({},function(e,t){var n=e.track_id_to_datum.get();if(null!==e.getContainingTrackGroup(t)){for(var r={},o=e.getTrackData(t)||[],a=e.getTrackDataIdKey(t)||"",i=0;i<o.length;i++)r[o[i][a]]=o[i];n[t]=r}else delete n[t];return n}),this.track_present_ids=new i(new c,function(e,t){var n=e.track_present_ids.get();if(null!==e.getContainingTrackGroup(t)){for(var r={},o=e.getTrackData(t)||[],a=e.getTrackDataIdKey(t)||"",i=0;i<o.length;i++)r[o[i][a]]=!0;n.putSet(t,r)}else n.removeSet(t);return n}),this.present_ids=new i({},function(){return l.track_present_ids.get().getUnion()}),this.track_present_ids.addBoundProperty(this.present_ids),this.id_to_index=new i({},function(){for(var e={},t=l.getIdOrder(!0),n=0;n<t.length;n++)e[t[n]]=n;return e}),this.visible_id_to_index=new i({},function(){for(var e={},t=l.getIdOrder(),n=0;n<t.length;n++)e[t[n]]=n;return e}),this.visible_id_order.addBoundProperty(this.visible_id_to_index),this.track_groups=[],this.track_group_sort_priority=[],this.track_group_header=[],this.track_tops=new i({},function(){for(var e={},t=l.getTrackGroups(),n=0,r=0;r<t.length;r++){var o=t[r];l.getTrackGroupHeader(r).length>0&&o.length>0&&(n+=l.getTrackGroupHeaderSize());for(var a=0;a<o.length;a++){var i=o[a];e[i]=n,n+=l.getTrackHeight(i,!0)}o.length>0&&(n+=l.getTrackGroupPadding(!0))}return e}),this.cell_tops=new i({},function(){var e=l.track_tops.get(),t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]+l.getTrackPadding(n,!0));return t}),this.label_tops=new i({},function(){return l.cell_tops.get()}),this.track_tops.addBoundProperty(this.cell_tops),this.cell_tops.addBoundProperty(this.label_tops),this.track_tops_zoomed=new i({},function(){for(var e={},t=l.getTrackGroups(),n=0,r=0;r<t.length;r++){for(var o=t[r],a=0;a<o.length;a++){var i=o[a];e[i]=n,n+=l.getTrackHeight(i)}o.length>0&&(n+=l.getTrackGroupPadding())}return e}),this.cell_tops_zoomed=new i({},function(){var e=l.track_tops_zoomed.get(),t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]+l.getTrackPadding(n));return t}),this.label_tops_zoomed=new i({},function(){return l.cell_tops_zoomed.get()}),this.track_tops.addBoundProperty(this.track_tops_zoomed),this.track_tops_zoomed.addBoundProperty(this.cell_tops_zoomed),this.cell_tops_zoomed.addBoundProperty(this.label_tops_zoomed),this.column_left=new i({},function(){for(var e=l.getCellWidth(!0),t=l.getCellPadding(!0),n={},r=l.getIdOrder(),o=0;o<r.length;o++)n[r[o]]=o*(e+t);return n}),this.zoomed_column_left=new i({},function(){for(var e=l.getCellWidth(),t=l.getCellPadding(),n={},r=l.getIdOrder(),o=0;o<r.length;o++)n[r[o]]=o*(e+t);return n}),this.column_left_no_padding=new i({},function(){for(var e=l.getCellWidth(!0),t={},n=l.getIdOrder(),r=0;r<n.length;r++)t[n[r]]=r*e;return t}),this.column_left.addBoundProperty(this.zoomed_column_left),this.column_left.addBoundProperty(this.column_left_no_padding),this.precomputed_comparator=new i({},function(e,t){var n=e.precomputed_comparator.get();return n[t]=new m(e.getTrackData(t),e.getTrackSortComparator(t),e.getTrackSortDirection(t),e.getTrackDataIdKey(t)),n})}e.prototype.toggleCellPadding=function(){return this.cell_padding_on=!this.cell_padding_on,this.column_left.update(),this.cell_padding_on},e.prototype.getCellPadding=function(e,t){return this.cell_padding*(e?1:this.horz_zoom)*+this.cell_padding_on*(t?1:+!this.cell_padding_off_because_of_zoom)},e.prototype.getHorzZoom=function(){return this.horz_zoom},e.prototype.getHorzZoomToFitNumCols=function(e,t){var n,r=this.getCellWidth(!0),o=f(e/(t*(r+this.cell_padding)),0,1),a=f(e/(t*r),0,1);if(this.cell_padding_on)if(r*o<this.cell_padding_off_cell_width_threshold)if(r*a>=this.cell_padding_off_cell_width_threshold){var i=this.cell_padding_off_cell_width_threshold/r,s=e/(i*r),l=Math.ceil(s);n=e/(l*r)}else n=a;else n=o;else n=a;return n},e.prototype.getHorzZoomToFit=function(e,t){if(t=t||[],0===t.length)return 1;for(var n=this.getVisibleIdToIndexMap(),r=t.map(function(e){return n[e]}),o=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,i=0;i<r.length;i++)o=Math.max(r[i],o),a=Math.min(r[i],a);var s=o-a+1;return this.getHorzZoomToFitNumCols(e,s)},e.prototype.getMinHorzZoom=function(){return Math.min(100/(this.getIdOrder().length*this.getCellWidth(!0)+(this.getIdOrder().length-1)*this.getCellPadding(!0)),1)},e.prototype.getMinVertZoom=function(){return this.max_height/this.getOncoprintHeight(!0)},e.prototype.setHorzScroll=function(e){return this.horz_scroll=Math.max(0,e),this.horz_scroll},e.prototype.setVertScroll=function(e){return this.vert_scroll=Math.max(0,e),this.vert_scroll},e.prototype.setScroll=function(e,t){this.setHorzScroll(e),this.setVertScroll(t)},e.prototype.getHorzScroll=function(){return this.horz_scroll},e.prototype.getVertScroll=function(){return this.vert_scroll},e.prototype.setZoom=function(e,t){this.setHorzZoom(e),this.setVertZoom(t)};var t=function(e,t){e.cell_padding_off_because_of_zoom=t,e.column_left.update()};e.prototype.setHorzZoom=function(e){var n=this.getMinHorzZoom();return this.horz_zoom=f(e,n,1),this.column_left.update(),this.getCellWidth()<this.cell_padding_off_cell_width_threshold&&!this.cell_padding_off_because_of_zoom?t(this,!0):this.getCellWidth()>=this.cell_padding_off_cell_width_threshold&&this.cell_padding_off_because_of_zoom&&t(this,!1),this.horz_zoom},e.prototype.getVertZoom=function(){return this.vert_zoom},e.prototype.setVertZoom=function(e){var t=this.getMinVertZoom();return this.vert_zoom=f(e,t,1),this.track_tops.update(),this.vert_zoom},e.prototype.hideTrackLegends=function(e){e=[].concat(e);for(var t=0;t<e.length;t++)this.getRuleSet(e[t]).exclude_from_legend=!0},e.prototype.showTrackLegends=function(e){e=[].concat(e);for(var t=0;t<e.length;t++)this.getRuleSet(e[t]).exclude_from_legend=!1};var n=function(e,t){for(var n=e.track_rule_set_id[t],r=e.track_active_rules[t],o=e.rule_set_active_rules[n],a=Object.keys(r),i=0;i<a.length;i++){var s=a[i];o.hasOwnProperty(s)&&(o[s]-=1,o[s]<=0&&delete o[s])}e.track_active_rules[t]={}},a=function(e,t,r){n(e,t),e.track_active_rules[t]=r;for(var o=e.track_rule_set_id[t],a=e.rule_set_active_rules[o],i=Object.keys(r),s=0;s<i.length;s++){var l=i[s];a[l]=a[l]||0,a[l]+=1}};e.prototype.getIdentifiedShapeListList=function(e,t,n){var r={},o=this.getTrackData(e),i=this.getTrackDataIdKey(e),s=this.getTrackHasColumnSpacing(e),l=this.getCellWidth(t)+(s?0:this.getCellPadding(t,!0)),u=this.getRuleSet(e).apply(o,l,this.getCellHeight(e,t),r);a(this,e,r);var c=function(e,t){var n=parseFloat(e.z),r=parseFloat(t.z);return n<r?-1:n>r?1:0};return u.map(function(e,t){return n&&e.sort(c),{id:o[t][i],shape_list:e}})},e.prototype.getActiveRules=function(e){var t=this.rule_set_active_rules[e];return t?this.rule_sets[e].getRulesWithId().filter(function(e){return!!t[e.id]}):[]},e.prototype.getRuleSets=function(){for(var e=this,t=this.getTrackGroupLegendOrder(),n={},r=this.getTrackGroups(),o=[],a=0;a<t.length;a++)n[t[a]]=!0,r[t[a]]&&o.push(r[t[a]]);for(var a=0;a<r.length;a++)!n[a]&&r[a]&&o.push(r[a]);var i=o.reduce(function(e,t){return e.concat(t)},[]),s=i.map(function(t){return e.track_rule_set_id[t]});return d(s).map(function(t){return e.rule_sets[t]})},e.prototype.getTrackHasColumnSpacing=function(e){return!!this.track_has_column_spacing[e]},e.prototype.getCellWidth=function(e){return this.cell_width*(e?1:this.horz_zoom)},e.prototype.getCellHeight=function(e,t){return this.cell_height[e]*(t?1:this.vert_zoom)},e.prototype.getTrackInfo=function(e){return this.track_info[e]},e.prototype.setTrackInfo=function(e,t){this.track_info[e]=t},e.prototype.getTrackHeight=function(e,t){return this.getCellHeight(e,t)+2*this.getTrackPadding(e,t)},e.prototype.getTrackPadding=function(e,t){return this.track_padding[e]*(t?1:this.vert_zoom)},e.prototype.getBottomPadding=function(){return this.bottom_padding},e.prototype.getTrackSortDirection=function(e){return this.track_sort_direction[e]},e.prototype.setTrackSortDirection=function(e,t,n){this.track_sort_direction[e]=t,n||this.track_sort_direction_change_callback[e](e,t),this.precomputed_comparator.update(this,e)},e.prototype.setCellPaddingOn=function(e){this.cell_padding_on=e,this.column_left.update()},e.prototype.getIdOrder=function(e){return e?this.id_order:this.visible_id_order.get()},e.prototype.getIdToIndexMap=function(){return this.id_to_index.get()},e.prototype.getVisibleIdToIndexMap=function(){return this.visible_id_to_index.get()},e.prototype.getHiddenIds=function(){var e=this.hidden_ids;return this.id_order.filter(function(t){return!!e[t]})},e.prototype.isSortAffected=function(e,t){e=[].concat(e);var n,r=this;return n="track"===t?e.map(function(e){return r.getContainingTrackGroupIndex(e)}):e,"cluster"!==this.sort_config.type||n.indexOf(this.sort_config.track_group_index)>-1},e.prototype.setIdOrder=function(e){this.id_order=e.slice(),Object.freeze(this.id_order),this.id_to_index.update(),this.visible_id_order.update(),this.column_left.update()},e.prototype.hideIds=function(e,t){t&&(this.hidden_ids={});for(var n=0,r=e.length;n<r;n++)this.hidden_ids[e[n]]=!0;this.visible_id_order.update(),this.column_left.update()},e.prototype.setTrackGroupOrder=function(e,t){this.track_groups[e]=t,this.track_tops.update()},e.prototype.moveTrackGroup=function(e,t){for(var n=[],r=[],o=this.track_groups[e],a=0;a<this.track_groups.length;a++)a!==e&&a!==t&&(n.push(this.track_groups[a]),r.push(this.track_group_header[a])),a===t&&(n.push(o),r.push(this.track_group_header[e]));return this.track_groups=n,this.track_group_header=r,this.track_tops.update(),this.track_groups},e.prototype.addTracks=function(e){for(var t=0;t<e.length;t++){var n=e[t];h(this,n.track_id,n.target_group,n.track_group_header,n.cell_height,n.track_padding,n.has_column_spacing,n.data_id_key,n.tooltipFn,n.link_url,n.removable,n.removeCallback,n.label,n.description,n.track_info,n.sortCmpFn,n.sort_direction_changeable,n.init_sort_direction,n.onSortDirectionChange,n.data,n.rule_set,n.track_label_color,n.html_label,n.expansion_of,n.expandCallback,n.expandButtonTextGetter)}this.track_tops.update()};var h=function(e,t,n,o,a,i,s,l,u,c,d,p,f,h,m,y,g,v,b,_,w,x,S,C,k,E){for(e.track_label[t]=r(f,"Label"),e.track_label_color[t]=r(x,"black"),e.track_link_url[t]=r(c,null),e.track_description[t]=r(h,""),e.cell_height[t]=r(a,23),e.track_padding[t]=r(i,5),e.track_has_column_spacing[t]=r(s,!0),e.track_tooltip_fn[t]=r(u,function(e){return e+""}),e.track_removable[t]=r(d,!1),e.track_remove_callback[t]=r(p,function(){}),void 0!==k&&(e.track_expand_callback[t]=k,e.track_expansion_enabled[t]=!0),void 0!==E&&(e.track_expand_button_getter[t]=E),e.track_sort_cmp_fn[t]=r(y,function(){return 0}),e.track_sort_direction_changeable[t]=r(g,!1),e.track_sort_direction_change_callback[t]=r(b,function(){}),e.track_data[t]=r(_,[]),e.track_data_id_key[t]=r(l,"id"),e.track_info[t]=r(m,""),void 0!==S&&(e.track_html_label[t]=S),void 0!==w&&(e.rule_sets[w.rule_set_id]=w,e.rule_set_active_rules[w.rule_set_id]={},e.track_rule_set_id[t]=w.rule_set_id),e.track_active_rules[t]={},e.track_sort_direction[t]=r(v,1),n=r(n,0);n>=e.track_groups.length;)e.track_groups.push([]),e.track_group_header.push("");o&&(e.track_group_header[n]=o);var M=e.track_groups[n],A=void 0!==C?M.indexOf(e.getLastExpansion(C))+1:M.length;if(M.splice(A,0,t),void 0!==C){if(e.track_expansion_tracks.hasOwnProperty(C)||(e.track_expansion_tracks[C]=[]),-1!==e.track_expansion_tracks[C].indexOf(t))throw new Error("Illegal state: duplicate expansion track ID");e.track_expansion_parent[t]=C,e.track_expansion_tracks[C].push(t)}e.track_id_to_datum.update(e,t),e.track_present_ids.update(e,t),e.precomputed_comparator.update(e,t),e.setIdOrder(Object.keys(e.present_ids.get()))},y=function(e,t,n){var r;t=parseInt(t);var o;for(o=0;o<e.track_groups.length;o++)if(e.track_groups[o].indexOf(t)>-1){r=e.track_groups[o];break}return r?n?o:r:null},g=function(e,t){var n,r=e.track_expansion_parent[t];return n=void 0===r?function(t){return null===t?null:t.filter(function(t){return void 0===e.track_expansion_parent[t]})}(y(e,t)):e.track_expansion_tracks[r],n?n.slice():null},v=function(e,t){for(var n=!1,r=e.getTracks(),o=0;o<r.length;o++)if(e.track_rule_set_id[r[o]]===t){n=!0;break}return n},b=function(e,t){delete e.rule_sets[t],delete e.rule_set_active_rules[t]};e.prototype.removeTrack=function(e){var t=this.track_rule_set_id[e];this.track_remove_callback[e](e),delete this.track_data[e],delete this.track_rule_set_id[e],delete this.track_label[e],delete this.track_link_url[e],delete this.cell_height[e],delete this.track_padding[e],delete this.track_data_id_key[e],delete this.track_tooltip_fn[e],delete this.track_removable[e],delete this.track_remove_callback[e],delete this.track_sort_cmp_fn[e],delete this.track_sort_direction_changeable[e],delete this.track_sort_direction[e],delete this.track_info[e],delete this.track_has_column_spacing[e],delete this.track_expansion_enabled[e],delete this.track_expand_callback[e],delete this.track_expand_button_getter[e],delete this.track_expansion_tracks[e];var n=y(this,e);null!==n&&n.splice(n.indexOf(e),1);var r=this.track_expansion_tracks[this.track_expansion_parent[e]];r&&r.splice(r.indexOf(e),1),delete this.track_expansion_parent[e],this.track_tops.update(),this.track_present_ids.update(this,e),this.track_id_to_datum.update(this,e),this.setIdOrder(Object.keys(this.present_ids.get())),v(this,t)||b(this,t)},e.prototype.getOverlappingCell=function(e,t){var n=this.getIdOrder(),r=this.getZoomedColumnLeft(),a=o(n,e,function(e){return r[e]},!0);if(-1===a)return null;var i=n[a],s=this.getTracks(),l=this.getCellTops(),u=o(s,t,function(e){return l[e]},!0);if(-1===u)return null;var c=s[u],d=r[i]+this.getCellWidth();return this.getTrackHasColumnSpacing(c)||(d+=this.getCellPadding()),e<=d&&t<l[c]+this.getCellHeight(c)?{id:i,track:c,top:l[c],left:r[i]}:null},e.prototype.getTrackDatum=function(e,t){var n=this.track_id_to_datum.get()[e][t];return void 0===n&&(n=null),n},e.prototype.getTrackTops=function(e){return void 0===e?p(this.track_tops.get()):this.track_tops.get()[e]},e.prototype.getZoomedTrackTops=function(e){return void 0===e?p(this.track_tops_zoomed.get()):this.track_tops_zoomed.get()[e]},e.prototype.getCellTops=function(e,t){return void 0===e?p((t?this.cell_tops:this.cell_tops_zoomed).get()):(t?this.cell_tops:this.cell_tops_zoomed).get()[e]},e.prototype.getLabelTops=function(e,t){return void 0===e?p((t?this.label_tops:this.label_tops_zoomed).get()):(t?this.label_tops:this.label_tops_zoomed).get()[e]},e.prototype.getContainingTrackGroup=function(e){return g(this,e)},e.prototype.getContainingTrackGroupIndex=function(e){return y(this,e,!0)},e.prototype.setTrackGroupHeader=function(e,t){this.track_group_header[e]=t,this.track_tops.update()},e.prototype.getTrackGroupHeader=function(e){return this.track_group_header[e]||""},e.prototype.getTrackGroupHeaderSize=function(){return 20},e.prototype.getTrackGroups=function(){return this.track_groups},e.prototype.getTracks=function(){for(var e=[],t=0;t<this.track_groups.length;t++)for(var n=0;n<this.track_groups[t].length;n++)e.push(this.track_groups[t][n]);return e},e.prototype.getIdsInLeftInterval=function(e,t){var n=this.getCellWidth(),r=this.getCellPadding(),o=this.getIdOrder(),a=Math.floor(e/(n+r));e-a*(n+r)>n&&(a+=1);var i=Math.floor(t/(n+r));return o.slice(a,i+1)},e.prototype.getColumnLeft=function(e){return void 0===e?this.column_left.get():this.column_left.get()[e]},e.prototype.getColumnLeftNoPadding=function(e){return void 0===e?this.column_left_no_padding.get():this.column_left_no_padding.get()[e]},e.prototype.getZoomedColumnLeft=function(e){return void 0===e?this.zoomed_column_left.get():this.zoomed_column_left.get()[e]},e.prototype.getOncoprintHeight=function(e){var t=this.getTracks(),n=t[t.length-1];return(e?this.getTrackTops(n):this.getZoomedTrackTops(n))+this.getTrackHeight(n,e)+this.getBottomPadding()},e.prototype.getOncoprintWidth=function(e){return this.getIdOrder().length*(this.getCellWidth(e)+this.getCellPadding(e))},e.prototype.getOncoprintWidthNoColumnPadding=function(e){return this.getIdOrder().length*this.getCellWidth(e)},e.prototype.getCellViewHeight=function(){return Math.min(this.max_height,this.getOncoprintHeight())},e.prototype.getCellViewWidth=function(){return this.getOncoprintWidth()},e.prototype.moveTrack=function(e,t){function n(e,t,n,r){var o=e.indexOf(t),a=e.indexOf(n),i=e.slice(o,a+1);e.splice(o,i.length);var s=null===r?0:e.indexOf(r)+1;e.splice.bind(e,s,0).apply(null,i)}var r,o=y(this,e),a=this.track_expansion_parent[e];null!==o&&(r=void 0!==a&&null===t?a:this.getLastExpansion(t),n(o,e,this.getLastExpansion(e),r)),void 0!==this.track_expansion_parent[e]&&n(this.track_expansion_tracks[a],e,e,t),this.track_tops.update()},e.prototype.getTrackLabel=function(e){return this.track_label[e]},e.prototype.getTrackLabelColor=function(e){return this.track_label_color[e]},e.prototype.getOptionalHtmlTrackLabel=function(e){return this.track_html_label[e]},e.prototype.getTrackLinkUrl=function(e){return this.track_link_url[e]},e.prototype.getTrackDescription=function(e){return this.track_description[e]},e.prototype.getTrackTooltipFn=function(e){return this.track_tooltip_fn[e]},e.prototype.setTrackTooltipFn=function(e,t){this.track_tooltip_fn[e]=t},e.prototype.getTrackDataIdKey=function(e){return this.track_data_id_key[e]},e.prototype.getTrackGroupPadding=function(e){return this.track_group_padding*(e?1:this.vert_zoom)},e.prototype.isTrackRemovable=function(e){return this.track_removable[e]},e.prototype.isTrackSortDirectionChangeable=function(e){return this.track_sort_direction_changeable[e]},e.prototype.isTrackExpandable=function(e){return Boolean(this.track_expansion_enabled[e])},e.prototype.expandTrack=function(e){return this.track_expand_callback[e](e)},e.prototype.disableTrackExpansion=function(e){this.track_expansion_enabled[e]=!1},e.prototype.enableTrackExpansion=function(e){if(!this.track_expand_callback.hasOwnProperty(e))throw new Error("Track '"+e+"' has no expandCallback");this.track_expansion_enabled[e]=!0},e.prototype.isTrackExpanded=function(e){return this.track_expansion_tracks.hasOwnProperty(e)&&this.track_expansion_tracks[e].length>0},e.prototype.getExpandButtonText=function(e){var t=this;return function(e){return t.track_expand_button_getter[e]||function(e){return e?"Expand more":"Expand"}}(e)(this.isTrackExpanded(e))},e.prototype.isExpansionOf=function(e,t){return this.track_expansion_tracks.hasOwnProperty(t)&&-1!==this.track_expansion_tracks[t].indexOf(e)},e.prototype.getLastExpansion=function(e){for(var t=this.track_expansion_tracks[e];t&&t.length;)e=t[t.length-1],t=this.track_expansion_tracks[e];return e},e.prototype.getRuleSet=function(e){return this.rule_sets[this.track_rule_set_id[e]]},e.prototype.shareRuleSet=function(e,t){a(this,t,{});var n=this.track_rule_set_id[t];this.track_rule_set_id[t]=this.track_rule_set_id[e],v(this,n)||b(this,n)},e.prototype.setRuleSet=function(e,t){a(this,e,{});var n=this.track_rule_set_id[e];this.rule_sets[t.rule_set_id]=t,this.rule_set_active_rules[t.rule_set_id]={},this.track_rule_set_id[e]=t.rule_set_id,v(this,n)||b(this,n)},e.prototype.getTrackSortComparator=function(e){return this.track_sort_cmp_fn[e]},e.prototype.setTrackSortComparator=function(e,t){this.track_sort_cmp_fn[e]=t,this.precomputed_comparator.update(this,e)},e.prototype.getTrackData=function(e){return this.track_data[e]},e.prototype.clusterTrackGroup=function(e,t){var n=this,r=new l.Deferred,o={},a=this.getTrackGroups()[e],i=[];void 0!==a&&(i=g(this,a[0])||[]);for(var u=0;u<i.length;u++)for(var c=i[u],d=this.getTrackDataIdKey(c),p=this.getTrackData(c),f=0;f<p.length;f++){var h=p[f][d],m=t(p[f]);o[h]=o[h]||{},o[h][c]=m}return Object.keys(o).length?(a.forEach(function(e){n.setTrackSortDirection(e,0,!0)}),l.when(s.hclusterColumns(o),s.hclusterTracks(o)).then(function(t,o){n.setIdOrder(t.map(function(e){return e.caseId}));var a=o.map(function(e){return parseInt(e.entityId,10)}),i=[];a.forEach(function(e){i.push(e),Array.prototype.push.apply(i,n.track_expansion_tracks[e]||[])}),r.resolve({track_group_index:e,track_id_order:i})}).fail(function(){r.reject()}),r.promise()):r.resolve().promise()},e.prototype.setTrackData=function(e,t,n){this.track_data[e]=t,this.track_data_id_key[e]=n,this.track_id_to_datum.update(this,e),this.track_present_ids.update(this,e),this.setIdOrder(Object.keys(this.present_ids.get())),this.precomputed_comparator.update(this,e)},e.prototype.computeTrackIdToDatum=function(e){this.track_id_to_datum[e]={};for(var t=this.track_data[e]||[],n=this.track_data_id_key[e],r=0;r<t.length;r++)this.track_id_to_datum[e][t[r][n]]=t[r]},e.prototype.setTrackGroupLegendOrder=function(e){this.track_group_legend_order=e.slice()},e.prototype.getTrackGroupLegendOrder=function(){return this.track_group_legend_order},e.prototype.setTrackGroupSortPriority=function(e){this.track_group_sort_priority=e,this.sort()};var _=function(e){var t=e.getIdOrder(!0).slice();t.sort(function(e,t){return e.localeCompare(t)}),e.setIdOrder(t)},w=function(e){var t,n=e.track_group_sort_priority,r=e.getTrackGroups();t=n.length<r.length?r:n.map(function(e){return r[e]});var o=t.reduce(function(e,t){return e.concat(t)},[]),a=e.precomputed_comparator.get(),i=function(e){for(var t=[],n=[],r=0;r<o.length;r++){var i=a[o[r]].getSortValue(e);t.push(i.mandatory),n.push(i.preferred)}return t.concat(n)},s=e.getIdOrder(!0).map(function(e){return{id:e,vector:i(e)}}),l=u.bucketSort(s,function(e){return e.vector});e.setIdOrder(l.map(function(e){return e.id}))};return e.prototype.sort=function(){var e=new l.Deferred;return this.sort_config=this.sort_config||{},"alphabetical"===this.sort_config.type?(_(this),e.resolve()):"order"===this.sort_config.type?(this.setIdOrder(this.sort_config.order),e.resolve()):"cluster"===this.sort_config.type?this.clusterTrackGroup(this.sort_config.track_group_index,this.sort_config.clusterValueFn).then(function(t){e.resolve(t)}):(w(this),e.resolve()),e.promise()},e.prototype.setSortConfig=function(e){this.sort_config=e},e.prototype.isTrackInClusteredGroup=function(e){return"cluster"===this.sort_config.type&&this.sort_config.track_group_index===this.getContainingTrackGroupIndex(e)},e}(),m=function(){function e(e,r,o,a){"object"==typeof r&&r.isVector?n(this,e,r,o,a):t(this,e,r,o,a)}function t(e,t,n,r,o){var a,i;"function"==typeof n?(a=n,i=n):(a=n.preferred,i=n.mandatory);var s=function(e){return function(t,n){if(0===r)return 0;var o=e(t,n);return 2===o?1:-2===o?-1:o*r}},l=s(a),u=s(i),c=t.sort(l);e.preferred_change_points=[0],e.mandatory_change_points=[0];for(var d=1;d<c.length;d++)0!==u(c[d-1],c[d])?e.mandatory_change_points.push(d):0!==l(c[d-1],c[d])&&e.preferred_change_points.push(d);e.id_to_index={};for(var d=0;d<c.length;d++)e.id_to_index[c[d][o]]=d}function n(e,t,n,r,o){var a=function(e){return 0===r?function(e){return 0}:function(t){return e(t).map(function(e){return"number"==typeof e?e*r:e})}},i=a(n.preferred),s=a(n.mandatory),l=t.map(function(e){return{d:e,preferred_vector:i(e),mandatory_vector:s(e)}}),c=n.compareEquals,d=c?function(e,t){return c(e.d,t.d)}:void 0,p=u.bucketSort(l,function(e){return e.preferred_vector},d);e.preferred_change_points=[0],e.mandatory_change_points=[0];for(var f=function(e){return e.mandatory_vector},h=function(e){return e.preferred_vector},m=1;m<p.length;m++)0!==u.compareFull(p[m-1],p[m],f)?e.mandatory_change_points.push(m):0!==u.compareFull(p[m-1],p[m],h,d)&&e.preferred_change_points.push(m);e.id_to_index={};for(var m=0;m<p.length;m++)e.id_to_index[p[m].d[o]]=m}return e.prototype.getSortValue=function(e){var t=this.id_to_index[e],n=0,r=0;return this.mandatory_change_points.length&&(n=this.mandatory_change_points[o(this.mandatory_change_points,t,function(e){return e},!0)]),this.preferred_change_points.length&&(r=this.preferred_change_points[o(this.preferred_change_points,t,function(e){return e},!0)]),{mandatory:n,preferred:r}},e.prototype.compare=function(e,t){var n=this.id_to_index[e],r=this.id_to_index[t];if(void 0===n&&void 0===r)return 0;if(void 0===n)return 1;if(void 0===r)return-1;var o=!1;if(n===r)return 0;if(n>r){var i=n;n=r,r=i,o=!0}var s=0;return a(this.mandatory_change_points,function(e){return e},n,r)?s=-1:a(this.preferred_change_points,function(e){return e},n,r)&&(s=-.5),o&&(s*=-1),s},e}();e.exports=h},function(e,t){e.exports=function(e,t,n,r){for(var o,a,i=0,s=e.length,l=!1;;){if(i>=s)break;if(o=Math.floor((i+s)/2),(a=t(e[o]))>=r)s=o;else{if(!(a<n)){l=!0;break}i=o+1}}return l}},function(e,n,r){var o=r(16),a=function(e,n){var r=new o,a=new Object,i=new t.Deferred;return a.casesAndEntitites=e,a.dimension=n,r.postMessage(a),r.onmessage=function(e){i.resolve(e.data)},i.promise()},i=function(e){return a(e,"CASES")},s=function(e){return a(e,"ENTITIES")};e.exports={hclusterColumns:i,hclusterTracks:s}},function(e,t,n){e.exports=function(){return n(17)("/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 2);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\nmodule.exports = {\n  euclidean: function(v1, v2) {\n      var total = 0;\n      for (var i = 0; i < v1.length; i++) {\n         total += Math.pow(v2[i] - v1[i], 2);      \n      }\n      return Math.sqrt(total);\n   },\n   manhattan: function(v1, v2) {\n     var total = 0;\n     for (var i = 0; i < v1.length ; i++) {\n        total += Math.abs(v2[i] - v1[i]);      \n     }\n     return total;\n   },\n   max: function(v1, v2) {\n     var max = 0;\n     for (var i = 0; i < v1.length; i++) {\n        max = Math.max(max , Math.abs(v2[i] - v1[i]));      \n     }\n     return max;\n   }\n};\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar distances = __webpack_require__(0);\n\nfunction KMeans(centroids) {\n   this.centroids = centroids || [];\n}\n\nKMeans.prototype.randomCentroids = function(points, k) {\n   var centroids = points.slice(0); // copy\n   centroids.sort(function() {\n      return (Math.round(Math.random()) - 0.5);\n   });\n   return centroids.slice(0, k);\n}\n\nKMeans.prototype.classify = function(point, distance) {\n   var min = Infinity,\n       index = 0;\n\n   distance = distance || \"euclidean\";\n   if (typeof distance == \"string\") {\n      distance = distances[distance];\n   }\n\n   for (var i = 0; i < this.centroids.length; i++) {\n      var dist = distance(point, this.centroids[i]);\n      if (dist < min) {\n         min = dist;\n         index = i;\n      }\n   }\n\n   return index;\n}\n\nKMeans.prototype.cluster = function(points, k, distance, snapshotPeriod, snapshotCb) {\n   k = k || Math.max(2, Math.ceil(Math.sqrt(points.length / 2)));\n\n   distance = distance || \"euclidean\";\n   if (typeof distance == \"string\") {\n      distance = distances[distance];\n   }\n\n   this.centroids = this.randomCentroids(points, k);\n\n   var assignment = new Array(points.length);\n   var clusters = new Array(k);\n\n   var iterations = 0;\n   var movement = true;\n   while (movement) {\n      // update point-to-centroid assignments\n      for (var i = 0; i < points.length; i++) {\n         assignment[i] = this.classify(points[i], distance);\n      }\n\n      // update location of each centroid\n      movement = false;\n      for (var j = 0; j < k; j++) {\n         var assigned = [];\n         for (var i = 0; i < assignment.length; i++) {\n            if (assignment[i] == j) {\n               assigned.push(points[i]);\n            }\n         }\n\n         if (!assigned.length) {\n            continue;\n         }\n\n         var centroid = this.centroids[j];\n         var newCentroid = new Array(centroid.length);\n\n         for (var g = 0; g < centroid.length; g++) {\n            var sum = 0;\n            for (var i = 0; i < assigned.length; i++) {\n               sum += assigned[i][g];\n            }\n            newCentroid[g] = sum / assigned.length;\n\n            if (newCentroid[g] != centroid[g]) {\n               movement = true;\n            }\n         }\n\n         this.centroids[j] = newCentroid;\n         clusters[j] = assigned;\n      }\n\n      if (snapshotCb && (iterations++ % snapshotPeriod == 0)) {\n         snapshotCb(clusters);\n      }\n   }\n\n   return clusters;\n}\n\nKMeans.prototype.toJSON = function() {\n   return JSON.stringify(this.centroids);\n}\n\nKMeans.prototype.fromJSON = function(json) {\n   this.centroids = JSON.parse(json);\n   return this;\n}\n\nmodule.exports = KMeans;\n\nmodule.exports.kmeans = function(vectors, k) {\n   return (new KMeans()).cluster(vectors, k);\n}\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/*\n * Copyright (c) 2016 The Hyve B.V.\n * This code is licensed under the GNU Affero General Public License,\n * version 3, or (at your option) any later version.\n */\n\n/*\n * This file is part of cBioPortal.\n *\n * cBioPortal is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n */\n\nvar clusterfck = __webpack_require__(3);\nvar jStat = __webpack_require__(5);\n\n/**\n * \"Routing\" logic for this worker, based on given message.\n *\n * @param m : message object with m.dimension (CASES or ENTITIES) and m.casesAndEntitites\n *      which is the input for the clustering method.\n */\nonmessage = function(m) {\n    console.log('Clustering worker received message');\n    var result = null;\n    if (m.data.dimension === \"CASES\") {\n        result = hclusterCases(m.data.casesAndEntitites);\n    } else if (m.data.dimension === \"ENTITIES\") {\n        result = hclusterGeneticEntities(m.data.casesAndEntitites);\n    } else {\n        throw new Error(\"Illegal argument given to clustering-worker.js for m.data.dimension: \" + m.data.dimension);\n    }\n    console.log('Posting clustering result back to main script');\n    postMessage(result);\n}\n\n/**\n * Returns false if any value is a valid number != 0.0,\n * and true otherwise.\n */\nvar isAllNaNs = function(values) {\n    for (var i = 0; i < values.length; i++) {\n        var val = values[i];\n        if (!isNaN(val) && val != null && val != 0.0 ) {\n            return false;\n        }\n    }\n    return true;\n}\n\n/**\n * Distance measure using 1-spearman's correlation. This function does expect that item1 and item2\n * are an item than contains a item.preProcessedValueList attribute which is the ranked version\n * of item.orderedValueList.\n *\n */\nvar preRankedSpearmanDist = function(item1, item2) {\n    //rules for NaN values:\n    if (item1.isAllNaNs && item2.isAllNaNs) {\n        //return distance 0\n        return 0;\n    }\n    else if (item1.isAllNaNs || item2.isAllNaNs) {\n        //return large distance:\n        return 3;\n    }\n    //take the arrays from the preProcessedValueList:\n    var ranks1 = item1.preProcessedValueList;\n    var ranks2 = item2.preProcessedValueList;\n    //calculate spearman's rank correlation coefficient, using pearson's distance\n    //for correlation of the ranks:\n    var r = jStat.corrcoeff(ranks1, ranks2);\n    if (isNaN(r)) {\n        //assuming the ranks1 and ranks2 lists do not contain NaN entries (and this code DOES assume all missing values have been imputed by a valid number),\n        //this specific scenario should not occur, unless all values are the same (and given the same rank). In this case, there is no variation, and\n        //correlation returns NaN. In theory this could happen on small number of entities being clustered. We give this a large distance:\n        console.log(\"NaN in correlation calculation\");\n        r = -2;\n    }\n    return 1 - r;\n}\n\n/**\n * Prepares the data for using spearman method in the distance function.\n * It will pre-calculate ranks and deviation and store this in inputItems[x].preProcessedValueList.\n * This pre-calculation significantly improves the performance of the clustering step itself.\n */\nvar _prepareForDistanceFunction = function(inputItems) {\n    //pre-calculate ranks and configure to use last step of SPEARMAN as distance function, and\n    // split up into allNaN and notAllNaN\n    var allNaN = [];\n    var notAllNaN = [];\n    for (var i = 0; i < inputItems.length; i++) {\n        var inputItem = inputItems[i];\n        //check if all NaNs:\n        inputItem.isAllNaNs = isAllNaNs(inputItem.orderedValueList);\n        if (inputItem.isAllNaNs) {\n            allNaN.push(inputItem);\n            continue;\n        } else {\n            notAllNaN.push(inputItem);\n        }\n        //rank using fractional ranking:\n        var ranks = jStat.rank(inputItem.orderedValueList);\n        //calculate deviation:\n        inputItem.preProcessedValueList = ranks;\n    }\n    return {\n        notAllNaN: notAllNaN,\n        allNaN: allNaN\n    };\n}\n\n/**\n * @param casesAndEntitites: Object with sample(or patient)Id and map\n * of geneticEntity/value pairs. Example:\n *\n * var a =\n *  {\n *    \"TCGA-AO-AA98-01\":\n *    {\n *    \t\"TP53\": 0.045,\n *    \t\"BRA1\": -0.89\n *    }\n *   },\n *   ...\n *\n *   @return the reordered list of sample(or patient) ids, after clustering.\n */\nvar hclusterCases = function(casesAndEntitites) {\n    var refEntityList = null;\n    var inputItems = [];\n    //add orderedValueList to all items, so the values are\n    //compared in same order:\n    for (var caseId in casesAndEntitites) {\n        if (casesAndEntitites.hasOwnProperty(caseId)) {\n            var caseObj = casesAndEntitites[caseId];\n            var inputItem = new Object();\n            inputItem.caseId = caseId;\n            inputItem.orderedValueList = [];\n            if (refEntityList == null) {\n                refEntityList = getRefList(caseObj);\n            }\n            for (var j = 0; j < refEntityList.length; j++) {\n                var entityId = refEntityList[j];\n                var value = caseObj[entityId];\n                inputItem.orderedValueList.push(value);\n            }\n            inputItems.push(inputItem);\n        }\n    }\n    if (refEntityList.length == 1) {\n        //this is a special case, where the \"clustering\" becomes a simple sorting in 1 dimension:\n        //so, just sort and return inputItems:\n        inputItems.sort(function (i1, i2) {\n            var val1 = i1.orderedValueList[0];\n            var val2 = i2.orderedValueList[0];\n            //ensure NaNs are moved out (NaN or null which are seen here as equivalents to NA (not available)) to the end of the list:\n            val1 = (val1 == null || isNaN(val1) ? Number.MAX_VALUE : val1);\n            val2 = (val2 == null || isNaN(val2) ? Number.MAX_VALUE : val2);\n            if (val1 > val2) {\n                return 1;\n            }\n            else if (val1 < val2) {\n                return -1;\n            }\n            return 0;\n        });\n        return inputItems;\n    }\n    //else, normal clustering:\n    inputItems = _prepareForDistanceFunction(inputItems);\n    var clusters = clusterfck.hcluster(inputItems.notAllNaN, preRankedSpearmanDist);\n    return clusters.clusters(1)[0].concat(inputItems.allNaN); // add all nan elements to the end post-sorting\n}\n\nvar getRefList = function(caseItem) {\n    var result = [];\n    for (var entityId in caseItem) {\n        if (caseItem.hasOwnProperty(entityId)) {\n            result.push(entityId);\n        }\n    }\n    return result;\n}\n\n/**\n * @param casesAndEntitites: same as used in hclusterCases above.\n *\n * @return the reordered list of entity ids, after clustering.\n */\nvar hclusterGeneticEntities = function(casesAndEntitites) {\n    var refEntityList = null;\n    var inputItems = [];\n    var refCaseIdList = [];\n    //add orderedValueList to all items, so the values are\n    //compared in same order:\n    for (var caseId in casesAndEntitites) {\n        if (casesAndEntitites.hasOwnProperty(caseId)) {\n            var caseObj = casesAndEntitites[caseId];\n            if (refEntityList == null) {\n                refEntityList = getRefList(caseObj);\n            }\n            //refCaseIdList:\n            refCaseIdList.push(caseId);\n        }\n    }\n    //iterate over genes, and get sample values:\n    for (var i = 0; i < refEntityList.length; i++) {\n        var entityId = refEntityList[i];\n        var inputItem = new Object();\n        inputItem.entityId = entityId;\n        inputItem.orderedValueList = [];\n        for (var j = 0; j < refCaseIdList.length; j++) {\n            var caseId = refCaseIdList[j];\n            var caseObj = casesAndEntitites[caseId];\n            var value = caseObj[entityId];\n            inputItem.orderedValueList.push(value);\n        }\n        inputItems.push(inputItem);\n    }\n    inputItems = _prepareForDistanceFunction(inputItems);\n    var clusters = clusterfck.hcluster(inputItems.notAllNaN, preRankedSpearmanDist);\n    return clusters.clusters(1)[0].concat(inputItems.allNaN); // add all nan elements to the end post-sorting\n}\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = {\n   hcluster: __webpack_require__(4),\n   Kmeans: __webpack_require__(1),\n   kmeans: __webpack_require__(1).kmeans\n};\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar distances = __webpack_require__(0);\n\nvar HierarchicalClustering = function(distance, linkage, threshold) {\n   this.distance = distance;\n   this.linkage = linkage;\n   this.threshold = threshold == undefined ? Infinity : threshold;\n}\n\nHierarchicalClustering.prototype = {\n   tree: function(items, snapshotPeriod, snapshotCb) {\n      this.tree = [];\n      this.dists = [];  // distances between each pair of clusters\n      this.mins = []; // closest cluster for each cluster\n      this.index = []; // keep a hash of all clusters by key\n\n      for (var i = 0; i < items.length; i++) {\n         var cluster = {\n            value: items[i],\n            key: i,\n            index: i,\n            size: 1\n         };\n         this.tree[i] = cluster;\n         this.index[i] = cluster;\n         this.dists[i] = [];\n         this.mins[i] = 0;\n      }\n\n      for (var i = 0; i < this.tree.length; i++) {\n         for (var j = 0; j <= i; j++) {\n            var dist = (i == j) ? Infinity :\n               this.distance(this.tree[i].value, this.tree[j].value);\n            this.dists[i][j] = dist;\n            this.dists[j][i] = dist;\n\n            if (dist < this.dists[i][this.mins[i]]) {\n               this.mins[i] = j;\n            }\n         }\n      }\n\n      var merged = this.mergeClosest();\n      var i = 0;\n      while (merged) {\n        if (snapshotCb && (i++ % snapshotPeriod) == 0) {\n           snapshotCb(this.tree);\n        }\n        merged = this.mergeClosest();\n      }\n\n      this.tree.forEach(function(cluster) {\n        // clean up metadata used for clustering\n        delete cluster.key;\n        delete cluster.index;\n      });\n\n      return this.tree;\n   },\n\n   mergeClosest: function() {\n      // find two closest clusters from cached mins\n      var minKey = 0, min = Infinity;\n      for (var i = 0; i < this.tree.length; i++) {\n         var key = this.tree[i].key,\n             dist = this.dists[key][this.mins[key]];\n         if (dist < min) {\n            minKey = key;\n            min = dist;\n         }\n      }\n      if (min >= this.threshold) {\n         return false;\n      }\n\n      var c1 = this.index[minKey],\n          c2 = this.index[this.mins[minKey]];\n\n      // merge two closest clusters\n      var merged = {\n         dist: min,\n         left: c1,\n         right: c2,\n         key: c1.key,\n         size: c1.size + c2.size\n      };\n\n      this.tree[c1.index] = merged;\n      this.tree.splice(c2.index, 1);\n      this.index[c1.key] = merged;\n\n      // update distances with new merged cluster\n      for (var i = 0; i < this.tree.length; i++) {\n         var ci = this.tree[i];\n         var dist;\n         if (c1.key == ci.key) {\n            dist = Infinity;\n         }\n         else if (this.linkage == \"single\") {\n            dist = this.dists[c1.key][ci.key];\n            if (this.dists[c1.key][ci.key] > this.dists[c2.key][ci.key]) {\n               dist = this.dists[c2.key][ci.key];\n            }\n         }\n         else if (this.linkage == \"complete\") {\n            dist = this.dists[c1.key][ci.key];\n            if (this.dists[c1.key][ci.key] < this.dists[c2.key][ci.key]) {\n               dist = this.dists[c2.key][ci.key];\n            }\n         }\n         else if (this.linkage == \"average\") {\n            dist = (this.dists[c1.key][ci.key] * c1.size\n                   + this.dists[c2.key][ci.key] * c2.size) / (c1.size + c2.size);\n         }\n         else {\n            dist = this.distance(ci.value, c1.value);\n         }\n\n         this.dists[c1.key][ci.key] = this.dists[ci.key][c1.key] = dist;\n      }\n\n\n      // update cached mins\n      for (var i = 0; i < this.tree.length; i++) {\n         var key1 = this.tree[i].key;\n         if (this.mins[key1] == c1.key || this.mins[key1] == c2.key) {\n            var min = key1;\n            for (var j = 0; j < this.tree.length; j++) {\n               var key2 = this.tree[j].key;\n               if (this.dists[key1][key2] < this.dists[key1][min]) {\n                  min = key2;\n               }\n            }\n            this.mins[key1] = min;\n         }\n         this.tree[i].index = i;\n      }\n\n      // clean up metadata used for clustering\n      delete c1.key; delete c2.key;\n      delete c1.index; delete c2.index;\n\n      return true;\n   },\n   clusters: function(num){\n     //  Return all nodes if num is invalid\n     if(num > this.tree.size || num < 1) num = this.tree.size\n\n     var result = [],\n         subtrees = [this.tree];\n\n    //  Get a list of root nodes for num different clusters\n     while(num > 1){\n       var furthest = _findNextFurthest(subtrees);\n       subtrees.splice(subtrees.indexOf(furthest), 1);\n       subtrees.push(furthest.left, furthest.right);\n       num--;\n     }\n\n     //  Transform the subtrees node list into a list of the subtrees leaf values\n     subtrees.forEach(function(tree) {\n       result.push(_getValues(tree));\n     })\n\n     //  Split the next furthest distance root node\n     function _findNextFurthest(subtrees) {\n       var max = -1,\n           furthest;\n       subtrees.forEach(function(tree){\n         if(tree.dist > max) {\n           max = tree.dist;\n           furthest = tree;\n         }\n       });\n       return furthest;\n     }\n\n     //  Traverse the tree and yield a list of the leaf node values\n     function _getValues(tree) {\n       if(tree.size === 1) return [tree.value];\n       return _getValues(tree.left).concat(_getValues(tree.right));\n     }\n\n     return result;\n   }\n}\n\nvar hcluster = function(items, distance, linkage, threshold, snapshot, snapshotCallback) {\n   distance = distance || \"euclidean\";\n   linkage = linkage || \"average\";\n\n   if (typeof distance == \"string\") {\n     distance = distances[distance];\n   }\n  var hc = new HierarchicalClustering(distance, linkage, threshold),\n      tree = hc.tree(items, snapshot, snapshotCallback);\n\n   return {\n     tree: (threshold === undefined ? tree[0] : tree),\n     clusters: hc.clusters\n   };\n}\n\nmodule.exports = hcluster;\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n(function (window, factory) {\n    if (true) {\n        module.exports = factory();\n    } else if (typeof define === 'function' && define.amd) {\n        define(factory);\n    } else {\n        window.jStat = factory();\n    }\n})(this, function () {\nvar jStat = (function(Math, undefined) {\n\n// For quick reference.\nvar concat = Array.prototype.concat;\nvar slice = Array.prototype.slice;\nvar toString = Object.prototype.toString;\n\n// Calculate correction for IEEE error\n// TODO: This calculation can be improved.\nfunction calcRdx(n, m) {\n  var val = n > m ? n : m;\n  return Math.pow(10,\n                  17 - ~~(Math.log(((val > 0) ? val : -val)) * Math.LOG10E));\n}\n\n\nvar isArray = Array.isArray || function isArray(arg) {\n  return toString.call(arg) === '[object Array]';\n};\n\n\nfunction isFunction(arg) {\n  return toString.call(arg) === '[object Function]';\n}\n\n\nfunction isNumber(arg) {\n  return typeof arg === 'number' && arg === arg;\n}\n\n\n// Converts the jStat matrix to vector.\nfunction toVector(arr) {\n  return concat.apply([], arr);\n}\n\n\n// The one and only jStat constructor.\nfunction jStat() {\n  return new jStat._init(arguments);\n}\n\n\n// TODO: Remove after all references in src files have been removed.\njStat.fn = jStat.prototype;\n\n\n// By separating the initializer from the constructor it's easier to handle\n// always returning a new instance whether \"new\" was used or not.\njStat._init = function _init(args) {\n  var i;\n\n  // If first argument is an array, must be vector or matrix.\n  if (isArray(args[0])) {\n    // Check if matrix.\n    if (isArray(args[0][0])) {\n      // See if a mapping function was also passed.\n      if (isFunction(args[1]))\n        args[0] = jStat.map(args[0], args[1]);\n      // Iterate over each is faster than this.push.apply(this, args[0].\n      for (var i = 0; i < args[0].length; i++)\n        this[i] = args[0][i];\n      this.length = args[0].length;\n\n    // Otherwise must be a vector.\n    } else {\n      this[0] = isFunction(args[1]) ? jStat.map(args[0], args[1]) : args[0];\n      this.length = 1;\n    }\n\n  // If first argument is number, assume creation of sequence.\n  } else if (isNumber(args[0])) {\n    this[0] = jStat.seq.apply(null, args);\n    this.length = 1;\n\n  // Handle case when jStat object is passed to jStat.\n  } else if (args[0] instanceof jStat) {\n    // Duplicate the object and pass it back.\n    return jStat(args[0].toArray());\n\n  // Unexpected argument value, return empty jStat object.\n  // TODO: This is strange behavior. Shouldn't this throw or some such to let\n  // the user know they had bad arguments?\n  } else {\n    this[0] = [];\n    this.length = 1;\n  }\n\n  return this;\n};\njStat._init.prototype = jStat.prototype;\njStat._init.constructor = jStat;\n\n\n// Utility functions.\n// TODO: for internal use only?\njStat.utils = {\n  calcRdx: calcRdx,\n  isArray: isArray,\n  isFunction: isFunction,\n  isNumber: isNumber,\n  toVector: toVector\n};\n\n\n// Easily extend the jStat object.\n// TODO: is this seriously necessary?\njStat.extend = function extend(obj) {\n  var i, j;\n\n  if (arguments.length === 1) {\n    for (j in obj)\n      jStat[j] = obj[j];\n    return this;\n  }\n\n  for (var i = 1; i < arguments.length; i++) {\n    for (j in arguments[i])\n      obj[j] = arguments[i][j];\n  }\n\n  return obj;\n};\n\n\n// Returns the number of rows in the matrix.\njStat.rows = function rows(arr) {\n  return arr.length || 1;\n};\n\n\n// Returns the number of columns in the matrix.\njStat.cols = function cols(arr) {\n  return arr[0].length || 1;\n};\n\n\n// Returns the dimensions of the object { rows: i, cols: j }\njStat.dimensions = function dimensions(arr) {\n  return {\n    rows: jStat.rows(arr),\n    cols: jStat.cols(arr)\n  };\n};\n\n\n// Returns a specified row as a vector or return a sub matrix by pick some rows\njStat.row = function row(arr, index) {\n  if (isArray(index)) {\n    return index.map(function(i) {\n      return jStat.row(arr, i);\n    })\n  }\n  return arr[index];\n};\n\n\n// return row as array\n// rowa([[1,2],[3,4]],0) -> [1,2]\njStat.rowa = function rowa(arr, i) {\n  return jStat.row(arr, i);\n};\n\n\n// Returns the specified column as a vector or return a sub matrix by pick some\n// columns\njStat.col = function col(arr, index) {\n  if (isArray(index)) {\n    var submat = jStat.arange(arr.length).map(function(i) {\n      return new Array(index.length);\n    });\n    index.forEach(function(ind, i){\n      jStat.arange(arr.length).forEach(function(j) {\n        submat[j][i] = arr[j][ind];\n      });\n    });\n    return submat;\n  }\n  var column = new Array(arr.length);\n  for (var i = 0; i < arr.length; i++)\n    column[i] = [arr[i][index]];\n  return column;\n};\n\n\n// return column as array\n// cola([[1,2],[3,4]],0) -> [1,3]\njStat.cola = function cola(arr, i) {\n  return jStat.col(arr, i).map(function(a){ return a[0] });\n};\n\n\n// Returns the diagonal of the matrix\njStat.diag = function diag(arr) {\n  var nrow = jStat.rows(arr);\n  var res = new Array(nrow);\n  for (var row = 0; row < nrow; row++)\n    res[row] = [arr[row][row]];\n  return res;\n};\n\n\n// Returns the anti-diagonal of the matrix\njStat.antidiag = function antidiag(arr) {\n  var nrow = jStat.rows(arr) - 1;\n  var res = new Array(nrow);\n  for (var i = 0; nrow >= 0; nrow--, i++)\n    res[i] = [arr[i][nrow]];\n  return res;\n};\n\n// Transpose a matrix or array.\njStat.transpose = function transpose(arr) {\n  var obj = [];\n  var objArr, rows, cols, j, i;\n\n  // Make sure arr is in matrix format.\n  if (!isArray(arr[0]))\n    arr = [arr];\n\n  rows = arr.length;\n  cols = arr[0].length;\n\n  for (var i = 0; i < cols; i++) {\n    objArr = new Array(rows);\n    for (j = 0; j < rows; j++)\n      objArr[j] = arr[j][i];\n    obj.push(objArr);\n  }\n\n  // If obj is vector, return only single array.\n  return obj.length === 1 ? obj[0] : obj;\n};\n\n\n// Map a function to an array or array of arrays.\n// \"toAlter\" is an internal variable.\njStat.map = function map(arr, func, toAlter) {\n  var row, nrow, ncol, res, col;\n\n  if (!isArray(arr[0]))\n    arr = [arr];\n\n  nrow = arr.length;\n  ncol = arr[0].length;\n  res = toAlter ? arr : new Array(nrow);\n\n  for (row = 0; row < nrow; row++) {\n    // if the row doesn't exist, create it\n    if (!res[row])\n      res[row] = new Array(ncol);\n    for (col = 0; col < ncol; col++)\n      res[row][col] = func(arr[row][col], row, col);\n  }\n\n  return res.length === 1 ? res[0] : res;\n};\n\n\n// Cumulatively combine the elements of an array or array of arrays using a function.\njStat.cumreduce = function cumreduce(arr, func, toAlter) {\n  var row, nrow, ncol, res, col;\n\n  if (!isArray(arr[0]))\n    arr = [arr];\n\n  nrow = arr.length;\n  ncol = arr[0].length;\n  res = toAlter ? arr : new Array(nrow);\n\n  for (row = 0; row < nrow; row++) {\n    // if the row doesn't exist, create it\n    if (!res[row])\n      res[row] = new Array(ncol);\n    if (ncol > 0)\n      res[row][0] = arr[row][0];\n    for (col = 1; col < ncol; col++)\n      res[row][col] = func(res[row][col-1], arr[row][col]);\n  }\n  return res.length === 1 ? res[0] : res;\n};\n\n\n// Destructively alter an array.\njStat.alter = function alter(arr, func) {\n  return jStat.map(arr, func, true);\n};\n\n\n// Generate a rows x cols matrix according to the supplied function.\njStat.create = function  create(rows, cols, func) {\n  var res = new Array(rows);\n  var i, j;\n\n  if (isFunction(cols)) {\n    func = cols;\n    cols = rows;\n  }\n\n  for (var i = 0; i < rows; i++) {\n    res[i] = new Array(cols);\n    for (j = 0; j < cols; j++)\n      res[i][j] = func(i, j);\n  }\n\n  return res;\n};\n\n\nfunction retZero() { return 0; }\n\n\n// Generate a rows x cols matrix of zeros.\njStat.zeros = function zeros(rows, cols) {\n  if (!isNumber(cols))\n    cols = rows;\n  return jStat.create(rows, cols, retZero);\n};\n\n\nfunction retOne() { return 1; }\n\n\n// Generate a rows x cols matrix of ones.\njStat.ones = function ones(rows, cols) {\n  if (!isNumber(cols))\n    cols = rows;\n  return jStat.create(rows, cols, retOne);\n};\n\n\n// Generate a rows x cols matrix of uniformly random numbers.\njStat.rand = function rand(rows, cols) {\n  if (!isNumber(cols))\n    cols = rows;\n  return jStat.create(rows, cols, Math.random);\n};\n\n\nfunction retIdent(i, j) { return i === j ? 1 : 0; }\n\n\n// Generate an identity matrix of size row x cols.\njStat.identity = function identity(rows, cols) {\n  if (!isNumber(cols))\n    cols = rows;\n  return jStat.create(rows, cols, retIdent);\n};\n\n\n// Tests whether a matrix is symmetric\njStat.symmetric = function symmetric(arr) {\n  var issymmetric = true;\n  var size = arr.length;\n  var row, col;\n\n  if (arr.length !== arr[0].length)\n    return false;\n\n  for (row = 0; row < size; row++) {\n    for (col = 0; col < size; col++)\n      if (arr[col][row] !== arr[row][col])\n        return false;\n  }\n\n  return true;\n};\n\n\n// Set all values to zero.\njStat.clear = function clear(arr) {\n  return jStat.alter(arr, retZero);\n};\n\n\n// Generate sequence.\njStat.seq = function seq(min, max, length, func) {\n  if (!isFunction(func))\n    func = false;\n\n  var arr = [];\n  var hival = calcRdx(min, max);\n  var step = (max * hival - min * hival) / ((length - 1) * hival);\n  var current = min;\n  var cnt;\n\n  // Current is assigned using a technique to compensate for IEEE error.\n  // TODO: Needs better implementation.\n  for (cnt = 0;\n       current <= max && cnt < length;\n       cnt++, current = (min * hival + step * hival * cnt) / hival) {\n    arr.push((func ? func(current, cnt) : current));\n  }\n\n  return arr;\n};\n\n\n// arange(5) -> [0,1,2,3,4]\n// arange(1,5) -> [1,2,3,4]\n// arange(5,1,-1) -> [5,4,3,2]\njStat.arange = function arange(start, end, step) {\n  var rl = [];\n  step = step || 1;\n  if (end === undefined) {\n    end = start;\n    start = 0;\n  }\n  if (start === end || step === 0) {\n    return [];\n  }\n  if (start < end && step < 0) {\n    return [];\n  }\n  if (start > end && step > 0) {\n    return [];\n  }\n  if (step > 0) {\n    for (i = start; i < end; i += step) {\n      rl.push(i);\n    }\n  } else {\n    for (i = start; i > end; i += step) {\n      rl.push(i);\n    }\n  }\n  return rl;\n};\n\n\n// A=[[1,2,3],[4,5,6],[7,8,9]]\n// slice(A,{row:{end:2},col:{start:1}}) -> [[2,3],[5,6]]\n// slice(A,1,{start:1}) -> [5,6]\n// as numpy code A[:2,1:]\njStat.slice = (function(){\n  function _slice(list, start, end, step) {\n    // note it's not equal to range.map mode it's a bug\n    var i;\n    var rl = [];\n    var length = list.length;\n    if (start === undefined && end === undefined && step === undefined) {\n      return jStat.copy(list);\n    }\n\n    start = start || 0;\n    end = end || list.length;\n    start = start >= 0 ? start : length + start;\n    end = end >= 0 ? end : length + end;\n    step = step || 1;\n    if (start === end || step === 0) {\n      return [];\n    }\n    if (start < end && step < 0) {\n      return [];\n    }\n    if (start > end && step > 0) {\n      return [];\n    }\n    if (step > 0) {\n      for (i = start; i < end; i += step) {\n        rl.push(list[i]);\n      }\n    } else {\n      for (i = start; i > end;i += step) {\n        rl.push(list[i]);\n      }\n    }\n    return rl;\n  }\n\n  function slice(list, rcSlice) {\n    rcSlice = rcSlice || {};\n    if (isNumber(rcSlice.row)) {\n      if (isNumber(rcSlice.col))\n        return list[rcSlice.row][rcSlice.col];\n      var row = jStat.rowa(list, rcSlice.row);\n      var colSlice = rcSlice.col || {};\n      return _slice(row, colSlice.start, colSlice.end, colSlice.step);\n    }\n\n    if (isNumber(rcSlice.col)) {\n      var col = jStat.cola(list, rcSlice.col);\n      var rowSlice = rcSlice.row || {};\n      return _slice(col, rowSlice.start, rowSlice.end, rowSlice.step);\n    }\n\n    var rowSlice = rcSlice.row || {};\n    var colSlice = rcSlice.col || {};\n    var rows = _slice(list, rowSlice.start, rowSlice.end, rowSlice.step);\n    return rows.map(function(row) {\n      return _slice(row, colSlice.start, colSlice.end, colSlice.step);\n    });\n  }\n\n  return slice;\n}());\n\n\n// A=[[1,2,3],[4,5,6],[7,8,9]]\n// sliceAssign(A,{row:{start:1},col:{start:1}},[[0,0],[0,0]])\n// A=[[1,2,3],[4,0,0],[7,0,0]]\njStat.sliceAssign = function sliceAssign(A, rcSlice, B) {\n  if (isNumber(rcSlice.row)) {\n    if (isNumber(rcSlice.col))\n      return A[rcSlice.row][rcSlice.col] = B;\n    rcSlice.col = rcSlice.col || {};\n    rcSlice.col.start = rcSlice.col.start || 0;\n    rcSlice.col.end = rcSlice.col.end || A[0].length;\n    rcSlice.col.step = rcSlice.col.step || 1;\n    var nl = jStat.arange(rcSlice.col.start,\n                          Math.min(A.length, rcSlice.col.end),\n                          rcSlice.col.step);\n    var m = rcSlice.row;\n    nl.forEach(function(n, i) {\n      A[m][n] = B[i];\n    });\n    return A;\n  }\n\n  if (isNumber(rcSlice.col)) {\n    rcSlice.row = rcSlice.row || {};\n    rcSlice.row.start = rcSlice.row.start || 0;\n    rcSlice.row.end = rcSlice.row.end || A.length;\n    rcSlice.row.step = rcSlice.row.step || 1;\n    var ml = jStat.arange(rcSlice.row.start,\n                          Math.min(A[0].length, rcSlice.row.end),\n                          rcSlice.row.step);\n    var n = rcSlice.col;\n    ml.forEach(function(m, j) {\n      A[m][n] = B[j];\n    });\n    return A;\n  }\n\n  if (B[0].length === undefined) {\n    B = [B];\n  }\n  rcSlice.row.start = rcSlice.row.start || 0;\n  rcSlice.row.end = rcSlice.row.end || A.length;\n  rcSlice.row.step = rcSlice.row.step || 1;\n  rcSlice.col.start = rcSlice.col.start || 0;\n  rcSlice.col.end = rcSlice.col.end || A[0].length;\n  rcSlice.col.step = rcSlice.col.step || 1;\n  var ml = jStat.arange(rcSlice.row.start,\n                        Math.min(A.length, rcSlice.row.end),\n                        rcSlice.row.step);\n  var nl = jStat.arange(rcSlice.col.start,\n                        Math.min(A[0].length, rcSlice.col.end),\n                        rcSlice.col.step);\n  ml.forEach(function(m, i) {\n    nl.forEach(function(n, j) {\n      A[m][n] = B[i][j];\n    });\n  });\n  return A;\n};\n\n\n// [1,2,3] ->\n// [[1,0,0],[0,2,0],[0,0,3]]\njStat.diagonal = function diagonal(diagArray) {\n  var mat = jStat.zeros(diagArray.length, diagArray.length);\n  diagArray.forEach(function(t, i) {\n    mat[i][i] = t;\n  });\n  return mat;\n};\n\n\n// return copy of A\njStat.copy = function copy(A) {\n  return A.map(function(row) {\n    if (isNumber(row))\n      return row;\n    return row.map(function(t) {\n      return t;\n    });\n  });\n};\n\n\n// TODO: Go over this entire implementation. Seems a tragic waste of resources\n// doing all this work. Instead, and while ugly, use new Function() to generate\n// a custom function for each static method.\n\n// Quick reference.\nvar jProto = jStat.prototype;\n\n// Default length.\njProto.length = 0;\n\n// For internal use only.\n// TODO: Check if they're actually used, and if they are then rename them\n// to _*\njProto.push = Array.prototype.push;\njProto.sort = Array.prototype.sort;\njProto.splice = Array.prototype.splice;\njProto.slice = Array.prototype.slice;\n\n\n// Return a clean array.\njProto.toArray = function toArray() {\n  return this.length > 1 ? slice.call(this) : slice.call(this)[0];\n};\n\n\n// Map a function to a matrix or vector.\njProto.map = function map(func, toAlter) {\n  return jStat(jStat.map(this, func, toAlter));\n};\n\n\n// Cumulatively combine the elements of a matrix or vector using a function.\njProto.cumreduce = function cumreduce(func, toAlter) {\n  return jStat(jStat.cumreduce(this, func, toAlter));\n};\n\n\n// Destructively alter an array.\njProto.alter = function alter(func) {\n  jStat.alter(this, func);\n  return this;\n};\n\n\n// Extend prototype with methods that have no argument.\n(function(funcs) {\n  for (var i = 0; i < funcs.length; i++) (function(passfunc) {\n    jProto[passfunc] = function(func) {\n      var self = this,\n      results;\n      // Check for callback.\n      if (func) {\n        setTimeout(function() {\n          func.call(self, jProto[passfunc].call(self));\n        });\n        return this;\n      }\n      results = jStat[passfunc](this);\n      return isArray(results) ? jStat(results) : results;\n    };\n  })(funcs[i]);\n})('transpose clear symmetric rows cols dimensions diag antidiag'.split(' '));\n\n\n// Extend prototype with methods that have one argument.\n(function(funcs) {\n  for (var i = 0; i < funcs.length; i++) (function(passfunc) {\n    jProto[passfunc] = function(index, func) {\n      var self = this;\n      // check for callback\n      if (func) {\n        setTimeout(function() {\n          func.call(self, jProto[passfunc].call(self, index));\n        });\n        return this;\n      }\n      return jStat(jStat[passfunc](this, index));\n    };\n  })(funcs[i]);\n})('row col'.split(' '));\n\n\n// Extend prototype with simple shortcut methods.\n(function(funcs) {\n  for (var i = 0; i < funcs.length; i++) (function(passfunc) {\n    jProto[passfunc] = new Function(\n        'return jStat(jStat.' + passfunc + '.apply(null, arguments));');\n  })(funcs[i]);\n})('create zeros ones rand identity'.split(' '));\n\n\n// Exposing jStat.\nreturn jStat;\n\n}(Math));\n(function(jStat, Math) {\n\nvar isFunction = jStat.utils.isFunction;\n\n// Ascending functions for sort\nfunction ascNum(a, b) { return a - b; }\n\nfunction clip(arg, min, max) {\n  return Math.max(min, Math.min(arg, max));\n}\n\n\n// sum of an array\njStat.sum = function sum(arr) {\n  var sum = 0;\n  var i = arr.length;\n  while (--i >= 0)\n    sum += arr[i];\n  return sum;\n};\n\n\n// sum squared\njStat.sumsqrd = function sumsqrd(arr) {\n  var sum = 0;\n  var i = arr.length;\n  while (--i >= 0)\n    sum += arr[i] * arr[i];\n  return sum;\n};\n\n\n// sum of squared errors of prediction (SSE)\njStat.sumsqerr = function sumsqerr(arr) {\n  var mean = jStat.mean(arr);\n  var sum = 0;\n  var i = arr.length;\n  var tmp;\n  while (--i >= 0) {\n    tmp = arr[i] - mean;\n    sum += tmp * tmp;\n  }\n  return sum;\n};\n\n// sum of an array in each row\njStat.sumrow = function sumrow(arr) {\n  var sum = 0;\n  var i = arr.length;\n  while (--i >= 0)\n    sum += arr[i];\n  return sum;\n};\n\n// product of an array\njStat.product = function product(arr) {\n  var prod = 1;\n  var i = arr.length;\n  while (--i >= 0)\n    prod *= arr[i];\n  return prod;\n};\n\n\n// minimum value of an array\njStat.min = function min(arr) {\n  var low = arr[0];\n  var i = 0;\n  while (++i < arr.length)\n    if (arr[i] < low)\n      low = arr[i];\n  return low;\n};\n\n\n// maximum value of an array\njStat.max = function max(arr) {\n  var high = arr[0];\n  var i = 0;\n  while (++i < arr.length)\n    if (arr[i] > high)\n      high = arr[i];\n  return high;\n};\n\n\n// unique values of an array\njStat.unique = function unique(arr) {\n  var hash = {}, _arr = [];\n  for(var i = 0; i < arr.length; i++) {\n    if (!hash[arr[i]]) {\n      hash[arr[i]] = true;\n      _arr.push(arr[i]);\n    }\n  }\n  return _arr;\n};\n\n\n// mean value of an array\njStat.mean = function mean(arr) {\n  return jStat.sum(arr) / arr.length;\n};\n\n\n// mean squared error (MSE)\njStat.meansqerr = function meansqerr(arr) {\n  return jStat.sumsqerr(arr) / arr.length;\n};\n\n\n// geometric mean of an array\njStat.geomean = function geomean(arr) {\n  return Math.pow(jStat.product(arr), 1 / arr.length);\n};\n\n\n// median of an array\njStat.median = function median(arr) {\n  var arrlen = arr.length;\n  var _arr = arr.slice().sort(ascNum);\n  // check if array is even or odd, then return the appropriate\n  return !(arrlen & 1)\n    ? (_arr[(arrlen / 2) - 1 ] + _arr[(arrlen / 2)]) / 2\n    : _arr[(arrlen / 2) | 0 ];\n};\n\n\n// cumulative sum of an array\njStat.cumsum = function cumsum(arr) {\n  return jStat.cumreduce(arr, function (a, b) { return a + b; });\n};\n\n\n// cumulative product of an array\njStat.cumprod = function cumprod(arr) {\n  return jStat.cumreduce(arr, function (a, b) { return a * b; });\n};\n\n\n// successive differences of a sequence\njStat.diff = function diff(arr) {\n  var diffs = [];\n  var arrLen = arr.length;\n  var i;\n  for (var i = 1; i < arrLen; i++)\n    diffs.push(arr[i] - arr[i - 1]);\n  return diffs;\n};\n\n\n// ranks of an array\njStat.rank = function (arr) {\n  var arrlen = arr.length;\n  var sorted = arr.slice().sort(ascNum);\n  var ranks = new Array(arrlen);\n  for (var i = 0; i < arrlen; i++) {\n    var first = sorted.indexOf(arr[i]);\n    var last = sorted.lastIndexOf(arr[i]);\n    if (first === last) {\n      var val = first;\n    } else {\n      var val = (first + last) / 2;\n    }\n    ranks[i] = val + 1;\n  }\n  return ranks;\n};\n\n\n// mode of an array\n// if there are multiple modes of an array, return all of them\n// is this the appropriate way of handling it?\njStat.mode = function mode(arr) {\n  var arrLen = arr.length;\n  var _arr = arr.slice().sort(ascNum);\n  var count = 1;\n  var maxCount = 0;\n  var numMaxCount = 0;\n  var mode_arr = [];\n  var i;\n\n  for (var i = 0; i < arrLen; i++) {\n    if (_arr[i] === _arr[i + 1]) {\n      count++;\n    } else {\n      if (count > maxCount) {\n        mode_arr = [_arr[i]];\n        maxCount = count;\n        numMaxCount = 0;\n      }\n      // are there multiple max counts\n      else if (count === maxCount) {\n        mode_arr.push(_arr[i]);\n        numMaxCount++;\n      }\n      // resetting count for new value in array\n      count = 1;\n    }\n  }\n\n  return numMaxCount === 0 ? mode_arr[0] : mode_arr;\n};\n\n\n// range of an array\njStat.range = function range(arr) {\n  return jStat.max(arr) - jStat.min(arr);\n};\n\n// variance of an array\n// flag = true indicates sample instead of population\njStat.variance = function variance(arr, flag) {\n  return jStat.sumsqerr(arr) / (arr.length - (flag ? 1 : 0));\n};\n\n// pooled variance of an array of arrays\njStat.pooledvariance = function pooledvariance(arr) {\n  var sumsqerr = arr.reduce(function (a, samples) {return a + jStat.sumsqerr(samples);}, 0);\n  var count = arr.reduce(function (a, samples) {return a + samples.length;}, 0);\n  return sumsqerr / (count - arr.length);\n};\n\n// deviation of an array\njStat.deviation = function (arr) {\n  var mean = jStat.mean(arr);\n  var arrlen = arr.length;\n  var dev = new Array(arrlen);\n  for (var i = 0; i < arrlen; i++) {\n    dev[i] = arr[i] - mean;\n  }\n  return dev;\n};\n\n// standard deviation of an array\n// flag = true indicates sample instead of population\njStat.stdev = function stdev(arr, flag) {\n  return Math.sqrt(jStat.variance(arr, flag));\n};\n\n// pooled standard deviation of an array of arrays\njStat.pooledstdev = function pooledstdev(arr) {\n  return Math.sqrt(jStat.pooledvariance(arr));\n};\n\n// mean deviation (mean absolute deviation) of an array\njStat.meandev = function meandev(arr) {\n  var mean = jStat.mean(arr);\n  var a = [];\n  for (var i = arr.length - 1; i >= 0; i--) {\n    a.push(Math.abs(arr[i] - mean));\n  }\n  return jStat.mean(a);\n};\n\n\n// median deviation (median absolute deviation) of an array\njStat.meddev = function meddev(arr) {\n  var median = jStat.median(arr);\n  var a = [];\n  for (var i = arr.length - 1; i >= 0; i--) {\n    a.push(Math.abs(arr[i] - median));\n  }\n  return jStat.median(a);\n};\n\n\n// coefficient of variation\njStat.coeffvar = function coeffvar(arr) {\n  return jStat.stdev(arr) / jStat.mean(arr);\n};\n\n\n// quartiles of an array\njStat.quartiles = function quartiles(arr) {\n  var arrlen = arr.length;\n  var _arr = arr.slice().sort(ascNum);\n  return [\n    _arr[ Math.round((arrlen) / 4) - 1 ],\n    _arr[ Math.round((arrlen) / 2) - 1 ],\n    _arr[ Math.round((arrlen) * 3 / 4) - 1 ]\n  ];\n};\n\n\n// Arbitary quantiles of an array. Direct port of the scipy.stats\n// implementation by Pierre GF Gerard-Marchant.\njStat.quantiles = function quantiles(arr, quantilesArray, alphap, betap) {\n  var sortedArray = arr.slice().sort(ascNum);\n  var quantileVals = [quantilesArray.length];\n  var n = arr.length;\n  var i, p, m, aleph, k, gamma;\n\n  if (typeof alphap === 'undefined')\n    alphap = 3 / 8;\n  if (typeof betap === 'undefined')\n    betap = 3 / 8;\n\n  for (var i = 0; i < quantilesArray.length; i++) {\n    p = quantilesArray[i];\n    m = alphap + p * (1 - alphap - betap);\n    aleph = n * p + m;\n    k = Math.floor(clip(aleph, 1, n - 1));\n    gamma = clip(aleph - k, 0, 1);\n    quantileVals[i] = (1 - gamma) * sortedArray[k - 1] + gamma * sortedArray[k];\n  }\n\n  return quantileVals;\n};\n\n// Returns the k-th percentile of values in a range, where k is in the\n// range 0..1, exclusive.\njStat.percentile = function percentile(arr, k) {\n  var _arr = arr.slice().sort(ascNum);\n  var realIndex = k * (_arr.length - 1);\n  var index = parseInt(realIndex);\n  var frac = realIndex - index;\n\n  if (index + 1 < _arr.length) {\n    return _arr[index] * (1 - frac) + _arr[index + 1] * frac;\n  } else {\n    return _arr[index];\n  }\n}\n\n\n// The percentile rank of score in a given array. Returns the percentage\n// of all values in the input array that are less than (kind='strict') or\n// less or equal than (kind='weak') score. Default is weak.\njStat.percentileOfScore = function percentileOfScore(arr, score, kind) {\n  var counter = 0;\n  var len = arr.length;\n  var strict = false;\n  var value, i;\n\n  if (kind === 'strict')\n    strict = true;\n\n  for (var i = 0; i < len; i++) {\n    value = arr[i];\n    if ((strict && value < score) ||\n        (!strict && value <= score)) {\n      counter++;\n    }\n  }\n\n  return counter / len;\n};\n\n\n// Histogram (bin count) data\njStat.histogram = function histogram(arr, bins) {\n  var first = jStat.min(arr);\n  var binCnt = bins || 4;\n  var binWidth = (jStat.max(arr) - first) / binCnt;\n  var len = arr.length;\n  var bins = [];\n  var i;\n\n  for (var i = 0; i < binCnt; i++)\n    bins[i] = 0;\n  for (var i = 0; i < len; i++)\n    bins[Math.min(Math.floor(((arr[i] - first) / binWidth)), binCnt - 1)] += 1;\n\n  return bins;\n};\n\n\n// covariance of two arrays\njStat.covariance = function covariance(arr1, arr2) {\n  var u = jStat.mean(arr1);\n  var v = jStat.mean(arr2);\n  var arr1Len = arr1.length;\n  var sq_dev = new Array(arr1Len);\n  var i;\n\n  for (var i = 0; i < arr1Len; i++)\n    sq_dev[i] = (arr1[i] - u) * (arr2[i] - v);\n\n  return jStat.sum(sq_dev) / (arr1Len - 1);\n};\n\n\n// (pearson's) population correlation coefficient, rho\njStat.corrcoeff = function corrcoeff(arr1, arr2) {\n  return jStat.covariance(arr1, arr2) /\n      jStat.stdev(arr1, 1) /\n      jStat.stdev(arr2, 1);\n};\n\n  // (spearman's) rank correlation coefficient, sp\njStat.spearmancoeff =  function (arr1, arr2) {\n  arr1 = jStat.rank(arr1);\n  arr2 = jStat.rank(arr2);\n  //return pearson's correlation of the ranks:\n  return jStat.corrcoeff(arr1, arr2);\n}\n\n\n// statistical standardized moments (general form of skew/kurt)\njStat.stanMoment = function stanMoment(arr, n) {\n  var mu = jStat.mean(arr);\n  var sigma = jStat.stdev(arr);\n  var len = arr.length;\n  var skewSum = 0;\n\n  for (var i = 0; i < len; i++)\n    skewSum += Math.pow((arr[i] - mu) / sigma, n);\n\n  return skewSum / arr.length;\n};\n\n// (pearson's) moment coefficient of skewness\njStat.skewness = function skewness(arr) {\n  return jStat.stanMoment(arr, 3);\n};\n\n// (pearson's) (excess) kurtosis\njStat.kurtosis = function kurtosis(arr) {\n  return jStat.stanMoment(arr, 4) - 3;\n};\n\n\nvar jProto = jStat.prototype;\n\n\n// Extend jProto with method for calculating cumulative sums and products.\n// This differs from the similar extension below as cumsum and cumprod should\n// not be run again in the case fullbool === true.\n// If a matrix is passed, automatically assume operation should be done on the\n// columns.\n(function(funcs) {\n  for (var i = 0; i < funcs.length; i++) (function(passfunc) {\n    // If a matrix is passed, automatically assume operation should be done on\n    // the columns.\n    jProto[passfunc] = function(fullbool, func) {\n      var arr = [];\n      var i = 0;\n      var tmpthis = this;\n      // Assignment reassignation depending on how parameters were passed in.\n      if (isFunction(fullbool)) {\n        func = fullbool;\n        fullbool = false;\n      }\n      // Check if a callback was passed with the function.\n      if (func) {\n        setTimeout(function() {\n          func.call(tmpthis, jProto[passfunc].call(tmpthis, fullbool));\n        });\n        return this;\n      }\n      // Check if matrix and run calculations.\n      if (this.length > 1) {\n        tmpthis = fullbool === true ? this : this.transpose();\n        for (; i < tmpthis.length; i++)\n          arr[i] = jStat[passfunc](tmpthis[i]);\n        return arr;\n      }\n      // Pass fullbool if only vector, not a matrix. for variance and stdev.\n      return jStat[passfunc](this[0], fullbool);\n    };\n  })(funcs[i]);\n})(('cumsum cumprod').split(' '));\n\n\n// Extend jProto with methods which don't require arguments and work on columns.\n(function(funcs) {\n  for (var i = 0; i < funcs.length; i++) (function(passfunc) {\n    // If a matrix is passed, automatically assume operation should be done on\n    // the columns.\n    jProto[passfunc] = function(fullbool, func) {\n      var arr = [];\n      var i = 0;\n      var tmpthis = this;\n      // Assignment reassignation depending on how parameters were passed in.\n      if (isFunction(fullbool)) {\n        func = fullbool;\n        fullbool = false;\n      }\n      // Check if a callback was passed with the function.\n      if (func) {\n        setTimeout(function() {\n          func.call(tmpthis, jProto[passfunc].call(tmpthis, fullbool));\n        });\n        return this;\n      }\n      // Check if matrix and run calculations.\n      if (this.length > 1) {\n        if (passfunc !== 'sumrow')\n          tmpthis = fullbool === true ? this : this.transpose();\n        for (; i < tmpthis.length; i++)\n          arr[i] = jStat[passfunc](tmpthis[i]);\n        return fullbool === true\n            ? jStat[passfunc](jStat.utils.toVector(arr))\n            : arr;\n      }\n      // Pass fullbool if only vector, not a matrix. for variance and stdev.\n      return jStat[passfunc](this[0], fullbool);\n    };\n  })(funcs[i]);\n})(('sum sumsqrd sumsqerr sumrow product min max unique mean meansqerr ' +\n    'geomean median diff rank mode range variance deviation stdev meandev ' +\n    'meddev coeffvar quartiles histogram skewness kurtosis').split(' '));\n\n\n// Extend jProto with functions that take arguments. Operations on matrices are\n// done on columns.\n(function(funcs) {\n  for (var i = 0; i < funcs.length; i++) (function(passfunc) {\n    jProto[passfunc] = function() {\n      var arr = [];\n      var i = 0;\n      var tmpthis = this;\n      var args = Array.prototype.slice.call(arguments);\n\n      // If the last argument is a function, we assume it's a callback; we\n      // strip the callback out and call the function again.\n      if (isFunction(args[args.length - 1])) {\n        var callbackFunction = args[args.length - 1];\n        var argsToPass = args.slice(0, args.length - 1);\n\n        setTimeout(function() {\n          callbackFunction.call(tmpthis,\n                                jProto[passfunc].apply(tmpthis, argsToPass));\n        });\n        return this;\n\n      // Otherwise we curry the function args and call normally.\n      } else {\n        var callbackFunction = undefined;\n        var curriedFunction = function curriedFunction(vector) {\n          return jStat[passfunc].apply(tmpthis, [vector].concat(args));\n        }\n      }\n\n      // If this is a matrix, run column-by-column.\n      if (this.length > 1) {\n        tmpthis = tmpthis.transpose();\n        for (; i < tmpthis.length; i++)\n          arr[i] = curriedFunction(tmpthis[i]);\n        return arr;\n      }\n\n      // Otherwise run on the vector.\n      return curriedFunction(this[0]);\n    };\n  })(funcs[i]);\n})('quantiles percentileOfScore'.split(' '));\n\n}(jStat, Math));\n// Special functions //\n(function(jStat, Math) {\n\n// Log-gamma function\njStat.gammaln = function gammaln(x) {\n  var j = 0;\n  var cof = [\n    76.18009172947146, -86.50532032941677, 24.01409824083091,\n    -1.231739572450155, 0.1208650973866179e-2, -0.5395239384953e-5\n  ];\n  var ser = 1.000000000190015;\n  var xx, y, tmp;\n  tmp = (y = xx = x) + 5.5;\n  tmp -= (xx + 0.5) * Math.log(tmp);\n  for (; j < 6; j++)\n    ser += cof[j] / ++y;\n  return Math.log(2.5066282746310005 * ser / xx) - tmp;\n};\n\n\n// gamma of x\njStat.gammafn = function gammafn(x) {\n  var p = [-1.716185138865495, 24.76565080557592, -379.80425647094563,\n           629.3311553128184, 866.9662027904133, -31451.272968848367,\n           -36144.413418691176, 66456.14382024054\n  ];\n  var q = [-30.8402300119739, 315.35062697960416, -1015.1563674902192,\n           -3107.771671572311, 22538.118420980151, 4755.8462775278811,\n           -134659.9598649693, -115132.2596755535];\n  var fact = false;\n  var n = 0;\n  var xden = 0;\n  var xnum = 0;\n  var y = x;\n  var i, z, yi, res, sum, ysq;\n  if (y <= 0) {\n    res = y % 1 + 3.6e-16;\n    if (res) {\n      fact = (!(y & 1) ? 1 : -1) * Math.PI / Math.sin(Math.PI * res);\n      y = 1 - y;\n    } else {\n      return Infinity;\n    }\n  }\n  yi = y;\n  if (y < 1) {\n    z = y++;\n  } else {\n    z = (y -= n = (y | 0) - 1) - 1;\n  }\n  for (var i = 0; i < 8; ++i) {\n    xnum = (xnum + p[i]) * z;\n    xden = xden * z + q[i];\n  }\n  res = xnum / xden + 1;\n  if (yi < y) {\n    res /= yi;\n  } else if (yi > y) {\n    for (var i = 0; i < n; ++i) {\n      res *= y;\n      y++;\n    }\n  }\n  if (fact) {\n    res = fact / res;\n  }\n  return res;\n};\n\n\n// lower incomplete gamma function, which is usually typeset with a\n// lower-case greek gamma as the function symbol\njStat.gammap = function gammap(a, x) {\n  return jStat.lowRegGamma(a, x) * jStat.gammafn(a);\n};\n\n\n// The lower regularized incomplete gamma function, usually written P(a,x)\njStat.lowRegGamma = function lowRegGamma(a, x) {\n  var aln = jStat.gammaln(a);\n  var ap = a;\n  var sum = 1 / a;\n  var del = sum;\n  var b = x + 1 - a;\n  var c = 1 / 1.0e-30;\n  var d = 1 / b;\n  var h = d;\n  var i = 1;\n  // calculate maximum number of itterations required for a\n  var ITMAX = -~(Math.log((a >= 1) ? a : 1 / a) * 8.5 + a * 0.4 + 17);\n  var an, endval;\n\n  if (x < 0 || a <= 0) {\n    return NaN;\n  } else if (x < a + 1) {\n    for (; i <= ITMAX; i++) {\n      sum += del *= x / ++ap;\n    }\n    return (sum * Math.exp(-x + a * Math.log(x) - (aln)));\n  }\n\n  for (; i <= ITMAX; i++) {\n    an = -i * (i - a);\n    b += 2;\n    d = an * d + b;\n    c = b + an / c;\n    d = 1 / d;\n    h *= d * c;\n  }\n\n  return (1 - h * Math.exp(-x + a * Math.log(x) - (aln)));\n};\n\n// natural log factorial of n\njStat.factorialln = function factorialln(n) {\n  return n < 0 ? NaN : jStat.gammaln(n + 1);\n};\n\n// factorial of n\njStat.factorial = function factorial(n) {\n  return n < 0 ? NaN : jStat.gammafn(n + 1);\n};\n\n// combinations of n, m\njStat.combination = function combination(n, m) {\n  // make sure n or m don't exceed the upper limit of usable values\n  return (n > 170 || m > 170)\n      ? Math.exp(jStat.combinationln(n, m))\n      : (jStat.factorial(n) / jStat.factorial(m)) / jStat.factorial(n - m);\n};\n\n\njStat.combinationln = function combinationln(n, m){\n  return jStat.factorialln(n) - jStat.factorialln(m) - jStat.factorialln(n - m);\n};\n\n\n// permutations of n, m\njStat.permutation = function permutation(n, m) {\n  return jStat.factorial(n) / jStat.factorial(n - m);\n};\n\n\n// beta function\njStat.betafn = function betafn(x, y) {\n  // ensure arguments are positive\n  if (x <= 0 || y <= 0)\n    return undefined;\n  // make sure x + y doesn't exceed the upper limit of usable values\n  return (x + y > 170)\n      ? Math.exp(jStat.betaln(x, y))\n      : jStat.gammafn(x) * jStat.gammafn(y) / jStat.gammafn(x + y);\n};\n\n\n// natural logarithm of beta function\njStat.betaln = function betaln(x, y) {\n  return jStat.gammaln(x) + jStat.gammaln(y) - jStat.gammaln(x + y);\n};\n\n\n// Evaluates the continued fraction for incomplete beta function by modified\n// Lentz's method.\njStat.betacf = function betacf(x, a, b) {\n  var fpmin = 1e-30;\n  var m = 1;\n  var qab = a + b;\n  var qap = a + 1;\n  var qam = a - 1;\n  var c = 1;\n  var d = 1 - qab * x / qap;\n  var m2, aa, del, h;\n\n  // These q's will be used in factors that occur in the coefficients\n  if (Math.abs(d) < fpmin)\n    d = fpmin;\n  d = 1 / d;\n  h = d;\n\n  for (; m <= 100; m++) {\n    m2 = 2 * m;\n    aa = m * (b - m) * x / ((qam + m2) * (a + m2));\n    // One step (the even one) of the recurrence\n    d = 1 + aa * d;\n    if (Math.abs(d) < fpmin)\n      d = fpmin;\n    c = 1 + aa / c;\n    if (Math.abs(c) < fpmin)\n      c = fpmin;\n    d = 1 / d;\n    h *= d * c;\n    aa = -(a + m) * (qab + m) * x / ((a + m2) * (qap + m2));\n    // Next step of the recurrence (the odd one)\n    d = 1 + aa * d;\n    if (Math.abs(d) < fpmin)\n      d = fpmin;\n    c = 1 + aa / c;\n    if (Math.abs(c) < fpmin)\n      c = fpmin;\n    d = 1 / d;\n    del = d * c;\n    h *= del;\n    if (Math.abs(del - 1.0) < 3e-7)\n      break;\n  }\n\n  return h;\n};\n\n\n// Returns the inverse of the lower regularized inomplete gamma function\njStat.gammapinv = function gammapinv(p, a) {\n  var j = 0;\n  var a1 = a - 1;\n  var EPS = 1e-8;\n  var gln = jStat.gammaln(a);\n  var x, err, t, u, pp, lna1, afac;\n\n  if (p >= 1)\n    return Math.max(100, a + 100 * Math.sqrt(a));\n  if (p <= 0)\n    return 0;\n  if (a > 1) {\n    lna1 = Math.log(a1);\n    afac = Math.exp(a1 * (lna1 - 1) - gln);\n    pp = (p < 0.5) ? p : 1 - p;\n    t = Math.sqrt(-2 * Math.log(pp));\n    x = (2.30753 + t * 0.27061) / (1 + t * (0.99229 + t * 0.04481)) - t;\n    if (p < 0.5)\n      x = -x;\n    x = Math.max(1e-3,\n                 a * Math.pow(1 - 1 / (9 * a) - x / (3 * Math.sqrt(a)), 3));\n  } else {\n    t = 1 - a * (0.253 + a * 0.12);\n    if (p < t)\n      x = Math.pow(p / t, 1 / a);\n    else\n      x = 1 - Math.log(1 - (p - t) / (1 - t));\n  }\n\n  for(; j < 12; j++) {\n    if (x <= 0)\n      return 0;\n    err = jStat.lowRegGamma(a, x) - p;\n    if (a > 1)\n      t = afac * Math.exp(-(x - a1) + a1 * (Math.log(x) - lna1));\n    else\n      t = Math.exp(-x + a1 * Math.log(x) - gln);\n    u = err / t;\n    x -= (t = u / (1 - 0.5 * Math.min(1, u * ((a - 1) / x - 1))));\n    if (x <= 0)\n      x = 0.5 * (x + t);\n    if (Math.abs(t) < EPS * x)\n      break;\n  }\n\n  return x;\n};\n\n\n// Returns the error function erf(x)\njStat.erf = function erf(x) {\n  var cof = [-1.3026537197817094, 6.4196979235649026e-1, 1.9476473204185836e-2,\n             -9.561514786808631e-3, -9.46595344482036e-4, 3.66839497852761e-4,\n             4.2523324806907e-5, -2.0278578112534e-5, -1.624290004647e-6,\n             1.303655835580e-6, 1.5626441722e-8, -8.5238095915e-8,\n             6.529054439e-9, 5.059343495e-9, -9.91364156e-10,\n             -2.27365122e-10, 9.6467911e-11, 2.394038e-12,\n             -6.886027e-12, 8.94487e-13, 3.13092e-13,\n             -1.12708e-13, 3.81e-16, 7.106e-15,\n             -1.523e-15, -9.4e-17, 1.21e-16,\n             -2.8e-17];\n  var j = cof.length - 1;\n  var isneg = false;\n  var d = 0;\n  var dd = 0;\n  var t, ty, tmp, res;\n\n  if (x < 0) {\n    x = -x;\n    isneg = true;\n  }\n\n  t = 2 / (2 + x);\n  ty = 4 * t - 2;\n\n  for(; j > 0; j--) {\n    tmp = d;\n    d = ty * d - dd + cof[j];\n    dd = tmp;\n  }\n\n  res = t * Math.exp(-x * x + 0.5 * (cof[0] + ty * d) - dd);\n  return isneg ? res - 1 : 1 - res;\n};\n\n\n// Returns the complmentary error function erfc(x)\njStat.erfc = function erfc(x) {\n  return 1 - jStat.erf(x);\n};\n\n\n// Returns the inverse of the complementary error function\njStat.erfcinv = function erfcinv(p) {\n  var j = 0;\n  var x, err, t, pp;\n  if (p >= 2)\n    return -100;\n  if (p <= 0)\n    return 100;\n  pp = (p < 1) ? p : 2 - p;\n  t = Math.sqrt(-2 * Math.log(pp / 2));\n  x = -0.70711 * ((2.30753 + t * 0.27061) /\n                  (1 + t * (0.99229 + t * 0.04481)) - t);\n  for (; j < 2; j++) {\n    err = jStat.erfc(x) - pp;\n    x += err / (1.12837916709551257 * Math.exp(-x * x) - x * err);\n  }\n  return (p < 1) ? x : -x;\n};\n\n\n// Returns the inverse of the incomplete beta function\njStat.ibetainv = function ibetainv(p, a, b) {\n  var EPS = 1e-8;\n  var a1 = a - 1;\n  var b1 = b - 1;\n  var j = 0;\n  var lna, lnb, pp, t, u, err, x, al, h, w, afac;\n  if (p <= 0)\n    return 0;\n  if (p >= 1)\n    return 1;\n  if (a >= 1 && b >= 1) {\n    pp = (p < 0.5) ? p : 1 - p;\n    t = Math.sqrt(-2 * Math.log(pp));\n    x = (2.30753 + t * 0.27061) / (1 + t* (0.99229 + t * 0.04481)) - t;\n    if (p < 0.5)\n      x = -x;\n    al = (x * x - 3) / 6;\n    h = 2 / (1 / (2 * a - 1)  + 1 / (2 * b - 1));\n    w = (x * Math.sqrt(al + h) / h) - (1 / (2 * b - 1) - 1 / (2 * a - 1)) *\n        (al + 5 / 6 - 2 / (3 * h));\n    x = a / (a + b * Math.exp(2 * w));\n  } else {\n    lna = Math.log(a / (a + b));\n    lnb = Math.log(b / (a + b));\n    t = Math.exp(a * lna) / a;\n    u = Math.exp(b * lnb) / b;\n    w = t + u;\n    if (p < t / w)\n      x = Math.pow(a * w * p, 1 / a);\n    else\n      x = 1 - Math.pow(b * w * (1 - p), 1 / b);\n  }\n  afac = -jStat.gammaln(a) - jStat.gammaln(b) + jStat.gammaln(a + b);\n  for(; j < 10; j++) {\n    if (x === 0 || x === 1)\n      return x;\n    err = jStat.ibeta(x, a, b) - p;\n    t = Math.exp(a1 * Math.log(x) + b1 * Math.log(1 - x) + afac);\n    u = err / t;\n    x -= (t = u / (1 - 0.5 * Math.min(1, u * (a1 / x - b1 / (1 - x)))));\n    if (x <= 0)\n      x = 0.5 * (x + t);\n    if (x >= 1)\n      x = 0.5 * (x + t + 1);\n    if (Math.abs(t) < EPS * x && j > 0)\n      break;\n  }\n  return x;\n};\n\n\n// Returns the incomplete beta function I_x(a,b)\njStat.ibeta = function ibeta(x, a, b) {\n  // Factors in front of the continued fraction.\n  var bt = (x === 0 || x === 1) ?  0 :\n    Math.exp(jStat.gammaln(a + b) - jStat.gammaln(a) -\n             jStat.gammaln(b) + a * Math.log(x) + b *\n             Math.log(1 - x));\n  if (x < 0 || x > 1)\n    return false;\n  if (x < (a + 1) / (a + b + 2))\n    // Use continued fraction directly.\n    return bt * jStat.betacf(x, a, b) / a;\n  // else use continued fraction after making the symmetry transformation.\n  return 1 - bt * jStat.betacf(1 - x, b, a) / b;\n};\n\n\n// Returns a normal deviate (mu=0, sigma=1).\n// If n and m are specified it returns a object of normal deviates.\njStat.randn = function randn(n, m) {\n  var u, v, x, y, q, mat;\n  if (!m)\n    m = n;\n  if (n)\n    return jStat.create(n, m, function() { return jStat.randn(); });\n  do {\n    u = Math.random();\n    v = 1.7156 * (Math.random() - 0.5);\n    x = u - 0.449871;\n    y = Math.abs(v) + 0.386595;\n    q = x * x + y * (0.19600 * y - 0.25472 * x);\n  } while (q > 0.27597 && (q > 0.27846 || v * v > -4 * Math.log(u) * u * u));\n  return v / u;\n};\n\n\n// Returns a gamma deviate by the method of Marsaglia and Tsang.\njStat.randg = function randg(shape, n, m) {\n  var oalph = shape;\n  var a1, a2, u, v, x, mat;\n  if (!m)\n    m = n;\n  if (!shape)\n    shape = 1;\n  if (n) {\n    mat = jStat.zeros(n,m);\n    mat.alter(function() { return jStat.randg(shape); });\n    return mat;\n  }\n  if (shape < 1)\n    shape += 1;\n  a1 = shape - 1 / 3;\n  a2 = 1 / Math.sqrt(9 * a1);\n  do {\n    do {\n      x = jStat.randn();\n      v = 1 + a2 * x;\n    } while(v <= 0);\n    v = v * v * v;\n    u = Math.random();\n  } while(u > 1 - 0.331 * Math.pow(x, 4) &&\n          Math.log(u) > 0.5 * x*x + a1 * (1 - v + Math.log(v)));\n  // alpha > 1\n  if (shape == oalph)\n    return a1 * v;\n  // alpha < 1\n  do {\n    u = Math.random();\n  } while(u === 0);\n  return Math.pow(u, 1 / oalph) * a1 * v;\n};\n\n\n// making use of static methods on the instance\n(function(funcs) {\n  for (var i = 0; i < funcs.length; i++) (function(passfunc) {\n    jStat.fn[passfunc] = function() {\n      return jStat(\n          jStat.map(this, function(value) { return jStat[passfunc](value); }));\n    }\n  })(funcs[i]);\n})('gammaln gammafn factorial factorialln'.split(' '));\n\n\n(function(funcs) {\n  for (var i = 0; i < funcs.length; i++) (function(passfunc) {\n    jStat.fn[passfunc] = function() {\n      return jStat(jStat[passfunc].apply(null, arguments));\n    };\n  })(funcs[i]);\n})('randn'.split(' '));\n\n}(jStat, Math));\n(function(jStat, Math) {\n\n// generate all distribution instance methods\n(function(list) {\n  for (var i = 0; i < list.length; i++) (function(func) {\n    // distribution instance method\n    jStat[func] = function(a, b, c) {\n      if (!(this instanceof arguments.callee))\n        return new arguments.callee(a, b, c);\n      this._a = a;\n      this._b = b;\n      this._c = c;\n      return this;\n    };\n    // distribution method to be used on a jStat instance\n    jStat.fn[func] = function(a, b, c) {\n      var newthis = jStat[func](a, b, c);\n      newthis.data = this;\n      return newthis;\n    };\n    // sample instance method\n    jStat[func].prototype.sample = function(arr) {\n      var a = this._a;\n      var b = this._b;\n      var c = this._c;\n      if (arr)\n        return jStat.alter(arr, function() {\n          return jStat[func].sample(a, b, c);\n        });\n      else\n        return jStat[func].sample(a, b, c);\n    };\n    // generate the pdf, cdf and inv instance methods\n    (function(vals) {\n      for (var i = 0; i < vals.length; i++) (function(fnfunc) {\n        jStat[func].prototype[fnfunc] = function(x) {\n          var a = this._a;\n          var b = this._b;\n          var c = this._c;\n          if (!x && x !== 0)\n            x = this.data;\n          if (typeof x !== 'number') {\n            return jStat.fn.map.call(x, function(x) {\n              return jStat[func][fnfunc](x, a, b, c);\n            });\n          }\n          return jStat[func][fnfunc](x, a, b, c);\n        };\n      })(vals[i]);\n    })('pdf cdf inv'.split(' '));\n    // generate the mean, median, mode and variance instance methods\n    (function(vals) {\n      for (var i = 0; i < vals.length; i++) (function(fnfunc) {\n        jStat[func].prototype[fnfunc] = function() {\n          return jStat[func][fnfunc](this._a, this._b, this._c);\n        };\n      })(vals[i]);\n    })('mean median mode variance'.split(' '));\n  })(list[i]);\n})((\n  'beta centralF cauchy chisquare exponential gamma invgamma kumaraswamy ' +\n  'laplace lognormal noncentralt normal pareto studentt weibull uniform ' +\n  'binomial negbin hypgeom poisson triangular tukey arcsine'\n).split(' '));\n\n\n\n// extend beta function with static methods\njStat.extend(jStat.beta, {\n  pdf: function pdf(x, alpha, beta) {\n    // PDF is zero outside the support\n    if (x > 1 || x < 0)\n      return 0;\n    // PDF is one for the uniform case\n    if (alpha == 1 && beta == 1)\n      return 1;\n\n    if (alpha < 512 && beta < 512) {\n      return (Math.pow(x, alpha - 1) * Math.pow(1 - x, beta - 1)) /\n          jStat.betafn(alpha, beta);\n    } else {\n      return Math.exp((alpha - 1) * Math.log(x) +\n                      (beta - 1) * Math.log(1 - x) -\n                      jStat.betaln(alpha, beta));\n    }\n  },\n\n  cdf: function cdf(x, alpha, beta) {\n    return (x > 1 || x < 0) ? (x > 1) * 1 : jStat.ibeta(x, alpha, beta);\n  },\n\n  inv: function inv(x, alpha, beta) {\n    return jStat.ibetainv(x, alpha, beta);\n  },\n\n  mean: function mean(alpha, beta) {\n    return alpha / (alpha + beta);\n  },\n\n  median: function median(alpha, beta) {\n    return jStat.ibetainv(0.5, alpha, beta);\n  },\n\n  mode: function mode(alpha, beta) {\n    return (alpha - 1 ) / ( alpha + beta - 2);\n  },\n\n  // return a random sample\n  sample: function sample(alpha, beta) {\n    var u = jStat.randg(alpha);\n    return u / (u + jStat.randg(beta));\n  },\n\n  variance: function variance(alpha, beta) {\n    return (alpha * beta) / (Math.pow(alpha + beta, 2) * (alpha + beta + 1));\n  }\n});\n\n// extend F function with static methods\njStat.extend(jStat.centralF, {\n  // This implementation of the pdf function avoids float overflow\n  // See the way that R calculates this value:\n  // https://svn.r-project.org/R/trunk/src/nmath/df.c\n  pdf: function pdf(x, df1, df2) {\n    var p, q, f;\n\n    if (x < 0)\n      return 0;\n\n    if (df1 <= 2) {\n      if (x === 0 && df1 < 2) {\n        return Infinity;\n      }\n      if (x === 0 && df1 === 2) {\n        return 1;\n      }\n      return (1 / jStat.betafn(df1 / 2, df2 / 2)) *\n              Math.pow(df1 / df2, df1 / 2) *\n              Math.pow(x, (df1/2) - 1) *\n              Math.pow((1 + (df1 / df2) * x), -(df1 + df2) / 2);\n    }\n\n    p = (df1 * x) / (df2 + x * df1);\n    q = df2 / (df2 + x * df1);\n    f = df1 * q / 2.0;\n    return f * jStat.binomial.pdf((df1 - 2) / 2, (df1 + df2 - 2) / 2, p);\n  },\n\n  cdf: function cdf(x, df1, df2) {\n    if (x < 0)\n      return 0;\n    return jStat.ibeta((df1 * x) / (df1 * x + df2), df1 / 2, df2 / 2);\n  },\n\n  inv: function inv(x, df1, df2) {\n    return df2 / (df1 * (1 / jStat.ibetainv(x, df1 / 2, df2 / 2) - 1));\n  },\n\n  mean: function mean(df1, df2) {\n    return (df2 > 2) ? df2 / (df2 - 2) : undefined;\n  },\n\n  mode: function mode(df1, df2) {\n    return (df1 > 2) ? (df2 * (df1 - 2)) / (df1 * (df2 + 2)) : undefined;\n  },\n\n  // return a random sample\n  sample: function sample(df1, df2) {\n    var x1 = jStat.randg(df1 / 2) * 2;\n    var x2 = jStat.randg(df2 / 2) * 2;\n    return (x1 / df1) / (x2 / df2);\n  },\n\n  variance: function variance(df1, df2) {\n    if (df2 <= 4)\n      return undefined;\n    return 2 * df2 * df2 * (df1 + df2 - 2) /\n        (df1 * (df2 - 2) * (df2 - 2) * (df2 - 4));\n  }\n});\n\n\n// extend cauchy function with static methods\njStat.extend(jStat.cauchy, {\n  pdf: function pdf(x, local, scale) {\n    if (scale < 0) { return 0; }\n\n    return (scale / (Math.pow(x - local, 2) + Math.pow(scale, 2))) / Math.PI;\n  },\n\n  cdf: function cdf(x, local, scale) {\n    return Math.atan((x - local) / scale) / Math.PI + 0.5;\n  },\n\n  inv: function(p, local, scale) {\n    return local + scale * Math.tan(Math.PI * (p - 0.5));\n  },\n\n  median: function median(local, scale) {\n    return local;\n  },\n\n  mode: function mode(local, scale) {\n    return local;\n  },\n\n  sample: function sample(local, scale) {\n    return jStat.randn() *\n        Math.sqrt(1 / (2 * jStat.randg(0.5))) * scale + local;\n  }\n});\n\n\n\n// extend chisquare function with static methods\njStat.extend(jStat.chisquare, {\n  pdf: function pdf(x, dof) {\n    if (x < 0)\n      return 0;\n    return (x === 0 && dof === 2) ? 0.5 :\n        Math.exp((dof / 2 - 1) * Math.log(x) - x / 2 - (dof / 2) *\n                 Math.log(2) - jStat.gammaln(dof / 2));\n  },\n\n  cdf: function cdf(x, dof) {\n    if (x < 0)\n      return 0;\n    return jStat.lowRegGamma(dof / 2, x / 2);\n  },\n\n  inv: function(p, dof) {\n    return 2 * jStat.gammapinv(p, 0.5 * dof);\n  },\n\n  mean : function(dof) {\n    return dof;\n  },\n\n  // TODO: this is an approximation (is there a better way?)\n  median: function median(dof) {\n    return dof * Math.pow(1 - (2 / (9 * dof)), 3);\n  },\n\n  mode: function mode(dof) {\n    return (dof - 2 > 0) ? dof - 2 : 0;\n  },\n\n  sample: function sample(dof) {\n    return jStat.randg(dof / 2) * 2;\n  },\n\n  variance: function variance(dof) {\n    return 2 * dof;\n  }\n});\n\n\n\n// extend exponential function with static methods\njStat.extend(jStat.exponential, {\n  pdf: function pdf(x, rate) {\n    return x < 0 ? 0 : rate * Math.exp(-rate * x);\n  },\n\n  cdf: function cdf(x, rate) {\n    return x < 0 ? 0 : 1 - Math.exp(-rate * x);\n  },\n\n  inv: function(p, rate) {\n    return -Math.log(1 - p) / rate;\n  },\n\n  mean : function(rate) {\n    return 1 / rate;\n  },\n\n  median: function (rate) {\n    return (1 / rate) * Math.log(2);\n  },\n\n  mode: function mode(rate) {\n    return 0;\n  },\n\n  sample: function sample(rate) {\n    return -1 / rate * Math.log(Math.random());\n  },\n\n  variance : function(rate) {\n    return Math.pow(rate, -2);\n  }\n});\n\n\n\n// extend gamma function with static methods\njStat.extend(jStat.gamma, {\n  pdf: function pdf(x, shape, scale) {\n    if (x < 0)\n      return 0;\n    return (x === 0 && shape === 1) ? 1 / scale :\n            Math.exp((shape - 1) * Math.log(x) - x / scale -\n                    jStat.gammaln(shape) - shape * Math.log(scale));\n  },\n\n  cdf: function cdf(x, shape, scale) {\n    if (x < 0)\n      return 0;\n    return jStat.lowRegGamma(shape, x / scale);\n  },\n\n  inv: function(p, shape, scale) {\n    return jStat.gammapinv(p, shape) * scale;\n  },\n\n  mean : function(shape, scale) {\n    return shape * scale;\n  },\n\n  mode: function mode(shape, scale) {\n    if(shape > 1) return (shape - 1) * scale;\n    return undefined;\n  },\n\n  sample: function sample(shape, scale) {\n    return jStat.randg(shape) * scale;\n  },\n\n  variance: function variance(shape, scale) {\n    return shape * scale * scale;\n  }\n});\n\n// extend inverse gamma function with static methods\njStat.extend(jStat.invgamma, {\n  pdf: function pdf(x, shape, scale) {\n    if (x <= 0)\n      return 0;\n    return Math.exp(-(shape + 1) * Math.log(x) - scale / x -\n                    jStat.gammaln(shape) + shape * Math.log(scale));\n  },\n\n  cdf: function cdf(x, shape, scale) {\n    if (x <= 0)\n      return 0;\n    return 1 - jStat.lowRegGamma(shape, scale / x);\n  },\n\n  inv: function(p, shape, scale) {\n    return scale / jStat.gammapinv(1 - p, shape);\n  },\n\n  mean : function(shape, scale) {\n    return (shape > 1) ? scale / (shape - 1) : undefined;\n  },\n\n  mode: function mode(shape, scale) {\n    return scale / (shape + 1);\n  },\n\n  sample: function sample(shape, scale) {\n    return scale / jStat.randg(shape);\n  },\n\n  variance: function variance(shape, scale) {\n    if (shape <= 2)\n      return undefined;\n    return scale * scale / ((shape - 1) * (shape - 1) * (shape - 2));\n  }\n});\n\n\n// extend kumaraswamy function with static methods\njStat.extend(jStat.kumaraswamy, {\n  pdf: function pdf(x, alpha, beta) {\n    if (x === 0 && alpha === 1)\n      return beta;\n    else if (x === 1 && beta === 1)\n      return alpha;\n    return Math.exp(Math.log(alpha) + Math.log(beta) + (alpha - 1) *\n                    Math.log(x) + (beta - 1) *\n                    Math.log(1 - Math.pow(x, alpha)));\n  },\n\n  cdf: function cdf(x, alpha, beta) {\n    if (x < 0)\n      return 0;\n    else if (x > 1)\n      return 1;\n    return (1 - Math.pow(1 - Math.pow(x, alpha), beta));\n  },\n\n  inv: function inv(p, alpha, beta) {\n    return Math.pow(1 - Math.pow(1 - p, 1 / beta), 1 / alpha);\n  },\n\n  mean : function(alpha, beta) {\n    return (beta * jStat.gammafn(1 + 1 / alpha) *\n            jStat.gammafn(beta)) / (jStat.gammafn(1 + 1 / alpha + beta));\n  },\n\n  median: function median(alpha, beta) {\n    return Math.pow(1 - Math.pow(2, -1 / beta), 1 / alpha);\n  },\n\n  mode: function mode(alpha, beta) {\n    if (!(alpha >= 1 && beta >= 1 && (alpha !== 1 && beta !== 1)))\n      return undefined;\n    return Math.pow((alpha - 1) / (alpha * beta - 1), 1 / alpha);\n  },\n\n  variance: function variance(alpha, beta) {\n    throw new Error('variance not yet implemented');\n    // TODO: complete this\n  }\n});\n\n\n\n// extend lognormal function with static methods\njStat.extend(jStat.lognormal, {\n  pdf: function pdf(x, mu, sigma) {\n    if (x <= 0)\n      return 0;\n    return Math.exp(-Math.log(x) - 0.5 * Math.log(2 * Math.PI) -\n                    Math.log(sigma) - Math.pow(Math.log(x) - mu, 2) /\n                    (2 * sigma * sigma));\n  },\n\n  cdf: function cdf(x, mu, sigma) {\n    if (x < 0)\n      return 0;\n    return 0.5 +\n        (0.5 * jStat.erf((Math.log(x) - mu) / Math.sqrt(2 * sigma * sigma)));\n  },\n\n  inv: function(p, mu, sigma) {\n    return Math.exp(-1.41421356237309505 * sigma * jStat.erfcinv(2 * p) + mu);\n  },\n\n  mean: function mean(mu, sigma) {\n    return Math.exp(mu + sigma * sigma / 2);\n  },\n\n  median: function median(mu, sigma) {\n    return Math.exp(mu);\n  },\n\n  mode: function mode(mu, sigma) {\n    return Math.exp(mu - sigma * sigma);\n  },\n\n  sample: function sample(mu, sigma) {\n    return Math.exp(jStat.randn() * sigma + mu);\n  },\n\n  variance: function variance(mu, sigma) {\n    return (Math.exp(sigma * sigma) - 1) * Math.exp(2 * mu + sigma * sigma);\n  }\n});\n\n\n\n// extend noncentralt function with static methods\njStat.extend(jStat.noncentralt, {\n  pdf: function pdf(x, dof, ncp) {\n    var tol = 1e-14;\n    if (Math.abs(ncp) < tol)  // ncp approx 0; use student-t\n      return jStat.studentt.pdf(x, dof)\n\n    if (Math.abs(x) < tol) {  // different formula for x == 0\n      return Math.exp(jStat.gammaln((dof + 1) / 2) - ncp * ncp / 2 -\n                      0.5 * Math.log(Math.PI * dof) - jStat.gammaln(dof / 2));\n    }\n\n    // formula for x != 0\n    return dof / x *\n        (jStat.noncentralt.cdf(x * Math.sqrt(1 + 2 / dof), dof+2, ncp) -\n         jStat.noncentralt.cdf(x, dof, ncp));\n  },\n\n  cdf: function cdf(x, dof, ncp) {\n    var tol = 1e-14;\n    var min_iterations = 200;\n\n    if (Math.abs(ncp) < tol)  // ncp approx 0; use student-t\n      return jStat.studentt.cdf(x, dof);\n\n    // turn negative x into positive and flip result afterwards\n    var flip = false;\n    if (x < 0) {\n      flip = true;\n      ncp = -ncp;\n    }\n\n    var prob = jStat.normal.cdf(-ncp, 0, 1);\n    var value = tol + 1;\n    // use value at last two steps to determine convergence\n    var lastvalue = value;\n    var y = x * x / (x * x + dof);\n    var j = 0;\n    var p = Math.exp(-ncp * ncp / 2);\n    var q = Math.exp(-ncp * ncp / 2 - 0.5 * Math.log(2) -\n                     jStat.gammaln(3 / 2)) * ncp;\n    while (j < min_iterations || lastvalue > tol || value > tol) {\n      lastvalue = value;\n      if (j > 0) {\n        p *= (ncp * ncp) / (2 * j);\n        q *= (ncp * ncp) / (2 * (j + 1 / 2));\n      }\n      value = p * jStat.beta.cdf(y, j + 0.5, dof / 2) +\n          q * jStat.beta.cdf(y, j+1, dof/2);\n      prob += 0.5 * value;\n      j++;\n    }\n\n    return flip ? (1 - prob) : prob;\n  }\n});\n\n\n// extend normal function with static methods\njStat.extend(jStat.normal, {\n  pdf: function pdf(x, mean, std) {\n    return Math.exp(-0.5 * Math.log(2 * Math.PI) -\n                    Math.log(std) - Math.pow(x - mean, 2) / (2 * std * std));\n  },\n\n  cdf: function cdf(x, mean, std) {\n    return 0.5 * (1 + jStat.erf((x - mean) / Math.sqrt(2 * std * std)));\n  },\n\n  inv: function(p, mean, std) {\n    return -1.41421356237309505 * std * jStat.erfcinv(2 * p) + mean;\n  },\n\n  mean : function(mean, std) {\n    return mean;\n  },\n\n  median: function median(mean, std) {\n    return mean;\n  },\n\n  mode: function (mean, std) {\n    return mean;\n  },\n\n  sample: function sample(mean, std) {\n    return jStat.randn() * std + mean;\n  },\n\n  variance : function(mean, std) {\n    return std * std;\n  }\n});\n\n\n\n// extend pareto function with static methods\njStat.extend(jStat.pareto, {\n  pdf: function pdf(x, scale, shape) {\n    if (x < scale)\n      return 0;\n    return (shape * Math.pow(scale, shape)) / Math.pow(x, shape + 1);\n  },\n\n  cdf: function cdf(x, scale, shape) {\n    if (x < scale)\n      return 0;\n    return 1 - Math.pow(scale / x, shape);\n  },\n\n  inv: function inv(p, scale, shape) {\n    return scale / Math.pow(1 - p, 1 / shape);\n  },\n\n  mean: function mean(scale, shape) {\n    if (shape <= 1)\n      return undefined;\n    return (shape * Math.pow(scale, shape)) / (shape - 1);\n  },\n\n  median: function median(scale, shape) {\n    return scale * (shape * Math.SQRT2);\n  },\n\n  mode: function mode(scale, shape) {\n    return scale;\n  },\n\n  variance : function(scale, shape) {\n    if (shape <= 2)\n      return undefined;\n    return (scale*scale * shape) / (Math.pow(shape - 1, 2) * (shape - 2));\n  }\n});\n\n\n\n// extend studentt function with static methods\njStat.extend(jStat.studentt, {\n  pdf: function pdf(x, dof) {\n    dof = dof > 1e100 ? 1e100 : dof;\n    return (1/(Math.sqrt(dof) * jStat.betafn(0.5, dof/2))) *\n        Math.pow(1 + ((x * x) / dof), -((dof + 1) / 2));\n  },\n\n  cdf: function cdf(x, dof) {\n    var dof2 = dof / 2;\n    return jStat.ibeta((x + Math.sqrt(x * x + dof)) /\n                       (2 * Math.sqrt(x * x + dof)), dof2, dof2);\n  },\n\n  inv: function(p, dof) {\n    var x = jStat.ibetainv(2 * Math.min(p, 1 - p), 0.5 * dof, 0.5);\n    x = Math.sqrt(dof * (1 - x) / x);\n    return (p > 0.5) ? x : -x;\n  },\n\n  mean: function mean(dof) {\n    return (dof > 1) ? 0 : undefined;\n  },\n\n  median: function median(dof) {\n    return 0;\n  },\n\n  mode: function mode(dof) {\n    return 0;\n  },\n\n  sample: function sample(dof) {\n    return jStat.randn() * Math.sqrt(dof / (2 * jStat.randg(dof / 2)));\n  },\n\n  variance: function variance(dof) {\n    return (dof  > 2) ? dof / (dof - 2) : (dof > 1) ? Infinity : undefined;\n  }\n});\n\n\n\n// extend weibull function with static methods\njStat.extend(jStat.weibull, {\n  pdf: function pdf(x, scale, shape) {\n    if (x < 0 || scale < 0 || shape < 0)\n      return 0;\n    return (shape / scale) * Math.pow((x / scale), (shape - 1)) *\n        Math.exp(-(Math.pow((x / scale), shape)));\n  },\n\n  cdf: function cdf(x, scale, shape) {\n    return x < 0 ? 0 : 1 - Math.exp(-Math.pow((x / scale), shape));\n  },\n\n  inv: function(p, scale, shape) {\n    return scale * Math.pow(-Math.log(1 - p), 1 / shape);\n  },\n\n  mean : function(scale, shape) {\n    return scale * jStat.gammafn(1 + 1 / shape);\n  },\n\n  median: function median(scale, shape) {\n    return scale * Math.pow(Math.log(2), 1 / shape);\n  },\n\n  mode: function mode(scale, shape) {\n    if (shape <= 1)\n      return 0;\n    return scale * Math.pow((shape - 1) / shape, 1 / shape);\n  },\n\n  sample: function sample(scale, shape) {\n    return scale * Math.pow(-Math.log(Math.random()), 1 / shape);\n  },\n\n  variance: function variance(scale, shape) {\n    return scale * scale * jStat.gammafn(1 + 2 / shape) -\n        Math.pow(jStat.weibull.mean(scale, shape), 2);\n  }\n});\n\n\n\n// extend uniform function with static methods\njStat.extend(jStat.uniform, {\n  pdf: function pdf(x, a, b) {\n    return (x < a || x > b) ? 0 : 1 / (b - a);\n  },\n\n  cdf: function cdf(x, a, b) {\n    if (x < a)\n      return 0;\n    else if (x < b)\n      return (x - a) / (b - a);\n    return 1;\n  },\n\n  inv: function(p, a, b) {\n    return a + (p * (b - a));\n  },\n\n  mean: function mean(a, b) {\n    return 0.5 * (a + b);\n  },\n\n  median: function median(a, b) {\n    return jStat.mean(a, b);\n  },\n\n  mode: function mode(a, b) {\n    throw new Error('mode is not yet implemented');\n  },\n\n  sample: function sample(a, b) {\n    return (a / 2 + b / 2) + (b / 2 - a / 2) * (2 * Math.random() - 1);\n  },\n\n  variance: function variance(a, b) {\n    return Math.pow(b - a, 2) / 12;\n  }\n});\n\n\n\n// extend uniform function with static methods\njStat.extend(jStat.binomial, {\n  pdf: function pdf(k, n, p) {\n    return (p === 0 || p === 1) ?\n      ((n * p) === k ? 1 : 0) :\n      jStat.combination(n, k) * Math.pow(p, k) * Math.pow(1 - p, n - k);\n  },\n\n  cdf: function cdf(x, n, p) {\n    var binomarr = [],\n    k = 0;\n    if (x < 0) {\n      return 0;\n    }\n    if (x < n) {\n      for (; k <= x; k++) {\n        binomarr[ k ] = jStat.binomial.pdf(k, n, p);\n      }\n      return jStat.sum(binomarr);\n    }\n    return 1;\n  }\n});\n\n\n\n// extend uniform function with static methods\njStat.extend(jStat.negbin, {\n  pdf: function pdf(k, r, p) {\n    if (k !== k >>> 0)\n      return false;\n    if (k < 0)\n      return 0;\n    return jStat.combination(k + r - 1, r - 1) *\n        Math.pow(1 - p, k) * Math.pow(p, r);\n  },\n\n  cdf: function cdf(x, r, p) {\n    var sum = 0,\n    k = 0;\n    if (x < 0) return 0;\n    for (; k <= x; k++) {\n      sum += jStat.negbin.pdf(k, r, p);\n    }\n    return sum;\n  }\n});\n\n\n\n// extend uniform function with static methods\njStat.extend(jStat.hypgeom, {\n  pdf: function pdf(k, N, m, n) {\n    // Hypergeometric PDF.\n\n    // A simplification of the CDF algorithm below.\n\n    // k = number of successes drawn\n    // N = population size\n    // m = number of successes in population\n    // n = number of items drawn from population\n\n    if(k !== k | 0) {\n      return false;\n    } else if(k < 0 || k < m - (N - n)) {\n      // It's impossible to have this few successes drawn.\n      return 0;\n    } else if(k > n || k > m) {\n      // It's impossible to have this many successes drawn.\n      return 0;\n    } else if (m * 2 > N) {\n      // More than half the population is successes.\n\n      if(n * 2 > N) {\n        // More than half the population is sampled.\n\n        return jStat.hypgeom.pdf(N - m - n + k, N, N - m, N - n)\n      } else {\n        // Half or less of the population is sampled.\n\n        return jStat.hypgeom.pdf(n - k, N, N - m, n);\n      }\n\n    } else if(n * 2 > N) {\n      // Half or less is successes.\n\n      return jStat.hypgeom.pdf(m - k, N, m, N - n);\n\n    } else if(m < n) {\n      // We want to have the number of things sampled to be less than the\n      // successes available. So swap the definitions of successful and sampled.\n      return jStat.hypgeom.pdf(k, N, n, m);\n    } else {\n      // If we get here, half or less of the population was sampled, half or\n      // less of it was successes, and we had fewer sampled things than\n      // successes. Now we can do this complicated iterative algorithm in an\n      // efficient way.\n\n      // The basic premise of the algorithm is that we partially normalize our\n      // intermediate product to keep it in a numerically good region, and then\n      // finish the normalization at the end.\n\n      // This variable holds the scaled probability of the current number of\n      // successes.\n      var scaledPDF = 1;\n\n      // This keeps track of how much we have normalized.\n      var samplesDone = 0;\n\n      for(var i = 0; i < k; i++) {\n        // For every possible number of successes up to that observed...\n\n        while(scaledPDF > 1 && samplesDone < n) {\n          // Intermediate result is growing too big. Apply some of the\n          // normalization to shrink everything.\n\n          scaledPDF *= 1 - (m / (N - samplesDone));\n\n          // Say we've normalized by this sample already.\n          samplesDone++;\n        }\n\n        // Work out the partially-normalized hypergeometric PDF for the next\n        // number of successes\n        scaledPDF *= (n - i) * (m - i) / ((i + 1) * (N - m - n + i + 1));\n      }\n\n      for(; samplesDone < n; samplesDone++) {\n        // Apply all the rest of the normalization\n        scaledPDF *= 1 - (m / (N - samplesDone));\n      }\n\n      // Bound answer sanely before returning.\n      return Math.min(1, Math.max(0, scaledPDF));\n    }\n  },\n\n  cdf: function cdf(x, N, m, n) {\n    // Hypergeometric CDF.\n\n    // This algorithm is due to Prof. Thomas S. Ferguson, <tom@math.ucla.edu>,\n    // and comes from his hypergeometric test calculator at\n    // <http://www.math.ucla.edu/~tom/distributions/Hypergeometric.html>.\n\n    // x = number of successes drawn\n    // N = population size\n    // m = number of successes in population\n    // n = number of items drawn from population\n\n    if(x < 0 || x < m - (N - n)) {\n      // It's impossible to have this few successes drawn or fewer.\n      return 0;\n    } else if(x >= n || x >= m) {\n      // We will always have this many successes or fewer.\n      return 1;\n    } else if (m * 2 > N) {\n      // More than half the population is successes.\n\n      if(n * 2 > N) {\n        // More than half the population is sampled.\n\n        return jStat.hypgeom.cdf(N - m - n + x, N, N - m, N - n)\n      } else {\n        // Half or less of the population is sampled.\n\n        return 1 - jStat.hypgeom.cdf(n - x - 1, N, N - m, n);\n      }\n\n    } else if(n * 2 > N) {\n      // Half or less is successes.\n\n      return 1 - jStat.hypgeom.cdf(m - x - 1, N, m, N - n);\n\n    } else if(m < n) {\n      // We want to have the number of things sampled to be less than the\n      // successes available. So swap the definitions of successful and sampled.\n      return jStat.hypgeom.cdf(x, N, n, m);\n    } else {\n      // If we get here, half or less of the population was sampled, half or\n      // less of it was successes, and we had fewer sampled things than\n      // successes. Now we can do this complicated iterative algorithm in an\n      // efficient way.\n\n      // The basic premise of the algorithm is that we partially normalize our\n      // intermediate sum to keep it in a numerically good region, and then\n      // finish the normalization at the end.\n\n      // Holds the intermediate, scaled total CDF.\n      var scaledCDF = 1;\n\n      // This variable holds the scaled probability of the current number of\n      // successes.\n      var scaledPDF = 1;\n\n      // This keeps track of how much we have normalized.\n      var samplesDone = 0;\n\n      for(var i = 0; i < x; i++) {\n        // For every possible number of successes up to that observed...\n\n        while(scaledCDF > 1 && samplesDone < n) {\n          // Intermediate result is growing too big. Apply some of the\n          // normalization to shrink everything.\n\n          var factor = 1 - (m / (N - samplesDone));\n\n          scaledPDF *= factor;\n          scaledCDF *= factor;\n\n          // Say we've normalized by this sample already.\n          samplesDone++;\n        }\n\n        // Work out the partially-normalized hypergeometric PDF for the next\n        // number of successes\n        scaledPDF *= (n - i) * (m - i) / ((i + 1) * (N - m - n + i + 1));\n\n        // Add to the CDF answer.\n        scaledCDF += scaledPDF;\n      }\n\n      for(; samplesDone < n; samplesDone++) {\n        // Apply all the rest of the normalization\n        scaledCDF *= 1 - (m / (N - samplesDone));\n      }\n\n      // Bound answer sanely before returning.\n      return Math.min(1, Math.max(0, scaledCDF));\n    }\n  }\n});\n\n\n\n// extend uniform function with static methods\njStat.extend(jStat.poisson, {\n  pdf: function pdf(k, l) {\n    if (l < 0 || (k % 1) !== 0 || k < 0) {\n      return 0;\n    }\n\n    return Math.pow(l, k) * Math.exp(-l) / jStat.factorial(k);\n  },\n\n  cdf: function cdf(x, l) {\n    var sumarr = [],\n    k = 0;\n    if (x < 0) return 0;\n    for (; k <= x; k++) {\n      sumarr.push(jStat.poisson.pdf(k, l));\n    }\n    return jStat.sum(sumarr);\n  },\n\n  mean : function(l) {\n    return l;\n  },\n\n  variance : function(l) {\n    return l;\n  },\n\n  sample: function sample(l) {\n    var p = 1, k = 0, L = Math.exp(-l);\n    do {\n      k++;\n      p *= Math.random();\n    } while (p > L);\n    return k - 1;\n  }\n});\n\n// extend triangular function with static methods\njStat.extend(jStat.triangular, {\n  pdf: function pdf(x, a, b, c) {\n    if (b <= a || c < a || c > b) {\n      return NaN;\n    } else {\n      if (x < a || x > b) {\n        return 0;\n      } else if (x < c) {\n          return (2 * (x - a)) / ((b - a) * (c - a));\n      } else if (x === c) {\n          return (2 / (b - a));\n      } else { // x > c\n          return (2 * (b - x)) / ((b - a) * (b - c));\n      }\n    }\n  },\n\n  cdf: function cdf(x, a, b, c) {\n    if (b <= a || c < a || c > b)\n      return NaN;\n    if (x <= a)\n      return 0;\n    else if (x >= b)\n      return 1;\n    if (x <= c)\n      return Math.pow(x - a, 2) / ((b - a) * (c - a));\n    else // x > c\n      return 1 - Math.pow(b - x, 2) / ((b - a) * (b - c));\n  },\n\n  inv: function inv(p, a, b, c) {\n    if (b <= a || c < a || c > b) {\n      return NaN;\n    } else {\n      if (p <= ((c - a) / (b - a))) {\n        return a + (b - a) * Math.sqrt(p * ((c - a) / (b - a)));\n      } else { // p > ((c - a) / (b - a))\n        return a + (b - a) * (1 - Math.sqrt((1 - p) * (1 - ((c - a) / (b - a)))));\n      }\n    }\n  },\n\n  mean: function mean(a, b, c) {\n    return (a + b + c) / 3;\n  },\n\n  median: function median(a, b, c) {\n    if (c <= (a + b) / 2) {\n      return b - Math.sqrt((b - a) * (b - c)) / Math.sqrt(2);\n    } else if (c > (a + b) / 2) {\n      return a + Math.sqrt((b - a) * (c - a)) / Math.sqrt(2);\n    }\n  },\n\n  mode: function mode(a, b, c) {\n    return c;\n  },\n\n  sample: function sample(a, b, c) {\n    var u = Math.random();\n    if (u < ((c - a) / (b - a)))\n      return a + Math.sqrt(u * (b - a) * (c - a))\n    return b - Math.sqrt((1 - u) * (b - a) * (b - c));\n  },\n\n  variance: function variance(a, b, c) {\n    return (a * a + b * b + c * c - a * b - a * c - b * c) / 18;\n  }\n});\n\n\n// extend arcsine function with static methods\njStat.extend(jStat.arcsine, {\n  pdf: function pdf(x, a, b) {\n    if (b <= a) return NaN;\n\n    return (x <= a || x >= b) ? 0 :\n      (2 / Math.PI) *\n        Math.pow(Math.pow(b - a, 2) -\n                  Math.pow(2 * x - a - b, 2), -0.5);\n  },\n\n  cdf: function cdf(x, a, b) {\n    if (x < a)\n      return 0;\n    else if (x < b)\n      return (2 / Math.PI) * Math.asin(Math.sqrt((x - a)/(b - a)));\n    return 1;\n  },\n\n  inv: function(p, a, b) {\n    return a + (0.5 - 0.5 * Math.cos(Math.PI * p)) * (b - a);\n  },\n\n  mean: function mean(a, b) {\n    if (b <= a) return NaN;\n    return (a + b) / 2;\n  },\n\n  median: function median(a, b) {\n    if (b <= a) return NaN;\n    return (a + b) / 2;\n  },\n\n  mode: function mode(a, b) {\n    throw new Error('mode is not yet implemented');\n  },\n\n  sample: function sample(a, b) {\n    return ((a + b) / 2) + ((b - a) / 2) *\n      Math.sin(2 * Math.PI * jStat.uniform.sample(0, 1));\n  },\n\n  variance: function variance(a, b) {\n    if (b <= a) return NaN;\n    return Math.pow(b - a, 2) / 8;\n  }\n});\n\n\nfunction laplaceSign(x) { return x / Math.abs(x); }\n\njStat.extend(jStat.laplace, {\n  pdf: function pdf(x, mu, b) {\n    return (b <= 0) ? 0 : (Math.exp(-Math.abs(x - mu) / b)) / (2 * b);\n  },\n\n  cdf: function cdf(x, mu, b) {\n    if (b <= 0) { return 0; }\n\n    if(x < mu) {\n      return 0.5 * Math.exp((x - mu) / b);\n    } else {\n      return 1 - 0.5 * Math.exp(- (x - mu) / b);\n    }\n  },\n\n  mean: function(mu, b) {\n    return mu;\n  },\n\n  median: function(mu, b) {\n    return mu;\n  },\n\n  mode: function(mu, b) {\n    return mu;\n  },\n\n  variance: function(mu, b) {\n    return 2 * b * b;\n  },\n\n  sample: function sample(mu, b) {\n    var u = Math.random() - 0.5;\n\n    return mu - (b * laplaceSign(u) * Math.log(1 - (2 * Math.abs(u))));\n  }\n});\n\nfunction tukeyWprob(w, rr, cc) {\n  var nleg = 12;\n  var ihalf = 6;\n\n  var C1 = -30;\n  var C2 = -50;\n  var C3 = 60;\n  var bb   = 8;\n  var wlar = 3;\n  var wincr1 = 2;\n  var wincr2 = 3;\n  var xleg = [\n    0.981560634246719250690549090149,\n    0.904117256370474856678465866119,\n    0.769902674194304687036893833213,\n    0.587317954286617447296702418941,\n    0.367831498998180193752691536644,\n    0.125233408511468915472441369464\n  ];\n  var aleg = [\n    0.047175336386511827194615961485,\n    0.106939325995318430960254718194,\n    0.160078328543346226334652529543,\n    0.203167426723065921749064455810,\n    0.233492536538354808760849898925,\n    0.249147045813402785000562436043\n  ];\n\n  var qsqz = w * 0.5;\n\n  // if w >= 16 then the integral lower bound (occurs for c=20)\n  // is 0.99999999999995 so return a value of 1.\n\n  if (qsqz >= bb)\n    return 1.0;\n\n  // find (f(w/2) - 1) ^ cc\n  // (first term in integral of hartley's form).\n\n  var pr_w = 2 * jStat.normal.cdf(qsqz, 0, 1, 1, 0) - 1; // erf(qsqz / M_SQRT2)\n  // if pr_w ^ cc < 2e-22 then set pr_w = 0\n  if (pr_w >= Math.exp(C2 / cc))\n    pr_w = Math.pow(pr_w, cc);\n  else\n    pr_w = 0.0;\n\n  // if w is large then the second component of the\n  // integral is small, so fewer intervals are needed.\n\n  var wincr;\n  if (w > wlar)\n    wincr = wincr1;\n  else\n    wincr = wincr2;\n\n  // find the integral of second term of hartley's form\n  // for the integral of the range for equal-length\n  // intervals using legendre quadrature.  limits of\n  // integration are from (w/2, 8).  two or three\n  // equal-length intervals are used.\n\n  // blb and bub are lower and upper limits of integration.\n\n  var blb = qsqz;\n  var binc = (bb - qsqz) / wincr;\n  var bub = blb + binc;\n  var einsum = 0.0;\n\n  // integrate over each interval\n\n  var cc1 = cc - 1.0;\n  for (var wi = 1; wi <= wincr; wi++) {\n    var elsum = 0.0;\n    var a = 0.5 * (bub + blb);\n\n    // legendre quadrature with order = nleg\n\n    var b = 0.5 * (bub - blb);\n\n    for (var jj = 1; jj <= nleg; jj++) {\n      var j, xx;\n      if (ihalf < jj) {\n        j = (nleg - jj) + 1;\n        xx = xleg[j-1];\n      } else {\n        j = jj;\n        xx = -xleg[j-1];\n      }\n      var c = b * xx;\n      var ac = a + c;\n\n      // if exp(-qexpo/2) < 9e-14,\n      // then doesn't contribute to integral\n\n      var qexpo = ac * ac;\n      if (qexpo > C3)\n        break;\n\n      var pplus = 2 * jStat.normal.cdf(ac, 0, 1, 1, 0);\n      var pminus= 2 * jStat.normal.cdf(ac, w, 1, 1, 0);\n\n      // if rinsum ^ (cc-1) < 9e-14,\n      // then doesn't contribute to integral\n\n      var rinsum = (pplus * 0.5) - (pminus * 0.5);\n      if (rinsum >= Math.exp(C1 / cc1)) {\n        rinsum = (aleg[j-1] * Math.exp(-(0.5 * qexpo))) * Math.pow(rinsum, cc1);\n        elsum += rinsum;\n      }\n    }\n    elsum *= (((2.0 * b) * cc) / Math.sqrt(2 * Math.PI));\n    einsum += elsum;\n    blb = bub;\n    bub += binc;\n  }\n\n  // if pr_w ^ rr < 9e-14, then return 0\n  pr_w += einsum;\n  if (pr_w <= Math.exp(C1 / rr))\n    return 0;\n\n  pr_w = Math.pow(pr_w, rr);\n  if (pr_w >= 1) // 1 was iMax was eps\n    return 1;\n  return pr_w;\n}\n\nfunction tukeyQinv(p, c, v) {\n  var p0 = 0.322232421088;\n  var q0 = 0.993484626060e-01;\n  var p1 = -1.0;\n  var q1 = 0.588581570495;\n  var p2 = -0.342242088547;\n  var q2 = 0.531103462366;\n  var p3 = -0.204231210125;\n  var q3 = 0.103537752850;\n  var p4 = -0.453642210148e-04;\n  var q4 = 0.38560700634e-02;\n  var c1 = 0.8832;\n  var c2 = 0.2368;\n  var c3 = 1.214;\n  var c4 = 1.208;\n  var c5 = 1.4142;\n  var vmax = 120.0;\n\n  var ps = 0.5 - 0.5 * p;\n  var yi = Math.sqrt(Math.log(1.0 / (ps * ps)));\n  var t = yi + (((( yi * p4 + p3) * yi + p2) * yi + p1) * yi + p0)\n     / (((( yi * q4 + q3) * yi + q2) * yi + q1) * yi + q0);\n  if (v < vmax) t += (t * t * t + t) / v / 4.0;\n  var q = c1 - c2 * t;\n  if (v < vmax) q += -c3 / v + c4 * t / v;\n  return t * (q * Math.log(c - 1.0) + c5);\n}\n\njStat.extend(jStat.tukey, {\n  cdf: function cdf(q, nmeans, df) {\n    // Identical implementation as the R ptukey() function as of commit 68947\n    var rr = 1;\n    var cc = nmeans;\n\n    var nlegq = 16;\n    var ihalfq = 8;\n\n    var eps1 = -30.0;\n    var eps2 = 1.0e-14;\n    var dhaf  = 100.0;\n    var dquar = 800.0;\n    var deigh = 5000.0;\n    var dlarg = 25000.0;\n    var ulen1 = 1.0;\n    var ulen2 = 0.5;\n    var ulen3 = 0.25;\n    var ulen4 = 0.125;\n    var xlegq = [\n      0.989400934991649932596154173450,\n      0.944575023073232576077988415535,\n      0.865631202387831743880467897712,\n      0.755404408355003033895101194847,\n      0.617876244402643748446671764049,\n      0.458016777657227386342419442984,\n      0.281603550779258913230460501460,\n      0.950125098376374401853193354250e-1\n    ];\n    var alegq = [\n      0.271524594117540948517805724560e-1,\n      0.622535239386478928628438369944e-1,\n      0.951585116824927848099251076022e-1,\n      0.124628971255533872052476282192,\n      0.149595988816576732081501730547,\n      0.169156519395002538189312079030,\n      0.182603415044923588866763667969,\n      0.189450610455068496285396723208\n    ];\n\n    if (q <= 0)\n      return 0;\n\n    // df must be > 1\n    // there must be at least two values\n\n    if (df < 2 || rr < 1 || cc < 2) return NaN;\n\n    if (!Number.isFinite(q))\n      return 1;\n\n    if (df > dlarg)\n      return tukeyWprob(q, rr, cc);\n\n    // calculate leading constant\n\n    var f2 = df * 0.5;\n    var f2lf = ((f2 * Math.log(df)) - (df * Math.log(2))) - jStat.gammaln(f2);\n    var f21 = f2 - 1.0;\n\n    // integral is divided into unit, half-unit, quarter-unit, or\n    // eighth-unit length intervals depending on the value of the\n    // degrees of freedom.\n\n    var ff4 = df * 0.25;\n    var ulen;\n    if      (df <= dhaf)  ulen = ulen1;\n    else if (df <= dquar) ulen = ulen2;\n    else if (df <= deigh) ulen = ulen3;\n    else                  ulen = ulen4;\n\n    f2lf += Math.log(ulen);\n\n    // integrate over each subinterval\n\n    var ans = 0.0;\n\n    for (var i = 1; i <= 50; i++) {\n      var otsum = 0.0;\n\n      // legendre quadrature with order = nlegq\n      // nodes (stored in xlegq) are symmetric around zero.\n\n      var twa1 = (2 * i - 1) * ulen;\n\n      for (var jj = 1; jj <= nlegq; jj++) {\n        var j, t1;\n        if (ihalfq < jj) {\n          j = jj - ihalfq - 1;\n          t1 = (f2lf + (f21 * Math.log(twa1 + (xlegq[j] * ulen))))\n              - (((xlegq[j] * ulen) + twa1) * ff4);\n        } else {\n          j = jj - 1;\n          t1 = (f2lf + (f21 * Math.log(twa1 - (xlegq[j] * ulen))))\n              + (((xlegq[j] * ulen) - twa1) * ff4);\n        }\n\n        // if exp(t1) < 9e-14, then doesn't contribute to integral\n        var qsqz;\n        if (t1 >= eps1) {\n          if (ihalfq < jj) {\n            qsqz = q * Math.sqrt(((xlegq[j] * ulen) + twa1) * 0.5);\n          } else {\n            qsqz = q * Math.sqrt(((-(xlegq[j] * ulen)) + twa1) * 0.5);\n          }\n\n          // call wprob to find integral of range portion\n\n          var wprb = tukeyWprob(qsqz, rr, cc);\n          var rotsum = (wprb * alegq[j]) * Math.exp(t1);\n          otsum += rotsum;\n        }\n        // end legendre integral for interval i\n        // L200:\n      }\n\n      // if integral for interval i < 1e-14, then stop.\n      // However, in order to avoid small area under left tail,\n      // at least  1 / ulen  intervals are calculated.\n      if (i * ulen >= 1.0 && otsum <= eps2)\n        break;\n\n      // end of interval i\n      // L330:\n\n      ans += otsum;\n    }\n\n    if (otsum > eps2) { // not converged\n      throw new Error('tukey.cdf failed to converge');\n    }\n    if (ans > 1)\n      ans = 1;\n    return ans;\n  },\n\n  inv: function(p, nmeans, df) {\n    // Identical implementation as the R qtukey() function as of commit 68947\n    var rr = 1;\n    var cc = nmeans;\n\n    var eps = 0.0001;\n    var maxiter = 50;\n\n    // df must be > 1 ; there must be at least two values\n    if (df < 2 || rr < 1 || cc < 2) return NaN;\n\n    if (p < 0 || p > 1) return NaN;\n    if (p === 0) return 0;\n    if (p === 1) return Infinity;\n\n    // Initial value\n\n    var x0 = tukeyQinv(p, cc, df);\n\n    // Find prob(value < x0)\n\n    var valx0 = jStat.tukey.cdf(x0, nmeans, df) - p;\n\n    // Find the second iterate and prob(value < x1).\n    // If the first iterate has probability value\n    // exceeding p then second iterate is 1 less than\n    // first iterate; otherwise it is 1 greater.\n\n    var x1;\n    if (valx0 > 0.0)\n      x1 = Math.max(0.0, x0 - 1.0);\n    else\n      x1 = x0 + 1.0;\n    var valx1 = jStat.tukey.cdf(x1, nmeans, df) - p;\n\n    // Find new iterate\n\n    var ans;\n    for(var iter = 1; iter < maxiter; iter++) {\n      ans = x1 - ((valx1 * (x1 - x0)) / (valx1 - valx0));\n      valx0 = valx1;\n\n      // New iterate must be >= 0\n\n      x0 = x1;\n      if (ans < 0.0) {\n        ans = 0.0;\n        valx1 = -p;\n      }\n      // Find prob(value < new iterate)\n\n      valx1 = jStat.tukey.cdf(ans, nmeans, df) - p;\n      x1 = ans;\n\n      // If the difference between two successive\n      // iterates is less than eps, stop\n\n      var xabs = Math.abs(x1 - x0);\n      if (xabs < eps)\n        return ans;\n    }\n\n    throw new Error('tukey.inv failed to converge');\n  }\n});\n\n}(jStat, Math));\n/* Provides functions for the solution of linear system of equations, integration, extrapolation,\n * interpolation, eigenvalue problems, differential equations and PCA analysis. */\n\n(function(jStat, Math) {\n\nvar push = Array.prototype.push;\nvar isArray = jStat.utils.isArray;\n\nfunction isUsable(arg) {\n  return isArray(arg) || arg instanceof jStat;\n}\n\njStat.extend({\n\n  // add a vector/matrix to a vector/matrix or scalar\n  add: function add(arr, arg) {\n    // check if arg is a vector or scalar\n    if (isUsable(arg)) {\n      if (!isUsable(arg[0])) arg = [ arg ];\n      return jStat.map(arr, function(value, row, col) {\n        return value + arg[row][col];\n      });\n    }\n    return jStat.map(arr, function(value) { return value + arg; });\n  },\n\n  // subtract a vector or scalar from the vector\n  subtract: function subtract(arr, arg) {\n    // check if arg is a vector or scalar\n    if (isUsable(arg)) {\n      if (!isUsable(arg[0])) arg = [ arg ];\n      return jStat.map(arr, function(value, row, col) {\n        return value - arg[row][col] || 0;\n      });\n    }\n    return jStat.map(arr, function(value) { return value - arg; });\n  },\n\n  // matrix division\n  divide: function divide(arr, arg) {\n    if (isUsable(arg)) {\n      if (!isUsable(arg[0])) arg = [ arg ];\n      return jStat.multiply(arr, jStat.inv(arg));\n    }\n    return jStat.map(arr, function(value) { return value / arg; });\n  },\n\n  // matrix multiplication\n  multiply: function multiply(arr, arg) {\n    var row, col, nrescols, sum, nrow, ncol, res, rescols;\n    // eg: arr = 2 arg = 3 -> 6 for res[0][0] statement closure\n    if (arr.length === undefined && arg.length === undefined) {\n      return arr * arg;\n    }\n    nrow = arr.length,\n    ncol = arr[0].length,\n    res = jStat.zeros(nrow, nrescols = (isUsable(arg)) ? arg[0].length : ncol),\n    rescols = 0;\n    if (isUsable(arg)) {\n      for (; rescols < nrescols; rescols++) {\n        for (row = 0; row < nrow; row++) {\n          sum = 0;\n          for (col = 0; col < ncol; col++)\n          sum += arr[row][col] * arg[col][rescols];\n          res[row][rescols] = sum;\n        }\n      }\n      return (nrow === 1 && rescols === 1) ? res[0][0] : res;\n    }\n    return jStat.map(arr, function(value) { return value * arg; });\n  },\n\n  // outer([1,2,3],[4,5,6])\n  // ===\n  // [[1],[2],[3]] times [[4,5,6]]\n  // ->\n  // [[4,5,6],[8,10,12],[12,15,18]]\n  outer:function outer(A, B) {\n    return jStat.multiply(A.map(function(t){ return [t] }), [B]);\n  },\n\n\n  // Returns the dot product of two matricies\n  dot: function dot(arr, arg) {\n    if (!isUsable(arr[0])) arr = [ arr ];\n    if (!isUsable(arg[0])) arg = [ arg ];\n    // convert column to row vector\n    var left = (arr[0].length === 1 && arr.length !== 1) ? jStat.transpose(arr) : arr,\n    right = (arg[0].length === 1 && arg.length !== 1) ? jStat.transpose(arg) : arg,\n    res = [],\n    row = 0,\n    nrow = left.length,\n    ncol = left[0].length,\n    sum, col;\n    for (; row < nrow; row++) {\n      res[row] = [];\n      sum = 0;\n      for (col = 0; col < ncol; col++)\n      sum += left[row][col] * right[row][col];\n      res[row] = sum;\n    }\n    return (res.length === 1) ? res[0] : res;\n  },\n\n  // raise every element by a scalar\n  pow: function pow(arr, arg) {\n    return jStat.map(arr, function(value) { return Math.pow(value, arg); });\n  },\n\n  // exponentiate every element\n  exp: function exp(arr) {\n    return jStat.map(arr, function(value) { return Math.exp(value); });\n  },\n\n  // generate the natural log of every element\n  log: function exp(arr) {\n    return jStat.map(arr, function(value) { return Math.log(value); });\n  },\n\n  // generate the absolute values of the vector\n  abs: function abs(arr) {\n    return jStat.map(arr, function(value) { return Math.abs(value); });\n  },\n\n  // computes the p-norm of the vector\n  // In the case that a matrix is passed, uses the first row as the vector\n  norm: function norm(arr, p) {\n    var nnorm = 0,\n    i = 0;\n    // check the p-value of the norm, and set for most common case\n    if (isNaN(p)) p = 2;\n    // check if multi-dimensional array, and make vector correction\n    if (isUsable(arr[0])) arr = arr[0];\n    // vector norm\n    for (; i < arr.length; i++) {\n      nnorm += Math.pow(Math.abs(arr[i]), p);\n    }\n    return Math.pow(nnorm, 1 / p);\n  },\n\n  // computes the angle between two vectors in rads\n  // In case a matrix is passed, this uses the first row as the vector\n  angle: function angle(arr, arg) {\n    return Math.acos(jStat.dot(arr, arg) / (jStat.norm(arr) * jStat.norm(arg)));\n  },\n\n  // augment one matrix by another\n  // Note: this function returns a matrix, not a jStat object\n  aug: function aug(a, b) {\n    var newarr = [];\n    for (var i = 0; i < a.length; i++) {\n      newarr.push(a[i].slice());\n    }\n    for (var i = 0; i < newarr.length; i++) {\n      push.apply(newarr[i], b[i]);\n    }\n    return newarr;\n  },\n\n  // The inv() function calculates the inverse of a matrix\n  // Create the inverse by augmenting the matrix by the identity matrix of the\n  // appropriate size, and then use G-J elimination on the augmented matrix.\n  inv: function inv(a) {\n    var rows = a.length;\n    var cols = a[0].length;\n    var b = jStat.identity(rows, cols);\n    var c = jStat.gauss_jordan(a, b);\n    var result = [];\n    var i = 0;\n    var j;\n\n    //We need to copy the inverse portion to a new matrix to rid G-J artifacts\n    for (; i < rows; i++) {\n      result[i] = [];\n      for (j = cols; j < c[0].length; j++)\n        result[i][j - cols] = c[i][j];\n    }\n    return result;\n  },\n\n  // calculate the determinant of a matrix\n  det: function det(a) {\n    var alen = a.length,\n    alend = alen * 2,\n    vals = new Array(alend),\n    rowshift = alen - 1,\n    colshift = alend - 1,\n    mrow = rowshift - alen + 1,\n    mcol = colshift,\n    i = 0,\n    result = 0,\n    j;\n    // check for special 2x2 case\n    if (alen === 2) {\n      return a[0][0] * a[1][1] - a[0][1] * a[1][0];\n    }\n    for (; i < alend; i++) {\n      vals[i] = 1;\n    }\n    for (var i = 0; i < alen; i++) {\n      for (j = 0; j < alen; j++) {\n        vals[(mrow < 0) ? mrow + alen : mrow ] *= a[i][j];\n        vals[(mcol < alen) ? mcol + alen : mcol ] *= a[i][j];\n        mrow++;\n        mcol--;\n      }\n      mrow = --rowshift - alen + 1;\n      mcol = --colshift;\n    }\n    for (var i = 0; i < alen; i++) {\n      result += vals[i];\n    }\n    for (; i < alend; i++) {\n      result -= vals[i];\n    }\n    return result;\n  },\n\n  gauss_elimination: function gauss_elimination(a, b) {\n    var i = 0,\n    j = 0,\n    n = a.length,\n    m = a[0].length,\n    factor = 1,\n    sum = 0,\n    x = [],\n    maug, pivot, temp, k;\n    a = jStat.aug(a, b);\n    maug = a[0].length;\n    for(var i = 0; i < n; i++) {\n      pivot = a[i][i];\n      j = i;\n      for (k = i + 1; k < m; k++) {\n        if (pivot < Math.abs(a[k][i])) {\n          pivot = a[k][i];\n          j = k;\n        }\n      }\n      if (j != i) {\n        for(k = 0; k < maug; k++) {\n          temp = a[i][k];\n          a[i][k] = a[j][k];\n          a[j][k] = temp;\n        }\n      }\n      for (j = i + 1; j < n; j++) {\n        factor = a[j][i] / a[i][i];\n        for(k = i; k < maug; k++) {\n          a[j][k] = a[j][k] - factor * a[i][k];\n        }\n      }\n    }\n    for (var i = n - 1; i >= 0; i--) {\n      sum = 0;\n      for (j = i + 1; j<= n - 1; j++) {\n        sum = sum + x[j] * a[i][j];\n      }\n      x[i] =(a[i][maug - 1] - sum) / a[i][i];\n    }\n    return x;\n  },\n\n  gauss_jordan: function gauss_jordan(a, b) {\n    var m = jStat.aug(a, b),\n    h = m.length,\n    w = m[0].length;\n    var c = 0;\n    // find max pivot\n    for (var y = 0; y < h; y++) {\n      var maxrow = y;\n      for (var y2 = y+1; y2 < h; y2++) {\n        if (Math.abs(m[y2][y]) > Math.abs(m[maxrow][y]))\n          maxrow = y2;\n      }\n      var tmp = m[y];\n      m[y] = m[maxrow];\n      m[maxrow] = tmp\n      for (var y2 = y+1; y2 < h; y2++) {\n        c = m[y2][y] / m[y][y];\n        for (var x = y; x < w; x++) {\n          m[y2][x] -= m[y][x] * c;\n        }\n      }\n    }\n    // backsubstitute\n    for (var y = h-1; y >= 0; y--) {\n      c = m[y][y];\n      for (var y2 = 0; y2 < y; y2++) {\n        for (var x = w-1; x > y-1; x--) {\n          m[y2][x] -= m[y][x] * m[y2][y] / c;\n        }\n      }\n      m[y][y] /= c;\n      for (var x = h; x < w; x++) {\n        m[y][x] /= c;\n      }\n    }\n    return m;\n  },\n\n  // solve equation\n  // Ax=b\n  // A is upper triangular matrix\n  // A=[[1,2,3],[0,4,5],[0,6,7]]\n  // b=[1,2,3]\n  // triaUpSolve(A,b) // -> [2.666,0.1666,1.666]\n  // if you use matrix style\n  // A=[[1,2,3],[0,4,5],[0,6,7]]\n  // b=[[1],[2],[3]]\n  // will return [[2.666],[0.1666],[1.666]]\n  triaUpSolve: function triaUpSolve(A, b) {\n    var size = A[0].length;\n    var x = jStat.zeros(1, size)[0];\n    var parts;\n    var matrix_mode = false;\n\n    if (b[0].length != undefined) {\n      b = b.map(function(i){ return i[0] });\n      matrix_mode = true;\n    }\n\n    jStat.arange(size - 1, -1, -1).forEach(function(i) {\n      parts = jStat.arange(i + 1, size).map(function(j) {\n        return x[j] * A[i][j];\n      });\n      x[i] = (b[i] - jStat.sum(parts)) / A[i][i];\n    });\n\n    if (matrix_mode)\n      return x.map(function(i){ return [i] });\n    return x;\n  },\n\n  triaLowSolve: function triaLowSolve(A, b) {\n    // like to triaUpSolve but A is lower triangular matrix\n    var size = A[0].length;\n    var x = jStat.zeros(1, size)[0];\n    var parts;\n\n    var matrix_mode=false;\n    if (b[0].length != undefined) {\n      b = b.map(function(i){ return i[0] });\n      matrix_mode = true;\n    }\n\n    jStat.arange(size).forEach(function(i) {\n      parts = jStat.arange(i).map(function(j) {\n        return A[i][j] * x[j];\n      });\n      x[i] = (b[i] - jStat.sum(parts)) / A[i][i];\n    })\n\n    if (matrix_mode)\n      return x.map(function(i){ return [i] });\n    return x;\n  },\n\n\n  // A -> [L,U]\n  // A=LU\n  // L is lower triangular matrix\n  // U is upper triangular matrix\n  lu: function lu(A) {\n    var size = A.length;\n    //var L=jStat.diagonal(jStat.ones(1,size)[0]);\n    var L = jStat.identity(size);\n    var R = jStat.zeros(A.length, A[0].length);\n    var parts;\n    jStat.arange(size).forEach(function(t) {\n      R[0][t] = A[0][t];\n    });\n    jStat.arange(1, size).forEach(function(l) {\n      jStat.arange(l).forEach(function(i) {\n        parts = jStat.arange(i).map(function(jj) {\n          return L[l][jj] * R[jj][i];\n        });\n        L[l][i] = (A[l][i] - jStat.sum(parts)) / R[i][i];\n      });\n      jStat.arange(l, size).forEach(function(j) {\n        parts = jStat.arange(l).map(function(jj) {\n          return L[l][jj] * R[jj][j];\n        });\n        R[l][j] = A[i][j] - jStat.sum(parts);\n      });\n    });\n    return [L, R];\n  },\n\n  // A -> T\n  // A=TT'\n  // T is lower triangular matrix\n  cholesky: function cholesky(A) {\n    var size = A.length;\n    var T = jStat.zeros(A.length, A[0].length);\n    var parts;\n    jStat.arange(size).forEach(function(i) {\n      parts = jStat.arange(i).map(function(t) {\n        return Math.pow(T[i][t],2);\n      });\n      T[i][i] = Math.sqrt(A[i][i] - jStat.sum(parts));\n      jStat.arange(i + 1, size).forEach(function(j) {\n        parts = jStat.arange(i).map(function(t) {\n          return T[i][t] * T[j][t];\n        });\n        T[j][i] = (A[i][j] - jStat.sum(parts)) / T[i][i];\n      });\n    });\n    return T;\n  },\n\n\n  gauss_jacobi: function gauss_jacobi(a, b, x, r) {\n    var i = 0;\n    var j = 0;\n    var n = a.length;\n    var l = [];\n    var u = [];\n    var d = [];\n    var xv, c, h, xk;\n    for (; i < n; i++) {\n      l[i] = [];\n      u[i] = [];\n      d[i] = [];\n      for (j = 0; j < n; j++) {\n        if (i > j) {\n          l[i][j] = a[i][j];\n          u[i][j] = d[i][j] = 0;\n        } else if (i < j) {\n          u[i][j] = a[i][j];\n          l[i][j] = d[i][j] = 0;\n        } else {\n          d[i][j] = a[i][j];\n          l[i][j] = u[i][j] = 0;\n        }\n      }\n    }\n    h = jStat.multiply(jStat.multiply(jStat.inv(d), jStat.add(l, u)), -1);\n    c = jStat.multiply(jStat.inv(d), b);\n    xv = x;\n    xk = jStat.add(jStat.multiply(h, x), c);\n    i = 2;\n    while (Math.abs(jStat.norm(jStat.subtract(xk,xv))) > r) {\n      xv = xk;\n      xk = jStat.add(jStat.multiply(h, xv), c);\n      i++;\n    }\n    return xk;\n  },\n\n  gauss_seidel: function gauss_seidel(a, b, x, r) {\n    var i = 0;\n    var n = a.length;\n    var l = [];\n    var u = [];\n    var d = [];\n    var j, xv, c, h, xk;\n    for (; i < n; i++) {\n      l[i] = [];\n      u[i] = [];\n      d[i] = [];\n      for (j = 0; j < n; j++) {\n        if (i > j) {\n          l[i][j] = a[i][j];\n          u[i][j] = d[i][j] = 0;\n        } else if (i < j) {\n          u[i][j] = a[i][j];\n          l[i][j] = d[i][j] = 0;\n        } else {\n          d[i][j] = a[i][j];\n          l[i][j] = u[i][j] = 0;\n        }\n      }\n    }\n    h = jStat.multiply(jStat.multiply(jStat.inv(jStat.add(d, l)), u), -1);\n    c = jStat.multiply(jStat.inv(jStat.add(d, l)), b);\n    xv = x;\n    xk = jStat.add(jStat.multiply(h, x), c);\n    i = 2;\n    while (Math.abs(jStat.norm(jStat.subtract(xk, xv))) > r) {\n      xv = xk;\n      xk = jStat.add(jStat.multiply(h, xv), c);\n      i = i + 1;\n    }\n    return xk;\n  },\n\n  SOR: function SOR(a, b, x, r, w) {\n    var i = 0;\n    var n = a.length;\n    var l = [];\n    var u = [];\n    var d = [];\n    var j, xv, c, h, xk;\n    for (; i < n; i++) {\n      l[i] = [];\n      u[i] = [];\n      d[i] = [];\n      for (j = 0; j < n; j++) {\n        if (i > j) {\n          l[i][j] = a[i][j];\n          u[i][j] = d[i][j] = 0;\n        } else if (i < j) {\n          u[i][j] = a[i][j];\n          l[i][j] = d[i][j] = 0;\n        } else {\n          d[i][j] = a[i][j];\n          l[i][j] = u[i][j] = 0;\n        }\n      }\n    }\n    h = jStat.multiply(jStat.inv(jStat.add(d, jStat.multiply(l, w))),\n                       jStat.subtract(jStat.multiply(d, 1 - w),\n                                      jStat.multiply(u, w)));\n    c = jStat.multiply(jStat.multiply(jStat.inv(jStat.add(d,\n        jStat.multiply(l, w))), b), w);\n    xv = x;\n    xk = jStat.add(jStat.multiply(h, x), c);\n    i = 2;\n    while (Math.abs(jStat.norm(jStat.subtract(xk, xv))) > r) {\n      xv = xk;\n      xk = jStat.add(jStat.multiply(h, xv), c);\n      i++;\n    }\n    return xk;\n  },\n\n  householder: function householder(a) {\n    var m = a.length;\n    var n = a[0].length;\n    var i = 0;\n    var w = [];\n    var p = [];\n    var alpha, r, k, j, factor;\n    for (; i < m - 1; i++) {\n      alpha = 0;\n      for (j = i + 1; j < n; j++)\n      alpha += (a[j][i] * a[j][i]);\n      factor = (a[i + 1][i] > 0) ? -1 : 1;\n      alpha = factor * Math.sqrt(alpha);\n      r = Math.sqrt((((alpha * alpha) - a[i + 1][i] * alpha) / 2));\n      w = jStat.zeros(m, 1);\n      w[i + 1][0] = (a[i + 1][i] - alpha) / (2 * r);\n      for (k = i + 2; k < m; k++) w[k][0] = a[k][i] / (2 * r);\n      p = jStat.subtract(jStat.identity(m, n),\n          jStat.multiply(jStat.multiply(w, jStat.transpose(w)), 2));\n      a = jStat.multiply(p, jStat.multiply(a, p));\n    }\n    return a;\n  },\n\n  // A -> [Q,R]\n  // Q is orthogonal matrix\n  // R is upper triangular\n  QR: (function() {\n    // x -> Q\n    // find a orthogonal matrix Q st.\n    // Qx=y\n    // y is [||x||,0,0,...]\n\n    // quick ref\n    var sum   = jStat.sum;\n    var range = jStat.arange;\n\n    function get_Q1(x) {\n      var size = x.length;\n      var norm_x = jStat.norm(x, 2);\n      var e1 = jStat.zeros(1, size)[0];\n      e1[0] = 1;\n      var u = jStat.add(jStat.multiply(jStat.multiply(e1, norm_x), -1), x);\n      var norm_u = jStat.norm(u, 2);\n      var v = jStat.divide(u, norm_u);\n      var Q = jStat.subtract(jStat.identity(size),\n                             jStat.multiply(jStat.outer(v, v), 2));\n      return Q;\n    }\n\n    function qr(A) {\n      var size = A[0].length;\n      var QList = [];\n      jStat.arange(size).forEach(function(i) {\n        var x = jStat.slice(A, { row: { start: i }, col: i });\n        var Q = get_Q1(x);\n        var Qn = jStat.identity(A.length);\n        Qn = jStat.sliceAssign(Qn, { row: { start: i }, col: { start: i }}, Q);\n        A = jStat.multiply(Qn, A);\n        QList.push(Qn);\n      });\n      var Q = QList.reduce(function(x, y){ return jStat.multiply(x,y) });\n      var R = A;\n      return [Q, R];\n    }\n\n    function qr2(x) {\n      // quick impletation\n      // https://www.stat.wisc.edu/~larget/math496/qr.html\n\n      var n = x.length;\n      var p = x[0].length;\n\n      x = jStat.copy(x);\n      r = jStat.zeros(p, p);\n\n      var i,j,k;\n      for(j = 0; j < p; j++){\n        r[j][j] = Math.sqrt(sum(range(n).map(function(i){\n          return x[i][j] * x[i][j];\n        })));\n        for(i = 0; i < n; i++){\n          x[i][j] = x[i][j] / r[j][j];\n        }\n        for(k = j+1; k < p; k++){\n          r[j][k] = sum(range(n).map(function(i){\n            return x[i][j] * x[i][k];\n          }));\n          for(i = 0; i < n; i++){\n            x[i][k] = x[i][k] - x[i][j]*r[j][k];\n          }\n        }\n      }\n      return [x, r];\n    }\n\n    return qr2;\n  }()),\n\n  lstsq: (function(A, b) {\n    // solve least squard problem for Ax=b as QR decomposition way if b is\n    // [[b1],[b2],[b3]] form will return [[x1],[x2],[x3]] array form solution\n    // else b is [b1,b2,b3] form will return [x1,x2,x3] array form solution\n    function R_I(A) {\n      A = jStat.copy(A);\n      var size = A.length;\n      var I = jStat.identity(size);\n      jStat.arange(size - 1, -1, -1).forEach(function(i) {\n        jStat.sliceAssign(\n            I, { row: i }, jStat.divide(jStat.slice(I, { row: i }), A[i][i]));\n        jStat.sliceAssign(\n            A, { row: i }, jStat.divide(jStat.slice(A, { row: i }), A[i][i]));\n        jStat.arange(i).forEach(function(j) {\n          var c = jStat.multiply(A[j][i], -1);\n          var Aj = jStat.slice(A, { row: j });\n          var cAi = jStat.multiply(jStat.slice(A, { row: i }), c);\n          jStat.sliceAssign(A, { row: j }, jStat.add(Aj, cAi));\n          var Ij = jStat.slice(I, { row: j });\n          var cIi = jStat.multiply(jStat.slice(I, { row: i }), c);\n          jStat.sliceAssign(I, { row: j }, jStat.add(Ij, cIi));\n        })\n      });\n      return I;\n    }\n\n    function qr_solve(A, b){\n      var array_mode = false;\n      if (b[0].length === undefined) {\n        // [c1,c2,c3] mode\n        b = b.map(function(x){ return [x] });\n        array_mode = true;\n      }\n      var QR = jStat.QR(A);\n      var Q = QR[0];\n      var R = QR[1];\n      var attrs = A[0].length;\n      var Q1 = jStat.slice(Q,{col:{end:attrs}});\n      var R1 = jStat.slice(R,{row:{end:attrs}});\n      var RI = R_I(R1);\n\t  var Q2 = jStat.transpose(Q1);\n\n\t  if(Q2[0].length === undefined){\n\t\t  Q2 = [Q2]; // The confusing jStat.multifly implementation threat nature process again.\n\t  }\n\n      var x = jStat.multiply(jStat.multiply(RI, Q2), b);\n\n\t  if(x.length === undefined){\n\t\t  x = [[x]]; // The confusing jStat.multifly implementation threat nature process again.\n\t  }\n\n\n      if (array_mode)\n        return x.map(function(i){ return i[0] });\n      return x;\n    }\n\n    return qr_solve;\n  }()),\n\n  jacobi: function jacobi(a) {\n    var condition = 1;\n    var count = 0;\n    var n = a.length;\n    var e = jStat.identity(n, n);\n    var ev = [];\n    var b, i, j, p, q, maxim, theta, s;\n    // condition === 1 only if tolerance is not reached\n    while (condition === 1) {\n      count++;\n      maxim = a[0][1];\n      p = 0;\n      q = 1;\n      for (var i = 0; i < n; i++) {\n        for (j = 0; j < n; j++) {\n          if (i != j) {\n            if (maxim < Math.abs(a[i][j])) {\n              maxim = Math.abs(a[i][j]);\n              p = i;\n              q = j;\n            }\n          }\n        }\n      }\n      if (a[p][p] === a[q][q])\n        theta = (a[p][q] > 0) ? Math.PI / 4 : -Math.PI / 4;\n      else\n        theta = Math.atan(2 * a[p][q] / (a[p][p] - a[q][q])) / 2;\n      s = jStat.identity(n, n);\n      s[p][p] = Math.cos(theta);\n      s[p][q] = -Math.sin(theta);\n      s[q][p] = Math.sin(theta);\n      s[q][q] = Math.cos(theta);\n      // eigen vector matrix\n      e = jStat.multiply(e, s);\n      b = jStat.multiply(jStat.multiply(jStat.inv(s), a), s);\n      a = b;\n      condition = 0;\n      for (var i = 1; i < n; i++) {\n        for (j = 1; j < n; j++) {\n          if (i != j && Math.abs(a[i][j]) > 0.001) {\n            condition = 1;\n          }\n        }\n      }\n    }\n    for (var i = 0; i < n; i++) ev.push(a[i][i]);\n    //returns both the eigenvalue and eigenmatrix\n    return [e, ev];\n  },\n\n  rungekutta: function rungekutta(f, h, p, t_j, u_j, order) {\n    var k1, k2, u_j1, k3, k4;\n    if (order === 2) {\n      while (t_j <= p) {\n        k1 = h * f(t_j, u_j);\n        k2 = h * f(t_j + h, u_j + k1);\n        u_j1 = u_j + (k1 + k2) / 2;\n        u_j = u_j1;\n        t_j = t_j + h;\n      }\n    }\n    if (order === 4) {\n      while (t_j <= p) {\n        k1 = h * f(t_j, u_j);\n        k2 = h * f(t_j + h / 2, u_j + k1 / 2);\n        k3 = h * f(t_j + h / 2, u_j + k2 / 2);\n        k4 = h * f(t_j +h, u_j + k3);\n        u_j1 = u_j + (k1 + 2 * k2 + 2 * k3 + k4) / 6;\n        u_j = u_j1;\n        t_j = t_j + h;\n      }\n    }\n    return u_j;\n  },\n\n  romberg: function romberg(f, a, b, order) {\n    var i = 0;\n    var h = (b - a) / 2;\n    var x = [];\n    var h1 = [];\n    var g = [];\n    var m, a1, j, k, I, d;\n    while (i < order / 2) {\n      I = f(a);\n      for (j = a, k = 0; j <= b; j = j + h, k++) x[k] = j;\n      m = x.length;\n      for (j = 1; j < m - 1; j++) {\n        I += (((j % 2) !== 0) ? 4 : 2) * f(x[j]);\n      }\n      I = (h / 3) * (I + f(b));\n      g[i] = I;\n      h /= 2;\n      i++;\n    }\n    a1 = g.length;\n    m = 1;\n    while (a1 !== 1) {\n      for (j = 0; j < a1 - 1; j++)\n      h1[j] = ((Math.pow(4, m)) * g[j + 1] - g[j]) / (Math.pow(4, m) - 1);\n      a1 = h1.length;\n      g = h1;\n      h1 = [];\n      m++;\n    }\n    return g;\n  },\n\n  richardson: function richardson(X, f, x, h) {\n    function pos(X, x) {\n      var i = 0;\n      var n = X.length;\n      var p;\n      for (; i < n; i++)\n        if (X[i] === x) p = i;\n      return p;\n    }\n    var n = X.length,\n    h_min = Math.abs(x - X[pos(X, x) + 1]),\n    i = 0,\n    g = [],\n    h1 = [],\n    y1, y2, m, a, j;\n    while (h >= h_min) {\n      y1 = pos(X, x + h);\n      y2 = pos(X, x);\n      g[i] = (f[y1] - 2 * f[y2] + f[2 * y2 - y1]) / (h * h);\n      h /= 2;\n      i++;\n    }\n    a = g.length;\n    m = 1;\n    while (a != 1) {\n      for (j = 0; j < a - 1; j++)\n      h1[j] = ((Math.pow(4, m)) * g[j + 1] - g[j]) / (Math.pow(4, m) - 1);\n      a = h1.length;\n      g = h1;\n      h1 = [];\n      m++;\n    }\n    return g;\n  },\n\n  simpson: function simpson(f, a, b, n) {\n    var h = (b - a) / n;\n    var I = f(a);\n    var x = [];\n    var j = a;\n    var k = 0;\n    var i = 1;\n    var m;\n    for (; j <= b; j = j + h, k++)\n      x[k] = j;\n    m = x.length;\n    for (; i < m - 1; i++) {\n      I += ((i % 2 !== 0) ? 4 : 2) * f(x[i]);\n    }\n    return (h / 3) * (I + f(b));\n  },\n\n  hermite: function hermite(X, F, dF, value) {\n    var n = X.length;\n    var p = 0;\n    var i = 0;\n    var l = [];\n    var dl = [];\n    var A = [];\n    var B = [];\n    var j;\n    for (; i < n; i++) {\n      l[i] = 1;\n      for (j = 0; j < n; j++) {\n        if (i != j) l[i] *= (value - X[j]) / (X[i] - X[j]);\n      }\n      dl[i] = 0;\n      for (j = 0; j < n; j++) {\n        if (i != j) dl[i] += 1 / (X [i] - X[j]);\n      }\n      A[i] = (1 - 2 * (value - X[i]) * dl[i]) * (l[i] * l[i]);\n      B[i] = (value - X[i]) * (l[i] * l[i]);\n      p += (A[i] * F[i] + B[i] * dF[i]);\n    }\n    return p;\n  },\n\n  lagrange: function lagrange(X, F, value) {\n    var p = 0;\n    var i = 0;\n    var j, l;\n    var n = X.length;\n    for (; i < n; i++) {\n      l = F[i];\n      for (j = 0; j < n; j++) {\n        // calculating the lagrange polynomial L_i\n        if (i != j) l *= (value - X[j]) / (X[i] - X[j]);\n      }\n      // adding the lagrange polynomials found above\n      p += l;\n    }\n    return p;\n  },\n\n  cubic_spline: function cubic_spline(X, F, value) {\n    var n = X.length;\n    var i = 0, j;\n    var A = [];\n    var B = [];\n    var alpha = [];\n    var c = [];\n    var h = [];\n    var b = [];\n    var d = [];\n    for (; i < n - 1; i++)\n      h[i] = X[i + 1] - X[i];\n    alpha[0] = 0;\n    for (var i = 1; i < n - 1; i++) {\n      alpha[i] = (3 / h[i]) * (F[i + 1] - F[i]) -\n          (3 / h[i-1]) * (F[i] - F[i-1]);\n    }\n    for (var i = 1; i < n - 1; i++) {\n      A[i] = [];\n      B[i] = [];\n      A[i][i-1] = h[i-1];\n      A[i][i] = 2 * (h[i - 1] + h[i]);\n      A[i][i+1] = h[i];\n      B[i][0] = alpha[i];\n    }\n    c = jStat.multiply(jStat.inv(A), B);\n    for (j = 0; j < n - 1; j++) {\n      b[j] = (F[j + 1] - F[j]) / h[j] - h[j] * (c[j + 1][0] + 2 * c[j][0]) / 3;\n      d[j] = (c[j + 1][0] - c[j][0]) / (3 * h[j]);\n    }\n    for (j = 0; j < n; j++) {\n      if (X[j] > value) break;\n    }\n    j -= 1;\n    return F[j] + (value - X[j]) * b[j] + jStat.sq(value-X[j]) *\n        c[j] + (value - X[j]) * jStat.sq(value - X[j]) * d[j];\n  },\n\n  gauss_quadrature: function gauss_quadrature() {\n    throw new Error('gauss_quadrature not yet implemented');\n  },\n\n  PCA: function PCA(X) {\n    var m = X.length;\n    var n = X[0].length;\n    var flag = false;\n    var i = 0;\n    var j, temp1;\n    var u = [];\n    var D = [];\n    var result = [];\n    var temp2 = [];\n    var Y = [];\n    var Bt = [];\n    var B = [];\n    var C = [];\n    var V = [];\n    var Vt = [];\n    for (var i = 0; i < m; i++) {\n      u[i] = jStat.sum(X[i]) / n;\n    }\n    for (var i = 0; i < n; i++) {\n      B[i] = [];\n      for(j = 0; j < m; j++) {\n        B[i][j] = X[j][i] - u[j];\n      }\n    }\n    B = jStat.transpose(B);\n    for (var i = 0; i < m; i++) {\n      C[i] = [];\n      for (j = 0; j < m; j++) {\n        C[i][j] = (jStat.dot([B[i]], [B[j]])) / (n - 1);\n      }\n    }\n    result = jStat.jacobi(C);\n    V = result[0];\n    D = result[1];\n    Vt = jStat.transpose(V);\n    for (var i = 0; i < D.length; i++) {\n      for (j = i; j < D.length; j++) {\n        if(D[i] < D[j])  {\n          temp1 = D[i];\n          D[i] = D[j];\n          D[j] = temp1;\n          temp2 = Vt[i];\n          Vt[i] = Vt[j];\n          Vt[j] = temp2;\n        }\n      }\n    }\n    Bt = jStat.transpose(B);\n    for (var i = 0; i < m; i++) {\n      Y[i] = [];\n      for (j = 0; j < Bt.length; j++) {\n        Y[i][j] = jStat.dot([Vt[i]], [Bt[j]]);\n      }\n    }\n    return [X, D, Vt, Y];\n  }\n});\n\n// extend jStat.fn with methods that require one argument\n(function(funcs) {\n  for (var i = 0; i < funcs.length; i++) (function(passfunc) {\n    jStat.fn[passfunc] = function(arg, func) {\n      var tmpthis = this;\n      // check for callback\n      if (func) {\n        setTimeout(function() {\n          func.call(tmpthis, jStat.fn[passfunc].call(tmpthis, arg));\n        }, 15);\n        return this;\n      }\n      if (typeof jStat[passfunc](this, arg) === 'number')\n        return jStat[passfunc](this, arg);\n      else\n        return jStat(jStat[passfunc](this, arg));\n    };\n  }(funcs[i]));\n}('add divide multiply subtract dot pow exp log abs norm angle'.split(' ')));\n\n}(jStat, Math));\n(function(jStat, Math) {\n\nvar slice = [].slice;\nvar isNumber = jStat.utils.isNumber;\nvar isArray = jStat.utils.isArray;\n\n// flag==true denotes use of sample standard deviation\n// Z Statistics\njStat.extend({\n  // 2 different parameter lists:\n  // (value, mean, sd)\n  // (value, array, flag)\n  zscore: function zscore() {\n    var args = slice.call(arguments);\n    if (isNumber(args[1])) {\n      return (args[0] - args[1]) / args[2];\n    }\n    return (args[0] - jStat.mean(args[1])) / jStat.stdev(args[1], args[2]);\n  },\n\n  // 3 different paramter lists:\n  // (value, mean, sd, sides)\n  // (zscore, sides)\n  // (value, array, sides, flag)\n  ztest: function ztest() {\n    var args = slice.call(arguments);\n    var z;\n    if (isArray(args[1])) {\n      // (value, array, sides, flag)\n      z = jStat.zscore(args[0],args[1],args[3]);\n      return (args[2] === 1) ?\n        (jStat.normal.cdf(-Math.abs(z), 0, 1)) :\n        (jStat.normal.cdf(-Math.abs(z), 0, 1)*2);\n    } else {\n      if (args.length > 2) {\n        // (value, mean, sd, sides)\n        z = jStat.zscore(args[0],args[1],args[2]);\n        return (args[3] === 1) ?\n          (jStat.normal.cdf(-Math.abs(z),0,1)) :\n          (jStat.normal.cdf(-Math.abs(z),0,1)* 2);\n      } else {\n        // (zscore, sides)\n        z = args[0];\n        return (args[1] === 1) ?\n          (jStat.normal.cdf(-Math.abs(z),0,1)) :\n          (jStat.normal.cdf(-Math.abs(z),0,1)*2);\n      }\n    }\n  }\n});\n\njStat.extend(jStat.fn, {\n  zscore: function zscore(value, flag) {\n    return (value - this.mean()) / this.stdev(flag);\n  },\n\n  ztest: function ztest(value, sides, flag) {\n    var zscore = Math.abs(this.zscore(value, flag));\n    return (sides === 1) ?\n      (jStat.normal.cdf(-zscore, 0, 1)) :\n      (jStat.normal.cdf(-zscore, 0, 1) * 2);\n  }\n});\n\n// T Statistics\njStat.extend({\n  // 2 parameter lists\n  // (value, mean, sd, n)\n  // (value, array)\n  tscore: function tscore() {\n    var args = slice.call(arguments);\n    return (args.length === 4) ?\n      ((args[0] - args[1]) / (args[2] / Math.sqrt(args[3]))) :\n      ((args[0] - jStat.mean(args[1])) /\n       (jStat.stdev(args[1], true) / Math.sqrt(args[1].length)));\n  },\n\n  // 3 different paramter lists:\n  // (value, mean, sd, n, sides)\n  // (tscore, n, sides)\n  // (value, array, sides)\n  ttest: function ttest() {\n    var args = slice.call(arguments);\n    var tscore;\n    if (args.length === 5) {\n      tscore = Math.abs(jStat.tscore(args[0], args[1], args[2], args[3]));\n      return (args[4] === 1) ?\n        (jStat.studentt.cdf(-tscore, args[3]-1)) :\n        (jStat.studentt.cdf(-tscore, args[3]-1)*2);\n    }\n    if (isNumber(args[1])) {\n      tscore = Math.abs(args[0])\n      return (args[2] == 1) ?\n        (jStat.studentt.cdf(-tscore, args[1]-1)) :\n        (jStat.studentt.cdf(-tscore, args[1]-1) * 2);\n    }\n    tscore = Math.abs(jStat.tscore(args[0], args[1]))\n    return (args[2] == 1) ?\n      (jStat.studentt.cdf(-tscore, args[1].length-1)) :\n      (jStat.studentt.cdf(-tscore, args[1].length-1) * 2);\n  }\n});\n\njStat.extend(jStat.fn, {\n  tscore: function tscore(value) {\n    return (value - this.mean()) / (this.stdev(true) / Math.sqrt(this.cols()));\n  },\n\n  ttest: function ttest(value, sides) {\n    return (sides === 1) ?\n      (1 - jStat.studentt.cdf(Math.abs(this.tscore(value)), this.cols()-1)) :\n      (jStat.studentt.cdf(-Math.abs(this.tscore(value)), this.cols()-1)*2);\n  }\n});\n\n// F Statistics\njStat.extend({\n  // Paramter list is as follows:\n  // (array1, array2, array3, ...)\n  // or it is an array of arrays\n  // array of arrays conversion\n  anovafscore: function anovafscore() {\n    var args = slice.call(arguments),\n    expVar, sample, sampMean, sampSampMean, tmpargs, unexpVar, i, j;\n    if (args.length === 1) {\n      tmpargs = new Array(args[0].length);\n      for (var i = 0; i < args[0].length; i++) {\n        tmpargs[i] = args[0][i];\n      }\n      args = tmpargs;\n    }\n    // 2 sample case\n    if (args.length === 2) {\n      return jStat.variance(args[0]) / jStat.variance(args[1]);\n    }\n    // Builds sample array\n    sample = new Array();\n    for (var i = 0; i < args.length; i++) {\n      sample = sample.concat(args[i]);\n    }\n    sampMean = jStat.mean(sample);\n    // Computes the explained variance\n    expVar = 0;\n    for (var i = 0; i < args.length; i++) {\n      expVar = expVar + args[i].length * Math.pow(jStat.mean(args[i]) - sampMean, 2);\n    }\n    expVar /= (args.length - 1);\n    // Computes unexplained variance\n    unexpVar = 0;\n    for (var i = 0; i < args.length; i++) {\n      sampSampMean = jStat.mean(args[i]);\n      for (j = 0; j < args[i].length; j++) {\n        unexpVar += Math.pow(args[i][j] - sampSampMean, 2);\n      }\n    }\n    unexpVar /= (sample.length - args.length);\n    return expVar / unexpVar;\n  },\n\n  // 2 different paramter setups\n  // (array1, array2, array3, ...)\n  // (anovafscore, df1, df2)\n  anovaftest: function anovaftest() {\n    var args = slice.call(arguments),\n    df1, df2, n, i;\n    if (isNumber(args[0])) {\n      return 1 - jStat.centralF.cdf(args[0], args[1], args[2]);\n    }\n    anovafscore = jStat.anovafscore(args);\n    df1 = args.length - 1;\n    n = 0;\n    for (var i = 0; i < args.length; i++) {\n      n = n + args[i].length;\n    }\n    df2 = n - df1 - 1;\n    return 1 - jStat.centralF.cdf(anovafscore, df1, df2);\n  },\n\n  ftest: function ftest(fscore, df1, df2) {\n    return 1 - jStat.centralF.cdf(fscore, df1, df2);\n  }\n});\n\njStat.extend(jStat.fn, {\n  anovafscore: function anovafscore() {\n    return jStat.anovafscore(this.toArray());\n  },\n\n  anovaftes: function anovaftes() {\n    var n = 0;\n    var i;\n    for (var i = 0; i < this.length; i++) {\n      n = n + this[i].length;\n    }\n    return jStat.ftest(this.anovafscore(), this.length - 1, n - this.length);\n  }\n});\n\n// Tukey's range test\njStat.extend({\n  // 2 parameter lists\n  // (mean1, mean2, n1, n2, sd)\n  // (array1, array2, sd)\n  qscore: function qscore() {\n    var args = slice.call(arguments);\n    var mean1, mean2, n1, n2, sd;\n    if (isNumber(args[0])) {\n        mean1 = args[0];\n        mean2 = args[1];\n        n1 = args[2];\n        n2 = args[3];\n        sd = args[4];\n    } else {\n        mean1 = jStat.mean(args[0]);\n        mean2 = jStat.mean(args[1]);\n        n1 = args[0].length;\n        n2 = args[1].length;\n        sd = args[2];\n    }\n    return Math.abs(mean1 - mean2) / (sd * Math.sqrt((1 / n1 + 1 / n2) / 2));\n  },\n\n  // 3 different parameter lists:\n  // (qscore, n, k)\n  // (mean1, mean2, n1, n2, sd, n, k)\n  // (array1, array2, sd, n, k)\n  qtest: function qtest() {\n    var args = slice.call(arguments);\n\n    var qscore;\n    if (args.length === 3) {\n      qscore = args[0];\n      args = args.slice(1);\n    } else if (args.length === 7) {\n      qscore = jStat.qscore(args[0], args[1], args[2], args[3], args[4]);\n      args = args.slice(5);\n    } else {\n      qscore = jStat.qscore(args[0], args[1], args[2]);\n      args = args.slice(3);\n    }\n\n    var n = args[0];\n    var k = args[1];\n\n    return 1 - jStat.tukey.cdf(qscore, k, n - k);\n  },\n\n  tukeyhsd: function tukeyhsd(arrays) {\n    var sd = jStat.pooledstdev(arrays);\n    var means = arrays.map(function (arr) {return jStat.mean(arr);});\n    var n = arrays.reduce(function (n, arr) {return n + arr.length;}, 0);\n\n    var results = [];\n    for (var i = 0; i < arrays.length; ++i) {\n        for (var j = i + 1; j < arrays.length; ++j) {\n            var p = jStat.qtest(means[i], means[j], arrays[i].length, arrays[j].length, sd, n, arrays.length);\n            results.push([[i, j], p]);\n        }\n    }\n\n    return results;\n  }\n});\n\n// Error Bounds\njStat.extend({\n  // 2 different parameter setups\n  // (value, alpha, sd, n)\n  // (value, alpha, array)\n  normalci: function normalci() {\n    var args = slice.call(arguments),\n    ans = new Array(2),\n    change;\n    if (args.length === 4) {\n      change = Math.abs(jStat.normal.inv(args[1] / 2, 0, 1) *\n                        args[2] / Math.sqrt(args[3]));\n    } else {\n      change = Math.abs(jStat.normal.inv(args[1] / 2, 0, 1) *\n                        jStat.stdev(args[2]) / Math.sqrt(args[2].length));\n    }\n    ans[0] = args[0] - change;\n    ans[1] = args[0] + change;\n    return ans;\n  },\n\n  // 2 different parameter setups\n  // (value, alpha, sd, n)\n  // (value, alpha, array)\n  tci: function tci() {\n    var args = slice.call(arguments),\n    ans = new Array(2),\n    change;\n    if (args.length === 4) {\n      change = Math.abs(jStat.studentt.inv(args[1] / 2, args[3] - 1) *\n                        args[2] / Math.sqrt(args[3]));\n    } else {\n      change = Math.abs(jStat.studentt.inv(args[1] / 2, args[2].length - 1) *\n                        jStat.stdev(args[2], true) / Math.sqrt(args[2].length));\n    }\n    ans[0] = args[0] - change;\n    ans[1] = args[0] + change;\n    return ans;\n  },\n\n  significant: function significant(pvalue, alpha) {\n    return pvalue < alpha;\n  }\n});\n\njStat.extend(jStat.fn, {\n  normalci: function normalci(value, alpha) {\n    return jStat.normalci(value, alpha, this.toArray());\n  },\n\n  tci: function tci(value, alpha) {\n    return jStat.tci(value, alpha, this.toArray());\n  }\n});\n\n// internal method for calculating the z-score for a difference of proportions test\nfunction differenceOfProportions(p1, n1, p2, n2) {\n  if (p1 > 1 || p2 > 1 || p1 <= 0 || p2 <= 0) {\n    throw new Error(\"Proportions should be greater than 0 and less than 1\")\n  }\n  var pooled = (p1 * n1 + p2 * n2) / (n1 + n2);\n  var se = Math.sqrt(pooled * (1 - pooled) * ((1/n1) + (1/n2)));\n  return (p1 - p2) / se;\n}\n\n// Difference of Proportions\njStat.extend(jStat.fn, {\n  oneSidedDifferenceOfProportions: function oneSidedDifferenceOfProportions(p1, n1, p2, n2) {\n    var z = differenceOfProportions(p1, n1, p2, n2);\n    return jStat.ztest(z, 1);\n  },\n\n  twoSidedDifferenceOfProportions: function twoSidedDifferenceOfProportions(p1, n1, p2, n2) {\n    var z = differenceOfProportions(p1, n1, p2, n2);\n    return jStat.ztest(z, 2);\n  }\n});\n\n}(jStat, Math));\njStat.models = (function(){\n\n  function sub_regress(endog, exog) {\n    return ols(endog, exog);\n  }\n\n  function sub_regress(exog) {\n    var var_count = exog[0].length;\n    var modelList = jStat.arange(var_count).map(function(endog_index) {\n      var exog_index =\n          jStat.arange(var_count).filter(function(i){return i!==endog_index});\n      return ols(jStat.col(exog, endog_index).map(function(x){ return x[0] }),\n                 jStat.col(exog, exog_index))\n    });\n    return modelList;\n  }\n\n  // do OLS model regress\n  // exog have include const columns ,it will not generate it .In fact, exog is\n  // \"design matrix\" look at\n  //https://en.wikipedia.org/wiki/Design_matrix\n  function ols(endog, exog) {\n    var nobs = endog.length;\n    var df_model = exog[0].length - 1;\n    var df_resid = nobs-df_model - 1;\n    var coef = jStat.lstsq(exog, endog);\n    var predict =\n        jStat.multiply(exog, coef.map(function(x) { return [x] }))\n            .map(function(p) { return p[0] });\n    var resid = jStat.subtract(endog, predict);\n    var ybar = jStat.mean(endog);\n    // constant cause problem\n    // var SST = jStat.sum(endog.map(function(y) {\n    //   return Math.pow(y-ybar,2);\n    // }));\n    var SSE = jStat.sum(predict.map(function(f) {\n      return Math.pow(f - ybar, 2);\n    }));\n    var SSR = jStat.sum(endog.map(function(y, i) {\n      return Math.pow(y - predict[i], 2);\n    }));\n    var SST = SSE + SSR;\n    var R2 = (SSE / SST);\n    return {\n        exog:exog,\n        endog:endog,\n        nobs:nobs,\n        df_model:df_model,\n        df_resid:df_resid,\n        coef:coef,\n        predict:predict,\n        resid:resid,\n        ybar:ybar,\n        SST:SST,\n        SSE:SSE,\n        SSR:SSR,\n        R2:R2\n    };\n  }\n\n  // H0: b_I=0\n  // H1: b_I!=0\n  function t_test(model) {\n    var subModelList = sub_regress(model.exog);\n    //var sigmaHat=jStat.stdev(model.resid);\n    var sigmaHat = Math.sqrt(model.SSR / (model.df_resid));\n    var seBetaHat = subModelList.map(function(mod) {\n      var SST = mod.SST;\n      var R2 = mod.R2;\n      return sigmaHat / Math.sqrt(SST * (1 - R2));\n    });\n    var tStatistic = model.coef.map(function(coef, i) {\n      return (coef - 0) / seBetaHat[i];\n    });\n    var pValue = tStatistic.map(function(t) {\n      var leftppf = jStat.studentt.cdf(t, model.df_resid);\n      return (leftppf > 0.5 ? 1 - leftppf : leftppf) * 2;\n    });\n    var c = jStat.studentt.inv(0.975, model.df_resid);\n    var interval95 = model.coef.map(function(coef, i) {\n      var d = c * seBetaHat[i];\n      return [coef - d, coef + d];\n    })\n    return {\n        se: seBetaHat,\n        t: tStatistic,\n        p: pValue,\n        sigmaHat: sigmaHat,\n        interval95: interval95\n    };\n  }\n\n  function F_test(model) {\n    var F_statistic =\n        (model.R2 / model.df_model) / ((1 - model.R2) / model.df_resid);\n    var fcdf = function(x, n1, n2) {\n      return jStat.beta.cdf(x / (n2 / n1 + x), n1 / 2, n2 / 2)\n    }\n    var pvalue = 1 - fcdf(F_statistic, model.df_model, model.df_resid);\n    return { F_statistic: F_statistic, pvalue: pvalue };\n  }\n\n  function ols_wrap(endog, exog) {\n    var model = ols(endog,exog);\n    var ttest = t_test(model);\n    var ftest = F_test(model);\n    // Provide the Wherry / Ezekiel / McNemar / Cohen Adjusted R^2\n    // Which matches the 'adjusted R^2' provided by R's lm package\n    var adjust_R2 =\n        1 - (1 - model.R2) * ((model.nobs - 1) / (model.df_resid));\n    model.t = ttest;\n    model.f = ftest;\n    model.adjust_R2 = adjust_R2;\n    return model;\n  }\n\n  return { ols: ols_wrap };\n})();\n  // Make it compatible with previous version.\n  jStat.jStat = jStat;\n\n  return jStat;\n});\n\n\n/***/ })\n/******/ ]);",null)}},function(e,t,n){"use strict";var r=window.URL||window.webkitURL;e.exports=function(e,t){try{try{var n;try{var o=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;n=new o,n.append(e),n=n.getBlob()}catch(t){n=new Blob([e])}return new Worker(r.createObjectURL(n))}catch(t){return new Worker("data:application/javascript,"+encodeURIComponent(e))}}catch(e){if(!t)throw Error("Inline worker is not supported");return new Worker(t)}}},function(e,t){function n(e,t,n){t=t||function(e){return e};for(var r,o,a,i,s,l=e,p=[{lower_index_incl:0,upper_index_excl:e.length}],f=[],h=0;h<e.length;h++)s=t(e[h]),s.length>f.length&&(f=s);for(var m=f.length,y=0;y<m;y++){r=[],o=[];for(var g=0;g<p.length;g++)a=p[g],i=c(l,t,a.lower_index_incl,a.upper_index_excl,y,typeof f[y]===d),u(r,i.sorted_array),u(o,i.bucket_ranges);l=r,p=o}if(n){r=[];for(var v,g=0;g<p.length;g++)a=p[g],v=l.slice(a.lower_index_incl,a.upper_index_excl),v.sort(n),u(r,v);l=r}return l}function r(e,t){return t=t||function(e){return e},n(e.map(function(e){return{d:e,vector:o(t(e))}}),function(e){return e.vector}).map(function(e){return e.d})}function o(e){for(var t,n=[],r=e.length,o=-1,a=0;a<r;a++)t=e.charCodeAt(a),t>=48&&t<=57?-1===o&&(o=a):(o>-1&&(n.push(parseInt(e.substring(o,a),10)),o=-1),n.push(t));return o>-1&&n.push(parseInt(e.substring(o),10)),n}function a(e,t,n,r){var o=s(n(e),n(t));return 0===o&&r&&(o=r(e,t)),o}function i(e,t){return typeof e===d?s(o(e),o(t)):l(e,t)}function s(e,t){for(var n,r=0,o=0;o<e.length;o++){if(o>=t.length){r=1;break}if(0!==(n=i(e[o],t[o]))){r=n;break}}return 0===r&&e.length<t.length&&(r=-1),r}function l(e,t){return e<t?-1:e>t?1:0}function u(e,t){for(var n=0;n<t.length;n++)e.push(t[n])}function c(e,t,n,o,a,i){if(!e.length||n>=o)return{sorted_array:[],bucket_ranges:[]};for(var s,c,d={},p=[],f=n;f<o;f++)s=t(e[f]),s.length>a?(c=s[a],d[c]=d[c]||[],d[c].push(e[f])):p.push(e[f]);var h=Object.keys(d);if(i)h=r(h);else{for(var f=0;f<h.length;f++)h[f]=parseFloat(h[f]);h.sort(l)}var m,y,g=[],v=[];p.length&&(m=n+g.length,v.push({lower_index_incl:m,upper_index_excl:m+p.length}),u(g,p));for(var f=0;f<h.length;f++){var b=d[h[f]];m=n+g.length,y=m+b.length,v.push({lower_index_incl:m,upper_index_excl:y}),u(g,b)}return{sorted_array:g,bucket_ranges:v}}var d="string";e.exports={bucketSort:n,stringSort:r,compare:s,compareFull:a,__bucketSortHelper:c,__stringToVector:o}},function(e,t,n){var r=n(6),o=n(2),a=n(27),i=n(5),s=n(10),l=n(0),u=function(e,t){return e<t?-1:e>t?1:0},c=function(e,t,n){n=n||0;for(var r=n;r<e.length;r++)if(t(e[r]))return r;return-1},d=function(e){var t=e.$canvas[0],n=t.cloneNode(),r=t.parentNode;r.removeChild(t),r.insertBefore(n,e.$overlay_canvas[0]),e.$canvas=l(n)},p=function(e){try{var t=e.$canvas[0],n=t.getContext("experimental-webgl",{alpha:!1,antialias:e.antialias});return n.clearColor(1,1,1,1),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),n.viewportWidth=t.width,n.viewportHeight=t.height,n.viewport(0,0,n.viewportWidth,n.viewportHeight),n.enable(n.DEPTH_TEST),n.enable(n.BLEND),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA),n.depthMask(!1),n}catch(e){return null}},f=function(e,t,n){var r=e.ctx.createProgram();if(e.ctx.attachShader(r,t),e.ctx.attachShader(r,n),e.ctx.linkProgram(r),!e.ctx.getProgramParameter(r,e.ctx.LINK_STATUS)){var o=e.ctx.getProgramInfoLog(r);throw e.ctx.deleteProgram(r),"Unable to link shader program: "+o}return r},h=function(e,t,n){var r=e.ctx.createShader(e.ctx[n]);if(e.ctx.shaderSource(r,t),e.ctx.compileShader(r),!e.ctx.getShaderParameter(r,e.ctx.COMPILE_STATUS)){var o=e.ctx.getShaderInfoLog(r);throw e.ctx.deleteShader(r),"Unable to compile shader: "+o}return r},m=function(){function e(e,r,o,a,s,u,c,d){this.$container=e,this.$canvas=r,this.$overlay_canvas=o,this.supersampling_ratio=2,this.antialias=!0,this.antialias_on_cell_width_thresh=5,this.position_bit_pack_base=128,g(this),v(this),y(this),this.visible_area_width=r[0].width;var p=this;this.tooltip=u,this.tooltip.center=!0,this.scroll_x=0,this.scroll_y=0,this.$dummy_scroll_div_contents=a,this.dummy_scroll_div_client_size=new i({width:a.parent()[0].clientWidth,height:a.parent()[0].clientHeight},function(){return{width:a.parent()[0].clientWidth,height:a.parent()[0].clientHeight}}),this.identified_shape_list_list={},this.vertex_data={},this.vertex_column_array={},this.vertex_position_buffer={},this.vertex_color_buffer={},this.vertex_column_buffer={},this.color_texture={},this.id_to_first_vertex_index={},this.rendering_suppressed=!1,this.highlight_area_callback=void 0===c?function(){}:c,function(e){var r,o,a=!1,i=null,c=function(e,t){return Math.abs(e-t)>=10},p=function(){if(a&&(a=!1,c(r,o))){var t=Math.min(r,o),n=Math.max(r,o);e.highlight_area_callback(t+e.scroll_x,n+e.scroll_x)}},f=function(t,n){var r=e.$overlay_canvas.offset(),o=e.$overlay_canvas.width(),a=e.$overlay_canvas.height();return t>=r.left&&t<o+r.left&&n>=r.top&&n<a+r.top};l(document).on("mousemove",function(t){f(t.pageX,t.pageY)||(m(e),u.hide(),d(null))}),e.$overlay_canvas.on("mousemove",function(l){if(!e.rendering_suppressed){m(e);var p=e.$overlay_canvas.offset(),f=l.pageX-p.left,h=l.pageY-p.top;if(a){b=null,o=f;var y=Math.min(f,r),g=Math.max(f,r),v=c(r,o)?"rgba(0,0,0,0.3)":"rgba(0,0,0,0.2)";n(e,y,0,g-y,s.getCellViewHeight(),v)}else{var b=s.getOverlappingCell(f+e.scroll_x,h+e.scroll_y),_=null===b?null:s.getTrackDatum(b.track,b.id),w=(s.getCellWidth(),s.getCellPadding());if(null!==_){d(b.track,b.id);var y=s.getZoomedColumnLeft(b.id)-e.scroll_x;t(e,y,s.getCellTops(b.track)-e.scroll_y,s.getCellWidth()+(s.getTrackHasColumnSpacing(b.track)?0:w),s.getCellHeight(b.track),"rgba(0,0,0,1)");for(var x=s.getTracks(),S=0;S<x.length;S++)null!==s.getTrackDatum(x[S],b.id)&&t(e,y,s.getCellTops(x[S])-e.scroll_y,s.getCellWidth()+(s.getTrackHasColumnSpacing(x[S])?0:w),s.getCellHeight(x[S]),"rgba(0,0,0,0.5)");u.show(250,s.getZoomedColumnLeft(b.id)+s.getCellWidth()/2+p.left-e.scroll_x,s.getCellTops(b.track)+p.top-e.scroll_y,s.getTrackTooltipFn(b.track)(_)),i=b}else u.hideIfNotAlreadyGoingTo(150),b=null}null===b&&d(null)}}),e.$overlay_canvas.on("mousedown",function(t){f(t.pageX,t.pageY)&&(a=!0,r=t.pageX-e.$overlay_canvas.offset().left,o=r,u.hide())}),e.$overlay_canvas.on("mouseup",function(e){f(e.pageX,e.pageY)&&p()}),e.$overlay_canvas.on("mouseleave",function(e){p()})}(this),a.parent().scroll(function(){m(p)})}var t=function(e,t,n,r,o,a){var i=e.overlay_ctx;i.strokeStyle=a,i.strokeWidth=10,i.strokeRect(e.supersampling_ratio*t,e.supersampling_ratio*n,e.supersampling_ratio*r,e.supersampling_ratio*o)},n=function(e,t,n,r,o,a){var i=e.overlay_ctx;i.fillStyle=a,i.fillRect(e.supersampling_ratio*t,e.supersampling_ratio*n,e.supersampling_ratio*r,e.supersampling_ratio*o)},m=function(e){e.overlay_ctx.fillStyle="rgba(0,0,0,0)",e.overlay_ctx.clearRect(0,0,e.$overlay_canvas[0].width,e.$overlay_canvas[0].height)},y=function(e){e.overlay_ctx=e.$overlay_canvas[0].getContext("2d"),m(e)},g=function(e){e.ctx=p(e),function(e){var t=r.mat4.create();r.mat4.lookAt(t,[0,0,1],[0,0,0],[0,1,0]),e.mvMatrix=t;var n=r.mat4.create();r.mat4.ortho(n,0,e.ctx.viewportWidth,e.ctx.viewportHeight,0,-5,1e3),e.pMatrix=n}(e)},v=function(e){var t=["precision highp float;","attribute float aPosVertex;","attribute float aColVertex;","attribute float aVertexOncoprintColumn;","uniform float columnWidth;","uniform float scrollX;","uniform float zoomX;","uniform float scrollY;","uniform float zoomY;","uniform mat4 uMVMatrix;","uniform mat4 uPMatrix;","uniform float offsetY;","uniform float supersamplingRatio;","uniform float positionBitPackBase;","uniform float texSize;","varying float texCoord;","vec3 unpackVec3(float packedVec3, float base) {","\tfloat pos0 = floor(packedVec3 / (base*base));","\tfloat pos0Contr = pos0*base*base;","\tfloat pos1 = floor((packedVec3 - pos0Contr)/base);","\tfloat pos1Contr = pos1*base;","\tfloat pos2 = packedVec3 - pos0Contr - pos1Contr;","\treturn vec3(pos0, pos1, pos2);","}","void main(void) {","\tgl_Position = vec4(unpackVec3(aPosVertex, positionBitPackBase), 1.0);","\tgl_Position[0] += aVertexOncoprintColumn*columnWidth;","\tgl_Position *= vec4(zoomX, zoomY, 1.0, 1.0);","\tgl_Position[1] += offsetY;","\tgl_Position -= vec4(scrollX, scrollY, 0.0, 0.0);","\tgl_Position[0] *= supersamplingRatio;","\tgl_Position[1] *= supersamplingRatio;","\tgl_Position = uPMatrix * uMVMatrix * gl_Position;","\ttexCoord = (aColVertex + 0.5) / texSize;","}"].join("\n"),n=["precision mediump float;","varying float texCoord;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vec2(texCoord, 0.5));","}"].join("\n"),r=h(e,t,"VERTEX_SHADER"),o=h(e,n,"FRAGMENT_SHADER"),a=f(e,r,o);a.vertexPositionAttribute=e.ctx.getAttribLocation(a,"aPosVertex"),e.ctx.enableVertexAttribArray(a.vertexPositionAttribute),a.vertexColorAttribute=e.ctx.getAttribLocation(a,"aColVertex"),e.ctx.enableVertexAttribArray(a.vertexColorAttribute),a.vertexOncoprintColumnAttribute=e.ctx.getAttribLocation(a,"aVertexOncoprintColumn"),e.ctx.enableVertexAttribArray(a.vertexOncoprintColumnAttribute),a.samplerUniform=e.ctx.getUniformLocation(a,"uSampler"),a.pMatrixUniform=e.ctx.getUniformLocation(a,"uPMatrix"),a.mvMatrixUniform=e.ctx.getUniformLocation(a,"uMVMatrix"),a.columnWidthUniform=e.ctx.getUniformLocation(a,"columnWidth"),a.scrollXUniform=e.ctx.getUniformLocation(a,"scrollX"),a.scrollYUniform=e.ctx.getUniformLocation(a,"scrollY"),a.zoomXUniform=e.ctx.getUniformLocation(a,"zoomX"),a.zoomYUniform=e.ctx.getUniformLocation(a,"zoomY"),a.offsetYUniform=e.ctx.getUniformLocation(a,"offsetY"),a.supersamplingRatioUniform=e.ctx.getUniformLocation(a,"supersamplingRatio"),a.positionBitPackBaseUniform=e.ctx.getUniformLocation(a,"positionBitPackBase"),a.texSizeUniform=e.ctx.getUniformLocation(a,"texSize"),e.shader_program=a},b=function(e,t){var n=t.getCellViewHeight(),r=e.getTotalWidth(t),o=e.visible_area_width;e.$dummy_scroll_div_contents.css({"min-width":r,"min-height":t.getOncoprintHeight()}),e.$dummy_scroll_div_contents.parent().css({height:n+20,width:o+20}),e.dummy_scroll_div_client_size.update(),e.$canvas[0].height=e.supersampling_ratio*n,e.$canvas[0].style.height=n+"px",e.$overlay_canvas[0].height=e.supersampling_ratio*n,e.$overlay_canvas[0].style.height=n+"px",e.$canvas[0].width=e.supersampling_ratio*o,e.$canvas[0].style.width=o+"px",e.$overlay_canvas[0].width=e.supersampling_ratio*o,e.$overlay_canvas[0].style.width=o+"px",e.$container.css("height",n),e.$container.css("width",o),g(e),v(e),y(e)},_=function(e,t,n){if(!e.rendering_suppressed){var r=e.scroll_x,o=e.scroll_y,a=t.getHorzZoom(),i=t.getVertZoom(),s=e.getViewportOncoprintSpace(t),l=s.left,u=s.right,d=s.top,p=s.bottom,f=t.getColumnLeft(),h=t.getIdOrder(),m=c(h,function(e){return f[e]>=l}),y=c(h,function(e){return f[e]>u},m+1),g=m<1?h[0]:h[m-1],v=-1===y?null:h[y];n||b(e,t),e.ctx.clearColor(1,1,1,1),e.ctx.clear(e.ctx.COLOR_BUFFER_BIT|e.ctx.DEPTH_BUFFER_BIT);for(var _=t.getTracks(),w=0;w<_.length;w++){var x=_[w],C=t.getCellTops(x),k=t.getCellHeight(x);if(!(C/i>=p||(C+k)/i<d)){var E=S(e,x);if(0!==E.position.numItems){var M=e.id_to_first_vertex_index[x][g],A=null===v?E.position.numItems:e.id_to_first_vertex_index[x][v];e.ctx.useProgram(e.shader_program),e.ctx.bindBuffer(e.ctx.ARRAY_BUFFER,E.position),e.ctx.vertexAttribPointer(e.shader_program.vertexPositionAttribute,E.position.itemSize,e.ctx.FLOAT,!1,0,0),e.ctx.bindBuffer(e.ctx.ARRAY_BUFFER,E.color),e.ctx.vertexAttribPointer(e.shader_program.vertexColorAttribute,E.color.itemSize,e.ctx.FLOAT,!1,0,0),e.ctx.bindBuffer(e.ctx.ARRAY_BUFFER,E.column),e.ctx.vertexAttribPointer(e.shader_program.vertexOncoprintColumnAttribute,E.column.itemSize,e.ctx.FLOAT,!1,0,0),e.ctx.activeTexture(e.ctx.TEXTURE0),e.ctx.bindTexture(e.ctx.TEXTURE_2D,E.color_tex.texture),e.ctx.uniform1i(e.shader_program.samplerUniform,0),e.ctx.uniform1f(e.shader_program.texSizeUniform,E.color_tex.size),e.ctx.uniformMatrix4fv(e.shader_program.pMatrixUniform,!1,e.pMatrix),e.ctx.uniformMatrix4fv(e.shader_program.mvMatrixUniform,!1,e.mvMatrix),e.ctx.uniform1f(e.shader_program.columnWidthUniform,t.getCellWidth(!0)+t.getCellPadding(!0)),e.ctx.uniform1f(e.shader_program.scrollXUniform,r),e.ctx.uniform1f(e.shader_program.scrollYUniform,o),e.ctx.uniform1f(e.shader_program.zoomXUniform,a),e.ctx.uniform1f(e.shader_program.zoomYUniform,i),e.ctx.uniform1f(e.shader_program.offsetYUniform,C),e.ctx.uniform1f(e.shader_program.supersamplingRatioUniform,e.supersampling_ratio),e.ctx.uniform1f(e.shader_program.positionBitPackBaseUniform,e.position_bit_pack_base),e.ctx.drawArrays(e.ctx.TRIANGLES,M,A-M)}}}}},w=function(e,t,n){var r;r=void 0===n?t.getTracks():[n];for(var o=0;o<r.length;o++)e.vertex_position_buffer[r[o]]&&(e.ctx.deleteBuffer(e.vertex_position_buffer[r[o]]),delete e.vertex_position_buffer[r[o]]),e.vertex_color_buffer[r[o]]&&(e.ctx.deleteBuffer(e.vertex_color_buffer[r[o]]),delete e.vertex_color_buffer[r[o]]),e.color_texture[r[o]]&&(e.ctx.deleteTexture(e.color_texture[r[o]].texture),delete e.color_texture[r[o]])},x=function(e,t,n){var r;r=void 0===n?t.getTracks():[n];for(var o=0;o<r.length;o++)e.vertex_column_buffer[r[o]]&&(e.ctx.deleteBuffer(e.vertex_column_buffer[r[o]]),delete e.vertex_column_buffer[r[o]])},S=function(e,t){if(void 0===e.vertex_position_buffer[t]){var n=e.ctx.createBuffer(),r=e.vertex_data[t].pos_array;e.ctx.bindBuffer(e.ctx.ARRAY_BUFFER,n),e.ctx.bufferData(e.ctx.ARRAY_BUFFER,new Float32Array(r),e.ctx.STATIC_DRAW),n.itemSize=1,n.numItems=r.length/n.itemSize,e.vertex_position_buffer[t]=n}if(void 0===e.vertex_color_buffer[t]){var o=e.ctx.createBuffer(),a=e.vertex_data[t].col_array;e.ctx.bindBuffer(e.ctx.ARRAY_BUFFER,o),e.ctx.bufferData(e.ctx.ARRAY_BUFFER,new Float32Array(a),e.ctx.STATIC_DRAW),o.itemSize=1,o.numItems=a.length/o.itemSize,e.vertex_color_buffer[t]=o}if(void 0===e.color_texture[t]){var i=e.ctx.createTexture();e.ctx.bindTexture(e.ctx.TEXTURE_2D,i);for(var s=e.vertex_data[t].col_bank,l=Math.pow(2,Math.ceil(Math.log2(s.length/4)));s.length<4*l;)s.push(0);e.ctx.texImage2D(e.ctx.TEXTURE_2D,0,e.ctx.RGBA,l,1,0,e.ctx.RGBA,e.ctx.UNSIGNED_BYTE,new Uint8Array(s)),e.ctx.texParameteri(e.ctx.TEXTURE_2D,e.ctx.TEXTURE_MIN_FILTER,e.ctx.NEAREST),e.ctx.texParameteri(e.ctx.TEXTURE_2D,e.ctx.TEXTURE_MAG_FILTER,e.ctx.NEAREST),e.color_texture[t]={texture:i,size:l}}if(void 0===e.vertex_column_buffer[t]){var u=e.ctx.createBuffer(),c=e.vertex_column_array[t];e.ctx.bindBuffer(e.ctx.ARRAY_BUFFER,u),e.ctx.bufferData(e.ctx.ARRAY_BUFFER,new Float32Array(c),e.ctx.STATIC_DRAW),u.itemSize=1,u.numItems=c.length/u.itemSize,e.vertex_column_buffer[t]=u}return{position:e.vertex_position_buffer[t],color:e.vertex_color_buffer[t],color_tex:e.color_texture[t],column:e.vertex_column_buffer[t]}},C=function(e,t,n){if(!e.rendering_suppressed){for(var r=e.vertex_data[n].pos_array.length,o=e.id_to_first_vertex_index[n],a=t.getVisibleIdToIndexMap(),i=Object.keys(o).map(function(e){return[e,o[e]]}).sort(function(e,t){return u(e[1],t[1])}),s=[],l=0;l<i.length;l++)for(var c=(l===i.length-1?r:i[l+1][1])-i[l][1],d=a[i[l][0]],p=0;p<c;p++)s.push(d);e.vertex_column_array[n]=s,x(e,t,n)}},k=function(e,t,n){if(!e.rendering_suppressed){var r=e.identified_shape_list_list[n],o=t.getIdToIndexMap();r.sort(function(e,t){return u(o[e.id],o[t.id])});for(var i=[],l=[],c={},d=[],p={},f=function(e){return e.join(",")},h=e.position_bit_pack_base,m=function(e){return h*h*e[0]+h*e[1]+e[2]},y={},g=0;g<r.length;g++){var v=r[g].shape_list;c[r[g].id]=i.length;for(var b=0;b<v.length;b++){var _=v[b],x=s.Shape.hashComputedShape(_,b);if(!y.hasOwnProperty(x)){y[x]={position:[],color:[]};var S=y[x].position,C=y[x].color;a(_,b,function(e,t){e=e.map(Math.round),t=t.map(function(e){return Math.round(255*e)}),S.push(m(e));var n=f(t),r=p[n];void 0===r&&(r=d.length,d.push(t),p[n]=r),C.push(r)})}i.push.apply(i,y[x].position),l.push.apply(l,y[x].color)}}d=d.reduce(function(e,t){return e.concat(t)},[]),0===d.length&&d.push(0,0,0,0),e.vertex_data[n]={pos_array:i,col_array:l,col_bank:d},e.id_to_first_vertex_index[n]=c,w(e,t,n)}},E=function(e,t,n){e.rendering_suppressed||(e.identified_shape_list_list[n]=t.getIdentifiedShapeListList(n,!0,!0))},M=function(e,t){w(e,t),x(e,t),d(e),g(e,t),v(e)};e.prototype.getViewportOncoprintSpace=function(e){var t=this.scroll_x,n=this.scroll_y,r=e.getHorzZoom(),o=e.getVertZoom(),a=Math.round(t/r),i=Math.round((t+this.visible_area_width)/r);return{top:Math.round(n/o),bottom:Math.round((n+e.getCellViewHeight())/o),left:a,right:i}},e.prototype.isUsable=function(){return null!==this.ctx},e.prototype.removeTrack=function(e,t){delete this.identified_shape_list_list[t],delete this.vertex_data[t],delete this.vertex_column_array[t],delete this.id_to_first_vertex_index[t],w(this,e,t),x(this,e,t),this.rendering_suppressed||_(this,e)},e.prototype.moveTrack=function(e){this.rendering_suppressed||_(this,e)},e.prototype.setTrackGroupOrder=function(e){_(this,e)},e.prototype.addTracks=function(e,t){if(!this.rendering_suppressed){for(var n=0;n<t.length;n++)E(this,e,t[n]),k(this,e,t[n]),C(this,e,t[n]);_(this,e)}},e.prototype.setIdOrder=function(e,t){if(!this.rendering_suppressed){for(var n=e.getTracks(),r=0;r<n.length;r++)C(this,e,n[r]);_(this,e)}},e.prototype.setTrackGroupSortPriority=function(e){this.rendering_suppressed||_(this,e)},e.prototype.sort=function(e){if(!this.rendering_suppressed){for(var t=e.getTracks(),n=0;n<t.length;n++)k(this,e,t[n]),C(this,e,t[n]);_(this,e)}},e.prototype.suppressRendering=function(){this.rendering_suppressed=!0},e.prototype.releaseRendering=function(e){this.rendering_suppressed=!1;for(var t=e.getTracks(),n=0;n<t.length;n++)E(this,e,t[n]),k(this,e,t[n]),C(this,e,t[n]);_(this,e)},e.prototype.hideIds=function(e){if(!this.rendering_suppressed){for(var t=e.getTracks(),n=0;n<t.length;n++)C(this,e,t[n]);_(this,e)}},e.prototype.setTrackData=function(e,t){this.rendering_suppressed||(E(this,e,t),k(this,e,t),C(this,e,t),_(this,e))},e.prototype.setRuleSet=function(e,t){this.rendering_suppressed||(E(this,e,t),k(this,e,t),_(this,e))},e.prototype.shareRuleSet=function(e,t){this.rendering_suppressed||(E(this,e,t),k(this,e,t),_(this,e))},e.prototype.setSortConfig=function(e){this.rendering_suppressed||this.sort(e)},e.prototype.setHorzScroll=function(e){this.setScroll(e)},e.prototype.setVertScroll=function(e){this.setScroll(e)},e.prototype.setScroll=function(e){this.scroll_x=e.getHorzScroll(),this.scroll_y=e.getVertScroll(),this.rendering_suppressed||_(this,e,!0)};var A=function(e,t){t.getCellWidth()<e.antialias_on_cell_width_thresh?e.antialias||(e.antialias=!0,M(e,t)):e.antialias&&(e.antialias=!1,M(e,t))};return e.prototype.setZoom=function(e){A(this,e),this.rendering_suppressed||_(this,e)},e.prototype.setHorzZoom=function(e){A(this,e),this.rendering_suppressed||_(this,e)},e.prototype.setVertZoom=function(e){this.rendering_suppressed||_(this,e)},e.prototype.setViewport=function(e){this.scroll_x=e.getHorzScroll(),this.scroll_y=e.getVertScroll(),A(this,e),this.rendering_suppressed||_(this,e)},e.prototype.getTotalWidth=function(e,t){return(e.getCellWidth(t)+e.getCellPadding(t))*e.getIdOrder().length},e.prototype.getWidth=function(){return this.visible_area_width},e.prototype.setWidth=function(e,t){this.visible_area_width=e,this.rendering_suppressed||_(this,t)},e.prototype.setCellPaddingOn=function(e){if(!this.rendering_suppressed){for(var t=e.getTracks(),n=0;n<t.length;n++)e.getTrackHasColumnSpacing(t[n])||(E(this,e,t[n]),k(this,e,t[n])),C(this,e,t[n]);_(this,e)}},e.prototype.getDummyScrollDivClientSize=function(){return this.dummy_scroll_div_client_size.get()},e.prototype.toSVGGroup=function(e,t,n){for(var r=o.group(t||0,n||0),a=e.getCellTops(),i=e.getTracks(),s=e.getZoomedColumnLeft(),l=0;l<i.length;l++)for(var u=i[l],n=a[u],c=e.getIdentifiedShapeListList(u,!1,!0),d=0;d<c.length;d++){var p=c[d],f=p.id,h=p.shape_list,t=s[f];if(void 0!==t)for(var m=0;m<h.length;m++)r.appendChild(o.fromShape(h[m],t,n))}return r},e}();e.exports=m},function(e,t,n){var r=n(1),o={};o.create=function(){var e=new r.ARRAY_TYPE(4);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},o.clone=function(e){var t=new r.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},o.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},o.fromValues=function(e,t,n,o){var a=new r.ARRAY_TYPE(4);return a[0]=e,a[1]=t,a[2]=n,a[3]=o,a},o.set=function(e,t,n,r,o){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e},o.transpose=function(e,t){if(e===t){var n=t[1];e[1]=t[2],e[2]=n}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e},o.invert=function(e,t){var n=t[0],r=t[1],o=t[2],a=t[3],i=n*a-o*r;return i?(i=1/i,e[0]=a*i,e[1]=-r*i,e[2]=-o*i,e[3]=n*i,e):null},o.adjoint=function(e,t){var n=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=n,e},o.determinant=function(e){return e[0]*e[3]-e[2]*e[1]},o.multiply=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=t[3],s=n[0],l=n[1],u=n[2],c=n[3];return e[0]=r*s+a*l,e[1]=o*s+i*l,e[2]=r*u+a*c,e[3]=o*u+i*c,e},o.mul=o.multiply,o.rotate=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+a*s,e[1]=o*l+i*s,e[2]=r*-s+a*l,e[3]=o*-s+i*l,e},o.scale=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=t[3],s=n[0],l=n[1];return e[0]=r*s,e[1]=o*s,e[2]=a*l,e[3]=i*l,e},o.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=-n,e[3]=r,e},o.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e},o.str=function(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},o.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2))},o.LDU=function(e,t,n,r){return e[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-e[2]*n[1],[e,t,n]},o.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e},o.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e},o.sub=o.subtract,o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},o.equals=function(e,t){var n=e[0],o=e[1],a=e[2],i=e[3],s=t[0],l=t[1],u=t[2],c=t[3];return Math.abs(n-s)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-l)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(a-u)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(i-c)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))},o.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},o.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e},e.exports=o},function(e,t,n){var r=n(1),o={};o.create=function(){var e=new r.ARRAY_TYPE(6);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},o.clone=function(e){var t=new r.ARRAY_TYPE(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},o.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},o.fromValues=function(e,t,n,o,a,i){var s=new r.ARRAY_TYPE(6);return s[0]=e,s[1]=t,s[2]=n,s[3]=o,s[4]=a,s[5]=i,s},o.set=function(e,t,n,r,o,a,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e[4]=a,e[5]=i,e},o.invert=function(e,t){var n=t[0],r=t[1],o=t[2],a=t[3],i=t[4],s=t[5],l=n*a-r*o;return l?(l=1/l,e[0]=a*l,e[1]=-r*l,e[2]=-o*l,e[3]=n*l,e[4]=(o*s-a*i)*l,e[5]=(r*i-n*s)*l,e):null},o.determinant=function(e){return e[0]*e[3]-e[1]*e[2]},o.multiply=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=t[3],s=t[4],l=t[5],u=n[0],c=n[1],d=n[2],p=n[3],f=n[4],h=n[5];return e[0]=r*u+a*c,e[1]=o*u+i*c,e[2]=r*d+a*p,e[3]=o*d+i*p,e[4]=r*f+a*h+s,e[5]=o*f+i*h+l,e},o.mul=o.multiply,o.rotate=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=t[3],s=t[4],l=t[5],u=Math.sin(n),c=Math.cos(n);return e[0]=r*c+a*u,e[1]=o*c+i*u,e[2]=r*-u+a*c,e[3]=o*-u+i*c,e[4]=s,e[5]=l,e},o.scale=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=t[3],s=t[4],l=t[5],u=n[0],c=n[1];return e[0]=r*u,e[1]=o*u,e[2]=a*c,e[3]=i*c,e[4]=s,e[5]=l,e},o.translate=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=t[3],s=t[4],l=t[5],u=n[0],c=n[1];return e[0]=r,e[1]=o,e[2]=a,e[3]=i,e[4]=r*u+a*c+s,e[5]=o*u+i*c+l,e},o.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=-n,e[3]=r,e[4]=0,e[5]=0,e},o.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e},o.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e},o.str=function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},o.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+1)},o.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e},o.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e},o.sub=o.subtract,o.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e},o.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e},o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]},o.equals=function(e,t){var n=e[0],o=e[1],a=e[2],i=e[3],s=e[4],l=e[5],u=t[0],c=t[1],d=t[2],p=t[3],f=t[4],h=t[5];return Math.abs(n-u)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(o-c)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(a-d)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(i-p)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(s-f)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(f))&&Math.abs(l-h)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(h))},e.exports=o},function(e,t,n){var r=n(1),o={scalar:{},SIMD:{}};o.create=function(){var e=new r.ARRAY_TYPE(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.clone=function(e){var t=new r.ARRAY_TYPE(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},o.fromValues=function(e,t,n,o,a,i,s,l,u,c,d,p,f,h,m,y){var g=new r.ARRAY_TYPE(16);return g[0]=e,g[1]=t,g[2]=n,g[3]=o,g[4]=a,g[5]=i,g[6]=s,g[7]=l,g[8]=u,g[9]=c,g[10]=d,g[11]=p,g[12]=f,g[13]=h,g[14]=m,g[15]=y,g},o.set=function(e,t,n,r,o,a,i,s,l,u,c,d,p,f,h,m,y){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e[4]=a,e[5]=i,e[6]=s,e[7]=l,e[8]=u,e[9]=c,e[10]=d,e[11]=p,e[12]=f,e[13]=h,e[14]=m,e[15]=y,e},o.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.scalar.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],o=t[3],a=t[6],i=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=a,e[11]=t[14],e[12]=o,e[13]=i,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},o.SIMD.transpose=function(e,t){var n,r,o,a,i,s,l,u,c,d;return n=SIMD.Float32x4.load(t,0),r=SIMD.Float32x4.load(t,4),o=SIMD.Float32x4.load(t,8),a=SIMD.Float32x4.load(t,12),i=SIMD.Float32x4.shuffle(n,r,0,1,4,5),s=SIMD.Float32x4.shuffle(o,a,0,1,4,5),l=SIMD.Float32x4.shuffle(i,s,0,2,4,6),u=SIMD.Float32x4.shuffle(i,s,1,3,5,7),SIMD.Float32x4.store(e,0,l),SIMD.Float32x4.store(e,4,u),i=SIMD.Float32x4.shuffle(n,r,2,3,6,7),s=SIMD.Float32x4.shuffle(o,a,2,3,6,7),c=SIMD.Float32x4.shuffle(i,s,0,2,4,6),d=SIMD.Float32x4.shuffle(i,s,1,3,5,7),SIMD.Float32x4.store(e,8,c),SIMD.Float32x4.store(e,12,d),e},o.transpose=r.USE_SIMD?o.SIMD.transpose:o.scalar.transpose,o.scalar.invert=function(e,t){var n=t[0],r=t[1],o=t[2],a=t[3],i=t[4],s=t[5],l=t[6],u=t[7],c=t[8],d=t[9],p=t[10],f=t[11],h=t[12],m=t[13],y=t[14],g=t[15],v=n*s-r*i,b=n*l-o*i,_=n*u-a*i,w=r*l-o*s,x=r*u-a*s,S=o*u-a*l,C=c*m-d*h,k=c*y-p*h,E=c*g-f*h,M=d*y-p*m,A=d*g-f*m,T=p*g-f*y,O=v*T-b*A+_*M+w*E-x*k+S*C;return O?(O=1/O,e[0]=(s*T-l*A+u*M)*O,e[1]=(o*A-r*T-a*M)*O,e[2]=(m*S-y*x+g*w)*O,e[3]=(p*x-d*S-f*w)*O,e[4]=(l*E-i*T-u*k)*O,e[5]=(n*T-o*E+a*k)*O,e[6]=(y*_-h*S-g*b)*O,e[7]=(c*S-p*_+f*b)*O,e[8]=(i*A-s*E+u*C)*O,e[9]=(r*E-n*A-a*C)*O,e[10]=(h*x-m*_+g*v)*O,e[11]=(d*_-c*x-f*v)*O,e[12]=(s*k-i*M-l*C)*O,e[13]=(n*M-r*k+o*C)*O,e[14]=(m*b-h*w-y*v)*O,e[15]=(c*w-d*b+p*v)*O,e):null},o.SIMD.invert=function(e,t){var n,r,o,a,i,s,l,u,c,d,p=SIMD.Float32x4.load(t,0),f=SIMD.Float32x4.load(t,4),h=SIMD.Float32x4.load(t,8),m=SIMD.Float32x4.load(t,12);return i=SIMD.Float32x4.shuffle(p,f,0,1,4,5),r=SIMD.Float32x4.shuffle(h,m,0,1,4,5),n=SIMD.Float32x4.shuffle(i,r,0,2,4,6),r=SIMD.Float32x4.shuffle(r,i,1,3,5,7),i=SIMD.Float32x4.shuffle(p,f,2,3,6,7),a=SIMD.Float32x4.shuffle(h,m,2,3,6,7),o=SIMD.Float32x4.shuffle(i,a,0,2,4,6),a=SIMD.Float32x4.shuffle(a,i,1,3,5,7),i=SIMD.Float32x4.mul(o,a),i=SIMD.Float32x4.swizzle(i,1,0,3,2),s=SIMD.Float32x4.mul(r,i),l=SIMD.Float32x4.mul(n,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,i),s),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,i),l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),i=SIMD.Float32x4.mul(r,o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,i),s),c=SIMD.Float32x4.mul(n,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(a,i)),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,i),c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),i=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(r,2,3,0,1),a),i=SIMD.Float32x4.swizzle(i,1,0,3,2),o=SIMD.Float32x4.swizzle(o,2,3,0,1),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),s),u=SIMD.Float32x4.mul(n,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(o,i)),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,i),u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),i=SIMD.Float32x4.mul(n,r),i=SIMD.Float32x4.swizzle(i,1,0,3,2),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,i),u),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,i),c),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,i),u),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(o,i)),i=SIMD.Float32x4.mul(n,a),i=SIMD.Float32x4.swizzle(i,1,0,3,2),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(o,i)),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,i),u),i=SIMD.Float32x4.swizzle(i,2,3,0,1),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),l),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(r,i)),i=SIMD.Float32x4.mul(n,o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,i),l),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(r,i)),i=SIMD.Float32x4.swizzle(i,2,3,0,1),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(a,i)),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,i),c),d=SIMD.Float32x4.mul(n,s),d=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(d,2,3,0,1),d),d=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(d,1,0,3,2),d),i=SIMD.Float32x4.reciprocalApproximation(d),d=SIMD.Float32x4.sub(SIMD.Float32x4.add(i,i),SIMD.Float32x4.mul(d,SIMD.Float32x4.mul(i,i))),(d=SIMD.Float32x4.swizzle(d,0,0,0,0))?(SIMD.Float32x4.store(e,0,SIMD.Float32x4.mul(d,s)),SIMD.Float32x4.store(e,4,SIMD.Float32x4.mul(d,l)),SIMD.Float32x4.store(e,8,SIMD.Float32x4.mul(d,u)),SIMD.Float32x4.store(e,12,SIMD.Float32x4.mul(d,c)),e):null},o.invert=r.USE_SIMD?o.SIMD.invert:o.scalar.invert,o.scalar.adjoint=function(e,t){var n=t[0],r=t[1],o=t[2],a=t[3],i=t[4],s=t[5],l=t[6],u=t[7],c=t[8],d=t[9],p=t[10],f=t[11],h=t[12],m=t[13],y=t[14],g=t[15];return e[0]=s*(p*g-f*y)-d*(l*g-u*y)+m*(l*f-u*p),e[1]=-(r*(p*g-f*y)-d*(o*g-a*y)+m*(o*f-a*p)),e[2]=r*(l*g-u*y)-s*(o*g-a*y)+m*(o*u-a*l),e[3]=-(r*(l*f-u*p)-s*(o*f-a*p)+d*(o*u-a*l)),e[4]=-(i*(p*g-f*y)-c*(l*g-u*y)+h*(l*f-u*p)),e[5]=n*(p*g-f*y)-c*(o*g-a*y)+h*(o*f-a*p),e[6]=-(n*(l*g-u*y)-i*(o*g-a*y)+h*(o*u-a*l)),e[7]=n*(l*f-u*p)-i*(o*f-a*p)+c*(o*u-a*l),e[8]=i*(d*g-f*m)-c*(s*g-u*m)+h*(s*f-u*d),e[9]=-(n*(d*g-f*m)-c*(r*g-a*m)+h*(r*f-a*d)),e[10]=n*(s*g-u*m)-i*(r*g-a*m)+h*(r*u-a*s),e[11]=-(n*(s*f-u*d)-i*(r*f-a*d)+c*(r*u-a*s)),e[12]=-(i*(d*y-p*m)-c*(s*y-l*m)+h*(s*p-l*d)),e[13]=n*(d*y-p*m)-c*(r*y-o*m)+h*(r*p-o*d),e[14]=-(n*(s*y-l*m)-i*(r*y-o*m)+h*(r*l-o*s)),e[15]=n*(s*p-l*d)-i*(r*p-o*d)+c*(r*l-o*s),e},o.SIMD.adjoint=function(e,t){var n,r,o,a,i,s,l,u,c,d,p,f,h,n=SIMD.Float32x4.load(t,0),r=SIMD.Float32x4.load(t,4),o=SIMD.Float32x4.load(t,8),a=SIMD.Float32x4.load(t,12);return c=SIMD.Float32x4.shuffle(n,r,0,1,4,5),s=SIMD.Float32x4.shuffle(o,a,0,1,4,5),i=SIMD.Float32x4.shuffle(c,s,0,2,4,6),s=SIMD.Float32x4.shuffle(s,c,1,3,5,7),c=SIMD.Float32x4.shuffle(n,r,2,3,6,7),u=SIMD.Float32x4.shuffle(o,a,2,3,6,7),l=SIMD.Float32x4.shuffle(c,u,0,2,4,6),u=SIMD.Float32x4.shuffle(u,c,1,3,5,7),c=SIMD.Float32x4.mul(l,u),c=SIMD.Float32x4.swizzle(c,1,0,3,2),d=SIMD.Float32x4.mul(s,c),p=SIMD.Float32x4.mul(i,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,c),d),p=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,c),p),p=SIMD.Float32x4.swizzle(p,2,3,0,1),c=SIMD.Float32x4.mul(s,l),c=SIMD.Float32x4.swizzle(c,1,0,3,2),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,c),d),h=SIMD.Float32x4.mul(i,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(u,c)),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,c),h),h=SIMD.Float32x4.swizzle(h,2,3,0,1),c=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,2,3,0,1),u),c=SIMD.Float32x4.swizzle(c,1,0,3,2),l=SIMD.Float32x4.swizzle(l,2,3,0,1),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),d),f=SIMD.Float32x4.mul(i,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(l,c)),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,c),f),f=SIMD.Float32x4.swizzle(f,2,3,0,1),c=SIMD.Float32x4.mul(i,s),c=SIMD.Float32x4.swizzle(c,1,0,3,2),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,c),f),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,c),h),c=SIMD.Float32x4.swizzle(c,2,3,0,1),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,c),f),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(l,c)),c=SIMD.Float32x4.mul(i,u),c=SIMD.Float32x4.swizzle(c,1,0,3,2),p=SIMD.Float32x4.sub(p,SIMD.Float32x4.mul(l,c)),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,c),f),c=SIMD.Float32x4.swizzle(c,2,3,0,1),p=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),p),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(s,c)),c=SIMD.Float32x4.mul(i,l),c=SIMD.Float32x4.swizzle(c,1,0,3,2),p=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,c),p),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(s,c)),c=SIMD.Float32x4.swizzle(c,2,3,0,1),p=SIMD.Float32x4.sub(p,SIMD.Float32x4.mul(u,c)),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,c),h),SIMD.Float32x4.store(e,0,d),SIMD.Float32x4.store(e,4,p),SIMD.Float32x4.store(e,8,f),SIMD.Float32x4.store(e,12,h),e},o.adjoint=r.USE_SIMD?o.SIMD.adjoint:o.scalar.adjoint,o.determinant=function(e){var t=e[0],n=e[1],r=e[2],o=e[3],a=e[4],i=e[5],s=e[6],l=e[7],u=e[8],c=e[9],d=e[10],p=e[11],f=e[12],h=e[13],m=e[14],y=e[15];return(t*i-n*a)*(d*y-p*m)-(t*s-r*a)*(c*y-p*h)+(t*l-o*a)*(c*m-d*h)+(n*s-r*i)*(u*y-p*f)-(n*l-o*i)*(u*m-d*f)+(r*l-o*s)*(u*h-c*f)},o.SIMD.multiply=function(e,t,n){var r=SIMD.Float32x4.load(t,0),o=SIMD.Float32x4.load(t,4),a=SIMD.Float32x4.load(t,8),i=SIMD.Float32x4.load(t,12),s=SIMD.Float32x4.load(n,0),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,2,2,2,2),a),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,3,3,3,3),i))));SIMD.Float32x4.store(e,0,l);var u=SIMD.Float32x4.load(n,4),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,2,2,2),a),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,3,3,3,3),i))));SIMD.Float32x4.store(e,4,c);var d=SIMD.Float32x4.load(n,8),p=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,2,2,2,2),a),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,3,3,3,3),i))));SIMD.Float32x4.store(e,8,p);var f=SIMD.Float32x4.load(n,12),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,2,2,2,2),a),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,3,3,3,3),i))));return SIMD.Float32x4.store(e,12,h),e},o.scalar.multiply=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8],p=t[9],f=t[10],h=t[11],m=t[12],y=t[13],g=t[14],v=t[15],b=n[0],_=n[1],w=n[2],x=n[3];return e[0]=b*r+_*s+w*d+x*m,e[1]=b*o+_*l+w*p+x*y,e[2]=b*a+_*u+w*f+x*g,e[3]=b*i+_*c+w*h+x*v,b=n[4],_=n[5],w=n[6],x=n[7],e[4]=b*r+_*s+w*d+x*m,e[5]=b*o+_*l+w*p+x*y,e[6]=b*a+_*u+w*f+x*g,e[7]=b*i+_*c+w*h+x*v,b=n[8],_=n[9],w=n[10],x=n[11],e[8]=b*r+_*s+w*d+x*m,e[9]=b*o+_*l+w*p+x*y,e[10]=b*a+_*u+w*f+x*g,e[11]=b*i+_*c+w*h+x*v,b=n[12],_=n[13],w=n[14],x=n[15],e[12]=b*r+_*s+w*d+x*m,e[13]=b*o+_*l+w*p+x*y,e[14]=b*a+_*u+w*f+x*g,e[15]=b*i+_*c+w*h+x*v,e},o.multiply=r.USE_SIMD?o.SIMD.multiply:o.scalar.multiply,o.mul=o.multiply,o.scalar.translate=function(e,t,n){var r,o,a,i,s,l,u,c,d,p,f,h,m=n[0],y=n[1],g=n[2];return t===e?(e[12]=t[0]*m+t[4]*y+t[8]*g+t[12],e[13]=t[1]*m+t[5]*y+t[9]*g+t[13],e[14]=t[2]*m+t[6]*y+t[10]*g+t[14],e[15]=t[3]*m+t[7]*y+t[11]*g+t[15]):(r=t[0],o=t[1],a=t[2],i=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8],p=t[9],f=t[10],h=t[11],e[0]=r,e[1]=o,e[2]=a,e[3]=i,e[4]=s,e[5]=l,e[6]=u,e[7]=c,e[8]=d,e[9]=p,e[10]=f,e[11]=h,e[12]=r*m+s*y+d*g+t[12],e[13]=o*m+l*y+p*g+t[13],e[14]=a*m+u*y+f*g+t[14],e[15]=i*m+c*y+h*g+t[15]),e},o.SIMD.translate=function(e,t,n){var r=SIMD.Float32x4.load(t,0),o=SIMD.Float32x4.load(t,4),a=SIMD.Float32x4.load(t,8),i=SIMD.Float32x4.load(t,12),s=SIMD.Float32x4(n[0],n[1],n[2],0);t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11]),r=SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(s,0,0,0,0)),o=SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(s,1,1,1,1)),a=SIMD.Float32x4.mul(a,SIMD.Float32x4.swizzle(s,2,2,2,2));var l=SIMD.Float32x4.add(r,SIMD.Float32x4.add(o,SIMD.Float32x4.add(a,i)));return SIMD.Float32x4.store(e,12,l),e},o.translate=r.USE_SIMD?o.SIMD.translate:o.scalar.translate,o.scalar.scale=function(e,t,n){var r=n[0],o=n[1],a=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*o,e[5]=t[5]*o,e[6]=t[6]*o,e[7]=t[7]*o,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},o.SIMD.scale=function(e,t,n){var r,o,a,i=SIMD.Float32x4(n[0],n[1],n[2],0);return r=SIMD.Float32x4.load(t,0),SIMD.Float32x4.store(e,0,SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(i,0,0,0,0))),o=SIMD.Float32x4.load(t,4),SIMD.Float32x4.store(e,4,SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(i,1,1,1,1))),a=SIMD.Float32x4.load(t,8),SIMD.Float32x4.store(e,8,SIMD.Float32x4.mul(a,SIMD.Float32x4.swizzle(i,2,2,2,2))),e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},o.scale=r.USE_SIMD?o.SIMD.scale:o.scalar.scale,o.rotate=function(e,t,n,o){var a,i,s,l,u,c,d,p,f,h,m,y,g,v,b,_,w,x,S,C,k,E,M,A,T=o[0],O=o[1],P=o[2],j=Math.sqrt(T*T+O*O+P*P);return Math.abs(j)<r.EPSILON?null:(j=1/j,T*=j,O*=j,P*=j,a=Math.sin(n),i=Math.cos(n),s=1-i,l=t[0],u=t[1],c=t[2],d=t[3],p=t[4],f=t[5],h=t[6],m=t[7],y=t[8],g=t[9],v=t[10],b=t[11],_=T*T*s+i,w=O*T*s+P*a,x=P*T*s-O*a,S=T*O*s-P*a,C=O*O*s+i,k=P*O*s+T*a,E=T*P*s+O*a,M=O*P*s-T*a,A=P*P*s+i,e[0]=l*_+p*w+y*x,e[1]=u*_+f*w+g*x,e[2]=c*_+h*w+v*x,e[3]=d*_+m*w+b*x,e[4]=l*S+p*C+y*k,e[5]=u*S+f*C+g*k,e[6]=c*S+h*C+v*k,e[7]=d*S+m*C+b*k,e[8]=l*E+p*M+y*A,e[9]=u*E+f*M+g*A,e[10]=c*E+h*M+v*A,e[11]=d*E+m*M+b*A,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)},o.scalar.rotateX=function(e,t,n){var r=Math.sin(n),o=Math.cos(n),a=t[4],i=t[5],s=t[6],l=t[7],u=t[8],c=t[9],d=t[10],p=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*o+u*r,e[5]=i*o+c*r,e[6]=s*o+d*r,e[7]=l*o+p*r,e[8]=u*o-a*r,e[9]=c*o-i*r,e[10]=d*o-s*r,e[11]=p*o-l*r,e},o.SIMD.rotateX=function(e,t,n){var r=SIMD.Float32x4.splat(Math.sin(n)),o=SIMD.Float32x4.splat(Math.cos(n));t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);var a=SIMD.Float32x4.load(t,4),i=SIMD.Float32x4.load(t,8);return SIMD.Float32x4.store(e,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(a,o),SIMD.Float32x4.mul(i,r))),SIMD.Float32x4.store(e,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,o),SIMD.Float32x4.mul(a,r))),e},o.rotateX=r.USE_SIMD?o.SIMD.rotateX:o.scalar.rotateX,o.scalar.rotateY=function(e,t,n){var r=Math.sin(n),o=Math.cos(n),a=t[0],i=t[1],s=t[2],l=t[3],u=t[8],c=t[9],d=t[10],p=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*o-u*r,e[1]=i*o-c*r,e[2]=s*o-d*r,e[3]=l*o-p*r,e[8]=a*r+u*o,e[9]=i*r+c*o,e[10]=s*r+d*o,e[11]=l*r+p*o,e},o.SIMD.rotateY=function(e,t,n){var r=SIMD.Float32x4.splat(Math.sin(n)),o=SIMD.Float32x4.splat(Math.cos(n));t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);var a=SIMD.Float32x4.load(t,0),i=SIMD.Float32x4.load(t,8);return SIMD.Float32x4.store(e,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,o),SIMD.Float32x4.mul(i,r))),SIMD.Float32x4.store(e,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(a,r),SIMD.Float32x4.mul(i,o))),e},o.rotateY=r.USE_SIMD?o.SIMD.rotateY:o.scalar.rotateY,o.scalar.rotateZ=function(e,t,n){var r=Math.sin(n),o=Math.cos(n),a=t[0],i=t[1],s=t[2],l=t[3],u=t[4],c=t[5],d=t[6],p=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*o+u*r,e[1]=i*o+c*r,e[2]=s*o+d*r,e[3]=l*o+p*r,e[4]=u*o-a*r,e[5]=c*o-i*r,e[6]=d*o-s*r,e[7]=p*o-l*r,e},o.SIMD.rotateZ=function(e,t,n){var r=SIMD.Float32x4.splat(Math.sin(n)),o=SIMD.Float32x4.splat(Math.cos(n));t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);var a=SIMD.Float32x4.load(t,0),i=SIMD.Float32x4.load(t,4);return SIMD.Float32x4.store(e,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(a,o),SIMD.Float32x4.mul(i,r))),SIMD.Float32x4.store(e,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,o),SIMD.Float32x4.mul(a,r))),e},o.rotateZ=r.USE_SIMD?o.SIMD.rotateZ:o.scalar.rotateZ,o.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},o.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.fromRotation=function(e,t,n){var o,a,i,s=n[0],l=n[1],u=n[2],c=Math.sqrt(s*s+l*l+u*u);return Math.abs(c)<r.EPSILON?null:(c=1/c,s*=c,l*=c,u*=c,o=Math.sin(t),a=Math.cos(t),i=1-a,e[0]=s*s*i+a,e[1]=l*s*i+u*o,e[2]=u*s*i-l*o,e[3]=0,e[4]=s*l*i-u*o,e[5]=l*l*i+a,e[6]=u*l*i+s*o,e[7]=0,e[8]=s*u*i+l*o,e[9]=l*u*i-s*o,e[10]=u*u*i+a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)},o.fromXRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.fromYRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.fromZRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.fromRotationTranslation=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=t[3],s=r+r,l=o+o,u=a+a,c=r*s,d=r*l,p=r*u,f=o*l,h=o*u,m=a*u,y=i*s,g=i*l,v=i*u;return e[0]=1-(f+m),e[1]=d+v,e[2]=p-g,e[3]=0,e[4]=d-v,e[5]=1-(c+m),e[6]=h+y,e[7]=0,e[8]=p+g,e[9]=h-y,e[10]=1-(c+f),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e},o.getTranslation=function(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e},o.getRotation=function(e,t){var n=t[0]+t[5]+t[10],r=0;return n>0?(r=2*Math.sqrt(n+1),e[3]=.25*r,e[0]=(t[6]-t[9])/r,e[1]=(t[8]-t[2])/r,e[2]=(t[1]-t[4])/r):t[0]>t[5]&t[0]>t[10]?(r=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/r,e[0]=.25*r,e[1]=(t[1]+t[4])/r,e[2]=(t[8]+t[2])/r):t[5]>t[10]?(r=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/r,e[0]=(t[1]+t[4])/r,e[1]=.25*r,e[2]=(t[6]+t[9])/r):(r=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/r,e[0]=(t[8]+t[2])/r,e[1]=(t[6]+t[9])/r,e[2]=.25*r),e},o.fromRotationTranslationScale=function(e,t,n,r){var o=t[0],a=t[1],i=t[2],s=t[3],l=o+o,u=a+a,c=i+i,d=o*l,p=o*u,f=o*c,h=a*u,m=a*c,y=i*c,g=s*l,v=s*u,b=s*c,_=r[0],w=r[1],x=r[2];return e[0]=(1-(h+y))*_,e[1]=(p+b)*_,e[2]=(f-v)*_,e[3]=0,e[4]=(p-b)*w,e[5]=(1-(d+y))*w,e[6]=(m+g)*w,e[7]=0,e[8]=(f+v)*x,e[9]=(m-g)*x,e[10]=(1-(d+h))*x,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e},o.fromRotationTranslationScaleOrigin=function(e,t,n,r,o){var a=t[0],i=t[1],s=t[2],l=t[3],u=a+a,c=i+i,d=s+s,p=a*u,f=a*c,h=a*d,m=i*c,y=i*d,g=s*d,v=l*u,b=l*c,_=l*d,w=r[0],x=r[1],S=r[2],C=o[0],k=o[1],E=o[2];return e[0]=(1-(m+g))*w,e[1]=(f+_)*w,e[2]=(h-b)*w,e[3]=0,e[4]=(f-_)*x,e[5]=(1-(p+g))*x,e[6]=(y+v)*x,e[7]=0,e[8]=(h+b)*S,e[9]=(y-v)*S,e[10]=(1-(p+m))*S,e[11]=0,e[12]=n[0]+C-(e[0]*C+e[4]*k+e[8]*E),e[13]=n[1]+k-(e[1]*C+e[5]*k+e[9]*E),e[14]=n[2]+E-(e[2]*C+e[6]*k+e[10]*E),e[15]=1,e},o.fromQuat=function(e,t){var n=t[0],r=t[1],o=t[2],a=t[3],i=n+n,s=r+r,l=o+o,u=n*i,c=r*i,d=r*s,p=o*i,f=o*s,h=o*l,m=a*i,y=a*s,g=a*l;return e[0]=1-d-h,e[1]=c+g,e[2]=p-y,e[3]=0,e[4]=c-g,e[5]=1-u-h,e[6]=f+m,e[7]=0,e[8]=p+y,e[9]=f-m,e[10]=1-u-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.frustum=function(e,t,n,r,o,a,i){var s=1/(n-t),l=1/(o-r),u=1/(a-i);return e[0]=2*a*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*a*l,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(o+r)*l,e[10]=(i+a)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=i*a*2*u,e[15]=0,e},o.perspective=function(e,t,n,r,o){var a=1/Math.tan(t/2),i=1/(r-o);return e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(o+r)*i,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*o*r*i,e[15]=0,e},o.perspectiveFromFieldOfView=function(e,t,n,r){var o=Math.tan(t.upDegrees*Math.PI/180),a=Math.tan(t.downDegrees*Math.PI/180),i=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),l=2/(i+s),u=2/(o+a);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=u,e[6]=0,e[7]=0,e[8]=-(i-s)*l*.5,e[9]=(o-a)*u*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e},o.ortho=function(e,t,n,r,o,a,i){var s=1/(t-n),l=1/(r-o),u=1/(a-i);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+n)*s,e[13]=(o+r)*l,e[14]=(i+a)*u,e[15]=1,e},o.lookAt=function(e,t,n,a){var i,s,l,u,c,d,p,f,h,m,y=t[0],g=t[1],v=t[2],b=a[0],_=a[1],w=a[2],x=n[0],S=n[1],C=n[2];return Math.abs(y-x)<r.EPSILON&&Math.abs(g-S)<r.EPSILON&&Math.abs(v-C)<r.EPSILON?o.identity(e):(p=y-x,f=g-S,h=v-C,m=1/Math.sqrt(p*p+f*f+h*h),p*=m,f*=m,h*=m,i=_*h-w*f,s=w*p-b*h,l=b*f-_*p,m=Math.sqrt(i*i+s*s+l*l),m?(m=1/m,i*=m,s*=m,l*=m):(i=0,s=0,l=0),u=f*l-h*s,c=h*i-p*l,d=p*s-f*i,m=Math.sqrt(u*u+c*c+d*d),m?(m=1/m,u*=m,c*=m,d*=m):(u=0,c=0,d=0),e[0]=i,e[1]=u,e[2]=p,e[3]=0,e[4]=s,e[5]=c,e[6]=f,e[7]=0,e[8]=l,e[9]=d,e[10]=h,e[11]=0,e[12]=-(i*y+s*g+l*v),e[13]=-(u*y+c*g+d*v),e[14]=-(p*y+f*g+h*v),e[15]=1,e)},o.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},o.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))},o.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e},o.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e},o.sub=o.subtract,o.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e},o.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e[9]=t[9]+n[9]*r,e[10]=t[10]+n[10]*r,e[11]=t[11]+n[11]*r,e[12]=t[12]+n[12]*r,e[13]=t[13]+n[13]*r,e[14]=t[14]+n[14]*r,e[15]=t[15]+n[15]*r,e},o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},o.equals=function(e,t){var n=e[0],o=e[1],a=e[2],i=e[3],s=e[4],l=e[5],u=e[6],c=e[7],d=e[8],p=e[9],f=e[10],h=e[11],m=e[12],y=e[13],g=e[14],v=e[15],b=t[0],_=t[1],w=t[2],x=t[3],S=t[4],C=t[5],k=t[6],E=t[7],M=t[8],A=t[9],T=t[10],O=t[11],P=t[12],j=t[13],I=t[14],D=t[15];return Math.abs(n-b)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(o-_)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(a-w)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(i-x)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(s-S)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(l-C)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(C))&&Math.abs(u-k)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(k))&&Math.abs(c-E)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(E))&&Math.abs(d-M)<=r.EPSILON*Math.max(1,Math.abs(d),Math.abs(M))&&Math.abs(p-A)<=r.EPSILON*Math.max(1,Math.abs(p),Math.abs(A))&&Math.abs(f-T)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(T))&&Math.abs(h-O)<=r.EPSILON*Math.max(1,Math.abs(h),Math.abs(O))&&Math.abs(m-P)<=r.EPSILON*Math.max(1,Math.abs(m),Math.abs(P))&&Math.abs(y-j)<=r.EPSILON*Math.max(1,Math.abs(y),Math.abs(j))&&Math.abs(g-I)<=r.EPSILON*Math.max(1,Math.abs(g),Math.abs(I))&&Math.abs(v-D)<=r.EPSILON*Math.max(1,Math.abs(v),Math.abs(D))},e.exports=o},function(e,t,n){var r=n(1),o=n(7),a=n(8),i=n(9),s={};s.create=function(){var e=new r.ARRAY_TYPE(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},s.rotationTo=function(){var e=a.create(),t=a.fromValues(1,0,0),n=a.fromValues(0,1,0);return function(r,o,i){var l=a.dot(o,i);return l<-.999999?(a.cross(e,t,o),a.length(e)<1e-6&&a.cross(e,n,o),a.normalize(e,e),s.setAxisAngle(r,e,Math.PI),r):l>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(a.cross(e,o,i),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=1+l,s.normalize(r,r))}}(),s.setAxes=function(){var e=o.create();return function(t,n,r,o){return e[0]=r[0],e[3]=r[1],e[6]=r[2],e[1]=o[0],e[4]=o[1],e[7]=o[2],e[2]=-n[0],e[5]=-n[1],e[8]=-n[2],s.normalize(t,s.fromMat3(t,e))}}(),s.clone=i.clone,s.fromValues=i.fromValues,s.copy=i.copy,s.set=i.set,s.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},s.setAxisAngle=function(e,t,n){n*=.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e},s.getAxisAngle=function(e,t){var n=2*Math.acos(t[3]),r=Math.sin(n/2);return 0!=r?(e[0]=t[0]/r,e[1]=t[1]/r,e[2]=t[2]/r):(e[0]=1,e[1]=0,e[2]=0),n},s.add=i.add,s.multiply=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=t[3],s=n[0],l=n[1],u=n[2],c=n[3];return e[0]=r*c+i*s+o*u-a*l,e[1]=o*c+i*l+a*s-r*u,e[2]=a*c+i*u+r*l-o*s,e[3]=i*c-r*s-o*l-a*u,e},s.mul=s.multiply,s.scale=i.scale,s.rotateX=function(e,t,n){n*=.5;var r=t[0],o=t[1],a=t[2],i=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+i*s,e[1]=o*l+a*s,e[2]=a*l-o*s,e[3]=i*l-r*s,e},s.rotateY=function(e,t,n){n*=.5;var r=t[0],o=t[1],a=t[2],i=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l-a*s,e[1]=o*l+i*s,e[2]=a*l+r*s,e[3]=i*l-o*s,e},s.rotateZ=function(e,t,n){n*=.5;var r=t[0],o=t[1],a=t[2],i=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+o*s,e[1]=o*l-r*s,e[2]=a*l+i*s,e[3]=i*l-a*s,e},s.calculateW=function(e,t){var n=t[0],r=t[1],o=t[2];return e[0]=n,e[1]=r,e[2]=o,e[3]=Math.sqrt(Math.abs(1-n*n-r*r-o*o)),e},s.dot=i.dot,s.lerp=i.lerp,s.slerp=function(e,t,n,r){var o,a,i,s,l,u=t[0],c=t[1],d=t[2],p=t[3],f=n[0],h=n[1],m=n[2],y=n[3];return a=u*f+c*h+d*m+p*y,a<0&&(a=-a,f=-f,h=-h,m=-m,y=-y),1-a>1e-6?(o=Math.acos(a),i=Math.sin(o),s=Math.sin((1-r)*o)/i,l=Math.sin(r*o)/i):(s=1-r,l=r),e[0]=s*u+l*f,e[1]=s*c+l*h,e[2]=s*d+l*m,e[3]=s*p+l*y,e},s.sqlerp=function(){var e=s.create(),t=s.create();return function(n,r,o,a,i,l){return s.slerp(e,r,i,l),s.slerp(t,o,a,l),s.slerp(n,e,t,2*l*(1-l)),n}}(),s.invert=function(e,t){var n=t[0],r=t[1],o=t[2],a=t[3],i=n*n+r*r+o*o+a*a,s=i?1/i:0;return e[0]=-n*s,e[1]=-r*s,e[2]=-o*s,e[3]=a*s,e},s.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},s.length=i.length,s.len=s.length,s.squaredLength=i.squaredLength,s.sqrLen=s.squaredLength,s.normalize=i.normalize,s.fromMat3=function(e,t){var n,r=t[0]+t[4]+t[8];if(r>0)n=Math.sqrt(r+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{var o=0;t[4]>t[0]&&(o=1),t[8]>t[3*o+o]&&(o=2);var a=(o+1)%3,i=(o+2)%3;n=Math.sqrt(t[3*o+o]-t[3*a+a]-t[3*i+i]+1),e[o]=.5*n,n=.5/n,e[3]=(t[3*a+i]-t[3*i+a])*n,e[a]=(t[3*a+o]+t[3*o+a])*n,e[i]=(t[3*i+o]+t[3*o+i])*n}return e},s.str=function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},s.exactEquals=i.exactEquals,s.equals=i.equals,e.exports=s},function(e,t,n){var r=n(1),o={};o.create=function(){var e=new r.ARRAY_TYPE(2);return e[0]=0,e[1]=0,e},o.clone=function(e){var t=new r.ARRAY_TYPE(2);return t[0]=e[0],t[1]=e[1],t},o.fromValues=function(e,t){var n=new r.ARRAY_TYPE(2);return n[0]=e,n[1]=t,n},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e},o.set=function(e,t,n){return e[0]=t,e[1]=n,e},o.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e},o.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e},o.sub=o.subtract,o.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e},o.mul=o.multiply,o.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e},o.div=o.divide,o.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e},o.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e},o.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e},o.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e},o.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e},o.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e},o.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e},o.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)},o.dist=o.distance,o.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r},o.sqrDist=o.squaredDistance,o.length=function(e){var t=e[0],n=e[1];return Math.sqrt(t*t+n*n)},o.len=o.length,o.squaredLength=function(e){var t=e[0],n=e[1];return t*t+n*n},o.sqrLen=o.squaredLength,o.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e},o.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e},o.normalize=function(e,t){var n=t[0],r=t[1],o=n*n+r*r;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o),e},o.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},o.cross=function(e,t,n){var r=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=r,e},o.lerp=function(e,t,n,r){var o=t[0],a=t[1];return e[0]=o+r*(n[0]-o),e[1]=a+r*(n[1]-a),e},o.random=function(e,t){t=t||1;var n=2*r.RANDOM()*Math.PI;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e},o.transformMat2=function(e,t,n){var r=t[0],o=t[1];return e[0]=n[0]*r+n[2]*o,e[1]=n[1]*r+n[3]*o,e},o.transformMat2d=function(e,t,n){var r=t[0],o=t[1];return e[0]=n[0]*r+n[2]*o+n[4],e[1]=n[1]*r+n[3]*o+n[5],e},o.transformMat3=function(e,t,n){var r=t[0],o=t[1];return e[0]=n[0]*r+n[3]*o+n[6],e[1]=n[1]*r+n[4]*o+n[7],e},o.transformMat4=function(e,t,n){var r=t[0],o=t[1];return e[0]=n[0]*r+n[4]*o+n[12],e[1]=n[1]*r+n[5]*o+n[13],e},o.forEach=function(){var e=o.create();return function(t,n,r,o,a,i){var s,l;for(n||(n=2),r||(r=0),l=o?Math.min(o*n+r,t.length):t.length,s=r;s<l;s+=n)e[0]=t[s],e[1]=t[s+1],a(e,e,i),t[s]=e[0],t[s+1]=e[1];return t}}(),o.str=function(e){return"vec2("+e[0]+", "+e[1]+")"},o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]},o.equals=function(e,t){var n=e[0],o=e[1],a=t[0],i=t[1];return Math.abs(n-a)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(o-i)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(i))},e.exports=o},function(e,t){e.exports=function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg",e);for(var r in t)t.hasOwnProperty(r)&&n.setAttribute(r,t[r]);return n}},function(e,t,n){var r=function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg",e);for(var r in t)t.hasOwnProperty(r)&&n.setAttribute(r,t[r]);return n},o=n(3),a=function(e){if(e.indexOf("rgb(")>-1)return{rgb:e,opacity:1};var t=o(e);return{rgb:"rgb("+255*t[0]+","+255*t[1]+","+255*t[2]+")",opacity:t[3]}},i=function(e,t,n){var o=a(e.stroke),i=a(e.fill);return r("rect",{width:e.width,height:e.height,x:parseFloat(e.x)+t,y:parseFloat(e.y)+n,stroke:o.rgb,"stroke-opacity":o.opacity,"stroke-width":e["stroke-width"],fill:i.rgb,"fill-opacity":i.opacity})},s=function(e,t,n){var o=a(e.stroke),i=a(e.fill);return r("polygon",{points:[[parseFloat(e.x1)+t,parseFloat(e.y1)+n],[parseFloat(e.x2)+t,parseFloat(e.y2)+n],[parseFloat(e.x3)+t,parseFloat(e.y3)+n]].map(function(e){return e[0]+","+e[1]}).join(" "),stroke:o.rgb,"stroke-opacity":o.opacity,"stroke-width":e["stroke-width"],fill:i.rgb,"fill-opacity":i.opacity})},l=function(e,t,n){var o=a(e.stroke),i=a(e.fill);return r("ellipse",{rx:parseFloat(e.width)/2,height:parseFloat(e.height)/2,cx:parseFloat(e.x)+t,cy:parseFloat(e.y)+n,stroke:o.rgb,"stroke-opacity":o.opacity,"stroke-width":e["stroke-width"],fill:i.rgb,"fill-opacity":i.opacity})},u=function(e,t,n){var o=a(e.stroke);return r("line",{x1:parseFloat(e.x1)+t,y1:parseFloat(e.y1)+n,x2:parseFloat(e.x2)+t,y2:parseFloat(e.y2)+n,stroke:o.rgb,"stroke-opacity":o.opacity,"stroke-width":e["stroke-width"]})};e.exports=function(e,t,n){var r=e.type;return"rectangle"===r?i(e,t,n):"triangle"===r?s(e,t,n):"ellipse"===r?l(e,t,n):"line"===r?u(e,t,n):void 0}},function(e,t){var n=Math.sqrt(2)/2,r=function(e){var t=[0,0,0,1];if("#"===e[0]){e="rgba("+parseInt(e[1]+e[2],16)+","+parseInt(e[3]+e[4],16)+","+parseInt(e[5]+e[6],16)+",1)"}var n=e.match(/^[\s]*rgba\([\s]*([0-9]+)[\s]*,[\s]*([0-9]+)[\s]*,[\s]*([0-9]+)[\s]*,[\s]*([0-9.]+)[\s]*\)[\s]*$/);return n&&5===n.length&&(t=[parseFloat(n[1])/255,parseFloat(n[2])/255,parseFloat(n[3])/255,parseFloat(n[4])]),t},o=function(e,t,n){var o=parseFloat(e.x),a=parseFloat(e.y),i=parseFloat(e.height),s=parseFloat(e.width),l=r(e.fill);n([o,a,t],l),n([o+s,a,t],l),n([o+s,a+i,t],l),n([o,a,t],l),n([o+s,a+i,t],l),n([o,a+i,t],l);var u=parseFloat(e["stroke-width"]);if(u>0){var c=r(e.stroke);n([o,a,t],c),n([o+u,a,t],c),n([o+u,a+i,t],c),n([o,a,t],c),n([o+u,a+i,t],c),n([o,a+i,t],c),n([o+s,a,t],c),n([o+s-u,a,t],c),n([o+s-u,a+i,t],c),n([o+s,a,t],c),n([o+s-u,a+i,t],c),n([o+s,a+i,t],c),n([o,a,t],c),n([o+s,a,t],c),n([o+s,a+u,t],c),n([o,a,t],c),n([o+s,a+u,t],c),n([o,a+u,t],c),n([o,a+i,t],c),n([o+s,a+i,t],c),n([o+s,a+i-u,t],c),n([o,a+i,t],c),n([o+s,a+i-u,t],c),n([o,a+i-u,t],c)}},a=function(e,t,n){var o=r(e.fill);n([parseFloat(e.x1),parseFloat(e.y1),t],o),n([parseFloat(e.x2),parseFloat(e.y2),t],o),n([parseFloat(e.x3),parseFloat(e.y3),t],o)},i=function(e,t,o){var a={x:parseFloat(e.x)+parseFloat(e.width)/2,y:parseFloat(e.y)+parseFloat(e.height)/2},i=parseFloat(e.width)/2,s=parseFloat(e.height)/2,l=r(e.fill);o([a.x,a.y,t],l),o([a.x+i,a.y,t],l),o([a.x+n*i,a.y+n*s,t],l),o([a.x,a.y,t],l),o([a.x+n*i,a.y+n*s,t],l),o([a.x,a.y+s,t],l),o([a.x,a.y,t],l),o([a.x,a.y+s,t],l),o([a.x-n*i,a.y+n*s,t],l),o([a.x,a.y,t],l),o([a.x-n*i,a.y+n*s,t],l),o([a.x-i,a.y,t],l),o([a.x,a.y,t],l),o([a.x-i,a.y,t],l),o([a.x-n*i,a.y-n*s,t],l),o([a.x,a.y,t],l),o([a.x-n*i,a.y-n*s,t],l),o([a.x,a.y-s,t],l),o([a.x,a.y,t],l),o([a.x,a.y-s,t],l),o([a.x+n*i,a.y-n*s,t],l),o([a.x,a.y,t],l),o([a.x+n*i,a.y-n*s,t],l),o([a.x+i,a.y,t],l)},s=function(e,t,n){var o=parseFloat(e.x1),a=parseFloat(e.x2),i=parseFloat(e.y1),s=parseFloat(e.y2);if(o!==a&&Math.min(o,a)===a){var l=o,u=i;o=a,i=s,a=l,s=u}var c=[s-i,o-a],d=Math.sqrt(c[0]*c[0]+c[1]*c[1]),p=[c[0]/d,c[1]/d],f=parseFloat(e["stroke-width"])/2,h=[p[0]*f,p[1]*f],m=[-1*h[0],-1*h[1]],y=[o+h[0],i+h[1]],g=[o+m[0],i+m[1]],v=[a+h[0],s+h[1]],b=[a+m[0],s+m[1]],_=r(e.stroke);n([y[0],y[1],t],_),n([g[0],g[1],t],_),n([v[0],v[1],t],_),n([v[0],v[1],t],_),n([b[0],b[1],t],_),n([g[0],g[1],t],_)};e.exports=function(e,t,n){var r=e.type;return"rectangle"===r?o(e,t,n):"triangle"===r?a(e,t,n):"ellipse"===r?i(e,t,n):"line"===r?s(e,t,n):void 0}},function(e,t,n){var r=n(2),o=n(0),a=function(){function e(e,n,r){this.supersampling_ratio=2,this.$canvas=e,this.base_font_size=14,this.model=n,this.tooltip=r,this.tooltip.center=!1,this.cell_tops={},this.cell_tops_view_space={},this.cell_heights={},this.cell_heights_view_space={},this.label_middles_view_space={},this.labels={},this.label_colors={},this.html_labels={},this.track_link_urls={},this.track_descriptions={},this.tracks=[],this.minimum_track_height=Number.POSITIVE_INFINITY,this.maximum_label_width=Number.NEGATIVE_INFINITY,this.maximum_label_length=18,this.rendering_suppressed=!1,this.highlighted_track=null,a(this),function(e){e.drag_callback=function(e,t){},e.dragged_label_track_id=null,e.drag_mouse_y=null,e.$canvas.on("mousedown",function(t){e.tooltip.hide();var r=d(e,t.offsetY);null!==r&&n.getContainingTrackGroup(r).length>1&&!n.isTrackInClusteredGroup(r)&&h(e,r,t.offsetY)}),e.$canvas.on("mousemove",function(r){if(null!==e.dragged_label_track_id){var a=n.getContainingTrackGroup(e.dragged_label_track_id),i=n.getLastExpansion(a[a.length-1]),l=e.track_tops[i]+n.getTrackHeight(i)-e.scroll_y,p=e.track_tops[a[0]]-5-e.scroll_y;e.drag_mouse_y=Math.min(r.pageY-e.$canvas.offset().top,l),e.drag_mouse_y=Math.max(e.drag_mouse_y,p),c(e)}else{var f=d(e,r.pageY-e.$canvas.offset().top);if(null!==f){var h=o("<div>"),m=e.$canvas.offset();(s(e,e.labels[f])||e.track_link_urls[f])&&h.append(u(e.labels[f],e.html_labels[f],e.track_link_urls[f]));var y=e.track_descriptions[f];y.length>0&&h.append(o("<div>").text(y)),n.isTrackInClusteredGroup(f)?(e.$canvas.css("cursor","not-allowed"),h.append("<b>dragging disabled for clustered tracks</b>")):n.getContainingTrackGroup(f).length>1&&(e.$canvas.css("cursor","move"),h.append("<b>hold to drag</b>")),e.tooltip.fadeIn(200,t(e,e.labels[f])+m.left,e.cell_tops[f]+m.top-e.scroll_y,h)}else e.$canvas.css("cursor","auto"),e.tooltip.hide()}}),e.$canvas.on("mouseup mouseleave",function(t){if(null!==e.dragged_label_track_id){var r=n.getContainingTrackGroup(e.dragged_label_track_id),o=p(e,r,t.offsetY,e.dragged_label_track_id);m(e,o)}e.tooltip.hideIfNotAlreadyGoingTo(150)})}(this)}var t=function(e,t){return e.ctx.measureText(l(e,t)).width/e.supersampling_ratio},n=function(e,t){if(!e.rendering_suppressed){e.scroll_y=t.getVertScroll(),e.track_tops=t.getZoomedTrackTops(),e.cell_tops=t.getCellTops(),e.cell_tops_view_space={},e.cell_heights={},e.tracks=t.getTracks(),e.track_descriptions={},e.ctx.font="bold "+e.getFontSize()+"px Arial",e.minimum_track_height=Number.POSITIVE_INFINITY,e.maximum_label_width=0;for(var n=0;n<e.tracks.length;n++){e.minimum_track_height=Math.min(e.minimum_track_height,t.getTrackHeight(e.tracks[n]));var r=l(e,e.labels[e.tracks[n]]);e.maximum_label_width=Math.max(e.maximum_label_width,e.ctx.measureText(r).width),e.cell_tops_view_space[e.tracks[n]]=e.cell_tops[e.tracks[n]]*e.supersampling_ratio-e.scroll_y*e.supersampling_ratio,e.track_descriptions[e.tracks[n]]=t.getTrackDescription(e.tracks[n]),e.cell_heights[e.tracks[n]]=t.getCellHeight(e.tracks[n]),e.cell_heights_view_space[e.tracks[n]]=e.cell_heights[e.tracks[n]]*e.supersampling_ratio,e.label_middles_view_space[e.tracks[n]]=e.cell_tops_view_space[e.tracks[n]]+e.cell_heights_view_space[e.tracks[n]]/2}}},a=function(e){e.ctx=e.$canvas[0].getContext("2d"),e.ctx.textAlign="start",e.ctx.textBaseline="middle"},i=function(e,t){if(!e.rendering_suppressed){var n=t.getCellViewHeight(),r=e.getWidth();e.$canvas[0].height=e.supersampling_ratio*n,e.$canvas[0].width=e.supersampling_ratio*r,e.$canvas[0].style.height=n+"px",e.$canvas[0].style.width=r+"px",a(e)}},s=function(e,t){return t.length>e.maximum_label_length},l=function(e,t){return s(e,t)?t.substring(0,e.maximum_label_length-3)+"...":t},u=function(e,t,n){var r;return r=n?o('<a target="_blank" rel="noopener noreferrer">').attr("href",n):o("<span>"),r.append(t||document.createTextNode(e)),o('<b style="display: block;">').append(r)},c=function(e){if(!e.rendering_suppressed){e.ctx.clearRect(0,0,e.$canvas[0].width,e.$canvas[0].height),null!==e.highlighted_track&&e.cell_tops_view_space.hasOwnProperty(e.highlighted_track)&&(e.ctx.fillStyle="rgba(255,255,0,0.4)",e.ctx.fillRect(0,e.cell_tops_view_space[e.highlighted_track],e.getWidth()*e.supersampling_ratio,e.cell_heights_view_space[e.highlighted_track]));var t=e.getFontSize();e.ctx.font="bold "+t+"px Arial",e.ctx.fillStyle="black";for(var n=e.tracks,r=0;r<n.length;r++)e.label_colors&&e.label_colors[n[r]]&&(e.ctx.fillStyle=e.label_colors[n[r]]),e.ctx.fillText(l(e,e.labels[n[r]]),0,e.label_middles_view_space[n[r]]);if(null!==e.dragged_label_track_id){e.ctx.fillStyle="rgba(255,0,0,0.95)",e.ctx.fillText(l(e,e.labels[e.dragged_label_track_id]),0,e.supersampling_ratio*e.drag_mouse_y),e.ctx.fillStyle="rgba(0,0,0,0.15)";var o,a,i=e.model.getContainingTrackGroup(e.dragged_label_track_id),s=e.model.getLastExpansion(p(e,i,e.drag_mouse_y,null)),u=f(e,i,e.drag_mouse_y,null);if(s===e.dragged_label_track_id||u===e.dragged_label_track_id)return;null!==s&&null!==u?(o=e.cell_tops_view_space[s]+e.cell_heights_view_space[s],a=e.cell_tops_view_space[u]-o):null===s?(o=e.cell_tops_view_space[i[0]]-e.ctx.measureText("m").width,a=e.ctx.measureText("m").width):null===u&&(o=e.cell_tops_view_space[s]+e.cell_heights_view_space[s],a=e.ctx.measureText("m").width);a=Math.max(a,4),e.ctx.fillRect(0,o,e.getWidth()*e.supersampling_ratio,a)}}},d=function(e,t){var n=p(e,e.tracks,t,null);return null===n?null:t<=e.cell_tops[n]-e.scroll_y+e.cell_heights[n]?n:null},p=function(e,t,n,r){if(n<e.cell_tops[t[0]]-e.scroll_y)return null;for(var o=null,a=0;a<t.length;a++)if(null===r||r!==t[a]){if(e.cell_tops[t[a]]-e.scroll_y>n)break;o=t[a]}return o},f=function(e,t,n,r){if(n>e.cell_tops[t[t.length-1]]-e.scroll_y)return null;for(var o=null,a=t.length-1;a>=0;a--)if(null===r||r!==t[a]){if(e.cell_tops[t[a]]-e.scroll_y<n)break;o=t[a]}return o},h=function(e,t,n){e.dragged_label_track_id=t,e.drag_mouse_y=n,c(e)},m=function(e,t){e.drag_callback(e.dragged_label_track_id,t),e.dragged_label_track_id=null,c(e)};return e.prototype.getWidth=function(){return Math.max(this.maximum_label_width/this.supersampling_ratio+10,70)},e.prototype.getFontSize=function(e){return(e?1:this.supersampling_ratio)*Math.max(Math.min(this.base_font_size,this.minimum_track_height),7)},e.prototype.setDragCallback=function(e){this.drag_callback=e},e.prototype.removeTrack=function(e,t){n(this,e),i(this,e),c(this,e)},e.prototype.moveTrack=function(e){n(this,e),i(this,e),c(this,e)},e.prototype.setTrackGroupOrder=function(e){n(this,e),i(this,e),c(this,e)},e.prototype.addTracks=function(e,t){for(var r=0;r<t.length;r++)this.labels[t[r]]=e.getTrackLabel(t[r]),this.label_colors[t[r]]=e.getTrackLabelColor(t[r]),this.html_labels[t[r]]=e.getOptionalHtmlTrackLabel(t[r]),this.track_link_urls[t[r]]=e.getTrackLinkUrl(t[r]);n(this,e),i(this,e),c(this,e)},e.prototype.setScroll=function(e){this.setVertScroll(e)},e.prototype.setHorzScroll=function(e){},e.prototype.setViewport=function(e){this.setVertScroll(e)},e.prototype.setVertScroll=function(e){n(this,e),i(this,e),c(this,e)},e.prototype.setVertZoom=function(e){n(this,e),i(this,e),c(this,e)},e.prototype.setZoom=function(e){this.setVertZoom(e)},e.prototype.highlightTrack=function(e,t){this.highlighted_track=e,c(this,t)},e.prototype.suppressRendering=function(){this.rendering_suppressed=!0},e.prototype.releaseRendering=function(e){this.rendering_suppressed=!1,n(this,e),i(this,e),c(this)},e.prototype.toSVGGroup=function(e,t,n,o){for(var a=r.group(n||0,o||0),i=e.getCellTops(),s=e.getTracks(),u=0;u<s.length;u++){var c=s[u],d=i[c]+e.getCellHeight(c)/2,p=e.getTrackLabel(c),f=r.text(t?p:l(this,p),0,d,this.getFontSize(!0),"Arial","bold","bottom");f.setAttribute("dy","0.35em"),a.appendChild(f)}return a},e}();e.exports=a},function(e,t,n){function r(e,t){return void 0===e?t:e}function o(){var e=0;return function(){return e+=1}}function a(e){for(var t=[],n=0;n<e;n++)t.push(n);return t}function i(e){e=e||[];for(var t=["#3366cc","#dc3912","#ff9900","#109618","#990099","#0099c6","#dd4477","#66aa00","#b82e2e","#316395","#994499","#22aa99","#aaaa11","#6633cc","#e67300","#8b0707","#651067","#329262","#5574a6","#3b3eac","#b77322","#16d620","#b91383","#f4359e","#9c5935","#a9c413","#2a778d","#668d1c","#bea413","#0c5922","#743411"],n=0,r={},o=0;o<e.length;o++)r[e[o]]=!0;return function(){for(var e=t[n%t.length];r[e];){var o=y(e);if(o===e)break;e=o}return r[e]=!0,n+=1,e}}function s(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n}function l(e){return Object.keys(e).map(function(t){return e[t]})}var u=n(10),c=(n(3),n(30)),d=n(4),p=function(e){return[{type:"rectangle",fill:"rgba(255,255,255,1)",z:e},{type:"line",stroke:"rgba(190,190,190,1)","stroke-width":"1",x1:"0%",x2:"100%",y1:"50%",y2:"50%",z:e}]},f="na",h="No data",m=function(e){var t,n,r,o=e.match(/^[\s]*rgba\([\s]*([0-9]+)[\s]*,[\s]*([0-9]+)[\s]*,[\s]*([0-9]+)[\s]*,[\s]*([0-9.]+)[\s]*\)[\s]*$/);if(o&&5===o.length)return t=parseInt(o[1]).toString(16),n=parseInt(o[2]).toString(16),r=parseInt(o[3]).toString(16),1===t.length&&(t="0"+t),1===n.length&&(n="0"+n),1===r.length&&(r="0"+r),"#"+t+n+r;var a=e.match(/^[\s]*rgb\([\s]*([0-9]+)[\s]*,[\s]*([0-9]+)[\s]*,[\s]*([0-9]+)[\s]*\)[\s]*$/);return a&&4===a.length?(t=parseInt(a[1]).toString(16),n=parseInt(a[2]).toString(16),r=parseInt(a[3]).toString(16),1===t.length&&(t="0"+t),1===n.length&&(n="0"+n),1===r.length&&(r="0"+r),"#"+t+n+r):e},y=function(e){var t=e[1]+e[2],n=e[3]+e[4],r=e[5]+e[6],o=function(e){return e=parseInt(e,16),e*=.95,e=Math.round(e),e=e.toString(16),1===e.length&&(e="0"+e),e};return t=o(t),n=o(n),r=o(r),"#"+t+n+r},g=function(){function e(e){this.rule_set_id=t(),this.legend_label=e.legend_label,this.legend_base_color=e.legend_base_color,this.exclude_from_legend=e.exclude_from_legend,this.active_rule_ids={},this.rules_with_id=[]}var t=o(),n=o();return e.prototype.getLegendLabel=function(){return this.legend_label},e.prototype.getRuleSetId=function(){return this.rule_set_id},e.prototype.addRules=function(e){var t=this;return e.map(function(e){return t.addRule(e)})},e.prototype.addRule=function(e,t){return void 0===t&&(t=n()),this.rules_with_id.push({id:t,rule:new E(e)}),t},e.prototype.removeRule=function(e){for(var t=-1,n=0;n<this.rules_with_id.length;n++)if(this.rules_with_id[n].id===e){t=n;break}t>-1&&this.rules_with_id.splice(t,1),delete this.active_rule_ids[e]},e.prototype.getRuleWithId=function(e){for(var t=null,n=0;n<this.rules_with_id.length;n++)if(this.rules_with_id[n].id===e){t=this.rules_with_id[n];break}return t},e.prototype.isExcludedFromLegend=function(){return this.exclude_from_legend},e.prototype.getRecentlyUsedRules=function(){var e=this;return Object.keys(this.active_rule_ids).map(function(t){return e.getRule(t)})},e.prototype.applyRulesToDatum=function(e,t,n,r){for(var o=[],a=e.length,i=0;i<a;i++)o=o.concat(e[i].rule.apply(t,n,r));return o},e.prototype.apply=function(e,t,n,r){for(var o=[],a=0;a<e.length;a++){var i=this.getRulesWithId(e[a]);if(void 0!==r)for(var s=0;s<i.length;s++)r[i[s].id]=!0;o.push(this.applyRulesToDatum(i,e[a],t,n))}return o},e}(),v=function(){function e(e){g.call(this,e),this.lookup_map_by_key_and_value={},this.lookup_map_by_key={},this.universal_rules=[],this.rule_id_to_conditions={}}e.prototype=Object.create(g.prototype),e.prototype.getRulesWithId=function(e){if(void 0===e)return this.rules_with_id;var t=[];t=t.concat(this.universal_rules);for(var n in e)if(void 0!==e[n]){var r=this.lookup_map_by_key[n];void 0!==r&&t.push(r);var o=this.lookup_map_by_key_and_value[n]&&this.lookup_map_by_key_and_value[n][e[n]]||void 0;void 0!==o&&t.push(o)}return t};var t=function(e,t,n,r){null===t?e.universal_rules.push(r):null===n?e.lookup_map_by_key[t]=r:(e.lookup_map_by_key_and_value[t]=e.lookup_map_by_key_and_value[t]||{},e.lookup_map_by_key_and_value[t][n]=r),e.rule_id_to_conditions[r.id]=e.rule_id_to_conditions[r.id]||[],e.rule_id_to_conditions[r.id].push({key:t,value:n})};return e.prototype.addRule=function(e,n,r){var o=g.prototype.addRule.call(this,r);return t(this,e,n,this.getRuleWithId(o)),o},e.prototype.linkExistingRule=function(e,n,r){t(this,e,n,this.getRuleWithId(r))},e.prototype.removeRule=function(e){for(g.prototype.removeRule.call(this,e);this.rule_id_to_conditions[e].length>0;){var t=this.rule_id_to_conditions[e].pop();if(null===t.key){for(var n=-1,r=0;r<this.universal_rules.length;r++)if(this.universal_rules[r].id===e){n=r;break}n>-1&&this.universal_rules.splice(n,1)}else null===t.value?delete this.lookup_map_by_key[t.key]:delete this.lookup_map_by_key_and_value[t.key][t.value]}delete this.rule_id_to_conditions[e]},e}(),b=function(){function e(e){g.call(this,e),this.rule_id_to_condition={},this.addRule(function(e){return!0===e[f]},{shapes:p(e.na_z||1e3),legend_label:e.na_legend_label||h,exclude_from_legend:!1,legend_config:{type:"rule",target:{na:!0}},legend_order:Number.POSITIVE_INFINITY})}return e.prototype=Object.create(g.prototype),e.prototype.getRulesWithId=function(e){if(void 0===e)return this.rules_with_id;for(var t=[],n=0;n<this.rules_with_id.length;n++)this.rule_id_to_condition[this.rules_with_id[n].id](e)&&t.push(this.rules_with_id[n]);return t},e.prototype.addRule=function(e,t,n){return n=g.prototype.addRule.call(this,t,n),this.rule_id_to_condition[n]=e,n},e.prototype.removeRule=function(e){g.prototype.removeRule.call(this,e),delete this.rule_id_to_condition[e]},e}(),_=function(){function e(e){v.call(this,e),this.addRule(f,!0,{shapes:p(e.na_z||1e3),legend_label:e.na_legend_label||h,exclude_from_legend:!1,legend_config:{type:"rule",target:{na:!0}},legend_order:Number.POSITIVE_INFINITY}),this.category_key=e.category_key,this.category_to_color=r(e.category_to_color,{}),this.getUnusedColor=i(l(this.category_to_color).map(m));for(var n in this.category_to_color)if(this.category_to_color.hasOwnProperty(n)){var o=this.category_to_color[n];t(this,n,o),this.used_colors[m(o)]=!0}}e.prototype=Object.create(v.prototype);var t=function(e,t,n){var r={};r[e.category_key]=t;var o={shapes:[{type:"rectangle",fill:n}],legend_label:t,exclude_from_legend:!1,legend_config:{type:"rule",target:r}};e.addRule(e.category_key,t,o)};return e.prototype.apply=function(e,n,r,o){for(var a=0,i=e.length;a<i;a++)if(!e[a][f]){var s=e[a][this.category_key];if(!this.category_to_color.hasOwnProperty(s)){var l=this.getUnusedColor(this);this.category_to_color[s]=l,t(this,s,l)}}return v.prototype.apply.call(this,e,n,r,o)},e}(),w=function(){function e(e){b.call(this,e),this.value_key=e.value_key,this.value_range=e.value_range,this.log_scale=e.log_scale,this.type=e.type,this.rangeTypes={ALL:"ALL",NON_NEGATIVE:"NON_NEGATIVE",NON_POSITIVE:"NON_POSITIVE"},this.makeInterpFn=function(){var e=this.getEffectiveValueRange(),t=this.getValueRangeType(),n=this.type,r=this.rangeTypes;if(this.log_scale){var o=Math.abs(e[0])+1,a=Math.log(e[1]+o)-Math.log(e[0]+o),i=Math.log(e[0]+o);return function(e){return e=parseFloat(e),(Math.log(e+o)-i)/a}}return function(o){var a=e[1]-e[0],i=e[0],s=e[1];return"bar"!==n?(o-i)/a:t===r.NON_POSITIVE?(o-s)/a:t===r.NON_NEGATIVE?(o-i)/a:t===r.ALL?(a=Math.abs(e[0])>e[1]?Math.abs(e[0]):e[1],o/a):void 0}}}return e.prototype=Object.create(b.prototype),e.prototype.getEffectiveValueRange=function(){var e=this.value_range&&this.value_range.slice()||[void 0,void 0];return void 0===e[0]&&(e[0]=this.inferred_value_range[0]),void 0===e[1]&&(e[1]=this.inferred_value_range[1]),e[0]===e[1]&&(e[0]-=e[0]/2,e[1]+=e[1]/2),e},e.prototype.getValueRangeType=function(){var e=this.getEffectiveValueRange();return e[0]<0&&e[1]<=0?this.rangeTypes.NON_POSITIVE:e[0]>=0&&e[1]>0?this.rangeTypes.NON_NEGATIVE:this.rangeTypes.ALL},e.prototype.apply=function(e,t,n,r){for(var o=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,i=0,s=e.length;i<s;i++){var l=e[i];isNaN(l[this.value_key])||(o=Math.min(o,l[this.value_key]),a=Math.max(a,l[this.value_key]))}return o===Number.POSITIVE_INFINITY&&(o=0),a===Number.NEGATIVE_INFINITY&&(a=0),this.inferred_value_range=[o,a],this.updateLinearRules(),b.prototype.apply.call(this,e,t,n,r)},e.prototype.updateLinearRules=function(){throw"Not implemented in abstract class"},e}(),x=function(){function e(e){w.call(this,e),this.colors=[],e.colors?this.colors=e.colors||[]:e.colormap_name&&(this.colors=c[e.colormap_name]||[]),0===this.colors.length&&this.colors.push([0,0,0,1],[255,0,0,1]),this.value_stop_points=e.value_stop_points,this.null_color=e.null_color||"rgba(211,211,211,1)"}e.prototype=Object.create(w.prototype);var t=function(e,t,n){return[Math.round(t[0]*(1-e)+n[0]*e),Math.round(t[1]*(1-e)+n[1]*e),Math.round(t[2]*(1-e)+n[2]*e),t[3]*(1-e)+n[3]*e]};return e.prototype.makeColorFn=function(e,n){var r,o=this.value_stop_points;return r=o?o.map(n):a(e.length).map(function(t){return t/(e.length-1)}),function(n){var o=d(r,n,function(e){return e},!0);if(-1===o)return"rgba(0,0,0,1)";var a=Math.min(e.length-1,o+1),i=r[a]-r[o];if(0===i)return"rgba("+e[a].join(",")+")";var s=(n-r[o])/i,l=e[o],u=e[a];return"rgba("+t(s,l,u).join(",")+")"}},e.prototype.updateLinearRules=function(){var e;void 0!==this.gradient_rule&&(e=this.gradient_rule,this.removeRule(this.gradient_rule));var t=this.makeInterpFn(),n=this.makeColorFn(this.colors,t),r=this.value_key,o=this.null_color;this.gradient_rule=this.addRule(function(e){return!0!==e[f]},{shapes:[{type:"rectangle",fill:function(e){if(e[r]){var a=t(e[r]);return n(a)}return o}}],exclude_from_legend:!1,legend_config:{type:"gradient",range:this.getEffectiveValueRange(),colorFn:n}},e)},e}(),S=function(){function e(e){w.call(this,e),this.fill=e.fill||"rgba(0,128,0,1)",this.negative_fill=e.negative_fill||"rgba(255,0,0,1)"}return e.prototype=Object.create(w.prototype),e.prototype.updateLinearRules=function(){var e;void 0!==this.bar_rule&&(e=this.bar_rule,this.removeRule(this.bar_rule));var t=this.makeInterpFn(),n=this.value_key,r=this.fill,o=this.negative_fill,a=this.getYPosPercentagesFn(),i=this.getCellHeightPercentagesFn();this.bar_rule=this.addRule(function(e){return!0!==e[f]},{shapes:[{type:"rectangle",y:function(e){var r=t(e[n]);return a(r)},height:function(e){var r=t(e[n]);return i(r)},fill:function(e){return e[n]<0?o:r}}],exclude_from_legend:!1,legend_config:{type:"number",range:this.getEffectiveValueRange(),range_type:this.getValueRangeType(),positive_color:r,negative_color:o,interpFn:t}},e)},e.prototype.getYPosPercentagesFn=function(){var e;switch(this.getValueRangeType()){case this.rangeTypes.NON_POSITIVE:e=function(e){return"0%"};break;case this.rangeTypes.NON_NEGATIVE:e=function(e){return 100*(1-e)+"%"};break;case this.rangeTypes.ALL:e=function(e){return 50*Math.min(1-e,1)+"%"}}return e},e.prototype.getCellHeightPercentagesFn=function(){var e;switch(this.getValueRangeType()){case this.rangeTypes.NON_POSITIVE:e=function(e){return 100*-e+"%"};break;case this.rangeTypes.NON_NEGATIVE:e=function(e){return 100*e+"%"};break;case this.rangeTypes.ALL:e=function(e){return 50*Math.abs(e)+"%"}}return e},e}(),C=function(){function e(e){b.call(this,e);for(var t=e.value_key,n=e.fills||[],r=e.categories||[],o=i(n);n.length<r.length;)n.push(o());for(var a=this,s=0;s<r.length;s++)!function(e){var o={};o[t]={};for(var i=0;i<r.length;i++)o[t][r[i]]=0;o[t][r[e]]=1,a.addRule(function(e){return!0!==e[f]},{shapes:[{type:"rectangle",fill:n[e],width:"100%",height:function(n){for(var o=0,a=0;a<r.length;a++)o+=parseFloat(n[t][r[a]]);return 100*parseFloat(n[t][r[e]])/o+"%"},y:function(n){for(var o=0,a=0,i=0;i<r.length;i++){var s=parseFloat(n[t][r[i]]);i<e&&(a+=s),o+=s}return 100*a/o+"%"}}],exclude_from_legend:!1,legend_config:{type:"rule",target:o},legend_label:r[e]})}(s)}return e.prototype=Object.create(b.prototype),e}(),k=function(){function e(e){v.call(this,e),function(t){var n=e.rule_params;for(var r in n)if(n.hasOwnProperty(r)){var o=n[r];if("*"===r)t.addRule(null,null,s(n["*"],{legend_config:{type:"rule",target:{}}}));else for(var a in o)if(o.hasOwnProperty(a)){var i=a.split(","),l={};l[i[0]]=a;for(var u=t.addRule(r,"*"===i[0]?null:i[0],s(o[a],{legend_config:{type:"rule",target:l},legend_base_color:void 0===t.legend_base_color?"":t.legend_base_color})),c=1;c<i.length;c++)t.linkExistingRule(r,"*"===i[c]?null:i[c],u)}}}(this),this.addRule(f,!0,{shapes:p(e.na_z||1),legend_label:e.na_legend_label||h,exclude_from_legend:!1,legend_config:{type:"rule",target:{na:!0}},legend_order:Number.POSITIVE_INFINITY})}return e.prototype=Object.create(v.prototype),e}(),E=function(){function e(e){this.shapes=e.shapes.map(function(e){return"rectangle"===e.type?new u.Rectangle(e):"triangle"===e.type?new u.Triangle(e):"ellipse"===e.type?new u.Ellipse(e):"line"===e.type?new u.Line(e):void 0}),this.legend_label=void 0===e.legend_label?"":e.legend_label,this.legend_base_color=e.legend_base_color,this.exclude_from_legend=e.exclude_from_legend,this.legend_config=e.legend_config,this.legend_order=e.legend_order}return e.prototype.getLegendConfig=function(){return this.legend_config},e.prototype.apply=function(e,t,n){for(var r=[],o=0,a=this.shapes.length;o<a;o++)r.push(this.shapes[o].getComputedParams(e,t,n));return r},e.prototype.isExcludedFromLegend=function(){return this.exclude_from_legend},e}();e.exports=function(e){return"categorical"===e.type?new _(e):"gradient"===e.type?new x(e):"bar"===e.type?new S(e):"stacked_bar"===e.type?new C(e):"gene"===e.type?new k(e):void 0}},function(e,t){e.exports={viridis:[[68.08602,1.24287,84.000825,1],[68.47005,2.449275,85.533885,1],[68.83572,3.729375,87.051645,1],[69.182775,5.08521,88.553595,1],[69.51147,6.518565,90.038715,1],[69.821295,8.031735,91.507515,1],[70.11276,9.62676,92.958465,1],[70.38561,11.262585,94.39182,1],[70.63959,12.83772,95.807325,1],[70.874955,14.36262,97.203705,1],[71.091705,15.846975,98.58096,1],[71.28933,17.29818,99.938835,1],[71.468085,18.721335,101.276565,1],[71.62797,20.121285,102.593895,1],[71.76873,21.5016,103.89057,1],[71.89062,22.86483,105.165825,1],[71.993385,24.213525,106.419405,1],[72.07728,25.54998,107.6508,1],[72.14205,26.875215,108.86001,1],[72.188205,28.191015,110.04627,1],[72.215235,29.4984,111.209325,1],[72.223395,30.798135,112.34892,1],[72.212685,32.09124,113.4648,1],[72.18336,33.378225,114.556455,1],[72.13542,34.6596,115.623885,1],[72.068865,35.93613,116.666835,1],[71.98395,37.20756,117.68505,1],[71.881185,38.474655,118.678275,1],[71.76006,39.73767,119.646255,1],[71.62134,40.996605,120.589245,1],[71.465025,42.251715,121.50699,1],[71.29137,43.502745,122.399235,1],[71.10063,44.74995,123.266235,1],[70.89306,45.993585,124.107735,1],[70.66917,47.23314,124.92399,1],[70.42947,48.46887,125.715255,1],[70.173705,49.700775,126.481275,1],[69.90264,50.928855,127.222305,1],[69.61653,52.1526,127.938855,1],[69.31614,53.372265,128.63067,1],[69.001725,54.587595,129.29826,1],[68.67354,55.79859,129.942135,1],[68.33184,57.004995,130.56204,1],[67.9779,58.20681,131.158995,1],[67.611975,59.40378,131.732745,1],[67.234065,60.595905,132.28431,1],[66.84519,61.78293,132.813435,1],[66.445605,62.96511,133.32114,1],[66.036075,64.141935,133.80768,1],[65.61711,65.31315,134.273565,1],[65.189475,66.479265,134.71956,1],[64.753425,67.63977,135.145665,1],[64.30947,68.794665,135.552645,1],[63.858375,69.94395,135.941265,1],[63.400395,71.087625,136.31178,1],[62.936805,72.225435,136.664955,1],[62.46786,73.357125,137.0013,1],[61.993815,74.48346,137.32158,1],[61.515435,75.603675,137.625795,1],[61.03323,76.718025,137.91522,1],[60.547455,77.82651,138.189855,1],[60.05913,78.929385,138.45072,1],[59.568765,80.02614,138.69807,1],[59.07687,81.11703,138.93267,1],[58.583445,82.202055,139.15503,1],[58.08951,83.28147,139.36566,1],[57.595065,84.355275,139.56507,1],[57.100875,85.42347,139.753515,1],[56.607195,86.486055,139.93176,1],[56.114535,87.543285,140.100315,1],[55.62315,88.59516,140.25969,1],[55.13355,89.641425,140.409885,1],[54.64599,90.682845,140.55192,1],[54.160725,91.719165,140.68605,1],[53.678265,92.750385,140.81253,1],[53.198865,93.77676,140.932125,1],[52.72278,94.79829,141.044835,1],[52.250265,95.81523,141.150915,1],[51.781065,96.82758,141.250875,1],[51.315945,97.83585,141.34497,1],[50.85465,98.839785,141.43371,1],[50.39718,99.83964,141.517095,1],[49.9443,100.835415,141.59538,1],[49.4955,101.827365,141.669075,1],[49.051035,102.815745,141.73818,1],[48.610905,103.800555,141.802695,1],[48.175365,104.78205,141.86313,1],[47.743905,105.76023,141.919485,1],[47.31678,106.73535,141.972015,1],[46.89399,107.707665,142.02072,1],[46.47528,108.67692,142.0656,1],[46.060395,109.643625,142.10691,1],[45.649845,110.60778,142.14465,1],[45.242865,111.569385,142.179075,1],[44.839455,112.52895,142.209675,1],[44.43987,113.48622,142.23696,1],[44.043345,114.441705,142.260675,1],[43.64988,115.39515,142.281075,1],[43.25973,116.34681,142.29765,1],[42.87213,117.29694,142.31091,1],[42.487335,118.24554,142.320345,1],[42.104835,119.192865,142.325955,1],[41.724375,120.138915,142.32774,1],[41.34621,121.08369,142.3257,1],[40.969575,122.0277,142.319325,1],[40.59447,122.970435,142.308615,1],[40.220895,123.91266,142.293315,1],[39.84885,124.85412,142.27368,1],[39.477825,125.794815,142.2492,1],[39.10782,126.735,142.21962,1],[38.73909,127.674675,142.184685,1],[38.37138,128.614095,142.14465,1],[38.004945,129.553005,142.09875,1],[37.639785,130.491915,142.047495,1],[37.2759,131.430315,141.989865,1],[36.913545,132.368715,141.92586,1],[36.552465,133.307115,141.855225,1],[36.193425,134.245515,141.777705,1],[35.83668,135.18366,141.693045,1],[35.482485,136.12206,141.60099,1],[35.13135,137.06046,141.50103,1],[34.78404,137.999115,141.393165,1],[34.44183,138.937515,141.277395,1],[34.104465,139.876425,141.152955,1],[33.77322,140.81508,141.01959,1],[33.44886,141.754245,140.877045,1],[33.132915,142.69341,140.72532,1],[32.825895,143.632575,140.563395,1],[32.52984,144.571995,140.39178,1],[32.245515,145.511415,140.209455,1],[31.97547,146.45109,140.01693,1],[31.720725,147.39051,139.813185,1],[31.483065,148.330185,139.598475,1],[31.26453,149.269605,139.372035,1],[31.066905,150.209025,139.133865,1],[30.89274,151.148445,138.883455,1],[30.744075,152.08761,138.620805,1],[30.62346,153.02652,138.34515,1],[30.53319,153.965175,138.057,1],[30.47556,154.90332,137.75559,1],[30.452865,155.840955,137.44041,1],[30.468165,156.778335,137.11146,1],[30.523245,157.71495,136.768485,1],[30.620655,158.651055,136.41123,1],[30.76269,159.58614,136.03944,1],[30.9519,160.52046,135.653115,1],[31.18956,161.454015,135.25149,1],[31.47822,162.386295,134.834565,1],[31.8189,163.317555,134.40234,1],[32.21313,164.247285,133.954305,1],[32.662185,165.175995,133.490205,1],[33.167085,166.10292,133.01004,1],[33.72834,167.02857,132.513555,1],[34.34646,167.95218,132.000495,1],[35.021445,168.87426,131.470605,1],[35.75355,169.794045,130.923885,1],[36.542265,170.712045,130.359825,1],[37.38708,171.62775,129.77868,1],[38.28774,172.540905,129.180195,1],[39.24297,173.451765,128.56386,1],[40.252005,174.360075,127.92993,1],[41.31408,175.26558,127.277895,1],[42.427665,176.16828,126.60801,1],[43.59174,177.06792,125.919765,1],[44.805285,177.9645,125.213415,1],[46.066515,178.85751,124.488195,1],[47.374665,179.747205,123.744615,1],[48.72795,180.63333,122.98242,1],[50.125605,181.515885,122.201355,1],[51.565845,182.39436,121.40142,1],[53.04765,183.268755,120.582615,1],[54.57,184.13907,119.74494,1],[56.13162,185.004795,118.88763,1],[57.731235,185.86644,118.011195,1],[59.367825,186.722985,117.115635,1],[61.04037,187.57494,116.20044,1],[62.74785,188.42205,115.26612,1],[64.489245,189.263805,114.31242,1],[66.263535,190.10046,113.339085,1],[68.069955,190.931505,112.346115,1],[69.907995,191.75694,111.333255,1],[71.776635,192.576765,110.30076,1],[73.674855,193.39047,109.24863,1],[75.602145,194.198055,108.176865,1],[77.55774,194.99952,107.085465,1],[79.540875,195.79461,105.97443,1],[81.551295,196.58307,104.84376,1],[83.58798,197.3649,103.6932,1],[85.650675,198.13959,102.522495,1],[87.73887,198.907395,101.332155,1],[89.8518,199.667805,100.12218,1],[91.988955,200.42082,98.89257,1],[94.14957,201.16644,97.64307,1],[96.333645,201.904155,96.374445,1],[98.540415,202.63422,95.08593,1],[100.76937,203.356125,93.778035,1],[103.020255,204.070125,92.45076,1],[105.292815,204.775455,91.103595,1],[107.58654,205.47237,89.73705,1],[109.900665,206.160615,88.35138,1],[112.234935,206.84019,86.946585,1],[114.58884,207.51084,85.52292,1],[116.96187,208.172565,84.080385,1],[119.353515,208.824855,82.61949,1],[121.76352,209.46822,81.139725,1],[124.19163,210.101895,79.641855,1],[126.636825,210.72588,78.126135,1],[129.099105,211.34043,76.59231,1],[131.57796,211.94529,75.041145,1],[134.07288,212.540205,73.472385,1],[136.583355,213.125175,71.88654,1],[139.10862,213.699945,70.28463,1],[141.64842,214.26477,68.666655,1],[144.20199,214.81965,67.033635,1],[146.768565,215.36433,65.385825,1],[149.34789,215.898555,63.723735,1],[151.938945,216.422835,62.048895,1],[154.541475,216.936915,60.36156,1],[157.154715,217.440795,58.66326,1],[159.777645,217.934475,56.955015,1],[162.41001,218.41821,55.2381,1],[165.050535,218.892,53.514555,1],[167.69871,219.355845,51.78591,1],[170.35377,219.809745,50.054715,1],[173.014695,220.25421,48.323265,1],[175.68072,220.68924,46.594875,1],[178.350825,221.114835,44.872605,1],[181.02399,221.531505,43.160535,1],[183.699705,221.93925,41.463765,1],[186.376695,222.33858,39.787395,1],[189.05394,222.729495,38.138055,1],[191.73042,223.112505,36.52314,1],[194.405115,223.48812,34.95132,1],[197.07726,223.85634,33.432795,1],[199.745325,224.217675,31.978275,1],[202.4088,224.57289,30.601275,1],[205.06641,224.92173,29.316075,1],[207.71688,225.265215,28.138485,1],[210.3597,225.6036,27.085335,1],[212.99385,225.937395,26.17473,1],[215.618055,226.26711,25.42401,1],[218.23155,226.593255,24.85026,1],[220.833315,226.91634,24.468015,1],[223.42284,227.236875,24.28875,1],[225.999105,227.55537,24.32037,1],[228.5616,227.87208,24.565425,1],[231.109305,228.188025,25.021875,1],[233.64171,228.503205,25.682835,1],[236.15703,228.81915,26.538105,1],[238.65552,229.13535,27.573405,1],[241.13718,229.452825,28.77369,1],[243.6015,229.771575,30.12264,1],[246.04797,230.092365,31.604955,1],[248.476335,230.41545,33.204825,1],[250.88634,230.741085,34.908735,1],[253.27824,231.070035,36.70368,1]],inferno:[[.37281,.11883,3.53583,1],[.578085,.32385,4.73535,1],[.841245,.573495,6.180945,1],[1.159485,.86496,7.881795,1],[1.53153,1.19646,9.83229,1],[1.95738,1.56468,11.94318,1],[2.438055,1.966815,14.061465,1],[2.974065,2.401335,16.1823,1],[3.568725,2.862375,18.32481,1],[4.223055,3.34968,20.47191,1],[4.940115,3.858915,22.635585,1],[5.723985,4.385745,24.818385,1],[6.577215,4.929405,27.01215,1],[7.50516,5.483265,29.228355,1],[8.513175,6.04401,31.466235,1],[9.60534,6.609855,33.71916,1],[10.774515,7.175445,35.990955,1],[11.963325,7.73262,38.29182,1],[13.16922,8.28087,40.60977,1],[14.394495,8.815095,42.94557,1],[15.6417,9.33045,45.29871,1],[16.914405,9.81852,47.67531,1],[18.214395,10.27497,50.07027,1],[19.542435,10.685775,52.478745,1],[20.90031,11.04864,54.898695,1],[22.289805,11.36178,57.327315,1],[23.71245,11.623665,59.76129,1],[25.16901,11.83251,62.19552,1],[26.660505,11.98704,64.62465,1],[28.18668,12.086745,67.04256,1],[29.74728,12.13137,69.441855,1],[31.34154,12.12168,71.81412,1],[32.967675,12.059715,74.15094,1],[34.62339,11.94828,76.44288,1],[36.30639,11.79171,78.681015,1],[38.013615,11.59434,80.856675,1],[39.74175,11.362545,82.96119,1],[41.485695,11.10627,84.985635,1],[43.241625,10.834695,86.92287,1],[45.005715,10.55751,88.768305,1],[46.774395,10.283895,90.517605,1],[48.543585,10.023795,92.168985,1],[50.310735,9.792,93.721425,1],[52.073295,9.59616,95.17569,1],[53.829225,9.44265,96.533565,1],[55.576995,9.336825,97.79811,1],[57.314565,9.283275,98.972895,1],[59.04219,9.283275,100.062,1],[60.759615,9.338355,101.070015,1],[62.466585,9.449025,102.001785,1],[64.1631,9.614775,102.86139,1],[65.84967,9.835605,103.653675,1],[67.52655,10.109985,104.382975,1],[69.193485,10.43511,105.05388,1],[70.85175,10.800015,105.66996,1],[72.501855,11.202915,106.23504,1],[74.144565,11.63922,106.752435,1],[75.78039,12.10485,107.225205,1],[77.40984,12.59598,107.65641,1],[79.033425,13.108785,108.048855,1],[80.65191,13.63995,108.40458,1],[82.26555,14.18667,108.726135,1],[83.874855,14.745885,109.015305,1],[85.480335,15.3153,109.27362,1],[87.0825,15.892875,109.503375,1],[88.681605,16.47708,109.705335,1],[90.27816,17.065875,109.88103,1],[91.87242,17.657985,110.031735,1],[93.464895,18.252645,110.15847,1],[95.05584,18.848325,110.262,1],[96.645255,19.444515,110.343345,1],[98.23314,20.040705,110.403525,1],[99.820515,20.636385,110.442795,1],[101.40687,21.230535,110.461665,1],[102.99297,21.8229,110.460645,1],[104.578815,22.41348,110.43999,1],[106.164405,23.001765,110.400465,1],[107.749995,23.587755,110.34207,1],[109.33584,24.17145,110.26506,1],[110.921685,24.752595,110.169945,1],[112.507785,25.33119,110.05647,1],[114.09414,25.907235,109.9254,1],[115.681005,26.48124,109.77699,1],[117.268125,27.052695,109.61073,1],[118.8555,27.62211,109.426875,1],[120.44364,28.189485,109.22517,1],[122.03229,28.75482,109.006125,1],[123.621195,29.31837,108.76974,1],[125.21061,29.880645,108.51576,1],[126.800535,30.441645,108.24444,1],[128.390715,31.001625,107.95578,1],[129.98115,31.561095,107.64978,1],[131.571585,32.1198,107.326185,1],[133.16253,32.67825,106.984995,1],[134.75322,33.236955,106.62621,1],[136.344165,33.79617,106.250085,1],[137.9346,34.355895,105.856365,1],[139.525035,34.916895,105.445305,1],[141.11496,35.47917,105.016395,1],[142.70412,36.04323,104.56989,1],[144.29277,36.609585,104.10579,1],[145.880655,37.178235,103.624095,1],[147.46752,37.749945,103.124805,1],[149.052855,38.32497,102.608175,1],[150.63717,38.903565,102.07395,1],[152.2197,39.48624,101.521875,1],[153.800445,40.073505,100.952205,1],[155.37915,40.66587,100.365195,1],[156.955815,41.263335,99.760845,1],[158.529675,41.86692,99.139155,1],[160.100985,42.476625,98.50038,1],[161.66949,43.09296,97.84452,1],[163.234425,43.71669,97.171575,1],[164.7963,44.34807,96.481545,1],[166.354095,44.987355,95.77443,1],[167.908065,45.63531,95.05074,1],[169.4577,46.292445,94.31073,1],[171.002745,46.959015,93.554145,1],[172.54269,47.635785,92.781495,1],[174.07728,48.322755,91.993035,1],[175.606515,49.020945,91.188765,1],[177.129885,49.730355,90.36894,1],[178.64688,50.452005,89.533815,1],[180.1575,51.18564,88.683135,1],[181.66098,51.93228,87.817665,1],[183.15732,52.69218,86.937405,1],[184.646265,53.46585,86.04312,1],[186.126795,54.253545,85.134555,1],[187.599165,55.05603,84.212475,1],[189.062865,55.87356,83.27688,1],[190.517385,56.70639,82.32828,1],[191.96247,57.55503,81.366675,1],[193.39761,58.419735,80.39283,1],[194.82255,59.30127,79.406745,1],[196.23678,60.199635,78.408675,1],[197.640045,61.115085,77.39913,1],[199.031835,62.048385,76.378365,1],[200.411895,62.99928,75.346635,1],[201.779715,63.96828,74.30445,1],[203.134785,64.95564,73.25232,1],[204.477105,65.96187,72.190245,1],[205.80591,66.98646,71.11899,1],[207.120945,68.03043,70.038555,1],[208.421955,69.09327,68.94945,1],[209.70843,70.175235,67.851675,1],[210.97986,71.276835,66.74625,1],[212.236245,72.397815,65.632665,1],[213.477075,73.538175,64.51194,1],[214.702095,74.697915,63.38382,1],[215.910795,75.877545,62.248815,1],[217.10292,77.0763,61.10718,1],[218.27796,78.29469,59.958915,1],[219.435915,79.53246,58.80453,1],[220.57653,80.78961,57.644025,1],[221.699295,82.065885,56.47791,1],[222.803955,83.36103,55.30593,1],[223.890255,84.6753,54.12834,1],[224.95794,86.008185,52.94514,1],[226.00701,87.35943,51.75684,1],[227.036955,88.729035,50.56293,1],[228.047775,90.116745,49.36392,1],[229.03896,91.522305,48.1593,1],[230.010765,92.94546,46.94958,1],[230.962425,94.3857,45.73425,1],[231.89445,95.84328,44.513565,1],[232.80633,97.31718,43.287525,1],[233.69781,98.807655,42.05562,1],[234.569145,100.314195,40.81785,1],[235.419825,101.836545,39.574215,1],[236.24985,103.374195,38.32446,1],[237.05922,104.927145,37.068585,1],[237.847935,106.494885,35.806335,1],[238.615485,108.076905,34.5372,1],[239.362125,109.673205,33.26169,1],[240.087855,111.283275,31.979295,1],[240.792675,112.90686,30.69027,1],[241.476075,114.543705,29.39436,1],[242.13831,116.1933,28.09182,1],[242.779125,117.85539,26.782905,1],[243.39903,119.52972,25.46787,1],[243.99726,121.21578,24.147225,1],[244.57407,122.91357,22.822245,1],[245.129715,124.62258,21.493695,1],[245.663685,126.34281,20.163615,1],[246.176235,128.073495,18.834045,1],[246.66711,129.81489,17.508045,1],[247.136565,131.56623,16.18944,1],[247.584345,133.327515,14.883585,1],[248.01045,135.09849,13.59762,1],[248.41488,136.8789,12.33996,1],[248.797635,138.66849,11.12259,1],[249.15846,140.46675,9.95775,1],[249.49761,142.273935,8.907405,1],[249.81483,144.089535,8.009295,1],[250.11012,145.913295,7.26954,1],[250.383225,147.74496,6.69375,1],[250.634655,149.58453,6.288555,1],[250.863645,151.431495,6.06135,1],[251.070705,153.28611,6.01953,1],[251.255325,155.14761,6.17151,1],[251.41776,157.01625,6.52596,1],[251.55801,158.891775,7.09257,1],[251.67582,160.773675,7.88154,1],[251.770935,162.66195,8.90358,1],[251.84361,164.5566,10.17093,1],[251.893845,166.457115,11.623155,1],[251.92113,168.36375,13.19625,1],[251.925975,170.27574,14.873895,1],[251.90787,172.193085,16.640535,1],[251.86707,174.115785,18.484695,1],[251.80332,176.04333,20.39745,1],[251.71662,177.97572,22.371405,1],[251.60697,179.9127,24.40197,1],[251.474625,181.854015,26.485065,1],[251.31933,183.79941,28.618395,1],[251.140575,185.748885,30.800175,1],[250.939125,187.702185,33.029385,1],[250.71498,189.65829,35.305515,1],[250.46814,191.61771,37.629075,1],[250.199115,193.579425,40.000065,1],[249.90816,195.543435,42.420015,1],[249.59553,197.508975,44.889435,1],[249.261735,199.47579,47.410365,1],[248.90754,201.44337,49.98459,1],[248.53269,203.41146,52.61466,1],[248.13744,205.379295,55.303635,1],[247.72434,207.34611,58.05279,1],[247.294665,209.310375,60.86493,1],[246.850455,211.271325,63.74286,1],[246.391965,213.228705,66.69117,1],[245.92047,215.18124,69.714705,1],[245.441835,217.12638,72.81423,1],[244.95963,219.062595,75.99255,1],[244.4736,220.98912,79.2591,1],[243.99267,222.902895,82.61337,1],[243.524235,224.800095,86.056125,1],[243.069825,226.68021,89.599095,1],[242.64423,228.53763,93.234885,1],[242.25459,230.369295,96.969105,1],[241.914165,232.170615,100.798695,1],[241.63647,233.936745,104.719575,1],[241.436295,235.66284,108.725115,1],[241.32996,237.344055,112.803585,1],[241.332765,238.975545,116.94096,1],[241.460265,240.55374,121.11735,1],[241.723935,242.07609,125.31363,1],[242.133975,243.541065,129.5043,1],[242.6937,244.949685,133.671765,1],[243.404895,246.30348,137.792055,1],[244.26348,247.605765,141.850125,1],[245.26206,248.86062,145.840875,1],[246.393495,250.07289,149.73753,1],[247.64631,251.24691,153.54927,1],[249.010305,252.387015,157.2738,1],[250.475535,253.497795,160.909335,1],[252.03231,254.58282,164.45562,1]]}},function(e,t,n){var r=n(0),o=function(){function e(e,t,n,o,a,i){var s=e.css("position");"absolute"!==s&&"relative"!==s&&console.log("WARNING: div passed to OncoprintTrackOptionsView must be absolute or relative positioned - layout problems will occur"),this.moveUpCallback=t,this.moveDownCallback=n,this.removeCallback=o,this.sortChangeCallback=a,this.unexpandCallback=i,this.$div=e,this.$ctr=r("<div></div>").css({position:"absolute","overflow-y":"hidden","overflow-x":"hidden"}).appendTo(this.$div),this.$buttons_ctr=r("<div></div>").css({position:"absolute"}).appendTo(this.$ctr),this.$dropdown_ctr=r("<div></div>").css({position:"absolute"}).appendTo(this.$div),this.img_size,this.rendering_suppressed=!1,this.track_options_$elts={},this.menu_shown={};var l=this;r(document).click(function(){r(l).trigger("oncoprint-track-options-view.click-out")}),this.interaction_disabled=!1}var t=function(e,t){if(!e.rendering_suppressed){r(e).off("oncoprint-track-options-view.click-out"),r(e).on("oncoprint-track-options-view.click-out",function(){for(var t in e.track_options_$elts)e.track_options_$elts.hasOwnProperty(t)&&a(e,t)}),e.$buttons_ctr.empty(),e.$dropdown_ctr.empty(),n(e,t.getVertScroll());for(var o=t.getTracks(),i=Number.POSITIVE_INFINITY,s=0;s<o.length;s++)i=Math.min(i,t.getTrackHeight(o[s]));e.img_size=Math.floor(.75*i);for(var s=0;s<o.length;s++)d(e,t,o[s])}},n=function(e,t){e.rendering_suppressed||(e.$buttons_ctr.css({top:-t}),e.$dropdown_ctr.css({top:-t}))},o=function(e,t){e.rendering_suppressed||(e.$div.css({width:e.getWidth(),height:t.getCellViewHeight()}),e.$ctr.css({width:e.getWidth(),height:t.getCellViewHeight()}))},a=function(e,t){e.menu_shown[t]=!1;var n=e.track_options_$elts[t];n.$dropdown.css({"z-index":1}),n.$dropdown.css({border:"1px solid rgba(125,125,125,0)"}),n.$img.css({border:"1px solid rgba(125,125,125,0)"}),n.$dropdown.fadeOut(100)},i=function(e,t){e.menu_shown[t]=!0;var n=e.track_options_$elts[t];n.$dropdown.css({"z-index":10}),n.$dropdown.css({border:"1px solid rgba(125,125,125,1)"}),n.$img.css({border:"1px solid rgba(125,125,125,1)"}),n.$dropdown.fadeIn(100)},s=function(e,t){t=t.toString();for(var n in e.track_options_$elts)if(e.track_options_$elts.hasOwnProperty(n)){if(n===t)continue;a(e,n)}},l=function(e,t,n,o){var a=r("<li>").text(e).css({"font-weight":t,"font-size":12,"border-bottom":"1px solid rgba(0,0,0,0.3)"});return n?a.css({color:"rgb(200, 200, 200)",cursor:"default"}):a.css({cursor:"pointer"}).click(o).hover(function(){r(this).css({"background-color":"rgb(200,200,200)"})},function(){r(this).css({"background-color":"rgba(255,255,255,0)"})}),a},u=function(){return r("<li>").css({"border-top":"1px solid black"})},c=function(e,t,n){var r="";t.isTrackSortDirectionChangeable(n)&&(r={1:'<i class="fa fa-signal" aria-hidden="true" title="Sorted ascending"></i>',"-1":'<i class="fa fa-signal" style="transform: scaleX(-1);" aria-hidden="true" title="Sorted descending"></i>',0:""}[t.getTrackSortDirection(n)]),e.html(r)},d=function(e,n,o){var d,p,f,h,m=n.getZoomedTrackTops(o);d=r("<div>").appendTo(e.$buttons_ctr).css({position:"absolute",left:"0px",top:m+"px","white-space":"nowrap"}),p=r("<img/>").appendTo(d).attr({src:"images/menudots.svg",width:e.img_size,height:e.img_size}).css({float:"left",cursor:"pointer",border:"1px solid rgba(125,125,125,0)"}).addClass("oncoprintjs__track_options__toggle_btn_img"),f=r("<span>").appendTo(d).css({position:"absolute",top:Math.floor(e.img_size/4)+"px"}),h=r("<ul>").appendTo(e.$dropdown_ctr).css({position:"absolute",width:120,display:"none","list-style-type":"none","padding-left":"6","padding-right":"6",float:"right","background-color":"rgb(255,255,255)",left:"0px",top:m+e.img_size+"px"}).addClass("oncoprintjs__track_options__dropdown"),e.track_options_$elts[o]={$div:d,$img:p,$dropdown:h},c(f,n,o),p.hover(function(t){e.menu_shown[o]||r(this).css({border:"1px solid rgba(125,125,125,0.3)"})},function(t){e.menu_shown[o]||r(this).css({border:"1px solid rgba(125,125,125,0)"})}),p.click(function(t){t.stopPropagation(),h.is(":visible")?(p.addClass("oncoprintjs__track_options__open"),a(e,o)):(p.removeClass("oncoprintjs__track_options__open"),i(e,o)),s(e,o)});var y=!n.isTrackInClusteredGroup(o),g=y;if(h.append(l("Move up","normal",!y,function(t){t.stopPropagation(),e.moveUpCallback(o)})),h.append(l("Move down","normal",!y,function(t){t.stopPropagation(),e.moveDownCallback(o)})),n.isTrackRemovable(o)&&h.append(l("Remove track","normal",!1,function(t){t.stopPropagation(),e.removeCallback(o)})),n.isTrackSortDirectionChangeable(o)){h.append(u());var v,b,_;v=l("Sort a-Z",1===n.getTrackSortDirection(o)?"bold":"normal",!g,function(t){t.stopPropagation(),v.css("font-weight","bold"),b.css("font-weight","normal"),_.css("font-weight","normal"),e.sortChangeCallback(o,1),c(f,n,o)}),b=l("Sort Z-a",-1===n.getTrackSortDirection(o)?"bold":"normal",!g,function(t){t.stopPropagation(),v.css("font-weight","normal"),b.css("font-weight","bold"),_.css("font-weight","normal"),e.sortChangeCallback(o,-1),c(f,n,o)}),_=l("Don't sort track",0===n.getTrackSortDirection(o)?"bold":"normal",!g,function(t){t.stopPropagation(),v.css("font-weight","normal"),b.css("font-weight","normal"),_.css("font-weight","bold"),e.sortChangeCallback(o,0),c(f,n,o)}),h.append(v),h.append(b),h.append(_)}n.isTrackExpandable(o)&&h.append(l(n.getExpandButtonText(o),"normal",!1,function(r){r.stopPropagation(),t(e,n),n.expandTrack(o)})),n.isTrackExpanded(o)&&h.append(l("Remove expansion","normal",!1,function(t){t.stopPropagation(),e.unexpandCallback(o)}))};return e.prototype.enableInteraction=function(){this.interaction_disabled=!1},e.prototype.disableInteraction=function(){this.interaction_disabled=!0},e.prototype.suppressRendering=function(){this.rendering_suppressed=!0},e.prototype.releaseRendering=function(e){this.rendering_suppressed=!1,t(this,e),o(this,e),n(this,e.getVertScroll())},e.prototype.setScroll=function(e){this.setVertScroll(e)},e.prototype.setHorzScroll=function(e){},e.prototype.setVertScroll=function(e){n(this,e.getVertScroll())},e.prototype.setZoom=function(e){this.setVertZoom(e)},e.prototype.setVertZoom=function(e){t(this,e),o(this,e)},e.prototype.setViewport=function(e){t(this,e),o(this,e),n(this,e.getVertScroll())},e.prototype.getWidth=function(){return 18+this.img_size},e.prototype.addTracks=function(e){t(this,e),o(this,e)},e.prototype.moveTrack=function(e){t(this,e),o(this,e)},e.prototype.setTrackGroupOrder=function(e){t(this,e)},e.prototype.setSortConfig=function(e){t(this,e)},e.prototype.removeTrack=function(e,n){delete this.track_options_$elts[n],t(this,e),o(this,e)},e}();e.exports=o},function(e,t,n){var r=n(2),o=n(0),a=function(e){for(var t=!0;e&&"html"!==e.tagName.toLowerCase();){if("none"===o(e).css("display")){t=!1;break}e=e.parentNode}return t},i=function(){function e(e,t,n){this.$div=e,this.$svg=o(r.svg(200,200)).appendTo(this.$div),this.base_width=t,this.base_height=n,this.rendering_suppressed=!1,this.width=e.width(),this.rule_set_label_config={weight:"bold",size:12,font:"Arial"},this.rule_label_config={weight:"normal",size:12,font:"Arial"},this.padding_after_rule_set_label=10,this.padding_between_rules=20,this.padding_between_rule_set_rows=10}var t=function(e,t,i,s){if(!e.rendering_suppressed&&(void 0===i&&(i=e.$svg[0]),a(i))){o(i).empty();var l=r.defs();i.appendChild(l);var u=r.group(0,0);i.appendChild(u);for(var c=t.getRuleSets(),d=0,p=0;p<c.length;p++)if(!c[p].exclude_from_legend||s){var f=r.group(0,d);u.appendChild(f),function(){if(void 0!==c[p].legend_label&&c[p].legend_label.length>0){var e=r.text(c[p].legend_label,0,0,12,"Arial","bold");f.appendChild(e),r.wrapText(e,200)}}();var h=200+e.padding_after_rule_set_label,m=0,y=t.getActiveRules(c[p].rule_set_id),g=function(e,t){var n=e.rule.legend_label,r=t.rule.legend_label;return n&&r?n.localeCompare(r):n||r?n?r?void 0:1:-1:0};y.sort(function(e,t){var n=e.rule.legend_order,r=t.rule.legend_order;return void 0===n&&void 0===r?g(e,t):void 0!==n&&void 0!==r?n<r?-1:n>r?1:g(e,t):void 0===n?r===Number.POSITIVE_INFINITY?-1:1:void 0===r?n===Number.POSITIVE_INFINITY?1:-1:void 0});for(var v=0;v<y.length;v++){var b=y[v].rule;if(!b.exclude_from_legend){var _=n(b,e,t,i,l);_.setAttribute("transform","translate("+h+","+m+")"),f.appendChild(_),h+_.getBBox().width>e.width&&(h=200+e.padding_after_rule_set_label,m=f.getBBox().height+e.padding_between_rule_set_rows,_.setAttribute("transform","translate("+h+","+m+")")),h+=_.getBBox().width,h+=e.padding_between_rules}}d+=f.getBBox().height,d+=3*e.padding_between_rule_set_rows}var w=u.getBBox();e.$svg[0].setAttribute("width",w.width),e.$svg[0].setAttribute("height",w.height+10)}},n=function(e,t,n,o,a){var i=r.group(0,0),s=e.getLegendConfig();if("rule"===s.type){var l=e.apply(s.target,n.getCellWidth(!0),t.base_height);if(e.legend_base_color){var u=r.rect(0,0,n.getCellWidth(!0),t.base_height,e.legend_base_color);i.appendChild(u)}for(var c=0;c<l.length;c++)i.appendChild(r.fromShape(l[c],0,0));if(void 0!==e.legend_label){var d=r.text(e.legend_label,n.getCellWidth(!0)+5,t.base_height/2,12,"Arial","normal");o.appendChild(d);var p=d.getBBox().height;d.setAttribute("y",parseFloat(d.getAttribute("y"))-p/2),o.removeChild(d),i.appendChild(d)}}else if("number"===s.type){var f=2,h=s.range.map(function(e){var t=Math.pow(10,f);return Math.round(e*t)/t});i.appendChild(r.text(h[0],0,0,12,"Arial","normal")),i.appendChild(r.text(h[1],50,0,12,"Arial","normal"));var m=[],y=r.linearGradient();if("NON_POSITIVE"===s.range_type)y.appendChild(r.stop(100,s.negative_color));else if("NON_NEGATIVE"===s.range_type)y.appendChild(r.stop(100,s.positive_color));else if("ALL"===s.range_type){var g=Math.abs(h[0])/(Math.abs(h[0])+h[1])*100;y.appendChild(r.stop(g,s.negative_color)),y.appendChild(r.stop(g,s.positive_color))}a.appendChild(y),m.push([5,20]);for(var c=0;c<100;c++){var v=c/100,b=s.interpFn((1-v)*s.range[0]+v*s.range[1]),p=20*b;m.push([5+40*c/100,20-p])}m.push([45,20]),i.appendChild(r.path(m,null,null,y))}else if("gradient"===s.type){var f=2,h=s.range.map(function(e){var t=Math.pow(10,f);return Math.round(e*t)/t}),_=r.gradient(s.colorFn),w=_.getAttribute("id");a.appendChild(_),i.appendChild(r.text(h[0],0,0,12,"Arial","normal")),i.appendChild(r.text(h[1],120,0,12,"Arial","normal")),i.appendChild(r.rect(30,0,60,20,"url(#"+w+")"))}return i};return e.prototype.setWidth=function(e,n){this.width=e,t(this,n)},e.prototype.removeTrack=function(e){t(this,e)},e.prototype.addTracks=function(e){t(this,e)},e.prototype.setTrackData=function(e){t(this,e)},e.prototype.shareRuleSet=function(e){t(this,e)},e.prototype.setRuleSet=function(e){t(this,e)},e.prototype.setTrackGroupLegendOrder=function(e){t(this,e)},e.prototype.hideTrackLegends=function(e){t(this,e)},e.prototype.showTrackLegends=function(e){t(this,e)},e.prototype.suppressRendering=function(){this.rendering_suppressed=!0},e.prototype.releaseRendering=function(e){this.rendering_suppressed=!1,t(this,e)},e.prototype.toSVGGroup=function(e,n,o){var a=r.group(n||0,o||0);return this.$svg.append(a),t(this,e,a,!0),a.parentNode.removeChild(a),a},e}();e.exports=i},function(e,t,n){var r=n(0),o="oncoprintjs__tooltip",a=function(){function e(e,t){t=t||{},this.$container=e,this.$div=r("<div></div>").addClass(o).appendTo(e).css({"background-color":"rgba(255,255,255,1)",position:"absolute",display:"none",border:"1px solid black","max-width":300,"min-width":150}),t.noselect&&this.$div.addClass("noselect"),this.hide_timeout_id=void 0,this.show_timeout_id=void 0,this.center=!1,this.shown=!1;var n=this;this.$div.on("mousemove",function(e){e.stopPropagation(),i(n)}),this.$div.on("mouseleave",function(e){e.stopPropagation(),n.hide()})}e.prototype.show=function(e,n,r,o,s){if(i(this),void 0===e||this.shown)t(this,n,r,o,s);else{var l=this;a(this),this.show_timeout_id=setTimeout(function(){t(l,n,r,o,s)},e)}};var t=function(e,t,n,r,o){a(e),e.show_timeout_id=void 0,e.$div.empty(),e.$div.append(r),o?e.$div.stop().fadeIn("fast"):e.$div.show();var i=e.$container.offset(),s=t-i.left-(e.center?e.$div.width()/2:0),l=n-i.top-e.$div.height();e.$div.css({top:l,left:s,"z-index":9999}),e.shown=!0},n=function(e,t){i(e),e.hide_timeout_id=void 0,t?e.$div.fadeOut():e.$div.hide(),e.shown=!1},a=function(e){clearTimeout(e.show_timeout_id),e.show_timeout_id=void 0},i=function(e){clearTimeout(e.hide_timeout_id),e.hide_timeout_id=void 0};return e.prototype.showIfNotAlreadyGoingTo=function(e,t,n,r){void 0===this.show_timeout_id&&this.show(e,t,n,r)},e.prototype.hideIfNotAlreadyGoingTo=function(e){void 0===this.hide_timeout_id&&this.hide(e)},e.prototype.hide=function(e){if(a(this),this.shown)if(void 0!==e){var t=this;i(this),this.hide_timeout_id=setTimeout(function(){n(t)},e)}else n(this)},e.prototype.fadeIn=function(e,t,n,r){this.show(e,t,n,r,!0)},e}();e.exports=a},function(e,t,n){var r=n(2),o=n(0),a=function(){function e(e){this.$div=e,this.$ctr=o("<div></div>").css({position:"absolute","overflow-y":"hidden","overflow-x":"hidden"}).appendTo(this.$div),this.$text_ctr=o("<div></div>").css({position:"absolute"}).appendTo(this.$ctr),this.base_font_size=12,this.font_family="Arial",this.font_weight="bold",this.width=0,this.rendering_suppressed=!1}var t=function(e,t){if(!e.rendering_suppressed){e.$text_ctr.empty();var r=t.getTracks();e.minimum_track_height=Number.POSITIVE_INFINITY;for(var a=0;a<r.length;a++)e.minimum_track_height=Math.min(e.minimum_track_height,t.getTrackHeight(r[a]));e.width=32;var i=t.getLabelTops();n(e,t.getVertScroll());for(var s=e.getFontSize(),a=0;a<r.length;a++){var l=o("<span>").css({position:"absolute","font-family":e.font_family,"font-weight":e.font_weight,"font-size":s}).addClass("noselect");l.text(t.getTrackInfo(r[a])),l.appendTo(e.$text_ctr);var u=i[r[a]]+(t.getCellHeight(r[a])-l.outerHeight())/2;l.css({top:u+"px"}),e.width=Math.max(e.width,l[0].clientWidth)}}},n=function(e,t){e.rendering_suppressed||e.$text_ctr.css({top:-t})},a=function(e,t){e.rendering_suppressed||(e.$div.css({width:e.getWidth(),height:t.getCellViewHeight()}),e.$ctr.css({width:e.getWidth(),height:t.getCellViewHeight()}))};return e.prototype.getFontSize=function(){return Math.max(Math.min(this.base_font_size,this.minimum_track_height),7)},e.prototype.getWidth=function(){return this.width+10},e.prototype.addTracks=function(e){t(this,e),a(this,e)},e.prototype.moveTrack=function(e){t(this,e),a(this,e)},e.prototype.setTrackGroupOrder=function(e){t(this,e),a(this,e)},e.prototype.removeTrack=function(e){t(this,e),a(this,e)},e.prototype.setTrackInfo=function(e){t(this,e),a(this,e)},e.prototype.setScroll=function(e){this.setVertScroll(e)},e.prototype.setHorzScroll=function(e){},e.prototype.setVertScroll=function(e){n(this,e.getVertScroll())},e.prototype.setZoom=function(e){this.setVertZoom(e)},e.prototype.setViewport=function(e){t(this,e),a(this,e),n(this,e.getVertScroll())},e.prototype.setVertZoom=function(e){t(this,e),a(this,e)},e.prototype.suppressRendering=function(){this.rendering_suppressed=!0},e.prototype.releaseRendering=function(e){this.rendering_suppressed=!1,t(this,e),a(this,e),n(this,e.getVertScroll())},e.prototype.toSVGGroup=function(e,t,n){for(var o=r.group(t||0,n||0),a=e.getCellTops(),i=e.getTracks(),s=0;s<i.length;s++){var l=i[s],u=a[l]+e.getCellHeight(l)/2,c=e.getTrackInfo(l),d=r.text(c,0,u,this.font_size,this.font_family,this.font_weight,"bottom");d.setAttribute("dy","0.35em"),o.appendChild(d)}return o},e}();e.exports=a},function(e,t,n){var r=n(6),o=n(36),a=n(0),i=function(e){try{var t=e.$canvas[0],n=t.getContext("experimental-webgl",{alpha:!1,antialias:!0});return n.clearColor(1,1,1,1),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),n.viewportWidth=t.width,n.viewportHeight=t.height,n.viewport(0,0,n.viewportWidth,n.viewportHeight),n.enable(n.DEPTH_TEST),n.enable(n.BLEND),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA),n.depthMask(!1),n}catch(e){return null}},s=function(e,t,n){var r=e.ctx.createProgram();if(e.ctx.attachShader(r,t),e.ctx.attachShader(r,n),e.ctx.linkProgram(r),!e.ctx.getProgramParameter(r,e.ctx.LINK_STATUS)){var o=e.ctx.getProgramInfoLog(r);throw e.ctx.deleteProgram(r),"Unable to link shader program: "+o}return r},l=function(e,t,n){var r=e.ctx.createShader(e.ctx[n]);if(e.ctx.shaderSource(r,t),e.ctx.compileShader(r),!e.ctx.getShaderParameter(r,e.ctx.COMPILE_STATUS)){var o=e.ctx.getShaderInfoLog(r);throw e.ctx.deleteShader(r),"Unable to compile shader: "+o}return r},u=function(e){e.ctx=i(e),function(e){var t=r.mat4.create();r.mat4.lookAt(t,[0,0,1],[0,0,0],[0,1,0]),e.mvMatrix=t;var n=r.mat4.create();r.mat4.ortho(n,0,e.ctx.viewportWidth,e.ctx.viewportHeight,0,-5,1e3),e.pMatrix=n}(e)},c=function(e,t){var n=["precision highp float;","attribute float aPosVertex;","attribute float aColVertex;","attribute float aVertexOncoprintColumn;","uniform float columnWidth;","uniform float zoomX;","uniform float zoomY;","uniform mat4 uMVMatrix;","uniform mat4 uPMatrix;","uniform float offsetY;","uniform float positionBitPackBase;","uniform float texSize;","varying float texCoord;","vec3 unpackVec3(float packedVec3, float base) {","\tfloat pos0 = floor(packedVec3 / (base*base));","\tfloat pos0Contr = pos0*base*base;","\tfloat pos1 = floor((packedVec3 - pos0Contr)/base);","\tfloat pos1Contr = pos1*base;","\tfloat pos2 = packedVec3 - pos0Contr - pos1Contr;","\treturn vec3(pos0, pos1, pos2);","}","void main(void) {","\tgl_Position = vec4(unpackVec3(aPosVertex, positionBitPackBase), 1.0);","\tgl_Position[0] += aVertexOncoprintColumn*columnWidth;","\tgl_Position[1] += offsetY;","\tgl_Position *= vec4(zoomX, zoomY, 1.0, 1.0);","\tgl_Position = uPMatrix * uMVMatrix * gl_Position;","\ttexCoord = (aColVertex + 0.5) / texSize;","}"].join("\n"),r=["precision mediump float;","varying float texCoord;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vec2(texCoord, 0.5));","}"].join("\n"),o=l(e,n,"VERTEX_SHADER"),a=l(e,r,"FRAGMENT_SHADER"),i=s(e,o,a);i.vertexPositionAttribute=e.ctx.getAttribLocation(i,"aPosVertex"),e.ctx.enableVertexAttribArray(i.vertexPositionAttribute),i.vertexColorAttribute=e.ctx.getAttribLocation(i,"aColVertex"),e.ctx.enableVertexAttribArray(i.vertexColorAttribute),i.vertexOncoprintColumnAttribute=e.ctx.getAttribLocation(i,"aVertexOncoprintColumn"),e.ctx.enableVertexAttribArray(i.vertexOncoprintColumnAttribute),i.samplerUniform=e.ctx.getUniformLocation(i,"uSampler"),i.pMatrixUniform=e.ctx.getUniformLocation(i,"uPMatrix"),i.mvMatrixUniform=e.ctx.getUniformLocation(i,"uMVMatrix"),i.columnWidthUniform=e.ctx.getUniformLocation(i,"columnWidth"),i.zoomXUniform=e.ctx.getUniformLocation(i,"zoomX"),i.zoomYUniform=e.ctx.getUniformLocation(i,"zoomY"),i.offsetYUniform=e.ctx.getUniformLocation(i,"offsetY"),i.positionBitPackBaseUniform=e.ctx.getUniformLocation(i,"positionBitPackBase"),i.texSizeUniform=e.ctx.getUniformLocation(i,"texSize"),e.shader_program=i},d=function(e,t,n){return Math.max(t,Math.min(n,e))},p=function(){function e(e,t,n,s,l,p,f,h,m,y,g,v,b){this.$div=e,this.$canvas=t,this.$overlay_canvas=n;var _=this;this.layout_numbers={window_width:4+p+4+20,window_height:24+f+4+20,vertical_zoom_area_width:20,horizontal_zoom_area_height:20,padding:4,window_bar_height:20,canvas_left:4,canvas_top:24},this.$div.css({"min-width":this.layout_numbers.window_width,"min-height":this.layout_numbers.window_height,outline:"solid 1px black","background-color":"#ffffff"}),this.$window_bar=a("<div>").css({position:"absolute","min-width":this.layout_numbers.window_width,"min-height":this.layout_numbers.window_bar_height,"background-color":"#cccccc"}).appendTo(this.$div),this.$close_btn=a("<div>").css({position:"absolute",top:3,left:3,"min-width":this.layout_numbers.window_bar_height-6,"min-height":this.layout_numbers.window_bar_height-6,cursor:"pointer"}).appendTo(this.$div),a("<span>").addClass("icon fa fa-times-circle").css("font-size",this.layout_numbers.window_bar_height-6+"px").appendTo(this.$close_btn),this.$close_btn.click(b||function(){}),this.$canvas[0].width=p,this.$canvas[0].height=f,this.$canvas.css({top:this.layout_numbers.canvas_top,left:this.layout_numbers.canvas_left}),this.$overlay_canvas[0].width=p,this.$overlay_canvas[0].height=p,this.$overlay_canvas.css({top:this.layout_numbers.canvas_top,left:this.layout_numbers.canvas_left,outline:"solid 1px #444444"}),this.horizontal_zoom=new o(this.$div,{btn_size:this.layout_numbers.horizontal_zoom_area_height-4,horizontal:!0,width:p,init_val:s.getHorzZoom(),left:4,top:this.layout_numbers.canvas_top+f+4,onChange:function(e){y(e)}}),this.vertical_zoom=new o(this.$div,{btn_size:this.layout_numbers.vertical_zoom_area_width-4,vertical:!0,height:f,init_val:s.getVertZoom(),left:this.layout_numbers.canvas_left+p+4,top:this.layout_numbers.window_bar_height+4,onChange:function(e){g(e)}}),function(){var t=_.layout_numbers.horizontal_zoom_area_height-4,n=_.layout_numbers.vertical_zoom_area_width-4,r=a("<div>").css({position:"absolute","min-height":t,"min-width":n,outline:"solid 1px black",left:_.layout_numbers.canvas_left+p+4,top:_.layout_numbers.canvas_top+f+4,"background-size":n-4+"px "+(t-4)+"px","background-position":"2px 2px",cursor:"pointer"}).addClass("oncoprint-zoomtofit-btn").appendTo(e);r.hover(function(){a(this).css({"background-color":"#cccccc"})},function(){a(this).css({"background-color":"#ffffff"})}),v=v||function(){},r.click(v)}(),u(this),c(this),this.overlay_ctx=n[0].getContext("2d"),this.img=new Image,this.current_rect={top:0,left:0,width:0,height:0,col:0,num_cols:0};var _=this;this.img.onload=function(){_.ctx.drawImage(img,0,0)};var w=function(e,t){return e>=_.current_rect.left+5&&e<=_.current_rect.left+_.current_rect.width-5&&t>=_.current_rect.top+5&&t<=_.current_rect.top+_.current_rect.height-5},x=function(e,t){return e>=_.current_rect.left-5&&e<=_.current_rect.left+_.current_rect.width+5&&t>=_.current_rect.top-5&&t<=_.current_rect.top+_.current_rect.height+5},S=function(e,t){return!M(e,t)&&!T(e,t)&&!A(e,t)&&!O(e,t)&&x(e,t)&&Math.abs(e-(_.current_rect.left+_.current_rect.width))<5},C=function(e,t){return!M(e,t)&&!T(e,t)&&!A(e,t)&&!O(e,t)&&x(e,t)&&Math.abs(e-_.current_rect.left)<5},k=function(e,t){return!M(e,t)&&!T(e,t)&&!A(e,t)&&!O(e,t)&&x(e,t)&&Math.abs(t-_.current_rect.top)<5},E=function(e,t){return!M(e,t)&&!T(e,t)&&!A(e,t)&&!O(e,t)&&x(e,t)&&Math.abs(t-(_.current_rect.top+_.current_rect.height))<5},M=function(e,t){return Math.abs(t-_.current_rect.top)<5&&Math.abs(e-_.current_rect.left)<5},A=function(e,t){return Math.abs(t-(_.current_rect.top+_.current_rect.height))<5&&Math.abs(e-_.current_rect.left)<5},T=function(e,t){return Math.abs(t-_.current_rect.top)<5&&Math.abs(e-(_.current_rect.left+_.current_rect.width))<5},O=function(e,t){return Math.abs(t-(_.current_rect.top+_.current_rect.height))<5&&Math.abs(e-(_.current_rect.left+_.current_rect.width))<5};this.resize_hover=!1;var P=function(e,t){void 0===e?_.resize_hover=!1:S(e,t)?_.resize_hover="r":C(e,t)?_.resize_hover="l":k(e,t)?_.resize_hover="t":E(e,t)?_.resize_hover="b":M(e,t)?_.resize_hover="tl":O(e,t)?_.resize_hover="br":A(e,t)?_.resize_hover="bl":T(e,t)?_.resize_hover="tr":_.resize_hover=!1},j=function(t,n){var r;r=void 0===t?"auto":w(t,n)?"move":S(t,n)||C(t,n)?"ew-resize":k(t,n)||E(t,n)?"ns-resize":M(t,n)||O(t,n)?"nwse-resize":A(t,n)||T(t,n)?"nesw-resize":"auto",e.css("cursor",r)},I=function(e,t,n){var r=parseInt(e.$canvas[0].style.top,10),o=parseInt(e.$canvas[0].style.left,10),a=parseInt(e.$canvas[0].width,10),i=parseInt(e.$canvas[0].height,10),s=t-o,l=n-r;return{mouse_x:s,mouse_y:l,outside:s<0||s>=a||l<0||l>=i}},D=!1,N=!1,R=-1,L=-1,F=-1,z=-1,B=-1,V=-1;a(document).on("mousedown",function(e){var t=_.$div.offset(),n=e.pageX-t.left,r=e.pageY-t.top,o=I(_,n,r);if(!o.outside){var a=o.mouse_x,i=o.mouse_y;D=!1,N=!1,V=s.getOncoprintHeight()/parseInt(_.$canvas[0].height,10),w(a,i)?N="move":S(a,i)?N="resize_r":C(a,i)?N="resize_l":k(a,i)?N="resize_t":E(a,i)?N="resize_b":T(a,i)?N="resize_tr":O(a,i)?N="resize_br":M(a,i)?N="resize_tl":A(a,i)&&(N="resize_bl"),!1!==N&&(D=!0,F=a,z=i,R=Math.floor(s.getHorzScroll()/(s.getCellWidth()+s.getCellPadding())),L=s.getVertScroll(),B=s.getVertZoom(),drag_start_rect=_.current_rect)}}),a(document).on("mousemove",function(e){var t=_.$div.offset(),n=e.pageX-t.left,o=e.pageY-t.top,a=I(_,n,o),u=a.mouse_x,c=a.mouse_y,p=r(_,s),f=s.getCellWidth(!0)*p.x;if(D){e.preventDefault();var m=Math.floor(u/f)-Math.floor(F/f),y=c-z;if("move"===N){var g=y*V;h((R+m)*(s.getCellWidth()+s.getCellPadding()),L+g)}else{var v,p=r(_,s),b=s.getIdOrder().length,w=Math.ceil(l.getWidth()/(s.getCellWidth(!0)+s.getCellPadding(!0,!0))),x=s.getOncoprintHeight(!0)*p.y,S=s.getCellViewHeight()*p.y,C=drag_start_rect.col+drag_start_rect.num_cols,k=drag_start_rect.top+drag_start_rect.height;"resize_r"===N?(m=d(m,w-drag_start_rect.num_cols,b-drag_start_rect.num_cols),m=Math.min(m,b-C),v={top:drag_start_rect.top,col:drag_start_rect.col,num_cols:drag_start_rect.num_cols+m,height:drag_start_rect.height}):"resize_l"===N?(m=d(m,drag_start_rect.num_cols-b,drag_start_rect.num_cols-w),m=Math.max(m,-drag_start_rect.col),v={top:drag_start_rect.top,col:drag_start_rect.col+m,num_cols:drag_start_rect.num_cols-m,height:drag_start_rect.height}):"resize_t"===N?(y=d(y,drag_start_rect.height-x,drag_start_rect.height-S),y=Math.max(y,-drag_start_rect.top),v={top:drag_start_rect.top+y,col:drag_start_rect.col,num_cols:drag_start_rect.num_cols,height:drag_start_rect.height-y}):"resize_b"===N?(y=d(y,S-drag_start_rect.height,x-drag_start_rect.height),y=Math.min(y,x-k),v={top:drag_start_rect.top,col:drag_start_rect.col,num_cols:drag_start_rect.num_cols,height:drag_start_rect.height+y}):"resize_tr"===N?(m=d(m,w-drag_start_rect.num_cols,b-drag_start_rect.num_cols),m=Math.min(m,b-C),y=d(y,drag_start_rect.height-x,drag_start_rect.height-S),y=Math.max(y,-drag_start_rect.top),v={top:drag_start_rect.top+y,col:drag_start_rect.col,num_cols:drag_start_rect.num_cols+m,height:drag_start_rect.height-y}):"resize_tl"===N?(m=d(m,drag_start_rect.num_cols-b,drag_start_rect.num_cols-w),m=Math.max(m,-drag_start_rect.col),y=d(y,drag_start_rect.height-x,drag_start_rect.height-S),y=Math.max(y,-drag_start_rect.top),v={top:drag_start_rect.top+y,col:drag_start_rect.col+m,num_cols:drag_start_rect.num_cols-m,height:drag_start_rect.height-y}):"resize_br"===N?(y=d(y,S-drag_start_rect.height,x-drag_start_rect.height),y=Math.min(y,x-k),m=d(m,w-drag_start_rect.num_cols,b-drag_start_rect.num_cols),m=Math.min(m,b-C),v={top:drag_start_rect.top,col:drag_start_rect.col,num_cols:drag_start_rect.num_cols+m,height:drag_start_rect.height+y}):"resize_bl"===N&&(y=d(y,S-drag_start_rect.height,x-drag_start_rect.height),y=Math.min(y,x-k),m=d(m,drag_start_rect.num_cols-b,drag_start_rect.num_cols-w),m=Math.max(m,-drag_start_rect.col),v={top:drag_start_rect.top,col:drag_start_rect.col+m,num_cols:drag_start_rect.num_cols-m,height:drag_start_rect.height+y});var f=s.getCellWidth(!0)*p.x;v.left=v.col*f,v.width=v.num_cols*f,i(_,null,null,v)}}else a.outside?(j(),P()):(j(u,c),P(u,c)),i(_,s,l)});var G=function(){D&&(["resize_t","resize_b","resize_l","resize_r","resize_tl","resize_tr","resize_bl","resize_br"].indexOf(N)>-1&&m({col:_.current_rect.col,scroll_y_proportion:_.current_rect.top/parseInt(_.$canvas[0].height,10),num_cols:_.current_rect.num_cols,zoom_y:drag_start_rect.height/_.current_rect.height*B}),D=!1,N=!1)};a(document).on("mouseup",function(e){var t=_.$div.offset(),n=e.pageX-t.left,r=e.pageY-t.top;G();var o=I(_,n,r);if(o.outside)j(),P();else{var a=o.mouse_x,u=o.mouse_y;j(a,u),P(a,u)}i(_,s,l)}),function(){var e,t,n,r,o=function(o){o.preventDefault();var a=o.pageX-e,i=o.pageY-t;_.setWindowPosition(n+a,r+i)};_.$window_bar.hover(function(){a(this).css({cursor:"move"})},function(){a(this).css({cursor:"auto"})}),_.$window_bar.on("mousedown",function(i){e=i.pageX,t=i.pageY,n=parseInt(_.$div.css("left"),10),r=parseInt(_.$div.css("top"),10),a(document).on("mousemove",o)}),a(document).on("mouseup click",function(){a(document).off("mousemove",o)})}()}var t=function(e,t,n){var r=e.ctx.createBuffer(),o=t.vertex_data[n].pos_array;e.ctx.bindBuffer(e.ctx.ARRAY_BUFFER,r),e.ctx.bufferData(e.ctx.ARRAY_BUFFER,new Float32Array(o),e.ctx.STATIC_DRAW),r.itemSize=1,r.numItems=o.length/r.itemSize;var a=e.ctx.createBuffer(),i=t.vertex_data[n].col_array;e.ctx.bindBuffer(e.ctx.ARRAY_BUFFER,a),e.ctx.bufferData(e.ctx.ARRAY_BUFFER,new Float32Array(i),e.ctx.STATIC_DRAW),a.itemSize=1,a.numItems=i.length/a.itemSize;var s=e.ctx.createTexture();e.ctx.bindTexture(e.ctx.TEXTURE_2D,s);for(var l=t.vertex_data[n].col_bank,u=Math.pow(2,Math.ceil(Math.log2(l.length/4)));l.length<4*u;)l.push(0);e.ctx.texImage2D(e.ctx.TEXTURE_2D,0,e.ctx.RGBA,u,1,0,e.ctx.RGBA,e.ctx.UNSIGNED_BYTE,new Uint8Array(l)),e.ctx.texParameteri(e.ctx.TEXTURE_2D,e.ctx.TEXTURE_MIN_FILTER,e.ctx.NEAREST),e.ctx.texParameteri(e.ctx.TEXTURE_2D,e.ctx.TEXTURE_MAG_FILTER,e.ctx.NEAREST);var c={texture:s,size:u},d=e.ctx.createBuffer(),p=t.vertex_column_array[n];return e.ctx.bindBuffer(e.ctx.ARRAY_BUFFER,d),e.ctx.bufferData(e.ctx.ARRAY_BUFFER,new Float32Array(p),e.ctx.STATIC_DRAW),d.itemSize=1,d.numItems=p.length/d.itemSize,{position:r,color:a,color_tex:c,column:d}},n=function(e,n,o){if(!e.rendering_suppressed){var a=r(e,n);e.ctx.clearColor(1,1,1,1),e.ctx.clear(e.ctx.COLOR_BUFFER_BIT|e.ctx.DEPTH_BUFFER_BIT);for(var i=n.getTracks(),s=0;s<i.length;s++){var l=i[s],u=n.getCellTops(l,!0),c=t(e,o,l);0!==c.position.numItems&&(e.ctx.useProgram(e.shader_program),e.ctx.bindBuffer(e.ctx.ARRAY_BUFFER,c.position),e.ctx.vertexAttribPointer(e.shader_program.vertexPositionAttribute,c.position.itemSize,e.ctx.FLOAT,!1,0,0),e.ctx.bindBuffer(e.ctx.ARRAY_BUFFER,c.color),e.ctx.vertexAttribPointer(e.shader_program.vertexColorAttribute,c.color.itemSize,e.ctx.FLOAT,!1,0,0),e.ctx.bindBuffer(e.ctx.ARRAY_BUFFER,c.column),e.ctx.vertexAttribPointer(e.shader_program.vertexOncoprintColumnAttribute,c.column.itemSize,e.ctx.FLOAT,!1,0,0),e.ctx.activeTexture(e.ctx.TEXTURE0),e.ctx.bindTexture(e.ctx.TEXTURE_2D,c.color_tex.texture),e.ctx.uniform1i(e.shader_program.samplerUniform,0),e.ctx.uniform1f(e.shader_program.texSizeUniform,c.color_tex.size),e.ctx.uniformMatrix4fv(e.shader_program.pMatrixUniform,!1,e.pMatrix),e.ctx.uniformMatrix4fv(e.shader_program.mvMatrixUniform,!1,e.mvMatrix),e.ctx.uniform1f(e.shader_program.columnWidthUniform,n.getCellWidth(!0)),e.ctx.uniform1f(e.shader_program.zoomXUniform,a.x),e.ctx.uniform1f(e.shader_program.zoomYUniform,a.y),e.ctx.uniform1f(e.shader_program.offsetYUniform,u),e.ctx.uniform1f(e.shader_program.positionBitPackBaseUniform,o.position_bit_pack_base),e.ctx.drawArrays(e.ctx.TRIANGLES,0,c.position.numItems))}}},r=function(e,t){var n=parseInt(e.$canvas[0].width,10)/t.getOncoprintWidthNoColumnPadding(!0),r=parseInt(e.$canvas[0].height,10)/t.getOncoprintHeight(!0);return n=Math.max(0,Math.min(1,n)),r=Math.max(0,Math.min(1,r)),{x:n,y:r}},i=function(e,t,n,o){if(!e.rendering_suppressed){var a,i,s,l,u,c;if(o)a=o.left,i=o.width,s=o.top,l=o.height,u=o.col,c=o.num_cols;else{var d=t.getCellWidth(!0),p=t.getCellPadding(!0),f=n.getViewportOncoprintSpace(t),h=r(e,t);u=Math.floor(f.left/(d+p)),c=Math.min(t.getIdOrder().length-u,Math.floor(f.right/(d+p))-Math.floor(f.left/(d+p))),a=u*d*h.x,i=c*d*h.x,s=f.top*h.y,l=(f.bottom-f.top)*h.y}var m=e.overlay_ctx,y=e.$overlay_canvas[0],g=parseInt(y.width,10),v=parseInt(y.height,10);m.fillStyle="rgba(0,0,0,0)",m.clearRect(0,0,g,v),m.fillStyle="rgba(255,255,255,0.4)",m.fillRect(a,s,i,l);var b="t"===e.resize_hover||"tr"===e.resize_hover||"tl"===e.resize_hover,_="r"===e.resize_hover||"tr"===e.resize_hover||"br"===e.resize_hover,w="b"===e.resize_hover||"br"===e.resize_hover||"bl"===e.resize_hover,x="l"===e.resize_hover||"tl"===e.resize_hover||"bl"===e.resize_hover;m.beginPath(),m.moveTo(a,s),m.strokeStyle=b?"rgba(255,0,0,1)":"rgba(0,0,0,0.75)",m.lineWidth=b?2:1,m.lineTo(a+i,s),m.stroke(),m.beginPath(),m.moveTo(a+i,s),m.strokeStyle=_?"rgba(255,0,0,1)":"rgba(0,0,0,0.75)",m.lineWidth=_?2:1,m.lineTo(a+i,s+l),m.stroke(),m.beginPath(),m.moveTo(a+i,s+l),m.strokeStyle=w?"rgba(255,0,0,1)":"rgba(0,0,0,0.75)",m.lineWidth=w?2:1,m.lineTo(a,s+l),m.stroke(),m.beginPath(),m.moveTo(a,s+l),m.strokeStyle=x?"rgba(255,0,0,1)":"rgba(0,0,0,0.75)",m.lineWidth=x?2:1,m.lineTo(a,s),m.stroke(),e.current_rect={top:s,left:a,width:i,height:l,col:u,num_cols:c}}},s=function(e,t,r){e.rendering_suppressed||(n(e,t,r),i(e,t,r))};return e.prototype.moveTrack=function(e,t){s(this,e,t)},e.prototype.addTracks=function(e,t){s(this,e,t)},e.prototype.removeTrack=function(e,t){s(this,e,t)},e.prototype.setHorzZoom=function(e,t){i(this,e,t),this.horizontal_zoom.setSliderValue(e.getHorzZoom())},e.prototype.setVertZoom=function(e,t){i(this,e,t),this.vertical_zoom.setSliderValue(e.getVertZoom())},e.prototype.setZoom=function(e,t){i(this,e,t),this.horizontal_zoom.setSliderValue(e.getHorzZoom()),this.vertical_zoom.setSliderValue(e.getVertZoom())},e.prototype.setScroll=function(e,t){i(this,e,t)},e.prototype.setHorzScroll=function(e,t){i(this,e,t)},e.prototype.setVertScroll=function(e,t){i(this,e,t)},e.prototype.setViewport=function(e,t){i(this,e,t),this.horizontal_zoom.setSliderValue(e.getHorzZoom()),this.vertical_zoom.setSliderValue(e.getVertZoom())},e.prototype.sort=function(e,t){s(this,e,t)},e.prototype.setTrackData=function(e,t){s(this,e,t)},e.prototype.shareRuleSet=function(e,t){s(this,e,t)},e.prototype.setRuleSet=function(e,t){s(this,e,t)},e.prototype.setIdOrder=function(e,t){s(this,e,t)},e.prototype.suppressRendering=function(){this.rendering_suppressed=!0},e.prototype.releaseRendering=function(e,t){this.rendering_suppressed=!1,s(this,e,t)},e.prototype.hideIds=function(e,t){s(this,e,t)},e.prototype.setWindowPosition=function(e,t){this.$div.css({top:t,left:e})},e.prototype.setWidth=function(e,t,n){this.$canvas[0].width=e,this.$overlay_canvas[0].width=e,u(this),c(this),this.overlay_ctx=this.$overlay_canvas[0].getContext("2d"),s(this,t,n)},e}();e.exports=p},function(e,t,n){var r=n(0),o=function(){function e(e,n){this.$div=r("<div>").css({position:"absolute",top:n.top||0,left:n.left||0}).appendTo(e),n=n||{},n.btn_size=n.btn_size||13,this.onChange=n.onChange||function(){},o(this,n),this.value=n.init_val||.5,this.slider_bar_size=(this.orientation===t?n.height:n.width)-2*n.btn_size,s(this)}var t="v",n=function(e){return Math.max(Math.min(e,1),0)},o=function(e,n){var o=e.$div,a=Math.round(.7*n.btn_size),i=Math.round((n.btn_size-a)/2),s=r("<div>").css({position:"absolute","background-color":"#ffffff",outline:"solid 1px black"}).appendTo(o),l=r("<div>").css({position:"absolute","background-color":"#ffffff",border:"solid 1px black","border-radius":"3px",cursor:"pointer"}).appendTo(o),u=r("<div>").css({position:"absolute","min-height":n.btn_size,"min-width":n.btn_size,"background-color":"#ffffff",border:"solid 1px black","border-radius":"3px",cursor:"pointer"}).appendTo(o);r("<span>").addClass("icon fa fa-plus").css({position:"absolute",top:i,left:i,"min-width":a,"min-height":a}).appendTo(u);var c=r("<div>").css({position:"absolute","min-height":n.btn_size,"min-width":n.btn_size,"background-color":"#ffffff",border:"solid 1px black","border-radius":"3px",cursor:"pointer"}).appendTo(o);r("<span>").addClass("icon fa fa-minus").css({position:"absolute",top:i,left:i,"min-width":a,"min-height":a}).appendTo(c),n.vertical?(s.css({"min-height":n.height-2*n.btn_size,"min-width":Math.round(n.btn_size/5)}),l.css({"min-height":Math.round(n.btn_size/2),"min-width":n.btn_size}),u.css({top:0,left:0}),c.css({top:n.height-n.btn_size,left:0}),s.css({top:n.btn_size,left:.4*n.btn_size}),l.css({left:0}),e.orientation=t):(s.css({"min-height":Math.round(n.btn_size/5),"min-width":n.width-2*n.btn_size}),l.css({"min-height":n.btn_size,"min-width":Math.round(n.btn_size/2)}),u.css({top:0,left:n.width-n.btn_size}),c.css({top:0,left:0}),s.css({top:.4*n.btn_size,left:n.btn_size}),l.css({top:0}),e.orientation="h"),u.click(function(){e.value/=.7,n.onChange(e.value)}),c.click(function(){e.value*=.7,n.onChange(e.value)}),[l,u,c].map(function(e){e.hover(function(){r(this).css({"background-color":"#cccccc"})},function(){r(this).css({"background-color":"#ffffff"})})}),e.$slider=l,e.$plus_btn=u,e.$minus_btn=c,function(){var n,o,a,i=function(r){r.stopPropagation(),r.preventDefault();var a;a=e.orientation===t?n-r.pageY:r.pageX-n;var i=a/e.slider_bar_size;e.setSliderValue(o+i)},s=function(){a&&o!==e.value&&e.onChange(e.value),a=!1};e.$slider.on("mousedown",function(s){n=e.orientation===t?s.pageY:s.pageX,o=e.value,a=!0,r(document).on("mousemove",i)}),r(document).on("mouseup click",function(){r(document).off("mousemove",i),s()})}()},a=function(e,n){var r=e.$slider,o=i(e);e.orientation===t?r.css("top",o.bottom*(1-n)+o.top*n):"h"===e.orientation&&r.css("left",o.left*(1-n)+o.right*n)},i=function(e){return e.orientation===t?{bottom:parseInt(e.$minus_btn.css("top"),10)-parseInt(e.$slider.css("min-height"),10),top:parseInt(e.$plus_btn.css("top"),10)+parseInt(e.$plus_btn.css("min-height"),10)}:{left:parseInt(e.$minus_btn.css("left"),10)+parseInt(e.$minus_btn.css("min-width"),10),right:parseInt(e.$plus_btn.css("left"),10)-parseInt(e.$slider.css("min-width"),10)}},s=function(e){a(e,e.value)};return e.prototype.setSliderValue=function(e,t){this.value=n(e),s(this)},e}();e.exports=o}])}).call(t,n(90))},function(e,t,n){"use strict";function r(e,t,n,r,c){var d=m(e,t),p=g(e,t);p&&a(e,n),d&&n.keepSorted(!1),s(e,t,n),C(e,t,n),k(e,t,n),E(e,t,n),A(e,t,n,r,c),w(e,t,n),o(e,t,n),x(e,t,n),u(e,t,n),S(e,t,n,r),l(e,t,n),d&&n.keepSorted(!0),p&&i(e,n)}function o(e,t,n){var r=z.default.sortBy(z.default.uniq((t.heatmapTracks||[]).concat(t.genesetHeatmapTracks||[]).map(function(e){return e.trackGroupIndex}))),o=z.default.sortBy(z.default.uniq(e.heatmapTracks.concat(e.genesetHeatmapTracks).map(function(e){return e.trackGroupIndex})));z.default.xor(o,r).length&&n.setTrackGroupSortPriority([L.CLINICAL_TRACK_GROUP_INDEX].concat(o).concat(L.GENETIC_TRACK_GROUP_INDEX))}function a(e,t){t.suppressRendering(),e.onSuppressRendering&&e.onSuppressRendering()}function i(e,t){t.releaseRendering(e.onReleaseRendering)}function s(e,t,n){e.suppressRendering&&!t.suppressRendering&&a(e,n)}function l(e,t,n){!e.suppressRendering&&t.suppressRendering&&i(e,n)}function u(e,t,n){e.horzZoomToFitIds!==t.horzZoomToFitIds&&n.updateHorzZoomToFitIds(e.horzZoomToFitIds||[])}function c(e,t){var n=z.default.keyBy(t,function(e){return e.key}),r=0,o=0,a=0,i=!0,s=!1,l=void 0;try{for(var u,c=e[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var d=u.value,p=n[d.key];p?(o+=1,p.data!==d.data&&(a+=1)):r+=1}}catch(e){s=!0,l=e}finally{try{!i&&c.return&&c.return()}finally{if(s)throw l}}return r+(t.length-o)+a}function d(e,t){return e.length!==t.length||c(e,t)>0}function p(e,t){return!!d(e.geneticTracks||[],t.geneticTracks||[])||(O(e)!==O(t)||P(e)!==P(t))}function f(e,t){if(d(e.clinicalTracks||[],t.clinicalTracks||[]))return!0}function h(e,t){if(d(e.heatmapTracks,t.heatmapTracks||[])||d(e.genesetHeatmapTracks,t.genesetHeatmapTracks||[]))return!0}function m(e,t){return p(e,t)||f(e,t)||h(e,t)}function y(e){return(e.geneticTracks||[]).concat(e.genesetHeatmapTracks||[]).concat(e.clinicalTracks||[]).concat(e.heatmapTracks||[])}function g(e,t){return!e.suppressRendering&&(M(e,t)||c(y(e),y(t))>1)}function v(e){return e.sortConfig&&e.sortConfig.order}function b(e){return e.profile_data}function _(e){var t={},n=v(e);return n?t={type:"order",order:n}:e.sortConfig&&void 0!==e.sortConfig.clusterHeatmapTrackGroupIndex&&(t={type:"cluster",track_group_index:e.sortConfig.clusterHeatmapTrackGroupIndex,clusterValueFn:b}),t}function w(e,t,n){var r=_(t),o=_(e);("order"===r.type&&"order"===o.type&&r.order!==o.order||!z.default.isEqual(r,o))&&n.setSortConfig(o)}function x(e,t,n){e.hiddenIds!==t.hiddenIds&&n.hideIds(e.hiddenIds||[],!0)}function S(e,t,n,r){var o=r(),a=e.clinicalTracks.map(function(e){return o[e.key]});e.showClinicalTrackLegends&&!t.showClinicalTrackLegends?n.showTrackLegends(a):!e.showClinicalTrackLegends&&t.showClinicalTrackLegends&&n.hideTrackLegends(a)}function C(e,t,n){e.showWhitespaceBetweenColumns!==t.showWhitespaceBetweenColumns&&n.setCellPaddingOn(!!e.showWhitespaceBetweenColumns)}function k(e,t,n){e.showMinimap!==t.showMinimap&&n.setMinimapVisible(!!e.showMinimap)}function E(e,t,n){e.onMinimapClose&&e.onMinimapClose!==t.onMinimapClose&&n.onMinimapClose(e.onMinimapClose)}function M(e,t){return(0,B.getGeneticTrackRuleSetParams)(e.distinguishMutationType,e.distinguishDrivers)!==(0,B.getGeneticTrackRuleSetParams)(t.distinguishMutationType,t.distinguishDrivers)}function A(e,t,n,r,o){var a={genetic:void 0,genesetHeatmap:void 0,heatmap:void 0,heatmap01:void 0},i=r();if(t.geneticTracks&&t.geneticTracks.length&&!M(e,t)&&(a.genetic=i[t.geneticTracks[0].key]),t.genesetHeatmapTracks&&t.genesetHeatmapTracks.length&&(a.genesetHeatmap=i[t.genesetHeatmapTracks[0].key]),t.heatmapTracks&&t.heatmapTracks.length){var s=void 0,l=void 0,u=!0,c=!1,d=void 0;try{for(var p,f=t.heatmapTracks[Symbol.iterator]();!(u=(p=f.next()).done);u=!0){var h=p.value;if(void 0===s&&"METHYLATION"===h.molecularAlterationType?s=i[h.key]:void 0===l&&(l=i[h.key]),void 0!==s&&void 0!==l)break}}catch(e){c=!0,d=e}finally{try{!u&&f.return&&f.return()}finally{if(c)throw d}}a.heatmap=l,a.heatmap01=s}else if(t.genesetHeatmapTracks){var m=!0,y=!1,g=void 0;try{for(var v,b=t.genesetHeatmapTracks[Symbol.iterator]();!(m=(v=b.next()).done);m=!0){var _=v.value;if(_.expansionTrackList&&_.expansionTrackList.length){a.heatmap=i[_.expansionTrackList[0].key];break}}}catch(e){y=!0,g=e}finally{try{!m&&b.return&&b.return()}finally{if(y)throw g}}}var w=z.default.keyBy(t.geneticTracks||[],function(e){return e.key}),x=!0,S=!1,C=void 0;try{for(var k,E=e.geneticTracks[Symbol.iterator]();!(x=(k=E.next()).done);x=!0){var A=k.value;I(A,w[A.key],r,o,n,e,t,a),delete w[A.key]}}catch(e){S=!0,C=e}finally{try{!x&&E.return&&E.return()}finally{if(S)throw C}}var T=!0,O=!1,P=void 0;try{for(var j,L=(t.geneticTracks||[])[Symbol.iterator]();!(T=(j=L.next()).done);T=!0){var F=j.value;w.hasOwnProperty(F.key)&&I(void 0,w[F.key],r,o,n,e,t,a)}}catch(e){O=!0,P=e}finally{try{!T&&L.return&&L.return()}finally{if(O)throw P}}var B=z.default.keyBy(t.clinicalTracks||[],function(e){return e.key}),V=!0,G=!1,H=void 0;try{for(var U,q=e.clinicalTracks[Symbol.iterator]();!(V=(U=q.next()).done);V=!0){var W=U.value;D(W,B[W.key],r,n,e),delete B[W.key]}}catch(e){G=!0,H=e}finally{try{!V&&q.return&&q.return()}finally{if(G)throw H}}var Z=!0,Y=!1,K=void 0;try{for(var X,Q=(t.clinicalTracks||[])[Symbol.iterator]();!(Z=(X=Q.next()).done);Z=!0){var J=X.value;B.hasOwnProperty(J.key)&&D(void 0,B[J.key],r,n,e)}}catch(e){Y=!0,K=e}finally{try{!Z&&Q.return&&Q.return()}finally{if(Y)throw K}}var $=z.default.keyBy(t.genesetHeatmapTracks||[],function(e){return e.key}),ee=!0,te=!1,ne=void 0;try{for(var re,oe=e.genesetHeatmapTracks[Symbol.iterator]();!(ee=(re=oe.next()).done);ee=!0){var ae=re.value;N(ae,$[ae.key],r,n,e,a),delete $[ae.key]}}catch(e){te=!0,ne=e}finally{try{!ee&&oe.return&&oe.return()}finally{if(te)throw ne}}var ie=!0,se=!1,le=void 0;try{for(var ue,ce=(t.genesetHeatmapTracks||[])[Symbol.iterator]();!(ie=(ue=ce.next()).done);ie=!0){var de=ue.value;$.hasOwnProperty(de.key)&&N(void 0,$[de.key],r,n,e,a)}}catch(e){se=!0,le=e}finally{try{!ie&&ce.return&&ce.return()}finally{if(se)throw le}}var pe=z.default.keyBy(t.heatmapTracks||[],function(e){return e.key}),fe=!0,he=!1,me=void 0;try{for(var ye,ge=e.heatmapTracks[Symbol.iterator]();!(fe=(ye=ge.next()).done);fe=!0){var ve=ye.value;R(ve,pe[ve.key],r,function(){},n,e,{},a),delete pe[ve.key]}}catch(e){he=!0,me=e}finally{try{!fe&&ge.return&&ge.return()}finally{if(he)throw me}}var be=!0,_e=!1,we=void 0;try{for(var xe,Se=(t.heatmapTracks||[])[Symbol.iterator]();!(be=(xe=Se.next()).done);be=!0){var Ce=xe.value;pe.hasOwnProperty(Ce.key)&&R(void 0,pe[Ce.key],r,function(){},n,e,{},a)}}catch(e){_e=!0,we=e}finally{try{!be&&Se.return&&Se.return()}finally{if(_e)throw we}}}function T(e,t,n,r){if(!e&&t){var o=n[t.key];return void 0!==o&&(r.removeTrack(o),delete n[t.key]),!0}return!1}function O(e){return e.distinguishMutationType&&e.sortConfig&&e.sortConfig.sortByMutationType}function P(e){return e.distinguishDrivers&&e.sortConfig&&e.sortConfig.sortByDrivers}function j(e,t,n,r,o,a,i,s,l){var u=t&&t.expansionTrackList?t.expansionTrackList:[],c=e&&e.expansionTrackList?e.expansionTrackList:[],d=z.default.keyBy(u,function(e){return e.key}),p=!0,f=!1,h=void 0;try{for(var m,y=c[Symbol.iterator]();!(p=(m=y.next()).done);p=!0){var g=m.value;l(g,d[g.key],n,r,o,a,i,s,e.key),delete d[g.key]}}catch(e){f=!0,h=e}finally{try{!p&&y.return&&y.return()}finally{if(f)throw h}}var v=!0,b=!1,_=void 0;try{for(var w,x=u[Symbol.iterator]();!(v=(w=x.next()).done);v=!0){var S=w.value;d.hasOwnProperty(S.key)&&l(void 0,d[S.key],n,r,o,a,i,s)}}catch(e){b=!0,_=e}finally{try{!v&&x.return&&x.return()}finally{if(b)throw _}}}function I(e,t,n,r,o,a,i,s,l){var u=n();if(!T(e,t,u,o))if(e&&!t){var c={rule_set_params:(0,B.getGeneticTrackRuleSetParams)(a.distinguishMutationType,a.distinguishDrivers),label:e.label,track_label_color:e.labelColor||void 0,target_group:L.GENETIC_TRACK_GROUP_INDEX,sortCmpFn:(0,V.getGeneticTrackSortComparator)(O(a),P(a)),description:e.oql,data_id_key:"uid",data:e.data,tooltipFn:(0,G.makeGeneticTrackTooltip)(!0,r),track_info:e.info,removeCallback:function(){delete n()[e.key],e.removeCallback&&e.removeCallback()},expandCallback:e.expansionCallback||void 0,expandButtonTextGetter:function(){return"Expand"},expansion_of:l?u[l]:void 0},d=o.addTracks([c])[0];u[e.key]=d,void 0!==s.genetic&&o.shareRuleSet(s.genetic,d),s.genetic=d}else if(e&&t){var p=u[e.key],f=O(a),h=P(a);f===O(i)&&h===P(i)||o.setTrackSortComparator(p,(0,V.getGeneticTrackSortComparator)(O(a),P(a))),e.data!==t.data&&o.setTrackData(p,e.data,"uid"),e.info!==t.info&&o.setTrackInfo(p,e.info),M(a,i)&&(void 0!==s.genetic?o.shareRuleSet(s.genetic,p):o.setRuleSet(p,(0,B.getGeneticTrackRuleSetParams)(a.distinguishMutationType,a.distinguishDrivers))),s.genetic=p,e.expansionTrackList&&e.expansionTrackList.length>0?o.disableTrackExpansion(p):e.expansionCallback&&o.enableTrackExpansion(p),j(e,t,n,r,o,a,i,s,I)}}function D(e,t,n,r,o){var a=n();if(!T(e,t,a,r))if(e&&!t){var i=(0,B.getClinicalTrackRuleSetParams)(e);i.legend_label=e.label,i.exclude_from_legend=!o.showClinicalTrackLegends,i.na_legend_label=e.na_legend_label;var s={rule_set_params:i,data:e.data,data_id_key:"uid",label:e.label,description:(e.label||"").trim()===(e.description||"").trim()?void 0:e.description,removable:!0,removeCallback:function(){delete n()[e.key],o.onDeleteClinicalTrack&&o.onDeleteClinicalTrack(e.key)},sort_direction_changeable:!0,tooltipFn:(0,G.makeClinicalTrackTooltip)(e,!0),sortCmpFn:(0,V.getClinicalTrackSortComparator)(e),init_sort_direction:0,target_group:L.CLINICAL_TRACK_GROUP_INDEX,onSortDirectionChange:o.onTrackSortDirectionChange};a[e.key]=r.addTracks([s])[0]}else if(e&&t){var l=a[e.key];e.data!==t.data&&r.setTrackData(l,e.data,"uid"),r.setTrackTooltipFn(l,(0,G.makeClinicalTrackTooltip)(e,!0))}}function N(e,t,n,r,o,a){var i=n();if(T(e,t,i,r))return void j(void 0,t,n,function(){},r,o,{},a,R);if(e&&!t){var s={rule_set_params:(0,B.getGenesetHeatmapTrackRuleSetParams)(),data:e.data,data_id_key:"uid",has_column_spacing:!1,track_padding:0,label:e.label,html_label:(0,G.linebreakGenesetId)(e.label),target_group:e.trackGroupIndex,sort_direction_changeable:!0,sortCmpFn:V.heatmapTrackSortComparator,init_sort_direction:0,description:"Gene set scores from "+e.molecularProfileId,link_url:e.trackLinkUrl,tooltipFn:(0,G.makeHeatmapTrackTooltip)(e.molecularAlterationType,!0),onSortDirectionChange:o.onTrackSortDirectionChange,expandCallback:e.expansionCallback,expandButtonTextGetter:function(e){return(e?"More":"Show")+"  genes"}},l=r.addTracks([s])[0];i[e.key]=l,void 0!==a.genesetHeatmap&&r.shareRuleSet(a.genesetHeatmap,l),a.genesetHeatmap=l,j(e,void 0,n,function(){},r,o,{},a,R)}else if(e&&t){var u=i[e.key];e.data!==t.data&&r.setTrackData(u,e.data,"uid"),r.setTrackTooltipFn(u,(0,G.makeHeatmapTrackTooltip)(e.molecularAlterationType,!0)),j(e,t,n,function(){},r,o,{},a,R)}}function R(e,t,n,r,o,a,i,s,l){var u=n();if(!T(e,t,u,o))if(e&&!t){var c={rule_set_params:(0,B.getHeatmapTrackRuleSetParams)(e.molecularAlterationType),data:e.data,data_id_key:"uid",has_column_spacing:!1,track_padding:0,label:e.label,track_label_color:e.labelColor||void 0,target_group:e.trackGroupIndex,removable:!0,removeCallback:function(){delete n()[e.key],e.onRemove()},sort_direction_changeable:!0,sortCmpFn:V.heatmapTrackSortComparator,init_sort_direction:0,description:e.label+" data from "+e.molecularProfileId,tooltipFn:(0,G.makeHeatmapTrackTooltip)(e.molecularAlterationType,!0),track_info:e.info||"",onSortDirectionChange:a.onTrackSortDirectionChange,expansion_of:l?u[l]:void 0},d=o.addTracks([c])[0];u[e.key]=d;var p="heatmap";"METHYLATION"===e.molecularAlterationType&&(p="heatmap01"),void 0!==s[p]&&o.shareRuleSet(s[p],d),s[p]=d}else if(e&&t){var f=u[e.key];e.data!==t.data&&o.setTrackData(f,e.data,"uid"),e.info!==t.info&&void 0!==e.info&&o.setTrackInfo(f,e.info),o.setTrackTooltipFn(f,(0,G.makeHeatmapTrackTooltip)(e.molecularAlterationType,!0))}}Object.defineProperty(t,"__esModule",{value:!0}),t.transition=r,t.transitionTrackGroupSortPriority=o,t.numTracksWhoseDataChanged=c,t.heatmapClusterValueFn=b,t.transitionSortConfig=w;var L=n(1069),F=n(3),z=function(e){return e&&e.__esModule?e:{default:e}}(F),B=n(1007),V=n(1186),G=n(1187)},function(e,t,n){"use strict";function r(e){for(var t={},n=0;n<e.length;n++)for(var r=[].concat(e[n]),o=0;o<r.length;o++)t[r[o]]=n;return t}function o(e){return e>0?1:e<0?-1:0}function a(e,t){function n(e){var t=[];return e.disp_fusion?t.push(0):t.push(1),t.push(i[e.disp_cna+""]),t.push(s(e.disp_mut)),t.push(u[e.disp_germ+""]),t.push(l[e.disp_mrna+""]),t.push(l[e.disp_prot+""]),t}function o(e){return n(e)}function a(e){return[+!!e.na].concat(n(e)).concat([e.sample?e.sample:e.patient])}var i=r(["amp","homdel","gain","hetloss","diploid",void 0]),s=function(){var n=void 0;return e||t?(!e&&t?n=r([["inframe_rec","missense_rec","promoter_rec","trunc_rec","inframe","promoter","trunc"],"missense",void 0]):e&&!t?n=r([["trunc","trunc_rec"],["inframe","inframe_rec"],["promoter","promoter_rec"],["missense","missense_rec"],void 0,!0,!1]):e&&t&&(n=r(["trunc_rec","inframe_rec","promoter_rec","missense_rec","trunc","inframe","promoter","missense",void 0,!0,!1])),function(e){return n[e]}):function(e){return{true:1,false:2}[!!e+""]}}(),l=r(["up","down",void 0]),u=r([!0,!1,void 0]);return{preferred:a,mandatory:o,isVector:!0}}function i(e){return function(t,n){return t.na&&n.na?0:t.na&&!n.na?2:!t.na&&n.na?-2:t[e]<n[e]?-1:t[e]===n[e]?0:1}}function s(e,t){return e.na&&t.na?0:e.na&&!t.na?2:!e.na&&t.na?-2:(0,p.default)(e.attr_val,t.attr_val)}function l(e){return function(t,n){if(t.na&&n.na)return 0;if(t.na&&!n.na)return 2;if(!t.na&&n.na)return-2;for(var r=0,a=0,i=0;i<e.length;i++)r+=t.attr_val[e[i]]||0,a+=n.attr_val[e[i]]||0;if(0===r&&0===a)return 0;if(0===r)return 1;if(0===a)return-1;for(var s=0,l=0,i=0;i<e.length;i++)t.attr_val[e[i]]>t.attr_val[e[s]]&&(s=i),n.attr_val[e[i]]>n.attr_val[e[l]]&&(l=i);if(s<l)return-1;if(s>l)return 1;var u=e[s];return o(t.attr_val[u]/r-n.attr_val[u]/a)}}function u(e){return function(t,n){var r=e(t,n);return 0===r?t.sample?(0,p.default)(t.sample,n.sample):(0,p.default)(t.patient,n.patient):r}}function c(e){if("number"===e.datatype){var t=i("attr_val");return{preferred:u(t),mandatory:t}}if("string"===e.datatype)return{preferred:u(s),mandatory:s};if("counts"===e.datatype){var n=l(e.countsCategoryLabels);return{preferred:u(n),mandatory:n}}}Object.defineProperty(t,"__esModule",{value:!0}),t.heatmapTrackSortComparator=void 0,t.getGeneticTrackSortComparator=a,t.stringClinicalComparator=s,t.alphabeticalDefault=u,t.getClinicalTrackSortComparator=c;var d=n(920),p=function(e){return e&&e.__esModule?e:{default:e}}(d);t.heatmapTrackSortComparator=function(){var e=i("profile_data");return{preferred:u(e),mandatory:e}}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return'<a href="'+(0,p.getSampleViewUrl)(e,t)+'" target="_blank">'+t+"</a>"}function a(e,t){return'<a href="'+(0,p.getPatientViewUrl)(e,t)+'" target="_blank">'+t+"</a>"}function i(e,t){var n=(0,h.default)('<a href="#" '+(t?"":'style="color:red;"')+' oncontextmenu="return false;">'+e+"</a>");return n.ready(function(){n.click(function(){y.default.getGenePanelUsingGET({genePanelId:e}).then(function(t){var n=t.genes.map(function(e){return e.hugoGeneSymbol}).sort(),r=open("","_blank","width=500,height=500");if(r){var o=r.document.createElement("div");r.document.body.appendChild(o),(0,h.default)('<h3 style="text-align:center;">'+e+"</h3><br>").appendTo(o),(0,h.default)("<span>"+n.join("<br>")+"</span>").appendTo(o)}})})}),n}function s(e){return(0,h.default)("<div>").text(e).html().replace(/_/g,"_&#8203;").replace(/\./g,".&#8203;")}function l(e,t){return function(n){var r="";if("counts"===e.datatype)for(var i=0;i<e.countsCategoryLabels.length;i++)r+='<span style="color:'+e.countsCategoryFills[i]+';font-weight:bold;">'+e.countsCategoryLabels[i]+"</span>: "+n.attr_val_counts[e.countsCategoryLabels[i]]+"<br>";else{var s=n.attr_val_counts&&Object.keys(n.attr_val_counts)||[];if(s.length>1){r+=e.label+":<br>";for(var l=0;l<s.length;l++){var u=s[l];r+="<b>"+u+"</b>: "+n.attr_val_counts[u]+"<br>"}}else if(1===s.length){var c=s[0];"number"===e.datatype&&(c=parseFloat(s[0]).toFixed(2),".00"===c.substring(c.length-3)&&(c=c.substring(0,c.length-3))),r+=e.label+": <b>"+c+"</b><br>"}}return r+="<span>"+(n.sample?"Sample":"Patient")+": ",r+=t?n.sample?o(n.study_id,n.sample):a(n.study_id,n.patient):n.sample?n.sample:n.patient,r+="</span>",(0,h.default)("<div>").addClass(b).append(r)}}function u(e,t){return function(n){var r="",i="N/A";switch(e){case"MRNA_EXPRESSION":r="MRNA: ";break;case"PROTEIN_LEVEL":r="PROT: ";break;case"METHYLATION":r="METHYLATION: "}null!==n.profile_data&&void 0!==n.profile_data&&(i=n.profile_data.toFixed(2));var s=r+"<b>"+i+"</b><br>";return s+=n.sample?t?o(n.study,n.sample):n.sample:t?a(n.study,n.patient):n.patient,(0,h.default)("<div>").addClass(b).append(s)}}function c(e,t){var n=[],r={},o=void 0,a={},i=void 0,s=[];return e&&(n=v.default.uniq(e.map(function(e){return e.genePanelId}).filter(function(e){return!!e})),o=v.default.uniq(e.map(function(e){return e.molecularProfileId})),a=v.default.keyBy(o),r=v.default.keyBy(n)),t&&(i=v.default.uniq(t.map(function(e){return e.molecularProfileId})).filter(function(e){return!a[e]}),s=v.default.uniq(t.map(function(e){return e.genePanelId})).filter(function(e){return!!e&&!r[e]})),{dispProfiledGenePanelIds:n,dispNotProfiledGenePanelIds:s,dispProfiledIn:o,dispNotProfiledIn:i,dispAllProfiled:!(!(o&&o.length&&i)||i.length),dispNotProfiled:!(!(i&&i.length&&o)||o.length)}}function d(e,t){function n(e){return e.map(function(e){var t=(0,h.default)("<span>");return t.append("<b>"+e.amino_acid_change+"</b>"),e.cancer_hotspots_hotspot&&t.append('<img src="images/cancer-hotspots.svg" title="Hotspot" style="height:11px; width:11px; margin-left:3px"/>'),e.oncokb_oncogenic&&t.append('<img src="images/oncokb-oncogenic-1.svg" title="'+e.oncokb_oncogenic+'" style="height:11px; width:11px;margin-left:3px"/>'),e.driver_filter&&"Putative_Driver"===e.driver_filter&&t.append('<img src="images/driver.png" title="'+e.driver_filter+": "+e.driver_filter_annotation+'" alt="driver filter" style="height:11px; width:11px;margin-left:3px"/>'),e.driver_tiers_filter&&t.append('<img src="images/driver_tiers.png" title="'+e.driver_tiers_filter+": "+e.driver_tiers_filter_annotation+'" alt="driver tiers filter" style="height:11px; width:11px;margin-left:3px"/>'),t})}function r(e){return e.map(function(e){var t=(0,h.default)("<span>");return t.append("<b>"+e.cna+"</b>"),e.oncokb_oncogenic&&t.append('<img src="images/oncokb-oncogenic-1.svg" title="'+e.oncokb_oncogenic+'" style="height:11px; width:11px;margin-left:3px"/>'),t})}function s(){var e=(0,h.default)('<small style="color: #ff0000">');return e.append("&nbsp;Germline"),e}var l={"-2":"HOMODELETED","-1":"HETLOSS",1:"GAIN",2:"AMPLIFIED"};return function(u){for(var d=(0,h.default)("<div>").addClass(b),p=[],f=[],m=[],y=[],g=[],v=0;v<u.data.length;v++){var _=u.data[v],w=_.molecularProfileAlterationType;switch(w){case"MUTATION_EXTENDED":var x={};x.amino_acid_change=_.proteinChange,x.driver_filter=_.driverFilter,x.driver_filter_annotation=_.driverFilterAnnotation,x.driver_tiers_filter=_.driverTiersFilter,x.driver_tiers_filter_annotation=_.driverTiersFilterAnnotation,_.isHotspot&&(x.cancer_hotspots_hotspot=!0);var S=_.oncoKbOncogenic;S&&(x.oncokb_oncogenic=S),("fusion"===_.alterationSubType?g:p).push(x);break;case"COPY_NUMBER_ALTERATION":if(l.hasOwnProperty(_.value)){var C={cna:l[_.value]},k=_.oncoKbOncogenic;k&&(C.oncokb_oncogenic=k),f.push(C)}break;case"MRNA_EXPRESSION":case"PROTEIN_LEVEL":var E=_.alterationSubType,M="MRNA_EXPRESSION"===w?m:y;"up"===E?M.push("UPREGULATED"):"down"===E&&M.push("DOWNREGULATED")}}if(g.length>0){d.append("Fusion: "),g=n(g);for(var A=0;A<g.length;A++)A>0&&d.append(","),d.append(g[A]);d.append("<br>")}if(p.length>0){d.append("Mutation: "),p=n(p);for(var A=0;A<p.length;A++)A>0&&d.append(","),d.append(p[A]);u.disp_germ&&d.append(s()),d.append("<br>")}if(f.length>0){d.append("Copy Number Alteration: "),f=r(f);for(var A=0;A<f.length;A++)A>0&&d.append(","),d.append(f[A]);d.append("<br>")}m.length>0&&d.append("MRNA: <b>"+m.join(", ")+"</b><br>"),y.length>0&&d.append("PROT: <b>"+y.join(", ")+"</b><br>");var T=c(u.profiled_in,u.not_profiled_in);if(T.dispProfiledGenePanelIds.length||T.dispNotProfiledGenePanelIds.length){d.append("Gene Panels: ");for(var O=!1,P=0;P<T.dispProfiledGenePanelIds.length;P++)O&&d.append(","),O=!0,d.append(i(T.dispProfiledGenePanelIds[P],!0));for(var j=0;j<T.dispNotProfiledGenePanelIds.length;j++)O&&d.append(","),O=!0,d.append(i(T.dispNotProfiledGenePanelIds[j],!1));d.append("<br>")}if(T.dispAllProfiled)d.append("Profiled in all selected molecular profiles."),d.append("<br>");else if(T.dispNotProfiled)d.append("Not profiled in selected molecular profiles."),d.append("<br>");else{var I=t&&t();T.dispProfiledIn&&T.dispProfiledIn.length&&(d.append("Profiled in: "+T.dispProfiledIn.map(function(e){return I?I[e].name:e}).join(", ")),d.append("<br>")),T.dispNotProfiledIn&&T.dispNotProfiledIn.length&&(d.append("<span style='color:red; font-weight:bold'>Not profiled in: "+T.dispNotProfiledIn.map(function(e){return I?I[e].name:e}).join(", ")+"</span>"),d.append("<br>"))}var D=void 0;return D=u.sample?e?o(u.study_id,u.sample):u.sample:u.patient?e?a(u.study_id,u.patient):u.patient:"",d.append(D),d}}Object.defineProperty(t,"__esModule",{value:!0}),t.TOOLTIP_DIV_CLASS=void 0,t.linebreakGenesetId=s,t.makeClinicalTrackTooltip=l,t.makeHeatmapTrackTooltip=u,t.makeGeneticTrackTooltip_getCoverageInformation=c,t.makeGeneticTrackTooltip=d;var p=n(25),f=n(90),h=r(f),m=n(17),y=r(m),g=n(3),v=r(g),b=t.TOOLTIP_DIV_CLASS="oncoprint__tooltip"},function(e,t){},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(1),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),d=n(33),p=n(63),f=n(1190),h=r(f),m=n(858),y=r(m),g=n(13),v=n(3),b=r(v),_=n(854),w=r(_),x=n(173),S=r(x),C=n(1062),k=r(C);n(1063);var E=n(295),M=r(E);n(1213);var A=n(1214),T=r(A),O=n(174),P=r(O),j=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},I=n(1215).CheckedSelect,D={columnTypeSample:"0",columnTypePatient:"1",showUnalteredColumns:"2",showWhitespaceBetweenColumns:"3",showClinicalTrackLegends:"4",distinguishMutationType:"5",sortByMutationType:"6",sortAlphabetical:"7",sortCaseListOrder:"8",sortByData:"9",sortByDrivers:"10",sortByHeatmapClustering:"11",heatmapGeneInput:"12",addGenesToHeatmap:"13",removeHeatmap:"14",distinguishDrivers:"15",annotateOncoKb:"16",annotateHotspots:"17",annotateCBioPortal:"18",annotateCOSMIC:"19",annotateCBioPortalInput:"20",annotateCOSMICInput:"21",hidePutativePassengers:"22",customDriverBinaryAnnotation:"23",customDriverTierAnnotation:"24",downloadPDF:"25",downloadPNG:"26",downloadSVG:"27",downloadOrder:"28",downloadTabular:"29",horzZoomSlider:"30"},N=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.clinicalTracksMenuFocused=!1,n.getHeatmapMenu=n.getHeatmapMenu.bind(n),n.getClinicalTracksMenu=n.getClinicalTracksMenu.bind(n),n.getSortMenu=n.getSortMenu.bind(n),n.getViewMenu=n.getViewMenu.bind(n),n.getDownloadMenu=n.getDownloadMenu.bind(n),n.onInputClick=n.onInputClick.bind(n),n.getMutationColorMenu=n.getMutationColorMenu.bind(n),n.getHorzZoomControls=n.getHorzZoomControls.bind(n),n.onSelect=n.onSelect.bind(n),n.onChangeSelectedClinicalTracks=n.onChangeSelectedClinicalTracks.bind(n),n.toggleShowMinimap=n.toggleShowMinimap.bind(n),n.onType=n.onType.bind(n),n.onHeatmapProfileSelect=n.onHeatmapProfileSelect.bind(n),n.onButtonClick=n.onButtonClick.bind(n),n.onZoomInClick=n.onZoomInClick.bind(n),n.onZoomOutClick=n.onZoomOutClick.bind(n),n.onCustomDriverTierCheckboxClick=n.onCustomDriverTierCheckboxClick.bind(n),n.onHorzZoomSliderChange=n.onHorzZoomSliderChange.bind(n),n.onHorzZoomSliderSet=n.onHorzZoomSliderSet.bind(n),n.onSetHorzZoomTextInput=n.onSetHorzZoomTextInput.bind(n),n.onClinicalTracksMenuFocus=n.onClinicalTracksMenuFocus.bind(n),n.horzZoomSliderState=e.state.horzZoom,(0,g.reaction)(function(){return n.props.state.horzZoom},function(e){return n.horzZoomSliderState=e}),n}return i(t,e),s(t,[{key:"onZoomInClick",value:function(){this.props.handlers.onClickZoomIn()}},{key:"onZoomOutClick",value:function(){this.props.handlers.onClickZoomOut()}},{key:"onSetHorzZoomTextInput",value:function(e){var t=parseFloat(e),n=t/100;this.props.handlers.onSetHorzZoom(n)}},{key:"onSelect",value:function(e){e===D.distinguishMutationType&&this.props.handlers.onSelectDistinguishMutationType&&this.props.handlers.onSelectDistinguishMutationType(!this.props.state.distinguishMutationType)}},{key:"onChangeSelectedClinicalTracks",value:function(e){this.props.handlers.onChangeSelectedClinicalTracks&&this.props.handlers.onChangeSelectedClinicalTracks(e.map(function(e){return e.value}))}},{key:"onHeatmapProfileSelect",value:function(e){this.props.handlers.onSelectHeatmapProfile&&this.props.handlers.onSelectHeatmapProfile(e.value)}},{key:"toggleShowMinimap",value:function(e){this.props.handlers.onSelectShowMinimap&&this.props.handlers.onSelectShowMinimap(!this.props.state.showMinimap)}},{key:"onInputClick",value:function(e){switch(e.target.value){case D.showUnalteredColumns:this.props.handlers.onSelectShowUnalteredColumns&&this.props.handlers.onSelectShowUnalteredColumns(!this.props.state.showUnalteredColumns);break;case D.showWhitespaceBetweenColumns:this.props.handlers.onSelectShowWhitespaceBetweenColumns&&this.props.handlers.onSelectShowWhitespaceBetweenColumns(!this.props.state.showWhitespaceBetweenColumns);break;case D.showClinicalTrackLegends:this.props.handlers.onSelectShowClinicalTrackLegends&&this.props.handlers.onSelectShowClinicalTrackLegends(!this.props.state.showClinicalTrackLegends);break;case D.columnTypeSample:this.props.handlers.onSelectColumnType&&this.props.handlers.onSelectColumnType("sample");break;case D.columnTypePatient:this.props.handlers.onSelectColumnType&&this.props.handlers.onSelectColumnType("patient");break;case D.sortByData:this.props.handlers.onClickSortByData&&this.props.handlers.onClickSortByData();break;case D.sortAlphabetical:this.props.handlers.onClickSortAlphabetical&&this.props.handlers.onClickSortAlphabetical();break;case D.sortCaseListOrder:this.props.handlers.onClickSortCaseListOrder&&this.props.handlers.onClickSortCaseListOrder();break;case D.sortByMutationType:this.props.handlers.onSelectSortByMutationType&&this.props.handlers.onSelectSortByMutationType(!this.props.state.sortByMutationType);break;case D.sortByDrivers:this.props.handlers.onSelectSortByDrivers&&this.props.handlers.onSelectSortByDrivers(!this.props.state.sortByDrivers);break;case D.distinguishDrivers:this.props.handlers.onSelectDistinguishDrivers&&this.props.handlers.onSelectDistinguishDrivers(!this.props.state.distinguishDrivers);break;case D.distinguishMutationType:this.props.handlers.onSelectDistinguishMutationType&&this.props.handlers.onSelectDistinguishMutationType(!this.props.state.distinguishMutationType);break;case D.annotateOncoKb:this.props.handlers.onSelectAnnotateOncoKb&&this.props.handlers.onSelectAnnotateOncoKb(!this.props.state.annotateDriversOncoKb);break;case D.annotateHotspots:this.props.handlers.onSelectAnnotateHotspots&&this.props.handlers.onSelectAnnotateHotspots(!this.props.state.annotateDriversHotspots);break;case D.annotateCBioPortal:this.props.handlers.onSelectAnnotateCBioPortal&&this.props.handlers.onSelectAnnotateCBioPortal(!this.props.state.annotateDriversCBioPortal);break;case D.annotateCOSMIC:this.props.handlers.onSelectAnnotateCOSMIC&&this.props.handlers.onSelectAnnotateCOSMIC(!this.props.state.annotateDriversCOSMIC);break;case D.hidePutativePassengers:this.props.handlers.onSelectHidePutativePassengers&&this.props.handlers.onSelectHidePutativePassengers(!this.props.state.hidePutativePassengers);break;case D.customDriverBinaryAnnotation:this.props.handlers.onSelectCustomDriverAnnotationBinary&&this.props.handlers.onSelectCustomDriverAnnotationBinary(!this.props.state.annotateCustomDriverBinary)}}},{key:"onHorzZoomSliderChange",value:function(e){this.horzZoomSliderState=e}},{key:"onHorzZoomSliderSet",value:function(){this.props.handlers.onSetHorzZoom(this.horzZoomSliderState),this.horzZoomSliderState=this.props.state.horzZoom}},{key:"onCustomDriverTierCheckboxClick",value:function(e){this.props.handlers.onSelectCustomDriverAnnotationTier&&this.props.handlers.onSelectCustomDriverAnnotationTier(e.target.value,!(this.props.state.selectedCustomDriverAnnotationTiers&&this.props.state.selectedCustomDriverAnnotationTiers.get(e.target.value)))}},{key:"onButtonClick",value:function(e){switch(e.target.name){case D.addGenesToHeatmap:this.props.handlers.onClickAddGenesToHeatmap&&this.props.handlers.onClickAddGenesToHeatmap();break;case D.removeHeatmap:this.props.handlers.onClickRemoveHeatmap&&this.props.handlers.onClickRemoveHeatmap();break;case D.downloadSVG:this.props.handlers.onClickDownload&&this.props.handlers.onClickDownload("svg");break;case D.downloadPNG:this.props.handlers.onClickDownload&&this.props.handlers.onClickDownload("png");break;case D.downloadPDF:this.props.handlers.onClickDownload&&this.props.handlers.onClickDownload("pdf");break;case D.downloadOrder:this.props.handlers.onClickDownload&&this.props.handlers.onClickDownload("order");break;case D.downloadTabular:this.props.handlers.onClickDownload&&this.props.handlers.onClickDownload("tabular");break;case D.sortByHeatmapClustering:this.props.handlers.onClickClusterHeatmap&&this.props.handlers.onClickClusterHeatmap()}}},{key:"onType",value:function(e){switch(e.target.name){case D.heatmapGeneInput:this.props.handlers.onChangeHeatmapGeneInputValue&&this.props.handlers.onChangeHeatmapGeneInputValue(e.target.value);break;case D.annotateCBioPortalInput:this.props.handlers.onChangeAnnotateCBioPortalInputValue&&this.props.handlers.onChangeAnnotateCBioPortalInputValue(e.target.value);break;case D.annotateCOSMICInput:this.props.handlers.onChangeAnnotateCOSMICInputValue&&this.props.handlers.onChangeAnnotateCOSMICInputValue(e.target.value)}}},{key:"onClinicalTracksMenuFocus",value:function(){this.clinicalTracksMenuFocused=!0}},{key:"getClinicalTracksMenu",value:function(){return this.props.handlers.onChangeSelectedClinicalTracks&&this.props.state.clinicalAttributesPromise?c.createElement("div",{onFocus:this.onClinicalTracksMenuFocus},c.createElement(I,{placeholder:"Add clinical tracks..",isLoading:this.clinicalTracksMenuLoading,noResultsText:this.clinicalTracksMenuLoading?"Loading...":"No matching clinical tracks found",onChange:this.onChangeSelectedClinicalTracks,options:this.clinicalTrackOptions,value:(this.props.state.selectedClinicalAttributeIds||[]).map(function(e){return{value:e}}),labelKey:"label"})):c.createElement("span",null)}},{key:"getHeatmapMenu",value:function(){if(this.props.state.hideHeatmapMenu||!this.props.state.heatmapProfilesPromise)return c.createElement("span",null);var e=c.createElement(w.default,{isLoading:!0});if(this.props.state.heatmapProfilesPromise.isComplete){if(!this.props.state.heatmapProfilesPromise.result.length)return c.createElement("span",null);e=c.createElement("div",{className:"oncoprint__controls__heatmap_menu"},c.createElement(y.default,{clearable:!1,searchable:!1,isLoading:this.props.state.heatmapProfilesPromise.isPending,onChange:this.onHeatmapProfileSelect,value:this.props.state.selectedHeatmapProfile,options:this.heatmapProfileOptions}),this.props.state.heatmapIsDynamicallyQueried&&[c.createElement("textarea",{key:"heatmapGeneInputArea",placeholder:"Type space- or comma-separated genes here, then click 'Add Genes to Heatmap'",name:D.heatmapGeneInput,onChange:this.onType,value:this.props.state.heatmapGeneInputValue}),c.createElement("button",{key:"addGenesToHeatmapButton",className:"btn btn-sm btn-default",name:D.addGenesToHeatmap,onClick:this.onButtonClick},"Add Genes to Heatmap"),c.createElement("button",{key:"removeHeatmapButton",className:"btn btn-sm btn-default",name:D.removeHeatmap,onClick:this.onButtonClick},"Remove Heatmap")],!this.props.state.hideClusterHeatmapButton&&c.createElement("button",{"data-test":"clusterHeatmapBtn",className:(0,P.default)("btn","btn-sm","btn-default",{active:this.props.state.clusterHeatmapButtonActive}),name:D.sortByHeatmapClustering,onClick:this.onButtonClick},"Cluster Heatmap"))}else this.props.state.heatmapProfilesPromise.isError&&(e=c.createElement("span",null,"Error loading heatmap profiles."));return c.createElement(h.default,{bsStyle:"default",title:"Heatmap",id:"heatmapDropdown"},e)}},{key:"getSortMenu",value:function(){return c.createElement(h.default,{bsStyle:"default",title:"Sort",id:"sortDropdown"},c.createElement("div",{className:"oncoprint__controls__sort_menu","data-test":"oncoprintSortDropdownMenu"},c.createElement("div",{className:"radio"},c.createElement("label",null,c.createElement("input",{"data-test":"sortByData",type:"radio",name:"sortBy",value:D.sortByData,checked:"data"===this.props.state.sortMode.type,onClick:this.onInputClick})," Sort by data")),c.createElement("div",{style:{marginLeft:"10px"}},c.createElement("div",{className:"checkbox"},c.createElement("label",null,c.createElement("input",{type:"checkbox",value:D.sortByMutationType,checked:this.props.state.sortByMutationType,onClick:this.onInputClick,disabled:"data"!==this.props.state.sortMode.type||!this.props.state.distinguishMutationType})," Mutation Type")),c.createElement("div",{className:"checkbox"},c.createElement("label",null,c.createElement("input",{type:"checkbox",value:D.sortByDrivers,checked:this.props.state.sortByDrivers,onClick:this.onInputClick,disabled:"data"!==this.props.state.sortMode.type||!this.props.state.distinguishDrivers})," Driver/Passenger"))),c.createElement("div",{className:"radio"},c.createElement("label",null,c.createElement("input",{type:"radio",name:"sortBy",value:D.sortAlphabetical,checked:"alphabetical"===this.props.state.sortMode.type,onClick:this.onInputClick})," Sort by case id (alphabetical)")),c.createElement("div",{className:"radio"},c.createElement("label",null,c.createElement("input",{type:"radio",name:"sortBy",value:D.sortCaseListOrder,checked:"caseList"===this.props.state.sortMode.type,onClick:this.onInputClick,"data-test":"caseList",disabled:!!this.props.state.sortByCaseListDisabled})," Sort by case list order")),this.props.state.heatmapProfilesPromise&&!(this.props.state.heatmapProfilesPromise.isComplete&&!this.props.state.heatmapProfilesPromise.result.length)&&c.createElement("div",{className:"radio"},c.createElement("label",null,c.createElement("input",{"data-test":"sortByHeatmapClustering",type:"radio",name:"sortBy",checked:"heatmap"===this.props.state.sortMode.type,disabled:!0})," Sorted by heatmap clustering order"))))}},{key:"getMutationColorMenu",value:function(){var e=this;return c.createElement(h.default,{bsStyle:"default",title:"Mutation Color",id:"mutationColorDropdown"},c.createElement("div",{className:"oncoprint__controls__mutation_color_menu"},c.createElement("form",{action:"",style:{marginBottom:"0"}},c.createElement("div",{className:"checkbox"},c.createElement("label",null,c.createElement("input",{type:"checkbox",value:D.distinguishMutationType,checked:this.props.state.distinguishMutationType,onClick:this.onInputClick})," Type")),c.createElement("div",{className:"checkbox"},c.createElement("label",null,c.createElement("input",{type:"checkbox",value:D.distinguishDrivers,checked:this.props.state.distinguishDrivers,onClick:this.onInputClick})," Putative drivers based on:")),c.createElement("div",{style:{marginLeft:"20px"}},c.createElement("div",{className:"checkbox"},c.createElement("label",null,c.createElement("input",{type:"checkbox",value:D.annotateOncoKb,checked:this.props.state.annotateDriversOncoKb,onClick:this.onInputClick,"data-test":"annotateOncoKb",disabled:this.props.state.annotateDriversOncoKbDisabled}),this.props.state.annotateDriversOncoKbDisabled&&c.createElement(T.default,{style:{marginRight:4},tooltip:c.createElement("span",null,"Error loading OncoKb data. Please refresh the page or try again later.")}),c.createElement(S.default,{overlay:c.createElement("span",null,"Oncogenicity from OncoKB"),placement:"top"},c.createElement("img",{src:"images/oncokb.png",style:{maxHeight:"12px",cursor:"pointer",marginRight:"5px"}})),"driver annotation")),c.createElement("div",{className:"checkbox"},c.createElement("label",null,c.createElement("input",{type:"checkbox",value:D.annotateHotspots,checked:this.props.state.annotateDriversHotspots,onClick:this.onInputClick,"data-test":"annotateHotspots",disabled:this.props.state.annotateDriversHotspotsDisabled}),this.props.state.annotateDriversHotspotsDisabled&&c.createElement(T.default,{style:{marginRight:4},tooltip:c.createElement("span",null,"Error loading Hotspots data. Please refresh the page or try again later.")}),"Hotspots",c.createElement(S.default,{overlay:c.createElement("div",{style:{maxWidth:"400px"}},"Identified as a recurrent hotspot (statistically significant) in a population-scale cohort of tumor samples of various cancer types using methodology based in part on ",c.createElement("a",{href:"http://www.ncbi.nlm.nih.gov/pubmed/26619011",target:"_blank"},"Chang et al., Nat Biotechnol, 2016."),"Explore all mutations at ",c.createElement("a",{href:"http://www.cancerhotspots.org",target:"_blank"},"http://cancerhotspots.org")),placement:"top"},c.createElement("img",{src:"images/cancer-hotspots.svg",style:{height:"15px",width:"15px",cursor:"pointer",marginLeft:"5px"}})))),this.props.handlers.onChangeAnnotateCBioPortalInputValue&&c.createElement("div",{className:"checkbox"},c.createElement("label",null,c.createElement("input",{type:"checkbox",value:D.annotateCBioPortal,checked:this.props.state.annotateDriversCBioPortal,onClick:this.onInputClick,"data-test":"annotateCBioPortalCount"}),"cBioPortal  >="),c.createElement(M.default,{value:this.props.state.annotateCBioPortalInputValue||"",setValue:this.props.handlers.onChangeAnnotateCBioPortalInputValue,numericOnly:!0,textFieldAppearance:!0,maxChars:6})),this.props.handlers.onChangeAnnotateCOSMICInputValue&&c.createElement("div",{className:"checkbox"},c.createElement("label",null,c.createElement("input",{type:"checkbox",value:D.annotateCOSMIC,checked:this.props.state.annotateDriversCOSMIC,onClick:this.onInputClick,"data-test":"annotateCOSMICCount"}),"COSMIC  >="),c.createElement(M.default,{value:this.props.state.annotateCOSMICInputValue||"",setValue:this.props.handlers.onChangeAnnotateCOSMICInputValue,numericOnly:!0,textFieldAppearance:!0,maxChars:6})),!!this.props.state.customDriverAnnotationBinaryMenuLabel&&c.createElement("div",{className:"checkbox"},c.createElement("label",null,c.createElement("input",{type:"checkbox",checked:this.props.state.annotateCustomDriverBinary,value:D.customDriverBinaryAnnotation,onClick:this.onInputClick})," ",this.props.state.customDriverAnnotationBinaryMenuLabel,c.createElement("img",{src:"images/driver.png",alt:"driver filter",style:{height:"15px",width:"15px",cursor:"pointer",marginLeft:"5px"}}))),!!this.props.state.customDriverAnnotationTiersMenuLabel&&c.createElement("span",null,c.createElement("span",{className:"caret"}),"  ",c.createElement("span",null,this.props.state.customDriverAnnotationTiersMenuLabel)," ",c.createElement("img",{src:"images/driver_tiers.png",alt:"driver tiers filter",style:{height:"15px",width:"15px",cursor:"pointer",marginLeft:"5px"}}),c.createElement("div",{style:{marginLeft:"30px"}},(this.props.state.customDriverAnnotationTiers||[]).map(function(t){return c.createElement("div",{className:"checkbox"},c.createElement("label",null,c.createElement("input",{type:"checkbox",value:t,checked:!(!e.props.state.selectedCustomDriverAnnotationTiers||!e.props.state.selectedCustomDriverAnnotationTiers.get(t)),onClick:e.onCustomDriverTierCheckboxClick})," ",t))}))),c.createElement("div",{className:"checkbox"},c.createElement("label",null,c.createElement("input",{type:"checkbox",value:D.hidePutativePassengers,checked:this.props.state.hidePutativePassengers,onClick:this.onInputClick,disabled:!this.props.state.distinguishDrivers})," Hide VUS (variants of unknown significance)"))))))}},{key:"getViewMenu",value:function(){return c.createElement(h.default,{bsStyle:"default",title:"View",id:"viewDropdownButton"},c.createElement("strong",null,"Data type:"),c.createElement("div",{className:"radio"},c.createElement("label",null,c.createElement("input",{type:"radio",name:"columnType",value:D.columnTypeSample,checked:"sample"===this.props.state.selectedColumnType,onClick:this.onInputClick})," Events per sample")),c.createElement("div",{className:"radio"},c.createElement("label",null,c.createElement("input",{type:"radio",name:"columnType",value:D.columnTypePatient,checked:"patient"===this.props.state.selectedColumnType,onClick:this.onInputClick})," Events per patient")),c.createElement("hr",null),c.createElement("div",{className:"checkbox"},c.createElement("label",null,c.createElement("input",{type:"checkbox",value:D.showUnalteredColumns,checked:this.props.state.showUnalteredColumns,onClick:this.onInputClick})," Show unaltered columns")),c.createElement("div",{className:"checkbox"},c.createElement("label",null,c.createElement("input",{type:"checkbox",value:D.showWhitespaceBetweenColumns,checked:this.props.state.showWhitespaceBetweenColumns,onClick:this.onInputClick})," Show whitespace between columns")),c.createElement("div",{className:"checkbox"},c.createElement("label",null,c.createElement("input",{type:"checkbox",value:D.showClinicalTrackLegends,checked:this.props.state.showClinicalTrackLegends,onClick:this.onInputClick})," Show legends for clinical tracks")))}},{key:"getDownloadMenu",value:function(){return c.createElement(h.default,{bsStyle:"default",title:"Download",id:"downloadDropdownButton"},c.createElement("button",{className:"btn btn-sm btn-default",name:D.downloadPDF,onClick:this.onButtonClick},"PDF"),c.createElement("button",{className:"btn btn-sm btn-default",name:D.downloadPNG,onClick:this.onButtonClick},"PNG"),c.createElement("button",{className:"btn btn-sm btn-default",name:D.downloadSVG,onClick:this.onButtonClick},"SVG"),c.createElement("button",{className:"btn btn-sm btn-default",name:D.downloadOrder,onClick:this.onButtonClick},this.props.state.columnMode&&this.props.state.columnMode[0].toUpperCase()+this.props.state.columnMode.slice(1)||""," order"),c.createElement("button",{className:"btn btn-sm btn-default",name:D.downloadTabular,onClick:this.onButtonClick},"Tabular"))}},{key:"getHorzZoomControls",value:function(){return c.createElement("div",{className:"btn btn-default oncoprint__zoom-controls"},c.createElement(S.default,{overlay:c.createElement("span",null,"Zoom out of oncoprint.")},c.createElement("div",{onClick:this.onZoomOutClick},c.createElement("i",{className:"fa fa-search-minus"}))),c.createElement(S.default,{overlay:c.createElement("span",null,"Zoom in/out of oncoprint.")},c.createElement("div",{style:{width:"90px"}},c.createElement(k.default,{value:this.horzZoomSliderState,onChange:this.onHorzZoomSliderChange,onChangeComplete:this.onHorzZoomSliderSet,step:.01,max:1,min:0,tooltip:!1}))),c.createElement(M.default,{value:(100*this.horzZoomSliderState).toFixed(),setValue:this.onSetHorzZoomTextInput,maxChars:3,numericOnly:!0,textFieldAppearance:!0,style:{background:"white",minWidth:"30px",fontSize:"14px",fontFamily:"arial",border:"none",padding:0,marginTop:0,marginBottom:0,marginRight:2}}),c.createElement("div",null,"%"),c.createElement(S.default,{overlay:c.createElement("span",null,"Zoom in to oncoprint.")},c.createElement("div",{onClick:this.onZoomInClick},c.createElement("i",{className:"fa fa-search-plus"}))))}},{key:"render",value:function(){return c.createElement("div",{className:"oncoprint__controls"},c.createElement("div",{style:{width:220}},c.createElement(d.Observer,null,this.getClinicalTracksMenu)),c.createElement(p.ButtonGroup,null,c.createElement(d.Observer,null,this.getHeatmapMenu),c.createElement(d.Observer,null,this.getSortMenu),c.createElement(d.Observer,null,this.getMutationColorMenu),c.createElement(d.Observer,null,this.getViewMenu),c.createElement(d.Observer,null,this.getDownloadMenu),c.createElement(d.Observer,null,this.getHorzZoomControls),this.minimapButton))}},{key:"clinicalTrackOptions",get:function(){return this.clinicalTracksMenuFocused&&this.props.state.clinicalAttributesPromise&&this.props.state.clinicalAttributesPromise.result?b.default.map(this.props.state.clinicalAttributesPromise.result,function(e){return{label:e.displayName,value:e.clinicalAttributeId}}):[]}},{key:"heatmapProfileOptions",get:function(){return this.props.state.heatmapProfilesPromise&&this.props.state.heatmapProfilesPromise.result?b.default.map(this.props.state.heatmapProfilesPromise.result,function(e){return{label:e.name,value:e.molecularProfileId}}):[]}},{key:"clinicalTracksMenuLoading",get:function(){return this.clinicalTracksMenuFocused&&this.props.state.clinicalAttributesPromise&&this.props.state.clinicalAttributesPromise.isPending}},{key:"showMinimap",get:function(){return this.props.state.showMinimap}},{key:"minimapButton",get:function(){return c.createElement("div",{className:"btn-group"},c.createElement(S.default,{overlay:c.createElement("span",null,"Toggle minimap panel.")},c.createElement(p.Button,{active:this.showMinimap,onClick:this.toggleShowMinimap,className:"oncoprint__controls__minimap_button"},c.createElement("img",{src:n(1221),alt:"icon",style:{width:15,height:15,margin:2}}))))}}]),t}(c.Component);j([g.observable],N.prototype,"horzZoomSliderState",void 0),j([g.observable],N.prototype,"clinicalTracksMenuFocused",void 0),j([g.computed],N.prototype,"clinicalTrackOptions",null),j([g.computed],N.prototype,"heatmapProfileOptions",null),j([g.computed],N.prototype,"clinicalTracksMenuLoading",null),j([g.computed],N.prototype,"showMinimap",null),N=j([d.observer],N),t.default=N},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(1),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),d=n(63),p=n(1191),f=n(33),h=n(13),m=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},y=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]]);return n},g=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=(e.bsRole,e.title),n=y(e,["bsRole","title"]);return c.createElement(d.Button,i({className:"btn btn-default"},n),t," ",c.createElement("span",{className:"caret"}))}}]),t}(c.Component),v=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),s(t,[{key:"render",value:function(){var e=this.props.children;return c.createElement("div",{className:"dropdown-menu",style:{padding:"6px"}},e)}}]),t}(c.Component),b=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.open=!1,e.toggle=function(){e.open=!e.open},e.hide=function(){e.open=!1},e}return a(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.id,r=y(e,["children","id"]);return c.createElement(p.RootCloseWrapper,{onRootClose:this.hide},c.createElement(d.Dropdown,{id:n+"",open:this.open},c.createElement(g,i({bsStyle:"default",bsRole:"toggle",title:"Custom Toggle",onClick:this.toggle},r)),c.createElement(v,{bsRole:"menu"},t)))}}]),t}(c.Component);m([h.observable],b.prototype,"open",void 0),b=m([f.observer],b),t.default=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.RootCloseWrapper=t.Transition=t.Position=t.Portal=t.Overlay=t.Modal=t.AutoAffix=t.Affix=void 0;var o=n(1070),a=r(o),i=n(1196),s=r(i),l=n(1197),u=r(l),c=n(1209),d=r(c),p=n(1009),f=r(p),h=n(1078),m=r(h),y=n(1212),g=r(y),v=n(1079),b=r(v);t.Affix=a.default,t.AutoAffix=s.default,t.Modal=u.default,t.Overlay=d.default,t.Portal=f.default,t.Position=m.default,t.Transition=g.default,t.RootCloseWrapper=b.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n=(0,l.default)(e);return n?n.innerHeight:t?e.clientHeight:(0,i.default)(e).height}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var a=n(933),i=r(a),s=n(1071),l=r(s);e.exports=t.default},function(e,t,n){e.exports=n(6)(1412)},function(e,t,n){e.exports=n(6)(305)},function(e,t,n){"use strict";function r(e){var t=(0,a.default)(e);return t&&t.defaultView||t.parentWindow}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(1008),a=function(e){return e&&e.__esModule?e:{default:e}}(o);e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=n(933),c=r(u),d=n(297),p=r(d),f=n(2),h=r(f),m=n(907),y=r(m),g=n(1),v=r(g),b=n(1070),_=r(b),w=n(934),x=r(w),S=n(908),C=r(S),k=n(1074),E=r(k),M=n(878),A=r(M),T=n(1075),O=r(T),P=l({},_.default.propTypes,{container:h.default.oneOfType([y.default,h.default.func]),autoWidth:h.default.bool}),j={viewportOffsetTop:0,autoWidth:!0},I=function(e){function t(n,r){a(this,t);var o=i(this,e.call(this,n,r));return o.onWindowScroll=function(){o.onUpdate()},o.onWindowResize=function(){o.props.autoWidth&&(0,p.default)(function(){return o.onUpdate()})},o.onDocumentClick=function(){(0,p.default)(function(){return o.onUpdate()})},o.onUpdate=function(){if(o._isMounted){var e=(0,c.default)(o.positioner),t=e.top,n=e.width,r=(0,C.default)(o.props.container),a=void 0;if(r){var i=(0,E.default)((0,A.default)(o)),s=(0,c.default)(r);a=i-s.top-s.height}else a=null;o.updateState(t,a,n)}},o.updateState=function(e,t,n){e===o.state.offsetTop&&t===o.state.offsetBottom&&n===o.state.width||o.setState({offsetTop:e,offsetBottom:t,width:n})},o.state={offsetTop:null,offsetBottom:null,width:null},o}return s(t,e),t.prototype.componentDidMount=function(){var e=this;this._isMounted=!0,this._windowScrollListener=(0,x.default)((0,O.default)(this),"scroll",function(){return e.onWindowScroll()}),this._windowResizeListener=(0,x.default)((0,O.default)(this),"resize",function(){return e.onWindowResize()}),this._documentClickListener=(0,x.default)((0,A.default)(this),"click",function(){return e.onDocumentClick()}),this.onUpdate()},t.prototype.componentWillReceiveProps=function(){this._needPositionUpdate=!0},t.prototype.componentDidUpdate=function(){this._needPositionUpdate&&(this._needPositionUpdate=!1,this.onUpdate())},t.prototype.componentWillUnmount=function(){this._isMounted=!1,this._windowScrollListener&&this._windowScrollListener.remove(),this._documentClickListener&&this._documentClickListener.remove(),this._windowResizeListener&&this._windowResizeListener.remove()},t.prototype.render=function(){var e=this,t=this.props,n=t.autoWidth,r=t.viewportOffsetTop,a=t.children,i=o(t,["autoWidth","viewportOffsetTop","children"]),s=this.state,u=s.offsetTop,c=s.offsetBottom,d=s.width;delete i.container;var p=Math.max(u,r||0),f=this.props,h=f.affixStyle,m=f.bottomStyle;return n&&(h=l({width:d},h),m=l({width:d},m)),v.default.createElement("div",null,v.default.createElement("div",{ref:function(t){e.positioner=t}}),v.default.createElement(_.default,l({},i,{offsetTop:p,viewportOffsetTop:r,offsetBottom:c,affixStyle:h,bottomStyle:m}),a))},t}(v.default.Component);I.displayName="AutoAffix",I.propTypes=P,I.defaultProps=j,t.default=I,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=n(1198),u=r(l),c=n(1076),d=r(c),p=n(314),f=r(p),h=n(2),m=r(h),y=n(907),g=r(y),v=n(1199),b=r(v),_=n(1077),w=r(_),x=n(1),S=r(x),C=n(34),k=r(C),E=n(43),M=r(E),A=n(1200),T=r(A),O=n(1009),P=r(O),j=n(1207),I=r(j),D=n(934),N=r(D),R=n(1208),L=r(R),F=n(908),z=r(F),B=n(878),V=r(B),G=new T.default,H=function(e){function t(){var n,r,i;o(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=a(this,e.call.apply(e,[this].concat(l))),U.call(r),i=n,a(r,i)}return i(t,e),t.prototype.omitProps=function(e,t){var n=Object.keys(e),r={};return n.map(function(n){Object.prototype.hasOwnProperty.call(t,n)||(r[n]=e[n])}),r},t.prototype.render=function(){var e=this.props,n=e.show,r=e.container,o=e.children,a=e.transition,i=e.backdrop,l=e.dialogTransitionTimeout,u=e.className,c=e.style,d=e.onExit,p=e.onExiting,f=e.onEnter,h=e.onEntering,m=e.onEntered,y=S.default.Children.only(o),g=this.omitProps(this.props,t.propTypes);if(!(n||a&&!this.state.exited))return null;var v=y.props,b=v.role,_=v.tabIndex;return void 0!==b&&void 0!==_||(y=(0,x.cloneElement)(y,{role:void 0===b?"document":b,tabIndex:null==_?"-1":_})),a&&(y=S.default.createElement(a,{transitionAppear:!0,unmountOnExit:!0,in:n,timeout:l,onExit:d,onExiting:p,onExited:this.handleHidden,onEnter:f,onEntering:h,onEntered:m},y)),S.default.createElement(P.default,{ref:this.setMountNode,container:r,onRendered:this.onPortalRendered},S.default.createElement("div",s({ref:this.setModalNodeRef,role:b||"dialog"},g,{style:c,className:u}),i&&this.renderBackdrop(),S.default.createElement(I.default,{ref:this.setDialogRef},y)))},t.prototype.componentWillReceiveProps=function(e){e.show?this.setState({exited:!1}):e.transition||this.setState({exited:!0})},t.prototype.componentWillUpdate=function(e){!this.props.show&&e.show&&this.checkForFocus()},t.prototype.componentDidMount=function(){this._isMounted=!0,this.props.show&&this.onShow()},t.prototype.componentDidUpdate=function(e){var t=this.props.transition;!e.show||this.props.show||t?!e.show&&this.props.show&&this.onShow():this.onHide()},t.prototype.componentWillUnmount=function(){var e=this.props,t=e.show,n=e.transition;this._isMounted=!1,(t||n&&!this.state.exited)&&this.onHide()},t.prototype.autoFocus=function(){if(this.props.autoFocus){var e=this.getDialogElement(),t=(0,u.default)((0,V.default)(this));e&&!(0,d.default)(e,t)&&(this.lastFocus=t,e.hasAttribute("tabIndex")||((0,M.default)(!1,'The modal content node does not accept focus. For the benefit of assistive technologies, the tabIndex of the node is being set to "-1".'),e.setAttribute("tabIndex",-1)),e.focus())}},t.prototype.restoreLastFocus=function(){this.lastFocus&&this.lastFocus.focus&&(this.lastFocus.focus(),this.lastFocus=null)},t.prototype.getDialogElement=function(){return k.default.findDOMNode(this.dialog)},t.prototype.isTopModal=function(){return this.props.manager.isTopModal(this)},t}(S.default.Component);H.propTypes=s({},P.default.propTypes,{show:m.default.bool,container:m.default.oneOfType([g.default,m.default.func]),onShow:m.default.func,onHide:m.default.func,backdrop:m.default.oneOfType([m.default.bool,m.default.oneOf(["static"])]),renderBackdrop:m.default.func,onEscapeKeyDown:m.default.func,onEscapeKeyUp:(0,b.default)(m.default.func,"Please use onEscapeKeyDown instead for consistency"),onBackdropClick:m.default.func,backdropStyle:m.default.object,backdropClassName:m.default.string,containerClassName:m.default.string,keyboard:m.default.bool,transition:w.default,dialogTransitionTimeout:m.default.number,backdropTransitionTimeout:m.default.number,autoFocus:m.default.bool,enforceFocus:m.default.bool,restoreFocus:m.default.bool,onEnter:m.default.func,onEntering:m.default.func,onEntered:m.default.func,onExit:m.default.func,onExiting:m.default.func,onExited:m.default.func,manager:m.default.object.isRequired}),H.defaultProps={show:!1,backdrop:!0,keyboard:!0,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,onHide:function(){},manager:G,renderBackdrop:function(e){return S.default.createElement("div",e)}};var U=function(){var e=this;this.state={exited:!this.props.show},this.renderBackdrop=function(){var t=e.props,n=t.backdropStyle,r=t.backdropClassName,o=t.renderBackdrop,a=t.transition,i=t.backdropTransitionTimeout,s=function(t){return e.backdrop=t},l=o({ref:s,style:n,className:r,onClick:e.handleBackdropClick});return a&&(l=S.default.createElement(a,{transitionAppear:!0,in:e.props.show,timeout:i},l)),l},this.onPortalRendered=function(){e.autoFocus(),e.props.onShow&&e.props.onShow()},this.onShow=function(){var t=(0,V.default)(e),n=(0,z.default)(e.props.container,t.body);e.props.manager.add(e,n,e.props.containerClassName),e._onDocumentKeydownListener=(0,N.default)(t,"keydown",e.handleDocumentKeyDown),e._onDocumentKeyupListener=(0,N.default)(t,"keyup",e.handleDocumentKeyUp),e._onFocusinListener=(0,L.default)(e.enforceFocus)},this.onHide=function(){e.props.manager.remove(e),e._onDocumentKeydownListener.remove(),e._onDocumentKeyupListener.remove(),e._onFocusinListener.remove(),e.props.restoreFocus&&e.restoreLastFocus()},this.setMountNode=function(t){e.mountNode=t?t.getMountNode():t},this.setModalNodeRef=function(t){e.modalNode=t},this.setDialogRef=function(t){e.dialog=t},this.handleHidden=function(){if(e.setState({exited:!0}),e.onHide(),e.props.onExited){var t;(t=e.props).onExited.apply(t,arguments)}},this.handleBackdropClick=function(t){t.target===t.currentTarget&&(e.props.onBackdropClick&&e.props.onBackdropClick(t),!0===e.props.backdrop&&e.props.onHide())},this.handleDocumentKeyDown=function(t){e.props.keyboard&&27===t.keyCode&&e.isTopModal()&&(e.props.onEscapeKeyDown&&e.props.onEscapeKeyDown(t),e.props.onHide())},this.handleDocumentKeyUp=function(t){e.props.keyboard&&27===t.keyCode&&e.isTopModal()&&e.props.onEscapeKeyUp&&e.props.onEscapeKeyUp(t)},this.checkForFocus=function(){f.default&&(e.lastFocus=(0,u.default)())},this.enforceFocus=function(){if(e.props.enforceFocus&&e._isMounted&&e.isTopModal()){var t=e.getDialogElement(),n=(0,u.default)((0,V.default)(e));t&&!(0,d.default)(t,n)&&t.focus()}}};H.Manager=T.default,t.default=H,e.exports=t.default},function(e,t,n){e.exports=n(6)(641)},function(e,t,n){e.exports=n(6)(1393)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){var n=-1;return e.some(function(e,r){if(t(e,r))return n=r,!0}),n}function i(e,t){return a(e,function(e){return-1!==e.modals.indexOf(t)})}function s(e,t){var n={overflow:"hidden"};e.style={overflow:t.style.overflow,paddingRight:t.style.paddingRight},e.overflowing&&(n.paddingRight=parseInt((0,p.default)(t,"paddingRight")||0,10)+(0,h.default)()+"px"),(0,p.default)(t,n)}function l(e,t){var n=e.style;Object.keys(n).forEach(function(e){return t.style[e]=n[e]})}t.__esModule=!0;var u=n(1201),c=r(u),d=n(1202),p=r(d),f=n(1203),h=r(f),m=n(1204),y=r(m),g=n(1205),v=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.hideSiblingNodes,a=void 0===r||r,u=n.handleContainerOverflow,d=void 0===u||u;o(this,e),this.add=function(e,n,r){var o=t.modals.indexOf(e),a=t.containers.indexOf(n);if(-1!==o)return o;if(o=t.modals.length,t.modals.push(e),t.hideSiblingNodes&&(0,g.hideSiblings)(n,e.mountNode),-1!==a)return t.data[a].modals.push(e),o;var i={modals:[e],classes:r?r.split(/\s+/):[],overflowing:(0,y.default)(n)};return t.handleContainerOverflow&&s(i,n),i.classes.forEach(c.default.addClass.bind(null,n)),t.containers.push(n),t.data.push(i),o},this.remove=function(e){var n=t.modals.indexOf(e);if(-1!==n){var r=i(t.data,e),o=t.data[r],a=t.containers[r];o.modals.splice(o.modals.indexOf(e),1),t.modals.splice(n,1),0===o.modals.length?(o.classes.forEach(c.default.removeClass.bind(null,a)),t.handleContainerOverflow&&l(o,a),t.hideSiblingNodes&&(0,g.showSiblings)(a,e.mountNode),t.containers.splice(r,1),t.data.splice(r,1)):t.hideSiblingNodes&&(0,g.ariaHidden)(!1,o.modals[o.modals.length-1].mountNode)}},this.isTopModal=function(e){return!!t.modals.length&&t.modals[t.modals.length-1]===e},this.hideSiblingNodes=a,this.handleContainerOverflow=d,this.modals=[],this.containers=[],this.data=[]};t.default=v,e.exports=t.default},function(e,t,n){e.exports=n(6)(1395)},function(e,t,n){e.exports=n(6)(177)},function(e,t,n){e.exports=n(6)(647)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return e&&"body"===e.tagName.toLowerCase()}function a(e){var t=(0,c.default)(e),n=(0,l.default)(t),r=n.innerWidth;if(!r){var o=t.documentElement.getBoundingClientRect();r=o.right-Math.abs(o.left)}return t.body.clientWidth<r}function i(e){return(0,l.default)(e)||o(e)?a(e):e.scrollHeight>e.clientHeight}t.__esModule=!0,t.default=i;var s=n(1071),l=r(s),u=n(1008),c=r(u);e.exports=t.default},function(e,t,n){"use strict";function r(e,t){t&&(e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden"))}function o(e,t){l(e,t,function(e){return r(!0,e)})}function a(e,t){l(e,t,function(e){return r(!1,e)})}t.__esModule=!0,t.ariaHidden=r,t.hideSiblings=o,t.showSiblings=a;var i=["template","script","style"],s=function(e){var t=e.nodeType,n=e.tagName;return 1===t&&-1===i.indexOf(n.toLowerCase())},l=function(e,t,n){t=[].concat(t),[].forEach.call(e.children,function(e){-1===t.indexOf(e)&&s(e)&&n(e)})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=n(2),l=r(s),u=n(907),c=r(u),d=n(1),p=r(d),f=n(34),h=r(f),m=n(908),y=r(m),g=n(878),v=r(g),b=function(e){function t(){var n,r,i;o(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=a(this,e.call.apply(e,[this].concat(l))),r._mountOverlayTarget=function(){r._overlayTarget||(r._overlayTarget=document.createElement("div"),r._portalContainerNode=(0,y.default)(r.props.container,(0,v.default)(r).body),r._portalContainerNode.appendChild(r._overlayTarget))},r._unmountOverlayTarget=function(){r._overlayTarget&&(r._portalContainerNode.removeChild(r._overlayTarget),r._overlayTarget=null),r._portalContainerNode=null},r._renderOverlay=function(){var e=r.props.children?p.default.Children.only(r.props.children):null;if(null!==e){r._mountOverlayTarget();var t=!r._overlayInstance;r._overlayInstance=h.default.unstable_renderSubtreeIntoContainer(r,e,r._overlayTarget,function(){t&&r.props.onRendered&&r.props.onRendered()})}else r._unrenderOverlay(),r._unmountOverlayTarget()},r._unrenderOverlay=function(){r._overlayTarget&&(h.default.unmountComponentAtNode(r._overlayTarget),r._overlayInstance=null)},r.getMountNode=function(){return r._overlayTarget},i=n,a(r,i)}return i(t,e),t.prototype.componentDidMount=function(){this._isMounted=!0,this._renderOverlay()},t.prototype.componentDidUpdate=function(){this._renderOverlay()},t.prototype.componentWillReceiveProps=function(e){this._overlayTarget&&e.container!==this.props.container&&(this._portalContainerNode.removeChild(this._overlayTarget),this._portalContainerNode=(0,y.default)(e.container,(0,v.default)(this).body),this._portalContainerNode.appendChild(this._overlayTarget))},t.prototype.componentWillUnmount=function(){this._isMounted=!1,this._unrenderOverlay(),this._unmountOverlayTarget()},t.prototype.render=function(){return null},t}(p.default.Component);b.displayName="Portal",b.propTypes={container:l.default.oneOfType([c.default,l.default.func]),onRendered:l.default.func},t.default=b,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=n(2),l=r(s),u=n(1),c=r(u),d={children:l.default.node},p=function(e){function t(){return o(this,t),a(this,e.apply(this,arguments))}return i(t,e),t.prototype.render=function(){return this.props.children},t}(c.default.Component);p.propTypes=d,t.default=p,e.exports=t.default},function(e,t,n){"use strict";function r(e){var t=!document.addEventListener,n=void 0;return t?(document.attachEvent("onfocusin",e),n=function(){return document.detachEvent("onfocusin",e)}):(document.addEventListener("focus",e,!0),n=function(){return document.removeEventListener("focus",e,!0)}),{remove:n}}t.__esModule=!0,t.default=r,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=n(2),c=r(u),d=n(1077),p=r(d),f=n(1),h=r(f),m=n(1009),y=r(m),g=n(1078),v=r(g),b=n(1079),_=r(b),w=function(e){function t(n,r){a(this,t);var o=i(this,e.call(this,n,r));return o.handleHidden=function(){if(o.setState({exited:!0}),o.props.onExited){var e;(e=o.props).onExited.apply(e,arguments)}},o.state={exited:!n.show},o.onHiddenListener=o.handleHidden.bind(o),o}return s(t,e),t.prototype.componentWillReceiveProps=function(e){e.show?this.setState({exited:!1}):e.transition||this.setState({exited:!0})},t.prototype.render=function(){var e=this.props,t=e.container,n=e.containerPadding,r=e.target,a=e.placement,i=e.shouldUpdatePosition,s=e.rootClose,l=e.children,u=e.transition,c=o(e,["container","containerPadding","target","placement","shouldUpdatePosition","rootClose","children","transition"]);if(!(c.show||u&&!this.state.exited))return null;var d=l;if(d=h.default.createElement(v.default,{container:t,containerPadding:n,target:r,placement:a,shouldUpdatePosition:i},d),u){var p=c.onExit,f=c.onExiting,m=c.onEnter,g=c.onEntering,b=c.onEntered;d=h.default.createElement(u,{in:c.show,transitionAppear:!0,onExit:p,onExiting:f,onExited:this.onHiddenListener,onEnter:m,onEntering:g,onEntered:b},d)}return s&&(d=h.default.createElement(_.default,{onRootClose:c.onHide},d)),h.default.createElement(y.default,{container:t},d)},t}(h.default.Component);w.propTypes=l({},y.default.propTypes,v.default.propTypes,{show:c.default.bool,rootClose:c.default.bool,onHide:function(e){var t=c.default.func;e.rootClose&&(t=t.isRequired);for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return t.apply(void 0,[e].concat(r))},transition:p.default,onEnter:c.default.func,onEntering:c.default.func,onEntered:c.default.func,onExit:c.default.func,onExiting:c.default.func,onExited:c.default.func}),t.default=w,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=void 0,n=void 0,r=void 0;if("BODY"===e.tagName)t=window.innerWidth,n=window.innerHeight,r=(0,f.default)((0,m.default)(e).documentElement)||(0,f.default)(e);else{var o=(0,u.default)(e);t=o.width,n=o.height,r=(0,f.default)(e)}return{width:t,height:n,scroll:r}}function a(e,t,n,r){var a=o(n),i=a.scroll,s=a.height,l=e-r-i,u=e+r-i+t;return l<0?-l:u>s?s-u:0}function i(e,t,n,r){var a=o(n),i=a.width,s=e-r,l=e+r+t;return s<0?-s:l>i?i-l:0}function s(e,t,n,r,o){var s="BODY"===r.tagName?(0,u.default)(n):(0,d.default)(n,r),l=(0,u.default)(t),c=l.height,p=l.width,f=void 0,h=void 0,m=void 0,y=void 0;if("left"===e||"right"===e){h=s.top+(s.height-c)/2,f="left"===e?s.left-p:s.left+s.width;var g=a(h,c,r,o);h+=g,y=50*(1-2*g/c)+"%",m=void 0}else{if("top"!==e&&"bottom"!==e)throw new Error('calcOverlayPosition(): No such placement of "'+e+'" found.');f=s.left+(s.width-p)/2,h="top"===e?s.top-c:s.top+s.height;var v=i(f,p,r,o);f+=v,m=50*(1-2*v/p)+"%",y=void 0}return{positionLeft:f,positionTop:h,arrowOffsetLeft:m,arrowOffsetTop:y}}t.__esModule=!0,t.default=s;var l=n(933),u=r(l),c=n(1211),d=r(c),p=n(1072),f=r(p),h=n(878),m=r(h);e.exports=t.default},function(e,t,n){e.exports=n(6)(1411)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(){}t.__esModule=!0,t.EXITING=t.ENTERED=t.ENTERING=t.EXITED=t.UNMOUNTED=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=n(174),d=r(c),p=n(1073),f=r(p),h=n(315),m=r(h),y=n(2),g=r(y),v=n(1),b=r(v),_=n(34),w=r(_),x=m.default.end,S=t.UNMOUNTED=0,C=t.EXITED=1,k=t.ENTERING=2,E=t.ENTERED=3,M=t.EXITING=4,A=function(e){function t(n,r){a(this,t);var o=i(this,e.call(this,n,r));o.updateStatus=function(){if(null!==o.nextStatus){o.cancelNextCallback();var e=w.default.findDOMNode(o);o.nextStatus===k?(o.props.onEnter(e),o.safeSetState({status:k},function(){o.props.onEntering(e),o.onTransitionEnd(e,function(){o.safeSetState({status:E},function(){o.props.onEntered(e)})})})):(o.props.onExit(e),o.safeSetState({status:M},function(){o.props.onExiting(e),o.onTransitionEnd(e,function(){o.safeSetState({status:C},function(){o.props.onExited(e)})})})),o.nextStatus=null}else o.props.unmountOnExit&&o.state.status===C&&o.setState({status:S})},o.cancelNextCallback=function(){null!==o.nextCallback&&(o.nextCallback.cancel(),o.nextCallback=null)},o.safeSetState=function(e,t){o.setState(e,o.setNextCallback(t))},o.setNextCallback=function(e){var t=!0;return o.nextCallback=function(n){t&&(t=!1,o.nextCallback=null,e(n))},o.nextCallback.cancel=function(){t=!1},o.nextCallback},o.onTransitionEnd=function(e,t){o.setNextCallback(t),e?((0,f.default)(e,x,o.nextCallback),setTimeout(o.nextCallback,o.props.timeout)):setTimeout(o.nextCallback,0)};var s=void 0;return o.nextStatus=null,n.in?n.transitionAppear?(s=C,o.nextStatus=k):s=E:s=n.unmountOnExit||n.mountOnEnter?S:C,o.state={status:s},o.nextCallback=null,o}return s(t,e),t.prototype.componentDidMount=function(){this.updateStatus()},t.prototype.componentWillReceiveProps=function(e){var t=this.state.status;e.in?(t===S&&this.setState({status:C}),t!==k&&t!==E&&(this.nextStatus=k)):t!==k&&t!==E||(this.nextStatus=M)},t.prototype.componentDidUpdate=function(){this.updateStatus()},t.prototype.componentWillUnmount=function(){this.cancelNextCallback()},t.prototype.render=function(){var e=this.state.status;if(e===S)return null;var n=this.props,r=n.children,a=n.className,i=o(n,["children","className"]);Object.keys(t.propTypes).forEach(function(e){return delete i[e]});var s=void 0;e===C?s=this.props.exitedClassName:e===k?s=this.props.enteringClassName:e===E?s=this.props.enteredClassName:e===M&&(s=this.props.exitingClassName);var l=b.default.Children.only(r);return b.default.cloneElement(l,u({},i,{className:(0,d.default)(l.props.className,a,s)}))},t}(b.default.Component);A.propTypes={in:g.default.bool,mountOnEnter:g.default.bool,unmountOnExit:g.default.bool,transitionAppear:g.default.bool,timeout:g.default.number,exitedClassName:g.default.string,exitingClassName:g.default.string,enteredClassName:g.default.string,enteringClassName:g.default.string,onEnter:g.default.func,onEntering:g.default.func,onEntered:g.default.func,onExit:g.default.func,onExiting:g.default.func,onExited:g.default.func},A.displayName="Transition",A.defaultProps={in:!1,unmountOnExit:!1,transitionAppear:!1,timeout:5e3,onEnter:l,onEntering:l,onEntered:l,onExit:l,onExiting:l,onExited:l},t.default=A},function(e,t){},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(s),u=n(173),c=function(e){return e&&e.__esModule?e:{default:e}}(u),d=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),i(t,[{key:"render",value:function(){return l.createElement(c.default,{overlay:this.props.tooltip},l.createElement("i",{className:"fa fa-md fa-exclamation-triangle",style:Object.assign({},{color:"#BB1700",cursor:"pointer"},this.props.style||{})}))}}]),t}(l.Component);t.default=d},function(e,t,n){"use strict";var r=n(1216),o=function(e){return e&&e.__esModule?e:{default:e}}(r);e.exports={CheckedSelect:o.default}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=r(l),c=n(2),d=r(c),p=n(858),f=r(p),h=n(174),m=r(h),y=n(1217),g=r(y),v=n(1218),b=r(v),_=n(1219),w=r(_),x=n(1220),S=r(x);n(929);var C=function(e){function t(e,n){o(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.handleFilterOptions=r.handleFilterOptions.bind(r),r.toggleSelection=r.toggleSelection.bind(r),r.clearAllOptionsIsSelectedFlags=r.clearAllOptionsIsSelectedFlags.bind(r),r.clearVisibleOptions=r.clearVisibleOptions.bind(r),r.getResetValue=r.getResetValue.bind(r),r.setValue=r.setValue.bind(r),r.handleAddAll=r.handleAddAll.bind(r),r.handleClearAll=r.handleClearAll.bind(r),r.renderMenu=r.renderMenu.bind(r),r.getSelectComponent=r.getSelectComponent.bind(r),r.getSelectAsyncComponent=r.getSelectAsyncComponent.bind(r),r}return i(t,e),s(t,[{key:"handleFilterOptions",value:function(e,t,n){var r=this;return this._options=e,this.props.value.length&&(n=this.props.value),this.props.ignoreAccents&&(t=(0,S.default)(t)),this.props.ignoreCase&&(t=t.toLowerCase()),n&&(n=n.map(function(e){return e[r.props.valueKey]})),this._visibleOptions=e.filter(function(e){if(n&&n.indexOf(e[r.props.valueKey])>-1&&(e.isSelected=!e.disabled),!t)return!0;var o=String(e[r.props.valueKey]),a=String(e[r.props.labelKey]);return r.props.ignoreAccents&&("label"!==r.props.matchProp&&(o=(0,S.default)(o)),"value"!==r.props.matchProp&&(a=(0,S.default)(a))),r.props.ignoreCase&&("label"!==r.props.matchProp&&(o=o.toLowerCase()),"value"!==r.props.matchProp&&(a=a.toLowerCase())),"start"===r.props.matchPos?"label"!==r.props.matchProp&&o.substr(0,t.length)===t||"value"!==r.props.matchProp&&a.substr(0,t.length)===t:"label"!==r.props.matchProp&&o.indexOf(t)>=0||"value"!==r.props.matchProp&&a.indexOf(t)>=0}),this._visibleOptions}},{key:"componentWillReceiveProps",value:function(e){var t=this;if(this.props.value!==e.value){var n=e.value.map(function(t){return t[e.valueKey]});this.clearAllOptionsIsSelectedFlags(),this._visibleOptions.forEach(function(e){n.indexOf(e[t.props.valueKey])>-1&&(e.isSelected=!0)})}}},{key:"toggleSelection",value:function(e){var t=this,n=this.props.value,r=n.find(function(n){return n[t.props.valueKey]===e[0][t.props.valueKey]});r?(n=n.filter(function(e){return r[t.props.valueKey]!==e[t.props.valueKey]}),this._visibleOptions.map(function(e){return r[t.props.valueKey]===e[t.props.valueKey]&&(e.isSelected=!1),e})):n=n.concat(e),this.props.onChange(n)}},{key:"renderClearButton",value:function(){return null}},{key:"addVisibleOptions",value:function(){var e=this,t=this.props.value,n=t.map(function(t){return t[e.props.valueKey]}),r=this._visibleOptions.filter(function(t){return!t.disabled&&-1===n.indexOf(t[e.props.valueKey])});return t.concat(r)}},{key:"clearVisibleOptions",value:function(){var e=this,t=this._visibleOptions.map(function(t){return t[e.props.valueKey]});return this.props.value.filter(function(n){return-1===t.indexOf(n[e.props.valueKey])})}},{key:"getResetValue",value:function(){return void 0!==this.props.resetValue?this.props.resetValue:this.props.multi?[]:null}},{key:"setValue",value:function(e){var t=this;this.props.simpleValue&&e&&(e=this.props.multi?e.map(function(e){return e[t.props.valueKey]}).join(this.props.delimiter):e[this.props.valueKey]),this.props.onChange(e)}},{key:"clearAllOptionsIsSelectedFlags",value:function(){this._options.map(function(e){e.isSelected=!1})}},{key:"setVisibleOptionsIsSelectedFlags",value:function(e){this._visibleOptions.forEach(function(t){return t.isSelected=e})}},{key:"handleAddAll",value:function(){this.setVisibleOptionsIsSelectedFlags(!0);var e=this.addVisibleOptions();this.setValue(e)}},{key:"handleClearAll",value:function(){this.setVisibleOptionsIsSelectedFlags(!1);var e=this.clearVisibleOptions();this.setValue(e)}},{key:"renderMenu",value:function(e){var t=this,n=this.props;return this._visibleOptions.map(function(r,o){var a=e.valueArray&&e.valueArray.indexOf(r)>-1,i=r===e.focusedOption,s=(0,m.default)(e.optionClassName,{"Select-option":!0,"is-selected":a,"is-focused":i,"is-disabled":r.disabled});return 0===o?u.default.createElement("div",{key:"option-"+o+"-"+r[e.valueKey]},u.default.createElement(w.default,{onAddAll:t.handleAddAll,onClearAll:t.handleClearAll,addAllTitle:n.addAllTitle,clearAllTitle:n.clearAllTitle}),u.default.createElement(g.default,{className:s,option:r,onFocus:e.onFocus,onSelect:e.onSelect,children:e.children})):u.default.createElement("div",{key:"option-"+o+"-"+r[e.valueKey]},u.default.createElement(g.default,{className:s,option:r,onFocus:e.onFocus,onSelect:e.onSelect,children:e.children}))})}},{key:"getSelectComponent",value:function(){return u.default.createElement(f.default,{onChange:this.toggleSelection,clearRenderer:this.renderClearButton,closeOnSelect:!1,disabled:this.props.disabled,multi:!0,menuRenderer:this.renderMenu,optionComponent:g.default,options:this.props.options,valueComponent:b.default,filterOptions:this.handleFilterOptions,placeholder:this.props.placeholder})}},{key:"getSelectAsyncComponent",value:function(){return u.default.createElement(f.default.Async,{loadOptions:this.props.loadOptions,cache:this.props.cache,onChange:this.toggleSelection,clearRenderer:this.renderClearButton,closeOnSelect:!1,disabled:this.props.disabled,multi:!0,menuRenderer:this.renderMenu,optionComponent:g.default,valueComponent:b.default,filterOptions:this.handleFilterOptions,placeholder:this.props.placeholder})}},{key:"render",value:function(){return this.props.async?this.getSelectAsyncComponent():this.getSelectComponent()}}]),t}(u.default.Component);C.propTypes={addAllTitle:d.default.string,async:d.default.bool,cache:d.default.any,clearAllTitle:d.default.string,disabled:d.default.bool,ignoreAccents:d.default.bool,ignoreCase:d.default.bool,loadOptions:d.default.func,matchPos:d.default.string,matchProp:d.default.string,onChange:d.default.func,options:d.default.array,placeholder:d.default.string,value:d.default.any,valueKey:d.default.string},C.defaultProps={addAllTitle:"Add all",async:!1,cache:{},clearAllTitle:"Clear",disabled:!1,ignoreAccents:!0,ignoreCase:!0,label:"",matchPos:"any",matchProp:"any",options:[],placeholder:"Please select ..",valueKey:"value"},t.default=C},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=r(l),c=n(2),d=r(c),p=n(174),f=r(p),h=function(e){function t(e,n){o(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.handleMouseDown=r.handleMouseDown.bind(r),r.handleMouseEnter=r.handleMouseEnter.bind(r),r.handleMouseMove=r.handleMouseMove.bind(r),r}return i(t,e),s(t,[{key:"blockEvent",value:function(e){e.preventDefault(),e.stopPropagation(),"A"===e.target.tagName&&"href"in e.target&&(e.target.target?window.open(e.target.href,e.target.target):window.location.href=e.target.href)}},{key:"handleMouseDown",value:function(e){e.preventDefault(),e.stopPropagation(),this.props.onSelect(this.props.option,e)}},{key:"handleMouseEnter",value:function(e){this.props.onFocus(this.props.option,e)}},{key:"handleMouseMove",value:function(e){this.props.isFocused||this.props.onFocus(this.props.option,e)}},{key:"renderMarker",value:function(){var e={width:".7em",height:".7em"};return u.default.createElement("span",null,u.default.createElement("img",{style:e,src:this.props.option.isSelected?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAMAAABrrFhUAAAAzFBMVEUAAABmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmbop8NfAAAAQ3RSTlMAAQIDBAUGBwgJCwwODxASExQVFhcaGxwdHiQmJyowOEZeYWlwc4iRmrS5vsDDxcfKzM7P1dna4uTo6e3v8fP19/n7iNWGAAAAA9hJREFUeNrt3Nd2E0EQhOGRLJIBkREmY3JOxoDBskS//ztxYYyTtNqdndDdVfUAc87330+HwHEcx3Ecx3Ecx3Ecx5ndmYsjZP7DDyLy+fEAlD98JfvbugzpH72Vg00niP53crjZBNsPWOCEH67AKT9YgQV+qAIL/UAFlvhhCiz1gxRo8EMUaPQDFFjhd19gpd95gRZ+1wVa+R0XaOl3W6C132mBDn6XBTr5HRbo6HdXoLPfWYEIv6sCUX5HBSL9bgpE+50U6OF3UaCX30GBnn7zBXr7jRdI4DddIInfcIFEfrMFkvmNFkjoN1kgqd9ggcR+cwWS+40VyOA3VSCL31CBTH4zBbL5jRTI6DdRIKtfZHYb2y+yewnbL/JtiO0XeQLul98DbL/IdXC/3AP3yw1w/+4A2y+b4P7tIbZ/Osb2z++A+zfop59++umnn3766aeffvrpp59++umnn3766aeffvobN7g6WQf2rz2disjXR6j+K9//Pfv6HKR/svf/4Z9jRP/syNM7Y2x/fAEv/tgCfvxxBTz5Ywr48ncv4M3ftYA/f7cCHv1dCvj0ty/g1d+2gF9/uwKe/W0K+PavLuDdv6qAf39zAQR/UwEM//ICKP5lBXD8iwsg+RcVwPKfLoDmP1kAz3+8AKL/aAFM/2EBVP9BAVz/fgFkv8jOGNsvsvMR219w9NNPP/30008//fTTH79b4P71X9j+8Abcfx/cH16A+8MWuD9Mwf3hE7g/PAf3h5vg/hBegvvD2hdsfwjnt7H9IVzYxvZbKJD7/7P2Avn/f+suUOL/u+YCZf7/6y1Q6v6B1gLl7j/oLFDy/oXGAmXvf+grUPr+ibYC5e+/6CpQ4/6NpgJ17v/oKVDr/pGWAvXuP+koUPP+lYYCde9/1S9Q+/5Z7QL177/VLaDh/l3NAjru/9UroOX+Ya0Ceu4/1img6f5ljQK67n+WL6Dt/mnpAvruv5YtoPH+bckCKu//Fiyg01+ugFZ/qQJ6/WUKaPaXKKDbn7+Adn/uAvr9eQtY8OcsYMOfr4AVf64Cdvx5Cljy5yhgy5++gDV/6gL2/GkLWPSnLGDTn66AVX+qAnb9aQpY9qcoYNvfv4B1f98C9v39Cnjw9yngwx9fwIs/toAff1wBT/6YAr783Qt483ct4M/frYBHf5cCPv3tC3j1ty3g19+ugGd/mwK+/asLePevKuDf31wAwd9UAMO/vACKf1kBHP/iAkj+RQWw/KcLoPlPFsDzHy+A6A/h7PsD/49rAXKDzbnIH5k/GwXUDe9uPNgYBo7jOI7jOI7jOI7jOI7TuL/OhrIas3WI7wAAAABJRU5ErkJggg==":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAMAAABrrFhUAAABklBMVEUAAABmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmYZKwwjAAAAhXRSTlMAAQIDBAUGBwgJCgsMDQ8QERMUFRYXGRobHB0eHyAhIiQlJicqKy4vMzU3ODs8PT9AQUNGSktOT1BSVFVXW11hYmRmZ2hxc3R1d3t8fn+Cg4iJjo+RkpeYmpueoKKjpaaoqq+wsrS3ub7AwcPHzM7P0dPZ2tze4OLk5ujr7e/x8/X3+fv9Thn5agAABcFJREFUeNrt2ulbE1cUBvBzJxmMIQYlLqWItihEQQUVq9CCsYALls0qBWmhuAQRlMU0skQWyf2/+8FCQebcSSDtwz3znq/n8OH9PTNzl0BUZCnHPRo7nBUtCyn67ypS09Q1spDXh7wWx7tv1h4rdfjopZ6MtqlyT5qOly797VltYy13nihBeudaWttb861HDhY//GNO212bD6L7j++m1rWA6t/vJ/H6qhZSPzv7iJ94o+VUtq7o7U63llWjZUXlL5/W0mqpuoj8yTUtsH4qOP99LbPGQoW9/kNaas0U8iEIvdBya6Hcf/MzrSXXst/xwJ3TsmvNLOBMaem1bHoL1ISWXwuGL+EzHYSaYVfDezoYNcbkr9VBKe89YSQXGAD9rdcHMB2c/HrJ3QvQXsgiOnTrQkXYocNaKhQ719y/VMjpeO8BeNN3Ae2sJDsqdsd/O7fnhmTcb+2oJ5vqzB8+ef766jlOmsczF8m2SkyaI3Xufnk+GodTDllYV82Xurvuim+YJhe/ITsrajzZ9O98ALKGwZcu2VrqF5PAjl9MGg1jw4osrpQh2YN/x+b5qUGyu37go+W3fzes4Yeek+1leAZat2b62JFJZT0A8d+B+a1roA1uYuWI/flJ8WvBP1vbenbgO5JQ0VWfzdAw139MMuoqe7z58ohwx6BcWAgAsbvi40RECa7bLCU/H7GJiKiFuzRQYgBojMn4hIhohGm2yMlPZ7i3nIiI+z8gVxAAzfFHwgh3BpCUn+4wKWuJTjOtpCiAGJPyJtFlphURBUDMTWk3exv8QVZ+6veOOU406N3pEwbQzNx2sUtkmzCAc8ybTpQOwjeQ/woqeufdqBIGEGIAQsTchyaEASgGoIzbCMaFARB7Ncw0YgEBiAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD+V4BV70ZFQACOUsa7cVJYfocBcGnGu1EtDCDMADj02rvRIAygggFQNOrd6BAGcME7Zp6o17vzVBjALe+YC0St3p0VYQC/ecccIUoyL8cxWQBr3im7iBIMQJOo/JV8SpdpTYoC6GJS1hDRMtMrlwTAhYwQ0YBmXw8xVc9kzBARXWGaG2E5AMx2V/cQEcWZpr4rJv9FLuIlIiL6xHTzUlZCJ8MBRImI3QtqPSEEIMUFnP3SP8v1dYuI/FVsvts+a4TOS7gVcBe1+Q3gdwlaZyPW51cv2XTprZkT7IietX4tHObDXdseesUPTVkuMMhHyznbU+f5Kf3e5rdAPTcka9sx+NYwl7X3SxiZNORaD+2YrDMM6rytq+H3OVOs1K7ZadOo/tPGn0nCj42ZVt1d06eMwzp/17ZvoWrOmSNd/+oPeszjeqPLpvsBt2XJJ8+bPQ/MivarySY7TkeR5LBvFp3Y82cNuoBaedrRUH2yInY4K56oSrb1fSgkSLcH3IAOTk0rr1Pz+8DkX/P+nsU/BwUgyXw9GgOS/z77/ewIRP4hwwryKAD5XyjTGvqr/AUgZN5B/i48/5zrt4eW/QxMuf47yYeC8084heyl5a4Fz1Rhp4lGoTuiewWfp+ISd8W52mJ+TZN3MkoXebnbsCIq/ma7KvZaIdwjKP/Yvq6zTk0Lif8xud/Lpbq3AuJnb6gD3K+df2V5/PlGdcArxsquZWvTb/TVlOSa9WzvJwvTfx6ud0p31Ry/MmDTg7A+0pJQJb9vdxPJ1t7R1zOZ1cMaO/suPTbYfvl0MXuevwFWcDKfbC6LzAAAAABJRU5ErkJggg=="})," ")}},{key:"render",value:function(){var e=this.props,t=e.option,n=e.instancePrefix,r=e.optionIndex,o=(0,f.default)(this.props.className,t.className);return t.disabled?u.default.createElement("div",{className:o,onMouseDown:this.blockEvent,onClick:this.blockEvent},this.renderMarker(),this.props.option.label):u.default.createElement("div",{className:o,style:t.style,role:"option",onMouseDown:this.handleMouseDown,onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,id:n+"-option-"+r,title:this.props.option.title},this.renderMarker(),this.props.option.label)}}]),t}(u.default.Component);h.propTypes={children:d.default.node,className:d.default.string,ignoreAccents:d.default.bool,ignoreCase:d.default.bool,isDisabled:d.default.bool,isFocused:d.default.bool,isSelected:d.default.bool,matchPos:d.default.string,matchProp:d.default.string,onFocus:d.default.func,onSelect:d.default.func,option:d.default.object.isRequired,valueKey:d.default.string},t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=r(l),c=n(2),d=r(c),p=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){return null}}]),t}(u.default.Component);p.propTypes={children:d.default.node,disabled:d.default.bool,id:d.default.string,value:d.default.object.isRequired},t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),u=r(l),c=n(2),d=r(c),p=function(e){function t(e,n){o(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.addAll=r.addAll.bind(r),r.clearAll=r.clearAll.bind(r),r}return i(t,e),s(t,[{key:"addAll",value:function(e){e.preventDefault(),e.stopPropagation(),this.props.onAddAll()}},{key:"clearAll",value:function(e){e.preventDefault(),e.stopPropagation(),this.props.onClearAll()}},{key:"render",value:function(){var e={fontColor:"inherit",textAlign:"center",padding:"1em",borderBottom:"1px solid #ccc"},t={borderRadius:"0.3em",fontColor:"inherit",backgroundColor:"white",border:"1px solid #ccc",padding:"0.5em",textAlign:"center",textDecoration:"none",fontSize:"smaller",cursor:"pointer",marginLeft:"0.3em"};return u.default.createElement("div",{style:e},u.default.createElement("button",{onClick:this.addAll,style:t},this.props.addAllTitle),u.default.createElement("button",{onClick:this.clearAll,style:t},this.props.clearAllTitle))}}]),t}(u.default.Component);p.propTypes={onAddAll:d.default.func,onClearAll:d.default.func,addAllTitle:d.default.string,clearAllTitle:d.default.string},t.default=p},function(e,t,n){"use strict";function r(e){for(var t=0;t<o.length;t++)e=e.replace(o[t].letters,o[t].base);return e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=[{base:"A",letters:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{base:"AA",letters:/[\uA732]/g},{base:"AE",letters:/[\u00C6\u01FC\u01E2]/g},{base:"AO",letters:/[\uA734]/g},{base:"AU",letters:/[\uA736]/g},{base:"AV",letters:/[\uA738\uA73A]/g},{base:"AY",letters:/[\uA73C]/g},{base:"B",letters:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{base:"C",letters:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{base:"D",letters:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{base:"DZ",letters:/[\u01F1\u01C4]/g},{base:"Dz",letters:/[\u01F2\u01C5]/g},{base:"E",letters:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{base:"F",letters:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{base:"G",letters:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{base:"H",letters:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{base:"I",letters:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{base:"J",letters:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{base:"K",letters:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{base:"L",letters:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{base:"LJ",letters:/[\u01C7]/g},{base:"Lj",letters:/[\u01C8]/g},{base:"M",letters:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{base:"N",letters:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{base:"NJ",letters:/[\u01CA]/g},{base:"Nj",letters:/[\u01CB]/g},{base:"O",letters:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{base:"OI",letters:/[\u01A2]/g},{base:"OO",letters:/[\uA74E]/g},{base:"OU",letters:/[\u0222]/g},{base:"P",letters:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{base:"Q",letters:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{base:"R",letters:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{base:"S",letters:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{base:"T",letters:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{base:"TZ",letters:/[\uA728]/g},{base:"U",letters:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{base:"V",letters:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{base:"VY",letters:/[\uA760]/g},{base:"W",letters:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{base:"X",letters:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{base:"Y",letters:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{base:"Z",letters:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{base:"a",letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:"aa",letters:/[\uA733]/g},{base:"ae",letters:/[\u00E6\u01FD\u01E3]/g},{base:"ao",letters:/[\uA735]/g},{base:"au",letters:/[\uA737]/g},{base:"av",letters:/[\uA739\uA73B]/g},{base:"ay",letters:/[\uA73D]/g},{base:"b",letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:"c",letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:"d",letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:"dz",letters:/[\u01F3\u01C6]/g},{base:"e",letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:"f",letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:"g",letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:"h",letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:"hv",letters:/[\u0195]/g},{base:"i",letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:"j",letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:"k",letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:"l",letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:"lj",letters:/[\u01C9]/g},{base:"m",letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:"n",letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:"nj",letters:/[\u01CC]/g},{base:"o",letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:"oi",letters:/[\u01A3]/g},{base:"ou",letters:/[\u0223]/g},{base:"oo",letters:/[\uA74F]/g},{base:"p",letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:"q",letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:"r",letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:"s",letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:"t",letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:"tz",letters:/[\uA729]/g},{base:"u",letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:"v",letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:"vy",letters:/[\uA761]/g},{base:"w",letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:"x",letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:"y",letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:"z",letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}]},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjQsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB3aWR0aD0iMjBweCIgaGVpZ2h0PSIyMHB4IiB2aWV3Qm94PSIwIDAgMjAgMjAiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDIwIDIwIiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxsaW5lIGZpbGw9Im5vbmUiIHgxPSI2Ljc5MiIgeTE9IjUuNjY3IiB4Mj0iNi43OTIiIHkyPSIxMi4xMjUiLz4NCjxwb2x5Z29uIGZpbGw9IiMzMzMzMzMiIHBvaW50cz0iMCw1IDAsMCA1LDAgIi8+DQo8cG9seWdvbiBmaWxsPSIjMzMzMzMzIiBwb2ludHM9IjE0Ljk5OSwwIDIwLDAgMjAsNSAiLz4NCjxwb2x5Z29uIGZpbGw9IiMzMzMzMzMiIHBvaW50cz0iMjAsMTUgMjAsMjAgMTUsMjAgIi8+DQo8cG9seWdvbiBmaWxsPSIjMzMzMzMzIiBwb2ludHM9IjUsMjAgMCwyMCAwLDE1ICIvPg0KPHJlY3QgeD0iMy43NSIgeT0iNC43MDgiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzMzMzMyIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHdpZHRoPSIxMi41IiBoZWlnaHQ9IjEwLjU4MyIvPg0KPC9zdmc+DQo="},function(e,t,n){"use strict";function r(e,t,n,r,o,i,s){var l=r.map(o),u="sample"===i?"SAMPLE_DATA_":"PATIENT_DATA_",c={CLINICAL:{},CNA:{},MUTATIONS:{},MRNA:{},PROTEIN:{},FUSION:{}},d={amp:"Amplification",gain:"Gain",hetloss:"Shallow Deletion",homdel:"Deep Deletion"},p={};p=s?{inframe:"Inframe Mutation (putative passenger)",inframe_rec:"Inframe Mutation (putative driver)",missense:"Missense Mutation (putative passenger)",missense_rec:"Missense Mutation (putative driver)",promoter:"Promoter Mutation",promoter_rec:"Promoter Mutation",trunc:"Truncating mutation (putative passenger)",trunc_rec:"Truncating mutation (putative driver)"}:{inframe:"Inframe Mutation",inframe_rec:"Inframe Mutation",missense:"Missense Mutation",missense_rec:"Missense Mutation",promoter:"Promoter Mutation",promoter_rec:"Promoter Mutation",trunc:"Truncating mutation",trunc_rec:"Truncating mutation"};var f={up:"mRNA Upregulation",down:"mRNA Downregulation"},h={down:"Protein Downregulation",up:"Protein Upregulation"},m={true:"Fusion"},y=!0,g=!1,v=void 0;try{for(var b,_=e[Symbol.iterator]();!(y=(b=_.next()).done);y=!0){var w=b.value,x=w.data,S=x[0].trackLabel;void 0===c.CNA[S]&&(c.CNA[S]={}),void 0===c.MUTATIONS[S]&&(c.MUTATIONS[S]={}),void 0===c.MRNA[S]&&(c.MRNA[S]={}),void 0===c.PROTEIN[S]&&(c.PROTEIN[S]={}),void 0===c.FUSION[S]&&(c.FUSION[S]={});var C=!0,k=!1,E=void 0;try{for(var M,A=x[Symbol.iterator]();!(C=(M=A.next()).done);C=!0){var T=M.value,O="sample"===i?T.sample:T.patient;c.CNA[S][O]="",c.MUTATIONS[S][O]="",c.MRNA[S][O]="",c.PROTEIN[S][O]="",c.FUSION[S][O]="",void 0!==T.disp_cna&&(c.CNA[S][O]=d[T.disp_cna]?d[T.disp_cna]:T.disp_cna),void 0!==T.disp_fusion&&(c.FUSION[S][O]=m[T.disp_fusion+""]?m[T.disp_fusion+""]:T.disp_fusion),void 0!==T.disp_mrna&&(c.MRNA[S][O]=f[T.disp_mrna]?f[T.disp_mrna]:T.disp_mrna),void 0!==T.disp_prot&&(c.PROTEIN[S][O]=h[T.disp_prot]?h[T.disp_prot]:T.disp_prot),void 0!==T.disp_mut&&(c.MUTATIONS[S][O]=p[T.disp_mut]?p[T.disp_mut]:T.disp_mut)}}catch(e){k=!0,E=e}finally{try{!C&&A.return&&A.return()}finally{if(k)throw E}}}}catch(e){g=!0,v=e}finally{try{!y&&_.return&&_.return()}finally{if(g)throw v}}var P=!0,j=!1,I=void 0;try{for(var D,N=t[Symbol.iterator]();!(P=(D=N.next()).done);P=!0){var R=D.value,L=R.data,F=R.label;void 0===c.CLINICAL[F]&&(c.CLINICAL[F]={});var z=!0,B=!1,V=void 0;try{for(var G,H=L[Symbol.iterator]();!(z=(G=H.next()).done);z=!0){var U=G.value,q="sample"===i?U.sample:U.patient;c.CLINICAL[F][q]="",void 0!==U.attr_val&&(c.CLINICAL[F][q]=U.attr_val)}}catch(e){B=!0,V=e}finally{try{!z&&H.return&&H.return()}finally{if(B)throw V}}}}catch(e){j=!0,I=e}finally{try{!P&&N.return&&N.return()}finally{if(j)throw I}}var W=!0,Z=!1,Y=void 0;try{for(var K,X=n[Symbol.iterator]();!(W=(K=X.next()).done);W=!0){var Q=K.value,J=Q.label,$="HEATMAP "+Q.molecularAlterationType+" "+Q.datatype,ee=Q.data,te=!0,ne=!1,re=void 0;try{for(var oe,ae=ee[Symbol.iterator]();!(te=(oe=ae.next()).done);te=!0){var ie=oe.value;void 0===c[$]&&(c[$]={}),void 0===c[$][J]&&(c[$][J]={});var se="sample"===i?ie.sample:ie.patient;c[$][J][se]=null===ie.profile_data?"":ie.profile_data}}catch(e){ne=!0,re=e}finally{try{!te&&ae.return&&ae.return()}finally{if(ne)throw re}}}}catch(e){Z=!0,Y=e}finally{try{!W&&X.return&&X.return()}finally{if(Z)throw Y}}for(var le="track_name\ttrack_type",ue=0;ue<l.length;ue++)le+="\t"+l[ue];le+="\n",Object.keys(c).forEach(function(e){Object.keys(c[e]).forEach(function(t){le+=t+"\t"+e;for(var n=0;n<l.length;n++)le+="\t"+c[e][t][l[n]];le+="\n"})}),(0,a.default)(le,u+"oncoprint.tsv")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(179),a=function(e){return e&&e.__esModule?e:{default:e}}(o)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=n(1),d=o(c),p=n(3),f=o(p),h=n(33),m=n(174),y=r(m);n(1224);var g=n(173),v=r(g),b=n(854),_=r(b),w=n(13),x=n(935),S=r(x),C=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},k=function(e){function t(){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"render",value:function(){return d.createElement("a",{href:this.props.href||"study?id="+this.props.study.studyId,target:"_blank",style:{cursor:"pointer"},onClick:this.props.onClick||function(){}},this.props.study.name)}}]),t}(d.Component),E=function(e){function t(){a(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.queryFormVisible=!1,e.queryStoreInitialized=!1,e.handleModifyQueryClick=e.handleModifyQueryClick.bind(e),e}return s(t,e),l(t,[{key:"handleModifyQueryClick",value:function(){this.queryStoreInitialized=!0,this.queryFormVisible=!this.queryFormVisible}},{key:"render",value:function(){if(this.props.store.totalAlterationStats.isError||this.props.store.queriedStudies.isError)return null;var e=this.props.store.totalAlterationStats.isComplete&&this.props.store.queriedStudies.isComplete,t=e?this.props.store.totalAlterationStats.result.alteredSampleCount/this.props.store.totalAlterationStats.result.sampleCount*100:0;return d.createElement("div",null,d.createElement("div",{className:"query-summary"},d.createElement("div",{className:"query-summary__leftItems"},d.createElement("div",null,d.createElement("button",{id:"modifyQueryBtn",onClick:this.handleModifyQueryClick,className:(0,y.default)("btn btn-primary",{disabled:!e})},this.queryFormVisible?"Cancel Modify Query":"Modify Query")),d.createElement(_.default,{isLoading:!1===e}),e&&(1===this.props.store.queriedStudies.result.length?this.singleStudyUI:this.multipleStudyUI)),e&&d.createElement("div",{className:"query-summary__alterationData"},d.createElement("h4",null,"Gene Set / Pathway is altered in ",this.props.store.totalAlterationStats.result.alteredSampleCount," (",f.round(t,1),"%) of queried samples"))),this.queryStoreInitialized&&d.createElement("div",{style:{marginTop:10},className:(0,y.default)({hidden:!this.queryFormVisible})},d.createElement(S.default,{showDownloadTab:!1,store:this.props.queryStore})))}},{key:"singleStudyUI",get:function(){return d.createElement("div",null,d.createElement("h4",null,d.createElement(k,{study:this.props.store.queriedStudies.result[0]})),d.createElement("span",null,window.serverVars.caseSetProperties.case_set_name,"  (",d.createElement("strong",null,this.props.store.samples.result.length)," samples) / ",d.createElement("strong",{"data-test":"QuerySummaryGeneCount"},this.props.store.hugoGeneSymbols.length)," Genes"))}},{key:"multipleStudyUI",get:function(){return d.createElement("div",null,d.createElement("span",null,"Querying ",this.props.store.samples.result.length," samples in ",this.props.store.queriedStudies.result.length," studies  ",d.createElement(v.default,{placement:"bottom",overlay:this.studyList,destroyTooltipOnHide:!0},d.createElement("i",{className:"fa fa-info-circle"}))))}},{key:"studyList",get:function(){return d.createElement("div",{className:"cbioportal-frontend"},d.createElement("ul",{className:"list-unstyled",style:{marginBottom:0}},this.props.store.queriedStudies.result.map(function(e){return d.createElement("li",null,d.createElement(k,{href:"study?id="+e.studyId,study:e}))})))}}]),t}(d.Component);C([w.observable],E.prototype,"queryFormVisible",void 0),C([w.observable],E.prototype,"queryStoreInitialized",void 0),E=C([h.observer],E),t.default=E},function(e,t){},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(1),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),d=n(1226),p=r(d),f=n(854),h=r(f),m=n(33),y=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},g=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){return this.props.store.molecularProfilesInStudies.isComplete&&this.props.store.genes.isComplete&&this.props.store.studyToDataQueryFilter.isComplete&&this.props.store.geneMolecularDataCache.isComplete?c.createElement(p.default,{molecularProfiles:this.props.store.molecularProfilesInStudies.result,genes:this.props.store.genes.result,studyToDataQueryFilter:this.props.store.studyToDataQueryFilter.result,numericGeneMolecularDataCache:this.props.store.numericGeneMolecularDataCache,mutationCache:this.props.store.mutationCache,molecularProfileIdToProfiledSampleCount:this.props.store.molecularProfileIdToProfiledSampleCount,coverageInformation:this.props.store.coverageInformation,studyToMutationMolecularProfile:this.props.store.studyToMutationMolecularProfile}):c.createElement(h.default,{isLoading:!0})}}]),t}(c.Component);g=y([m.observer],g),t.default=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.CoExpressionCache=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(1),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),d=n(13),p=n(33),f=n(122),h=n(858),m=r(h),y=n(65),g=r(y),v=n(3),b=r(v),_=n(873),w=n(1081),x=r(w),S=n(854),C=r(S),k=n(1082),E=n(126),M=r(E),A=n(1239),T=r(A),O=n(886),P=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},j=t.CoExpressionCache=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),t}(M.default),I=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.plotState={plotLogScale:!1,plotShowMutations:!0},n.coExpressionCache=new j(function(e){return{invoke:function(){var t=.3;e.allData&&(t=0);var r=n.props.studyToDataQueryFilter[e.molecularProfile.studyId];return r?g.default.fetchCoExpressionsUsingPOST({molecularProfileId:e.molecularProfile.molecularProfileId,coExpressionFilter:r,entrezGeneId:e.entrezGeneId,threshold:t}):Promise.resolve([])}}},function(e){return e.entrezGeneId+","+e.molecularProfile.molecularProfileId}),(0,T.default)("resultsViewCoExpressionTab",n),n.plotHandlers={onClickLogScale:(0,d.action)(function(){n.plotState.plotLogScale=!n.plotState.plotLogScale}),onClickShowMutations:(0,d.action)(function(){n.plotState.plotShowMutations=!n.plotState.plotShowMutations})},n}return i(t,e),s(t,[{key:"onSelectDataSet",value:function(e){this.selectedMolecularProfile=this.molecularProfileIdToMolecularProfile[e.value]}},{key:"onSelectGene",value:function(e){this.selectedEntrezGeneId=parseInt(e,10)}},{key:"header",value:function(){return c.createElement("div",null,this.dataSetSelector)}},{key:"geneTabs",value:function(){if(this.selectedMolecularProfile&&void 0!==this.selectedEntrezGeneId){var e=[],t=!0,n=!1,r=void 0;try{for(var o,a=this.props.genes[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=o.value,s=!0,l=!1,u=void 0;try{for(var d,p=this.profiles[Symbol.iterator]();!(s=(d=p.next()).done);s=!0){var f=d.value;e.push(c.createElement(x.default,{key:i.entrezGeneId+","+f.molecularProfileId,coExpressionCache:this.coExpressionCache,gene:i,molecularProfile:f,numericGeneMolecularDataCache:this.props.numericGeneMolecularDataCache,mutationCache:this.hasMutationData?this.props.mutationCache:void 0,hidden:f.molecularProfileId!==this.selectedMolecularProfile.molecularProfileId||i.entrezGeneId!==this.selectedEntrezGeneId,plotState:this.plotState,plotHandlers:this.plotHandlers,coverageInformation:this.props.coverageInformation,studyToMutationMolecularProfile:this.props.studyToMutationMolecularProfile}))}}catch(e){l=!0,u=e}finally{try{!s&&p.return&&p.return()}finally{if(l)throw u}}}}catch(e){n=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}return c.createElement("div",null,c.createElement(_.MSKTabs,{id:"coexpressionTabGeneTabs",activeTabId:this.selectedEntrezGeneId+"",onTabClick:this.onSelectGene,className:"coexpressionTabGeneTabs pillTabs",unmountOnHide:!0,tabButtonStyle:"pills",enablePagination:!0,arrowStyle:{"line-height":.8}},this.props.genes.map(function(e,t){return c.createElement(_.MSKTab,{key:t,id:e.entrezGeneId+"",linkText:e.hugoGeneSymbol})})),e)}return c.createElement("div",{style:{position:"relative"}},c.createElement(C.default,{isLoading:!0,style:{position:"absolute",left:"50%",top:100,transform:"translate(-50%,0)"}}))}},{key:"componentWillMount",value:function(){var e=this;this.setMolecularProfileReaction=(0,d.autorun)(function(){!e.selectedMolecularProfile&&e.profiles.length&&(e.selectedMolecularProfile=e.profiles[0])}),this.setGeneReaction=(0,d.autorun)(function(){!e.selectedEntrezGeneId&&e.props.genes.length&&(e.selectedEntrezGeneId=e.props.genes[0].entrezGeneId)})}},{key:"componentWillUnmount",value:function(){this.setMolecularProfileReaction(),this.setGeneReaction()}},{key:"render",value:function(){return this.profiles.length?c.createElement("div",null,c.createElement(p.Observer,null,this.header),c.createElement(p.Observer,null,this.geneTabs)):c.createElement("div",null,c.createElement("span",null,"There are no available profiles in the queried studies."))}},{key:"profiles",get:function(){return(0,k.filterAndSortProfiles)(this.props.molecularProfiles)}},{key:"hasMutationData",get:function(){return!!b.default.find(this.props.molecularProfiles,function(e){return e.molecularAlterationType===f.AlterationTypeConstants.MUTATION_EXTENDED})}},{key:"molecularProfileIdToMolecularProfile",get:function(){return b.default.keyBy(this.profiles,function(e){return e.molecularProfileId})}},{key:"dataSetSelector",get:function(){var e=this;if(this.selectedMolecularProfile&&this.props.molecularProfileIdToProfiledSampleCount.isComplete){var t=this.profiles.map(function(t){var n=e.props.molecularProfileIdToProfiledSampleCount.result[t.molecularProfileId];return{label:t.name+" ("+n+" sample"+(1!==n?"s":"")+")",value:t.molecularProfileId}});return c.createElement("div",{style:{display:"flex",alignItems:"center"}},c.createElement("span",null,"Data Set:"),c.createElement("div",{style:{display:"inline-block",width:376,marginLeft:4,marginRight:4,zIndex:10}},c.createElement(m.default,{name:"data-set-select",value:this.selectedMolecularProfile.molecularProfileId,onChange:this.onSelectDataSet,options:t,searchable:!1,clearable:!1,className:"coexpression-select-profile"})))}return c.createElement(C.default,{isLoading:!0})}}]),t}(c.Component);P([d.observable],I.prototype,"selectedMolecularProfile",void 0),P([d.observable],I.prototype,"selectedEntrezGeneId",void 0),P([d.observable],I.prototype,"plotState",void 0),P([O.bind],I.prototype,"onSelectDataSet",null),P([O.bind],I.prototype,"onSelectGene",null),P([d.computed],I.prototype,"profiles",null),P([d.computed],I.prototype,"hasMutationData",null),P([d.computed],I.prototype,"molecularProfileIdToMolecularProfile",null),P([O.bind],I.prototype,"header",null),P([O.bind],I.prototype,"geneTabs",null),I=P([p.observer],I),t.default=I},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(1),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),d=n(1228),p=n(178),f=r(p),h=n(1081),m=n(858),y=r(m),g=n(33),v=n(1082),b=n(1229),_=r(b),w=n(886),x=n(1055),S=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},C=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"onRowClick",value:function(e){this.props.dataStore.setHighlighted(e)}},{key:"onSelectTableMode",value:function(e){this.props.onSelectTableMode(e.value)}},{key:"render",value:function(){return c.createElement("div",null,c.createElement("div",{style:{float:"left",display:"flex",flexDirection:"row"}},c.createElement("div",{style:{width:180}},c.createElement(y.default,{value:this.props.tableMode,onChange:this.onSelectTableMode,options:this.tableModeOptions,searchable:!1,clearable:!1,className:"coexpression-select-table-mode"})),c.createElement(_.default,{style:{marginLeft:21,marginTop:"0.7em"},tooltip:c.createElement("div",{style:{maxWidth:200}},v.tableSearchInformation),tooltipPlacement:"left"})),c.createElement(f.default,{initialSortColumn:"Spearman's Correlation",initialSortDirection:"desc",columns:this.columns,showColumnVisibility:!1,dataStore:this.props.dataStore,onRowClick:this.onRowClick,filterPlaceholder:"Enter gene or cytoband..",paginationProps:this.paginationProps,initialItemsPerPage:25,copyDownloadProps:{showCopy:!1}}))}},{key:"columns",get:function(){return[{name:"Correlated Gene",render:function(e){return c.createElement("span",{style:{fontWeight:"bold"}},e.hugoGeneSymbol)},filter:function(e,t,n){return e.hugoGeneSymbol.indexOf(n)>-1},download:function(e){return e.hugoGeneSymbol},sortBy:function(e){return e.hugoGeneSymbol},width:"30%"},{name:"Cytoband",render:function(e){return c.createElement("span",null,e.cytoband)},filter:x.cytobandFilter,download:function(e){return e.cytoband},sortBy:function(e){return e.cytoband},width:"30%"},{name:"Pearson's Correlation",render:function(e){return c.createElement("span",{style:{color:(0,d.correlationColor)(e.pearsonsCorrelation),textAlign:"right",float:"right"}},e.pearsonsCorrelation.toFixed(2))},download:function(e){return e.pearsonsCorrelation+""},sortBy:function(e){return(0,d.correlationSortBy)(e.pearsonsCorrelation)},align:"right"},{name:"Spearman's Correlation",render:function(e){return c.createElement("span",{style:{color:(0,d.correlationColor)(e.spearmansCorrelation),textAlign:"right",float:"right"}},e.spearmansCorrelation.toFixed(2))},download:function(e){return e.spearmansCorrelation+""},sortBy:function(e){return(0,d.correlationSortBy)(e.spearmansCorrelation)},align:"right"}]}},{key:"tableModeOptions",get:function(){return[{label:"Show Any Correlation",value:h.TableMode.SHOW_ALL},{label:"Show Only Positively Correlated",value:h.TableMode.SHOW_POSITIVE},{label:"Show Only Negatively Correlated",value:h.TableMode.SHOW_NEGATIVE}]}},{key:"paginationProps",get:function(){return{itemsPerPageOptions:[25]}}}]),t}(c.Component);S([w.bind],C.prototype,"onRowClick",null),S([w.bind],C.prototype,"onSelectTableMode",null),C=S([g.observer],C),t.default=C},function(e,t,n){"use strict";function r(e){return e>0?a:i}function o(e){return[Math.abs(e),e>0?1:0]}Object.defineProperty(t,"__esModule",{value:!0}),t.correlationColor=r,t.correlationSortBy=o;var a=t.CORR_POS_COLOR="rgb(41, 87, 41)",i=t.CORR_NEG_COLOR="rgb(180, 4, 4)"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(s),u=n(173),c=function(e){return e&&e.__esModule?e:{default:e}}(u),d=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),i(t,[{key:"render",value:function(){return l.createElement(c.default,{overlay:this.props.tooltip,placement:this.props.tooltipPlacement||"right"},l.createElement("i",{className:"glyphicon glyphicon-info-sign",style:Object.assign({},{color:"#000000",cursor:"pointer"},this.props.style||{})}))}}]),t}(l.Component);t.default=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(){}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=n(1),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(c),p=n(13),f=n(33),h=n(25);n(1231);var m=n(886),y=n(1232),g=r(y),v=n(1236),b=r(v),_=n(1237),w=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},x=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),t}(g.default),S=function(e){function t(){o(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.svg=null,e}return i(t,e),l(t,[{key:"svgRef",value:function(e){this.svg=e}},{key:"getSvg",value:function(){return this.svg}},{key:"plot",value:function(){return this.props.data.length?d.createElement(x,{svgRef:this.svgRef,title:this.title,data:this.props.data,chartWidth:this.props.width,chartHeight:this.props.height,stroke:this.stroke,fill:this.fill,strokeWidth:1.2,legendData:this.mutationLegendElements,correlation:{pearson:this.props.coExpression.pearsonsCorrelation,spearman:this.props.coExpression.spearmansCorrelation},logX:this.props.logScale,logY:this.props.logScale,useLogSpaceTicks:!0,axisLabelX:this.axisLabelX,axisLabelY:this.axisLabelY,tooltip:this.tooltip,fontFamily:"Arial,Helvetica"}):d.createElement("span",null,"No data to plot.")}},{key:"toolbar",value:function(){return d.createElement("div",{style:{textAlign:"center"}},d.createElement("div",{style:{display:"inline-block"}},this.props.showMutationControls&&d.createElement("div",{className:"checkbox coexpression-plot-toolbar-elt"},d.createElement("label",null,d.createElement("input",{type:"checkbox",checked:this.props.showMutations,onClick:this.props.handlers.onClickShowMutations||s,"data-test":"ShowMutations"}),"Show Mutations")),this.props.showLogScaleControls&&d.createElement("div",{className:"coexpression-plot-toolbar-elt"},d.createElement("div",{className:"checkbox coexpression-plot-toolbar-elt"},d.createElement("label",null,d.createElement("input",{type:"checkbox",checked:this.props.logScale,onClick:this.props.handlers.onClickLogScale||s,"data-test":"logScale"}),"Log Scale")))),d.createElement("div",{style:{display:"inline-block"}},d.createElement(b.default,{getSvg:null===this.svg?void 0:this.getSvg,buttons:["SVG","PDF"],filename:"coexpression",dontFade:!0,style:{marginTop:13}})))}},{key:"tooltip",value:function(e){return d.createElement("div",null,d.createElement("div",null,d.createElement("span",null,"Sample ID: "),d.createElement("a",{href:(0,h.getSampleViewUrl)(e.studyId,e.sampleId)},e.sampleId)),d.createElement("div",null,d.createElement("span",null,this.props.xAxisGene.hugoGeneSymbol,": ",d.createElement("b",null,e.x.toFixed(2)))),d.createElement("div",null,d.createElement("span",null,this.props.yAxisGene.hugoGeneSymbol,": ",d.createElement("b",null,e.y.toFixed(2)))),e.mutationsX&&d.createElement("div",null,d.createElement("span",null,this.props.xAxisGene.hugoGeneSymbol," Mutation: ",d.createElement("b",null,e.mutationsX))),e.mutationsY&&d.createElement("div",null,d.createElement("span",null,this.props.yAxisGene.hugoGeneSymbol," Mutation: ",d.createElement("b",null,e.mutationsY))))}},{key:"render",value:function(){return d.createElement("div",{className:"borderedChart","data-test":"CoExpressionPlot"},d.createElement(f.Observer,null,this.toolbar),d.createElement(f.Observer,null,this.plot))}},{key:"stroke",get:function(){return this.props.showMutations?function(e){return e.profiledX||e.profiledY?e.mutationsX&&e.mutationsY?"#B40404":e.mutationsX||e.mutationsY?e.mutationsX?"#886A08":"#F7819F":"#0174df":"#d3d3d3"}:"#0174df"}},{key:"fill",get:function(){return this.props.showMutations?function(e){return e.profiledX||e.profiledY?e.mutationsX&&e.mutationsY?"#FF0000":e.mutationsX||e.mutationsY?e.mutationsX?"#DBA901":"#F5A9F2":"#58acfa":"#ffffff"}:"#58acfa"}},{key:"mutationLegendElements",get:function(){if(!this.props.showMutations)return[];var e=!1,t=!1,n=!1,r=!1,o=!1,a=!0,i=!1,s=void 0;try{for(var l,u=this.props.data[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value;c.profiledX||c.profiledY||(o=!0),c.mutationsX&&c.mutationsY?e=!0:c.mutationsX||c.mutationsY?c.mutationsX?t=!0:n=!0:r=!0}}catch(e){i=!0,s=e}finally{try{!a&&u.return&&u.return()}finally{if(i)throw s}}var d=[];return t&&d.push({name:[this.props.xAxisGene.hugoGeneSymbol,"mutated"],symbol:{fill:"#DBA901",stroke:"#886A08"}}),n&&d.push({name:[this.props.yAxisGene.hugoGeneSymbol,"mutated"],symbol:{fill:"#F5A9F2",stroke:"#F7819F"}}),e&&d.push({name:"Both mutated",symbol:{fill:"#FF0000",stroke:"#B40404"}}),r&&d.push({name:"Neither mutated",symbol:{fill:"#58acfa",stroke:"#0174df"}}),o&&d.push({name:"Not profiled for mutations",symbol:{fill:"#ffffff",stroke:"#d3d3d3"}}),d}},{key:"title",get:function(){return this.props.molecularProfile.name+": "+this.props.xAxisGene.hugoGeneSymbol+" vs. "+this.props.yAxisGene.hugoGeneSymbol}},{key:"axisLabelX",get:function(){return(0,_.axisLabel)(this.props.xAxisGene,!!this.props.logScale)}},{key:"axisLabelY",get:function(){return(0,_.axisLabel)(this.props.yAxisGene,!!this.props.logScale)}}]),t}(d.Component);w([p.observable],S.prototype,"svg",void 0),w([m.bind,p.action],S.prototype,"svgRef",null),w([m.bind],S.prototype,"getSvg",null),w([p.computed],S.prototype,"stroke",null),w([p.computed],S.prototype,"fill",null),w([p.computed],S.prototype,"mutationLegendElements",null),w([p.computed],S.prototype,"axisLabelX",null),w([p.computed],S.prototype,"axisLabelY",null),w([m.bind],S.prototype,"plot",null),w([m.bind],S.prototype,"toolbar",null),w([m.bind],S.prototype,"tooltip",null),S=w([f.observer],S),t.default=S},function(e,t){},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(1),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),d=n(33),p=n(886),f=r(p),h=n(13),m=n(863),y=r(m),g=n(862),v=n(906),b=r(v),_=n(1233),w=r(_),x=n(1234),S=n(1056),C=r(S),k=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},E=function(e){function t(){o(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.tooltipModel=null,e.pointHovered=!1,e.mouseEvents=e.makeMouseEvents(),e}return i(t,e),s(t,[{key:"containerRef",value:function(e){this.container=e}},{key:"svgRef",value:function(e){this.svg=e,this.props.svgRef&&this.props.svgRef(this.svg)}},{key:"makeMouseEvents",value:function(){var e=this,t=null;return[{target:"data",eventHandlers:{onMouseOver:function(){return[{target:"data",mutation:function(n){return e.tooltipModel=n,e.pointHovered=!0,null!==t&&(clearTimeout(t),t=null),{active:!0}}}]},onMouseOut:function(){return[{target:"data",mutation:function(){return null!==t&&clearTimeout(t),t=setTimeout(function(){e.pointHovered=!1},250),{active:!1}}}]}}}]}},{key:"logScale",value:function(e){return Math.log10(Math.max(e,.01))}},{key:"invLogScale",value:function(e){return Math.pow(10,e)}},{key:"x",value:function(e){return this.props.logX?this.logScale(e.x):e.x}},{key:"y",value:function(e){return this.props.logY?this.logScale(e.y):e.y}},{key:"size",value:function(e,t){return t||this.props.highlight&&this.props.highlight(e)?6:3}},{key:"tickFormat",value:function(e,t,n){var r=this;return n&&!this.props.useLogSpaceTicks&&(e=this.invLogScale(e),t=t.map(function(e){return r.invLogScale(e)})),(0,x.tickFormat)(e,t)}},{key:"tickFormatX",value:function(e,t,n){return this.tickFormat(e,n,!!this.props.logX)}},{key:"tickFormatY",value:function(e,t,n){return this.tickFormat(e,n,!!this.props.logY)}},{key:"render",value:function(){return this.props.data.length?c.createElement("div",null,c.createElement("div",{ref:this.containerRef,style:{width:this.svgWidth,height:this.svgHeight}},c.createElement("svg",{ref:this.svgRef,style:{width:this.svgWidth,height:this.svgHeight,pointerEvents:"all"},height:this.svgHeight,width:this.svgWidth,role:"img",viewBox:"0 0 "+this.svgWidth+" "+this.svgHeight},c.createElement("g",{transform:"translate(25,0)"},c.createElement(g.VictoryChart,{theme:y.default,width:this.props.chartWidth,height:this.props.chartHeight,standalone:!1,domainPadding:10},this.title,this.legend,this.correlationInfo,c.createElement(g.VictoryAxis,{domain:this.plotDomain.x,orientation:"bottom",offsetY:50,crossAxis:!1,tickCount:8,tickFormat:this.tickFormatX,axisLabelComponent:c.createElement(g.VictoryLabel,{dy:25}),label:this.props.axisLabelX}),c.createElement(g.VictoryAxis,{domain:this.plotDomain.y,offsetX:50,orientation:"left",crossAxis:!1,tickCount:8,tickFormat:this.tickFormatY,dependentAxis:!0,axisLabelComponent:c.createElement(g.VictoryLabel,{dy:-50}),label:this.props.axisLabelY}),c.createElement(g.VictoryScatter,{style:{data:{fill:(0,C.default)(this.props.fill,"0x000000"),stroke:(0,C.default)(this.props.stroke,"0x000000"),strokeWidth:(0,C.default)(this.props.strokeWidth,0),fillOpacity:(0,C.default)(this.props.fillOpacity,1)}},size:this.size,symbol:this.props.symbol||"circle",data:this.props.data,events:this.mouseEvents,x:this.x,y:this.y}))))),this.container&&this.tooltipModel&&this.props.tooltip&&c.createElement(w.default,{container:this.container,targetHovered:this.pointHovered,targetCoords:{x:this.tooltipModel.x+25,y:this.tooltipModel.y},overlay:this.props.tooltip(this.tooltipModel.datum)})):c.createElement("span",null,"No data to plot.")}},{key:"fontFamily",get:function(){return this.props.fontFamily||"Verdana,Arial,sans-serif"}},{key:"title",get:function(){return this.props.title?c.createElement(g.VictoryLabel,{style:{fontWeight:"bold",fontFamily:this.fontFamily,textAnchor:"middle"},x:this.svgWidth/2,y:"1.2em",text:this.props.title}):null}},{key:"legendX",get:function(){return this.props.chartWidth-20}},{key:"legend",get:function(){var e=this.legendX;return this.props.legendData&&this.props.legendData.length?c.createElement(g.VictoryLegend,{orientation:"vertical",data:this.props.legendData,x:e,y:160,width:120}):null}},{key:"correlationInfo",get:function(){var e=this.legendX;return c.createElement("g",null,c.createElement("text",{x:e+107,y:100,fontFamily:this.fontFamily,textAnchor:"end"},"Pearson: "+(this.props.correlation?this.props.correlation.pearson:this.pearsonCorr).toFixed(2)),c.createElement("text",{x:e+107,y:100,fontFamily:this.fontFamily,textAnchor:"end",dy:"1.2em"},"Spearman: "+(this.props.correlation?this.props.correlation.spearman:this.spearmanCorr).toFixed(2)))}},{key:"splitData",get:function(){var e=[],t=[],n=!0,r=!1,o=void 0;try{for(var a,i=this.props.data[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var s=a.value;e.push(s.x),t.push(s.y)}}catch(e){r=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw o}}return{x:e,y:t}}},{key:"plotDomain",get:function(){var e={x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY},t={x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},n=!0,r=!1,o=void 0;try{for(var a,i=this.props.data[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var s=a.value;e.x=Math.max(s.x,e.x),e.y=Math.max(s.y,e.y),t.x=Math.min(s.x,t.x),t.y=Math.min(s.y,t.y)}}catch(e){r=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw o}}return this.props.logX&&(t.x=this.logScale(t.x),e.x=this.logScale(e.x)),this.props.logY&&(t.y=this.logScale(t.y),e.y=this.logScale(e.y)),{x:[t.x,e.x],y:[t.y,e.y]}}},{key:"pearsonCorr",get:function(){return b.default.corrcoeff(this.splitData.x,this.splitData.y)}},{key:"spearmanCorr",get:function(){return b.default.spearmancoeff(this.splitData.x,this.splitData.y)}},{key:"svgWidth",get:function(){return 25+this.props.chartWidth+120}},{key:"svgHeight",get:function(){return this.props.chartHeight}}]),t}(c.Component);k([h.observable],E.prototype,"tooltipModel",void 0),k([h.observable],E.prototype,"pointHovered",void 0),k([h.observable.ref],E.prototype,"container",void 0),k([f.default],E.prototype,"containerRef",null),k([f.default],E.prototype,"svgRef",null),k([h.computed],E.prototype,"fontFamily",null),k([h.computed],E.prototype,"legendX",null),k([h.computed],E.prototype,"splitData",null),k([h.computed],E.prototype,"plotDomain",null),k([h.computed],E.prototype,"pearsonCorr",null),k([h.computed],E.prototype,"spearmanCorr",null),k([h.computed],E.prototype,"svgWidth",null),k([h.computed],E.prototype,"svgHeight",null),k([f.default],E.prototype,"x",null),k([f.default],E.prototype,"y",null),k([f.default],E.prototype,"size",null),k([f.default],E.prototype,"tickFormatX",null),k([f.default],E.prototype,"tickFormatY",null),E=k([d.observer],E),t.default=E},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=n(33),u=n(1),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),d=n(13),p=n(63),f=n(886),h=function(e){return e&&e.__esModule?e:{default:e}}(f),m=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":s(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},y=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.isHovered=!1,e}return a(t,e),i(t,[{key:"onMouseEnter",value:function(){this.isHovered=!0}},{key:"onMouseLeave",value:function(){this.isHovered=!1}},{key:"render",value:function(){return this.props.targetHovered||this.isHovered?c.createElement(p.Popover,{className:this.props.className,positionLeft:this.props.targetCoords.x+this.props.container.offsetLeft+5,positionTop:this.props.targetCoords.y+this.props.container.offsetTop-30,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,arrowOffsetTop:30},this.props.overlay):null}}]),t}(c.Component);m([d.observable],y.prototype,"isHovered",void 0),m([h.default],y.prototype,"onMouseEnter",null),m([h.default],y.prototype,"onMouseLeave",null),y=m([l.observer],y),t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){for(var t="",n=0;n<e;n++)t+="0";return t}function a(e,t){for(var n=0,r="";n<3;){r=t(n);if(p.default.uniq(e.map(function(e){return(0,c.default)(e).format(r)})).length===e.length)break;n++}return r}function i(e){return e=e.filter(function(e){return Math.abs(e)>=1e3}),a(e,function(e){return"0.["+o(e)+"]a"})}function s(e){return e=e.filter(function(e){return Math.abs(e)<1e3}),a(e,function(e){return"0.["+o(e)+"]"})}function l(e,t){return e>=1e3?(0,c.default)(e).format(i(t)):(0,c.default)(e).format(s(t))}Object.defineProperty(t,"__esModule",{value:!0}),t.VictoryAxisStyle=void 0,t.getUniqueFormatThousands=i,t.getUniqueFormatLessThanThousands=s,t.tickFormat=l;var u=n(1235),c=r(u),d=n(3),p=r(d);t.VictoryAxisStyle={ticks:{size:4,stroke:"black"},tickLabels:{padding:2,fill:"black"},grid:{opacity:0},axis:{stroke:"black",strokeWidth:1}}},function(e,t,n){var r,o;!function(a,i){r=i,void 0!==(o="function"==typeof r?r.call(t,n,t,e):r)&&(e.exports=o)}(0,function(){function e(e,t){this._input=e,this._value=t}var t,n,r={},o={},a={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0},i={currentLocale:a.currentLocale,zeroFormat:a.zeroFormat,nullFormat:a.nullFormat,defaultFormat:a.defaultFormat,scalePercentBy100:a.scalePercentBy100};return t=function(o){var a,s,l,u;if(t.isNumeral(o))a=o.value();else if(0===o||void 0===o)a=0;else if(null===o||n.isNaN(o))a=null;else if("string"==typeof o)if(i.zeroFormat&&o===i.zeroFormat)a=0;else if(i.nullFormat&&o===i.nullFormat||!o.replace(/[^0-9]+/g,"").length)a=null;else{for(s in r)if((u="function"==typeof r[s].regexps.unformat?r[s].regexps.unformat():r[s].regexps.unformat)&&o.match(u)){l=r[s].unformat;break}l=l||t._.stringToNumber,a=l(o)}else a=Number(o)||null;return new e(o,a)},t.version="2.0.6",t.isNumeral=function(t){return t instanceof e},t._=n={numberToFormat:function(e,n,r){var a,i,s,l,u,c,d,p=o[t.options.currentLocale],f=!1,h=!1,m=0,y="",g="",v=!1;if(e=e||0,i=Math.abs(e),t._.includes(n,"(")?(f=!0,n=n.replace(/[\(|\)]/g,"")):(t._.includes(n,"+")||t._.includes(n,"-"))&&(u=t._.includes(n,"+")?n.indexOf("+"):e<0?n.indexOf("-"):-1,n=n.replace(/[\+|\-]/g,"")),t._.includes(n,"a")&&(a=n.match(/a(k|m|b|t)?/),a=!!a&&a[1],t._.includes(n," a")&&(y=" "),n=n.replace(new RegExp(y+"a[kmbt]?"),""),i>=1e12&&!a||"t"===a?(y+=p.abbreviations.trillion,e/=1e12):i<1e12&&i>=1e9&&!a||"b"===a?(y+=p.abbreviations.billion,e/=1e9):i<1e9&&i>=1e6&&!a||"m"===a?(y+=p.abbreviations.million,e/=1e6):(i<1e6&&i>=1e3&&!a||"k"===a)&&(y+=p.abbreviations.thousand,e/=1e3)),t._.includes(n,"[.]")&&(h=!0,n=n.replace("[.]",".")),s=e.toString().split(".")[0],l=n.split(".")[1],c=n.indexOf(","),m=(n.split(".")[0].split(",")[0].match(/0/g)||[]).length,l?(t._.includes(l,"[")?(l=l.replace("]",""),l=l.split("["),g=t._.toFixed(e,l[0].length+l[1].length,r,l[1].length)):g=t._.toFixed(e,l.length,r),s=g.split(".")[0],g=t._.includes(g,".")?p.delimiters.decimal+g.split(".")[1]:"",h&&0===Number(g.slice(1))&&(g="")):s=t._.toFixed(e,0,r),y&&!a&&Number(s)>=1e3&&y!==p.abbreviations.trillion)switch(s=String(Number(s)/1e3),y){case p.abbreviations.thousand:y=p.abbreviations.million;break;case p.abbreviations.million:y=p.abbreviations.billion;break;case p.abbreviations.billion:y=p.abbreviations.trillion}if(t._.includes(s,"-")&&(s=s.slice(1),v=!0),s.length<m)for(var b=m-s.length;b>0;b--)s="0"+s;return c>-1&&(s=s.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+p.delimiters.thousands)),0===n.indexOf(".")&&(s=""),d=s+g+(y||""),f?d=(f&&v?"(":"")+d+(f&&v?")":""):u>=0?d=0===u?(v?"-":"+")+d:d+(v?"-":"+"):v&&(d="-"+d),d},stringToNumber:function(e){var t,n,r,a=o[i.currentLocale],s=e,l={thousand:3,million:6,billion:9,trillion:12};if(i.zeroFormat&&e===i.zeroFormat)n=0;else if(i.nullFormat&&e===i.nullFormat||!e.replace(/[^0-9]+/g,"").length)n=null;else{n=1,"."!==a.delimiters.decimal&&(e=e.replace(/\./g,"").replace(a.delimiters.decimal,"."));for(t in l)if(r=new RegExp("[^a-zA-Z]"+a.abbreviations[t]+"(?:\\)|(\\"+a.currency.symbol+")?(?:\\))?)?$"),s.match(r)){n*=Math.pow(10,l[t]);break}n*=(e.split("-").length+Math.min(e.split("(").length-1,e.split(")").length-1))%2?1:-1,e=e.replace(/[^0-9\.]+/g,""),n*=Number(e)}return n},isNaN:function(e){return"number"==typeof e&&isNaN(e)},includes:function(e,t){return-1!==e.indexOf(t)},insert:function(e,t,n){return e.slice(0,n)+t+e.slice(n)},reduce:function(e,t){if(null===this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof t)throw new TypeError(t+" is not a function");var n,r=Object(e),o=r.length>>>0,a=0;if(3===arguments.length)n=arguments[2];else{for(;a<o&&!(a in r);)a++;if(a>=o)throw new TypeError("Reduce of empty array with no initial value");n=r[a++]}for(;a<o;a++)a in r&&(n=t(n,r[a],a,r));return n},multiplier:function(e){var t=e.toString().split(".");return t.length<2?1:Math.pow(10,t[1].length)},correctionFactor:function(){return Array.prototype.slice.call(arguments).reduce(function(e,t){var r=n.multiplier(t);return e>r?e:r},1)},toFixed:function(e,t,n,r){var o,a,i,s,l=e.toString().split("."),u=t-(r||0);return o=2===l.length?Math.min(Math.max(l[1].length,u),t):u,i=Math.pow(10,o),s=(n(e+"e+"+o)/i).toFixed(o),r>t-o&&(a=new RegExp("\\.?0{1,"+(r-(t-o))+"}$"),s=s.replace(a,"")),s}},t.options=i,t.formats=r,t.locales=o,t.locale=function(e){return e&&(i.currentLocale=e.toLowerCase()),i.currentLocale},t.localeData=function(e){if(!e)return o[i.currentLocale];if(e=e.toLowerCase(),!o[e])throw new Error("Unknown locale : "+e);return o[e]},t.reset=function(){for(var e in a)i[e]=a[e]},t.zeroFormat=function(e){i.zeroFormat="string"==typeof e?e:null},t.nullFormat=function(e){i.nullFormat="string"==typeof e?e:null},t.defaultFormat=function(e){i.defaultFormat="string"==typeof e?e:"0.0"},t.register=function(e,t,n){if(t=t.toLowerCase(),this[e+"s"][t])throw new TypeError(t+" "+e+" already registered.");return this[e+"s"][t]=n,n},t.validate=function(e,n){var r,o,a,i,s,l,u,c;if("string"!=typeof e&&(e+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",e)),e=e.trim(),e.match(/^\d+$/))return!0;if(""===e)return!1;try{u=t.localeData(n)}catch(e){u=t.localeData(t.locale())}return a=u.currency.symbol,s=u.abbreviations,r=u.delimiters.decimal,o="."===u.delimiters.thousands?"\\.":u.delimiters.thousands,(null===(c=e.match(/^[^\d]+/))||(e=e.substr(1),c[0]===a))&&((null===(c=e.match(/[^\d]+$/))||(e=e.slice(0,-1),c[0]===s.thousand||c[0]===s.million||c[0]===s.billion||c[0]===s.trillion))&&(l=new RegExp(o+"{2}"),!e.match(/[^\d.,]/g)&&(i=e.split(r),!(i.length>2)&&(i.length<2?!!i[0].match(/^\d+.*\d$/)&&!i[0].match(l):1===i[0].length?!!i[0].match(/^\d+$/)&&!i[0].match(l)&&!!i[1].match(/^\d+$/):!!i[0].match(/^\d+.*\d$/)&&!i[0].match(l)&&!!i[1].match(/^\d+$/)))))},t.fn=e.prototype={clone:function(){return t(this)},format:function(e,n){var o,a,s,l=this._value,u=e||i.defaultFormat;if(n=n||Math.round,0===l&&null!==i.zeroFormat)a=i.zeroFormat;else if(null===l&&null!==i.nullFormat)a=i.nullFormat;else{for(o in r)if(u.match(r[o].regexps.format)){s=r[o].format;break}s=s||t._.numberToFormat,a=s(l,u,n)}return a},value:function(){return this._value},input:function(){return this._input},set:function(e){return this._value=Number(e),this},add:function(e){function t(e,t,n,o){return e+Math.round(r*t)}var r=n.correctionFactor.call(null,this._value,e);return this._value=n.reduce([this._value,e],t,0)/r,this},subtract:function(e){function t(e,t,n,o){return e-Math.round(r*t)}var r=n.correctionFactor.call(null,this._value,e);return this._value=n.reduce([e],t,Math.round(this._value*r))/r,this},multiply:function(e){function t(e,t,r,o){var a=n.correctionFactor(e,t);return Math.round(e*a)*Math.round(t*a)/Math.round(a*a)}return this._value=n.reduce([this._value,e],t,1),this},divide:function(e){function t(e,t,r,o){var a=n.correctionFactor(e,t);return Math.round(e*a)/Math.round(t*a)}return this._value=n.reduce([this._value,e],t),this},difference:function(e){return Math.abs(t(this._value).subtract(e).value())}},t.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){var t=e%10;return 1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th"},currency:{symbol:"$"}}),function(){t.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(e,n,r){var o,a=t._.includes(n," BPS")?" ":"";return e*=1e4,n=n.replace(/\s?BPS/,""),o=t._.numberToFormat(e,n,r),t._.includes(o,")")?(o=o.split(""),o.splice(-1,0,a+"BPS"),o=o.join("")):o=o+a+"BPS",o},unformat:function(e){return+(1e-4*t._.stringToNumber(e)).toFixed(15)}})}(),function(){var e={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]},n={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},r=e.suffixes.concat(n.suffixes.filter(function(t){return e.suffixes.indexOf(t)<0})),o=r.join("|");o="("+o.replace("B","B(?!PS)")+")",t.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(o)},format:function(r,o,a){var i,s,l,u=t._.includes(o,"ib")?n:e,c=t._.includes(o," b")||t._.includes(o," ib")?" ":"";for(o=o.replace(/\s?i?b/,""),i=0;i<=u.suffixes.length;i++)if(s=Math.pow(u.base,i),l=Math.pow(u.base,i+1),null===r||0===r||r>=s&&r<l){c+=u.suffixes[i],s>0&&(r/=s);break}return t._.numberToFormat(r,o,a)+c},unformat:function(r){var o,a,i=t._.stringToNumber(r);if(i){for(o=e.suffixes.length-1;o>=0;o--){if(t._.includes(r,e.suffixes[o])){a=Math.pow(e.base,o);break}if(t._.includes(r,n.suffixes[o])){a=Math.pow(n.base,o);break}}i*=a||1}return i}})}(),function(){t.register("format","currency",{regexps:{format:/(\$)/},format:function(e,n,r){var o,a,i=t.locales[t.options.currentLocale],s={before:n.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:n.match(/([\+|\-|\)|\s|\$]*)$/)[0]};for(n=n.replace(/\s?\$\s?/,""),o=t._.numberToFormat(e,n,r),e>=0?(s.before=s.before.replace(/[\-\(]/,""),s.after=s.after.replace(/[\-\)]/,"")):e<0&&!t._.includes(s.before,"-")&&!t._.includes(s.before,"(")&&(s.before="-"+s.before),a=0;a<s.before.length;a++)switch(s.before[a]){case"$":o=t._.insert(o,i.currency.symbol,a);break;case" ":o=t._.insert(o," ",a+i.currency.symbol.length-1)}for(a=s.after.length-1;a>=0;a--)switch(s.after[a]){case"$":o=a===s.after.length-1?o+i.currency.symbol:t._.insert(o,i.currency.symbol,-(s.after.length-(1+a)));break;case" ":o=a===s.after.length-1?o+" ":t._.insert(o," ",-(s.after.length-(1+a)+i.currency.symbol.length-1))}return o}})}(),function(){t.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(e,n,r){var o="number"!=typeof e||t._.isNaN(e)?"0e+0":e.toExponential(),a=o.split("e");return n=n.replace(/e[\+|\-]{1}0/,""),t._.numberToFormat(Number(a[0]),n,r)+"e"+a[1]},unformat:function(e){function n(e,n,r,o){var a=t._.correctionFactor(e,n);return e*a*(n*a)/(a*a)}var r=t._.includes(e,"e+")?e.split("e+"):e.split("e-"),o=Number(r[0]),a=Number(r[1]);return a=t._.includes(e,"e-")?a*=-1:a,t._.reduce([o,Math.pow(10,a)],n,1)}})}(),function(){t.register("format","ordinal",{regexps:{format:/(o)/},format:function(e,n,r){var o=t.locales[t.options.currentLocale],a=t._.includes(n," o")?" ":"";return n=n.replace(/\s?o/,""),a+=o.ordinal(e),t._.numberToFormat(e,n,r)+a}})}(),function(){t.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(e,n,r){var o,a=t._.includes(n," %")?" ":"";return t.options.scalePercentBy100&&(e*=100),n=n.replace(/\s?\%/,""),o=t._.numberToFormat(e,n,r),t._.includes(o,")")?(o=o.split(""),o.splice(-1,0,a+"%"),o=o.join("")):o=o+a+"%",o},unformat:function(e){var n=t._.stringToNumber(e);return t.options.scalePercentBy100?.01*n:n}})}(),function(){t.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(e,t,n){var r=Math.floor(e/60/60),o=Math.floor((e-60*r*60)/60),a=Math.round(e-60*r*60-60*o);return r+":"+(o<10?"0"+o:o)+":"+(a<10?"0"+a:a)},unformat:function(e){var t=e.split(":"),n=0;return 3===t.length?(n+=60*Number(t[0])*60,n+=60*Number(t[1]),n+=Number(t[2])):2===t.length&&(n+=60*Number(t[0]),n+=Number(t[1])),Number(n)}})}(),t})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return d.createElement("button",{key:e.key,className:"btn btn-default btn-xs",onClick:e.onClick,disabled:e.disabled},e.content)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=n(1),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(c),p=n(889),f=r(p),h=n(886),m=n(905),y=r(m),g=n(1080),v=r(g),b=n(33),_=n(13),w=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},x=function(e){function t(){o(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.svgsaver=new f.default,e}return i(t,e),l(t,[{key:"downloadSvg",value:function(){if(this.props.getSvg){var e=this.props.getSvg();e&&this.svgsaver.asSvg(e,this.props.filename+".svg")}}},{key:"downloadPng",value:function(){if(this.props.getSvg){var e=this.props.getSvg();e&&this.svgsaver.asPng(e,this.props.filename+".png")}}},{key:"downloadPdf",value:function(){if(this.props.getSvg){var e=this.props.getSvg();e&&(0,y.default)(this.props.filename+".pdf",e)}}},{key:"render",value:function(){var e=d.createElement("div",{role:"group",className:"btn-group cancer-summary--chart-buttons",style:this.props.style||{}},this.props.additionalLeftButtons&&this.props.additionalLeftButtons.map(s),this.buttons,this.props.additionalRightButtons&&this.props.additionalRightButtons.map(s));return this.props.dontFade?e:d.createElement(v.default,null,e)}},{key:"downloadControlsButtons",get:function(){return{SVG:{key:"SVG",content:d.createElement("span",null,"SVG ",d.createElement("i",{className:"fa fa-cloud-download","aria-hidden":"true"})),onClick:this.downloadSvg,disabled:!this.props.getSvg},PNG:{key:"PNG",content:d.createElement("span",null,"PNG ",d.createElement("i",{className:"fa fa-cloud-download","aria-hidden":"true"})),onClick:this.downloadPng,disabled:!this.props.getSvg},PDF:{key:"PDF",content:d.createElement("span",null,"PDF ",d.createElement("i",{className:"fa fa-cloud-download","aria-hidden":"true"})),onClick:this.downloadPdf,disabled:!this.props.getSvg}}}},{key:"buttons",get:function(){var e=this;return(this.props.buttons||["SVG","PNG","PDF"]).map(function(t){return s(e.downloadControlsButtons[t])})}}]),t}(d.Component);w([h.bind],x.prototype,"downloadSvg",null),w([h.bind],x.prototype,"downloadPng",null),w([h.bind],x.prototype,"downloadPdf",null),w([_.computed],x.prototype,"downloadControlsButtons",null),w([_.computed],x.prototype,"buttons",null),x=w([b.observer],x),t.default=x},function(e,t,n){"use strict";function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;if(!t.length)return 0;for(var r=0;i.default.countBy(t,function(e){return e.toFixed(r)})[e.toFixed(r)]>1&&!(++r>=n););return r}function o(e,t){return e.hugoGeneSymbol+" "+(t?"(log10) ":"")+"(Cytoband: "+e.cytoband+")"}Object.defineProperty(t,"__esModule",{value:!0}),t.getUniquePrecision=r,t.axisLabel=o;var a=n(3),i=function(e){return e&&e.__esModule?e:{default:e}}(a)},function(e,t,n){"use strict";function r(e){return"There are no genes with a Pearson or Spearman correlation with "+e+" of"+l+">"+l+"0.3"+l+"or"+l+"<"+l+"-0.3."}function o(e){return e.map(function(e){return e.proteinChange}).filter(function(e){return!!e}).join(", ")}function a(e,t,n,r,o){var a=o[t];return!!a&&(0,s.isSampleProfiled)(e,a.molecularProfileId,n,r)}function i(e,t,n,r,i,s,l){var u={},c={},d={},p={},f={},h=function(e){f[e.uniqueSampleKey]||(f[e.uniqueSampleKey]=e)},m=!0,y=!1,g=void 0;try{for(var v,b=t[Symbol.iterator]();!(m=(v=b.next()).done);m=!0){var _=v.value;if(_.proteinChange){var w=_.entrezGeneId===n?d:p;w[_.uniqueSampleKey]=w[_.uniqueSampleKey]||[],w[_.uniqueSampleKey].push(_),h(_)}}}catch(e){y=!0,g=e}finally{try{!m&&b.return&&b.return()}finally{if(y)throw g}}var x=!0,S=!1,C=void 0;try{for(var k,E=e[Symbol.iterator]();!(x=(k=E.next()).done);x=!0){var M=k.value;(M.entrezGeneId===n?u:c)[M.uniqueSampleKey]=M,h(M)}}catch(e){S=!0,C=e}finally{try{!x&&E.return&&E.return()}finally{if(S)throw C}}var A=[],T=!0,O=!1,P=void 0;try{for(var j,I=Object.keys(u)[Symbol.iterator]();!(T=(j=I.next()).done);T=!0){var D=j.value,N=f[D].studyId,R=u[D],L=c[D];if(R&&L){var F=R.value,z=L.value;isNaN(F)||isNaN(z)||A.push({x:F,y:z,mutationsX:o(d[D]||[]),mutationsY:o(p[D]||[]),profiledX:a(D,N,r,s,l),profiledY:a(D,N,i,s,l),studyId:N,sampleId:f[D].sampleId})}}}catch(e){O=!0,P=e}finally{try{!T&&I.return&&I.return()}finally{if(O)throw P}}return A}Object.defineProperty(t,"__esModule",{value:!0}),t.requestAllDataMessage=r,t.computePlotData=i;var s=n(309),l=" "},function(e,t,n){"use strict";function r(e,t){if("undefined"!==o(window[e]))throw new Error("Attempted to set existing window variable '"+e+"'.. SHAME ON YOU");window[e]=t}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(1),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),d=n(33),p=n(873),f=n(13),h=n(1241),m=r(h),y=n(1254),g=r(y),v=n(1255),b=r(v),_=n(1258),w=r(_),x=n(854),S=r(x),C=n(865),k=r(C),E=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},M=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"handleTabChange",value:function(e){this.currentTabId=e}},{key:"render",value:function(){return this.props.store.alteredSampleKeys.isPending||this.props.store.unalteredSampleKeys.isPending?c.createElement(S.default,{isLoading:!0}):0===this.props.store.alteredSampleKeys.result.length||0===this.props.store.unalteredSampleKeys.result.length?c.createElement("div",null,"No alteration in selected samples, therefore could not perform this calculation."):this.props.store.mutationEnrichmentProfiles.isPending||this.props.store.copyNumberEnrichmentProfiles.isPending||this.props.store.mRNAEnrichmentProfiles.isPending||this.props.store.proteinEnrichmentProfiles.isPending?c.createElement(S.default,{isLoading:!0}):c.createElement(p.MSKTabs,{activeTabId:this.currentTabId,onTabClick:this.handleTabChange,className:"secondaryTabs"},this.props.store.mutationEnrichmentProfiles.result.length>0&&c.createElement(p.MSKTab,{id:"mutations",linkText:"Mutations"},c.createElement(m.default,{store:this.props.store})),this.props.store.copyNumberEnrichmentProfiles.result.length>0&&c.createElement(p.MSKTab,{id:"copynumber",linkText:"Copy-number"},c.createElement(g.default,{store:this.props.store})),this.props.store.mRNAEnrichmentProfiles.result.length>0&&c.createElement(p.MSKTab,{id:"mrna",linkText:"mRNA"},c.createElement(b.default,{store:this.props.store})),this.props.store.proteinEnrichmentProfiles.result.length>0&&c.createElement(p.MSKTab,{id:"protein",linkText:"Protein"},c.createElement(w.default,{store:this.props.store})))}}]),t}(c.Component);E([f.observable],M.prototype,"currentTabId",void 0),E([k.default],M.prototype,"handleTabChange",null),M=E([d.observer],M),t.default=M},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(1),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),d=n(33),p=n(1083),f=r(p),h=n(854),m=r(h),y=n(936),g=r(y),v=n(865),b=r(v),_=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},w=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"onProfileChange",value:function(e){this.props.store.selectedEnrichmentMutationProfile=e}},{key:"render",value:function(){return this.props.store.mutationEnrichmentData.isPending?c.createElement(m.default,{isLoading:!0,style:{display:"inline-block",marginLeft:10,marginTop:20}}):c.createElement("div",{"data-test":"MutationEnrichmentsTab"},c.createElement(g.default,{dataSets:this.props.store.mutationEnrichmentProfiles.result,onChange:this.onProfileChange,selectedValue:this.props.store.selectedEnrichmentMutationProfile.molecularProfileId,molecularProfileIdToProfiledSampleCount:this.props.store.molecularProfileIdToProfiledSampleCount.result}),c.createElement(f.default,{data:this.props.store.mutationEnrichmentData.result,totalAlteredCount:this.props.store.alteredSampleKeys.result.length,totalUnalteredCount:this.props.store.unalteredSampleKeys.result.length,headerName:this.props.store.selectedEnrichmentMutationProfile.name,store:this.props.store,alterationType:"a mutation"}))}}]),t}(c.Component);_([b.default],w.prototype,"onProfileChange",null),w=_([d.observer],w),t.default=w},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.AlterationEnrichmentTableComponent=t.AlterationEnrichmentTableColumnType=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=n(1),d=o(c),p=n(3),f=o(p),h=n(178),m=r(h),y=n(33),g=n(13),v=n(63),b=n(887),_=n(877),w=n(890),x=r(w),S=n(1055),C=n(865),k=r(C),E=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},M=t.AlterationEnrichmentTableColumnType=void 0;!function(e){e[e.GENE=0]="GENE",e[e.CYTOBAND=1]="CYTOBAND",e[e.PERCENTAGE_IN_ALTERED=2]="PERCENTAGE_IN_ALTERED",e[e.PERCENTAGE_IN_UNALTERED=3]="PERCENTAGE_IN_UNALTERED",e[e.LOG_RATIO=4]="LOG_RATIO",e[e.P_VALUE=5]="P_VALUE",e[e.Q_VALUE=6]="Q_VALUE",e[e.TENDENCY=7]="TENDENCY"}(M||(t.AlterationEnrichmentTableColumnType=M={}));var A=t.AlterationEnrichmentTableComponent=function(e){function t(){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),t}(m.default),T=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._columns=n.generateColumns(),n}return s(t,e),l(t,[{key:"checkboxChange",value:function(e){var t=f.find(this.props.data,{hugoGeneSymbol:e});t.checked=!t.checked,this._columns=this.generateColumns(),this.props.onCheckGene(e)}},{key:"onRowClick",value:function(e){this.props.onGeneNameClick(e.hugoGeneSymbol),this.props.dataStore.setHighlighted(e)}},{key:"generateColumns",value:function(){var e=this,t={};return t[M.GENE]={name:"Gene",render:function(t){return d.createElement("div",{style:{display:"flex"}},d.createElement(v.Checkbox,{checked:t.checked,disabled:t.disabled,key:t.hugoGeneSymbol,className:x.default.Checkbox,onChange:function(){return e.checkboxChange(t.hugoGeneSymbol)},title:t.disabled?"This is one of the query genes":""}),d.createElement("span",{className:x.default.GeneName},d.createElement("b",null,t.hugoGeneSymbol)))},tooltip:d.createElement("span",null,"Gene"),filter:function(e,t,n){return e.hugoGeneSymbol.toUpperCase().includes(n)},sortBy:function(e){return e.hugoGeneSymbol},download:function(e){return e.hugoGeneSymbol}},t[M.CYTOBAND]={name:"Cytoband",render:function(e){return d.createElement("span",null,e.cytoband)},tooltip:d.createElement("span",null,"Cytoband"),filter:S.cytobandFilter,sortBy:function(e){return e.cytoband},download:function(e){return e.cytoband}},t[M.PERCENTAGE_IN_ALTERED]={name:"Samples with alteration in altered group",render:function(e){return d.createElement("span",null,(0,b.formatPercentage)(e.alteredCount,e.alteredPercentage))},headerRender:function(e){return d.createElement("span",{style:{display:"inline-block",width:100}},e)},tooltip:d.createElement("span",null,"Number (percentage) of samples that have alterations in the query gene(s) that also have ",this.props.alterationType," in the listed gene."),sortBy:function(e){return e.alteredCount},download:function(e){return(0,b.formatPercentage)(e.alteredCount,e.alteredPercentage)}},t[M.PERCENTAGE_IN_UNALTERED]={name:"Samples with alteration in unaltered group",render:function(e){return d.createElement("span",null,(0,b.formatPercentage)(e.unalteredCount,e.unalteredPercentage))},headerRender:function(e){return d.createElement("span",{style:{display:"inline-block",width:100}},e)},tooltip:d.createElement("span",null,"Number (percentage) of samples that do not have alterations in the query gene(s) that have ",this.props.alterationType," in the listed gene."),sortBy:function(e){return e.unalteredCount},download:function(e){return(0,b.formatPercentage)(e.unalteredCount,e.unalteredPercentage)}},t[M.LOG_RATIO]={name:"Log Ratio",render:function(e){return d.createElement("span",null,(0,b.formatLogOddsRatio)(e.logRatio))},tooltip:d.createElement("span",null,"Log2 based ratio of (pct in altered / pct in unaltered)"),sortBy:function(e){return Number(e.logRatio)},download:function(e){return(0,b.formatLogOddsRatio)(e.logRatio)}},t[M.P_VALUE]={name:"p-Value",render:function(e){return d.createElement("span",{style:{whiteSpace:"nowrap"}},(0,_.toConditionalPrecision)(e.pValue,3,.01))},tooltip:d.createElement("span",null,"Derived from Fisher Exact Test"),sortBy:function(e){return e.pValue},download:function(e){return(0,_.toConditionalPrecision)(e.pValue,3,.01)}},t[M.Q_VALUE]={name:"q-Value",render:function(e){return d.createElement("span",{style:{whiteSpace:"nowrap"}},(0,b.formatValueWithStyle)(e.qValue))},tooltip:d.createElement("span",null,"Derived from Benjamini-Hochberg procedure"),sortBy:function(e){return e.qValue},download:function(e){return(0,_.toConditionalPrecision)(e.qValue,3,.01)}},t[M.TENDENCY]={name:"Tendency",render:function(e){return d.createElement("div",{className:x.default.Tendency},(0,b.calculateAlterationTendency)(Number(e.logRatio)),e.qValue<.05?d.createElement(v.Badge,{style:{backgroundColor:"#58ACFA",fontSize:8,marginBottom:2}},"Significant"):"")},tooltip:d.createElement("table",null,d.createElement("tr",null,d.createElement("td",null,"Log ratio > 0"),d.createElement("td",null,": Enriched in altered group")),d.createElement("tr",null,d.createElement("td",null,"Log ratio <= 0"),d.createElement("td",null,": Enriched in unaltered group")),d.createElement("tr",null,d.createElement("td",null,"q-Value < 0.05"),d.createElement("td",null,": Significant association"))),filter:function(e,t,n){return(0,b.calculateAlterationTendency)(Number(e.logRatio)).toUpperCase().includes(n)},sortBy:function(e){return(0,b.calculateAlterationTendency)(Number(e.logRatio))},download:function(e){return(0,b.calculateAlterationTendency)(Number(e.logRatio))}},t}},{key:"render",value:function(){var e=f.sortBy(this._columns,function(e){return e.order});return d.createElement(A,{initialItemsPerPage:20,paginationProps:{itemsPerPageOptions:[20]},columns:e,data:this.props.data,initialSortColumn:this.props.initialSortColumn,onRowClick:this.onRowClick,dataStore:this.props.dataStore})}}]),t}(d.Component);T.defaultProps={columns:[M.GENE,M.CYTOBAND,M.PERCENTAGE_IN_ALTERED,M.PERCENTAGE_IN_UNALTERED,M.LOG_RATIO,M.P_VALUE,M.Q_VALUE,M.TENDENCY],initialSortColumn:"q-Value"},E([g.observable],T.prototype,"_columns",void 0),E([k.default],T.prototype,"onRowClick",null),T=E([y.observer],T),t.default=T},function(e,t,n){"use strict";function r(e,t,n,r,o){return e.reduce(function(e,a){return a>=t&&(a<n?e.upper.suspectedOutliers.push(a):e.upper.outliers.push(a)),a<=r&&(a>o?e.lower.suspectedOutliers.push(a):e.lower.outliers.push(a)),e},{upper:{outliers:[],suspectedOutliers:[]},lower:{outliers:[],suspectedOutliers:[]}})}function o(e){var t=l.sortBy(e,[function(e){return e}]),n=i.default.quartiles(t),o=i.default.median(t),a=n[0],s=n[1],d=n[2],p=d-a,f=t[t.length-1],h=t[0],m=a-c*p,y=d+c*p,g=a-u*p,v=d+u*p,b=r(t,v,y,g,m),_=b.lower.suspectedOutliers.length>0||b.lower.outliers.length>0?g:t[0];return{q1:a,q2:s,q3:d,IQR:p,median:o,whiskerUpper:b.upper.suspectedOutliers.length>0||b.upper.outliers.length>0?v:t[t.length-1],whiskerLower:_,max:f,min:h,outliersUpper:b.upper,outliersLower:b.lower}}Object.defineProperty(t,"__esModule",{value:!0}),t.calculateBoxPlotModel=o;var a=n(906),i=function(e){return e&&e.__esModule?e:{default:e}}(a),s=n(3),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(s),u=1.5,c=3},function(e,t,n){var r=n(1245),o=n(1246),a=n(1247),i=n(1248),s=n(1249),l=n(1250),u=n(1251);u.alea=r,u.xor128=o,u.xorwow=a,u.xorshift7=i,u.xor4096=s,u.tychei=l,e.exports=u},function(e,t,n){(function(e){var r;!function(e,o,a){function i(e){var t=this,n=u();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function l(e,t){var n=new i(e),r=t&&t.state,o=n.next;return o.int32=function(){return 4294967296*n.next()|0},o.double=function(){return o()+1.1102230246251565e-16*(2097152*o()|0)},o.quick=o,r&&("object"==typeof r&&s(r,n),o.state=function(){return s(n,{})}),o}function u(){var e=4022871197;return function(t){t=t.toString();for(var n=0;n<t.length;n++){e+=t.charCodeAt(n);var r=.02519603282416938*e;e=r>>>0,r-=e,r*=e,e=r>>>0,r-=e,e+=4294967296*r}return 2.3283064365386963e-10*(e>>>0)}}o&&o.exports?o.exports=l:n(287)&&n(874)?void 0!==(r=function(){return l}.call(t,n,t,o))&&(o.exports=r):this.alea=l}(0,"object"==typeof e&&e,n(287))}).call(t,n(92)(e))},function(e,t,n){(function(e){var r;!function(e,o,a){function i(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function l(e,t){var n=new i(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=n.next()>>>11,t=(n.next()>>>0)/4294967296,r=(e+t)/(1<<21)}while(0===r);return r},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=l:n(287)&&n(874)?void 0!==(r=function(){return l}.call(t,n,t,o))&&(o.exports=r):this.xor128=l}(0,"object"==typeof e&&e,n(287))}).call(t,n(92)(e))},function(e,t,n){(function(e){var r;!function(e,o,a){function i(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function l(e,t){var n=new i(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=n.next()>>>11,t=(n.next()>>>0)/4294967296,r=(e+t)/(1<<21)}while(0===r);return r},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=l:n(287)&&n(874)?void 0!==(r=function(){return l}.call(t,n,t,o))&&(o.exports=r):this.xorwow=l}(0,"object"==typeof e&&e,n(287))}).call(t,n(92)(e))},function(e,t,n){(function(e){var r;!function(e,o,a){function i(e){var t=this;t.next=function(){var e,n,r=t.x,o=t.i;return e=r[o],e^=e>>>7,n=e^e<<24,e=r[o+1&7],n^=e^e>>>10,e=r[o+3&7],n^=e^e>>>3,e=r[o+4&7],n^=e^e<<7,e=r[o+7&7],e^=e<<13,n^=e^e<<9,r[o]=n,t.i=o+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function l(e,t){null==e&&(e=+new Date);var n=new i(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=n.next()>>>11,t=(n.next()>>>0)/4294967296,r=(e+t)/(1<<21)}while(0===r);return r},o.int32=n.next,o.quick=o,r&&(r.x&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=l:n(287)&&n(874)?void 0!==(r=function(){return l}.call(t,n,t,o))&&(o.exports=r):this.xorshift7=l}(0,"object"==typeof e&&e,n(287))}).call(t,n(92)(e))},function(e,t,n){(function(e){var r;!function(e,o,a){function i(e){var t=this;t.next=function(){var e,n,r=t.w,o=t.X,a=t.i;return t.w=r=r+1640531527|0,n=o[a+34&127],e=o[a=a+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=o[a]=n^e,t.i=a,n+(r^r>>>16)|0},function(e,t){var n,r,o,a,i,s=[],l=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,l=Math.max(l,t.length)),o=0,a=-32;a<l;++a)t&&(r^=t.charCodeAt((a+32)%t.length)),0===a&&(i=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,a>=0&&(i=i+1640531527|0,n=s[127&a]^=r+i,o=0==n?o+1:0);for(o>=128&&(s[127&(t&&t.length||0)]=-1),o=127,a=512;a>0;--a)r=s[o+34&127],n=s[o=o+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[o]=r^n;e.w=i,e.X=s,e.i=o}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function l(e,t){null==e&&(e=+new Date);var n=new i(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=n.next()>>>11,t=(n.next()>>>0)/4294967296,r=(e+t)/(1<<21)}while(0===r);return r},o.int32=n.next,o.quick=o,r&&(r.X&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=l:n(287)&&n(874)?void 0!==(r=function(){return l}.call(t,n,t,o))&&(o.exports=r):this.xor4096=l}(0,"object"==typeof e&&e,n(287))}).call(t,n(92)(e))},function(e,t,n){(function(e){var r;!function(e,o,a){function i(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,o=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^o,o=o-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^o,t.a=o-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function l(e,t){var n=new i(e),r=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=n.next()>>>11,t=(n.next()>>>0)/4294967296,r=(e+t)/(1<<21)}while(0===r);return r},o.int32=n.next,o.quick=o,r&&("object"==typeof r&&s(r,n),o.state=function(){return s(n,{})}),o}o&&o.exports?o.exports=l:n(287)&&n(874)?void 0!==(r=function(){return l}.call(t,n,t,o))&&(o.exports=r):this.tychei=l}(0,"object"==typeof e&&e,n(287))}).call(t,n(92)(e))},function(e,t,n){var r;!function(o,a){function i(e,t,n){var r=[];t=1==t?{entropy:!0}:t||{};var i=c(u(t.entropy?[e,p(o)]:null==e?d():e,3),r),f=new s(r),h=function(){for(var e=f.g(y),t=v,n=0;e<b;)e=(e+n)*m,t*=m,n=f.g(1);for(;e>=_;)e/=2,t/=2,n>>>=1;return(e+n)/t};return h.int32=function(){return 0|f.g(4)},h.quick=function(){return f.g(4)/4294967296},h.double=h,c(p(f.S),o),(t.pass||n||function(e,t,n,r){return r&&(r.S&&l(r,f),e.state=function(){return l(f,{})}),n?(a[g]=e,t):e})(h,i,"global"in t?t.global:this==a,t.state)}function s(e){var t,n=e.length,r=this,o=0,a=r.i=r.j=0,i=r.S=[];for(n||(e=[n++]);o<m;)i[o]=o++;for(o=0;o<m;o++)i[o]=i[a=w&a+e[o%n]+(t=i[o])],i[a]=t;(r.g=function(e){for(var t,n=0,o=r.i,a=r.j,i=r.S;e--;)t=i[o=w&o+1],n=n*m+i[w&(i[o]=i[a=w&a+t])+(i[a]=t)];return r.i=o,r.j=a,n})(m)}function l(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function u(e,t){var n,r=[],o=typeof e;if(t&&"object"==o)for(n in e)try{r.push(u(e[n],t-1))}catch(e){}return r.length?r:"string"==o?e:e+"\0"}function c(e,t){for(var n,r=e+"",o=0;o<r.length;)t[w&o]=w&(n^=19*t[w&o])+r.charCodeAt(o++);return p(t)}function d(){try{var e;return f&&(e=f.randomBytes)?e=e(m):(e=new Uint8Array(m),(h.crypto||h.msCrypto).getRandomValues(e)),p(e)}catch(e){var t=h.navigator,n=t&&t.plugins;return[+new Date,h,n,h.screen,p(o)]}}function p(e){return String.fromCharCode.apply(0,e)}var f,h=this,m=256,y=6,g="random",v=a.pow(m,y),b=a.pow(2,52),_=2*b,w=m-1;if(a["seed"+g]=i,c(a.random(),o),"object"==typeof e&&e.exports){e.exports=i;try{f=n(1252)}catch(e){}}else void 0!==(r=function(){return i}.call(t,n,t,e))&&(e.exports=r)}([],Math)},function(e,t){},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(1),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),d=n(33),p=n(13),f=n(890),h=r(f),m=n(862),y=n(173),g=r(y),v=n(63),b=n(887),_=n(863),w=r(_),x=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},S=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"render",value:function(){var e=this,t=this.props.totalAlteredCount+this.props.totalUnalteredCount,n=[{childName:"all",target:"data",eventHandlers:{onMouseOver:function(){return[{target:"data",mutation:function(t){t.datum.y>=1&&(e.tooltipModel=t)}}]},onMouseOut:function(){return[{target:"data",mutation:function(){e.tooltipModel=null}}]}}}];return c.createElement("div",{className:"posRelative"},c.createElement("div",{style:{display:"flex",flexDirection:"row"}},c.createElement("div",null,c.createElement("div",{style:{paddingTop:35}},c.createElement(g.default,{placement:"right",overlay:c.createElement("span",null,"Query genes selected by user"),destroyTooltipOnHide:!0},c.createElement("i",{className:"fa fa-info-circle"}))),c.createElement("div",{style:{paddingTop:8}},c.createElement(g.default,{placement:"right",overlay:c.createElement("span",null,"Gene selected in table"),destroyTooltipOnHide:!0},c.createElement("i",{className:"fa fa-info-circle"})))),c.createElement(m.VictoryChart,{height:136,width:350,padding:{top:30,bottom:60,left:86,right:40},theme:w.default},c.createElement(m.VictoryStack,{domain:{x:[0,t],y:[1,5]},events:n,colorScale:["lightgrey","#58acfa","lightgrey","#58acfa","lightgrey"],horizontal:!0},c.createElement(m.VictoryBar,{data:[{x:2,y:0},{x:4,y:this.props.selectedGene?this.props.selectedGeneStats[0]:0,index:0}],style:{data:{width:21}}}),c.createElement(m.VictoryBar,{data:[{x:2,y:this.props.totalAlteredCount,index:0},{x:4,y:this.props.selectedGene?this.props.selectedGeneStats[1]:0,index:1}],style:{data:{width:21}}}),c.createElement(m.VictoryBar,{data:[{x:2,y:0},{x:4,y:this.props.selectedGene?.001*t:0}],style:{data:{width:21}}}),c.createElement(m.VictoryBar,{data:[{x:2,y:0},{x:4,y:this.props.selectedGene?this.props.selectedGeneStats[2]:0,index:2}],style:{data:{width:21}}}),c.createElement(m.VictoryBar,{data:[{x:2,y:this.props.totalUnalteredCount,index:1},{x:4,y:this.props.selectedGene?this.props.selectedGeneStats[3]:0,index:3}],style:{data:{width:21}}})),c.createElement(m.VictoryAxis,{dependentAxis:!0,invertAxis:!0,tickValues:["","Query Genes",null,this.props.selectedGene?this.props.selectedGene:"None selected",""],style:{ticks:{size:5,stroke:function(e){return null!=e?"black":"transparent"}},tickLabels:{padding:2,fontSize:12,fill:"black"},grid:{pointerEvents:"none",stroke:"none"},axis:{stroke:"black",strokeWidth:1}}}),!this.props.selectedGene&&c.createElement(m.VictoryLabel,{text:"Select gene in table or volcano plot",x:91,y:65,style:{fontSize:12,fontFamily:"Arial, Helvetica"}}))),this.tooltipModel&&c.createElement(v.Popover,{arrowOffsetTop:14,positionLeft:1.06*this.tooltipModel.y+16,positionTop:this.tooltipModel.x-13,className:h.default.BarTooltip},c.createElement("div",null,(0,b.getBarChartTooltipContent)(this.tooltipModel,this.props.selectedGene))))}}]),t}(c.Component);x([p.observable],S.prototype,"tooltipModel",void 0),S=x([d.observer],S),t.default=S},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(1),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),d=n(33),p=n(1083),f=r(p),h=n(854),m=r(h),y=n(936),g=r(y),v=n(865),b=r(v),_=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},w=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"onProfileChange",value:function(e){this.props.store.selectedEnrichmentCopyNumberProfile=e}},{key:"render",value:function(){return this.props.store.copyNumberHomdelEnrichmentData.isPending||this.props.store.copyNumberAmpEnrichmentData.isPending?c.createElement(m.default,{isLoading:!0,style:{display:"inline-block",marginLeft:10,marginTop:20}}):c.createElement("div",null,c.createElement(g.default,{dataSets:this.props.store.copyNumberEnrichmentProfiles.result,onChange:this.onProfileChange,selectedValue:this.props.store.selectedEnrichmentCopyNumberProfile.molecularProfileId,molecularProfileIdToProfiledSampleCount:this.props.store.molecularProfileIdToProfiledSampleCount.result}),c.createElement(f.default,{data:this.props.store.copyNumberHomdelEnrichmentData.result,totalAlteredCount:this.props.store.alteredSampleKeys.result.length,totalUnalteredCount:this.props.store.unalteredSampleKeys.result.length,headerName:"Deep Deletion - "+this.props.store.selectedEnrichmentCopyNumberProfile.name,store:this.props.store,alterationType:"a deep deletion"}),c.createElement("hr",null),c.createElement(f.default,{data:this.props.store.copyNumberAmpEnrichmentData.result,totalAlteredCount:this.props.store.alteredSampleKeys.result.length,totalUnalteredCount:this.props.store.unalteredSampleKeys.result.length,headerName:"Amplification - "+this.props.store.selectedEnrichmentCopyNumberProfile.name,store:this.props.store,alterationType:"an amplification"}))}}]),t}(c.Component);_([b.default],w.prototype,"onProfileChange",null),w=_([d.observer],w),t.default=w},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(1),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),d=n(33),p=n(1087),f=r(p),h=n(854),m=r(h),y=n(936),g=r(y),v=n(865),b=r(v),_=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},w=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"onProfileChange",value:function(e){this.props.store.selectedEnrichmentMRNAProfile=e}},{key:"render",value:function(){return this.props.store.mRNAEnrichmentData.isPending?c.createElement(m.default,{isLoading:!0,style:{display:"inline-block",marginLeft:10,marginTop:20}}):c.createElement("div",{"data-test":"MRNAEnrichmentsTab"},c.createElement(g.default,{dataSets:this.props.store.mRNAEnrichmentProfiles.result,onChange:this.onProfileChange,selectedValue:this.props.store.selectedEnrichmentMRNAProfile.molecularProfileId,molecularProfileIdToProfiledSampleCount:this.props.store.molecularProfileIdToProfiledSampleCount.result}),c.createElement(f.default,{data:this.props.store.mRNAEnrichmentData.result,selectedProfile:this.props.store.selectedEnrichmentMRNAProfile,store:this.props.store}))}}]),t}(c.Component);_([b.default],w.prototype,"onProfileChange",null),w=_([d.observer],w),t.default=w},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ExpressionEnrichmentTableComponent=t.ExpressionEnrichmentTableColumnType=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=n(1),d=o(c),p=n(3),f=o(p),h=n(178),m=r(h),y=n(33),g=n(13),v=n(63),b=n(887),_=n(877),w=n(890),x=r(w),S=n(1055),C=n(865),k=r(C),E=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":u(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},M=t.ExpressionEnrichmentTableColumnType=void 0;!function(e){e[e.GENE=0]="GENE",e[e.CYTOBAND=1]="CYTOBAND",e[e.MEAN_IN_ALTERED=2]="MEAN_IN_ALTERED",e[e.MEAN_IN_UNALTERED=3]="MEAN_IN_UNALTERED",e[e.STANDARD_DEVIATION_IN_ALTERED=4]="STANDARD_DEVIATION_IN_ALTERED",e[e.STANDARD_DEVIATION_IN_UNALTERED=5]="STANDARD_DEVIATION_IN_UNALTERED",e[e.LOG_RATIO=6]="LOG_RATIO",e[e.P_VALUE=7]="P_VALUE",e[e.Q_VALUE=8]="Q_VALUE",e[e.TENDENCY=9]="TENDENCY"}(M||(t.ExpressionEnrichmentTableColumnType=M={}));var A=t.ExpressionEnrichmentTableComponent=function(e){function t(){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),t}(m.default),T=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._columns=n.generateColumns(),n}return s(t,e),l(t,[{key:"checkboxChange",value:function(e){var t=f.find(this.props.data,{hugoGeneSymbol:e});t.checked=!t.checked,this._columns=this.generateColumns(),this.props.onCheckGene(e)}},{key:"onRowClick",value:function(e){this.props.onGeneNameClick(e.hugoGeneSymbol,e.entrezGeneId),this.props.dataStore.setHighlighted(e)}},{key:"generateColumns",value:function(){var e=this,t={};return t[M.GENE]={name:"Gene",render:function(t){return d.createElement("div",{style:{display:"flex"}},d.createElement(v.Checkbox,{checked:t.checked,disabled:t.disabled,key:t.hugoGeneSymbol,className:x.default.Checkbox,onChange:function(){return e.checkboxChange(t.hugoGeneSymbol)},title:t.disabled?"This is one of the query genes":""}),d.createElement("span",{className:x.default.GeneName},d.createElement("b",null,t.hugoGeneSymbol)))},tooltip:d.createElement("span",null,"Gene"),filter:function(e,t,n){return e.hugoGeneSymbol.toUpperCase().includes(n)},sortBy:function(e){return e.hugoGeneSymbol},download:function(e){return e.hugoGeneSymbol}},t[M.CYTOBAND]={name:"Cytoband",render:function(e){return d.createElement("span",null,e.cytoband)},tooltip:d.createElement("span",null,"Cytoband"),filter:S.cytobandFilter,sortBy:function(e){return e.cytoband},download:function(e){return e.cytoband}},t[M.MEAN_IN_ALTERED]={name:"μ in altered group",render:function(e){return d.createElement("span",null,e.meanExpressionInAlteredGroup.toFixed(2))},tooltip:d.createElement("span",null,"Mean expression of the listed gene in samples that have alterations in the query gene(s)."),sortBy:function(e){return e.meanExpressionInAlteredGroup},download:function(e){return e.meanExpressionInAlteredGroup.toFixed(2)}},t[M.MEAN_IN_UNALTERED]={name:"μ in unaltered group",render:function(e){return d.createElement("span",null,e.meanExpressionInUnalteredGroup.toFixed(2))},tooltip:d.createElement("span",null,"Mean expression of the listed gene in samples that do not have alterations in the query gene(s)."),sortBy:function(e){return e.meanExpressionInUnalteredGroup},download:function(e){return e.meanExpressionInUnalteredGroup.toFixed(2)}},t[M.STANDARD_DEVIATION_IN_ALTERED]={name:"σ in altered group",render:function(e){return d.createElement("span",null,e.standardDeviationInAlteredGroup.toFixed(2))},tooltip:d.createElement("span",null,"Standard deviation of expression of the listed gene in samples that have alterations in the query gene(s)."),sortBy:function(e){return e.standardDeviationInAlteredGroup},download:function(e){return e.standardDeviationInAlteredGroup.toFixed(2)}},t[M.STANDARD_DEVIATION_IN_UNALTERED]={name:"σ in unaltered group",render:function(e){return d.createElement("span",null,e.standardDeviationInUnalteredGroup.toFixed(2))},tooltip:d.createElement("span",null,"Standard deviation of expression of the listed gene in samples that do not have alterations in the query gene(s)."),sortBy:function(e){return e.standardDeviationInUnalteredGroup},download:function(e){return e.standardDeviationInUnalteredGroup.toFixed(2)}},t[M.LOG_RATIO]={name:"Log Ratio",render:function(e){return d.createElement("span",null,(0,b.formatLogOddsRatio)(e.logRatio))},tooltip:d.createElement("span",null,"Log2 based ratio of (mean in altered / mean in unaltered)"),sortBy:function(e){return Number(e.logRatio)},download:function(e){return(0,b.formatLogOddsRatio)(e.logRatio)}},t[M.P_VALUE]={name:"p-Value",render:function(e){return d.createElement("span",{style:{whiteSpace:"nowrap"}},(0,_.toConditionalPrecision)(e.pValue,3,.01))},tooltip:d.createElement("span",null,"Derived from Fisher Exact Test"),sortBy:function(e){return e.pValue},download:function(e){return(0,_.toConditionalPrecision)(e.pValue,3,.01)}},t[M.Q_VALUE]={name:"q-Value",render:function(e){return d.createElement("span",{style:{whiteSpace:"nowrap"}},(0,b.formatValueWithStyle)(e.qValue))},tooltip:d.createElement("span",null,"Derived from Benjamini-Hochberg procedure"),sortBy:function(e){return e.qValue},download:function(e){return(0,_.toConditionalPrecision)(e.qValue,3,.01)}},t[M.TENDENCY]={name:"Tendency",render:function(e){return d.createElement("div",{className:x.default.Tendency},(0,b.calculateExpressionTendency)(Number(e.logRatio)),e.qValue<.05?d.createElement(v.Badge,{style:{backgroundColor:"#58ACFA",fontSize:8,marginBottom:2}},"Significant"):"")},tooltip:d.createElement("table",null,d.createElement("tr",null,d.createElement("td",null,"Log ratio > 0"),d.createElement("td",null,": Over-expressed in altered group")),d.createElement("tr",null,d.createElement("td",null,"Log ratio <= 0"),d.createElement("td",null,": Under-expressed in altered group")),d.createElement("tr",null,d.createElement("td",null,"q-Value < 0.05"),d.createElement("td",null,": Significant association"))),filter:function(e,t,n){return(0,b.calculateExpressionTendency)(Number(e.logRatio)).toUpperCase().includes(n)},sortBy:function(e){return(0,b.calculateExpressionTendency)(Number(e.logRatio))},download:function(e){return(0,b.calculateExpressionTendency)(Number(e.logRatio))}},t}},{key:"render",value:function(){var e=f.sortBy(this._columns,function(e){return e.order});return d.createElement(A,{initialItemsPerPage:20,paginationProps:{itemsPerPageOptions:[20]},columns:e,data:this.props.data,initialSortColumn:this.props.initialSortColumn,onRowClick:this.onRowClick,dataStore:this.props.dataStore})}}]),t}(d.Component);T.defaultProps={columns:[M.GENE,M.CYTOBAND,M.MEAN_IN_ALTERED,M.MEAN_IN_UNALTERED,M.STANDARD_DEVIATION_IN_ALTERED,M.STANDARD_DEVIATION_IN_UNALTERED,M.LOG_RATIO,M.P_VALUE,M.Q_VALUE,M.TENDENCY],initialSortColumn:"q-Value"},E([g.observable],T.prototype,"_columns",void 0),E([k.default],T.prototype,"onRowClick",null),T=E([y.observer],T),t.default=T},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(1),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),d=n(33),p=n(13),f=n(862),h=n(63),m=n(889),y=r(m),g=n(179),v=r(g),b=n(877),_=n(931),w=n(887),x=n(865),S=r(x),C=n(863),k=r(C),E=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},M=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(i,s)}l((r=r.apply(e,t||[])).next())})},A=function(e){function t(){o(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.isTooltipHovered=!1,e.tooltipCounter=0,e.svgsaver=new y.default,e.scatterData=[],e}return i(t,e),s(t,[{key:"componentWillReceiveProps",value:function(){this.scatterData=[]}},{key:"downloadSvg",value:function(){this.svgsaver.asSvg(this.svgContainer.firstChild,this.props.fileName+".svg")}},{key:"downloadPng",value:function(){this.svgsaver.asPng(this.svgContainer.firstChild,this.props.fileName+".png")}},{key:"downloadData",value:function(){(0,v.default)((0,w.getDownloadContent)(this.scatterData,this.props.selectedGeneHugo,this.props.selectedProfile.name),this.props.fileName+".txt")}},{key:"tooltipMouseEnter",value:function(){this.isTooltipHovered=!0}},{key:"tooltipMouseLeave",value:function(){this.isTooltipHovered=!1,this.tooltipModel=null}},{key:"render",value:function(){var e=this,t=this.props.selectedProfile.molecularProfileId,n=void 0;this.props.selectedGeneHugo&&(n=this.props.store.numericGeneMolecularDataCache.get({entrezGeneId:this.props.selectedGeneEntrez,molecularProfileId:t}).result),n&&n.length>0&&0===this.scatterData.length&&(this.scatterData=(0,w.getBoxPlotScatterData)(n,t,this.props.store.caseAggregatedData.result.samples,this.props.store.alteredSampleKeys.result));var r=[{target:"data",eventHandlers:{onMouseOver:function(){return[{target:"data",mutation:function(t){return e.tooltipModel=t,e.tooltipCounter++,{active:!0}}}]},onMouseOut:function(){return[{target:"data",mutation:function(){return M(e,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_.sleep)(100);case 2:return this.isTooltipHovered||1!==this.tooltipCounter||(this.tooltipModel=null),this.tooltipCounter--,e.abrupt("return",{active:!1});case 5:case"end":return e.stop()}},e,this)}))}}]}}}];return c.createElement("div",null,this.props.selectedGeneHugo&&this.scatterData.length>0&&c.createElement("div",null,c.createElement("div",{className:"small",style:{margin:"10px 0",paddingRight:20}},"Boxplots of ",this.props.selectedProfile.name," data for altered and unaltered cases"),c.createElement("div",{className:"posRelative"},c.createElement("div",{className:"borderedChart inlineBlock posRelative"},c.createElement("div",{className:"btn-group",style:{position:"absolute",zIndex:10,right:10},role:"group"},c.createElement("button",{className:"btn btn-default btn-xs",onClick:this.downloadSvg},"SVG ",c.createElement("i",{className:"fa fa-cloud-download"})),c.createElement("button",{className:"btn btn-default btn-xs",onClick:this.downloadPng},"PNG ",c.createElement("i",{className:"fa fa-cloud-download"})),c.createElement("button",{className:"btn btn-default btn-xs",onClick:this.downloadData},"Data ",c.createElement("i",{className:"fa fa-cloud-download"}))),c.createElement(f.VictoryChart,{domainPadding:{x:60,y:20},height:350,width:350,padding:{top:40,bottom:60,left:60,right:40},containerComponent:c.createElement(f.VictoryContainer,{responsive:!1,containerRef:function(t){return e.svgContainer=t}}),theme:k.default},c.createElement(f.VictoryAxis,{tickValues:[1,2],tickFormat:function(e){return 1===e?"Altered":"Unaltered"},label:"Query: "+(0,w.shortenGenesLabel)(this.props.queryGenes,2)+"\n(q-Value: "+(0,b.toConditionalPrecision)(this.props.selectedGeneQValue,3,.01)+")",offsetY:70,style:{axisLabel:{padding:40},grid:{stroke:"none"}}}),c.createElement(f.VictoryAxis,{label:this.props.selectedGeneHugo+", "+this.props.selectedProfile.name,dependentAxis:!0,style:{axisLabel:{padding:40},grid:{stroke:"none"}}}),c.createElement(f.VictoryBoxPlot,{data:(0,w.getBoxPlotModels)(this.scatterData),boxWidth:60,whiskerWidth:30,style:{q1:{fillOpacity:0,strokeWidth:1,stroke:"#BDBDBD"},q3:{fillOpacity:0,strokeWidth:1,stroke:"#BDBDBD"},median:{strokeWidth:3,stroke:"#BDBDBD"},min:{strokeWidth:1,stroke:"#BDBDBD"},max:{strokeWidth:1,stroke:"#BDBDBD"}}}),c.createElement(f.VictoryScatter,{data:this.scatterData,events:r,size:function(e,t){return t?10:3},style:{data:{fill:"#58ACFA",strokeWidth:0,stroke:"#0174DF"}}}))),this.tooltipModel&&c.createElement(h.Popover,{positionLeft:this.tooltipModel.x+22,positionTop:this.tooltipModel.y-22,className:"cbioTooltip",onMouseEnter:this.tooltipMouseEnter,onMouseLeave:this.tooltipMouseLeave},c.createElement("a",{href:"/case.do#/patient?sampleId="+this.tooltipModel.datum.sampleId+"&studyId="+this.tooltipModel.datum.studyId,target:"_blank"},c.createElement("b",null,this.tooltipModel.datum.sampleId)),c.createElement("br",null),"mRNA expression: ",this.tooltipModel.datum.y.toFixed(3),c.createElement("br",null),"Alteration(s): ",this.tooltipModel.datum.alterations))),!this.props.selectedGeneHugo&&c.createElement("div",{className:"borderedChart inlineBlock",style:{marginTop:20}},c.createElement("div",{className:"text-center",style:{width:350}},"Click on a gene in table to render plots here.")))}}]),t}(c.Component);E([p.observable],A.prototype,"tooltipModel",void 0),E([S.default],A.prototype,"downloadSvg",null),E([S.default],A.prototype,"downloadPng",null),E([S.default],A.prototype,"downloadData",null),E([S.default],A.prototype,"tooltipMouseEnter",null),E([S.default],A.prototype,"tooltipMouseLeave",null),A=E([d.observer],A),t.default=A},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(1),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),d=n(33),p=n(1087),f=r(p),h=n(854),m=r(h),y=n(936),g=r(y),v=n(865),b=r(v),_=function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":l(Reflect))&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},w=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"onProfileChange",value:function(e){this.props.store.selectedEnrichmentProteinProfile=e}},{key:"render",value:function(){return this.props.store.proteinEnrichmentData.isPending?c.createElement(m.default,{isLoading:!0,style:{display:"inline-block",marginLeft:10,marginTop:20}}):c.createElement("div",null,c.createElement(g.default,{dataSets:this.props.store.proteinEnrichmentProfiles.result,onChange:this.onProfileChange,selectedValue:this.props.store.selectedEnrichmentProteinProfile.molecularProfileId,molecularProfileIdToProfiledSampleCount:this.props.store.molecularProfileIdToProfiledSampleCount.result}),c.createElement(f.default,{data:this.props.store.proteinEnrichmentData.result,selectedProfile:this.props.store.selectedEnrichmentProteinProfile,store:this.props.store}))}}]),t}(c.Component);_([b.default],w.prototype,"onProfileChange",null),w=_([d.observer],w),t.default=w}]));
//# sourceMappingURL=0.b428a6b2148a92c239c7.chunk.js.map